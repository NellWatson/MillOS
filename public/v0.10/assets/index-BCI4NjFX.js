var UQ=Object.defineProperty;var LQ=(t,e,n)=>e in t?UQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var kr=(t,e,n)=>LQ(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();var rS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ki(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var aA={exports:{}},Dx={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vU;function BQ(){if(vU)return Dx;vU=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,a){var s=null;if(a!==void 0&&(s=""+a),r.key!==void 0&&(s=""+r.key),"key"in r){a={};for(var o in r)o!=="key"&&(a[o]=r[o])}else a=r;return r=a.ref,{$$typeof:t,type:i,key:s,ref:r!==void 0?r:null,props:a}}return Dx.Fragment=e,Dx.jsx=n,Dx.jsxs=n,Dx}var xU;function zQ(){return xU||(xU=1,aA.exports=BQ()),aA.exports}var c=zQ(),sA={exports:{}},Px={},oA={exports:{}},lA={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yU;function kQ(){return yU||(yU=1,(function(t){function e(k,$){var ee=k.length;k.push($);e:for(;0<ee;){var te=ee-1>>>1,ae=k[te];if(0<r(ae,$))k[te]=$,k[ee]=ae,ee=te;else break e}}function n(k){return k.length===0?null:k[0]}function i(k){if(k.length===0)return null;var $=k[0],ee=k.pop();if(ee!==$){k[0]=ee;e:for(var te=0,ae=k.length,q=ae>>>1;te<q;){var K=2*(te+1)-1,ie=k[K],ue=K+1,me=k[ue];if(0>r(ie,ee))ue<ae&&0>r(me,ie)?(k[te]=me,k[ue]=ee,te=ue):(k[te]=ie,k[K]=ee,te=K);else if(ue<ae&&0>r(me,ee))k[te]=me,k[ue]=ee,te=ue;else break e}}return $}function r(k,$){var ee=k.sortIndex-$.sortIndex;return ee!==0?ee:k.id-$.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var l=[],u=[],h=1,p=null,g=3,x=!1,b=!1,M=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function j(k){for(var $=n(u);$!==null;){if($.callback===null)i(u);else if($.startTime<=k)i(u),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(u)}}function R(k){if(M=!1,j(k),!b)if(n(l)!==null)b=!0,C||(C=!0,G());else{var $=n(u);$!==null&&Y(R,$.startTime-k)}}var C=!1,D=-1,U=5,I=-1;function L(){return S?!0:!(t.unstable_now()-I<U)}function F(){if(S=!1,C){var k=t.unstable_now();I=k;var $=!0;try{e:{b=!1,M&&(M=!1,A(D),D=-1),x=!0;var ee=g;try{t:{for(j(k),p=n(l);p!==null&&!(p.expirationTime>k&&L());){var te=p.callback;if(typeof te=="function"){p.callback=null,g=p.priorityLevel;var ae=te(p.expirationTime<=k);if(k=t.unstable_now(),typeof ae=="function"){p.callback=ae,j(k),$=!0;break t}p===n(l)&&i(l),j(k)}else i(l);p=n(l)}if(p!==null)$=!0;else{var q=n(u);q!==null&&Y(R,q.startTime-k),$=!1}}break e}finally{p=null,g=ee,x=!1}$=void 0}}finally{$?G():C=!1}}}var G;if(typeof E=="function")G=function(){E(F)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,W=H.port2;H.port1.onmessage=F,G=function(){W.postMessage(null)}}else G=function(){T(F,0)};function Y(k,$){D=T(function(){k(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(k){switch(g){case 1:case 2:case 3:var $=3;break;default:$=g}var ee=g;g=$;try{return k()}finally{g=ee}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(k,$){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var ee=g;g=k;try{return $()}finally{g=ee}},t.unstable_scheduleCallback=function(k,$,ee){var te=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?te+ee:te):ee=te,k){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=ee+ae,k={id:h++,callback:$,priorityLevel:k,startTime:ee,expirationTime:ae,sortIndex:-1},ee>te?(k.sortIndex=ee,e(u,k),n(l)===null&&k===n(u)&&(M?(A(D),D=-1):M=!0,Y(R,ee-te))):(k.sortIndex=ae,e(l,k),b||x||(b=!0,C||(C=!0,G()))),k},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(k){var $=g;return function(){var ee=g;g=$;try{return k.apply(this,arguments)}finally{g=ee}}}})(lA)),lA}var bU;function FQ(){return bU||(bU=1,oA.exports=kQ()),oA.exports}var cA={exports:{}},jn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SU;function GQ(){if(SU)return jn;SU=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),g=Symbol.iterator;function x(q){return q===null||typeof q!="object"?null:(q=g&&q[g]||q["@@iterator"],typeof q=="function"?q:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,S={};function T(q,K,ie){this.props=q,this.context=K,this.refs=S,this.updater=ie||b}T.prototype.isReactComponent={},T.prototype.setState=function(q,K){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,K,"setState")},T.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function A(){}A.prototype=T.prototype;function E(q,K,ie){this.props=q,this.context=K,this.refs=S,this.updater=ie||b}var j=E.prototype=new A;j.constructor=E,M(j,T.prototype),j.isPureReactComponent=!0;var R=Array.isArray;function C(){}var D={H:null,A:null,T:null,S:null},U=Object.prototype.hasOwnProperty;function I(q,K,ie){var ue=ie.ref;return{$$typeof:t,type:q,key:K,ref:ue!==void 0?ue:null,props:ie}}function L(q,K){return I(q.type,K,q.props)}function F(q){return typeof q=="object"&&q!==null&&q.$$typeof===t}function G(q){var K={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(ie){return K[ie]})}var H=/\/+/g;function W(q,K){return typeof q=="object"&&q!==null&&q.key!=null?G(""+q.key):K.toString(36)}function Y(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(C,C):(q.status="pending",q.then(function(K){q.status==="pending"&&(q.status="fulfilled",q.value=K)},function(K){q.status==="pending"&&(q.status="rejected",q.reason=K)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function k(q,K,ie,ue,me){var fe=typeof q;(fe==="undefined"||fe==="boolean")&&(q=null);var de=!1;if(q===null)de=!0;else switch(fe){case"bigint":case"string":case"number":de=!0;break;case"object":switch(q.$$typeof){case t:case e:de=!0;break;case h:return de=q._init,k(de(q._payload),K,ie,ue,me)}}if(de)return me=me(q),de=ue===""?"."+W(q,0):ue,R(me)?(ie="",de!=null&&(ie=de.replace(H,"$&/")+"/"),k(me,K,ie,"",function(Ie){return Ie})):me!=null&&(F(me)&&(me=L(me,ie+(me.key==null||q&&q.key===me.key?"":(""+me.key).replace(H,"$&/")+"/")+de)),K.push(me)),1;de=0;var _e=ue===""?".":ue+":";if(R(q))for(var Te=0;Te<q.length;Te++)ue=q[Te],fe=_e+W(ue,Te),de+=k(ue,K,ie,fe,me);else if(Te=x(q),typeof Te=="function")for(q=Te.call(q),Te=0;!(ue=q.next()).done;)ue=ue.value,fe=_e+W(ue,Te++),de+=k(ue,K,ie,fe,me);else if(fe==="object"){if(typeof q.then=="function")return k(Y(q),K,ie,ue,me);throw K=String(q),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return de}function $(q,K,ie){if(q==null)return q;var ue=[],me=0;return k(q,ue,"","",function(fe){return K.call(ie,fe,me++)}),ue}function ee(q){if(q._status===-1){var K=q._result;K=K(),K.then(function(ie){(q._status===0||q._status===-1)&&(q._status=1,q._result=ie)},function(ie){(q._status===0||q._status===-1)&&(q._status=2,q._result=ie)}),q._status===-1&&(q._status=0,q._result=K)}if(q._status===1)return q._result.default;throw q._result}var te=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},ae={map:$,forEach:function(q,K,ie){$(q,function(){K.apply(this,arguments)},ie)},count:function(q){var K=0;return $(q,function(){K++}),K},toArray:function(q){return $(q,function(K){return K})||[]},only:function(q){if(!F(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return jn.Activity=p,jn.Children=ae,jn.Component=T,jn.Fragment=n,jn.Profiler=r,jn.PureComponent=E,jn.StrictMode=i,jn.Suspense=l,jn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,jn.__COMPILER_RUNTIME={__proto__:null,c:function(q){return D.H.useMemoCache(q)}},jn.cache=function(q){return function(){return q.apply(null,arguments)}},jn.cacheSignal=function(){return null},jn.cloneElement=function(q,K,ie){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var ue=M({},q.props),me=q.key;if(K!=null)for(fe in K.key!==void 0&&(me=""+K.key),K)!U.call(K,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&K.ref===void 0||(ue[fe]=K[fe]);var fe=arguments.length-2;if(fe===1)ue.children=ie;else if(1<fe){for(var de=Array(fe),_e=0;_e<fe;_e++)de[_e]=arguments[_e+2];ue.children=de}return I(q.type,me,ue)},jn.createContext=function(q){return q={$$typeof:s,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:a,_context:q},q},jn.createElement=function(q,K,ie){var ue,me={},fe=null;if(K!=null)for(ue in K.key!==void 0&&(fe=""+K.key),K)U.call(K,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(me[ue]=K[ue]);var de=arguments.length-2;if(de===1)me.children=ie;else if(1<de){for(var _e=Array(de),Te=0;Te<de;Te++)_e[Te]=arguments[Te+2];me.children=_e}if(q&&q.defaultProps)for(ue in de=q.defaultProps,de)me[ue]===void 0&&(me[ue]=de[ue]);return I(q,fe,me)},jn.createRef=function(){return{current:null}},jn.forwardRef=function(q){return{$$typeof:o,render:q}},jn.isValidElement=F,jn.lazy=function(q){return{$$typeof:h,_payload:{_status:-1,_result:q},_init:ee}},jn.memo=function(q,K){return{$$typeof:u,type:q,compare:K===void 0?null:K}},jn.startTransition=function(q){var K=D.T,ie={};D.T=ie;try{var ue=q(),me=D.S;me!==null&&me(ie,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(C,te)}catch(fe){te(fe)}finally{K!==null&&ie.types!==null&&(K.types=ie.types),D.T=K}},jn.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},jn.use=function(q){return D.H.use(q)},jn.useActionState=function(q,K,ie){return D.H.useActionState(q,K,ie)},jn.useCallback=function(q,K){return D.H.useCallback(q,K)},jn.useContext=function(q){return D.H.useContext(q)},jn.useDebugValue=function(){},jn.useDeferredValue=function(q,K){return D.H.useDeferredValue(q,K)},jn.useEffect=function(q,K){return D.H.useEffect(q,K)},jn.useEffectEvent=function(q){return D.H.useEffectEvent(q)},jn.useId=function(){return D.H.useId()},jn.useImperativeHandle=function(q,K,ie){return D.H.useImperativeHandle(q,K,ie)},jn.useInsertionEffect=function(q,K){return D.H.useInsertionEffect(q,K)},jn.useLayoutEffect=function(q,K){return D.H.useLayoutEffect(q,K)},jn.useMemo=function(q,K){return D.H.useMemo(q,K)},jn.useOptimistic=function(q,K){return D.H.useOptimistic(q,K)},jn.useReducer=function(q,K,ie){return D.H.useReducer(q,K,ie)},jn.useRef=function(q){return D.H.useRef(q)},jn.useState=function(q){return D.H.useState(q)},jn.useSyncExternalStore=function(q,K,ie){return D.H.useSyncExternalStore(q,K,ie)},jn.useTransition=function(){return D.H.useTransition()},jn.version="19.2.0",jn}var MU;function Zg(){return MU||(MU=1,cA.exports=GQ()),cA.exports}var uA={exports:{}},ys={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _U;function VQ(){if(_U)return ys;_U=1;var t=Zg();function e(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(l,u,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:p==null?null:""+p,children:l,containerInfo:u,implementation:h}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return ys.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ys.createPortal=function(l,u){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return a(l,u,null,h)},ys.flushSync=function(l){var u=s.T,h=i.p;try{if(s.T=null,i.p=2,l)return l()}finally{s.T=u,i.p=h,i.d.f()}},ys.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,i.d.C(l,u))},ys.prefetchDNS=function(l){typeof l=="string"&&i.d.D(l)},ys.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var h=u.as,p=o(h,u.crossOrigin),g=typeof u.integrity=="string"?u.integrity:void 0,x=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;h==="style"?i.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:x}):h==="script"&&i.d.X(l,{crossOrigin:p,integrity:g,fetchPriority:x,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},ys.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var h=o(u.as,u.crossOrigin);i.d.M(l,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&i.d.M(l)},ys.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var h=u.as,p=o(h,u.crossOrigin);i.d.L(l,h,{crossOrigin:p,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},ys.preloadModule=function(l,u){if(typeof l=="string")if(u){var h=o(u.as,u.crossOrigin);i.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else i.d.m(l)},ys.requestFormReset=function(l){i.d.r(l)},ys.unstable_batchedUpdates=function(l,u){return l(u)},ys.useFormState=function(l,u,h){return s.H.useFormState(l,u,h)},ys.useFormStatus=function(){return s.H.useHostTransitionStatus()},ys.version="19.2.0",ys}var TU;function HQ(){if(TU)return uA.exports;TU=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),uA.exports=VQ(),uA.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wU;function qQ(){if(wU)return Px;wU=1;var t=FQ(),e=Zg(),n=HQ();function i(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)d+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function a(f){var d=f,y=f;if(f.alternate)for(;d.return;)d=d.return;else{f=d;do d=f,(d.flags&4098)!==0&&(y=d.return),f=d.return;while(f)}return d.tag===3?y:null}function s(f){if(f.tag===13){var d=f.memoizedState;if(d===null&&(f=f.alternate,f!==null&&(d=f.memoizedState)),d!==null)return d.dehydrated}return null}function o(f){if(f.tag===31){var d=f.memoizedState;if(d===null&&(f=f.alternate,f!==null&&(d=f.memoizedState)),d!==null)return d.dehydrated}return null}function l(f){if(a(f)!==f)throw Error(i(188))}function u(f){var d=f.alternate;if(!d){if(d=a(f),d===null)throw Error(i(188));return d!==f?null:f}for(var y=f,_=d;;){var N=y.return;if(N===null)break;var P=N.alternate;if(P===null){if(_=N.return,_!==null){y=_;continue}break}if(N.child===P.child){for(P=N.child;P;){if(P===y)return l(N),f;if(P===_)return l(N),d;P=P.sibling}throw Error(i(188))}if(y.return!==_.return)y=N,_=P;else{for(var X=!1,oe=N.child;oe;){if(oe===y){X=!0,y=N,_=P;break}if(oe===_){X=!0,_=N,y=P;break}oe=oe.sibling}if(!X){for(oe=P.child;oe;){if(oe===y){X=!0,y=P,_=N;break}if(oe===_){X=!0,_=P,y=N;break}oe=oe.sibling}if(!X)throw Error(i(189))}}if(y.alternate!==_)throw Error(i(190))}if(y.tag!==3)throw Error(i(188));return y.stateNode.current===y?f:d}function h(f){var d=f.tag;if(d===5||d===26||d===27||d===6)return f;for(f=f.child;f!==null;){if(d=h(f),d!==null)return d;f=f.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),E=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function G(f){return f===null||typeof f!="object"?null:(f=F&&f[F]||f["@@iterator"],typeof f=="function"?f:null)}var H=Symbol.for("react.client.reference");function W(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===H?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case M:return"Fragment";case T:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case C:return"SuspenseList";case I:return"Activity"}if(typeof f=="object")switch(f.$$typeof){case b:return"Portal";case E:return f.displayName||"Context";case A:return(f._context.displayName||"Context")+".Consumer";case j:var d=f.render;return f=f.displayName,f||(f=d.displayName||d.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case D:return d=f.displayName||null,d!==null?d:W(f.type)||"Memo";case U:d=f._payload,f=f._init;try{return W(f(d))}catch{}}return null}var Y=Array.isArray,k=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},te=[],ae=-1;function q(f){return{current:f}}function K(f){0>ae||(f.current=te[ae],te[ae]=null,ae--)}function ie(f,d){ae++,te[ae]=f.current,f.current=d}var ue=q(null),me=q(null),fe=q(null),de=q(null);function _e(f,d){switch(ie(fe,d),ie(me,f),ie(ue,null),d.nodeType){case 9:case 11:f=(f=d.documentElement)&&(f=f.namespaceURI)?kI(f):0;break;default:if(f=d.tagName,d=d.namespaceURI)d=kI(d),f=FI(d,f);else switch(f){case"svg":f=1;break;case"math":f=2;break;default:f=0}}K(ue),ie(ue,f)}function Te(){K(ue),K(me),K(fe)}function Ie(f){f.memoizedState!==null&&ie(de,f);var d=ue.current,y=FI(d,f.type);d!==y&&(ie(me,f),ie(ue,y))}function Re(f){me.current===f&&(K(ue),K(me)),de.current===f&&(K(de),Rx._currentValue=ee)}var ye,ct;function Ce(f){if(ye===void 0)try{throw Error()}catch(y){var d=y.stack.trim().match(/\n( *(at )?)/);ye=d&&d[1]||"",ct=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ye+f+ct}var re=!1;function Le(f,d){if(!f||re)return"";re=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var _={DetermineComponentFrameRoot:function(){try{if(d){var bt=function(){throw Error()};if(Object.defineProperty(bt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(bt,[])}catch(ot){var tt=ot}Reflect.construct(f,[],bt)}else{try{bt.call()}catch(ot){tt=ot}f.call(bt.prototype)}}else{try{throw Error()}catch(ot){tt=ot}(bt=f())&&typeof bt.catch=="function"&&bt.catch(function(){})}}catch(ot){if(ot&&tt&&typeof ot.stack=="string")return[ot.stack,tt.stack]}return[null,null]}};_.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var N=Object.getOwnPropertyDescriptor(_.DetermineComponentFrameRoot,"name");N&&N.configurable&&Object.defineProperty(_.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var P=_.DetermineComponentFrameRoot(),X=P[0],oe=P[1];if(X&&oe){var Me=X.split(`
`),Ke=oe.split(`
`);for(N=_=0;_<Me.length&&!Me[_].includes("DetermineComponentFrameRoot");)_++;for(;N<Ke.length&&!Ke[N].includes("DetermineComponentFrameRoot");)N++;if(_===Me.length||N===Ke.length)for(_=Me.length-1,N=Ke.length-1;1<=_&&0<=N&&Me[_]!==Ke[N];)N--;for(;1<=_&&0<=N;_--,N--)if(Me[_]!==Ke[N]){if(_!==1||N!==1)do if(_--,N--,0>N||Me[_]!==Ke[N]){var pt=`
`+Me[_].replace(" at new "," at ");return f.displayName&&pt.includes("<anonymous>")&&(pt=pt.replace("<anonymous>",f.displayName)),pt}while(1<=_&&0<=N);break}}}finally{re=!1,Error.prepareStackTrace=y}return(y=f?f.displayName||f.name:"")?Ce(y):""}function He(f,d){switch(f.tag){case 26:case 27:case 5:return Ce(f.type);case 16:return Ce("Lazy");case 13:return f.child!==d&&d!==null?Ce("Suspense Fallback"):Ce("Suspense");case 19:return Ce("SuspenseList");case 0:case 15:return Le(f.type,!1);case 11:return Le(f.type.render,!1);case 1:return Le(f.type,!0);case 31:return Ce("Activity");default:return""}}function Ue(f){try{var d="",y=null;do d+=He(f,y),y=f,f=f.return;while(f);return d}catch(_){return`
Error generating stack: `+_.message+`
`+_.stack}}var Ge=Object.prototype.hasOwnProperty,nt=t.unstable_scheduleCallback,Ae=t.unstable_cancelCallback,at=t.unstable_shouldYield,ne=t.unstable_requestPaint,Z=t.unstable_now,xe=t.unstable_getCurrentPriorityLevel,Xe=t.unstable_ImmediatePriority,Be=t.unstable_UserBlockingPriority,Ne=t.unstable_NormalPriority,yt=t.unstable_LowPriority,vt=t.unstable_IdlePriority,Dt=t.log,Nt=t.unstable_setDisableYieldValue,We=null,qe=null;function dt(f){if(typeof Dt=="function"&&Nt(f),qe&&typeof qe.setStrictMode=="function")try{qe.setStrictMode(We,f)}catch{}}var pe=Math.clz32?Math.clz32:ge,Oe=Math.log,ft=Math.LN2;function ge(f){return f>>>=0,f===0?32:31-(Oe(f)/ft|0)|0}var Ee=256,ut=262144,At=4194304;function lt(f){var d=f&42;if(d!==0)return d;switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return f&261888;case 262144:case 524288:case 1048576:case 2097152:return f&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return f&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return f}}function Ze(f,d,y){var _=f.pendingLanes;if(_===0)return 0;var N=0,P=f.suspendedLanes,X=f.pingedLanes;f=f.warmLanes;var oe=_&134217727;return oe!==0?(_=oe&~P,_!==0?N=lt(_):(X&=oe,X!==0?N=lt(X):y||(y=oe&~f,y!==0&&(N=lt(y))))):(oe=_&~P,oe!==0?N=lt(oe):X!==0?N=lt(X):y||(y=_&~f,y!==0&&(N=lt(y)))),N===0?0:d!==0&&d!==N&&(d&P)===0&&(P=N&-N,y=d&-d,P>=y||P===32&&(y&4194048)!==0)?d:N}function Ct(f,d){return(f.pendingLanes&~(f.suspendedLanes&~f.pingedLanes)&d)===0}function Ut(f,d){switch(f){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bt(){var f=At;return At<<=1,(At&62914560)===0&&(At=4194304),f}function Yt(f){for(var d=[],y=0;31>y;y++)d.push(f);return d}function On(f,d){f.pendingLanes|=d,d!==268435456&&(f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0)}function Vn(f,d,y,_,N,P){var X=f.pendingLanes;f.pendingLanes=y,f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0,f.expiredLanes&=y,f.entangledLanes&=y,f.errorRecoveryDisabledLanes&=y,f.shellSuspendCounter=0;var oe=f.entanglements,Me=f.expirationTimes,Ke=f.hiddenUpdates;for(y=X&~y;0<y;){var pt=31-pe(y),bt=1<<pt;oe[pt]=0,Me[pt]=-1;var tt=Ke[pt];if(tt!==null)for(Ke[pt]=null,pt=0;pt<tt.length;pt++){var ot=tt[pt];ot!==null&&(ot.lane&=-536870913)}y&=~bt}_!==0&&Ii(f,_,0),P!==0&&N===0&&f.tag!==0&&(f.suspendedLanes|=P&~(X&~d))}function Ii(f,d,y){f.pendingLanes|=d,f.suspendedLanes&=~d;var _=31-pe(d);f.entangledLanes|=d,f.entanglements[_]=f.entanglements[_]|1073741824|y&261930}function Tr(f,d){var y=f.entangledLanes|=d;for(f=f.entanglements;y;){var _=31-pe(y),N=1<<_;N&d|f[_]&d&&(f[_]|=d),y&=~N}}function wr(f,d){var y=d&-d;return y=(y&42)!==0?1:bi(y),(y&(f.suspendedLanes|d))!==0?0:y}function bi(f){switch(f){case 2:f=1;break;case 8:f=4;break;case 32:f=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:f=128;break;case 268435456:f=134217728;break;default:f=0}return f}function sr(f){return f&=-f,2<f?8<f?(f&134217727)!==0?32:268435456:8:2}function Fi(){var f=$.p;return f!==0?f:(f=window.event,f===void 0?32:uU(f.type))}function rn(f,d){var y=$.p;try{return $.p=f,d()}finally{$.p=y}}var Qn=Math.random().toString(36).slice(2),dn="__reactFiber$"+Qn,Q="__reactProps$"+Qn,ce="__reactContainer$"+Qn,we="__reactEvents$"+Qn,Qe="__reactListeners$"+Qn,st="__reactHandles$"+Qn,rt="__reactResources$"+Qn,jt="__reactMarker$"+Qn;function Tt(f){delete f[dn],delete f[Q],delete f[we],delete f[Qe],delete f[st]}function _t(f){var d=f[dn];if(d)return d;for(var y=f.parentNode;y;){if(d=y[ce]||y[dn]){if(y=d.alternate,d.child!==null||y!==null&&y.child!==null)for(f=$I(f);f!==null;){if(y=f[dn])return y;f=$I(f)}return d}f=y,y=f.parentNode}return null}function J(f){if(f=f[dn]||f[ce]){var d=f.tag;if(d===5||d===6||d===13||d===31||d===26||d===27||d===3)return f}return null}function ve(f){var d=f.tag;if(d===5||d===26||d===27||d===6)return f.stateNode;throw Error(i(33))}function he(f){var d=f[rt];return d||(d=f[rt]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function Pe(f){f[jt]=!0}var be=new Set,et={};function ht(f,d){Mt(f,d),Mt(f+"Capture",d)}function Mt(f,d){for(et[f]=d,f=0;f<d.length;f++)be.add(d[f])}var Rt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lt={},Ft={};function Vt(f){return Ge.call(Ft,f)?!0:Ge.call(Lt,f)?!1:Rt.test(f)?Ft[f]=!0:(Lt[f]=!0,!1)}function Ht(f,d,y){if(Vt(d))if(y===null)f.removeAttribute(d);else{switch(typeof y){case"undefined":case"function":case"symbol":f.removeAttribute(d);return;case"boolean":var _=d.toLowerCase().slice(0,5);if(_!=="data-"&&_!=="aria-"){f.removeAttribute(d);return}}f.setAttribute(d,""+y)}}function gn(f,d,y){if(y===null)f.removeAttribute(d);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(d);return}f.setAttribute(d,""+y)}}function Jt(f,d,y,_){if(_===null)f.removeAttribute(y);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(y);return}f.setAttributeNS(d,y,""+_)}}function sn(f){switch(typeof f){case"bigint":case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function _n(f){var d=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function en(f,d,y){var _=Object.getOwnPropertyDescriptor(f.constructor.prototype,d);if(!f.hasOwnProperty(d)&&typeof _<"u"&&typeof _.get=="function"&&typeof _.set=="function"){var N=_.get,P=_.set;return Object.defineProperty(f,d,{configurable:!0,get:function(){return N.call(this)},set:function(X){y=""+X,P.call(this,X)}}),Object.defineProperty(f,d,{enumerable:_.enumerable}),{getValue:function(){return y},setValue:function(X){y=""+X},stopTracking:function(){f._valueTracker=null,delete f[d]}}}}function vn(f){if(!f._valueTracker){var d=_n(f)?"checked":"value";f._valueTracker=en(f,d,""+f[d])}}function Zt(f){if(!f)return!1;var d=f._valueTracker;if(!d)return!0;var y=d.getValue(),_="";return f&&(_=_n(f)?f.checked?"true":"false":f.value),f=_,f!==y?(d.setValue(f),!0):!1}function Dn(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}var Hn=/[\n"\\]/g;function Kt(f){return f.replace(Hn,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function Xi(f,d,y,_,N,P,X,oe){f.name="",X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?f.type=X:f.removeAttribute("type"),d!=null?X==="number"?(d===0&&f.value===""||f.value!=d)&&(f.value=""+sn(d)):f.value!==""+sn(d)&&(f.value=""+sn(d)):X!=="submit"&&X!=="reset"||f.removeAttribute("value"),d!=null?kn(f,X,sn(d)):y!=null?kn(f,X,sn(y)):_!=null&&f.removeAttribute("value"),N==null&&P!=null&&(f.defaultChecked=!!P),N!=null&&(f.checked=N&&typeof N!="function"&&typeof N!="symbol"),oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"?f.name=""+sn(oe):f.removeAttribute("name")}function Un(f,d,y,_,N,P,X,oe){if(P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(f.type=P),d!=null||y!=null){if(!(P!=="submit"&&P!=="reset"||d!=null)){vn(f);return}y=y!=null?""+sn(y):"",d=d!=null?""+sn(d):y,oe||d===f.value||(f.value=d),f.defaultValue=d}_=_??N,_=typeof _!="function"&&typeof _!="symbol"&&!!_,f.checked=oe?f.checked:!!_,f.defaultChecked=!!_,X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"&&(f.name=X),vn(f)}function kn(f,d,y){d==="number"&&Dn(f.ownerDocument)===f||f.defaultValue===""+y||(f.defaultValue=""+y)}function pi(f,d,y,_){if(f=f.options,d){d={};for(var N=0;N<y.length;N++)d["$"+y[N]]=!0;for(y=0;y<f.length;y++)N=d.hasOwnProperty("$"+f[y].value),f[y].selected!==N&&(f[y].selected=N),N&&_&&(f[y].defaultSelected=!0)}else{for(y=""+sn(y),d=null,N=0;N<f.length;N++){if(f[N].value===y){f[N].selected=!0,_&&(f[N].defaultSelected=!0);return}d!==null||f[N].disabled||(d=f[N])}d!==null&&(d.selected=!0)}}function ir(f,d,y){if(d!=null&&(d=""+sn(d),d!==f.value&&(f.value=d),y==null)){f.defaultValue!==d&&(f.defaultValue=d);return}f.defaultValue=y!=null?""+sn(y):""}function Ui(f,d,y,_){if(d==null){if(_!=null){if(y!=null)throw Error(i(92));if(Y(_)){if(1<_.length)throw Error(i(93));_=_[0]}y=_}y==null&&(y=""),d=y}y=sn(d),f.defaultValue=y,_=f.textContent,_===y&&_!==""&&_!==null&&(f.value=_),vn(f)}function Fa(f,d){if(d){var y=f.firstChild;if(y&&y===f.lastChild&&y.nodeType===3){y.nodeValue=d;return}}f.textContent=d}var Ga=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jc(f,d,y){var _=d.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?_?f.setProperty(d,""):d==="float"?f.cssFloat="":f[d]="":_?f.setProperty(d,y):typeof y!="number"||y===0||Ga.has(d)?d==="float"?f.cssFloat=y:f[d]=(""+y).trim():f[d]=y+"px"}function ju(f,d,y){if(d!=null&&typeof d!="object")throw Error(i(62));if(f=f.style,y!=null){for(var _ in y)!y.hasOwnProperty(_)||d!=null&&d.hasOwnProperty(_)||(_.indexOf("--")===0?f.setProperty(_,""):_==="float"?f.cssFloat="":f[_]="");for(var N in d)_=d[N],d.hasOwnProperty(N)&&y[N]!==_&&jc(f,N,_)}else for(var P in d)d.hasOwnProperty(P)&&jc(f,P,d[P])}function Mo(f){if(f.indexOf("-")===-1)return!1;switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ud=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Nu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function to(f){return Nu.test(""+f)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":f}function ua(){}var _o=null;function Ou(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var Cs=null,no=null;function Du(f){var d=J(f);if(d&&(f=d.stateNode)){var y=f[Q]||null;e:switch(f=d.stateNode,d.type){case"input":if(Xi(f,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),d=y.name,y.type==="radio"&&d!=null){for(y=f;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+Kt(""+d)+'"][type="radio"]'),d=0;d<y.length;d++){var _=y[d];if(_!==f&&_.form===f.form){var N=_[Q]||null;if(!N)throw Error(i(90));Xi(_,N.value,N.defaultValue,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name)}}for(d=0;d<y.length;d++)_=y[d],_.form===f.form&&Zt(_)}break e;case"textarea":ir(f,y.value,y.defaultValue);break e;case"select":d=y.value,d!=null&&pi(f,!!y.multiple,d,!1)}}}var Pu=!1;function Nc(f,d,y){if(Pu)return f(d,y);Pu=!0;try{var _=f(d);return _}finally{if(Pu=!1,(Cs!==null||no!==null)&&(le(),Cs&&(d=Cs,f=no,no=Cs=null,Du(d),f)))for(d=0;d<f.length;d++)Du(f[d])}}function To(f,d){var y=f.stateNode;if(y===null)return null;var _=y[Q]||null;if(_===null)return null;y=_[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(f=f.type,_=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!_;break e;default:f=!1}if(f)return null;if(y&&typeof y!="function")throw Error(i(231,d,typeof y));return y}var Rs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ea=!1;if(Rs)try{var zl={};Object.defineProperty(zl,"passive",{get:function(){Ea=!0}}),window.addEventListener("test",zl,zl),window.removeEventListener("test",zl,zl)}catch{Ea=!1}var wo=null,Iu=null,io=null;function Uu(){if(io)return io;var f,d=Iu,y=d.length,_,N="value"in wo?wo.value:wo.textContent,P=N.length;for(f=0;f<y&&d[f]===N[f];f++);var X=y-f;for(_=1;_<=X&&d[y-_]===N[P-_];_++);return io=N.slice(f,1<_?1-_:void 0)}function nl(f){var d=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&d===13&&(f=13)):f=d,f===10&&(f=13),32<=f||f===13?f:0}function Ao(){return!0}function kl(){return!1}function $i(f){function d(y,_,N,P,X){this._reactName=y,this._targetInst=N,this.type=_,this.nativeEvent=P,this.target=X,this.currentTarget=null;for(var oe in f)f.hasOwnProperty(oe)&&(y=f[oe],this[oe]=y?y(P):P[oe]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?Ao:kl,this.isPropagationStopped=kl,this}return p(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=Ao)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=Ao)},persist:function(){},isPersistent:Ao}),d}var Eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fl=$i(Eo),Va=p({},Eo,{view:0,detail:0}),il=$i(Va),Lu,Co,rl,Xr=p({},Va,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dd,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==rl&&(rl&&f.type==="mousemove"?(Lu=f.screenX-rl.screenX,Co=f.screenY-rl.screenY):Co=Lu=0,rl=f),Lu)},movementY:function(f){return"movementY"in f?f.movementY:Co}}),dp=$i(Xr),dr=p({},Xr,{dataTransfer:0}),Bu=$i(dr),fd=p({},Va,{relatedTarget:0}),Ff=$i(fd),fa=p({},Eo,{animationName:0,elapsedTime:0,pseudoElement:0}),os=$i(fa),Ur=p({},Eo,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),ro=$i(Ur),hd=p({},Eo,{data:0}),pv=$i(hd),Xb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $b(f){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(f):(f=gv[f])?!!d[f]:!1}function dd(){return $b}var vv=p({},Va,{key:function(f){if(f.key){var d=Xb[f.key]||f.key;if(d!=="Unidentified")return d}return f.type==="keypress"?(f=nl(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?mv[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dd,charCode:function(f){return f.type==="keypress"?nl(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?nl(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),xv=$i(vv),Yb=p({},Xr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pp=$i(Yb),Zb=p({},Va,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dd}),Gl=$i(Zb),yv=p({},Eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tw=$i(yv),Kb=p({},Xr,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),Oc=$i(Kb),Vl=p({},Eo,{newState:0,oldState:0}),bv=$i(Vl),Sv=[9,13,27,32],zu=Rs&&"CompositionEvent"in window,Dc=null;Rs&&"documentMode"in document&&(Dc=document.documentMode);var ku=Rs&&"TextEvent"in window&&!Dc,ha=Rs&&(!zu||Dc&&8<Dc&&11>=Dc),pd=" ",Mv=!1;function mp(f,d){switch(f){case"keyup":return Sv.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gf(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var Pc=!1;function gp(f,d){switch(f){case"compositionend":return Gf(d);case"keypress":return d.which!==32?null:(Mv=!0,pd);case"textInput":return f=d.data,f===pd&&Mv?null:f;default:return null}}function Qb(f,d){if(Pc)return f==="compositionend"||!zu&&mp(f,d)?(f=Uu(),io=Iu=wo=null,Pc=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return ha&&d.locale!=="ko"?null:d.data;default:return null}}var js={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _v(f){var d=f&&f.nodeName&&f.nodeName.toLowerCase();return d==="input"?!!js[f.type]:d==="textarea"}function vp(f,d,y,_){Cs?no?no.push(_):no=[_]:Cs=_,d=V2(d,"onChange"),0<d.length&&(y=new Fl("onChange","change",null,y,_),f.push({event:y,listeners:d}))}var Vf=null,Hf=null;function Tv(f){PI(f,0)}function qf(f){var d=ve(f);if(Zt(d))return f}function wv(f,d){if(f==="change")return d}var md=!1;if(Rs){var Fu;if(Rs){var Yi="oninput"in document;if(!Yi){var Jb=document.createElement("div");Jb.setAttribute("oninput","return;"),Yi=typeof Jb.oninput=="function"}Fu=Yi}else Fu=!1;md=Fu&&(!document.documentMode||9<document.documentMode)}function e2(){Vf&&(Vf.detachEvent("onpropertychange",Av),Hf=Vf=null)}function Av(f){if(f.propertyName==="value"&&qf(Hf)){var d=[];vp(d,Hf,f,Ou(f)),Nc(Tv,d)}}function gd(f,d,y){f==="focusin"?(e2(),Vf=d,Hf=y,Vf.attachEvent("onpropertychange",Av)):f==="focusout"&&e2()}function Ic(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return qf(Hf)}function t2(f,d){if(f==="click")return qf(d)}function n2(f,d){if(f==="input"||f==="change")return qf(d)}function Gu(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var Zi=typeof Object.is=="function"?Object.is:Gu;function Wf(f,d){if(Zi(f,d))return!0;if(typeof f!="object"||f===null||typeof d!="object"||d===null)return!1;var y=Object.keys(f),_=Object.keys(d);if(y.length!==_.length)return!1;for(_=0;_<y.length;_++){var N=y[_];if(!Ge.call(d,N)||!Zi(f[N],d[N]))return!1}return!0}function Ev(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function Cv(f,d){var y=Ev(f);f=0;for(var _;y;){if(y.nodeType===3){if(_=f+y.textContent.length,f<=d&&_>=d)return{node:y,offset:d-f};f=_}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=Ev(y)}}function xp(f,d){return f&&d?f===d?!0:f&&f.nodeType===3?!1:d&&d.nodeType===3?xp(f,d.parentNode):"contains"in f?f.contains(d):f.compareDocumentPosition?!!(f.compareDocumentPosition(d)&16):!1:!1}function yp(f){f=f!=null&&f.ownerDocument!=null&&f.ownerDocument.defaultView!=null?f.ownerDocument.defaultView:window;for(var d=Dn(f.document);d instanceof f.HTMLIFrameElement;){try{var y=typeof d.contentWindow.location.href=="string"}catch{y=!1}if(y)f=d.contentWindow;else break;d=Dn(f.document)}return d}function Xf(f){var d=f&&f.nodeName&&f.nodeName.toLowerCase();return d&&(d==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||d==="textarea"||f.contentEditable==="true")}var i2=Rs&&"documentMode"in document&&11>=document.documentMode,$f=null,bp=null,Yf=null,Ns=!1;function Sp(f,d,y){var _=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;Ns||$f==null||$f!==Dn(_)||(_=$f,"selectionStart"in _&&Xf(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),Yf&&Wf(Yf,_)||(Yf=_,_=V2(bp,"onSelect"),0<_.length&&(d=new Fl("onSelect","select",null,d,y),f.push({event:d,listeners:_}),d.target=$f)))}function Uc(f,d){var y={};return y[f.toLowerCase()]=d.toLowerCase(),y["Webkit"+f]="webkit"+d,y["Moz"+f]="moz"+d,y}var Zf={animationend:Uc("Animation","AnimationEnd"),animationiteration:Uc("Animation","AnimationIteration"),animationstart:Uc("Animation","AnimationStart"),transitionrun:Uc("Transition","TransitionRun"),transitionstart:Uc("Transition","TransitionStart"),transitioncancel:Uc("Transition","TransitionCancel"),transitionend:Uc("Transition","TransitionEnd")},vd={},Ha={};Rs&&(Ha=document.createElement("div").style,"AnimationEvent"in window||(delete Zf.animationend.animation,delete Zf.animationiteration.animation,delete Zf.animationstart.animation),"TransitionEvent"in window||delete Zf.transitionend.transition);function Lc(f){if(vd[f])return vd[f];if(!Zf[f])return f;var d=Zf[f],y;for(y in d)if(d.hasOwnProperty(y)&&y in Ha)return vd[f]=d[y];return f}var ls=Lc("animationend"),Rv=Lc("animationiteration"),al=Lc("animationstart"),Kf=Lc("transitionrun"),Bc=Lc("transitionstart"),jv=Lc("transitioncancel"),Mp=Lc("transitionend"),Hl=new Map,_p="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_p.push("scrollEnd");function Ca(f,d){Hl.set(f,d),ht(d,[f])}var zc=typeof reportError=="function"?reportError:function(f){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof f=="object"&&f!==null&&typeof f.message=="string"?String(f.message):String(f),error:f});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",f);return}console.error(f)},ta=[],Vu=0,Tp=0;function kc(){for(var f=Vu,d=Tp=Vu=0;d<f;){var y=ta[d];ta[d++]=null;var _=ta[d];ta[d++]=null;var N=ta[d];ta[d++]=null;var P=ta[d];if(ta[d++]=null,_!==null&&N!==null){var X=_.pending;X===null?N.next=N:(N.next=X.next,X.next=N),_.pending=N}P!==0&&wp(y,N,P)}}function xd(f,d,y,_){ta[Vu++]=f,ta[Vu++]=d,ta[Vu++]=y,ta[Vu++]=_,Tp|=_,f.lanes|=_,f=f.alternate,f!==null&&(f.lanes|=_)}function Qf(f,d,y,_){return xd(f,d,y,_),Jf(f)}function Fc(f,d){return xd(f,null,null,d),Jf(f)}function wp(f,d,y){f.lanes|=y;var _=f.alternate;_!==null&&(_.lanes|=y);for(var N=!1,P=f.return;P!==null;)P.childLanes|=y,_=P.alternate,_!==null&&(_.childLanes|=y),P.tag===22&&(f=P.stateNode,f===null||f._visibility&1||(N=!0)),f=P,P=P.return;return f.tag===3?(P=f.stateNode,N&&d!==null&&(N=31-pe(y),f=P.hiddenUpdates,_=f[N],_===null?f[N]=[d]:_.push(d),d.lane=y|536870912),P):null}function Jf(f){if(50<of)throw of=0,lf=null,Error(i(185));for(var d=f.return;d!==null;)f=d,d=f.return;return f.tag===3?f.stateNode:null}var Gc={};function r2(f,d,y,_){this.tag=f,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qa(f,d,y,_){return new r2(f,d,y,_)}function Wa(f){return f=f.prototype,!(!f||!f.isReactComponent)}function sl(f,d){var y=f.alternate;return y===null?(y=qa(f.tag,d,f.key,f.mode),y.elementType=f.elementType,y.type=f.type,y.stateNode=f.stateNode,y.alternate=f,f.alternate=y):(y.pendingProps=d,y.type=f.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=f.flags&65011712,y.childLanes=f.childLanes,y.lanes=f.lanes,y.child=f.child,y.memoizedProps=f.memoizedProps,y.memoizedState=f.memoizedState,y.updateQueue=f.updateQueue,d=f.dependencies,y.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},y.sibling=f.sibling,y.index=f.index,y.ref=f.ref,y.refCleanup=f.refCleanup,y}function Ra(f,d){f.flags&=65011714;var y=f.alternate;return y===null?(f.childLanes=0,f.lanes=d,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=y.childLanes,f.lanes=y.lanes,f.child=y.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=y.memoizedProps,f.memoizedState=y.memoizedState,f.updateQueue=y.updateQueue,f.type=y.type,d=y.dependencies,f.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),f}function yd(f,d,y,_,N,P){var X=0;if(_=f,typeof f=="function")Wa(f)&&(X=1);else if(typeof f=="string")X=TQ(f,y,ue.current)?26:f==="html"||f==="head"||f==="body"?27:5;else e:switch(f){case I:return f=qa(31,y,d,N),f.elementType=I,f.lanes=P,f;case M:return ql(y.children,N,P,d);case S:X=8,N|=24;break;case T:return f=qa(12,y,d,N|2),f.elementType=T,f.lanes=P,f;case R:return f=qa(13,y,d,N),f.elementType=R,f.lanes=P,f;case C:return f=qa(19,y,d,N),f.elementType=C,f.lanes=P,f;default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case E:X=10;break e;case A:X=9;break e;case j:X=11;break e;case D:X=14;break e;case U:X=16,_=null;break e}X=29,y=Error(i(130,f===null?"null":typeof f,"")),_=null}return d=qa(X,y,d,N),d.elementType=f,d.type=_,d.lanes=P,d}function ql(f,d,y,_){return f=qa(7,f,_,d),f.lanes=y,f}function Ap(f,d,y){return f=qa(6,f,null,d),f.lanes=y,f}function a2(f){var d=qa(18,null,null,0);return d.stateNode=f,d}function Ro(f,d,y){return d=qa(4,f.children!==null?f.children:[],f.key,d),d.lanes=y,d.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},d}var Nv=new WeakMap;function cs(f,d){if(typeof f=="object"&&f!==null){var y=Nv.get(f);return y!==void 0?y:(d={value:f,source:d,stack:Ue(d)},Nv.set(f,d),d)}return{value:f,source:d,stack:Ue(d)}}var jo=[],Hu=0,bd=null,eh=0,Os=[],us=0,ol=null,ll=1,cl="";function Wl(f,d){jo[Hu++]=eh,jo[Hu++]=bd,bd=f,eh=d}function Ov(f,d,y){Os[us++]=ll,Os[us++]=cl,Os[us++]=ol,ol=f;var _=ll;f=cl;var N=32-pe(_)-1;_&=~(1<<N),y+=1;var P=32-pe(d)+N;if(30<P){var X=N-N%5;P=(_&(1<<X)-1).toString(32),_>>=X,N-=X,ll=1<<32-pe(d)+N|y<<N|_,cl=P+f}else ll=1<<P|y<<N|_,cl=f}function Ep(f){f.return!==null&&(Wl(f,1),Ov(f,1,0))}function Vc(f){for(;f===bd;)bd=jo[--Hu],jo[Hu]=null,eh=jo[--Hu],jo[Hu]=null;for(;f===ol;)ol=Os[--us],Os[us]=null,cl=Os[--us],Os[us]=null,ll=Os[--us],Os[us]=null}function Sd(f,d){Os[us++]=ll,Os[us++]=cl,Os[us++]=ol,ll=d.id,cl=d.overflow,ol=f}var na=null,Gi=null,Jn=!1,Xl=null,ia=!1,Cp=Error(i(519));function $n(f){var d=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Md(cs(d,f)),Cp}function Rp(f){var d=f.stateNode,y=f.type,_=f.memoizedProps;switch(d[dn]=f,d[Q]=_,y){case"dialog":ei("cancel",d),ei("close",d);break;case"iframe":case"object":case"embed":ei("load",d);break;case"video":case"audio":for(y=0;y<Tx.length;y++)ei(Tx[y],d);break;case"source":ei("error",d);break;case"img":case"image":case"link":ei("error",d),ei("load",d);break;case"details":ei("toggle",d);break;case"input":ei("invalid",d),Un(d,_.value,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name,!0);break;case"select":ei("invalid",d);break;case"textarea":ei("invalid",d),Ui(d,_.value,_.defaultValue,_.children)}y=_.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||d.textContent===""+y||_.suppressHydrationWarning===!0||BI(d.textContent,y)?(_.popover!=null&&(ei("beforetoggle",d),ei("toggle",d)),_.onScroll!=null&&ei("scroll",d),_.onScrollEnd!=null&&ei("scrollend",d),_.onClick!=null&&(d.onclick=ua),d=!0):d=!1,d||$n(f,!0)}function s2(f){for(na=f.return;na;)switch(na.tag){case 5:case 31:case 13:ia=!1;return;case 27:case 3:ia=!0;return;default:na=na.return}}function qu(f){if(f!==na)return!1;if(!Jn)return s2(f),Jn=!0,!1;var d=f.tag,y;if((y=d!==3&&d!==27)&&((y=d===5)&&(y=f.type,y=!(y!=="form"&&y!=="button")||Hw(f.type,f.memoizedProps)),y=!y),y&&Gi&&$n(f),s2(f),d===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));Gi=XI(f)}else if(d===31){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));Gi=XI(f)}else d===27?(d=Gi,yh(f.type)?(f=Yw,Yw=null,Gi=f):Gi=d):Gi=na?bl(f.stateNode.nextSibling):null;return!0}function Wu(){Gi=na=null,Jn=!1}function Dv(){var f=Xl;return f!==null&&(Ia===null?Ia=f:Ia.push.apply(Ia,f),Xl=null),f}function Md(f){Xl===null?Xl=[f]:Xl.push(f)}var Pv=q(null),$l=null,ja=null;function Yl(f,d,y){ie(Pv,d._currentValue),d._currentValue=y}function ao(f){f._currentValue=Pv.current,K(Pv)}function Zl(f,d,y){for(;f!==null;){var _=f.alternate;if((f.childLanes&d)!==d?(f.childLanes|=d,_!==null&&(_.childLanes|=d)):_!==null&&(_.childLanes&d)!==d&&(_.childLanes|=d),f===y)break;f=f.return}}function jp(f,d,y,_){var N=f.child;for(N!==null&&(N.return=f);N!==null;){var P=N.dependencies;if(P!==null){var X=N.child;P=P.firstContext;e:for(;P!==null;){var oe=P;P=N;for(var Me=0;Me<d.length;Me++)if(oe.context===d[Me]){P.lanes|=y,oe=P.alternate,oe!==null&&(oe.lanes|=y),Zl(P.return,y,f),_||(X=null);break e}P=oe.next}}else if(N.tag===18){if(X=N.return,X===null)throw Error(i(341));X.lanes|=y,P=X.alternate,P!==null&&(P.lanes|=y),Zl(X,y,f),X=null}else X=N.child;if(X!==null)X.return=N;else for(X=N;X!==null;){if(X===f){X=null;break}if(N=X.sibling,N!==null){N.return=X.return,X=N;break}X=X.return}N=X}}function Hc(f,d,y,_){f=null;for(var N=d,P=!1;N!==null;){if(!P){if((N.flags&524288)!==0)P=!0;else if((N.flags&262144)!==0)break}if(N.tag===10){var X=N.alternate;if(X===null)throw Error(i(387));if(X=X.memoizedProps,X!==null){var oe=N.type;Zi(N.pendingProps.value,X.value)||(f!==null?f.push(oe):f=[oe])}}else if(N===de.current){if(X=N.alternate,X===null)throw Error(i(387));X.memoizedState.memoizedState!==N.memoizedState.memoizedState&&(f!==null?f.push(Rx):f=[Rx])}N=N.return}f!==null&&jp(d,f,y,_),d.flags|=262144}function th(f){for(f=f.firstContext;f!==null;){if(!Zi(f.context._currentValue,f.memoizedValue))return!0;f=f.next}return!1}function Xu(f){$l=f,ja=null,f=f.dependencies,f!==null&&(f.firstContext=null)}function ra(f){return Iv($l,f)}function _d(f,d){return $l===null&&Xu(f),Iv(f,d)}function Iv(f,d){var y=d._currentValue;if(d={context:d,memoizedValue:y,next:null},ja===null){if(f===null)throw Error(i(308));ja=d,f.dependencies={lanes:0,firstContext:d},f.flags|=524288}else ja=ja.next=d;return y}var o2=typeof AbortController<"u"?AbortController:function(){var f=[],d=this.signal={aborted:!1,addEventListener:function(y,_){f.push(_)}};this.abort=function(){d.aborted=!0,f.forEach(function(y){return y()})}},l2=t.unstable_scheduleCallback,Uv=t.unstable_NormalPriority,ln={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lv(){return{controller:new o2,data:new Map,refCount:0}}function da(f){f.refCount--,f.refCount===0&&l2(Uv,function(){f.controller.abort()})}var $u=null,Bv=0,Kl=0,No=null;function nh(f,d){if($u===null){var y=$u=[];Bv=0,Kl=Iw(),No={status:"pending",value:void 0,then:function(_){y.push(_)}}}return Bv++,d.then(zv,zv),d}function zv(){if(--Bv===0&&$u!==null){No!==null&&(No.status="fulfilled");var f=$u;$u=null,Kl=0,No=null;for(var d=0;d<f.length;d++)(0,f[d])()}}function kv(f,d){var y=[],_={status:"pending",value:null,reason:null,then:function(N){y.push(N)}};return f.then(function(){_.status="fulfilled",_.value=d;for(var N=0;N<y.length;N++)(0,y[N])(d)},function(N){for(_.status="rejected",_.reason=N,N=0;N<y.length;N++)(0,y[N])(void 0)}),_}var c2=k.S;k.S=function(f,d){gh=Z(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&nh(f,d),c2!==null&&c2(f,d)};var qc=q(null);function ul(){var f=qc.current;return f!==null?f:Mi.pooledCache}function ih(f,d){d===null?ie(qc,qc.current):ie(qc,d.pool)}function Np(){var f=ul();return f===null?null:{parent:ln._currentValue,pool:f}}var Wc=Error(i(460)),Td=Error(i(474)),Oo=Error(i(542)),wd={then:function(){}};function u2(f){return f=f.status,f==="fulfilled"||f==="rejected"}function Fv(f,d,y){switch(y=f[y],y===void 0?f.push(d):y!==d&&(d.then(ua,ua),d=y),d.status){case"fulfilled":return d.value;case"rejected":throw f=d.reason,Gv(f),f;default:if(typeof d.status=="string")d.then(ua,ua);else{if(f=Mi,f!==null&&100<f.shellSuspendCounter)throw Error(i(482));f=d,f.status="pending",f.then(function(_){if(d.status==="pending"){var N=d;N.status="fulfilled",N.value=_}},function(_){if(d.status==="pending"){var N=d;N.status="rejected",N.reason=_}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw f=d.reason,Gv(f),f}throw hn=d,Wc}}function Yu(f){try{var d=f._init;return d(f._payload)}catch(y){throw y!==null&&typeof y=="object"&&typeof y.then=="function"?(hn=y,Wc):y}}var hn=null;function Op(){if(hn===null)throw Error(i(459));var f=hn;return hn=null,f}function Gv(f){if(f===Wc||f===Oo)throw Error(i(483))}var Xc=null,$c=0;function Dp(f){var d=$c;return $c+=1,Xc===null&&(Xc=[]),Fv(Xc,f,d)}function Ad(f,d){d=d.props.ref,f.ref=d!==void 0?d:null}function Ed(f,d){throw d.$$typeof===g?Error(i(525)):(f=Object.prototype.toString.call(d),Error(i(31,f==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":f)))}function rh(f){function d(ke,je){if(f){var $e=ke.deletions;$e===null?(ke.deletions=[je],ke.flags|=16):$e.push(je)}}function y(ke,je){if(!f)return null;for(;je!==null;)d(ke,je),je=je.sibling;return null}function _(ke){for(var je=new Map;ke!==null;)ke.key!==null?je.set(ke.key,ke):je.set(ke.index,ke),ke=ke.sibling;return je}function N(ke,je){return ke=sl(ke,je),ke.index=0,ke.sibling=null,ke}function P(ke,je,$e){return ke.index=$e,f?($e=ke.alternate,$e!==null?($e=$e.index,$e<je?(ke.flags|=67108866,je):$e):(ke.flags|=67108866,je)):(ke.flags|=1048576,je)}function X(ke){return f&&ke.alternate===null&&(ke.flags|=67108866),ke}function oe(ke,je,$e,xt){return je===null||je.tag!==6?(je=Ap($e,ke.mode,xt),je.return=ke,je):(je=N(je,$e),je.return=ke,je)}function Me(ke,je,$e,xt){var fn=$e.type;return fn===M?pt(ke,je,$e.props.children,xt,$e.key):je!==null&&(je.elementType===fn||typeof fn=="object"&&fn!==null&&fn.$$typeof===U&&Yu(fn)===je.type)?(je=N(je,$e.props),Ad(je,$e),je.return=ke,je):(je=yd($e.type,$e.key,$e.props,null,ke.mode,xt),Ad(je,$e),je.return=ke,je)}function Ke(ke,je,$e,xt){return je===null||je.tag!==4||je.stateNode.containerInfo!==$e.containerInfo||je.stateNode.implementation!==$e.implementation?(je=Ro($e,ke.mode,xt),je.return=ke,je):(je=N(je,$e.children||[]),je.return=ke,je)}function pt(ke,je,$e,xt,fn){return je===null||je.tag!==7?(je=ql($e,ke.mode,xt,fn),je.return=ke,je):(je=N(je,$e),je.return=ke,je)}function bt(ke,je,$e){if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return je=Ap(""+je,ke.mode,$e),je.return=ke,je;if(typeof je=="object"&&je!==null){switch(je.$$typeof){case x:return $e=yd(je.type,je.key,je.props,null,ke.mode,$e),Ad($e,je),$e.return=ke,$e;case b:return je=Ro(je,ke.mode,$e),je.return=ke,je;case U:return je=Yu(je),bt(ke,je,$e)}if(Y(je)||G(je))return je=ql(je,ke.mode,$e,null),je.return=ke,je;if(typeof je.then=="function")return bt(ke,Dp(je),$e);if(je.$$typeof===E)return bt(ke,_d(ke,je),$e);Ed(ke,je)}return null}function tt(ke,je,$e,xt){var fn=je!==null?je.key:null;if(typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint")return fn!==null?null:oe(ke,je,""+$e,xt);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case x:return $e.key===fn?Me(ke,je,$e,xt):null;case b:return $e.key===fn?Ke(ke,je,$e,xt):null;case U:return $e=Yu($e),tt(ke,je,$e,xt)}if(Y($e)||G($e))return fn!==null?null:pt(ke,je,$e,xt,null);if(typeof $e.then=="function")return tt(ke,je,Dp($e),xt);if($e.$$typeof===E)return tt(ke,je,_d(ke,$e),xt);Ed(ke,$e)}return null}function ot(ke,je,$e,xt,fn){if(typeof xt=="string"&&xt!==""||typeof xt=="number"||typeof xt=="bigint")return ke=ke.get($e)||null,oe(je,ke,""+xt,fn);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case x:return ke=ke.get(xt.key===null?$e:xt.key)||null,Me(je,ke,xt,fn);case b:return ke=ke.get(xt.key===null?$e:xt.key)||null,Ke(je,ke,xt,fn);case U:return xt=Yu(xt),ot(ke,je,$e,xt,fn)}if(Y(xt)||G(xt))return ke=ke.get($e)||null,pt(je,ke,xt,fn,null);if(typeof xt.then=="function")return ot(ke,je,$e,Dp(xt),fn);if(xt.$$typeof===E)return ot(ke,je,$e,_d(je,xt),fn);Ed(je,xt)}return null}function nn(ke,je,$e,xt){for(var fn=null,Ti=null,an=je,Gn=je=0,ii=null;an!==null&&Gn<$e.length;Gn++){an.index>Gn?(ii=an,an=null):ii=an.sibling;var wi=tt(ke,an,$e[Gn],xt);if(wi===null){an===null&&(an=ii);break}f&&an&&wi.alternate===null&&d(ke,an),je=P(wi,je,Gn),Ti===null?fn=wi:Ti.sibling=wi,Ti=wi,an=ii}if(Gn===$e.length)return y(ke,an),Jn&&Wl(ke,Gn),fn;if(an===null){for(;Gn<$e.length;Gn++)an=bt(ke,$e[Gn],xt),an!==null&&(je=P(an,je,Gn),Ti===null?fn=an:Ti.sibling=an,Ti=an);return Jn&&Wl(ke,Gn),fn}for(an=_(an);Gn<$e.length;Gn++)ii=ot(an,ke,Gn,$e[Gn],xt),ii!==null&&(f&&ii.alternate!==null&&an.delete(ii.key===null?Gn:ii.key),je=P(ii,je,Gn),Ti===null?fn=ii:Ti.sibling=ii,Ti=ii);return f&&an.forEach(function(Th){return d(ke,Th)}),Jn&&Wl(ke,Gn),fn}function mn(ke,je,$e,xt){if($e==null)throw Error(i(151));for(var fn=null,Ti=null,an=je,Gn=je=0,ii=null,wi=$e.next();an!==null&&!wi.done;Gn++,wi=$e.next()){an.index>Gn?(ii=an,an=null):ii=an.sibling;var Th=tt(ke,an,wi.value,xt);if(Th===null){an===null&&(an=ii);break}f&&an&&Th.alternate===null&&d(ke,an),je=P(Th,je,Gn),Ti===null?fn=Th:Ti.sibling=Th,Ti=Th,an=ii}if(wi.done)return y(ke,an),Jn&&Wl(ke,Gn),fn;if(an===null){for(;!wi.done;Gn++,wi=$e.next())wi=bt(ke,wi.value,xt),wi!==null&&(je=P(wi,je,Gn),Ti===null?fn=wi:Ti.sibling=wi,Ti=wi);return Jn&&Wl(ke,Gn),fn}for(an=_(an);!wi.done;Gn++,wi=$e.next())wi=ot(an,ke,Gn,wi.value,xt),wi!==null&&(f&&wi.alternate!==null&&an.delete(wi.key===null?Gn:wi.key),je=P(wi,je,Gn),Ti===null?fn=wi:Ti.sibling=wi,Ti=wi);return f&&an.forEach(function(IQ){return d(ke,IQ)}),Jn&&Wl(ke,Gn),fn}function qi(ke,je,$e,xt){if(typeof $e=="object"&&$e!==null&&$e.type===M&&$e.key===null&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case x:e:{for(var fn=$e.key;je!==null;){if(je.key===fn){if(fn=$e.type,fn===M){if(je.tag===7){y(ke,je.sibling),xt=N(je,$e.props.children),xt.return=ke,ke=xt;break e}}else if(je.elementType===fn||typeof fn=="object"&&fn!==null&&fn.$$typeof===U&&Yu(fn)===je.type){y(ke,je.sibling),xt=N(je,$e.props),Ad(xt,$e),xt.return=ke,ke=xt;break e}y(ke,je);break}else d(ke,je);je=je.sibling}$e.type===M?(xt=ql($e.props.children,ke.mode,xt,$e.key),xt.return=ke,ke=xt):(xt=yd($e.type,$e.key,$e.props,null,ke.mode,xt),Ad(xt,$e),xt.return=ke,ke=xt)}return X(ke);case b:e:{for(fn=$e.key;je!==null;){if(je.key===fn)if(je.tag===4&&je.stateNode.containerInfo===$e.containerInfo&&je.stateNode.implementation===$e.implementation){y(ke,je.sibling),xt=N(je,$e.children||[]),xt.return=ke,ke=xt;break e}else{y(ke,je);break}else d(ke,je);je=je.sibling}xt=Ro($e,ke.mode,xt),xt.return=ke,ke=xt}return X(ke);case U:return $e=Yu($e),qi(ke,je,$e,xt)}if(Y($e))return nn(ke,je,$e,xt);if(G($e)){if(fn=G($e),typeof fn!="function")throw Error(i(150));return $e=fn.call($e),mn(ke,je,$e,xt)}if(typeof $e.then=="function")return qi(ke,je,Dp($e),xt);if($e.$$typeof===E)return qi(ke,je,_d(ke,$e),xt);Ed(ke,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint"?($e=""+$e,je!==null&&je.tag===6?(y(ke,je.sibling),xt=N(je,$e),xt.return=ke,ke=xt):(y(ke,je),xt=Ap($e,ke.mode,xt),xt.return=ke,ke=xt),X(ke)):y(ke,je)}return function(ke,je,$e,xt){try{$c=0;var fn=qi(ke,je,$e,xt);return Xc=null,fn}catch(an){if(an===Wc||an===Oo)throw an;var Ti=qa(29,an,null,ke.mode);return Ti.lanes=xt,Ti.return=ke,Ti}finally{}}}var Zu=rh(!0),f2=rh(!1),Yc=!1;function Vv(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hv(f,d){f=f.updateQueue,d.updateQueue===f&&(d.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,callbacks:null})}function fl(f){return{lane:f,tag:0,payload:null,callback:null,next:null}}function Ql(f,d,y){var _=f.updateQueue;if(_===null)return null;if(_=_.shared,(ti&2)!==0){var N=_.pending;return N===null?d.next=d:(d.next=N.next,N.next=d),_.pending=d,d=Jf(f),wp(f,null,y),d}return xd(f,_,d,y),Jf(f)}function Zc(f,d,y){if(d=d.updateQueue,d!==null&&(d=d.shared,(y&4194048)!==0)){var _=d.lanes;_&=f.pendingLanes,y|=_,d.lanes=y,Tr(f,y)}}function Pp(f,d){var y=f.updateQueue,_=f.alternate;if(_!==null&&(_=_.updateQueue,y===_)){var N=null,P=null;if(y=y.firstBaseUpdate,y!==null){do{var X={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};P===null?N=P=X:P=P.next=X,y=y.next}while(y!==null);P===null?N=P=d:P=P.next=d}else N=P=d;y={baseState:_.baseState,firstBaseUpdate:N,lastBaseUpdate:P,shared:_.shared,callbacks:_.callbacks},f.updateQueue=y;return}f=y.lastBaseUpdate,f===null?y.firstBaseUpdate=d:f.next=d,y.lastBaseUpdate=d}var qv=!1;function Cd(){if(qv){var f=No;if(f!==null)throw f}}function Ku(f,d,y,_){qv=!1;var N=f.updateQueue;Yc=!1;var P=N.firstBaseUpdate,X=N.lastBaseUpdate,oe=N.shared.pending;if(oe!==null){N.shared.pending=null;var Me=oe,Ke=Me.next;Me.next=null,X===null?P=Ke:X.next=Ke,X=Me;var pt=f.alternate;pt!==null&&(pt=pt.updateQueue,oe=pt.lastBaseUpdate,oe!==X&&(oe===null?pt.firstBaseUpdate=Ke:oe.next=Ke,pt.lastBaseUpdate=Me))}if(P!==null){var bt=N.baseState;X=0,pt=Ke=Me=null,oe=P;do{var tt=oe.lane&-536870913,ot=tt!==oe.lane;if(ot?(Yn&tt)===tt:(_&tt)===tt){tt!==0&&tt===Kl&&(qv=!0),pt!==null&&(pt=pt.next={lane:0,tag:oe.tag,payload:oe.payload,callback:null,next:null});e:{var nn=f,mn=oe;tt=d;var qi=y;switch(mn.tag){case 1:if(nn=mn.payload,typeof nn=="function"){bt=nn.call(qi,bt,tt);break e}bt=nn;break e;case 3:nn.flags=nn.flags&-65537|128;case 0:if(nn=mn.payload,tt=typeof nn=="function"?nn.call(qi,bt,tt):nn,tt==null)break e;bt=p({},bt,tt);break e;case 2:Yc=!0}}tt=oe.callback,tt!==null&&(f.flags|=64,ot&&(f.flags|=8192),ot=N.callbacks,ot===null?N.callbacks=[tt]:ot.push(tt))}else ot={lane:tt,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null},pt===null?(Ke=pt=ot,Me=bt):pt=pt.next=ot,X|=tt;if(oe=oe.next,oe===null){if(oe=N.shared.pending,oe===null)break;ot=oe,oe=ot.next,ot.next=null,N.lastBaseUpdate=ot,N.shared.pending=null}}while(!0);pt===null&&(Me=bt),N.baseState=Me,N.firstBaseUpdate=Ke,N.lastBaseUpdate=pt,P===null&&(N.shared.lanes=0),Vs|=X,f.lanes=X,f.memoizedState=bt}}function hl(f,d){if(typeof f!="function")throw Error(i(191,f));f.call(d)}function pa(f,d){var y=f.callbacks;if(y!==null)for(f.callbacks=null,f=0;f<y.length;f++)hl(y[f],d)}var Ds=q(null),Xa=q(0);function Wv(f,d){f=jr,ie(Xa,f),ie(Ds,d),jr=f|d.baseLanes}function Xv(){ie(Xa,jr),ie(Ds,Ds.current)}function Na(){jr=Xa.current,K(Ds),K(Xa)}var $r=q(null),so=null;function Kc(f){var d=f.alternate;ie(pr,pr.current&1),ie($r,f),so===null&&(d===null||Ds.current!==null||d.memoizedState!==null)&&(so=f)}function $v(f){ie(pr,pr.current),ie($r,f),so===null&&(so=f)}function h2(f){f.tag===22?(ie(pr,pr.current),ie($r,f),so===null&&(so=f)):Jl()}function Jl(){ie(pr,pr.current),ie($r,$r.current)}function Ps(f){K($r),so===f&&(so=null),K(pr)}var pr=q(0);function Ip(f){for(var d=f;d!==null;){if(d.tag===13){var y=d.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||Xw(y)||$w(y)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===f)break;for(;d.sibling===null;){if(d.return===null||d.return===f)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var fs=0,xn=null,Ni=null,Lr=null,Up=!1,dl=!1,Qu=!1,Lp=0,Rd=0,pl=null,ww=0;function mr(){throw Error(i(321))}function Yv(f,d){if(d===null)return!1;for(var y=0;y<d.length&&y<f.length;y++)if(!Zi(f[y],d[y]))return!1;return!0}function Zv(f,d,y,_,N,P){return fs=P,xn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,k.H=f===null||f.memoizedState===null?O2:oh,Qu=!1,P=y(_,N),Qu=!1,dl&&(P=p2(d,y,_,N)),d2(f),P}function d2(f){k.H=Pd;var d=Ni!==null&&Ni.next!==null;if(fs=0,Lr=Ni=xn=null,Up=!1,Rd=0,pl=null,d)throw Error(i(300));f===null||Ki||(f=f.dependencies,f!==null&&th(f)&&(Ki=!0))}function p2(f,d,y,_){xn=f;var N=0;do{if(dl&&(pl=null),Rd=0,dl=!1,25<=N)throw Error(i(301));if(N+=1,Lr=Ni=null,f.updateQueue!=null){var P=f.updateQueue;P.lastEffect=null,P.events=null,P.stores=null,P.memoCache!=null&&(P.memoCache.index=0)}k.H=Id,P=d(y,_)}while(dl);return P}function Aw(){var f=k.H,d=f.useState()[0];return d=typeof d.then=="function"?Nd(d):d,f=f.useState()[0],(Ni!==null?Ni.memoizedState:null)!==f&&(xn.flags|=1024),d}function Kv(){var f=Lp!==0;return Lp=0,f}function Qv(f,d,y){d.updateQueue=f.updateQueue,d.flags&=-2053,f.lanes&=~y}function Jv(f){if(Up){for(f=f.memoizedState;f!==null;){var d=f.queue;d!==null&&(d.pending=null),f=f.next}Up=!1}fs=0,Lr=Ni=xn=null,dl=!1,Rd=Lp=0,pl=null}function $a(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lr===null?xn.memoizedState=Lr=f:Lr=Lr.next=f,Lr}function Ar(){if(Ni===null){var f=xn.alternate;f=f!==null?f.memoizedState:null}else f=Ni.next;var d=Lr===null?xn.memoizedState:Lr.next;if(d!==null)Lr=d,Ni=f;else{if(f===null)throw xn.alternate===null?Error(i(467)):Error(i(310));Ni=f,f={memoizedState:Ni.memoizedState,baseState:Ni.baseState,baseQueue:Ni.baseQueue,queue:Ni.queue,next:null},Lr===null?xn.memoizedState=Lr=f:Lr=Lr.next=f}return Lr}function jd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nd(f){var d=Rd;return Rd+=1,pl===null&&(pl=[]),f=Fv(pl,f,d),d=xn,(Lr===null?d.memoizedState:Lr.next)===null&&(d=d.alternate,k.H=d===null||d.memoizedState===null?O2:oh),f}function Bp(f){if(f!==null&&typeof f=="object"){if(typeof f.then=="function")return Nd(f);if(f.$$typeof===E)return ra(f)}throw Error(i(438,String(f)))}function ex(f){var d=null,y=xn.updateQueue;if(y!==null&&(d=y.memoCache),d==null){var _=xn.alternate;_!==null&&(_=_.updateQueue,_!==null&&(_=_.memoCache,_!=null&&(d={data:_.data.map(function(N){return N.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),y===null&&(y=jd(),xn.updateQueue=y),y.memoCache=d,y=d.data[d.index],y===void 0)for(y=d.data[d.index]=Array(f),_=0;_<f;_++)y[_]=L;return d.index++,y}function ec(f,d){return typeof d=="function"?d(f):d}function zp(f){var d=Ar();return tx(d,Ni,f)}function tx(f,d,y){var _=f.queue;if(_===null)throw Error(i(311));_.lastRenderedReducer=y;var N=f.baseQueue,P=_.pending;if(P!==null){if(N!==null){var X=N.next;N.next=P.next,P.next=X}d.baseQueue=N=P,_.pending=null}if(P=f.baseState,N===null)f.memoizedState=P;else{d=N.next;var oe=X=null,Me=null,Ke=d,pt=!1;do{var bt=Ke.lane&-536870913;if(bt!==Ke.lane?(Yn&bt)===bt:(fs&bt)===bt){var tt=Ke.revertLane;if(tt===0)Me!==null&&(Me=Me.next={lane:0,revertLane:0,gesture:null,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null}),bt===Kl&&(pt=!0);else if((fs&tt)===tt){Ke=Ke.next,tt===Kl&&(pt=!0);continue}else bt={lane:0,revertLane:Ke.revertLane,gesture:null,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null},Me===null?(oe=Me=bt,X=P):Me=Me.next=bt,xn.lanes|=tt,Vs|=tt;bt=Ke.action,Qu&&y(P,bt),P=Ke.hasEagerState?Ke.eagerState:y(P,bt)}else tt={lane:bt,revertLane:Ke.revertLane,gesture:Ke.gesture,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null},Me===null?(oe=Me=tt,X=P):Me=Me.next=tt,xn.lanes|=bt,Vs|=bt;Ke=Ke.next}while(Ke!==null&&Ke!==d);if(Me===null?X=P:Me.next=oe,!Zi(P,f.memoizedState)&&(Ki=!0,pt&&(y=No,y!==null)))throw y;f.memoizedState=P,f.baseState=X,f.baseQueue=Me,_.lastRenderedState=P}return N===null&&(_.lanes=0),[f.memoizedState,_.dispatch]}function kp(f){var d=Ar(),y=d.queue;if(y===null)throw Error(i(311));y.lastRenderedReducer=f;var _=y.dispatch,N=y.pending,P=d.memoizedState;if(N!==null){y.pending=null;var X=N=N.next;do P=f(P,X.action),X=X.next;while(X!==N);Zi(P,d.memoizedState)||(Ki=!0),d.memoizedState=P,d.baseQueue===null&&(d.baseState=P),y.lastRenderedState=P}return[P,_]}function nx(f,d,y){var _=xn,N=Ar(),P=Jn;if(P){if(y===void 0)throw Error(i(407));y=y()}else y=d();var X=!Zi((Ni||N).memoizedState,y);if(X&&(N.memoizedState=y,Ki=!0),N=N.queue,ox(rx.bind(null,_,N,f),[f]),N.getSnapshot!==d||X||Lr!==null&&Lr.memoizedState.tag&1){if(_.flags|=2048,ah(9,{destroy:void 0},ix.bind(null,_,N,y,d),null),Mi===null)throw Error(i(349));P||(fs&127)!==0||m2(_,d,y)}return y}function m2(f,d,y){f.flags|=16384,f={getSnapshot:d,value:y},d=xn.updateQueue,d===null?(d=jd(),xn.updateQueue=d,d.stores=[f]):(y=d.stores,y===null?d.stores=[f]:y.push(f))}function ix(f,d,y,_){d.value=y,d.getSnapshot=_,ax(d)&&Fp(f)}function rx(f,d,y){return y(function(){ax(d)&&Fp(f)})}function ax(f){var d=f.getSnapshot;f=f.value;try{var y=d();return!Zi(f,y)}catch{return!0}}function Fp(f){var d=Fc(f,2);d!==null&&v(d,f,2)}function Od(f){var d=$a();if(typeof f=="function"){var y=f;if(f=y(),Qu){dt(!0);try{y()}finally{dt(!1)}}}return d.memoizedState=d.baseState=f,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ec,lastRenderedState:f},d}function g2(f,d,y,_){return f.baseState=y,tx(f,Ni,typeof _=="function"?_:ec)}function Ew(f,d,y,_,N){if(tc(f))throw Error(i(485));if(f=d.action,f!==null){var P={payload:N,action:f,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(X){P.listeners.push(X)}};k.T!==null?y(!0):P.isTransition=!1,_(P),y=d.pending,y===null?(P.next=d.pending=P,v2(d,P)):(P.next=y.next,d.pending=y.next=P)}}function v2(f,d){var y=d.action,_=d.payload,N=f.state;if(d.isTransition){var P=k.T,X={};k.T=X;try{var oe=y(N,_),Me=k.S;Me!==null&&Me(X,oe),x2(f,d,oe)}catch(Ke){Gp(f,d,Ke)}finally{P!==null&&X.types!==null&&(P.types=X.types),k.T=P}}else try{P=y(N,_),x2(f,d,P)}catch(Ke){Gp(f,d,Ke)}}function x2(f,d,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(_){sx(f,d,_)},function(_){return Gp(f,d,_)}):sx(f,d,y)}function sx(f,d,y){d.status="fulfilled",d.value=y,y2(d),f.state=y,d=f.pending,d!==null&&(y=d.next,y===d?f.pending=null:(y=y.next,d.next=y,v2(f,y)))}function Gp(f,d,y){var _=f.pending;if(f.pending=null,_!==null){_=_.next;do d.status="rejected",d.reason=y,y2(d),d=d.next;while(d!==_)}f.action=null}function y2(f){f=f.listeners;for(var d=0;d<f.length;d++)(0,f[d])()}function b2(f,d){return d}function S2(f,d){if(Jn){var y=Mi.formState;if(y!==null){e:{var _=xn;if(Jn){if(Gi){t:{for(var N=Gi,P=ia;N.nodeType!==8;){if(!P){N=null;break t}if(N=bl(N.nextSibling),N===null){N=null;break t}}P=N.data,N=P==="F!"||P==="F"?N:null}if(N){Gi=bl(N.nextSibling),_=N.data==="F!";break e}}$n(_)}_=!1}_&&(d=y[0])}}return y=$a(),y.memoizedState=y.baseState=d,_={pending:null,lanes:0,dispatch:null,lastRenderedReducer:b2,lastRenderedState:d},y.queue=_,y=N2.bind(null,xn,_),_.dispatch=y,_=Od(!1),P=Dd.bind(null,xn,!1,_.queue),_=$a(),N={state:d,dispatch:null,action:f,pending:null},_.queue=N,y=Ew.bind(null,xn,N,P,y),N.dispatch=y,_.memoizedState=f,[d,y,!1]}function M2(f){var d=Ar();return _2(d,Ni,f)}function _2(f,d,y){if(d=tx(f,d,b2)[0],f=zp(ec)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var _=Nd(d)}catch(X){throw X===Wc?Oo:X}else _=d;d=Ar();var N=d.queue,P=N.dispatch;return y!==d.memoizedState&&(xn.flags|=2048,ah(9,{destroy:void 0},Cw.bind(null,N,y),null)),[_,P,f]}function Cw(f,d){f.action=d}function T2(f){var d=Ar(),y=Ni;if(y!==null)return _2(d,y,f);Ar(),d=d.memoizedState,y=Ar();var _=y.queue.dispatch;return y.memoizedState=f,[d,_,!1]}function ah(f,d,y,_){return f={tag:f,create:y,deps:_,inst:d,next:null},d=xn.updateQueue,d===null&&(d=jd(),xn.updateQueue=d),y=d.lastEffect,y===null?d.lastEffect=f.next=f:(_=y.next,y.next=f,f.next=_,d.lastEffect=f),f}function w2(){return Ar().memoizedState}function Vp(f,d,y,_){var N=$a();xn.flags|=f,N.memoizedState=ah(1|d,{destroy:void 0},y,_===void 0?null:_)}function Hp(f,d,y,_){var N=Ar();_=_===void 0?null:_;var P=N.memoizedState.inst;Ni!==null&&_!==null&&Yv(_,Ni.memoizedState.deps)?N.memoizedState=ah(d,P,y,_):(xn.flags|=f,N.memoizedState=ah(1|d,P,y,_))}function A2(f,d){Vp(8390656,8,f,d)}function ox(f,d){Hp(2048,8,f,d)}function E2(f){xn.flags|=4;var d=xn.updateQueue;if(d===null)d=jd(),xn.updateQueue=d,d.events=[f];else{var y=d.events;y===null?d.events=[f]:y.push(f)}}function C2(f){var d=Ar().memoizedState;return E2({ref:d,nextImpl:f}),function(){if((ti&2)!==0)throw Error(i(440));return d.impl.apply(void 0,arguments)}}function R2(f,d){return Hp(4,2,f,d)}function Is(f,d){return Hp(4,4,f,d)}function lx(f,d){if(typeof d=="function"){f=f();var y=d(f);return function(){typeof y=="function"?y():d(null)}}if(d!=null)return f=f(),d.current=f,function(){d.current=null}}function qp(f,d,y){y=y!=null?y.concat([f]):null,Hp(4,4,lx.bind(null,d,f),y)}function Wp(){}function cx(f,d){var y=Ar();d=d===void 0?null:d;var _=y.memoizedState;return d!==null&&Yv(d,_[1])?_[0]:(y.memoizedState=[f,d],f)}function ux(f,d){var y=Ar();d=d===void 0?null:d;var _=y.memoizedState;if(d!==null&&Yv(d,_[1]))return _[0];if(_=f(),Qu){dt(!0);try{f()}finally{dt(!1)}}return y.memoizedState=[_,d],_}function fx(f,d,y){return y===void 0||(fs&1073741824)!==0&&(Yn&261930)===0?f.memoizedState=d:(f.memoizedState=y,f=m(),xn.lanes|=f,Vs|=f,y)}function hx(f,d,y,_){return Zi(y,d)?y:Ds.current!==null?(f=fx(f,y,_),Zi(f,d)||(Ki=!0),f):(fs&42)===0||(fs&1073741824)!==0&&(Yn&261930)===0?(Ki=!0,f.memoizedState=y):(f=m(),xn.lanes|=f,Vs|=f,d)}function dx(f,d,y,_,N){var P=$.p;$.p=P!==0&&8>P?P:8;var X=k.T,oe={};k.T=oe,Dd(f,!1,d,y);try{var Me=N(),Ke=k.S;if(Ke!==null&&Ke(oe,Me),Me!==null&&typeof Me=="object"&&typeof Me.then=="function"){var pt=kv(Me,_);sh(f,d,pt,Za(f))}else sh(f,d,_,Za(f))}catch(bt){sh(f,d,{then:function(){},status:"rejected",reason:bt},Za())}finally{$.p=P,X!==null&&oe.types!==null&&(X.types=oe.types),k.T=X}}function Rw(){}function px(f,d,y,_){if(f.tag!==5)throw Error(i(476));var N=j2(f).queue;dx(f,N,d,ee,y===null?Rw:function(){return mx(f),y(_)})}function j2(f){var d=f.memoizedState;if(d!==null)return d;d={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ec,lastRenderedState:ee},next:null};var y={};return d.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ec,lastRenderedState:y},next:null},f.memoizedState=d,f=f.alternate,f!==null&&(f.memoizedState=d),d}function mx(f){var d=j2(f);d.next===null&&(d=f.alternate.memoizedState),sh(f,d.next.queue,{},Za())}function gx(){return ra(Rx)}function ma(){return Ar().memoizedState}function vx(){return Ar().memoizedState}function jw(f){for(var d=f.return;d!==null;){switch(d.tag){case 24:case 3:var y=Za();f=fl(y);var _=Ql(d,f,y);_!==null&&(v(_,d,y),Zc(_,d,y)),d={cache:Lv()},f.payload=d;return}d=d.return}}function Nw(f,d,y){var _=Za();y={lane:_,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},tc(f)?Ju(d,y):(y=Qf(f,d,y,_),y!==null&&(v(y,f,_),hs(y,d,_)))}function N2(f,d,y){var _=Za();sh(f,d,y,_)}function sh(f,d,y,_){var N={lane:_,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null};if(tc(f))Ju(d,N);else{var P=f.alternate;if(f.lanes===0&&(P===null||P.lanes===0)&&(P=d.lastRenderedReducer,P!==null))try{var X=d.lastRenderedState,oe=P(X,y);if(N.hasEagerState=!0,N.eagerState=oe,Zi(oe,X))return xd(f,d,N,0),Mi===null&&kc(),!1}catch{}finally{}if(y=Qf(f,d,N,_),y!==null)return v(y,f,_),hs(y,d,_),!0}return!1}function Dd(f,d,y,_){if(_={lane:2,revertLane:Iw(),gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null},tc(f)){if(d)throw Error(i(479))}else d=Qf(f,y,_,2),d!==null&&v(d,f,2)}function tc(f){var d=f.alternate;return f===xn||d!==null&&d===xn}function Ju(f,d){dl=Up=!0;var y=f.pending;y===null?d.next=d:(d.next=y.next,y.next=d),f.pending=d}function hs(f,d,y){if((y&4194048)!==0){var _=d.lanes;_&=f.pendingLanes,y|=_,d.lanes=y,Tr(f,y)}}var Pd={readContext:ra,use:Bp,useCallback:mr,useContext:mr,useEffect:mr,useImperativeHandle:mr,useLayoutEffect:mr,useInsertionEffect:mr,useMemo:mr,useReducer:mr,useRef:mr,useState:mr,useDebugValue:mr,useDeferredValue:mr,useTransition:mr,useSyncExternalStore:mr,useId:mr,useHostTransitionStatus:mr,useFormState:mr,useActionState:mr,useOptimistic:mr,useMemoCache:mr,useCacheRefresh:mr};Pd.useEffectEvent=mr;var O2={readContext:ra,use:Bp,useCallback:function(f,d){return $a().memoizedState=[f,d===void 0?null:d],f},useContext:ra,useEffect:A2,useImperativeHandle:function(f,d,y){y=y!=null?y.concat([f]):null,Vp(4194308,4,lx.bind(null,d,f),y)},useLayoutEffect:function(f,d){return Vp(4194308,4,f,d)},useInsertionEffect:function(f,d){Vp(4,2,f,d)},useMemo:function(f,d){var y=$a();d=d===void 0?null:d;var _=f();if(Qu){dt(!0);try{f()}finally{dt(!1)}}return y.memoizedState=[_,d],_},useReducer:function(f,d,y){var _=$a();if(y!==void 0){var N=y(d);if(Qu){dt(!0);try{y(d)}finally{dt(!1)}}}else N=d;return _.memoizedState=_.baseState=N,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:N},_.queue=f,f=f.dispatch=Nw.bind(null,xn,f),[_.memoizedState,f]},useRef:function(f){var d=$a();return f={current:f},d.memoizedState=f},useState:function(f){f=Od(f);var d=f.queue,y=N2.bind(null,xn,d);return d.dispatch=y,[f.memoizedState,y]},useDebugValue:Wp,useDeferredValue:function(f,d){var y=$a();return fx(y,f,d)},useTransition:function(){var f=Od(!1);return f=dx.bind(null,xn,f.queue,!0,!1),$a().memoizedState=f,[!1,f]},useSyncExternalStore:function(f,d,y){var _=xn,N=$a();if(Jn){if(y===void 0)throw Error(i(407));y=y()}else{if(y=d(),Mi===null)throw Error(i(349));(Yn&127)!==0||m2(_,d,y)}N.memoizedState=y;var P={value:y,getSnapshot:d};return N.queue=P,A2(rx.bind(null,_,P,f),[f]),_.flags|=2048,ah(9,{destroy:void 0},ix.bind(null,_,P,y,d),null),y},useId:function(){var f=$a(),d=Mi.identifierPrefix;if(Jn){var y=cl,_=ll;y=(_&~(1<<32-pe(_)-1)).toString(32)+y,d="_"+d+"R_"+y,y=Lp++,0<y&&(d+="H"+y.toString(32)),d+="_"}else y=ww++,d="_"+d+"r_"+y.toString(32)+"_";return f.memoizedState=d},useHostTransitionStatus:gx,useFormState:S2,useActionState:S2,useOptimistic:function(f){var d=$a();d.memoizedState=d.baseState=f;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=y,d=Dd.bind(null,xn,!0,y),y.dispatch=d,[f,d]},useMemoCache:ex,useCacheRefresh:function(){return $a().memoizedState=jw.bind(null,xn)},useEffectEvent:function(f){var d=$a(),y={impl:f};return d.memoizedState=y,function(){if((ti&2)!==0)throw Error(i(440));return y.impl.apply(void 0,arguments)}}},oh={readContext:ra,use:Bp,useCallback:cx,useContext:ra,useEffect:ox,useImperativeHandle:qp,useInsertionEffect:R2,useLayoutEffect:Is,useMemo:ux,useReducer:zp,useRef:w2,useState:function(){return zp(ec)},useDebugValue:Wp,useDeferredValue:function(f,d){var y=Ar();return hx(y,Ni.memoizedState,f,d)},useTransition:function(){var f=zp(ec)[0],d=Ar().memoizedState;return[typeof f=="boolean"?f:Nd(f),d]},useSyncExternalStore:nx,useId:ma,useHostTransitionStatus:gx,useFormState:M2,useActionState:M2,useOptimistic:function(f,d){var y=Ar();return g2(y,Ni,f,d)},useMemoCache:ex,useCacheRefresh:vx};oh.useEffectEvent=C2;var Id={readContext:ra,use:Bp,useCallback:cx,useContext:ra,useEffect:ox,useImperativeHandle:qp,useInsertionEffect:R2,useLayoutEffect:Is,useMemo:ux,useReducer:kp,useRef:w2,useState:function(){return kp(ec)},useDebugValue:Wp,useDeferredValue:function(f,d){var y=Ar();return Ni===null?fx(y,f,d):hx(y,Ni.memoizedState,f,d)},useTransition:function(){var f=kp(ec)[0],d=Ar().memoizedState;return[typeof f=="boolean"?f:Nd(f),d]},useSyncExternalStore:nx,useId:ma,useHostTransitionStatus:gx,useFormState:T2,useActionState:T2,useOptimistic:function(f,d){var y=Ar();return Ni!==null?g2(y,Ni,f,d):(y.baseState=f,[f,y.queue.dispatch])},useMemoCache:ex,useCacheRefresh:vx};Id.useEffectEvent=C2;function lh(f,d,y,_){d=f.memoizedState,y=y(_,d),y=y==null?d:p({},d,y),f.memoizedState=y,f.lanes===0&&(f.updateQueue.baseState=y)}var Ud={enqueueSetState:function(f,d,y){f=f._reactInternals;var _=Za(),N=fl(_);N.payload=d,y!=null&&(N.callback=y),d=Ql(f,N,_),d!==null&&(v(d,f,_),Zc(d,f,_))},enqueueReplaceState:function(f,d,y){f=f._reactInternals;var _=Za(),N=fl(_);N.tag=1,N.payload=d,y!=null&&(N.callback=y),d=Ql(f,N,_),d!==null&&(v(d,f,_),Zc(d,f,_))},enqueueForceUpdate:function(f,d){f=f._reactInternals;var y=Za(),_=fl(y);_.tag=2,d!=null&&(_.callback=d),d=Ql(f,_,y),d!==null&&(v(d,f,y),Zc(d,f,y))}};function D2(f,d,y,_,N,P,X){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(_,P,X):d.prototype&&d.prototype.isPureReactComponent?!Wf(y,_)||!Wf(N,P):!0}function P2(f,d,y,_){f=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(y,_),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(y,_),d.state!==f&&Ud.enqueueReplaceState(d,d.state,null)}function ga(f,d){var y=d;if("ref"in d){y={};for(var _ in d)_!=="ref"&&(y[_]=d[_])}if(f=f.defaultProps){y===d&&(y=p({},y));for(var N in f)y[N]===void 0&&(y[N]=f[N])}return y}function xx(f){zc(f)}function I2(f){console.error(f)}function Xp(f){zc(f)}function $p(f,d){try{var y=f.onUncaughtError;y(d.value,{componentStack:d.stack})}catch(_){setTimeout(function(){throw _})}}function U2(f,d,y){try{var _=f.onCaughtError;_(y.value,{componentStack:y.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(N){setTimeout(function(){throw N})}}function yx(f,d,y){return y=fl(y),y.tag=3,y.payload={element:null},y.callback=function(){$p(f,d)},y}function ch(f){return f=fl(f),f.tag=3,f}function ds(f,d,y,_){var N=y.type.getDerivedStateFromError;if(typeof N=="function"){var P=_.value;f.payload=function(){return N(P)},f.callback=function(){U2(d,y,_)}}var X=y.stateNode;X!==null&&typeof X.componentDidCatch=="function"&&(f.callback=function(){U2(d,y,_),typeof N!="function"&&(yl===null?yl=new Set([this]):yl.add(this));var oe=_.stack;this.componentDidCatch(_.value,{componentStack:oe!==null?oe:""})})}function Us(f,d,y,_,N){if(y.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){if(d=y.alternate,d!==null&&Hc(d,y,N,!0),y=$r.current,y!==null){switch(y.tag){case 31:case 13:return so===null?Tn():y.alternate===null&&_i===0&&(_i=3),y.flags&=-257,y.flags|=65536,y.lanes=N,_===wd?y.flags|=16384:(d=y.updateQueue,d===null?y.updateQueue=new Set([_]):d.add(_),Ow(f,_,N)),!1;case 22:return y.flags|=65536,_===wd?y.flags|=16384:(d=y.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([_])},y.updateQueue=d):(y=d.retryQueue,y===null?d.retryQueue=new Set([_]):y.add(_)),Ow(f,_,N)),!1}throw Error(i(435,y.tag))}return Ow(f,_,N),Tn(),!1}if(Jn)return d=$r.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=N,_!==Cp&&(f=Error(i(422),{cause:_}),Md(cs(f,y)))):(_!==Cp&&(d=Error(i(423),{cause:_}),Md(cs(d,y))),f=f.current.alternate,f.flags|=65536,N&=-N,f.lanes|=N,_=cs(_,y),N=yx(f.stateNode,_,N),Pp(f,N),_i!==4&&(_i=2)),!1;var P=Error(i(520),{cause:_});if(P=cs(P,y),Lo===null?Lo=[P]:Lo.push(P),_i!==4&&(_i=2),d===null)return!0;_=cs(_,y),y=d;do{switch(y.tag){case 3:return y.flags|=65536,f=N&-N,y.lanes|=f,f=yx(y.stateNode,_,f),Pp(y,f),!1;case 1:if(d=y.type,P=y.stateNode,(y.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(yl===null||!yl.has(P))))return y.flags|=65536,N&=-N,y.lanes|=N,N=ch(N),ds(N,f,y,_),Pp(y,N),!1}y=y.return}while(y!==null);return!1}var Yp=Error(i(461)),Ki=!1;function gr(f,d,y,_){d.child=f===null?f2(d,null,y,_):Zu(d,f.child,y,_)}function Ld(f,d,y,_,N){y=y.render;var P=d.ref;if("ref"in _){var X={};for(var oe in _)oe!=="ref"&&(X[oe]=_[oe])}else X=_;return Xu(d),_=Zv(f,d,y,X,P,N),oe=Kv(),f!==null&&!Ki?(Qv(f,d,N),Io(f,d,N)):(Jn&&oe&&Ep(d),d.flags|=1,gr(f,d,_,N),d.child)}function Bd(f,d,y,_,N){if(f===null){var P=y.type;return typeof P=="function"&&!Wa(P)&&P.defaultProps===void 0&&y.compare===null?(d.tag=15,d.type=P,Ls(f,d,P,_,N)):(f=yd(y.type,null,_,d,d.mode,N),f.ref=d.ref,f.return=d,d.child=f)}if(P=f.child,!Jc(f,N)){var X=P.memoizedProps;if(y=y.compare,y=y!==null?y:Wf,y(X,_)&&f.ref===d.ref)return Io(f,d,N)}return d.flags|=1,f=sl(P,_),f.ref=d.ref,f.return=d,d.child=f}function Ls(f,d,y,_,N){if(f!==null){var P=f.memoizedProps;if(Wf(P,_)&&f.ref===d.ref)if(Ki=!1,d.pendingProps=_=P,Jc(f,N))(f.flags&131072)!==0&&(Ki=!0);else return d.lanes=f.lanes,Io(f,d,N)}return uh(f,d,y,_,N)}function Bs(f,d,y,_){var N=_.children,P=f!==null?f.memoizedState:null;if(f===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),_.mode==="hidden"){if((d.flags&128)!==0){if(P=P!==null?P.baseLanes|y:y,f!==null){for(_=d.child=f.child,N=0;_!==null;)N=N|_.lanes|_.childLanes,_=_.sibling;_=N&~P}else _=0,d.child=null;return ml(f,d,P,y,_)}if((y&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},f!==null&&ih(d,P!==null?P.cachePool:null),P!==null?Wv(d,P):Xv(),h2(d);else return _=d.lanes=536870912,ml(f,d,P!==null?P.baseLanes|y:y,y,_)}else P!==null?(ih(d,P.cachePool),Wv(d,P),Jl(),d.memoizedState=null):(f!==null&&ih(d,null),Xv(),Jl());return gr(f,d,N,y),d.child}function Do(f,d){return f!==null&&f.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function ml(f,d,y,_,N){var P=ul();return P=P===null?null:{parent:ln._currentValue,pool:P},d.memoizedState={baseLanes:y,cachePool:P},f!==null&&ih(d,null),Xv(),h2(d),f!==null&&Hc(f,d,_,!0),d.childLanes=N,null}function oo(f,d){return d=fh({mode:d.mode,children:d.children},f.mode),d.ref=f.ref,f.child=d,d.return=f,d}function aa(f,d,y){return Zu(d,f.child,null,y),f=oo(d,d.pendingProps),f.flags|=2,Ps(d),d.memoizedState=null,f}function zd(f,d,y){var _=d.pendingProps,N=(d.flags&128)!==0;if(d.flags&=-129,f===null){if(Jn){if(_.mode==="hidden")return f=oo(d,_),d.lanes=536870912,Do(null,f);if($v(d),(f=Gi)?(f=WI(f,ia),f=f!==null&&f.data==="&"?f:null,f!==null&&(d.memoizedState={dehydrated:f,treeContext:ol!==null?{id:ll,overflow:cl}:null,retryLane:536870912,hydrationErrors:null},y=a2(f),y.return=d,d.child=y,na=d,Gi=null)):f=null,f===null)throw $n(d);return d.lanes=536870912,null}return oo(d,_)}var P=f.memoizedState;if(P!==null){var X=P.dehydrated;if($v(d),N)if(d.flags&256)d.flags&=-257,d=aa(f,d,y);else if(d.memoizedState!==null)d.child=f.child,d.flags|=128,d=null;else throw Error(i(558));else if(Ki||Hc(f,d,y,!1),N=(y&f.childLanes)!==0,Ki||N){if(_=Mi,_!==null&&(X=wr(_,y),X!==0&&X!==P.retryLane))throw P.retryLane=X,Fc(f,X),v(_,f,X),Yp;Tn(),d=aa(f,d,y)}else f=P.treeContext,Gi=bl(X.nextSibling),na=d,Jn=!0,Xl=null,ia=!1,f!==null&&Sd(d,f),d=oo(d,_),d.flags|=4096;return d}return f=sl(f.child,{mode:_.mode,children:_.children}),f.ref=d.ref,d.child=f,f.return=d,f}function Po(f,d){var y=d.ref;if(y===null)f!==null&&f.ref!==null&&(d.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(i(284));(f===null||f.ref!==y)&&(d.flags|=4194816)}}function uh(f,d,y,_,N){return Xu(d),y=Zv(f,d,y,_,void 0,N),_=Kv(),f!==null&&!Ki?(Qv(f,d,N),Io(f,d,N)):(Jn&&_&&Ep(d),d.flags|=1,gr(f,d,y,N),d.child)}function Oa(f,d,y,_,N,P){return Xu(d),d.updateQueue=null,y=p2(d,_,y,N),d2(f),_=Kv(),f!==null&&!Ki?(Qv(f,d,P),Io(f,d,P)):(Jn&&_&&Ep(d),d.flags|=1,gr(f,d,y,P),d.child)}function va(f,d,y,_,N){if(Xu(d),d.stateNode===null){var P=Gc,X=y.contextType;typeof X=="object"&&X!==null&&(P=ra(X)),P=new y(_,P),d.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,P.updater=Ud,d.stateNode=P,P._reactInternals=d,P=d.stateNode,P.props=_,P.state=d.memoizedState,P.refs={},Vv(d),X=y.contextType,P.context=typeof X=="object"&&X!==null?ra(X):Gc,P.state=d.memoizedState,X=y.getDerivedStateFromProps,typeof X=="function"&&(lh(d,y,X,_),P.state=d.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(X=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),X!==P.state&&Ud.enqueueReplaceState(P,P.state,null),Ku(d,_,P,N),Cd(),P.state=d.memoizedState),typeof P.componentDidMount=="function"&&(d.flags|=4194308),_=!0}else if(f===null){P=d.stateNode;var oe=d.memoizedProps,Me=ga(y,oe);P.props=Me;var Ke=P.context,pt=y.contextType;X=Gc,typeof pt=="object"&&pt!==null&&(X=ra(pt));var bt=y.getDerivedStateFromProps;pt=typeof bt=="function"||typeof P.getSnapshotBeforeUpdate=="function",oe=d.pendingProps!==oe,pt||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(oe||Ke!==X)&&P2(d,P,_,X),Yc=!1;var tt=d.memoizedState;P.state=tt,Ku(d,_,P,N),Cd(),Ke=d.memoizedState,oe||tt!==Ke||Yc?(typeof bt=="function"&&(lh(d,y,bt,_),Ke=d.memoizedState),(Me=Yc||D2(d,y,Me,_,tt,Ke,X))?(pt||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(d.flags|=4194308)):(typeof P.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=_,d.memoizedState=Ke),P.props=_,P.state=Ke,P.context=X,_=Me):(typeof P.componentDidMount=="function"&&(d.flags|=4194308),_=!1)}else{P=d.stateNode,Hv(f,d),X=d.memoizedProps,pt=ga(y,X),P.props=pt,bt=d.pendingProps,tt=P.context,Ke=y.contextType,Me=Gc,typeof Ke=="object"&&Ke!==null&&(Me=ra(Ke)),oe=y.getDerivedStateFromProps,(Ke=typeof oe=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(X!==bt||tt!==Me)&&P2(d,P,_,Me),Yc=!1,tt=d.memoizedState,P.state=tt,Ku(d,_,P,N),Cd();var ot=d.memoizedState;X!==bt||tt!==ot||Yc||f!==null&&f.dependencies!==null&&th(f.dependencies)?(typeof oe=="function"&&(lh(d,y,oe,_),ot=d.memoizedState),(pt=Yc||D2(d,y,pt,_,tt,ot,Me)||f!==null&&f.dependencies!==null&&th(f.dependencies))?(Ke||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(_,ot,Me),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(_,ot,Me)),typeof P.componentDidUpdate=="function"&&(d.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof P.componentDidUpdate!="function"||X===f.memoizedProps&&tt===f.memoizedState||(d.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||X===f.memoizedProps&&tt===f.memoizedState||(d.flags|=1024),d.memoizedProps=_,d.memoizedState=ot),P.props=_,P.state=ot,P.context=Me,_=pt):(typeof P.componentDidUpdate!="function"||X===f.memoizedProps&&tt===f.memoizedState||(d.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||X===f.memoizedProps&&tt===f.memoizedState||(d.flags|=1024),_=!1)}return P=_,Po(f,d),_=(d.flags&128)!==0,P||_?(P=d.stateNode,y=_&&typeof y.getDerivedStateFromError!="function"?null:P.render(),d.flags|=1,f!==null&&_?(d.child=Zu(d,f.child,null,N),d.child=Zu(d,null,y,N)):gr(f,d,y,N),d.memoizedState=P.state,f=d.child):f=Io(f,d,N),f}function oi(f,d,y,_){return Wu(),d.flags|=256,gr(f,d,y,_),d.child}var zs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function lo(f){return{baseLanes:f,cachePool:Np()}}function kd(f,d,y){return f=f!==null?f.childLanes&~y:0,d&&(f|=ni),f}function ks(f,d,y){var _=d.pendingProps,N=!1,P=(d.flags&128)!==0,X;if((X=P)||(X=f!==null&&f.memoizedState===null?!1:(pr.current&2)!==0),X&&(N=!0,d.flags&=-129),X=(d.flags&32)!==0,d.flags&=-33,f===null){if(Jn){if(N?Kc(d):Jl(),(f=Gi)?(f=WI(f,ia),f=f!==null&&f.data!=="&"?f:null,f!==null&&(d.memoizedState={dehydrated:f,treeContext:ol!==null?{id:ll,overflow:cl}:null,retryLane:536870912,hydrationErrors:null},y=a2(f),y.return=d,d.child=y,na=d,Gi=null)):f=null,f===null)throw $n(d);return $w(f)?d.lanes=32:d.lanes=536870912,null}var oe=_.children;return _=_.fallback,N?(Jl(),N=d.mode,oe=fh({mode:"hidden",children:oe},N),_=ql(_,N,y,null),oe.return=d,_.return=d,oe.sibling=_,d.child=oe,_=d.child,_.memoizedState=lo(y),_.childLanes=kd(f,X,y),d.memoizedState=zs,Do(null,_)):(Kc(d),Qc(d,oe))}var Me=f.memoizedState;if(Me!==null&&(oe=Me.dehydrated,oe!==null)){if(P)d.flags&256?(Kc(d),d.flags&=-257,d=hh(f,d,y)):d.memoizedState!==null?(Jl(),d.child=f.child,d.flags|=128,d=null):(Jl(),oe=_.fallback,N=d.mode,_=fh({mode:"visible",children:_.children},N),oe=ql(oe,N,y,null),oe.flags|=2,_.return=d,oe.return=d,_.sibling=oe,d.child=_,Zu(d,f.child,null,y),_=d.child,_.memoizedState=lo(y),_.childLanes=kd(f,X,y),d.memoizedState=zs,d=Do(null,_));else if(Kc(d),$w(oe)){if(X=oe.nextSibling&&oe.nextSibling.dataset,X)var Ke=X.dgst;X=Ke,_=Error(i(419)),_.stack="",_.digest=X,Md({value:_,source:null,stack:null}),d=hh(f,d,y)}else if(Ki||Hc(f,d,y,!1),X=(y&f.childLanes)!==0,Ki||X){if(X=Mi,X!==null&&(_=wr(X,y),_!==0&&_!==Me.retryLane))throw Me.retryLane=_,Fc(f,_),v(X,f,_),Yp;Xw(oe)||Tn(),d=hh(f,d,y)}else Xw(oe)?(d.flags|=192,d.child=f.child,d=null):(f=Me.treeContext,Gi=bl(oe.nextSibling),na=d,Jn=!0,Xl=null,ia=!1,f!==null&&Sd(d,f),d=Qc(d,_.children),d.flags|=4096);return d}return N?(Jl(),oe=_.fallback,N=d.mode,Me=f.child,Ke=Me.sibling,_=sl(Me,{mode:"hidden",children:_.children}),_.subtreeFlags=Me.subtreeFlags&65011712,Ke!==null?oe=sl(Ke,oe):(oe=ql(oe,N,y,null),oe.flags|=2),oe.return=d,_.return=d,_.sibling=oe,d.child=_,Do(null,_),_=d.child,oe=f.child.memoizedState,oe===null?oe=lo(y):(N=oe.cachePool,N!==null?(Me=ln._currentValue,N=N.parent!==Me?{parent:Me,pool:Me}:N):N=Np(),oe={baseLanes:oe.baseLanes|y,cachePool:N}),_.memoizedState=oe,_.childLanes=kd(f,X,y),d.memoizedState=zs,Do(f.child,_)):(Kc(d),y=f.child,f=y.sibling,y=sl(y,{mode:"visible",children:_.children}),y.return=d,y.sibling=null,f!==null&&(X=d.deletions,X===null?(d.deletions=[f],d.flags|=16):X.push(f)),d.child=y,d.memoizedState=null,y)}function Qc(f,d){return d=fh({mode:"visible",children:d},f.mode),d.return=f,f.child=d}function fh(f,d){return f=qa(22,f,null,d),f.lanes=0,f}function hh(f,d,y){return Zu(d,f.child,null,y),f=Qc(d,d.pendingProps.children),f.flags|=2,d.memoizedState=null,f}function ef(f,d,y){f.lanes|=d;var _=f.alternate;_!==null&&(_.lanes|=d),Zl(f.return,d,y)}function Fd(f,d,y,_,N,P){var X=f.memoizedState;X===null?f.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:_,tail:y,tailMode:N,treeForkCount:P}:(X.isBackwards=d,X.rendering=null,X.renderingStartTime=0,X.last=_,X.tail=y,X.tailMode=N,X.treeForkCount=P)}function Gd(f,d,y){var _=d.pendingProps,N=_.revealOrder,P=_.tail;_=_.children;var X=pr.current,oe=(X&2)!==0;if(oe?(X=X&1|2,d.flags|=128):X&=1,ie(pr,X),gr(f,d,_,y),_=Jn?eh:0,!oe&&f!==null&&(f.flags&128)!==0)e:for(f=d.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&ef(f,y,d);else if(f.tag===19)ef(f,y,d);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===d)break e;for(;f.sibling===null;){if(f.return===null||f.return===d)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}switch(N){case"forwards":for(y=d.child,N=null;y!==null;)f=y.alternate,f!==null&&Ip(f)===null&&(N=y),y=y.sibling;y=N,y===null?(N=d.child,d.child=null):(N=y.sibling,y.sibling=null),Fd(d,!1,N,y,P,_);break;case"backwards":case"unstable_legacy-backwards":for(y=null,N=d.child,d.child=null;N!==null;){if(f=N.alternate,f!==null&&Ip(f)===null){d.child=N;break}f=N.sibling,N.sibling=y,y=N,N=f}Fd(d,!0,y,null,P,_);break;case"together":Fd(d,!1,null,null,void 0,_);break;default:d.memoizedState=null}return d.child}function Io(f,d,y){if(f!==null&&(d.dependencies=f.dependencies),Vs|=d.lanes,(y&d.childLanes)===0)if(f!==null){if(Hc(f,d,y,!1),(y&d.childLanes)===0)return null}else return null;if(f!==null&&d.child!==f.child)throw Error(i(153));if(d.child!==null){for(f=d.child,y=sl(f,f.pendingProps),d.child=y,y.return=d;f.sibling!==null;)f=f.sibling,y=y.sibling=sl(f,f.pendingProps),y.return=d;y.sibling=null}return d.child}function Jc(f,d){return(f.lanes&d)!==0?!0:(f=f.dependencies,!!(f!==null&&th(f)))}function Vd(f,d,y){switch(d.tag){case 3:_e(d,d.stateNode.containerInfo),Yl(d,ln,f.memoizedState.cache),Wu();break;case 27:case 5:Ie(d);break;case 4:_e(d,d.stateNode.containerInfo);break;case 10:Yl(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,$v(d),null;break;case 13:var _=d.memoizedState;if(_!==null)return _.dehydrated!==null?(Kc(d),d.flags|=128,null):(y&d.child.childLanes)!==0?ks(f,d,y):(Kc(d),f=Io(f,d,y),f!==null?f.sibling:null);Kc(d);break;case 19:var N=(f.flags&128)!==0;if(_=(y&d.childLanes)!==0,_||(Hc(f,d,y,!1),_=(y&d.childLanes)!==0),N){if(_)return Gd(f,d,y);d.flags|=128}if(N=d.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),ie(pr,pr.current),_)break;return null;case 22:return d.lanes=0,Bs(f,d,y,d.pendingProps);case 24:Yl(d,ln,f.memoizedState.cache)}return Io(f,d,y)}function Zp(f,d,y){if(f!==null)if(f.memoizedProps!==d.pendingProps)Ki=!0;else{if(!Jc(f,y)&&(d.flags&128)===0)return Ki=!1,Vd(f,d,y);Ki=(f.flags&131072)!==0}else Ki=!1,Jn&&(d.flags&1048576)!==0&&Ov(d,eh,d.index);switch(d.lanes=0,d.tag){case 16:e:{var _=d.pendingProps;if(f=Yu(d.elementType),d.type=f,typeof f=="function")Wa(f)?(_=ga(f,_),d.tag=1,d=va(null,d,f,_,y)):(d.tag=0,d=uh(null,d,f,_,y));else{if(f!=null){var N=f.$$typeof;if(N===j){d.tag=11,d=Ld(null,d,f,_,y);break e}else if(N===D){d.tag=14,d=Bd(null,d,f,_,y);break e}}throw d=W(f)||f,Error(i(306,d,""))}}return d;case 0:return uh(f,d,d.type,d.pendingProps,y);case 1:return _=d.type,N=ga(_,d.pendingProps),va(f,d,_,N,y);case 3:e:{if(_e(d,d.stateNode.containerInfo),f===null)throw Error(i(387));_=d.pendingProps;var P=d.memoizedState;N=P.element,Hv(f,d),Ku(d,_,null,y);var X=d.memoizedState;if(_=X.cache,Yl(d,ln,_),_!==P.cache&&jp(d,[ln],y,!0),Cd(),_=X.element,P.isDehydrated)if(P={element:_,isDehydrated:!1,cache:X.cache},d.updateQueue.baseState=P,d.memoizedState=P,d.flags&256){d=oi(f,d,_,y);break e}else if(_!==N){N=cs(Error(i(424)),d),Md(N),d=oi(f,d,_,y);break e}else{switch(f=d.stateNode.containerInfo,f.nodeType){case 9:f=f.body;break;default:f=f.nodeName==="HTML"?f.ownerDocument.body:f}for(Gi=bl(f.firstChild),na=d,Jn=!0,Xl=null,ia=!0,y=f2(d,null,_,y),d.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling}else{if(Wu(),_===N){d=Io(f,d,y);break e}gr(f,d,_,y)}d=d.child}return d;case 26:return Po(f,d),f===null?(y=QI(d.type,null,d.pendingProps,null))?d.memoizedState=y:Jn||(y=d.type,f=d.pendingProps,_=H2(fe.current).createElement(y),_[dn]=d,_[Q]=f,Ka(_,y,f),Pe(_),d.stateNode=_):d.memoizedState=QI(d.type,f.memoizedProps,d.pendingProps,f.memoizedState),null;case 27:return Ie(d),f===null&&Jn&&(_=d.stateNode=YI(d.type,d.pendingProps,fe.current),na=d,ia=!0,N=Gi,yh(d.type)?(Yw=N,Gi=bl(_.firstChild)):Gi=N),gr(f,d,d.pendingProps.children,y),Po(f,d),f===null&&(d.flags|=4194304),d.child;case 5:return f===null&&Jn&&((N=_=Gi)&&(_=fQ(_,d.type,d.pendingProps,ia),_!==null?(d.stateNode=_,na=d,Gi=bl(_.firstChild),ia=!1,N=!0):N=!1),N||$n(d)),Ie(d),N=d.type,P=d.pendingProps,X=f!==null?f.memoizedProps:null,_=P.children,Hw(N,P)?_=null:X!==null&&Hw(N,X)&&(d.flags|=32),d.memoizedState!==null&&(N=Zv(f,d,Aw,null,null,y),Rx._currentValue=N),Po(f,d),gr(f,d,_,y),d.child;case 6:return f===null&&Jn&&((f=y=Gi)&&(y=hQ(y,d.pendingProps,ia),y!==null?(d.stateNode=y,na=d,Gi=null,f=!0):f=!1),f||$n(d)),null;case 13:return ks(f,d,y);case 4:return _e(d,d.stateNode.containerInfo),_=d.pendingProps,f===null?d.child=Zu(d,null,_,y):gr(f,d,_,y),d.child;case 11:return Ld(f,d,d.type,d.pendingProps,y);case 7:return gr(f,d,d.pendingProps,y),d.child;case 8:return gr(f,d,d.pendingProps.children,y),d.child;case 12:return gr(f,d,d.pendingProps.children,y),d.child;case 10:return _=d.pendingProps,Yl(d,d.type,_.value),gr(f,d,_.children,y),d.child;case 9:return N=d.type._context,_=d.pendingProps.children,Xu(d),N=ra(N),_=_(N),d.flags|=1,gr(f,d,_,y),d.child;case 14:return Bd(f,d,d.type,d.pendingProps,y);case 15:return Ls(f,d,d.type,d.pendingProps,y);case 19:return Gd(f,d,y);case 31:return zd(f,d,y);case 22:return Bs(f,d,y,d.pendingProps);case 24:return Xu(d),_=ra(ln),f===null?(N=ul(),N===null&&(N=Mi,P=Lv(),N.pooledCache=P,P.refCount++,P!==null&&(N.pooledCacheLanes|=y),N=P),d.memoizedState={parent:_,cache:N},Vv(d),Yl(d,ln,N)):((f.lanes&y)!==0&&(Hv(f,d),Ku(d,null,null,y),Cd()),N=f.memoizedState,P=d.memoizedState,N.parent!==_?(N={parent:_,cache:_},d.memoizedState=N,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=N),Yl(d,ln,_)):(_=P.cache,Yl(d,ln,_),_!==N.cache&&jp(d,[ln],y,!0))),gr(f,d,d.pendingProps.children,y),d.child;case 29:throw d.pendingProps}throw Error(i(156,d.tag))}function ps(f){f.flags|=4}function eu(f,d,y,_,N){if((d=(f.mode&32)!==0)&&(d=!1),d){if(f.flags|=16777216,(N&335544128)===N)if(f.stateNode.complete)f.flags|=8192;else if(Pt())f.flags|=8192;else throw hn=wd,Td}else f.flags&=-16777217}function nc(f,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)f.flags&=-16777217;else if(f.flags|=16777216,!iU(d))if(Pt())f.flags|=8192;else throw hn=wd,Td}function dh(f,d){d!==null&&(f.flags|=4),f.flags&16384&&(d=f.tag!==22?Bt():536870912,f.lanes|=d,Hs|=d)}function Hd(f,d){if(!Jn)switch(f.tailMode){case"hidden":d=f.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?f.tail=null:y.sibling=null;break;case"collapsed":y=f.tail;for(var _=null;y!==null;)y.alternate!==null&&(_=y),y=y.sibling;_===null?d||f.tail===null?f.tail=null:f.tail.sibling=null:_.sibling=null}}function Ri(f){var d=f.alternate!==null&&f.alternate.child===f.child,y=0,_=0;if(d)for(var N=f.child;N!==null;)y|=N.lanes|N.childLanes,_|=N.subtreeFlags&65011712,_|=N.flags&65011712,N.return=f,N=N.sibling;else for(N=f.child;N!==null;)y|=N.lanes|N.childLanes,_|=N.subtreeFlags,_|=N.flags,N.return=f,N=N.sibling;return f.subtreeFlags|=_,f.childLanes=y,d}function bx(f,d,y){var _=d.pendingProps;switch(Vc(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ri(d),null;case 1:return Ri(d),null;case 3:return y=d.stateNode,_=null,f!==null&&(_=f.memoizedState.cache),d.memoizedState.cache!==_&&(d.flags|=2048),ao(ln),Te(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(f===null||f.child===null)&&(qu(d)?ps(d):f===null||f.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Dv())),Ri(d),null;case 26:var N=d.type,P=d.memoizedState;return f===null?(ps(d),P!==null?(Ri(d),nc(d,P)):(Ri(d),eu(d,N,null,_,y))):P?P!==f.memoizedState?(ps(d),Ri(d),nc(d,P)):(Ri(d),d.flags&=-16777217):(f=f.memoizedProps,f!==_&&ps(d),Ri(d),eu(d,N,f,_,y)),null;case 27:if(Re(d),y=fe.current,N=d.type,f!==null&&d.stateNode!=null)f.memoizedProps!==_&&ps(d);else{if(!_){if(d.stateNode===null)throw Error(i(166));return Ri(d),null}f=ue.current,qu(d)?Rp(d):(f=YI(N,_,y),d.stateNode=f,ps(d))}return Ri(d),null;case 5:if(Re(d),N=d.type,f!==null&&d.stateNode!=null)f.memoizedProps!==_&&ps(d);else{if(!_){if(d.stateNode===null)throw Error(i(166));return Ri(d),null}if(P=ue.current,qu(d))Rp(d);else{var X=H2(fe.current);switch(P){case 1:P=X.createElementNS("http://www.w3.org/2000/svg",N);break;case 2:P=X.createElementNS("http://www.w3.org/1998/Math/MathML",N);break;default:switch(N){case"svg":P=X.createElementNS("http://www.w3.org/2000/svg",N);break;case"math":P=X.createElementNS("http://www.w3.org/1998/Math/MathML",N);break;case"script":P=X.createElement("div"),P.innerHTML="<script><\/script>",P=P.removeChild(P.firstChild);break;case"select":P=typeof _.is=="string"?X.createElement("select",{is:_.is}):X.createElement("select"),_.multiple?P.multiple=!0:_.size&&(P.size=_.size);break;default:P=typeof _.is=="string"?X.createElement(N,{is:_.is}):X.createElement(N)}}P[dn]=d,P[Q]=_;e:for(X=d.child;X!==null;){if(X.tag===5||X.tag===6)P.appendChild(X.stateNode);else if(X.tag!==4&&X.tag!==27&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===d)break e;for(;X.sibling===null;){if(X.return===null||X.return===d)break e;X=X.return}X.sibling.return=X.return,X=X.sibling}d.stateNode=P;e:switch(Ka(P,N,_),N){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break e;case"img":_=!0;break e;default:_=!1}_&&ps(d)}}return Ri(d),eu(d,d.type,f===null?null:f.memoizedProps,d.pendingProps,y),null;case 6:if(f&&d.stateNode!=null)f.memoizedProps!==_&&ps(d);else{if(typeof _!="string"&&d.stateNode===null)throw Error(i(166));if(f=fe.current,qu(d)){if(f=d.stateNode,y=d.memoizedProps,_=null,N=na,N!==null)switch(N.tag){case 27:case 5:_=N.memoizedProps}f[dn]=d,f=!!(f.nodeValue===y||_!==null&&_.suppressHydrationWarning===!0||BI(f.nodeValue,y)),f||$n(d,!0)}else f=H2(f).createTextNode(_),f[dn]=d,d.stateNode=f}return Ri(d),null;case 31:if(y=d.memoizedState,f===null||f.memoizedState!==null){if(_=qu(d),y!==null){if(f===null){if(!_)throw Error(i(318));if(f=d.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(557));f[dn]=d}else Wu(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Ri(d),f=!1}else y=Dv(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=y),f=!0;if(!f)return d.flags&256?(Ps(d),d):(Ps(d),null);if((d.flags&128)!==0)throw Error(i(558))}return Ri(d),null;case 13:if(_=d.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(N=qu(d),_!==null&&_.dehydrated!==null){if(f===null){if(!N)throw Error(i(318));if(N=d.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(i(317));N[dn]=d}else Wu(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Ri(d),N=!1}else N=Dv(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=N),N=!0;if(!N)return d.flags&256?(Ps(d),d):(Ps(d),null)}return Ps(d),(d.flags&128)!==0?(d.lanes=y,d):(y=_!==null,f=f!==null&&f.memoizedState!==null,y&&(_=d.child,N=null,_.alternate!==null&&_.alternate.memoizedState!==null&&_.alternate.memoizedState.cachePool!==null&&(N=_.alternate.memoizedState.cachePool.pool),P=null,_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(P=_.memoizedState.cachePool.pool),P!==N&&(_.flags|=2048)),y!==f&&y&&(d.child.flags|=8192),dh(d,d.updateQueue),Ri(d),null);case 4:return Te(),f===null&&zw(d.stateNode.containerInfo),Ri(d),null;case 10:return ao(d.type),Ri(d),null;case 19:if(K(pr),_=d.memoizedState,_===null)return Ri(d),null;if(N=(d.flags&128)!==0,P=_.rendering,P===null)if(N)Hd(_,!1);else{if(_i!==0||f!==null&&(f.flags&128)!==0)for(f=d.child;f!==null;){if(P=Ip(f),P!==null){for(d.flags|=128,Hd(_,!1),f=P.updateQueue,d.updateQueue=f,dh(d,f),d.subtreeFlags=0,f=y,y=d.child;y!==null;)Ra(y,f),y=y.sibling;return ie(pr,pr.current&1|2),Jn&&Wl(d,_.treeForkCount),d.child}f=f.sibling}_.tail!==null&&Z()>qs&&(d.flags|=128,N=!0,Hd(_,!1),d.lanes=4194304)}else{if(!N)if(f=Ip(P),f!==null){if(d.flags|=128,N=!0,f=f.updateQueue,d.updateQueue=f,dh(d,f),Hd(_,!0),_.tail===null&&_.tailMode==="hidden"&&!P.alternate&&!Jn)return Ri(d),null}else 2*Z()-_.renderingStartTime>qs&&y!==536870912&&(d.flags|=128,N=!0,Hd(_,!1),d.lanes=4194304);_.isBackwards?(P.sibling=d.child,d.child=P):(f=_.last,f!==null?f.sibling=P:d.child=P,_.last=P)}return _.tail!==null?(f=_.tail,_.rendering=f,_.tail=f.sibling,_.renderingStartTime=Z(),f.sibling=null,y=pr.current,ie(pr,N?y&1|2:y&1),Jn&&Wl(d,_.treeForkCount),f):(Ri(d),null);case 22:case 23:return Ps(d),Na(),_=d.memoizedState!==null,f!==null?f.memoizedState!==null!==_&&(d.flags|=8192):_&&(d.flags|=8192),_?(y&536870912)!==0&&(d.flags&128)===0&&(Ri(d),d.subtreeFlags&6&&(d.flags|=8192)):Ri(d),y=d.updateQueue,y!==null&&dh(d,y.retryQueue),y=null,f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(y=f.memoizedState.cachePool.pool),_=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(_=d.memoizedState.cachePool.pool),_!==y&&(d.flags|=2048),f!==null&&K(qc),null;case 24:return y=null,f!==null&&(y=f.memoizedState.cache),d.memoizedState.cache!==y&&(d.flags|=2048),ao(ln),Ri(d),null;case 25:return null;case 30:return null}throw Error(i(156,d.tag))}function Kp(f,d){switch(Vc(d),d.tag){case 1:return f=d.flags,f&65536?(d.flags=f&-65537|128,d):null;case 3:return ao(ln),Te(),f=d.flags,(f&65536)!==0&&(f&128)===0?(d.flags=f&-65537|128,d):null;case 26:case 27:case 5:return Re(d),null;case 31:if(d.memoizedState!==null){if(Ps(d),d.alternate===null)throw Error(i(340));Wu()}return f=d.flags,f&65536?(d.flags=f&-65537|128,d):null;case 13:if(Ps(d),f=d.memoizedState,f!==null&&f.dehydrated!==null){if(d.alternate===null)throw Error(i(340));Wu()}return f=d.flags,f&65536?(d.flags=f&-65537|128,d):null;case 19:return K(pr),null;case 4:return Te(),null;case 10:return ao(d.type),null;case 22:case 23:return Ps(d),Na(),f!==null&&K(qc),f=d.flags,f&65536?(d.flags=f&-65537|128,d):null;case 24:return ao(ln),null;case 25:return null;default:return null}}function tf(f,d){switch(Vc(d),d.tag){case 3:ao(ln),Te();break;case 26:case 27:case 5:Re(d);break;case 4:Te();break;case 31:d.memoizedState!==null&&Ps(d);break;case 13:Ps(d);break;case 19:K(pr);break;case 10:ao(d.type);break;case 22:case 23:Ps(d),Na(),f!==null&&K(qc);break;case 24:ao(ln)}}function gl(f,d){try{var y=d.updateQueue,_=y!==null?y.lastEffect:null;if(_!==null){var N=_.next;y=N;do{if((y.tag&f)===f){_=void 0;var P=y.create,X=y.inst;_=P(),X.destroy=_}y=y.next}while(y!==N)}}catch(oe){Li(d,d.return,oe)}}function co(f,d,y){try{var _=d.updateQueue,N=_!==null?_.lastEffect:null;if(N!==null){var P=N.next;_=P;do{if((_.tag&f)===f){var X=_.inst,oe=X.destroy;if(oe!==void 0){X.destroy=void 0,N=d;var Me=y,Ke=oe;try{Ke()}catch(pt){Li(N,Me,pt)}}}_=_.next}while(_!==P)}}catch(pt){Li(d,d.return,pt)}}function tu(f){var d=f.updateQueue;if(d!==null){var y=f.stateNode;try{pa(d,y)}catch(_){Li(f,f.return,_)}}}function Sx(f,d,y){y.props=ga(f.type,f.memoizedProps),y.state=f.memoizedState;try{y.componentWillUnmount()}catch(_){Li(f,d,_)}}function vl(f,d){try{var y=f.ref;if(y!==null){switch(f.tag){case 26:case 27:case 5:var _=f.stateNode;break;case 30:_=f.stateNode;break;default:_=f.stateNode}typeof y=="function"?f.refCleanup=y(_):y.current=_}}catch(N){Li(f,d,N)}}function Fs(f,d){var y=f.ref,_=f.refCleanup;if(y!==null)if(typeof _=="function")try{_()}catch(N){Li(f,d,N)}finally{f.refCleanup=null,f=f.alternate,f!=null&&(f.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(N){Li(f,d,N)}else y.current=null}function Gs(f){var d=f.type,y=f.memoizedProps,_=f.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":y.autoFocus&&_.focus();break e;case"img":y.src?_.src=y.src:y.srcSet&&(_.srcset=y.srcSet)}}catch(N){Li(f,f.return,N)}}function uo(f,d,y){try{var _=f.stateNode;aQ(_,f.type,y,d),_[Q]=d}catch(N){Li(f,f.return,N)}}function Br(f){return f.tag===5||f.tag===3||f.tag===26||f.tag===27&&yh(f.type)||f.tag===4}function xl(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||Br(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.tag===27&&yh(f.type)||f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function Pn(f,d,y){var _=f.tag;if(_===5||_===6)f=f.stateNode,d?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(f,d):(d=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,d.appendChild(f),y=y._reactRootContainer,y!=null||d.onclick!==null||(d.onclick=ua));else if(_!==4&&(_===27&&yh(f.type)&&(y=f.stateNode,d=null),f=f.child,f!==null))for(Pn(f,d,y),f=f.sibling;f!==null;)Pn(f,d,y),f=f.sibling}function mi(f,d,y){var _=f.tag;if(_===5||_===6)f=f.stateNode,d?y.insertBefore(f,d):y.appendChild(f);else if(_!==4&&(_===27&&yh(f.type)&&(y=f.stateNode),f=f.child,f!==null))for(mi(f,d,y),f=f.sibling;f!==null;)mi(f,d,y),f=f.sibling}function Er(f){var d=f.stateNode,y=f.memoizedProps;try{for(var _=f.type,N=d.attributes;N.length;)d.removeAttributeNode(N[0]);Ka(d,_,y),d[dn]=f,d[Q]=y}catch(P){Li(f,f.return,P)}}var fo=!1,Qi=!1,ic=!1,qd=typeof WeakSet=="function"?WeakSet:Set,vr=null;function ph(f,d){if(f=f.containerInfo,Gw=K2,f=yp(f),Xf(f)){if("selectionStart"in f)var y={start:f.selectionStart,end:f.selectionEnd};else e:{y=(y=f.ownerDocument)&&y.defaultView||window;var _=y.getSelection&&y.getSelection();if(_&&_.rangeCount!==0){y=_.anchorNode;var N=_.anchorOffset,P=_.focusNode;_=_.focusOffset;try{y.nodeType,P.nodeType}catch{y=null;break e}var X=0,oe=-1,Me=-1,Ke=0,pt=0,bt=f,tt=null;t:for(;;){for(var ot;bt!==y||N!==0&&bt.nodeType!==3||(oe=X+N),bt!==P||_!==0&&bt.nodeType!==3||(Me=X+_),bt.nodeType===3&&(X+=bt.nodeValue.length),(ot=bt.firstChild)!==null;)tt=bt,bt=ot;for(;;){if(bt===f)break t;if(tt===y&&++Ke===N&&(oe=X),tt===P&&++pt===_&&(Me=X),(ot=bt.nextSibling)!==null)break;bt=tt,tt=bt.parentNode}bt=ot}y=oe===-1||Me===-1?null:{start:oe,end:Me}}else y=null}y=y||{start:0,end:0}}else y=null;for(Vw={focusedElem:f,selectionRange:y},K2=!1,vr=d;vr!==null;)if(d=vr,f=d.child,(d.subtreeFlags&1028)!==0&&f!==null)f.return=d,vr=f;else for(;vr!==null;){switch(d=vr,P=d.alternate,f=d.flags,d.tag){case 0:if((f&4)!==0&&(f=d.updateQueue,f=f!==null?f.events:null,f!==null))for(y=0;y<f.length;y++)N=f[y],N.ref.impl=N.nextImpl;break;case 11:case 15:break;case 1:if((f&1024)!==0&&P!==null){f=void 0,y=d,N=P.memoizedProps,P=P.memoizedState,_=y.stateNode;try{var nn=ga(y.type,N);f=_.getSnapshotBeforeUpdate(nn,P),_.__reactInternalSnapshotBeforeUpdate=f}catch(mn){Li(y,y.return,mn)}}break;case 3:if((f&1024)!==0){if(f=d.stateNode.containerInfo,y=f.nodeType,y===9)Ww(f);else if(y===1)switch(f.nodeName){case"HEAD":case"HTML":case"BODY":Ww(f);break;default:f.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((f&1024)!==0)throw Error(i(163))}if(f=d.sibling,f!==null){f.return=d.return,vr=f;break}vr=d.return}}function L2(f,d,y){var _=y.flags;switch(y.tag){case 0:case 11:case 15:rc(f,y),_&4&&gl(5,y);break;case 1:if(rc(f,y),_&4)if(f=y.stateNode,d===null)try{f.componentDidMount()}catch(X){Li(y,y.return,X)}else{var N=ga(y.type,d.memoizedProps);d=d.memoizedState;try{f.componentDidUpdate(N,d,f.__reactInternalSnapshotBeforeUpdate)}catch(X){Li(y,y.return,X)}}_&64&&tu(y),_&512&&vl(y,y.return);break;case 3:if(rc(f,y),_&64&&(f=y.updateQueue,f!==null)){if(d=null,y.child!==null)switch(y.child.tag){case 27:case 5:d=y.child.stateNode;break;case 1:d=y.child.stateNode}try{pa(f,d)}catch(X){Li(y,y.return,X)}}break;case 27:d===null&&_&4&&Er(y);case 26:case 5:rc(f,y),d===null&&_&4&&Gs(y),_&512&&vl(y,y.return);break;case 12:rc(f,y);break;case 31:rc(f,y),_&4&&Jp(f,y);break;case 13:rc(f,y),_&4&&Mx(f,y),_&64&&(f=y.memoizedState,f!==null&&(f=f.dehydrated,f!==null&&(y=XK.bind(null,y),dQ(f,y))));break;case 22:if(_=y.memoizedState!==null||fo,!_){d=d!==null&&d.memoizedState!==null||Qi,N=fo;var P=Qi;fo=_,(Qi=d)&&!P?Si(f,y,(y.subtreeFlags&8772)!==0):rc(f,y),fo=N,Qi=P}break;case 30:break;default:rc(f,y)}}function Qp(f){var d=f.alternate;d!==null&&(f.alternate=null,Qp(d)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(d=f.stateNode,d!==null&&Tt(d)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}var li=null,zr=!1;function Da(f,d,y){for(y=y.child;y!==null;)nu(f,d,y),y=y.sibling}function nu(f,d,y){if(qe&&typeof qe.onCommitFiberUnmount=="function")try{qe.onCommitFiberUnmount(We,y)}catch{}switch(y.tag){case 26:Qi||Fs(y,d),Da(f,d,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:Qi||Fs(y,d);var _=li,N=zr;yh(y.type)&&(li=y.stateNode,zr=!1),Da(f,d,y),Ax(y.stateNode),li=_,zr=N;break;case 5:Qi||Fs(y,d);case 6:if(_=li,N=zr,li=null,Da(f,d,y),li=_,zr=N,li!==null)if(zr)try{(li.nodeType===9?li.body:li.nodeName==="HTML"?li.ownerDocument.body:li).removeChild(y.stateNode)}catch(P){Li(y,d,P)}else try{li.removeChild(y.stateNode)}catch(P){Li(y,d,P)}break;case 18:li!==null&&(zr?(f=li,HI(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,y.stateNode),um(f)):HI(li,y.stateNode));break;case 4:_=li,N=zr,li=y.stateNode.containerInfo,zr=!0,Da(f,d,y),li=_,zr=N;break;case 0:case 11:case 14:case 15:co(2,y,d),Qi||co(4,y,d),Da(f,d,y);break;case 1:Qi||(Fs(y,d),_=y.stateNode,typeof _.componentWillUnmount=="function"&&Sx(y,d,_)),Da(f,d,y);break;case 21:Da(f,d,y);break;case 22:Qi=(_=Qi)||y.memoizedState!==null,Da(f,d,y),Qi=_;break;default:Da(f,d,y)}}function Jp(f,d){if(d.memoizedState===null&&(f=d.alternate,f!==null&&(f=f.memoizedState,f!==null))){f=f.dehydrated;try{um(f)}catch(y){Li(d,d.return,y)}}}function Mx(f,d){if(d.memoizedState===null&&(f=d.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null))))try{um(f)}catch(y){Li(d,d.return,y)}}function B2(f){switch(f.tag){case 31:case 13:case 19:var d=f.stateNode;return d===null&&(d=f.stateNode=new qd),d;case 22:return f=f.stateNode,d=f._retryCache,d===null&&(d=f._retryCache=new qd),d;default:throw Error(i(435,f.tag))}}function Cr(f,d){var y=B2(f);d.forEach(function(_){if(!y.has(_)){y.add(_);var N=$K.bind(null,f,_);_.then(N,N)}})}function Pa(f,d){var y=d.deletions;if(y!==null)for(var _=0;_<y.length;_++){var N=y[_],P=f,X=d,oe=X;e:for(;oe!==null;){switch(oe.tag){case 27:if(yh(oe.type)){li=oe.stateNode,zr=!1;break e}break;case 5:li=oe.stateNode,zr=!1;break e;case 3:case 4:li=oe.stateNode.containerInfo,zr=!0;break e}oe=oe.return}if(li===null)throw Error(i(160));nu(P,X,N),li=null,zr=!1,P=N.alternate,P!==null&&(P.return=null),N.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)iu(d,f),d=d.sibling}var ms=null;function iu(f,d){var y=f.alternate,_=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:Pa(d,f),xr(f),_&4&&(co(3,f,f.return),gl(3,f),co(5,f,f.return));break;case 1:Pa(d,f),xr(f),_&512&&(Qi||y===null||Fs(y,y.return)),_&64&&fo&&(f=f.updateQueue,f!==null&&(_=f.callbacks,_!==null&&(y=f.shared.hiddenCallbacks,f.shared.hiddenCallbacks=y===null?_:y.concat(_))));break;case 26:var N=ms;if(Pa(d,f),xr(f),_&512&&(Qi||y===null||Fs(y,y.return)),_&4){var P=y!==null?y.memoizedState:null;if(_=f.memoizedState,y===null)if(_===null)if(f.stateNode===null){e:{_=f.type,y=f.memoizedProps,N=N.ownerDocument||N;t:switch(_){case"title":P=N.getElementsByTagName("title")[0],(!P||P[jt]||P[dn]||P.namespaceURI==="http://www.w3.org/2000/svg"||P.hasAttribute("itemprop"))&&(P=N.createElement(_),N.head.insertBefore(P,N.querySelector("head > title"))),Ka(P,_,y),P[dn]=f,Pe(P),_=P;break e;case"link":var X=tU("link","href",N).get(_+(y.href||""));if(X){for(var oe=0;oe<X.length;oe++)if(P=X[oe],P.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&P.getAttribute("rel")===(y.rel==null?null:y.rel)&&P.getAttribute("title")===(y.title==null?null:y.title)&&P.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){X.splice(oe,1);break t}}P=N.createElement(_),Ka(P,_,y),N.head.appendChild(P);break;case"meta":if(X=tU("meta","content",N).get(_+(y.content||""))){for(oe=0;oe<X.length;oe++)if(P=X[oe],P.getAttribute("content")===(y.content==null?null:""+y.content)&&P.getAttribute("name")===(y.name==null?null:y.name)&&P.getAttribute("property")===(y.property==null?null:y.property)&&P.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&P.getAttribute("charset")===(y.charSet==null?null:y.charSet)){X.splice(oe,1);break t}}P=N.createElement(_),Ka(P,_,y),N.head.appendChild(P);break;default:throw Error(i(468,_))}P[dn]=f,Pe(P),_=P}f.stateNode=_}else nU(N,f.type,f.stateNode);else f.stateNode=eU(N,_,f.memoizedProps);else P!==_?(P===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):P.count--,_===null?nU(N,f.type,f.stateNode):eU(N,_,f.memoizedProps)):_===null&&f.stateNode!==null&&uo(f,f.memoizedProps,y.memoizedProps)}break;case 27:Pa(d,f),xr(f),_&512&&(Qi||y===null||Fs(y,y.return)),y!==null&&_&4&&uo(f,f.memoizedProps,y.memoizedProps);break;case 5:if(Pa(d,f),xr(f),_&512&&(Qi||y===null||Fs(y,y.return)),f.flags&32){N=f.stateNode;try{Fa(N,"")}catch(nn){Li(f,f.return,nn)}}_&4&&f.stateNode!=null&&(N=f.memoizedProps,uo(f,N,y!==null?y.memoizedProps:N)),_&1024&&(ic=!0);break;case 6:if(Pa(d,f),xr(f),_&4){if(f.stateNode===null)throw Error(i(162));_=f.memoizedProps,y=f.stateNode;try{y.nodeValue=_}catch(nn){Li(f,f.return,nn)}}break;case 3:if(X2=null,N=ms,ms=q2(d.containerInfo),Pa(d,f),ms=N,xr(f),_&4&&y!==null&&y.memoizedState.isDehydrated)try{um(d.containerInfo)}catch(nn){Li(f,f.return,nn)}ic&&(ic=!1,z2(f));break;case 4:_=ms,ms=q2(f.stateNode.containerInfo),Pa(d,f),xr(f),ms=_;break;case 12:Pa(d,f),xr(f);break;case 31:Pa(d,f),xr(f),_&4&&(_=f.updateQueue,_!==null&&(f.updateQueue=null,Cr(f,_)));break;case 13:Pa(d,f),xr(f),f.child.flags&8192&&f.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(oc=Z()),_&4&&(_=f.updateQueue,_!==null&&(f.updateQueue=null,Cr(f,_)));break;case 22:N=f.memoizedState!==null;var Me=y!==null&&y.memoizedState!==null,Ke=fo,pt=Qi;if(fo=Ke||N,Qi=pt||Me,Pa(d,f),Qi=pt,fo=Ke,xr(f),_&8192)e:for(d=f.stateNode,d._visibility=N?d._visibility&-2:d._visibility|1,N&&(y===null||Me||fo||Qi||nf(f)),y=null,d=f;;){if(d.tag===5||d.tag===26){if(y===null){Me=y=d;try{if(P=Me.stateNode,N)X=P.style,typeof X.setProperty=="function"?X.setProperty("display","none","important"):X.display="none";else{oe=Me.stateNode;var bt=Me.memoizedProps.style,tt=bt!=null&&bt.hasOwnProperty("display")?bt.display:null;oe.style.display=tt==null||typeof tt=="boolean"?"":(""+tt).trim()}}catch(nn){Li(Me,Me.return,nn)}}}else if(d.tag===6){if(y===null){Me=d;try{Me.stateNode.nodeValue=N?"":Me.memoizedProps}catch(nn){Li(Me,Me.return,nn)}}}else if(d.tag===18){if(y===null){Me=d;try{var ot=Me.stateNode;N?qI(ot,!0):qI(Me.stateNode,!1)}catch(nn){Li(Me,Me.return,nn)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===f)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===f)break e;for(;d.sibling===null;){if(d.return===null||d.return===f)break e;y===d&&(y=null),d=d.return}y===d&&(y=null),d.sibling.return=d.return,d=d.sibling}_&4&&(_=f.updateQueue,_!==null&&(y=_.retryQueue,y!==null&&(_.retryQueue=null,Cr(f,y))));break;case 19:Pa(d,f),xr(f),_&4&&(_=f.updateQueue,_!==null&&(f.updateQueue=null,Cr(f,_)));break;case 30:break;case 21:break;default:Pa(d,f),xr(f)}}function xr(f){var d=f.flags;if(d&2){try{for(var y,_=f.return;_!==null;){if(Br(_)){y=_;break}_=_.return}if(y==null)throw Error(i(160));switch(y.tag){case 27:var N=y.stateNode,P=xl(f);mi(f,P,N);break;case 5:var X=y.stateNode;y.flags&32&&(Fa(X,""),y.flags&=-33);var oe=xl(f);mi(f,oe,X);break;case 3:case 4:var Me=y.stateNode.containerInfo,Ke=xl(f);Pn(f,Ke,Me);break;default:throw Error(i(161))}}catch(pt){Li(f,f.return,pt)}f.flags&=-3}d&4096&&(f.flags&=-4097)}function z2(f){if(f.subtreeFlags&1024)for(f=f.child;f!==null;){var d=f;z2(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),f=f.sibling}}function rc(f,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)L2(f,d.alternate,d),d=d.sibling}function nf(f){for(f=f.child;f!==null;){var d=f;switch(d.tag){case 0:case 11:case 14:case 15:co(4,d,d.return),nf(d);break;case 1:Fs(d,d.return);var y=d.stateNode;typeof y.componentWillUnmount=="function"&&Sx(d,d.return,y),nf(d);break;case 27:Ax(d.stateNode);case 26:case 5:Fs(d,d.return),nf(d);break;case 22:d.memoizedState===null&&nf(d);break;case 30:nf(d);break;default:nf(d)}f=f.sibling}}function Si(f,d,y){for(y=y&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var _=d.alternate,N=f,P=d,X=P.flags;switch(P.tag){case 0:case 11:case 15:Si(N,P,y),gl(4,P);break;case 1:if(Si(N,P,y),_=P,N=_.stateNode,typeof N.componentDidMount=="function")try{N.componentDidMount()}catch(Ke){Li(_,_.return,Ke)}if(_=P,N=_.updateQueue,N!==null){var oe=_.stateNode;try{var Me=N.shared.hiddenCallbacks;if(Me!==null)for(N.shared.hiddenCallbacks=null,N=0;N<Me.length;N++)hl(Me[N],oe)}catch(Ke){Li(_,_.return,Ke)}}y&&X&64&&tu(P),vl(P,P.return);break;case 27:Er(P);case 26:case 5:Si(N,P,y),y&&_===null&&X&4&&Gs(P),vl(P,P.return);break;case 12:Si(N,P,y);break;case 31:Si(N,P,y),y&&X&4&&Jp(N,P);break;case 13:Si(N,P,y),y&&X&4&&Mx(N,P);break;case 22:P.memoizedState===null&&Si(N,P,y),vl(P,P.return);break;case 30:break;default:Si(N,P,y)}d=d.sibling}}function em(f,d){var y=null;f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(y=f.memoizedState.cachePool.pool),f=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(f=d.memoizedState.cachePool.pool),f!==y&&(f!=null&&f.refCount++,y!=null&&da(y))}function ac(f,d){f=null,d.alternate!==null&&(f=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==f&&(d.refCount++,f!=null&&da(f))}function Yr(f,d,y,_){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)or(f,d,y,_),d=d.sibling}function or(f,d,y,_){var N=d.flags;switch(d.tag){case 0:case 11:case 15:Yr(f,d,y,_),N&2048&&gl(9,d);break;case 1:Yr(f,d,y,_);break;case 3:Yr(f,d,y,_),N&2048&&(f=null,d.alternate!==null&&(f=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==f&&(d.refCount++,f!=null&&da(f)));break;case 12:if(N&2048){Yr(f,d,y,_),f=d.stateNode;try{var P=d.memoizedProps,X=P.id,oe=P.onPostCommit;typeof oe=="function"&&oe(X,d.alternate===null?"mount":"update",f.passiveEffectDuration,-0)}catch(Me){Li(d,d.return,Me)}}else Yr(f,d,y,_);break;case 31:Yr(f,d,y,_);break;case 13:Yr(f,d,y,_);break;case 23:break;case 22:P=d.stateNode,X=d.alternate,d.memoizedState!==null?P._visibility&2?Yr(f,d,y,_):mh(f,d):P._visibility&2?Yr(f,d,y,_):(P._visibility|=2,ru(f,d,y,_,(d.subtreeFlags&10256)!==0||!1)),N&2048&&em(X,d);break;case 24:Yr(f,d,y,_),N&2048&&ac(d.alternate,d);break;default:Yr(f,d,y,_)}}function ru(f,d,y,_,N){for(N=N&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var P=f,X=d,oe=y,Me=_,Ke=X.flags;switch(X.tag){case 0:case 11:case 15:ru(P,X,oe,Me,N),gl(8,X);break;case 23:break;case 22:var pt=X.stateNode;X.memoizedState!==null?pt._visibility&2?ru(P,X,oe,Me,N):mh(P,X):(pt._visibility|=2,ru(P,X,oe,Me,N)),N&&Ke&2048&&em(X.alternate,X);break;case 24:ru(P,X,oe,Me,N),N&&Ke&2048&&ac(X.alternate,X);break;default:ru(P,X,oe,Me,N)}d=d.sibling}}function mh(f,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var y=f,_=d,N=_.flags;switch(_.tag){case 22:mh(y,_),N&2048&&em(_.alternate,_);break;case 24:mh(y,_),N&2048&&ac(_.alternate,_);break;default:mh(y,_)}d=d.sibling}}var yr=8192;function rf(f,d,y){if(f.subtreeFlags&yr)for(f=f.child;f!==null;)Rr(f,d,y),f=f.sibling}function Rr(f,d,y){switch(f.tag){case 26:rf(f,d,y),f.flags&yr&&f.memoizedState!==null&&wQ(y,ms,f.memoizedState,f.memoizedProps);break;case 5:rf(f,d,y);break;case 3:case 4:var _=ms;ms=q2(f.stateNode.containerInfo),rf(f,d,y),ms=_;break;case 22:f.memoizedState===null&&(_=f.alternate,_!==null&&_.memoizedState!==null?(_=yr,yr=16777216,rf(f,d,y),yr=_):rf(f,d,y));break;default:rf(f,d,y)}}function gs(f){var d=f.alternate;if(d!==null&&(f=d.child,f!==null)){d.child=null;do d=f.sibling,f.sibling=null,f=d;while(f!==null)}}function Ya(f){var d=f.deletions;if((f.flags&16)!==0){if(d!==null)for(var y=0;y<d.length;y++){var _=d[y];vr=_,Wd(_,f)}gs(f)}if(f.subtreeFlags&10256)for(f=f.child;f!==null;)af(f),f=f.sibling}function af(f){switch(f.tag){case 0:case 11:case 15:Ya(f),f.flags&2048&&co(9,f,f.return);break;case 3:Ya(f);break;case 12:Ya(f);break;case 22:var d=f.stateNode;f.memoizedState!==null&&d._visibility&2&&(f.return===null||f.return.tag!==13)?(d._visibility&=-3,tm(f)):Ya(f);break;default:Ya(f)}}function tm(f){var d=f.deletions;if((f.flags&16)!==0){if(d!==null)for(var y=0;y<d.length;y++){var _=d[y];vr=_,Wd(_,f)}gs(f)}for(f=f.child;f!==null;){switch(d=f,d.tag){case 0:case 11:case 15:co(8,d,d.return),tm(d);break;case 22:y=d.stateNode,y._visibility&2&&(y._visibility&=-3,tm(d));break;default:tm(d)}f=f.sibling}}function Wd(f,d){for(;vr!==null;){var y=vr;switch(y.tag){case 0:case 11:case 15:co(8,y,d);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var _=y.memoizedState.cachePool.pool;_!=null&&_.refCount++}break;case 24:da(y.memoizedState.cache)}if(_=y.child,_!==null)_.return=y,vr=_;else e:for(y=f;vr!==null;){_=vr;var N=_.sibling,P=_.return;if(Qp(_),_===y){vr=null;break e}if(N!==null){N.return=P,vr=N;break e}vr=P}}}var nm={getCacheForType:function(f){var d=ra(ln),y=d.data.get(f);return y===void 0&&(y=f(),d.data.set(f,y)),y},cacheSignal:function(){return ra(ln).controller.signal}},im=typeof WeakMap=="function"?WeakMap:Map,ti=0,Mi=null,In=null,Yn=0,cn=0,qn=null,En=!1,Fn=!1,Oi=!1,jr=0,_i=0,Vs=0,sc=0,Uo=0,ni=0,Hs=0,Lo=null,Ia=null,vs=!1,oc=0,gh=0,qs=1/0,vh=null,yl=null,lr=0,Bo=null,Ws=null,ho=0,lc=0,sf=null,rm=null,of=0,lf=null;function Za(){return(ti&2)!==0&&Yn!==0?Yn&-Yn:k.T!==null?Iw():Fi()}function m(){if(ni===0)if((Yn&536870912)===0||Jn){var f=ut;ut<<=1,(ut&3932160)===0&&(ut=262144),ni=f}else ni=536870912;return f=$r.current,f!==null&&(f.flags|=32),ni}function v(f,d,y){(f===Mi&&(cn===2||cn===9)||f.cancelPendingCommit!==null)&&(Ve(f,0),V(f,Yn,ni,!1)),On(f,y),((ti&2)===0||f!==Mi)&&(f===Mi&&((ti&2)===0&&(sc|=y),_i===4&&V(f,Yn,ni,!1)),au(f))}function w(f,d,y){if((ti&6)!==0)throw Error(i(327));var _=!y&&(d&127)===0&&(d&f.expiredLanes)===0||Ct(f,d),N=_?cf(f,d):xs(f,d,!0),P=_;do{if(N===0){Fn&&!_&&V(f,d,0,!1);break}else{if(y=f.current.alternate,P&&!B(y)){N=xs(f,d,!1),P=!1;continue}if(N===2){if(P=d,f.errorRecoveryDisabledLanes&P)var X=0;else X=f.pendingLanes&-536870913,X=X!==0?X:X&536870912?536870912:0;if(X!==0){d=X;e:{var oe=f;N=Lo;var Me=oe.current.memoizedState.isDehydrated;if(Me&&(Ve(oe,X).flags|=256),X=xs(oe,X,!1),X!==2){if(Oi&&!Me){oe.errorRecoveryDisabledLanes|=P,sc|=P,N=4;break e}P=Ia,Ia=N,P!==null&&(Ia===null?Ia=P:Ia.push.apply(Ia,P))}N=X}if(P=!1,N!==2)continue}}if(N===1){Ve(f,0),V(f,d,0,!0);break}e:{switch(_=f,P=N,P){case 0:case 1:throw Error(i(345));case 4:if((d&4194048)!==d)break;case 6:V(_,d,ni,!En);break e;case 2:Ia=null;break;case 3:case 5:break;default:throw Error(i(329))}if((d&62914560)===d&&(N=oc+300-Z(),10<N)){if(V(_,d,ni,!En),Ze(_,0,!0)!==0)break e;ho=d,_.timeoutHandle=GI(O.bind(null,_,y,Ia,vh,vs,d,ni,sc,Hs,En,P,"Throttled",-0,0),N);break e}O(_,y,Ia,vh,vs,d,ni,sc,Hs,En,P,null,-0,0)}}break}while(!0);au(f)}function O(f,d,y,_,N,P,X,oe,Me,Ke,pt,bt,tt,ot){if(f.timeoutHandle=-1,bt=d.subtreeFlags,bt&8192||(bt&16785408)===16785408){bt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ua},Rr(d,P,bt);var nn=(P&62914560)===P?oc-Z():(P&4194048)===P?gh-Z():0;if(nn=AQ(bt,nn),nn!==null){ho=P,f.cancelPendingCommit=nn(yn.bind(null,f,d,P,y,_,N,X,oe,Me,pt,bt,null,tt,ot)),V(f,P,X,!Ke);return}}yn(f,d,P,y,_,N,X,oe,Me)}function B(f){for(var d=f;;){var y=d.tag;if((y===0||y===11||y===15)&&d.flags&16384&&(y=d.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var _=0;_<y.length;_++){var N=y[_],P=N.getSnapshot;N=N.value;try{if(!Zi(P(),N))return!1}catch{return!1}}if(y=d.child,d.subtreeFlags&16384&&y!==null)y.return=d,d=y;else{if(d===f)break;for(;d.sibling===null;){if(d.return===null||d.return===f)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function V(f,d,y,_){d&=~Uo,d&=~sc,f.suspendedLanes|=d,f.pingedLanes&=~d,_&&(f.warmLanes|=d),_=f.expirationTimes;for(var N=d;0<N;){var P=31-pe(N),X=1<<P;_[P]=-1,N&=~X}y!==0&&Ii(f,y,d)}function le(){return(ti&6)===0?(_x(0),!1):!0}function Se(){if(In!==null){if(cn===0)var f=In.return;else f=In,ja=$l=null,Jv(f),Xc=null,$c=0,f=In;for(;f!==null;)tf(f.alternate,f),f=f.return;In=null}}function Ve(f,d){var y=f.timeoutHandle;y!==-1&&(f.timeoutHandle=-1,lQ(y)),y=f.cancelPendingCommit,y!==null&&(f.cancelPendingCommit=null,y()),ho=0,Se(),Mi=f,In=y=sl(f.current,null),Yn=d,cn=0,qn=null,En=!1,Fn=Ct(f,d),Oi=!1,Hs=ni=Uo=sc=Vs=_i=0,Ia=Lo=null,vs=!1,(d&8)!==0&&(d|=d&32);var _=f.entangledLanes;if(_!==0)for(f=f.entanglements,_&=d;0<_;){var N=31-pe(_),P=1<<N;d|=f[N],_&=~P}return jr=d,kc(),y}function gt(f,d){xn=null,k.H=Pd,d===Wc||d===Oo?(d=Op(),cn=3):d===Td?(d=Op(),cn=4):cn=d===Yp?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,qn=d,In===null&&(_i=1,$p(f,cs(d,f.current)))}function Pt(){var f=$r.current;return f===null?!0:(Yn&4194048)===Yn?so===null:(Yn&62914560)===Yn||(Yn&536870912)!==0?f===so:!1}function qt(){var f=k.H;return k.H=Pd,f===null?Pd:f}function $t(){var f=k.A;return k.A=nm,f}function Tn(){_i=4,En||(Yn&4194048)!==Yn&&$r.current!==null||(Fn=!0),(Vs&134217727)===0&&(sc&134217727)===0||Mi===null||V(Mi,Yn,ni,!1)}function xs(f,d,y){var _=ti;ti|=2;var N=qt(),P=$t();(Mi!==f||Yn!==d)&&(vh=null,Ve(f,d)),d=!1;var X=_i;e:do try{if(cn!==0&&In!==null){var oe=In,Me=qn;switch(cn){case 8:Se(),X=6;break e;case 3:case 2:case 9:case 6:$r.current===null&&(d=!0);var Ke=cn;if(cn=0,qn=null,Ot(f,oe,Me,Ke),y&&Fn){X=0;break e}break;default:Ke=cn,cn=0,qn=null,Ot(f,oe,Me,Ke)}}Xd(),X=_i;break}catch(pt){gt(f,pt)}while(!0);return d&&f.shellSuspendCounter++,ja=$l=null,ti=_,k.H=N,k.A=P,In===null&&(Mi=null,Yn=0,kc()),X}function Xd(){for(;In!==null;)ze(In)}function cf(f,d){var y=ti;ti|=2;var _=qt(),N=$t();Mi!==f||Yn!==d?(vh=null,qs=Z()+500,Ve(f,d)):Fn=Ct(f,d);e:do try{if(cn!==0&&In!==null){d=In;var P=qn;t:switch(cn){case 1:cn=0,qn=null,Ot(f,d,P,1);break;case 2:case 9:if(u2(P)){cn=0,qn=null,it(d);break}d=function(){cn!==2&&cn!==9||Mi!==f||(cn=7),au(f)},P.then(d,d);break e;case 3:cn=7;break e;case 4:cn=5;break e;case 7:u2(P)?(cn=0,qn=null,it(d)):(cn=0,qn=null,Ot(f,d,P,7));break;case 5:var X=null;switch(In.tag){case 26:X=In.memoizedState;case 5:case 27:var oe=In;if(X?iU(X):oe.stateNode.complete){cn=0,qn=null;var Me=oe.sibling;if(Me!==null)In=Me;else{var Ke=oe.return;Ke!==null?(In=Ke,on(Ke)):In=null}break t}}cn=0,qn=null,Ot(f,d,P,5);break;case 6:cn=0,qn=null,Ot(f,d,P,6);break;case 8:Se(),_i=6;break e;default:throw Error(i(462))}}Je();break}catch(pt){gt(f,pt)}while(!0);return ja=$l=null,k.H=_,k.A=N,ti=y,In!==null?0:(Mi=null,Yn=0,kc(),_i)}function Je(){for(;In!==null&&!at();)ze(In)}function ze(f){var d=Zp(f.alternate,f,jr);f.memoizedProps=f.pendingProps,d===null?on(f):In=d}function it(f){var d=f,y=d.alternate;switch(d.tag){case 15:case 0:d=Oa(y,d,d.pendingProps,d.type,void 0,Yn);break;case 11:d=Oa(y,d,d.pendingProps,d.type.render,d.ref,Yn);break;case 5:Jv(d);default:tf(y,d),d=In=Ra(d,jr),d=Zp(y,d,jr)}f.memoizedProps=f.pendingProps,d===null?on(f):In=d}function Ot(f,d,y,_){ja=$l=null,Jv(d),Xc=null,$c=0;var N=d.return;try{if(Us(f,N,d,y,Yn)){_i=1,$p(f,cs(y,f.current)),In=null;return}}catch(P){if(N!==null)throw In=N,P;_i=1,$p(f,cs(y,f.current)),In=null;return}d.flags&32768?(Jn||_===1?f=!0:Fn||(Yn&536870912)!==0?f=!1:(En=f=!0,(_===2||_===9||_===3||_===6)&&(_=$r.current,_!==null&&_.tag===13&&(_.flags|=16384))),Vi(d,f)):on(d)}function on(f){var d=f;do{if((d.flags&32768)!==0){Vi(d,En);return}f=d.return;var y=bx(d.alternate,d,jr);if(y!==null){In=y;return}if(d=d.sibling,d!==null){In=d;return}In=d=f}while(d!==null);_i===0&&(_i=5)}function Vi(f,d){do{var y=Kp(f.alternate,f);if(y!==null){y.flags&=32767,In=y;return}if(y=f.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!d&&(f=f.sibling,f!==null)){In=f;return}In=f=y}while(f!==null);_i=6,In=null}function yn(f,d,y,_,N,P,X,oe,Me){f.cancelPendingCommit=null;do am();while(lr!==0);if((ti&6)!==0)throw Error(i(327));if(d!==null){if(d===f.current)throw Error(i(177));if(P=d.lanes|d.childLanes,P|=Tp,Vn(f,y,P,X,oe,Me),f===Mi&&(In=Mi=null,Yn=0),Ws=d,Bo=f,ho=y,lc=P,sf=N,rm=_,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(f.callbackNode=null,f.callbackPriority=0,YK(Ne,function(){return wI(),null})):(f.callbackNode=null,f.callbackPriority=0),_=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||_){_=k.T,k.T=null,N=$.p,$.p=2,X=ti,ti|=4;try{ph(f,d,y)}finally{ti=X,$.p=N,k.T=_}}lr=1,ci(),Zr(),ui()}}function ci(){if(lr===1){lr=0;var f=Bo,d=Ws,y=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||y){y=k.T,k.T=null;var _=$.p;$.p=2;var N=ti;ti|=4;try{iu(d,f);var P=Vw,X=yp(f.containerInfo),oe=P.focusedElem,Me=P.selectionRange;if(X!==oe&&oe&&oe.ownerDocument&&xp(oe.ownerDocument.documentElement,oe)){if(Me!==null&&Xf(oe)){var Ke=Me.start,pt=Me.end;if(pt===void 0&&(pt=Ke),"selectionStart"in oe)oe.selectionStart=Ke,oe.selectionEnd=Math.min(pt,oe.value.length);else{var bt=oe.ownerDocument||document,tt=bt&&bt.defaultView||window;if(tt.getSelection){var ot=tt.getSelection(),nn=oe.textContent.length,mn=Math.min(Me.start,nn),qi=Me.end===void 0?mn:Math.min(Me.end,nn);!ot.extend&&mn>qi&&(X=qi,qi=mn,mn=X);var ke=Cv(oe,mn),je=Cv(oe,qi);if(ke&&je&&(ot.rangeCount!==1||ot.anchorNode!==ke.node||ot.anchorOffset!==ke.offset||ot.focusNode!==je.node||ot.focusOffset!==je.offset)){var $e=bt.createRange();$e.setStart(ke.node,ke.offset),ot.removeAllRanges(),mn>qi?(ot.addRange($e),ot.extend(je.node,je.offset)):($e.setEnd(je.node,je.offset),ot.addRange($e))}}}}for(bt=[],ot=oe;ot=ot.parentNode;)ot.nodeType===1&&bt.push({element:ot,left:ot.scrollLeft,top:ot.scrollTop});for(typeof oe.focus=="function"&&oe.focus(),oe=0;oe<bt.length;oe++){var xt=bt[oe];xt.element.scrollLeft=xt.left,xt.element.scrollTop=xt.top}}K2=!!Gw,Vw=Gw=null}finally{ti=N,$.p=_,k.T=y}}f.current=d,lr=2}}function Zr(){if(lr===2){lr=0;var f=Bo,d=Ws,y=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||y){y=k.T,k.T=null;var _=$.p;$.p=2;var N=ti;ti|=4;try{L2(f,d.alternate,d)}finally{ti=N,$.p=_,k.T=y}}lr=3}}function ui(){if(lr===4||lr===3){lr=0,ne();var f=Bo,d=Ws,y=ho,_=rm;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?lr=5:(lr=0,Ws=Bo=null,cc(f,f.pendingLanes));var N=f.pendingLanes;if(N===0&&(yl=null),sr(y),d=d.stateNode,qe&&typeof qe.onCommitFiberRoot=="function")try{qe.onCommitFiberRoot(We,d,void 0,(d.current.flags&128)===128)}catch{}if(_!==null){d=k.T,N=$.p,$.p=2,k.T=null;try{for(var P=f.onRecoverableError,X=0;X<_.length;X++){var oe=_[X];P(oe.value,{componentStack:oe.stack})}}finally{k.T=d,$.p=N}}(ho&3)!==0&&am(),au(f),N=f.pendingLanes,(y&261930)!==0&&(N&42)!==0?f===lf?of++:(of=0,lf=f):of=0,_x(0)}}function cc(f,d){(f.pooledCacheLanes&=d)===0&&(d=f.pooledCache,d!=null&&(f.pooledCache=null,da(d)))}function am(){return ci(),Zr(),ui(),wI()}function wI(){if(lr!==5)return!1;var f=Bo,d=lc;lc=0;var y=sr(ho),_=k.T,N=$.p;try{$.p=32>y?32:y,k.T=null,y=sf,sf=null;var P=Bo,X=ho;if(lr=0,Ws=Bo=null,ho=0,(ti&6)!==0)throw Error(i(331));var oe=ti;if(ti|=4,af(P.current),or(P,P.current,X,y),ti=oe,_x(0,!1),qe&&typeof qe.onPostCommitFiberRoot=="function")try{qe.onPostCommitFiberRoot(We,P)}catch{}return!0}finally{$.p=N,k.T=_,cc(f,d)}}function AI(f,d,y){d=cs(y,d),d=yx(f.stateNode,d,2),f=Ql(f,d,2),f!==null&&(On(f,2),au(f))}function Li(f,d,y){if(f.tag===3)AI(f,f,y);else for(;d!==null;){if(d.tag===3){AI(d,f,y);break}else if(d.tag===1){var _=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(yl===null||!yl.has(_))){f=cs(y,f),y=ch(2),_=Ql(d,y,2),_!==null&&(ds(y,_,d,f),On(_,2),au(_));break}}d=d.return}}function Ow(f,d,y){var _=f.pingCache;if(_===null){_=f.pingCache=new im;var N=new Set;_.set(d,N)}else N=_.get(d),N===void 0&&(N=new Set,_.set(d,N));N.has(y)||(Oi=!0,N.add(y),f=WK.bind(null,f,d,y),d.then(f,f))}function WK(f,d,y){var _=f.pingCache;_!==null&&_.delete(d),f.pingedLanes|=f.suspendedLanes&y,f.warmLanes&=~y,Mi===f&&(Yn&y)===y&&(_i===4||_i===3&&(Yn&62914560)===Yn&&300>Z()-oc?(ti&2)===0&&Ve(f,0):Uo|=y,Hs===Yn&&(Hs=0)),au(f)}function EI(f,d){d===0&&(d=Bt()),f=Fc(f,d),f!==null&&(On(f,d),au(f))}function XK(f){var d=f.memoizedState,y=0;d!==null&&(y=d.retryLane),EI(f,y)}function $K(f,d){var y=0;switch(f.tag){case 31:case 13:var _=f.stateNode,N=f.memoizedState;N!==null&&(y=N.retryLane);break;case 19:_=f.stateNode;break;case 22:_=f.stateNode._retryCache;break;default:throw Error(i(314))}_!==null&&_.delete(d),EI(f,y)}function YK(f,d){return nt(f,d)}var k2=null,sm=null,Dw=!1,F2=!1,Pw=!1,xh=0;function au(f){f!==sm&&f.next===null&&(sm===null?k2=sm=f:sm=sm.next=f),F2=!0,Dw||(Dw=!0,KK())}function _x(f,d){if(!Pw&&F2){Pw=!0;do for(var y=!1,_=k2;_!==null;){if(f!==0){var N=_.pendingLanes;if(N===0)var P=0;else{var X=_.suspendedLanes,oe=_.pingedLanes;P=(1<<31-pe(42|f)+1)-1,P&=N&~(X&~oe),P=P&201326741?P&201326741|1:P?P|2:0}P!==0&&(y=!0,NI(_,P))}else P=Yn,P=Ze(_,_===Mi?P:0,_.cancelPendingCommit!==null||_.timeoutHandle!==-1),(P&3)===0||Ct(_,P)||(y=!0,NI(_,P));_=_.next}while(y);Pw=!1}}function ZK(){CI()}function CI(){F2=Dw=!1;var f=0;xh!==0&&oQ()&&(f=xh);for(var d=Z(),y=null,_=k2;_!==null;){var N=_.next,P=RI(_,d);P===0?(_.next=null,y===null?k2=N:y.next=N,N===null&&(sm=y)):(y=_,(f!==0||(P&3)!==0)&&(F2=!0)),_=N}lr!==0&&lr!==5||_x(f),xh!==0&&(xh=0)}function RI(f,d){for(var y=f.suspendedLanes,_=f.pingedLanes,N=f.expirationTimes,P=f.pendingLanes&-62914561;0<P;){var X=31-pe(P),oe=1<<X,Me=N[X];Me===-1?((oe&y)===0||(oe&_)!==0)&&(N[X]=Ut(oe,d)):Me<=d&&(f.expiredLanes|=oe),P&=~oe}if(d=Mi,y=Yn,y=Ze(f,f===d?y:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),_=f.callbackNode,y===0||f===d&&(cn===2||cn===9)||f.cancelPendingCommit!==null)return _!==null&&_!==null&&Ae(_),f.callbackNode=null,f.callbackPriority=0;if((y&3)===0||Ct(f,y)){if(d=y&-y,d===f.callbackPriority)return d;switch(_!==null&&Ae(_),sr(y)){case 2:case 8:y=Be;break;case 32:y=Ne;break;case 268435456:y=vt;break;default:y=Ne}return _=jI.bind(null,f),y=nt(y,_),f.callbackPriority=d,f.callbackNode=y,d}return _!==null&&_!==null&&Ae(_),f.callbackPriority=2,f.callbackNode=null,2}function jI(f,d){if(lr!==0&&lr!==5)return f.callbackNode=null,f.callbackPriority=0,null;var y=f.callbackNode;if(am()&&f.callbackNode!==y)return null;var _=Yn;return _=Ze(f,f===Mi?_:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),_===0?null:(w(f,_,d),RI(f,Z()),f.callbackNode!=null&&f.callbackNode===y?jI.bind(null,f):null)}function NI(f,d){if(am())return null;w(f,d,!0)}function KK(){cQ(function(){(ti&6)!==0?nt(Xe,ZK):CI()})}function Iw(){if(xh===0){var f=Kl;f===0&&(f=Ee,Ee<<=1,(Ee&261888)===0&&(Ee=256)),xh=f}return xh}function OI(f){return f==null||typeof f=="symbol"||typeof f=="boolean"?null:typeof f=="function"?f:to(""+f)}function DI(f,d){var y=d.ownerDocument.createElement("input");return y.name=d.name,y.value=d.value,f.id&&y.setAttribute("form",f.id),d.parentNode.insertBefore(y,d),f=new FormData(f),y.parentNode.removeChild(y),f}function QK(f,d,y,_,N){if(d==="submit"&&y&&y.stateNode===N){var P=OI((N[Q]||null).action),X=_.submitter;X&&(d=(d=X[Q]||null)?OI(d.formAction):X.getAttribute("formAction"),d!==null&&(P=d,X=null));var oe=new Fl("action","action",null,_,N);f.push({event:oe,listeners:[{instance:null,listener:function(){if(_.defaultPrevented){if(xh!==0){var Me=X?DI(N,X):new FormData(N);px(y,{pending:!0,data:Me,method:N.method,action:P},null,Me)}}else typeof P=="function"&&(oe.preventDefault(),Me=X?DI(N,X):new FormData(N),px(y,{pending:!0,data:Me,method:N.method,action:P},P,Me))},currentTarget:N}]})}}for(var Uw=0;Uw<_p.length;Uw++){var Lw=_p[Uw],JK=Lw.toLowerCase(),eQ=Lw[0].toUpperCase()+Lw.slice(1);Ca(JK,"on"+eQ)}Ca(ls,"onAnimationEnd"),Ca(Rv,"onAnimationIteration"),Ca(al,"onAnimationStart"),Ca("dblclick","onDoubleClick"),Ca("focusin","onFocus"),Ca("focusout","onBlur"),Ca(Kf,"onTransitionRun"),Ca(Bc,"onTransitionStart"),Ca(jv,"onTransitionCancel"),Ca(Mp,"onTransitionEnd"),Mt("onMouseEnter",["mouseout","mouseover"]),Mt("onMouseLeave",["mouseout","mouseover"]),Mt("onPointerEnter",["pointerout","pointerover"]),Mt("onPointerLeave",["pointerout","pointerover"]),ht("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ht("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ht("onBeforeInput",["compositionend","keypress","textInput","paste"]),ht("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ht("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ht("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tx="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tQ=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tx));function PI(f,d){d=(d&4)!==0;for(var y=0;y<f.length;y++){var _=f[y],N=_.event;_=_.listeners;e:{var P=void 0;if(d)for(var X=_.length-1;0<=X;X--){var oe=_[X],Me=oe.instance,Ke=oe.currentTarget;if(oe=oe.listener,Me!==P&&N.isPropagationStopped())break e;P=oe,N.currentTarget=Ke;try{P(N)}catch(pt){zc(pt)}N.currentTarget=null,P=Me}else for(X=0;X<_.length;X++){if(oe=_[X],Me=oe.instance,Ke=oe.currentTarget,oe=oe.listener,Me!==P&&N.isPropagationStopped())break e;P=oe,N.currentTarget=Ke;try{P(N)}catch(pt){zc(pt)}N.currentTarget=null,P=Me}}}}function ei(f,d){var y=d[we];y===void 0&&(y=d[we]=new Set);var _=f+"__bubble";y.has(_)||(II(d,f,2,!1),y.add(_))}function Bw(f,d,y){var _=0;d&&(_|=4),II(y,f,_,d)}var G2="_reactListening"+Math.random().toString(36).slice(2);function zw(f){if(!f[G2]){f[G2]=!0,be.forEach(function(y){y!=="selectionchange"&&(tQ.has(y)||Bw(y,!1,f),Bw(y,!0,f))});var d=f.nodeType===9?f:f.ownerDocument;d===null||d[G2]||(d[G2]=!0,Bw("selectionchange",!1,d))}}function II(f,d,y,_){switch(uU(d)){case 2:var N=RQ;break;case 8:N=jQ;break;default:N=eA}y=N.bind(null,d,y,f),N=void 0,!Ea||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(N=!0),_?N!==void 0?f.addEventListener(d,y,{capture:!0,passive:N}):f.addEventListener(d,y,!0):N!==void 0?f.addEventListener(d,y,{passive:N}):f.addEventListener(d,y,!1)}function kw(f,d,y,_,N){var P=_;if((d&1)===0&&(d&2)===0&&_!==null)e:for(;;){if(_===null)return;var X=_.tag;if(X===3||X===4){var oe=_.stateNode.containerInfo;if(oe===N)break;if(X===4)for(X=_.return;X!==null;){var Me=X.tag;if((Me===3||Me===4)&&X.stateNode.containerInfo===N)return;X=X.return}for(;oe!==null;){if(X=_t(oe),X===null)return;if(Me=X.tag,Me===5||Me===6||Me===26||Me===27){_=P=X;continue e}oe=oe.parentNode}}_=_.return}Nc(function(){var Ke=P,pt=Ou(y),bt=[];e:{var tt=Hl.get(f);if(tt!==void 0){var ot=Fl,nn=f;switch(f){case"keypress":if(nl(y)===0)break e;case"keydown":case"keyup":ot=xv;break;case"focusin":nn="focus",ot=Ff;break;case"focusout":nn="blur",ot=Ff;break;case"beforeblur":case"afterblur":ot=Ff;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=dp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=Bu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=Gl;break;case ls:case Rv:case al:ot=os;break;case Mp:ot=Tw;break;case"scroll":case"scrollend":ot=il;break;case"wheel":ot=Oc;break;case"copy":case"cut":case"paste":ot=ro;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=pp;break;case"toggle":case"beforetoggle":ot=bv}var mn=(d&4)!==0,qi=!mn&&(f==="scroll"||f==="scrollend"),ke=mn?tt!==null?tt+"Capture":null:tt;mn=[];for(var je=Ke,$e;je!==null;){var xt=je;if($e=xt.stateNode,xt=xt.tag,xt!==5&&xt!==26&&xt!==27||$e===null||ke===null||(xt=To(je,ke),xt!=null&&mn.push(wx(je,xt,$e))),qi)break;je=je.return}0<mn.length&&(tt=new ot(tt,nn,null,y,pt),bt.push({event:tt,listeners:mn}))}}if((d&7)===0){e:{if(tt=f==="mouseover"||f==="pointerover",ot=f==="mouseout"||f==="pointerout",tt&&y!==_o&&(nn=y.relatedTarget||y.fromElement)&&(_t(nn)||nn[ce]))break e;if((ot||tt)&&(tt=pt.window===pt?pt:(tt=pt.ownerDocument)?tt.defaultView||tt.parentWindow:window,ot?(nn=y.relatedTarget||y.toElement,ot=Ke,nn=nn?_t(nn):null,nn!==null&&(qi=a(nn),mn=nn.tag,nn!==qi||mn!==5&&mn!==27&&mn!==6)&&(nn=null)):(ot=null,nn=Ke),ot!==nn)){if(mn=dp,xt="onMouseLeave",ke="onMouseEnter",je="mouse",(f==="pointerout"||f==="pointerover")&&(mn=pp,xt="onPointerLeave",ke="onPointerEnter",je="pointer"),qi=ot==null?tt:ve(ot),$e=nn==null?tt:ve(nn),tt=new mn(xt,je+"leave",ot,y,pt),tt.target=qi,tt.relatedTarget=$e,xt=null,_t(pt)===Ke&&(mn=new mn(ke,je+"enter",nn,y,pt),mn.target=$e,mn.relatedTarget=qi,xt=mn),qi=xt,ot&&nn)t:{for(mn=nQ,ke=ot,je=nn,$e=0,xt=ke;xt;xt=mn(xt))$e++;xt=0;for(var fn=je;fn;fn=mn(fn))xt++;for(;0<$e-xt;)ke=mn(ke),$e--;for(;0<xt-$e;)je=mn(je),xt--;for(;$e--;){if(ke===je||je!==null&&ke===je.alternate){mn=ke;break t}ke=mn(ke),je=mn(je)}mn=null}else mn=null;ot!==null&&UI(bt,tt,ot,mn,!1),nn!==null&&qi!==null&&UI(bt,qi,nn,mn,!0)}}e:{if(tt=Ke?ve(Ke):window,ot=tt.nodeName&&tt.nodeName.toLowerCase(),ot==="select"||ot==="input"&&tt.type==="file")var Ti=wv;else if(_v(tt))if(md)Ti=n2;else{Ti=Ic;var an=gd}else ot=tt.nodeName,!ot||ot.toLowerCase()!=="input"||tt.type!=="checkbox"&&tt.type!=="radio"?Ke&&Mo(Ke.elementType)&&(Ti=wv):Ti=t2;if(Ti&&(Ti=Ti(f,Ke))){vp(bt,Ti,y,pt);break e}an&&an(f,tt,Ke),f==="focusout"&&Ke&&tt.type==="number"&&Ke.memoizedProps.value!=null&&kn(tt,"number",tt.value)}switch(an=Ke?ve(Ke):window,f){case"focusin":(_v(an)||an.contentEditable==="true")&&($f=an,bp=Ke,Yf=null);break;case"focusout":Yf=bp=$f=null;break;case"mousedown":Ns=!0;break;case"contextmenu":case"mouseup":case"dragend":Ns=!1,Sp(bt,y,pt);break;case"selectionchange":if(i2)break;case"keydown":case"keyup":Sp(bt,y,pt)}var Gn;if(zu)e:{switch(f){case"compositionstart":var ii="onCompositionStart";break e;case"compositionend":ii="onCompositionEnd";break e;case"compositionupdate":ii="onCompositionUpdate";break e}ii=void 0}else Pc?mp(f,y)&&(ii="onCompositionEnd"):f==="keydown"&&y.keyCode===229&&(ii="onCompositionStart");ii&&(ha&&y.locale!=="ko"&&(Pc||ii!=="onCompositionStart"?ii==="onCompositionEnd"&&Pc&&(Gn=Uu()):(wo=pt,Iu="value"in wo?wo.value:wo.textContent,Pc=!0)),an=V2(Ke,ii),0<an.length&&(ii=new pv(ii,f,null,y,pt),bt.push({event:ii,listeners:an}),Gn?ii.data=Gn:(Gn=Gf(y),Gn!==null&&(ii.data=Gn)))),(Gn=ku?gp(f,y):Qb(f,y))&&(ii=V2(Ke,"onBeforeInput"),0<ii.length&&(an=new pv("onBeforeInput","beforeinput",null,y,pt),bt.push({event:an,listeners:ii}),an.data=Gn)),QK(bt,f,Ke,y,pt)}PI(bt,d)})}function wx(f,d,y){return{instance:f,listener:d,currentTarget:y}}function V2(f,d){for(var y=d+"Capture",_=[];f!==null;){var N=f,P=N.stateNode;if(N=N.tag,N!==5&&N!==26&&N!==27||P===null||(N=To(f,y),N!=null&&_.unshift(wx(f,N,P)),N=To(f,d),N!=null&&_.push(wx(f,N,P))),f.tag===3)return _;f=f.return}return[]}function nQ(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5&&f.tag!==27);return f||null}function UI(f,d,y,_,N){for(var P=d._reactName,X=[];y!==null&&y!==_;){var oe=y,Me=oe.alternate,Ke=oe.stateNode;if(oe=oe.tag,Me!==null&&Me===_)break;oe!==5&&oe!==26&&oe!==27||Ke===null||(Me=Ke,N?(Ke=To(y,P),Ke!=null&&X.unshift(wx(y,Ke,Me))):N||(Ke=To(y,P),Ke!=null&&X.push(wx(y,Ke,Me)))),y=y.return}X.length!==0&&f.push({event:d,listeners:X})}var iQ=/\r\n?/g,rQ=/\u0000|\uFFFD/g;function LI(f){return(typeof f=="string"?f:""+f).replace(iQ,`
`).replace(rQ,"")}function BI(f,d){return d=LI(d),LI(f)===d}function Hi(f,d,y,_,N,P){switch(y){case"children":typeof _=="string"?d==="body"||d==="textarea"&&_===""||Fa(f,_):(typeof _=="number"||typeof _=="bigint")&&d!=="body"&&Fa(f,""+_);break;case"className":gn(f,"class",_);break;case"tabIndex":gn(f,"tabindex",_);break;case"dir":case"role":case"viewBox":case"width":case"height":gn(f,y,_);break;case"style":ju(f,_,P);break;case"data":if(d!=="object"){gn(f,"data",_);break}case"src":case"href":if(_===""&&(d!=="a"||y!=="href")){f.removeAttribute(y);break}if(_==null||typeof _=="function"||typeof _=="symbol"||typeof _=="boolean"){f.removeAttribute(y);break}_=to(""+_),f.setAttribute(y,_);break;case"action":case"formAction":if(typeof _=="function"){f.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof P=="function"&&(y==="formAction"?(d!=="input"&&Hi(f,d,"name",N.name,N,null),Hi(f,d,"formEncType",N.formEncType,N,null),Hi(f,d,"formMethod",N.formMethod,N,null),Hi(f,d,"formTarget",N.formTarget,N,null)):(Hi(f,d,"encType",N.encType,N,null),Hi(f,d,"method",N.method,N,null),Hi(f,d,"target",N.target,N,null)));if(_==null||typeof _=="symbol"||typeof _=="boolean"){f.removeAttribute(y);break}_=to(""+_),f.setAttribute(y,_);break;case"onClick":_!=null&&(f.onclick=ua);break;case"onScroll":_!=null&&ei("scroll",f);break;case"onScrollEnd":_!=null&&ei("scrollend",f);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(i(61));if(y=_.__html,y!=null){if(N.children!=null)throw Error(i(60));f.innerHTML=y}}break;case"multiple":f.multiple=_&&typeof _!="function"&&typeof _!="symbol";break;case"muted":f.muted=_&&typeof _!="function"&&typeof _!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(_==null||typeof _=="function"||typeof _=="boolean"||typeof _=="symbol"){f.removeAttribute("xlink:href");break}y=to(""+_),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":_!=null&&typeof _!="function"&&typeof _!="symbol"?f.setAttribute(y,""+_):f.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":_&&typeof _!="function"&&typeof _!="symbol"?f.setAttribute(y,""):f.removeAttribute(y);break;case"capture":case"download":_===!0?f.setAttribute(y,""):_!==!1&&_!=null&&typeof _!="function"&&typeof _!="symbol"?f.setAttribute(y,_):f.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":_!=null&&typeof _!="function"&&typeof _!="symbol"&&!isNaN(_)&&1<=_?f.setAttribute(y,_):f.removeAttribute(y);break;case"rowSpan":case"start":_==null||typeof _=="function"||typeof _=="symbol"||isNaN(_)?f.removeAttribute(y):f.setAttribute(y,_);break;case"popover":ei("beforetoggle",f),ei("toggle",f),Ht(f,"popover",_);break;case"xlinkActuate":Jt(f,"http://www.w3.org/1999/xlink","xlink:actuate",_);break;case"xlinkArcrole":Jt(f,"http://www.w3.org/1999/xlink","xlink:arcrole",_);break;case"xlinkRole":Jt(f,"http://www.w3.org/1999/xlink","xlink:role",_);break;case"xlinkShow":Jt(f,"http://www.w3.org/1999/xlink","xlink:show",_);break;case"xlinkTitle":Jt(f,"http://www.w3.org/1999/xlink","xlink:title",_);break;case"xlinkType":Jt(f,"http://www.w3.org/1999/xlink","xlink:type",_);break;case"xmlBase":Jt(f,"http://www.w3.org/XML/1998/namespace","xml:base",_);break;case"xmlLang":Jt(f,"http://www.w3.org/XML/1998/namespace","xml:lang",_);break;case"xmlSpace":Jt(f,"http://www.w3.org/XML/1998/namespace","xml:space",_);break;case"is":Ht(f,"is",_);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=ud.get(y)||y,Ht(f,y,_))}}function Fw(f,d,y,_,N,P){switch(y){case"style":ju(f,_,P);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(i(61));if(y=_.__html,y!=null){if(N.children!=null)throw Error(i(60));f.innerHTML=y}}break;case"children":typeof _=="string"?Fa(f,_):(typeof _=="number"||typeof _=="bigint")&&Fa(f,""+_);break;case"onScroll":_!=null&&ei("scroll",f);break;case"onScrollEnd":_!=null&&ei("scrollend",f);break;case"onClick":_!=null&&(f.onclick=ua);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!et.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(N=y.endsWith("Capture"),d=y.slice(2,N?y.length-7:void 0),P=f[Q]||null,P=P!=null?P[y]:null,typeof P=="function"&&f.removeEventListener(d,P,N),typeof _=="function")){typeof P!="function"&&P!==null&&(y in f?f[y]=null:f.hasAttribute(y)&&f.removeAttribute(y)),f.addEventListener(d,_,N);break e}y in f?f[y]=_:_===!0?f.setAttribute(y,""):Ht(f,y,_)}}}function Ka(f,d,y){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ei("error",f),ei("load",f);var _=!1,N=!1,P;for(P in y)if(y.hasOwnProperty(P)){var X=y[P];if(X!=null)switch(P){case"src":_=!0;break;case"srcSet":N=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,d));default:Hi(f,d,P,X,y,null)}}N&&Hi(f,d,"srcSet",y.srcSet,y,null),_&&Hi(f,d,"src",y.src,y,null);return;case"input":ei("invalid",f);var oe=P=X=N=null,Me=null,Ke=null;for(_ in y)if(y.hasOwnProperty(_)){var pt=y[_];if(pt!=null)switch(_){case"name":N=pt;break;case"type":X=pt;break;case"checked":Me=pt;break;case"defaultChecked":Ke=pt;break;case"value":P=pt;break;case"defaultValue":oe=pt;break;case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(i(137,d));break;default:Hi(f,d,_,pt,y,null)}}Un(f,P,oe,Me,Ke,X,N,!1);return;case"select":ei("invalid",f),_=X=P=null;for(N in y)if(y.hasOwnProperty(N)&&(oe=y[N],oe!=null))switch(N){case"value":P=oe;break;case"defaultValue":X=oe;break;case"multiple":_=oe;default:Hi(f,d,N,oe,y,null)}d=P,y=X,f.multiple=!!_,d!=null?pi(f,!!_,d,!1):y!=null&&pi(f,!!_,y,!0);return;case"textarea":ei("invalid",f),P=N=_=null;for(X in y)if(y.hasOwnProperty(X)&&(oe=y[X],oe!=null))switch(X){case"value":_=oe;break;case"defaultValue":N=oe;break;case"children":P=oe;break;case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(91));break;default:Hi(f,d,X,oe,y,null)}Ui(f,_,N,P);return;case"option":for(Me in y)if(y.hasOwnProperty(Me)&&(_=y[Me],_!=null))switch(Me){case"selected":f.selected=_&&typeof _!="function"&&typeof _!="symbol";break;default:Hi(f,d,Me,_,y,null)}return;case"dialog":ei("beforetoggle",f),ei("toggle",f),ei("cancel",f),ei("close",f);break;case"iframe":case"object":ei("load",f);break;case"video":case"audio":for(_=0;_<Tx.length;_++)ei(Tx[_],f);break;case"image":ei("error",f),ei("load",f);break;case"details":ei("toggle",f);break;case"embed":case"source":case"link":ei("error",f),ei("load",f);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ke in y)if(y.hasOwnProperty(Ke)&&(_=y[Ke],_!=null))switch(Ke){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,d));default:Hi(f,d,Ke,_,y,null)}return;default:if(Mo(d)){for(pt in y)y.hasOwnProperty(pt)&&(_=y[pt],_!==void 0&&Fw(f,d,pt,_,y,void 0));return}}for(oe in y)y.hasOwnProperty(oe)&&(_=y[oe],_!=null&&Hi(f,d,oe,_,y,null))}function aQ(f,d,y,_){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var N=null,P=null,X=null,oe=null,Me=null,Ke=null,pt=null;for(ot in y){var bt=y[ot];if(y.hasOwnProperty(ot)&&bt!=null)switch(ot){case"checked":break;case"value":break;case"defaultValue":Me=bt;default:_.hasOwnProperty(ot)||Hi(f,d,ot,null,_,bt)}}for(var tt in _){var ot=_[tt];if(bt=y[tt],_.hasOwnProperty(tt)&&(ot!=null||bt!=null))switch(tt){case"type":P=ot;break;case"name":N=ot;break;case"checked":Ke=ot;break;case"defaultChecked":pt=ot;break;case"value":X=ot;break;case"defaultValue":oe=ot;break;case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(i(137,d));break;default:ot!==bt&&Hi(f,d,tt,ot,_,bt)}}Xi(f,X,oe,Me,Ke,pt,P,N);return;case"select":ot=X=oe=tt=null;for(P in y)if(Me=y[P],y.hasOwnProperty(P)&&Me!=null)switch(P){case"value":break;case"multiple":ot=Me;default:_.hasOwnProperty(P)||Hi(f,d,P,null,_,Me)}for(N in _)if(P=_[N],Me=y[N],_.hasOwnProperty(N)&&(P!=null||Me!=null))switch(N){case"value":tt=P;break;case"defaultValue":oe=P;break;case"multiple":X=P;default:P!==Me&&Hi(f,d,N,P,_,Me)}d=oe,y=X,_=ot,tt!=null?pi(f,!!y,tt,!1):!!_!=!!y&&(d!=null?pi(f,!!y,d,!0):pi(f,!!y,y?[]:"",!1));return;case"textarea":ot=tt=null;for(oe in y)if(N=y[oe],y.hasOwnProperty(oe)&&N!=null&&!_.hasOwnProperty(oe))switch(oe){case"value":break;case"children":break;default:Hi(f,d,oe,null,_,N)}for(X in _)if(N=_[X],P=y[X],_.hasOwnProperty(X)&&(N!=null||P!=null))switch(X){case"value":tt=N;break;case"defaultValue":ot=N;break;case"children":break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(i(91));break;default:N!==P&&Hi(f,d,X,N,_,P)}ir(f,tt,ot);return;case"option":for(var nn in y)if(tt=y[nn],y.hasOwnProperty(nn)&&tt!=null&&!_.hasOwnProperty(nn))switch(nn){case"selected":f.selected=!1;break;default:Hi(f,d,nn,null,_,tt)}for(Me in _)if(tt=_[Me],ot=y[Me],_.hasOwnProperty(Me)&&tt!==ot&&(tt!=null||ot!=null))switch(Me){case"selected":f.selected=tt&&typeof tt!="function"&&typeof tt!="symbol";break;default:Hi(f,d,Me,tt,_,ot)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var mn in y)tt=y[mn],y.hasOwnProperty(mn)&&tt!=null&&!_.hasOwnProperty(mn)&&Hi(f,d,mn,null,_,tt);for(Ke in _)if(tt=_[Ke],ot=y[Ke],_.hasOwnProperty(Ke)&&tt!==ot&&(tt!=null||ot!=null))switch(Ke){case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(i(137,d));break;default:Hi(f,d,Ke,tt,_,ot)}return;default:if(Mo(d)){for(var qi in y)tt=y[qi],y.hasOwnProperty(qi)&&tt!==void 0&&!_.hasOwnProperty(qi)&&Fw(f,d,qi,void 0,_,tt);for(pt in _)tt=_[pt],ot=y[pt],!_.hasOwnProperty(pt)||tt===ot||tt===void 0&&ot===void 0||Fw(f,d,pt,tt,_,ot);return}}for(var ke in y)tt=y[ke],y.hasOwnProperty(ke)&&tt!=null&&!_.hasOwnProperty(ke)&&Hi(f,d,ke,null,_,tt);for(bt in _)tt=_[bt],ot=y[bt],!_.hasOwnProperty(bt)||tt===ot||tt==null&&ot==null||Hi(f,d,bt,tt,_,ot)}function zI(f){switch(f){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function sQ(){if(typeof performance.getEntriesByType=="function"){for(var f=0,d=0,y=performance.getEntriesByType("resource"),_=0;_<y.length;_++){var N=y[_],P=N.transferSize,X=N.initiatorType,oe=N.duration;if(P&&oe&&zI(X)){for(X=0,oe=N.responseEnd,_+=1;_<y.length;_++){var Me=y[_],Ke=Me.startTime;if(Ke>oe)break;var pt=Me.transferSize,bt=Me.initiatorType;pt&&zI(bt)&&(Me=Me.responseEnd,X+=pt*(Me<oe?1:(oe-Ke)/(Me-Ke)))}if(--_,d+=8*(P+X)/(N.duration/1e3),f++,10<f)break}}if(0<f)return d/f/1e6}return navigator.connection&&(f=navigator.connection.downlink,typeof f=="number")?f:5}var Gw=null,Vw=null;function H2(f){return f.nodeType===9?f:f.ownerDocument}function kI(f){switch(f){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function FI(f,d){if(f===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return f===1&&d==="foreignObject"?0:f}function Hw(f,d){return f==="textarea"||f==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var qw=null;function oQ(){var f=window.event;return f&&f.type==="popstate"?f===qw?!1:(qw=f,!0):(qw=null,!1)}var GI=typeof setTimeout=="function"?setTimeout:void 0,lQ=typeof clearTimeout=="function"?clearTimeout:void 0,VI=typeof Promise=="function"?Promise:void 0,cQ=typeof queueMicrotask=="function"?queueMicrotask:typeof VI<"u"?function(f){return VI.resolve(null).then(f).catch(uQ)}:GI;function uQ(f){setTimeout(function(){throw f})}function yh(f){return f==="head"}function HI(f,d){var y=d,_=0;do{var N=y.nextSibling;if(f.removeChild(y),N&&N.nodeType===8)if(y=N.data,y==="/$"||y==="/&"){if(_===0){f.removeChild(N),um(d);return}_--}else if(y==="$"||y==="$?"||y==="$~"||y==="$!"||y==="&")_++;else if(y==="html")Ax(f.ownerDocument.documentElement);else if(y==="head"){y=f.ownerDocument.head,Ax(y);for(var P=y.firstChild;P;){var X=P.nextSibling,oe=P.nodeName;P[jt]||oe==="SCRIPT"||oe==="STYLE"||oe==="LINK"&&P.rel.toLowerCase()==="stylesheet"||y.removeChild(P),P=X}}else y==="body"&&Ax(f.ownerDocument.body);y=N}while(y);um(d)}function qI(f,d){var y=f;f=0;do{var _=y.nextSibling;if(y.nodeType===1?d?(y._stashedDisplay=y.style.display,y.style.display="none"):(y.style.display=y._stashedDisplay||"",y.getAttribute("style")===""&&y.removeAttribute("style")):y.nodeType===3&&(d?(y._stashedText=y.nodeValue,y.nodeValue=""):y.nodeValue=y._stashedText||""),_&&_.nodeType===8)if(y=_.data,y==="/$"){if(f===0)break;f--}else y!=="$"&&y!=="$?"&&y!=="$~"&&y!=="$!"||f++;y=_}while(y)}function Ww(f){var d=f.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var y=d;switch(d=d.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":Ww(y),Tt(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}f.removeChild(y)}}function fQ(f,d,y,_){for(;f.nodeType===1;){var N=y;if(f.nodeName.toLowerCase()!==d.toLowerCase()){if(!_&&(f.nodeName!=="INPUT"||f.type!=="hidden"))break}else if(_){if(!f[jt])switch(d){case"meta":if(!f.hasAttribute("itemprop"))break;return f;case"link":if(P=f.getAttribute("rel"),P==="stylesheet"&&f.hasAttribute("data-precedence"))break;if(P!==N.rel||f.getAttribute("href")!==(N.href==null||N.href===""?null:N.href)||f.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin)||f.getAttribute("title")!==(N.title==null?null:N.title))break;return f;case"style":if(f.hasAttribute("data-precedence"))break;return f;case"script":if(P=f.getAttribute("src"),(P!==(N.src==null?null:N.src)||f.getAttribute("type")!==(N.type==null?null:N.type)||f.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin))&&P&&f.hasAttribute("async")&&!f.hasAttribute("itemprop"))break;return f;default:return f}}else if(d==="input"&&f.type==="hidden"){var P=N.name==null?null:""+N.name;if(N.type==="hidden"&&f.getAttribute("name")===P)return f}else return f;if(f=bl(f.nextSibling),f===null)break}return null}function hQ(f,d,y){if(d==="")return null;for(;f.nodeType!==3;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!y||(f=bl(f.nextSibling),f===null))return null;return f}function WI(f,d){for(;f.nodeType!==8;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!d||(f=bl(f.nextSibling),f===null))return null;return f}function Xw(f){return f.data==="$?"||f.data==="$~"}function $w(f){return f.data==="$!"||f.data==="$?"&&f.ownerDocument.readyState!=="loading"}function dQ(f,d){var y=f.ownerDocument;if(f.data==="$~")f._reactRetry=d;else if(f.data!=="$?"||y.readyState!=="loading")d();else{var _=function(){d(),y.removeEventListener("DOMContentLoaded",_)};y.addEventListener("DOMContentLoaded",_),f._reactRetry=_}}function bl(f){for(;f!=null;f=f.nextSibling){var d=f.nodeType;if(d===1||d===3)break;if(d===8){if(d=f.data,d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"||d==="F!"||d==="F")break;if(d==="/$"||d==="/&")return null}}return f}var Yw=null;function XI(f){f=f.nextSibling;for(var d=0;f;){if(f.nodeType===8){var y=f.data;if(y==="/$"||y==="/&"){if(d===0)return bl(f.nextSibling);d--}else y!=="$"&&y!=="$!"&&y!=="$?"&&y!=="$~"&&y!=="&"||d++}f=f.nextSibling}return null}function $I(f){f=f.previousSibling;for(var d=0;f;){if(f.nodeType===8){var y=f.data;if(y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"){if(d===0)return f;d--}else y!=="/$"&&y!=="/&"||d++}f=f.previousSibling}return null}function YI(f,d,y){switch(d=H2(y),f){case"html":if(f=d.documentElement,!f)throw Error(i(452));return f;case"head":if(f=d.head,!f)throw Error(i(453));return f;case"body":if(f=d.body,!f)throw Error(i(454));return f;default:throw Error(i(451))}}function Ax(f){for(var d=f.attributes;d.length;)f.removeAttributeNode(d[0]);Tt(f)}var Sl=new Map,ZI=new Set;function q2(f){return typeof f.getRootNode=="function"?f.getRootNode():f.nodeType===9?f:f.ownerDocument}var uf=$.d;$.d={f:pQ,r:mQ,D:gQ,C:vQ,L:xQ,m:yQ,X:SQ,S:bQ,M:MQ};function pQ(){var f=uf.f(),d=le();return f||d}function mQ(f){var d=J(f);d!==null&&d.tag===5&&d.type==="form"?mx(d):uf.r(f)}var om=typeof document>"u"?null:document;function KI(f,d,y){var _=om;if(_&&typeof d=="string"&&d){var N=Kt(d);N='link[rel="'+f+'"][href="'+N+'"]',typeof y=="string"&&(N+='[crossorigin="'+y+'"]'),ZI.has(N)||(ZI.add(N),f={rel:f,crossOrigin:y,href:d},_.querySelector(N)===null&&(d=_.createElement("link"),Ka(d,"link",f),Pe(d),_.head.appendChild(d)))}}function gQ(f){uf.D(f),KI("dns-prefetch",f,null)}function vQ(f,d){uf.C(f,d),KI("preconnect",f,d)}function xQ(f,d,y){uf.L(f,d,y);var _=om;if(_&&f&&d){var N='link[rel="preload"][as="'+Kt(d)+'"]';d==="image"&&y&&y.imageSrcSet?(N+='[imagesrcset="'+Kt(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(N+='[imagesizes="'+Kt(y.imageSizes)+'"]')):N+='[href="'+Kt(f)+'"]';var P=N;switch(d){case"style":P=lm(f);break;case"script":P=cm(f)}Sl.has(P)||(f=p({rel:"preload",href:d==="image"&&y&&y.imageSrcSet?void 0:f,as:d},y),Sl.set(P,f),_.querySelector(N)!==null||d==="style"&&_.querySelector(Ex(P))||d==="script"&&_.querySelector(Cx(P))||(d=_.createElement("link"),Ka(d,"link",f),Pe(d),_.head.appendChild(d)))}}function yQ(f,d){uf.m(f,d);var y=om;if(y&&f){var _=d&&typeof d.as=="string"?d.as:"script",N='link[rel="modulepreload"][as="'+Kt(_)+'"][href="'+Kt(f)+'"]',P=N;switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":P=cm(f)}if(!Sl.has(P)&&(f=p({rel:"modulepreload",href:f},d),Sl.set(P,f),y.querySelector(N)===null)){switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(Cx(P)))return}_=y.createElement("link"),Ka(_,"link",f),Pe(_),y.head.appendChild(_)}}}function bQ(f,d,y){uf.S(f,d,y);var _=om;if(_&&f){var N=he(_).hoistableStyles,P=lm(f);d=d||"default";var X=N.get(P);if(!X){var oe={loading:0,preload:null};if(X=_.querySelector(Ex(P)))oe.loading=5;else{f=p({rel:"stylesheet",href:f,"data-precedence":d},y),(y=Sl.get(P))&&Zw(f,y);var Me=X=_.createElement("link");Pe(Me),Ka(Me,"link",f),Me._p=new Promise(function(Ke,pt){Me.onload=Ke,Me.onerror=pt}),Me.addEventListener("load",function(){oe.loading|=1}),Me.addEventListener("error",function(){oe.loading|=2}),oe.loading|=4,W2(X,d,_)}X={type:"stylesheet",instance:X,count:1,state:oe},N.set(P,X)}}}function SQ(f,d){uf.X(f,d);var y=om;if(y&&f){var _=he(y).hoistableScripts,N=cm(f),P=_.get(N);P||(P=y.querySelector(Cx(N)),P||(f=p({src:f,async:!0},d),(d=Sl.get(N))&&Kw(f,d),P=y.createElement("script"),Pe(P),Ka(P,"link",f),y.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},_.set(N,P))}}function MQ(f,d){uf.M(f,d);var y=om;if(y&&f){var _=he(y).hoistableScripts,N=cm(f),P=_.get(N);P||(P=y.querySelector(Cx(N)),P||(f=p({src:f,async:!0,type:"module"},d),(d=Sl.get(N))&&Kw(f,d),P=y.createElement("script"),Pe(P),Ka(P,"link",f),y.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},_.set(N,P))}}function QI(f,d,y,_){var N=(N=fe.current)?q2(N):null;if(!N)throw Error(i(446));switch(f){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(d=lm(y.href),y=he(N).hoistableStyles,_=y.get(d),_||(_={type:"style",instance:null,count:0,state:null},y.set(d,_)),_):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){f=lm(y.href);var P=he(N).hoistableStyles,X=P.get(f);if(X||(N=N.ownerDocument||N,X={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},P.set(f,X),(P=N.querySelector(Ex(f)))&&!P._p&&(X.instance=P,X.state.loading=5),Sl.has(f)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},Sl.set(f,y),P||_Q(N,f,y,X.state))),d&&_===null)throw Error(i(528,""));return X}if(d&&_!==null)throw Error(i(529,""));return null;case"script":return d=y.async,y=y.src,typeof y=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=cm(y),y=he(N).hoistableScripts,_=y.get(d),_||(_={type:"script",instance:null,count:0,state:null},y.set(d,_)),_):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,f))}}function lm(f){return'href="'+Kt(f)+'"'}function Ex(f){return'link[rel="stylesheet"]['+f+"]"}function JI(f){return p({},f,{"data-precedence":f.precedence,precedence:null})}function _Q(f,d,y,_){f.querySelector('link[rel="preload"][as="style"]['+d+"]")?_.loading=1:(d=f.createElement("link"),_.preload=d,d.addEventListener("load",function(){return _.loading|=1}),d.addEventListener("error",function(){return _.loading|=2}),Ka(d,"link",y),Pe(d),f.head.appendChild(d))}function cm(f){return'[src="'+Kt(f)+'"]'}function Cx(f){return"script[async]"+f}function eU(f,d,y){if(d.count++,d.instance===null)switch(d.type){case"style":var _=f.querySelector('style[data-href~="'+Kt(y.href)+'"]');if(_)return d.instance=_,Pe(_),_;var N=p({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return _=(f.ownerDocument||f).createElement("style"),Pe(_),Ka(_,"style",N),W2(_,y.precedence,f),d.instance=_;case"stylesheet":N=lm(y.href);var P=f.querySelector(Ex(N));if(P)return d.state.loading|=4,d.instance=P,Pe(P),P;_=JI(y),(N=Sl.get(N))&&Zw(_,N),P=(f.ownerDocument||f).createElement("link"),Pe(P);var X=P;return X._p=new Promise(function(oe,Me){X.onload=oe,X.onerror=Me}),Ka(P,"link",_),d.state.loading|=4,W2(P,y.precedence,f),d.instance=P;case"script":return P=cm(y.src),(N=f.querySelector(Cx(P)))?(d.instance=N,Pe(N),N):(_=y,(N=Sl.get(P))&&(_=p({},y),Kw(_,N)),f=f.ownerDocument||f,N=f.createElement("script"),Pe(N),Ka(N,"link",_),f.head.appendChild(N),d.instance=N);case"void":return null;default:throw Error(i(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(_=d.instance,d.state.loading|=4,W2(_,y.precedence,f));return d.instance}function W2(f,d,y){for(var _=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),N=_.length?_[_.length-1]:null,P=N,X=0;X<_.length;X++){var oe=_[X];if(oe.dataset.precedence===d)P=oe;else if(P!==N)break}P?P.parentNode.insertBefore(f,P.nextSibling):(d=y.nodeType===9?y.head:y,d.insertBefore(f,d.firstChild))}function Zw(f,d){f.crossOrigin==null&&(f.crossOrigin=d.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=d.referrerPolicy),f.title==null&&(f.title=d.title)}function Kw(f,d){f.crossOrigin==null&&(f.crossOrigin=d.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=d.referrerPolicy),f.integrity==null&&(f.integrity=d.integrity)}var X2=null;function tU(f,d,y){if(X2===null){var _=new Map,N=X2=new Map;N.set(y,_)}else N=X2,_=N.get(y),_||(_=new Map,N.set(y,_));if(_.has(f))return _;for(_.set(f,null),y=y.getElementsByTagName(f),N=0;N<y.length;N++){var P=y[N];if(!(P[jt]||P[dn]||f==="link"&&P.getAttribute("rel")==="stylesheet")&&P.namespaceURI!=="http://www.w3.org/2000/svg"){var X=P.getAttribute(d)||"";X=f+X;var oe=_.get(X);oe?oe.push(P):_.set(X,[P])}}return _}function nU(f,d,y){f=f.ownerDocument||f,f.head.insertBefore(y,d==="title"?f.querySelector("head > title"):null)}function TQ(f,d,y){if(y===1||d.itemProp!=null)return!1;switch(f){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return f=d.disabled,typeof d.precedence=="string"&&f==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function iU(f){return!(f.type==="stylesheet"&&(f.state.loading&3)===0)}function wQ(f,d,y,_){if(y.type==="stylesheet"&&(typeof _.media!="string"||matchMedia(_.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var N=lm(_.href),P=d.querySelector(Ex(N));if(P){d=P._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(f.count++,f=$2.bind(f),d.then(f,f)),y.state.loading|=4,y.instance=P,Pe(P);return}P=d.ownerDocument||d,_=JI(_),(N=Sl.get(N))&&Zw(_,N),P=P.createElement("link"),Pe(P);var X=P;X._p=new Promise(function(oe,Me){X.onload=oe,X.onerror=Me}),Ka(P,"link",_),y.instance=P}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(y,d),(d=y.state.preload)&&(y.state.loading&3)===0&&(f.count++,y=$2.bind(f),d.addEventListener("load",y),d.addEventListener("error",y))}}var Qw=0;function AQ(f,d){return f.stylesheets&&f.count===0&&Z2(f,f.stylesheets),0<f.count||0<f.imgCount?function(y){var _=setTimeout(function(){if(f.stylesheets&&Z2(f,f.stylesheets),f.unsuspend){var P=f.unsuspend;f.unsuspend=null,P()}},6e4+d);0<f.imgBytes&&Qw===0&&(Qw=62500*sQ());var N=setTimeout(function(){if(f.waitingForImages=!1,f.count===0&&(f.stylesheets&&Z2(f,f.stylesheets),f.unsuspend)){var P=f.unsuspend;f.unsuspend=null,P()}},(f.imgBytes>Qw?50:800)+d);return f.unsuspend=y,function(){f.unsuspend=null,clearTimeout(_),clearTimeout(N)}}:null}function $2(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Z2(this,this.stylesheets);else if(this.unsuspend){var f=this.unsuspend;this.unsuspend=null,f()}}}var Y2=null;function Z2(f,d){f.stylesheets=null,f.unsuspend!==null&&(f.count++,Y2=new Map,d.forEach(EQ,f),Y2=null,$2.call(f))}function EQ(f,d){if(!(d.state.loading&4)){var y=Y2.get(f);if(y)var _=y.get(null);else{y=new Map,Y2.set(f,y);for(var N=f.querySelectorAll("link[data-precedence],style[data-precedence]"),P=0;P<N.length;P++){var X=N[P];(X.nodeName==="LINK"||X.getAttribute("media")!=="not all")&&(y.set(X.dataset.precedence,X),_=X)}_&&y.set(null,_)}N=d.instance,X=N.getAttribute("data-precedence"),P=y.get(X)||_,P===_&&y.set(null,N),y.set(X,N),this.count++,_=$2.bind(this),N.addEventListener("load",_),N.addEventListener("error",_),P?P.parentNode.insertBefore(N,P.nextSibling):(f=f.nodeType===9?f.head:f,f.insertBefore(N,f.firstChild)),d.state.loading|=4}}var Rx={$$typeof:E,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function CQ(f,d,y,_,N,P,X,oe,Me){this.tag=1,this.containerInfo=f,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yt(0),this.hiddenUpdates=Yt(null),this.identifierPrefix=_,this.onUncaughtError=N,this.onCaughtError=P,this.onRecoverableError=X,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Me,this.incompleteTransitions=new Map}function rU(f,d,y,_,N,P,X,oe,Me,Ke,pt,bt){return f=new CQ(f,d,y,X,Me,Ke,pt,bt,oe),d=1,P===!0&&(d|=24),P=qa(3,null,null,d),f.current=P,P.stateNode=f,d=Lv(),d.refCount++,f.pooledCache=d,d.refCount++,P.memoizedState={element:_,isDehydrated:y,cache:d},Vv(P),f}function aU(f){return f?(f=Gc,f):Gc}function sU(f,d,y,_,N,P){N=aU(N),_.context===null?_.context=N:_.pendingContext=N,_=fl(d),_.payload={element:y},P=P===void 0?null:P,P!==null&&(_.callback=P),y=Ql(f,_,d),y!==null&&(v(y,f,d),Zc(y,f,d))}function oU(f,d){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var y=f.retryLane;f.retryLane=y!==0&&y<d?y:d}}function Jw(f,d){oU(f,d),(f=f.alternate)&&oU(f,d)}function lU(f){if(f.tag===13||f.tag===31){var d=Fc(f,67108864);d!==null&&v(d,f,67108864),Jw(f,67108864)}}function cU(f){if(f.tag===13||f.tag===31){var d=Za();d=bi(d);var y=Fc(f,d);y!==null&&v(y,f,d),Jw(f,d)}}var K2=!0;function RQ(f,d,y,_){var N=k.T;k.T=null;var P=$.p;try{$.p=2,eA(f,d,y,_)}finally{$.p=P,k.T=N}}function jQ(f,d,y,_){var N=k.T;k.T=null;var P=$.p;try{$.p=8,eA(f,d,y,_)}finally{$.p=P,k.T=N}}function eA(f,d,y,_){if(K2){var N=tA(_);if(N===null)kw(f,d,_,Q2,y),fU(f,_);else if(OQ(N,f,d,y,_))_.stopPropagation();else if(fU(f,_),d&4&&-1<NQ.indexOf(f)){for(;N!==null;){var P=J(N);if(P!==null)switch(P.tag){case 3:if(P=P.stateNode,P.current.memoizedState.isDehydrated){var X=lt(P.pendingLanes);if(X!==0){var oe=P;for(oe.pendingLanes|=2,oe.entangledLanes|=2;X;){var Me=1<<31-pe(X);oe.entanglements[1]|=Me,X&=~Me}au(P),(ti&6)===0&&(qs=Z()+500,_x(0))}}break;case 31:case 13:oe=Fc(P,2),oe!==null&&v(oe,P,2),le(),Jw(P,2)}if(P=tA(_),P===null&&kw(f,d,_,Q2,y),P===N)break;N=P}N!==null&&_.stopPropagation()}else kw(f,d,_,null,y)}}function tA(f){return f=Ou(f),nA(f)}var Q2=null;function nA(f){if(Q2=null,f=_t(f),f!==null){var d=a(f);if(d===null)f=null;else{var y=d.tag;if(y===13){if(f=s(d),f!==null)return f;f=null}else if(y===31){if(f=o(d),f!==null)return f;f=null}else if(y===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;f=null}else d!==f&&(f=null)}}return Q2=f,null}function uU(f){switch(f){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xe()){case Xe:return 2;case Be:return 8;case Ne:case yt:return 32;case vt:return 268435456;default:return 32}default:return 32}}var iA=!1,bh=null,Sh=null,Mh=null,jx=new Map,Nx=new Map,_h=[],NQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function fU(f,d){switch(f){case"focusin":case"focusout":bh=null;break;case"dragenter":case"dragleave":Sh=null;break;case"mouseover":case"mouseout":Mh=null;break;case"pointerover":case"pointerout":jx.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nx.delete(d.pointerId)}}function Ox(f,d,y,_,N,P){return f===null||f.nativeEvent!==P?(f={blockedOn:d,domEventName:y,eventSystemFlags:_,nativeEvent:P,targetContainers:[N]},d!==null&&(d=J(d),d!==null&&lU(d)),f):(f.eventSystemFlags|=_,d=f.targetContainers,N!==null&&d.indexOf(N)===-1&&d.push(N),f)}function OQ(f,d,y,_,N){switch(d){case"focusin":return bh=Ox(bh,f,d,y,_,N),!0;case"dragenter":return Sh=Ox(Sh,f,d,y,_,N),!0;case"mouseover":return Mh=Ox(Mh,f,d,y,_,N),!0;case"pointerover":var P=N.pointerId;return jx.set(P,Ox(jx.get(P)||null,f,d,y,_,N)),!0;case"gotpointercapture":return P=N.pointerId,Nx.set(P,Ox(Nx.get(P)||null,f,d,y,_,N)),!0}return!1}function hU(f){var d=_t(f.target);if(d!==null){var y=a(d);if(y!==null){if(d=y.tag,d===13){if(d=s(y),d!==null){f.blockedOn=d,rn(f.priority,function(){cU(y)});return}}else if(d===31){if(d=o(y),d!==null){f.blockedOn=d,rn(f.priority,function(){cU(y)});return}}else if(d===3&&y.stateNode.current.memoizedState.isDehydrated){f.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}f.blockedOn=null}function J2(f){if(f.blockedOn!==null)return!1;for(var d=f.targetContainers;0<d.length;){var y=tA(f.nativeEvent);if(y===null){y=f.nativeEvent;var _=new y.constructor(y.type,y);_o=_,y.target.dispatchEvent(_),_o=null}else return d=J(y),d!==null&&lU(d),f.blockedOn=y,!1;d.shift()}return!0}function dU(f,d,y){J2(f)&&y.delete(d)}function DQ(){iA=!1,bh!==null&&J2(bh)&&(bh=null),Sh!==null&&J2(Sh)&&(Sh=null),Mh!==null&&J2(Mh)&&(Mh=null),jx.forEach(dU),Nx.forEach(dU)}function eS(f,d){f.blockedOn===d&&(f.blockedOn=null,iA||(iA=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,DQ)))}var tS=null;function pU(f){tS!==f&&(tS=f,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){tS===f&&(tS=null);for(var d=0;d<f.length;d+=3){var y=f[d],_=f[d+1],N=f[d+2];if(typeof _!="function"){if(nA(_||y)===null)continue;break}var P=J(y);P!==null&&(f.splice(d,3),d-=3,px(P,{pending:!0,data:N,method:y.method,action:_},_,N))}}))}function um(f){function d(Me){return eS(Me,f)}bh!==null&&eS(bh,f),Sh!==null&&eS(Sh,f),Mh!==null&&eS(Mh,f),jx.forEach(d),Nx.forEach(d);for(var y=0;y<_h.length;y++){var _=_h[y];_.blockedOn===f&&(_.blockedOn=null)}for(;0<_h.length&&(y=_h[0],y.blockedOn===null);)hU(y),y.blockedOn===null&&_h.shift();if(y=(f.ownerDocument||f).$$reactFormReplay,y!=null)for(_=0;_<y.length;_+=3){var N=y[_],P=y[_+1],X=N[Q]||null;if(typeof P=="function")X||pU(y);else if(X){var oe=null;if(P&&P.hasAttribute("formAction")){if(N=P,X=P[Q]||null)oe=X.formAction;else if(nA(N)!==null)continue}else oe=X.action;typeof oe=="function"?y[_+1]=oe:(y.splice(_,3),_-=3),pU(y)}}}function mU(){function f(P){P.canIntercept&&P.info==="react-transition"&&P.intercept({handler:function(){return new Promise(function(X){return N=X})},focusReset:"manual",scroll:"manual"})}function d(){N!==null&&(N(),N=null),_||setTimeout(y,20)}function y(){if(!_&&!navigation.transition){var P=navigation.currentEntry;P&&P.url!=null&&navigation.navigate(P.url,{state:P.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var _=!1,N=null;return navigation.addEventListener("navigate",f),navigation.addEventListener("navigatesuccess",d),navigation.addEventListener("navigateerror",d),setTimeout(y,100),function(){_=!0,navigation.removeEventListener("navigate",f),navigation.removeEventListener("navigatesuccess",d),navigation.removeEventListener("navigateerror",d),N!==null&&(N(),N=null)}}}function rA(f){this._internalRoot=f}nS.prototype.render=rA.prototype.render=function(f){var d=this._internalRoot;if(d===null)throw Error(i(409));var y=d.current,_=Za();sU(y,_,f,d,null,null)},nS.prototype.unmount=rA.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var d=f.containerInfo;sU(f.current,2,null,f,null,null),le(),d[ce]=null}};function nS(f){this._internalRoot=f}nS.prototype.unstable_scheduleHydration=function(f){if(f){var d=Fi();f={blockedOn:null,target:f,priority:d};for(var y=0;y<_h.length&&d!==0&&d<_h[y].priority;y++);_h.splice(y,0,f),y===0&&hU(f)}};var gU=e.version;if(gU!=="19.2.0")throw Error(i(527,gU,"19.2.0"));$.findDOMNode=function(f){var d=f._reactInternals;if(d===void 0)throw typeof f.render=="function"?Error(i(188)):(f=Object.keys(f).join(","),Error(i(268,f)));return f=u(d),f=f!==null?h(f):null,f=f===null?null:f.stateNode,f};var PQ={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var iS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iS.isDisabled&&iS.supportsFiber)try{We=iS.inject(PQ),qe=iS}catch{}}return Px.createRoot=function(f,d){if(!r(f))throw Error(i(299));var y=!1,_="",N=xx,P=I2,X=Xp;return d!=null&&(d.unstable_strictMode===!0&&(y=!0),d.identifierPrefix!==void 0&&(_=d.identifierPrefix),d.onUncaughtError!==void 0&&(N=d.onUncaughtError),d.onCaughtError!==void 0&&(P=d.onCaughtError),d.onRecoverableError!==void 0&&(X=d.onRecoverableError)),d=rU(f,1,!1,null,null,y,_,null,N,P,X,mU),f[ce]=d.current,zw(f),new rA(d)},Px.hydrateRoot=function(f,d,y){if(!r(f))throw Error(i(299));var _=!1,N="",P=xx,X=I2,oe=Xp,Me=null;return y!=null&&(y.unstable_strictMode===!0&&(_=!0),y.identifierPrefix!==void 0&&(N=y.identifierPrefix),y.onUncaughtError!==void 0&&(P=y.onUncaughtError),y.onCaughtError!==void 0&&(X=y.onCaughtError),y.onRecoverableError!==void 0&&(oe=y.onRecoverableError),y.formState!==void 0&&(Me=y.formState)),d=rU(f,1,!0,d,y??null,_,N,Me,P,X,oe,mU),d.context=aU(null),y=d.current,_=Za(),_=bi(_),N=fl(_),N.callback=null,Ql(y,N,_),y=_,d.current.lanes=y,On(d,y),au(d),f[ce]=d.current,zw(f),new nS(d)},Px.version="19.2.0",Px}var AU;function WQ(){if(AU)return sA.exports;AU=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),sA.exports=qQ(),sA.exports}var VV=WQ();const XQ=ki(VV);var z=Zg();const De=ki(z);var fA={exports:{}},ff={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EU;function $Q(){return EU||(EU=1,ff.ConcurrentRoot=1,ff.ContinuousEventPriority=8,ff.DefaultEventPriority=32,ff.DiscreteEventPriority=2,ff.IdleEventPriority=268435456,ff.LegacyRoot=0,ff.NoEventPriority=0),ff}var CU;function YQ(){return CU||(CU=1,fA.exports=$Q()),fA.exports}var HM=YQ();/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Lf="181",m0={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},g0={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},HV=0,yj=1,qV=2,ZQ=3,WV=0,hb=1,Ny=2,gc=3,_u=0,Hr=1,ai=2,_r=0,I0=1,bj=2,Sj=3,Mj=4,XV=5,zh=100,$V=101,YV=102,ZV=103,KV=104,QV=200,JV=201,eH=202,tH=203,t_=204,n_=205,nH=206,iH=207,rH=208,aH=209,sH=210,oH=211,lH=212,cH=213,uH=214,i_=0,t1=1,r_=2,V0=3,a_=4,s_=5,o_=6,l_=7,db=0,fH=1,hH=2,Tc=0,dH=1,pH=2,mH=3,LO=4,gH=5,vH=6,xH=7,_j="attached",yH="detached",Xh=300,Tu=301,$h=302,pg=303,n1=304,Kg=306,ar=1e3,qr=1001,i1=1002,Ir=1003,BO=1004,KQ=1004,Zm=1005,QQ=1005,Rn=1006,Oy=1007,JQ=1007,Sc=1008,Tj=1008,nr=1009,tT=1010,nT=1011,H0=1012,pb=1013,Ac=1014,fr=1015,Pr=1016,iT=1017,rT=1018,q0=1020,zO=35902,kO=35899,FO=1021,GO=1022,Sr=1023,W0=1026,X0=1027,np=1028,mb=1029,gb=1030,aT=1031,eJ=1032,sT=1033,Dy=33776,Py=33777,Iy=33778,Uy=33779,c_=35840,u_=35841,f_=35842,h_=35843,d_=36196,p_=37492,m_=37496,g_=37808,v_=37809,x_=37810,y_=37811,b_=37812,S_=37813,M_=37814,__=37815,T_=37816,w_=37817,A_=37818,E_=37819,C_=37820,R_=37821,j_=36492,N_=36494,O_=36495,D_=36283,P_=36284,I_=36285,U_=36286,bH=2200,SH=2201,MH=2202,r1=2300,L_=2301,qM=2302,T0=2400,w0=2401,a1=2402,oT=2500,VO=2501,tJ=0,nJ=1,iJ=2,Il=3200,HO=3201,rJ=3202,aJ=3203,ed=0,_H=1,yc="",Kn="srgb",Zo="srgb-linear",s1="linear",Bi="srgb",sJ=0,v0=7680,oJ=7681,lJ=7682,cJ=7683,uJ=34055,fJ=34056,hJ=5386,dJ=512,pJ=513,mJ=514,gJ=515,vJ=516,xJ=517,yJ=518,wj=519,TH=512,wH=513,AH=514,qO=515,EH=516,CH=517,RH=518,jH=519,o1=35044,bJ=35048,SJ=35040,MJ=35045,_J=35049,TJ=35041,wJ=35046,AJ=35050,EJ=35042,CJ="100",Aj="300 es",Ho=2e3,mg=2001,RJ={COMPUTE:"compute",RENDER:"render"},jJ={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},NJ={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function NH(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const OJ={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Km(t,e){return new OJ[t](e)}function l1(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function OH(){const t=l1("canvas");return t.style.display="block",t}const RU={};let Yh=null;function DJ(t){Yh=t}function PJ(){return Yh}function c1(...t){const e="THREE."+t.shift();Yh?Yh("log",e,...t):console.log(e,...t)}function Wt(...t){const e="THREE."+t.shift();Yh?Yh("warn",e,...t):console.warn(e,...t)}function wn(...t){const e="THREE."+t.shift();Yh?Yh("error",e,...t):console.error(e,...t)}function gg(...t){const e=t.join(" ");e in RU||(RU[e]=!0,Wt(...t))}function IJ(t,e,n){return new Promise(function(i,r){function a(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:r();break;case t.TIMEOUT_EXPIRED:setTimeout(a,n);break;default:i()}}setTimeout(a,n)})}let tl=class{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const a=r.indexOf(n);a!==-1&&r.splice(a,1)}}dispatchEvent(e){const n=this._listeners;if(n===void 0)return;const i=n[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,s=r.length;a<s;a++)r[a].call(this,e);e.target=null}}};const bs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let jU=1234567;const U0=Math.PI/180,vg=180/Math.PI;function Wo(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(bs[t&255]+bs[t>>8&255]+bs[t>>16&255]+bs[t>>24&255]+"-"+bs[e&255]+bs[e>>8&255]+"-"+bs[e>>16&15|64]+bs[e>>24&255]+"-"+bs[n&63|128]+bs[n>>8&255]+"-"+bs[n>>16&255]+bs[n>>24&255]+bs[i&255]+bs[i>>8&255]+bs[i>>16&255]+bs[i>>24&255]).toLowerCase()}function Mn(t,e,n){return Math.max(e,Math.min(n,t))}function WO(t,e){return(t%e+e)%e}function UJ(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)}function LJ(t,e,n){return t!==e?(n-t)/(e-t):0}function Ly(t,e,n){return(1-n)*t+n*e}function BJ(t,e,n,i){return Ly(t,e,1-Math.exp(-n*i))}function zJ(t,e=1){return e-Math.abs(WO(t,e*2)-e)}function kJ(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function FJ(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function GJ(t,e){return t+Math.floor(Math.random()*(e-t+1))}function VJ(t,e){return t+Math.random()*(e-t)}function HJ(t){return t*(.5-Math.random())}function qJ(t){t!==void 0&&(jU=t);let e=jU+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function WJ(t){return t*U0}function XJ(t){return t*vg}function $J(t){return(t&t-1)===0&&t!==0}function YJ(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function ZJ(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function KJ(t,e,n,i,r){const a=Math.cos,s=Math.sin,o=a(n/2),l=s(n/2),u=a((e+i)/2),h=s((e+i)/2),p=a((e-i)/2),g=s((e-i)/2),x=a((i-e)/2),b=s((i-e)/2);switch(r){case"XYX":t.set(o*h,l*p,l*g,o*u);break;case"YZY":t.set(l*g,o*h,l*p,o*u);break;case"ZXZ":t.set(l*p,l*g,o*h,o*u);break;case"XZX":t.set(o*h,l*b,l*x,o*u);break;case"YXY":t.set(l*x,o*h,l*b,o*u);break;case"ZYZ":t.set(l*b,l*x,o*h,o*u);break;default:Wt("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Ks(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function zn(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const ba={DEG2RAD:U0,RAD2DEG:vg,generateUUID:Wo,clamp:Mn,euclideanModulo:WO,mapLinear:UJ,inverseLerp:LJ,lerp:Ly,damp:BJ,pingpong:zJ,smoothstep:kJ,smootherstep:FJ,randInt:GJ,randFloat:VJ,randFloatSpread:HJ,seededRandom:qJ,degToRad:WJ,radToDeg:XJ,isPowerOfTwo:$J,ceilPowerOfTwo:YJ,floorPowerOfTwo:ZJ,setQuaternionFromProperEuler:KJ,normalize:zn,denormalize:Ks};class Ye{constructor(e=0,n=0){Ye.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,r=e.elements;return this.x=r[0]*n+r[3]*i+r[6],this.y=r[1]*n+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Mn(this.x,e.x,n.x),this.y=Mn(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=Mn(this.x,e,n),this.y=Mn(this.y,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Mn(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(Mn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),r=Math.sin(n),a=this.x-e.x,s=this.y-e.y;return this.x=a*i-s*r+e.x,this.y=a*r+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Jr{constructor(e=0,n=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=r}static slerpFlat(e,n,i,r,a,s,o){let l=i[r+0],u=i[r+1],h=i[r+2],p=i[r+3],g=a[s+0],x=a[s+1],b=a[s+2],M=a[s+3];if(o<=0){e[n+0]=l,e[n+1]=u,e[n+2]=h,e[n+3]=p;return}if(o>=1){e[n+0]=g,e[n+1]=x,e[n+2]=b,e[n+3]=M;return}if(p!==M||l!==g||u!==x||h!==b){let S=l*g+u*x+h*b+p*M;S<0&&(g=-g,x=-x,b=-b,M=-M,S=-S);let T=1-o;if(S<.9995){const A=Math.acos(S),E=Math.sin(A);T=Math.sin(T*A)/E,o=Math.sin(o*A)/E,l=l*T+g*o,u=u*T+x*o,h=h*T+b*o,p=p*T+M*o}else{l=l*T+g*o,u=u*T+x*o,h=h*T+b*o,p=p*T+M*o;const A=1/Math.sqrt(l*l+u*u+h*h+p*p);l*=A,u*=A,h*=A,p*=A}}e[n]=l,e[n+1]=u,e[n+2]=h,e[n+3]=p}static multiplyQuaternionsFlat(e,n,i,r,a,s){const o=i[r],l=i[r+1],u=i[r+2],h=i[r+3],p=a[s],g=a[s+1],x=a[s+2],b=a[s+3];return e[n]=o*b+h*p+l*x-u*g,e[n+1]=l*b+h*g+u*p-o*x,e[n+2]=u*b+h*x+o*g-l*p,e[n+3]=h*b-o*p-l*g-u*x,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,r){return this._x=e,this._y=n,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const i=e._x,r=e._y,a=e._z,s=e._order,o=Math.cos,l=Math.sin,u=o(i/2),h=o(r/2),p=o(a/2),g=l(i/2),x=l(r/2),b=l(a/2);switch(s){case"XYZ":this._x=g*h*p+u*x*b,this._y=u*x*p-g*h*b,this._z=u*h*b+g*x*p,this._w=u*h*p-g*x*b;break;case"YXZ":this._x=g*h*p+u*x*b,this._y=u*x*p-g*h*b,this._z=u*h*b-g*x*p,this._w=u*h*p+g*x*b;break;case"ZXY":this._x=g*h*p-u*x*b,this._y=u*x*p+g*h*b,this._z=u*h*b+g*x*p,this._w=u*h*p-g*x*b;break;case"ZYX":this._x=g*h*p-u*x*b,this._y=u*x*p+g*h*b,this._z=u*h*b-g*x*p,this._w=u*h*p+g*x*b;break;case"YZX":this._x=g*h*p+u*x*b,this._y=u*x*p+g*h*b,this._z=u*h*b-g*x*p,this._w=u*h*p-g*x*b;break;case"XZY":this._x=g*h*p-u*x*b,this._y=u*x*p-g*h*b,this._z=u*h*b+g*x*p,this._w=u*h*p+g*x*b;break;default:Wt("Quaternion: .setFromEuler() encountered an unknown order: "+s)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],r=n[4],a=n[8],s=n[1],o=n[5],l=n[9],u=n[2],h=n[6],p=n[10],g=i+o+p;if(g>0){const x=.5/Math.sqrt(g+1);this._w=.25/x,this._x=(h-l)*x,this._y=(a-u)*x,this._z=(s-r)*x}else if(i>o&&i>p){const x=2*Math.sqrt(1+i-o-p);this._w=(h-l)/x,this._x=.25*x,this._y=(r+s)/x,this._z=(a+u)/x}else if(o>p){const x=2*Math.sqrt(1+o-i-p);this._w=(a-u)/x,this._x=(r+s)/x,this._y=.25*x,this._z=(l+h)/x}else{const x=2*Math.sqrt(1+p-i-o);this._w=(s-r)/x,this._x=(a+u)/x,this._y=(l+h)/x,this._z=.25*x}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Mn(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,n/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,r=e._y,a=e._z,s=e._w,o=n._x,l=n._y,u=n._z,h=n._w;return this._x=i*h+s*o+r*u-a*l,this._y=r*h+s*l+a*o-i*u,this._z=a*h+s*u+i*l-r*o,this._w=s*h-i*o-r*l-a*u,this._onChangeCallback(),this}slerp(e,n){if(n<=0)return this;if(n>=1)return this.copy(e);let i=e._x,r=e._y,a=e._z,s=e._w,o=this.dot(e);o<0&&(i=-i,r=-r,a=-a,s=-s,o=-o);let l=1-n;if(o<.9995){const u=Math.acos(o),h=Math.sin(u);l=Math.sin(l*u)/h,n=Math.sin(n*u)/h,this._x=this._x*l+i*n,this._y=this._y*l+r*n,this._z=this._z*l+a*n,this._w=this._w*l+s*n,this._onChangeCallback()}else this._x=this._x*l+i*n,this._y=this._y*l+r*n,this._z=this._z*l+a*n,this._w=this._w*l+s*n,this.normalize();return this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),a=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),a*Math.sin(n),a*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class se{constructor(e=0,n=0,i=0){se.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(NU.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(NU.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*n+a[3]*i+a[6]*r,this.y=a[1]*n+a[4]*i+a[7]*r,this.z=a[2]*n+a[5]*i+a[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,a=e.elements,s=1/(a[3]*n+a[7]*i+a[11]*r+a[15]);return this.x=(a[0]*n+a[4]*i+a[8]*r+a[12])*s,this.y=(a[1]*n+a[5]*i+a[9]*r+a[13])*s,this.z=(a[2]*n+a[6]*i+a[10]*r+a[14])*s,this}applyQuaternion(e){const n=this.x,i=this.y,r=this.z,a=e.x,s=e.y,o=e.z,l=e.w,u=2*(s*r-o*i),h=2*(o*n-a*r),p=2*(a*i-s*n);return this.x=n+l*u+s*p-o*h,this.y=i+l*h+o*u-a*p,this.z=r+l*p+a*h-s*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*n+a[4]*i+a[8]*r,this.y=a[1]*n+a[5]*i+a[9]*r,this.z=a[2]*n+a[6]*i+a[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Mn(this.x,e.x,n.x),this.y=Mn(this.y,e.y,n.y),this.z=Mn(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=Mn(this.x,e,n),this.y=Mn(this.y,e,n),this.z=Mn(this.z,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Mn(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,r=e.y,a=e.z,s=n.x,o=n.y,l=n.z;return this.x=r*l-a*o,this.y=a*s-i*l,this.z=i*o-r*s,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return hA.copy(this).projectOnVector(e),this.sub(hA)}reflect(e){return this.sub(hA.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(Mn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return n*n+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const r=Math.sin(n)*e;return this.x=r*Math.sin(i),this.y=Math.cos(n)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=r,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,i=Math.sqrt(1-n*n);return this.x=i*Math.cos(e),this.y=n,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const hA=new se,NU=new Jr;class Nn{constructor(e,n,i,r,a,s,o,l,u){Nn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,i,r,a,s,o,l,u)}set(e,n,i,r,a,s,o,l,u){const h=this.elements;return h[0]=e,h[1]=r,h[2]=o,h[3]=n,h[4]=a,h[5]=l,h[6]=i,h[7]=s,h[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,a=this.elements,s=i[0],o=i[3],l=i[6],u=i[1],h=i[4],p=i[7],g=i[2],x=i[5],b=i[8],M=r[0],S=r[3],T=r[6],A=r[1],E=r[4],j=r[7],R=r[2],C=r[5],D=r[8];return a[0]=s*M+o*A+l*R,a[3]=s*S+o*E+l*C,a[6]=s*T+o*j+l*D,a[1]=u*M+h*A+p*R,a[4]=u*S+h*E+p*C,a[7]=u*T+h*j+p*D,a[2]=g*M+x*A+b*R,a[5]=g*S+x*E+b*C,a[8]=g*T+x*j+b*D,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],h=e[8];return n*s*h-n*o*u-i*a*h+i*o*l+r*a*u-r*s*l}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],h=e[8],p=h*s-o*u,g=o*l-h*a,x=u*a-s*l,b=n*p+i*g+r*x;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const M=1/b;return e[0]=p*M,e[1]=(r*u-h*i)*M,e[2]=(o*i-r*s)*M,e[3]=g*M,e[4]=(h*n-r*l)*M,e[5]=(r*a-o*n)*M,e[6]=x*M,e[7]=(i*l-u*n)*M,e[8]=(s*n-i*a)*M,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,r,a,s,o){const l=Math.cos(a),u=Math.sin(a);return this.set(i*l,i*u,-i*(l*s+u*o)+s+e,-r*u,r*l,-r*(-u*s+l*o)+o+n,0,0,1),this}scale(e,n){return this.premultiply(dA.makeScale(e,n)),this}rotate(e){return this.premultiply(dA.makeRotation(-e)),this}translate(e,n){return this.premultiply(dA.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,i,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<9;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const dA=new Nn,OU=new Nn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),DU=new Nn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function QJ(){const t={enabled:!0,workingColorSpace:Zo,spaces:{},convert:function(r,a,s){return this.enabled===!1||a===s||!a||!s||(this.spaces[a].transfer===Bi&&(r.r=wf(r.r),r.g=wf(r.g),r.b=wf(r.b)),this.spaces[a].primaries!==this.spaces[s].primaries&&(r.applyMatrix3(this.spaces[a].toXYZ),r.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===Bi&&(r.r=lg(r.r),r.g=lg(r.g),r.b=lg(r.b))),r},workingToColorSpace:function(r,a){return this.convert(r,this.workingColorSpace,a)},colorSpaceToWorking:function(r,a){return this.convert(r,a,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===yc?s1:this.spaces[r].transfer},getToneMappingMode:function(r){return this.spaces[r].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(r,a=this.workingColorSpace){return r.fromArray(this.spaces[a].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,a,s){return r.copy(this.spaces[a].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,a){return gg("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),t.workingToColorSpace(r,a)},toWorkingColorSpace:function(r,a){return gg("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),t.colorSpaceToWorking(r,a)}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],i=[.3127,.329];return t.define({[Zo]:{primaries:e,whitePoint:i,transfer:s1,toXYZ:OU,fromXYZ:DU,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:Kn},outputColorSpaceConfig:{drawingBufferColorSpace:Kn}},[Kn]:{primaries:e,whitePoint:i,transfer:Bi,toXYZ:OU,fromXYZ:DU,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:Kn}}}),t}const fi=QJ();function wf(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function lg(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let fm;class DH{static getDataURL(e,n="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{fm===void 0&&(fm=l1("canvas")),fm.width=e.width,fm.height=e.height;const r=fm.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=fm}return i.toDataURL(n)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=l1("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),a=r.data;for(let s=0;s<a.length;s++)a[s]=wf(a[s]/255)*255;return i.putImageData(r,0,0),n}else if(e.data){const n=e.data.slice(0);for(let i=0;i<n.length;i++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[i]=Math.floor(wf(n[i]/255)*255):n[i]=wf(n[i]);return{data:n,width:e.width,height:e.height}}else return Wt("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let JJ=0;class kh{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:JJ++}),this.uuid=Wo(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const n=this.data;return typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement?e.set(n.videoWidth,n.videoHeight,0):n instanceof VideoFrame?e.set(n.displayHeight,n.displayWidth,0):n!==null?e.set(n.width,n.height,n.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let a;if(Array.isArray(r)){a=[];for(let s=0,o=r.length;s<o;s++)r[s].isDataTexture?a.push(pA(r[s].image)):a.push(pA(r[s]))}else a=pA(r);i.url=a}return n||(e.images[this.uuid]=i),i}}function pA(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?DH.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(Wt("Texture: Unable to serialize Texture."),{})}let eee=0;const mA=new se;class ji extends tl{constructor(e=ji.DEFAULT_IMAGE,n=ji.DEFAULT_MAPPING,i=qr,r=qr,a=Rn,s=Sc,o=Sr,l=nr,u=ji.DEFAULT_ANISOTROPY,h=yc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:eee++}),this.uuid=Wo(),this.name="",this.source=new kh(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=a,this.minFilter=s,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=l,this.offset=new Ye(0,0),this.repeat=new Ye(1,1),this.center=new Ye(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Nn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(mA).x}get height(){return this.source.getSize(mA).y}get depth(){return this.source.getSize(mA).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const n in e){const i=e[n];if(i===void 0){Wt(`Texture.setValues(): parameter '${n}' has value of undefined.`);continue}const r=this[n];if(r===void 0){Wt(`Texture.setValues(): property '${n}' does not exist.`);continue}r&&i&&r.isVector2&&i.isVector2||r&&i&&r.isVector3&&i.isVector3||r&&i&&r.isMatrix3&&i.isMatrix3?r.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),n||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Xh)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ar:e.x=e.x-Math.floor(e.x);break;case qr:e.x=e.x<0?0:1;break;case i1:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ar:e.y=e.y-Math.floor(e.y);break;case qr:e.y=e.y<0?0:1;break;case i1:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}ji.DEFAULT_IMAGE=null;ji.DEFAULT_MAPPING=Xh;ji.DEFAULT_ANISOTROPY=1;class Cn{constructor(e=0,n=0,i=0,r=1){Cn.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,a=this.w,s=e.elements;return this.x=s[0]*n+s[4]*i+s[8]*r+s[12]*a,this.y=s[1]*n+s[5]*i+s[9]*r+s[13]*a,this.z=s[2]*n+s[6]*i+s[10]*r+s[14]*a,this.w=s[3]*n+s[7]*i+s[11]*r+s[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,r,a;const l=e.elements,u=l[0],h=l[4],p=l[8],g=l[1],x=l[5],b=l[9],M=l[2],S=l[6],T=l[10];if(Math.abs(h-g)<.01&&Math.abs(p-M)<.01&&Math.abs(b-S)<.01){if(Math.abs(h+g)<.1&&Math.abs(p+M)<.1&&Math.abs(b+S)<.1&&Math.abs(u+x+T-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const E=(u+1)/2,j=(x+1)/2,R=(T+1)/2,C=(h+g)/4,D=(p+M)/4,U=(b+S)/4;return E>j&&E>R?E<.01?(i=0,r=.707106781,a=.707106781):(i=Math.sqrt(E),r=C/i,a=D/i):j>R?j<.01?(i=.707106781,r=0,a=.707106781):(r=Math.sqrt(j),i=C/r,a=U/r):R<.01?(i=.707106781,r=.707106781,a=0):(a=Math.sqrt(R),i=D/a,r=U/a),this.set(i,r,a,n),this}let A=Math.sqrt((S-b)*(S-b)+(p-M)*(p-M)+(g-h)*(g-h));return Math.abs(A)<.001&&(A=1),this.x=(S-b)/A,this.y=(p-M)/A,this.z=(g-h)/A,this.w=Math.acos((u+x+T-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Mn(this.x,e.x,n.x),this.y=Mn(this.y,e.y,n.y),this.z=Mn(this.z,e.z,n.z),this.w=Mn(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=Mn(this.x,e,n),this.y=Mn(this.y,e,n),this.z=Mn(this.z,e,n),this.w=Mn(this.w,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Mn(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class XO extends tl{constructor(e=1,n=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Rn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=i.depth,this.scissor=new Cn(0,0,e,n),this.scissorTest=!1,this.viewport=new Cn(0,0,e,n);const r={width:e,height:n,depth:i.depth},a=new ji(r);this.textures=[];const s=i.count;for(let o=0;o<s;o++)this.textures[o]=a.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){const n={minFilter:Rn,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(n.mapping=e.mapping),e.wrapS!==void 0&&(n.wrapS=e.wrapS),e.wrapT!==void 0&&(n.wrapT=e.wrapT),e.wrapR!==void 0&&(n.wrapR=e.wrapR),e.magFilter!==void 0&&(n.magFilter=e.magFilter),e.minFilter!==void 0&&(n.minFilter=e.minFilter),e.format!==void 0&&(n.format=e.format),e.type!==void 0&&(n.type=e.type),e.anisotropy!==void 0&&(n.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(n.colorSpace=e.colorSpace),e.flipY!==void 0&&(n.flipY=e.flipY),e.generateMipmaps!==void 0&&(n.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(n.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(n)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,n,i=1){if(this.width!==e||this.height!==n||this.depth!==i){this.width=e,this.height=n,this.depth=i;for(let r=0,a=this.textures.length;r<a;r++)this.textures[r].image.width=e,this.textures[r].image.height=n,this.textures[r].image.depth=i,this.textures[r].isData3DTexture!==!0&&(this.textures[r].isArrayTexture=this.textures[r].image.depth>1);this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,i=e.textures.length;n<i;n++){this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const r=Object.assign({},e.textures[n].image);this.textures[n].source=new kh(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ei extends XO{constructor(e=1,n=1,i={}){super(e,n,i),this.isWebGLRenderTarget=!0}}class lT extends ji{constructor(e=null,n=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=Ir,this.minFilter=Ir,this.wrapR=qr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class tee extends Ei{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new lT(null,e,n,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class cT extends ji{constructor(e=null,n=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=Ir,this.minFilter=Ir,this.wrapR=qr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class nee extends Ei{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new cT(null,e,n,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class ea{constructor(e=new se(1/0,1/0,1/0),n=new se(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n+=3)this.expandByPoint(uc.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,i=e.count;n<i;n++)this.expandByPoint(uc.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=uc.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const a=i.getAttribute("position");if(n===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let s=0,o=a.count;s<o;s++)e.isMesh===!0?e.getVertexPosition(s,uc):uc.fromBufferAttribute(a,s),uc.applyMatrix4(e.matrixWorld),this.expandByPoint(uc);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),aS.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),aS.copy(i.boundingBox)),aS.applyMatrix4(e.matrixWorld),this.union(aS)}const r=e.children;for(let a=0,s=r.length;a<s;a++)this.expandByObject(r[a],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,uc),uc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ix),sS.subVectors(this.max,Ix),hm.subVectors(e.a,Ix),dm.subVectors(e.b,Ix),pm.subVectors(e.c,Ix),wh.subVectors(dm,hm),Ah.subVectors(pm,dm),$d.subVectors(hm,pm);let n=[0,-wh.z,wh.y,0,-Ah.z,Ah.y,0,-$d.z,$d.y,wh.z,0,-wh.x,Ah.z,0,-Ah.x,$d.z,0,-$d.x,-wh.y,wh.x,0,-Ah.y,Ah.x,0,-$d.y,$d.x,0];return!gA(n,hm,dm,pm,sS)||(n=[1,0,0,0,1,0,0,0,1],!gA(n,hm,dm,pm,sS))?!1:(oS.crossVectors(wh,Ah),n=[oS.x,oS.y,oS.z],gA(n,hm,dm,pm,sS))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,uc).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(uc).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(hf[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),hf[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),hf[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),hf[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),hf[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),hf[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),hf[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),hf[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(hf),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const hf=[new se,new se,new se,new se,new se,new se,new se,new se],uc=new se,aS=new ea,hm=new se,dm=new se,pm=new se,wh=new se,Ah=new se,$d=new se,Ix=new se,sS=new se,oS=new se,Yd=new se;function gA(t,e,n,i,r){for(let a=0,s=t.length-3;a<=s;a+=3){Yd.fromArray(t,a);const o=r.x*Math.abs(Yd.x)+r.y*Math.abs(Yd.y)+r.z*Math.abs(Yd.z),l=e.dot(Yd),u=n.dot(Yd),h=i.dot(Yd);if(Math.max(-Math.max(l,u,h),Math.min(l,u,h))>o)return!1}return!0}const iee=new ea,Ux=new se,vA=new se;class la{constructor(e=new se,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):iee.setFromPoints(e).getCenter(i);let r=0;for(let a=0,s=e.length;a<s;a++)r=Math.max(r,i.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Ux.subVectors(e,this.center);const n=Ux.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),r=(i-this.radius)*.5;this.center.addScaledVector(Ux,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(vA.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Ux.copy(e.center).add(vA)),this.expandByPoint(Ux.copy(e.center).sub(vA))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const df=new se,xA=new se,lS=new se,Eh=new se,yA=new se,cS=new se,bA=new se;class ip{constructor(e=new se,n=new se(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,df)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=df.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(df.copy(this.origin).addScaledVector(this.direction,n),df.distanceToSquared(e))}distanceSqToSegment(e,n,i,r){xA.copy(e).add(n).multiplyScalar(.5),lS.copy(n).sub(e).normalize(),Eh.copy(this.origin).sub(xA);const a=e.distanceTo(n)*.5,s=-this.direction.dot(lS),o=Eh.dot(this.direction),l=-Eh.dot(lS),u=Eh.lengthSq(),h=Math.abs(1-s*s);let p,g,x,b;if(h>0)if(p=s*l-o,g=s*o-l,b=a*h,p>=0)if(g>=-b)if(g<=b){const M=1/h;p*=M,g*=M,x=p*(p+s*g+2*o)+g*(s*p+g+2*l)+u}else g=a,p=Math.max(0,-(s*g+o)),x=-p*p+g*(g+2*l)+u;else g=-a,p=Math.max(0,-(s*g+o)),x=-p*p+g*(g+2*l)+u;else g<=-b?(p=Math.max(0,-(-s*a+o)),g=p>0?-a:Math.min(Math.max(-a,-l),a),x=-p*p+g*(g+2*l)+u):g<=b?(p=0,g=Math.min(Math.max(-a,-l),a),x=g*(g+2*l)+u):(p=Math.max(0,-(s*a+o)),g=p>0?a:Math.min(Math.max(-a,-l),a),x=-p*p+g*(g+2*l)+u);else g=s>0?-a:a,p=Math.max(0,-(s*g+o)),x=-p*p+g*(g+2*l)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,p),r&&r.copy(xA).addScaledVector(lS,g),x}intersectSphere(e,n){df.subVectors(e.center,this.origin);const i=df.dot(this.direction),r=df.dot(df)-i*i,a=e.radius*e.radius;if(r>a)return null;const s=Math.sqrt(a-r),o=i-s,l=i+s;return l<0?null:o<0?this.at(l,n):this.at(o,n)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,r,a,s,o,l;const u=1/this.direction.x,h=1/this.direction.y,p=1/this.direction.z,g=this.origin;return u>=0?(i=(e.min.x-g.x)*u,r=(e.max.x-g.x)*u):(i=(e.max.x-g.x)*u,r=(e.min.x-g.x)*u),h>=0?(a=(e.min.y-g.y)*h,s=(e.max.y-g.y)*h):(a=(e.max.y-g.y)*h,s=(e.min.y-g.y)*h),i>s||a>r||((a>i||isNaN(i))&&(i=a),(s<r||isNaN(r))&&(r=s),p>=0?(o=(e.min.z-g.z)*p,l=(e.max.z-g.z)*p):(o=(e.max.z-g.z)*p,l=(e.min.z-g.z)*p),i>l||o>r)||((o>i||i!==i)&&(i=o),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,n)}intersectsBox(e){return this.intersectBox(e,df)!==null}intersectTriangle(e,n,i,r,a){yA.subVectors(n,e),cS.subVectors(i,e),bA.crossVectors(yA,cS);let s=this.direction.dot(bA),o;if(s>0){if(r)return null;o=1}else if(s<0)o=-1,s=-s;else return null;Eh.subVectors(this.origin,e);const l=o*this.direction.dot(cS.crossVectors(Eh,cS));if(l<0)return null;const u=o*this.direction.dot(yA.cross(Eh));if(u<0||l+u>s)return null;const h=-o*Eh.dot(bA);return h<0?null:this.at(h/s,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class un{constructor(e,n,i,r,a,s,o,l,u,h,p,g,x,b,M,S){un.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,i,r,a,s,o,l,u,h,p,g,x,b,M,S)}set(e,n,i,r,a,s,o,l,u,h,p,g,x,b,M,S){const T=this.elements;return T[0]=e,T[4]=n,T[8]=i,T[12]=r,T[1]=a,T[5]=s,T[9]=o,T[13]=l,T[2]=u,T[6]=h,T[10]=p,T[14]=g,T[3]=x,T[7]=b,T[11]=M,T[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new un().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,i=e.elements,r=1/mm.setFromMatrixColumn(e,0).length(),a=1/mm.setFromMatrixColumn(e,1).length(),s=1/mm.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*a,n[5]=i[5]*a,n[6]=i[6]*a,n[7]=0,n[8]=i[8]*s,n[9]=i[9]*s,n[10]=i[10]*s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,i=e.x,r=e.y,a=e.z,s=Math.cos(i),o=Math.sin(i),l=Math.cos(r),u=Math.sin(r),h=Math.cos(a),p=Math.sin(a);if(e.order==="XYZ"){const g=s*h,x=s*p,b=o*h,M=o*p;n[0]=l*h,n[4]=-l*p,n[8]=u,n[1]=x+b*u,n[5]=g-M*u,n[9]=-o*l,n[2]=M-g*u,n[6]=b+x*u,n[10]=s*l}else if(e.order==="YXZ"){const g=l*h,x=l*p,b=u*h,M=u*p;n[0]=g+M*o,n[4]=b*o-x,n[8]=s*u,n[1]=s*p,n[5]=s*h,n[9]=-o,n[2]=x*o-b,n[6]=M+g*o,n[10]=s*l}else if(e.order==="ZXY"){const g=l*h,x=l*p,b=u*h,M=u*p;n[0]=g-M*o,n[4]=-s*p,n[8]=b+x*o,n[1]=x+b*o,n[5]=s*h,n[9]=M-g*o,n[2]=-s*u,n[6]=o,n[10]=s*l}else if(e.order==="ZYX"){const g=s*h,x=s*p,b=o*h,M=o*p;n[0]=l*h,n[4]=b*u-x,n[8]=g*u+M,n[1]=l*p,n[5]=M*u+g,n[9]=x*u-b,n[2]=-u,n[6]=o*l,n[10]=s*l}else if(e.order==="YZX"){const g=s*l,x=s*u,b=o*l,M=o*u;n[0]=l*h,n[4]=M-g*p,n[8]=b*p+x,n[1]=p,n[5]=s*h,n[9]=-o*h,n[2]=-u*h,n[6]=x*p+b,n[10]=g-M*p}else if(e.order==="XZY"){const g=s*l,x=s*u,b=o*l,M=o*u;n[0]=l*h,n[4]=-p,n[8]=u*h,n[1]=g*p+M,n[5]=s*h,n[9]=x*p-b,n[2]=b*p-x,n[6]=o*h,n[10]=M*p+g}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(ree,e,aee)}lookAt(e,n,i){const r=this.elements;return zo.subVectors(e,n),zo.lengthSq()===0&&(zo.z=1),zo.normalize(),Ch.crossVectors(i,zo),Ch.lengthSq()===0&&(Math.abs(i.z)===1?zo.x+=1e-4:zo.z+=1e-4,zo.normalize(),Ch.crossVectors(i,zo)),Ch.normalize(),uS.crossVectors(zo,Ch),r[0]=Ch.x,r[4]=uS.x,r[8]=zo.x,r[1]=Ch.y,r[5]=uS.y,r[9]=zo.y,r[2]=Ch.z,r[6]=uS.z,r[10]=zo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,a=this.elements,s=i[0],o=i[4],l=i[8],u=i[12],h=i[1],p=i[5],g=i[9],x=i[13],b=i[2],M=i[6],S=i[10],T=i[14],A=i[3],E=i[7],j=i[11],R=i[15],C=r[0],D=r[4],U=r[8],I=r[12],L=r[1],F=r[5],G=r[9],H=r[13],W=r[2],Y=r[6],k=r[10],$=r[14],ee=r[3],te=r[7],ae=r[11],q=r[15];return a[0]=s*C+o*L+l*W+u*ee,a[4]=s*D+o*F+l*Y+u*te,a[8]=s*U+o*G+l*k+u*ae,a[12]=s*I+o*H+l*$+u*q,a[1]=h*C+p*L+g*W+x*ee,a[5]=h*D+p*F+g*Y+x*te,a[9]=h*U+p*G+g*k+x*ae,a[13]=h*I+p*H+g*$+x*q,a[2]=b*C+M*L+S*W+T*ee,a[6]=b*D+M*F+S*Y+T*te,a[10]=b*U+M*G+S*k+T*ae,a[14]=b*I+M*H+S*$+T*q,a[3]=A*C+E*L+j*W+R*ee,a[7]=A*D+E*F+j*Y+R*te,a[11]=A*U+E*G+j*k+R*ae,a[15]=A*I+E*H+j*$+R*q,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],r=e[8],a=e[12],s=e[1],o=e[5],l=e[9],u=e[13],h=e[2],p=e[6],g=e[10],x=e[14],b=e[3],M=e[7],S=e[11],T=e[15];return b*(+a*l*p-r*u*p-a*o*g+i*u*g+r*o*x-i*l*x)+M*(+n*l*x-n*u*g+a*s*g-r*s*x+r*u*h-a*l*h)+S*(+n*u*p-n*o*x-a*s*p+i*s*x+a*o*h-i*u*h)+T*(-r*o*h-n*l*p+n*o*g+r*s*p-i*s*g+i*l*h)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=n,r[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],h=e[8],p=e[9],g=e[10],x=e[11],b=e[12],M=e[13],S=e[14],T=e[15],A=p*S*u-M*g*u+M*l*x-o*S*x-p*l*T+o*g*T,E=b*g*u-h*S*u-b*l*x+s*S*x+h*l*T-s*g*T,j=h*M*u-b*p*u+b*o*x-s*M*x-h*o*T+s*p*T,R=b*p*l-h*M*l-b*o*g+s*M*g+h*o*S-s*p*S,C=n*A+i*E+r*j+a*R;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const D=1/C;return e[0]=A*D,e[1]=(M*g*a-p*S*a-M*r*x+i*S*x+p*r*T-i*g*T)*D,e[2]=(o*S*a-M*l*a+M*r*u-i*S*u-o*r*T+i*l*T)*D,e[3]=(p*l*a-o*g*a-p*r*u+i*g*u+o*r*x-i*l*x)*D,e[4]=E*D,e[5]=(h*S*a-b*g*a+b*r*x-n*S*x-h*r*T+n*g*T)*D,e[6]=(b*l*a-s*S*a-b*r*u+n*S*u+s*r*T-n*l*T)*D,e[7]=(s*g*a-h*l*a+h*r*u-n*g*u-s*r*x+n*l*x)*D,e[8]=j*D,e[9]=(b*p*a-h*M*a-b*i*x+n*M*x+h*i*T-n*p*T)*D,e[10]=(s*M*a-b*o*a+b*i*u-n*M*u-s*i*T+n*o*T)*D,e[11]=(h*o*a-s*p*a-h*i*u+n*p*u+s*i*x-n*o*x)*D,e[12]=R*D,e[13]=(h*M*r-b*p*r+b*i*g-n*M*g-h*i*S+n*p*S)*D,e[14]=(b*o*r-s*M*r-b*i*l+n*M*l+s*i*S-n*o*S)*D,e[15]=(s*p*r-h*o*r+h*i*l-n*p*l-s*i*g+n*o*g)*D,this}scale(e){const n=this.elements,i=e.x,r=e.y,a=e.z;return n[0]*=i,n[4]*=r,n[8]*=a,n[1]*=i,n[5]*=r,n[9]*=a,n[2]*=i,n[6]*=r,n[10]*=a,n[3]*=i,n[7]*=r,n[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,r))}makeTranslation(e,n,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),r=Math.sin(n),a=1-i,s=e.x,o=e.y,l=e.z,u=a*s,h=a*o;return this.set(u*s+i,u*o-r*l,u*l+r*o,0,u*o+r*l,h*o+i,h*l-r*s,0,u*l-r*o,h*l+r*s,a*l*l+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,r,a,s){return this.set(1,i,a,0,e,1,s,0,n,r,1,0,0,0,0,1),this}compose(e,n,i){const r=this.elements,a=n._x,s=n._y,o=n._z,l=n._w,u=a+a,h=s+s,p=o+o,g=a*u,x=a*h,b=a*p,M=s*h,S=s*p,T=o*p,A=l*u,E=l*h,j=l*p,R=i.x,C=i.y,D=i.z;return r[0]=(1-(M+T))*R,r[1]=(x+j)*R,r[2]=(b-E)*R,r[3]=0,r[4]=(x-j)*C,r[5]=(1-(g+T))*C,r[6]=(S+A)*C,r[7]=0,r[8]=(b+E)*D,r[9]=(S-A)*D,r[10]=(1-(g+M))*D,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,n,i){const r=this.elements;let a=mm.set(r[0],r[1],r[2]).length();const s=mm.set(r[4],r[5],r[6]).length(),o=mm.set(r[8],r[9],r[10]).length();this.determinant()<0&&(a=-a),e.x=r[12],e.y=r[13],e.z=r[14],fc.copy(this);const u=1/a,h=1/s,p=1/o;return fc.elements[0]*=u,fc.elements[1]*=u,fc.elements[2]*=u,fc.elements[4]*=h,fc.elements[5]*=h,fc.elements[6]*=h,fc.elements[8]*=p,fc.elements[9]*=p,fc.elements[10]*=p,n.setFromRotationMatrix(fc),i.x=a,i.y=s,i.z=o,this}makePerspective(e,n,i,r,a,s,o=Ho,l=!1){const u=this.elements,h=2*a/(n-e),p=2*a/(i-r),g=(n+e)/(n-e),x=(i+r)/(i-r);let b,M;if(l)b=a/(s-a),M=s*a/(s-a);else if(o===Ho)b=-(s+a)/(s-a),M=-2*s*a/(s-a);else if(o===mg)b=-s/(s-a),M=-s*a/(s-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return u[0]=h,u[4]=0,u[8]=g,u[12]=0,u[1]=0,u[5]=p,u[9]=x,u[13]=0,u[2]=0,u[6]=0,u[10]=b,u[14]=M,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,n,i,r,a,s,o=Ho,l=!1){const u=this.elements,h=2/(n-e),p=2/(i-r),g=-(n+e)/(n-e),x=-(i+r)/(i-r);let b,M;if(l)b=1/(s-a),M=s/(s-a);else if(o===Ho)b=-2/(s-a),M=-(s+a)/(s-a);else if(o===mg)b=-1/(s-a),M=-a/(s-a);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return u[0]=h,u[4]=0,u[8]=0,u[12]=g,u[1]=0,u[5]=p,u[9]=0,u[13]=x,u[2]=0,u[6]=0,u[10]=b,u[14]=M,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<16;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}const mm=new se,fc=new un,ree=new se(0,0,0),aee=new se(1,1,1),Ch=new se,uS=new se,zo=new se,PU=new un,IU=new Jr;class Ko{constructor(e=0,n=0,i=0,r=Ko.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,r=this._order){return this._x=e,this._y=n,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,i=!0){const r=e.elements,a=r[0],s=r[4],o=r[8],l=r[1],u=r[5],h=r[9],p=r[2],g=r[6],x=r[10];switch(n){case"XYZ":this._y=Math.asin(Mn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,x),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(g,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Mn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(o,x),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-p,a),this._z=0);break;case"ZXY":this._x=Math.asin(Mn(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-p,x),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(l,a));break;case"ZYX":this._y=Math.asin(-Mn(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(g,x),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-s,u));break;case"YZX":this._z=Math.asin(Mn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-p,a)):(this._x=0,this._y=Math.atan2(o,x));break;case"XZY":this._z=Math.asin(-Mn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(g,u),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-h,x),this._y=0);break;default:Wt("Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return PU.makeRotationFromQuaternion(e),this.setFromRotationMatrix(PU,n,i)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return IU.setFromEuler(this),this.setFromQuaternion(IU,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ko.DEFAULT_ORDER="XYZ";let xg=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},see=0;const UU=new se,gm=new Jr,pf=new un,fS=new se,Lx=new se,oee=new se,lee=new Jr,LU=new se(1,0,0),BU=new se(0,1,0),zU=new se(0,0,1),kU={type:"added"},cee={type:"removed"},vm={type:"childadded",child:null},SA={type:"childremoved",child:null};class xi extends tl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:see++}),this.uuid=Wo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=xi.DEFAULT_UP.clone();const e=new se,n=new Ko,i=new Jr,r=new se(1,1,1);function a(){i.setFromEuler(n,!1)}function s(){n.setFromQuaternion(i,void 0,!1)}n._onChange(a),i._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new un},normalMatrix:{value:new Nn}}),this.matrix=new un,this.matrixWorld=new un,this.matrixAutoUpdate=xi.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=xi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new xg,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return gm.setFromAxisAngle(e,n),this.quaternion.multiply(gm),this}rotateOnWorldAxis(e,n){return gm.setFromAxisAngle(e,n),this.quaternion.premultiply(gm),this}rotateX(e){return this.rotateOnAxis(LU,e)}rotateY(e){return this.rotateOnAxis(BU,e)}rotateZ(e){return this.rotateOnAxis(zU,e)}translateOnAxis(e,n){return UU.copy(e).applyQuaternion(this.quaternion),this.position.add(UU.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(LU,e)}translateY(e){return this.translateOnAxis(BU,e)}translateZ(e){return this.translateOnAxis(zU,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(pf.copy(this.matrixWorld).invert())}lookAt(e,n,i){e.isVector3?fS.copy(e):fS.set(e,n,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Lx.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?pf.lookAt(Lx,fS,this.up):pf.lookAt(fS,Lx,this.up),this.quaternion.setFromRotationMatrix(pf),r&&(pf.extractRotation(r.matrixWorld),gm.setFromRotationMatrix(pf),this.quaternion.premultiply(gm.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(wn("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(kU),vm.child=e,this.dispatchEvent(vm),vm.child=null):wn("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(cee),SA.child=e,this.dispatchEvent(SA),SA.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),pf.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),pf.multiply(e.parent.matrixWorld)),e.applyMatrix4(pf),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(kU),vm.child=e,this.dispatchEvent(vm),vm.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let i=0,r=this.children.length;i<r;i++){const s=this.children[i].getObjectByProperty(e,n);if(s!==void 0)return s}}getObjectsByProperty(e,n,i=[]){this[e]===n&&i.push(this);const r=this.children;for(let a=0,s=r.length;a<s;a++)r[a].getObjectsByProperty(e,n,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Lx,e,oee),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Lx,lee,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].updateMatrixWorld(e)}updateWorldMatrix(e,n){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const r=this.children;for(let a=0,s=r.length;a<s;a++)r[a].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",i={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(o=>({...o,boundingBox:o.boundingBox?o.boundingBox.toJSON():void 0,boundingSphere:o.boundingSphere?o.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(o=>({...o})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function a(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=a(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let u=0,h=l.length;u<h;u++){const p=l[u];a(e.shapes,p)}else a(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,u=this.material.length;l<u;l++)o.push(a(e.materials,this.material[l]));r.material=o}else r.material=a(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];r.animations.push(a(e.animations,l))}}if(n){const o=s(e.geometries),l=s(e.materials),u=s(e.textures),h=s(e.images),p=s(e.shapes),g=s(e.skeletons),x=s(e.animations),b=s(e.nodes);o.length>0&&(i.geometries=o),l.length>0&&(i.materials=l),u.length>0&&(i.textures=u),h.length>0&&(i.images=h),p.length>0&&(i.shapes=p),g.length>0&&(i.skeletons=g),x.length>0&&(i.animations=x),b.length>0&&(i.nodes=b)}return i.object=r,i;function s(o){const l=[];for(const u in o){const h=o[u];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}xi.DEFAULT_UP=new se(0,1,0);xi.DEFAULT_MATRIX_AUTO_UPDATE=!0;xi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const hc=new se,mf=new se,MA=new se,gf=new se,xm=new se,ym=new se,FU=new se,_A=new se,TA=new se,wA=new se,AA=new Cn,EA=new Cn,CA=new Cn;class xo{constructor(e=new se,n=new se,i=new se){this.a=e,this.b=n,this.c=i}static getNormal(e,n,i,r){r.subVectors(i,n),hc.subVectors(e,n),r.cross(hc);const a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}static getBarycoord(e,n,i,r,a){hc.subVectors(r,n),mf.subVectors(i,n),MA.subVectors(e,n);const s=hc.dot(hc),o=hc.dot(mf),l=hc.dot(MA),u=mf.dot(mf),h=mf.dot(MA),p=s*u-o*o;if(p===0)return a.set(0,0,0),null;const g=1/p,x=(u*l-o*h)*g,b=(s*h-o*l)*g;return a.set(1-x-b,b,x)}static containsPoint(e,n,i,r){return this.getBarycoord(e,n,i,r,gf)===null?!1:gf.x>=0&&gf.y>=0&&gf.x+gf.y<=1}static getInterpolation(e,n,i,r,a,s,o,l){return this.getBarycoord(e,n,i,r,gf)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(a,gf.x),l.addScaledVector(s,gf.y),l.addScaledVector(o,gf.z),l)}static getInterpolatedAttribute(e,n,i,r,a,s){return AA.setScalar(0),EA.setScalar(0),CA.setScalar(0),AA.fromBufferAttribute(e,n),EA.fromBufferAttribute(e,i),CA.fromBufferAttribute(e,r),s.setScalar(0),s.addScaledVector(AA,a.x),s.addScaledVector(EA,a.y),s.addScaledVector(CA,a.z),s}static isFrontFacing(e,n,i,r){return hc.subVectors(i,n),mf.subVectors(e,n),hc.cross(mf).dot(r)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,r){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,n,i,r){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return hc.subVectors(this.c,this.b),mf.subVectors(this.a,this.b),hc.cross(mf).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return xo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return xo.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,i,r,a){return xo.getInterpolation(e,this.a,this.b,this.c,n,i,r,a)}containsPoint(e){return xo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return xo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const i=this.a,r=this.b,a=this.c;let s,o;xm.subVectors(r,i),ym.subVectors(a,i),_A.subVectors(e,i);const l=xm.dot(_A),u=ym.dot(_A);if(l<=0&&u<=0)return n.copy(i);TA.subVectors(e,r);const h=xm.dot(TA),p=ym.dot(TA);if(h>=0&&p<=h)return n.copy(r);const g=l*p-h*u;if(g<=0&&l>=0&&h<=0)return s=l/(l-h),n.copy(i).addScaledVector(xm,s);wA.subVectors(e,a);const x=xm.dot(wA),b=ym.dot(wA);if(b>=0&&x<=b)return n.copy(a);const M=x*u-l*b;if(M<=0&&u>=0&&b<=0)return o=u/(u-b),n.copy(i).addScaledVector(ym,o);const S=h*b-x*p;if(S<=0&&p-h>=0&&x-b>=0)return FU.subVectors(a,r),o=(p-h)/(p-h+(x-b)),n.copy(r).addScaledVector(FU,o);const T=1/(S+M+g);return s=M*T,o=g*T,n.copy(i).addScaledVector(xm,s).addScaledVector(ym,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const PH={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Rh={h:0,s:0,l:0},hS={h:0,s:0,l:0};function RA(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}let zt=class{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,i)}set(e,n,i){if(n===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,n,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Kn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,fi.colorSpaceToWorking(this,n),this}setRGB(e,n,i,r=fi.workingColorSpace){return this.r=e,this.g=n,this.b=i,fi.colorSpaceToWorking(this,r),this}setHSL(e,n,i,r=fi.workingColorSpace){if(e=WO(e,1),n=Mn(n,0,1),i=Mn(i,0,1),n===0)this.r=this.g=this.b=i;else{const a=i<=.5?i*(1+n):i+n-i*n,s=2*i-a;this.r=RA(s,a,e+1/3),this.g=RA(s,a,e),this.b=RA(s,a,e-1/3)}return fi.colorSpaceToWorking(this,r),this}setStyle(e,n=Kn){function i(a){a!==void 0&&parseFloat(a)<1&&Wt("Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const s=r[1],o=r[2];switch(s){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,n);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,n);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,n);break;default:Wt("Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=r[1],s=a.length;if(s===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,n);if(s===6)return this.setHex(parseInt(a,16),n);Wt("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=Kn){const i=PH[e.toLowerCase()];return i!==void 0?this.setHex(i,n):Wt("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=wf(e.r),this.g=wf(e.g),this.b=wf(e.b),this}copyLinearToSRGB(e){return this.r=lg(e.r),this.g=lg(e.g),this.b=lg(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Kn){return fi.workingToColorSpace(Ss.copy(this),e),Math.round(Mn(Ss.r*255,0,255))*65536+Math.round(Mn(Ss.g*255,0,255))*256+Math.round(Mn(Ss.b*255,0,255))}getHexString(e=Kn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=fi.workingColorSpace){fi.workingToColorSpace(Ss.copy(this),n);const i=Ss.r,r=Ss.g,a=Ss.b,s=Math.max(i,r,a),o=Math.min(i,r,a);let l,u;const h=(o+s)/2;if(o===s)l=0,u=0;else{const p=s-o;switch(u=h<=.5?p/(s+o):p/(2-s-o),s){case i:l=(r-a)/p+(r<a?6:0);break;case r:l=(a-i)/p+2;break;case a:l=(i-r)/p+4;break}l/=6}return e.h=l,e.s=u,e.l=h,e}getRGB(e,n=fi.workingColorSpace){return fi.workingToColorSpace(Ss.copy(this),n),e.r=Ss.r,e.g=Ss.g,e.b=Ss.b,e}getStyle(e=Kn){fi.workingToColorSpace(Ss.copy(this),e);const n=Ss.r,i=Ss.g,r=Ss.b;return e!==Kn?`color(${e} ${n.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,n,i){return this.getHSL(Rh),this.setHSL(Rh.h+e,Rh.s+n,Rh.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(Rh),e.getHSL(hS);const i=Ly(Rh.h,hS.h,n),r=Ly(Rh.s,hS.s,n),a=Ly(Rh.l,hS.l,n);return this.setHSL(i,r,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,i=this.g,r=this.b,a=e.elements;return this.r=a[0]*n+a[3]*i+a[6]*r,this.g=a[1]*n+a[4]*i+a[7]*r,this.b=a[2]*n+a[5]*i+a[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Ss=new zt;zt.NAMES=PH;let uee=0;class za extends tl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:uee++}),this.uuid=Wo(),this.name="",this.type="Material",this.blending=I0,this.side=_u,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=t_,this.blendDst=n_,this.blendEquation=zh,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new zt(0,0,0),this.blendAlpha=0,this.depthFunc=V0,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=wj,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=v0,this.stencilZFail=v0,this.stencilZPass=v0,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const i=e[n];if(i===void 0){Wt(`Material: parameter '${n}' has value of undefined.`);continue}const r=this[n];if(r===void 0){Wt(`Material: '${n}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(i.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(i.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==I0&&(i.blending=this.blending),this.side!==_u&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==t_&&(i.blendSrc=this.blendSrc),this.blendDst!==n_&&(i.blendDst=this.blendDst),this.blendEquation!==zh&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==V0&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==wj&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==v0&&(i.stencilFail=this.stencilFail),this.stencilZFail!==v0&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==v0&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(a){const s=[];for(const o in a){const l=a[o];delete l.metadata,s.push(l)}return s}if(n){const a=r(e.textures),s=r(e.images);a.length>0&&(i.textures=a),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let i=null;if(n!==null){const r=n.length;i=new Array(r);for(let a=0;a!==r;++a)i[a]=n[a].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Au extends za{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new zt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ko,this.combine=db,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Sf=fee();function fee(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):u<-14?(i[l]=1024>>-u-14,i[l|256]=1024>>-u-14|32768,r[l]=-u-1,r[l|256]=-u-1):u<=15?(i[l]=u+15<<10,i[l|256]=u+15<<10|32768,r[l]=13,r[l|256]=13):u<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,h=0;for(;(u&8388608)===0;)u<<=1,h-=8388608;u&=-8388609,h+=947912704,a[l]=u|h}for(let l=1024;l<2048;++l)a[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:a,exponentTable:s,offsetTable:o}}function go(t){Math.abs(t)>65504&&Wt("DataUtils.toHalfFloat(): Value out of range."),t=Mn(t,-65504,65504),Sf.floatView[0]=t;const e=Sf.uint32View[0],n=e>>23&511;return Sf.baseTable[n]+((e&8388607)>>Sf.shiftTable[n])}function Sy(t){const e=t>>10;return Sf.uint32View[0]=Sf.mantissaTable[Sf.offsetTable[e]+(t&1023)]+Sf.exponentTable[e],Sf.floatView[0]}class A0{static toHalfFloat(e){return go(e)}static fromHalfFloat(e){return Sy(e)}}const sa=new se,dS=new Ye;let hee=0;class yi{constructor(e,n,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:hee++}),this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=i,this.usage=o1,this.updateRanges=[],this.gpuType=fr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,i){e*=this.itemSize,i*=n.itemSize;for(let r=0,a=this.itemSize;r<a;r++)this.array[e+r]=n.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,i=this.count;n<i;n++)dS.fromBufferAttribute(this,n),dS.applyMatrix3(e),this.setXY(n,dS.x,dS.y);else if(this.itemSize===3)for(let n=0,i=this.count;n<i;n++)sa.fromBufferAttribute(this,n),sa.applyMatrix3(e),this.setXYZ(n,sa.x,sa.y,sa.z);return this}applyMatrix4(e){for(let n=0,i=this.count;n<i;n++)sa.fromBufferAttribute(this,n),sa.applyMatrix4(e),this.setXYZ(n,sa.x,sa.y,sa.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)sa.fromBufferAttribute(this,n),sa.applyNormalMatrix(e),this.setXYZ(n,sa.x,sa.y,sa.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)sa.fromBufferAttribute(this,n),sa.transformDirection(e),this.setXYZ(n,sa.x,sa.y,sa.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let i=this.array[e*this.itemSize+n];return this.normalized&&(i=Ks(i,this.array)),i}setComponent(e,n,i){return this.normalized&&(i=zn(i,this.array)),this.array[e*this.itemSize+n]=i,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=Ks(n,this.array)),n}setX(e,n){return this.normalized&&(n=zn(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=Ks(n,this.array)),n}setY(e,n){return this.normalized&&(n=zn(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=Ks(n,this.array)),n}setZ(e,n){return this.normalized&&(n=zn(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=Ks(n,this.array)),n}setW(e,n){return this.normalized&&(n=zn(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=zn(n,this.array),i=zn(i,this.array)),this.array[e+0]=n,this.array[e+1]=i,this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=zn(n,this.array),i=zn(i,this.array),r=zn(r,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,n,i,r,a){return e*=this.itemSize,this.normalized&&(n=zn(n,this.array),i=zn(i,this.array),r=zn(r,this.array),a=zn(a,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==o1&&(e.usage=this.usage),e}}class dee extends yi{constructor(e,n,i){super(new Int8Array(e),n,i)}}class pee extends yi{constructor(e,n,i){super(new Uint8Array(e),n,i)}}class mee extends yi{constructor(e,n,i){super(new Uint8ClampedArray(e),n,i)}}class gee extends yi{constructor(e,n,i){super(new Int16Array(e),n,i)}}class $O extends yi{constructor(e,n,i){super(new Uint16Array(e),n,i)}}class vee extends yi{constructor(e,n,i){super(new Int32Array(e),n,i)}}class YO extends yi{constructor(e,n,i){super(new Uint32Array(e),n,i)}}class xee extends yi{constructor(e,n,i){super(new Uint16Array(e),n,i),this.isFloat16BufferAttribute=!0}getX(e){let n=Sy(this.array[e*this.itemSize]);return this.normalized&&(n=Ks(n,this.array)),n}setX(e,n){return this.normalized&&(n=zn(n,this.array)),this.array[e*this.itemSize]=go(n),this}getY(e){let n=Sy(this.array[e*this.itemSize+1]);return this.normalized&&(n=Ks(n,this.array)),n}setY(e,n){return this.normalized&&(n=zn(n,this.array)),this.array[e*this.itemSize+1]=go(n),this}getZ(e){let n=Sy(this.array[e*this.itemSize+2]);return this.normalized&&(n=Ks(n,this.array)),n}setZ(e,n){return this.normalized&&(n=zn(n,this.array)),this.array[e*this.itemSize+2]=go(n),this}getW(e){let n=Sy(this.array[e*this.itemSize+3]);return this.normalized&&(n=Ks(n,this.array)),n}setW(e,n){return this.normalized&&(n=zn(n,this.array)),this.array[e*this.itemSize+3]=go(n),this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=zn(n,this.array),i=zn(i,this.array)),this.array[e+0]=go(n),this.array[e+1]=go(i),this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=zn(n,this.array),i=zn(i,this.array),r=zn(r,this.array)),this.array[e+0]=go(n),this.array[e+1]=go(i),this.array[e+2]=go(r),this}setXYZW(e,n,i,r,a){return e*=this.itemSize,this.normalized&&(n=zn(n,this.array),i=zn(i,this.array),r=zn(r,this.array),a=zn(a,this.array)),this.array[e+0]=go(n),this.array[e+1]=go(i),this.array[e+2]=go(r),this.array[e+3]=go(a),this}}class Qt extends yi{constructor(e,n,i){super(new Float32Array(e),n,i)}}let yee=0;const Ml=new un,jA=new xi,bm=new se,ko=new ea,Bx=new ea,Ua=new se;class An extends tl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:yee++}),this.uuid=Wo(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(NH(e)?YO:$O)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,i=0){this.groups.push({start:e,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const a=new Nn().getNormalMatrix(e);i.applyNormalMatrix(a),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ml.makeRotationFromQuaternion(e),this.applyMatrix4(Ml),this}rotateX(e){return Ml.makeRotationX(e),this.applyMatrix4(Ml),this}rotateY(e){return Ml.makeRotationY(e),this.applyMatrix4(Ml),this}rotateZ(e){return Ml.makeRotationZ(e),this.applyMatrix4(Ml),this}translate(e,n,i){return Ml.makeTranslation(e,n,i),this.applyMatrix4(Ml),this}scale(e,n,i){return Ml.makeScale(e,n,i),this.applyMatrix4(Ml),this}lookAt(e){return jA.lookAt(e),jA.updateMatrix(),this.applyMatrix4(jA.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(bm).negate(),this.translate(bm.x,bm.y,bm.z),this}setFromPoints(e){const n=this.getAttribute("position");if(n===void 0){const i=[];for(let r=0,a=e.length;r<a;r++){const s=e[r];i.push(s.x,s.y,s.z||0)}this.setAttribute("position",new Qt(i,3))}else{const i=Math.min(e.length,n.count);for(let r=0;r<i;r++){const a=e[r];n.setXYZ(r,a.x,a.y,a.z||0)}e.length>n.count&&Wt("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ea);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){wn("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new se(-1/0,-1/0,-1/0),new se(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let i=0,r=n.length;i<r;i++){const a=n[i];ko.setFromBufferAttribute(a),this.morphTargetsRelative?(Ua.addVectors(this.boundingBox.min,ko.min),this.boundingBox.expandByPoint(Ua),Ua.addVectors(this.boundingBox.max,ko.max),this.boundingBox.expandByPoint(Ua)):(this.boundingBox.expandByPoint(ko.min),this.boundingBox.expandByPoint(ko.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&wn('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new la);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){wn("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new se,1/0);return}if(e){const i=this.boundingSphere.center;if(ko.setFromBufferAttribute(e),n)for(let a=0,s=n.length;a<s;a++){const o=n[a];Bx.setFromBufferAttribute(o),this.morphTargetsRelative?(Ua.addVectors(ko.min,Bx.min),ko.expandByPoint(Ua),Ua.addVectors(ko.max,Bx.max),ko.expandByPoint(Ua)):(ko.expandByPoint(Bx.min),ko.expandByPoint(Bx.max))}ko.getCenter(i);let r=0;for(let a=0,s=e.count;a<s;a++)Ua.fromBufferAttribute(e,a),r=Math.max(r,i.distanceToSquared(Ua));if(n)for(let a=0,s=n.length;a<s;a++){const o=n[a],l=this.morphTargetsRelative;for(let u=0,h=o.count;u<h;u++)Ua.fromBufferAttribute(o,u),l&&(bm.fromBufferAttribute(e,u),Ua.add(bm)),r=Math.max(r,i.distanceToSquared(Ua))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&wn('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){wn("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=n.position,r=n.normal,a=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new yi(new Float32Array(4*i.count),4));const s=this.getAttribute("tangent"),o=[],l=[];for(let U=0;U<i.count;U++)o[U]=new se,l[U]=new se;const u=new se,h=new se,p=new se,g=new Ye,x=new Ye,b=new Ye,M=new se,S=new se;function T(U,I,L){u.fromBufferAttribute(i,U),h.fromBufferAttribute(i,I),p.fromBufferAttribute(i,L),g.fromBufferAttribute(a,U),x.fromBufferAttribute(a,I),b.fromBufferAttribute(a,L),h.sub(u),p.sub(u),x.sub(g),b.sub(g);const F=1/(x.x*b.y-b.x*x.y);isFinite(F)&&(M.copy(h).multiplyScalar(b.y).addScaledVector(p,-x.y).multiplyScalar(F),S.copy(p).multiplyScalar(x.x).addScaledVector(h,-b.x).multiplyScalar(F),o[U].add(M),o[I].add(M),o[L].add(M),l[U].add(S),l[I].add(S),l[L].add(S))}let A=this.groups;A.length===0&&(A=[{start:0,count:e.count}]);for(let U=0,I=A.length;U<I;++U){const L=A[U],F=L.start,G=L.count;for(let H=F,W=F+G;H<W;H+=3)T(e.getX(H+0),e.getX(H+1),e.getX(H+2))}const E=new se,j=new se,R=new se,C=new se;function D(U){R.fromBufferAttribute(r,U),C.copy(R);const I=o[U];E.copy(I),E.sub(R.multiplyScalar(R.dot(I))).normalize(),j.crossVectors(C,I);const F=j.dot(l[U])<0?-1:1;s.setXYZW(U,E.x,E.y,E.z,F)}for(let U=0,I=A.length;U<I;++U){const L=A[U],F=L.start,G=L.count;for(let H=F,W=F+G;H<W;H+=3)D(e.getX(H+0)),D(e.getX(H+1)),D(e.getX(H+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new yi(new Float32Array(n.count*3),3),this.setAttribute("normal",i);else for(let g=0,x=i.count;g<x;g++)i.setXYZ(g,0,0,0);const r=new se,a=new se,s=new se,o=new se,l=new se,u=new se,h=new se,p=new se;if(e)for(let g=0,x=e.count;g<x;g+=3){const b=e.getX(g+0),M=e.getX(g+1),S=e.getX(g+2);r.fromBufferAttribute(n,b),a.fromBufferAttribute(n,M),s.fromBufferAttribute(n,S),h.subVectors(s,a),p.subVectors(r,a),h.cross(p),o.fromBufferAttribute(i,b),l.fromBufferAttribute(i,M),u.fromBufferAttribute(i,S),o.add(h),l.add(h),u.add(h),i.setXYZ(b,o.x,o.y,o.z),i.setXYZ(M,l.x,l.y,l.z),i.setXYZ(S,u.x,u.y,u.z)}else for(let g=0,x=n.count;g<x;g+=3)r.fromBufferAttribute(n,g+0),a.fromBufferAttribute(n,g+1),s.fromBufferAttribute(n,g+2),h.subVectors(s,a),p.subVectors(r,a),h.cross(p),i.setXYZ(g+0,h.x,h.y,h.z),i.setXYZ(g+1,h.x,h.y,h.z),i.setXYZ(g+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,i=e.count;n<i;n++)Ua.fromBufferAttribute(e,n),Ua.normalize(),e.setXYZ(n,Ua.x,Ua.y,Ua.z)}toNonIndexed(){function e(o,l){const u=o.array,h=o.itemSize,p=o.normalized,g=new u.constructor(l.length*h);let x=0,b=0;for(let M=0,S=l.length;M<S;M++){o.isInterleavedBufferAttribute?x=l[M]*o.data.stride+o.offset:x=l[M]*h;for(let T=0;T<h;T++)g[b++]=u[x++]}return new yi(g,h,p)}if(this.index===null)return Wt("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new An,i=this.index.array,r=this.attributes;for(const o in r){const l=r[o],u=e(l,i);n.setAttribute(o,u)}const a=this.morphAttributes;for(const o in a){const l=[],u=a[o];for(let h=0,p=u.length;h<p;h++){const g=u[h],x=e(g,i);l.push(x)}n.morphAttributes[o]=l}n.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,l=s.length;o<l;o++){const u=s[o];n.addGroup(u.start,u.count,u.materialIndex)}return n}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const i=this.attributes;for(const l in i){const u=i[l];e.data.attributes[l]=u.toJSON(e.data)}const r={};let a=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],h=[];for(let p=0,g=u.length;p<g;p++){const x=u[p];h.push(x.toJSON(e.data))}h.length>0&&(r[l]=h,a=!0)}a&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere=o.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const r=e.attributes;for(const u in r){const h=r[u];this.setAttribute(u,h.clone(n))}const a=e.morphAttributes;for(const u in a){const h=[],p=a[u];for(let g=0,x=p.length;g<x;g++)h.push(p[g].clone(n));this.morphAttributes[u]=h}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let u=0,h=s.length;u<h;u++){const p=s[u];this.addGroup(p.start,p.count,p.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const GU=new un,Zd=new ip,pS=new la,VU=new se,mS=new se,gS=new se,vS=new se,NA=new se,xS=new se,HU=new se,yS=new se;class zi extends xi{constructor(e=new An,n=new Au){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}getVertexPosition(e,n){const i=this.geometry,r=i.attributes.position,a=i.morphAttributes.position,s=i.morphTargetsRelative;n.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(a&&o){xS.set(0,0,0);for(let l=0,u=a.length;l<u;l++){const h=o[l],p=a[l];h!==0&&(NA.fromBufferAttribute(p,e),s?xS.addScaledVector(NA,h):xS.addScaledVector(NA.sub(n),h))}n.add(xS)}return n}raycast(e,n){const i=this.geometry,r=this.material,a=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),pS.copy(i.boundingSphere),pS.applyMatrix4(a),Zd.copy(e.ray).recast(e.near),!(pS.containsPoint(Zd.origin)===!1&&(Zd.intersectSphere(pS,VU)===null||Zd.origin.distanceToSquared(VU)>(e.far-e.near)**2))&&(GU.copy(a).invert(),Zd.copy(e.ray).applyMatrix4(GU),!(i.boundingBox!==null&&Zd.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,n,Zd)))}_computeIntersections(e,n,i){let r;const a=this.geometry,s=this.material,o=a.index,l=a.attributes.position,u=a.attributes.uv,h=a.attributes.uv1,p=a.attributes.normal,g=a.groups,x=a.drawRange;if(o!==null)if(Array.isArray(s))for(let b=0,M=g.length;b<M;b++){const S=g[b],T=s[S.materialIndex],A=Math.max(S.start,x.start),E=Math.min(o.count,Math.min(S.start+S.count,x.start+x.count));for(let j=A,R=E;j<R;j+=3){const C=o.getX(j),D=o.getX(j+1),U=o.getX(j+2);r=bS(this,T,e,i,u,h,p,C,D,U),r&&(r.faceIndex=Math.floor(j/3),r.face.materialIndex=S.materialIndex,n.push(r))}}else{const b=Math.max(0,x.start),M=Math.min(o.count,x.start+x.count);for(let S=b,T=M;S<T;S+=3){const A=o.getX(S),E=o.getX(S+1),j=o.getX(S+2);r=bS(this,s,e,i,u,h,p,A,E,j),r&&(r.faceIndex=Math.floor(S/3),n.push(r))}}else if(l!==void 0)if(Array.isArray(s))for(let b=0,M=g.length;b<M;b++){const S=g[b],T=s[S.materialIndex],A=Math.max(S.start,x.start),E=Math.min(l.count,Math.min(S.start+S.count,x.start+x.count));for(let j=A,R=E;j<R;j+=3){const C=j,D=j+1,U=j+2;r=bS(this,T,e,i,u,h,p,C,D,U),r&&(r.faceIndex=Math.floor(j/3),r.face.materialIndex=S.materialIndex,n.push(r))}}else{const b=Math.max(0,x.start),M=Math.min(l.count,x.start+x.count);for(let S=b,T=M;S<T;S+=3){const A=S,E=S+1,j=S+2;r=bS(this,s,e,i,u,h,p,A,E,j),r&&(r.faceIndex=Math.floor(S/3),n.push(r))}}}}function bee(t,e,n,i,r,a,s,o){let l;if(e.side===Hr?l=i.intersectTriangle(s,a,r,!0,o):l=i.intersectTriangle(r,a,s,e.side===_u,o),l===null)return null;yS.copy(o),yS.applyMatrix4(t.matrixWorld);const u=n.ray.origin.distanceTo(yS);return u<n.near||u>n.far?null:{distance:u,point:yS.clone(),object:t}}function bS(t,e,n,i,r,a,s,o,l,u){t.getVertexPosition(o,mS),t.getVertexPosition(l,gS),t.getVertexPosition(u,vS);const h=bee(t,e,n,i,mS,gS,vS,HU);if(h){const p=new se;xo.getBarycoord(HU,mS,gS,vS,p),r&&(h.uv=xo.getInterpolatedAttribute(r,o,l,u,p,new Ye)),a&&(h.uv1=xo.getInterpolatedAttribute(a,o,l,u,p,new Ye)),s&&(h.normal=xo.getInterpolatedAttribute(s,o,l,u,p,new se),h.normal.dot(i.direction)>0&&h.normal.multiplyScalar(-1));const g={a:o,b:l,c:u,normal:new se,materialIndex:0};xo.getNormal(mS,gS,vS,g.normal),h.face=g,h.barycoord=p}return h}class rp extends An{constructor(e=1,n=1,i=1,r=1,a=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:r,heightSegments:a,depthSegments:s};const o=this;r=Math.floor(r),a=Math.floor(a),s=Math.floor(s);const l=[],u=[],h=[],p=[];let g=0,x=0;b("z","y","x",-1,-1,i,n,e,s,a,0),b("z","y","x",1,-1,i,n,-e,s,a,1),b("x","z","y",1,1,e,i,n,r,s,2),b("x","z","y",1,-1,e,i,-n,r,s,3),b("x","y","z",1,-1,e,n,i,r,a,4),b("x","y","z",-1,-1,e,n,-i,r,a,5),this.setIndex(l),this.setAttribute("position",new Qt(u,3)),this.setAttribute("normal",new Qt(h,3)),this.setAttribute("uv",new Qt(p,2));function b(M,S,T,A,E,j,R,C,D,U,I){const L=j/D,F=R/U,G=j/2,H=R/2,W=C/2,Y=D+1,k=U+1;let $=0,ee=0;const te=new se;for(let ae=0;ae<k;ae++){const q=ae*F-H;for(let K=0;K<Y;K++){const ie=K*L-G;te[M]=ie*A,te[S]=q*E,te[T]=W,u.push(te.x,te.y,te.z),te[M]=0,te[S]=0,te[T]=C>0?1:-1,h.push(te.x,te.y,te.z),p.push(K/D),p.push(1-ae/U),$+=1}}for(let ae=0;ae<U;ae++)for(let q=0;q<D;q++){const K=g+q+Y*ae,ie=g+q+Y*(ae+1),ue=g+(q+1)+Y*(ae+1),me=g+(q+1)+Y*ae;l.push(K,ie,me),l.push(ie,ue,me),ee+=6}o.addGroup(x,ee,I),x+=ee,g+=$}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rp(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function yg(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(Wt("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][i]=null):e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function $s(t){const e={};for(let n=0;n<t.length;n++){const i=yg(t[n]);for(const r in i)e[r]=i[r]}return e}function See(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function IH(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:fi.workingColorSpace}const u1={clone:yg,merge:$s};var Mee=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,_ee=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class di extends za{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Mee,this.fragmentShader=_ee,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=yg(e.uniforms),this.uniformsGroups=See(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const r in this.uniforms){const s=this.uniforms[r].value;s&&s.isTexture?n.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?n.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?n.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?n.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?n.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?n.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?n.uniforms[r]={type:"m4",value:s.toArray()}:n.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(n.extensions=i),n}}let vb=class extends xi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new un,this.projectionMatrix=new un,this.projectionMatrixInverse=new un,this.coordinateSystem=Ho,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}};const jh=new se,qU=new Ye,WU=new Ye;let Ji=class extends vb{constructor(e=50,n=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=vg*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(U0*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return vg*2*Math.atan(Math.tan(U0*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,i){jh.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(jh.x,jh.y).multiplyScalar(-e/jh.z),jh.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(jh.x,jh.y).multiplyScalar(-e/jh.z)}getViewSize(e,n){return this.getViewBounds(e,qU,WU),n.subVectors(WU,qU)}setViewOffset(e,n,i,r,a,s){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(U0*.5*this.fov)/this.zoom,i=2*n,r=this.aspect*i,a=-.5*r;const s=this.view;if(this.view!==null&&this.view.enabled){const l=s.fullWidth,u=s.fullHeight;a+=s.offsetX*r/l,n-=s.offsetY*i/u,r*=s.width/l,i*=s.height/u}const o=this.filmOffset;o!==0&&(a+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,n,n-i,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}};const Sm=-90,Mm=1;class ZO extends xi{constructor(e,n,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Ji(Sm,Mm,e,n);r.layers=this.layers,this.add(r);const a=new Ji(Sm,Mm,e,n);a.layers=this.layers,this.add(a);const s=new Ji(Sm,Mm,e,n);s.layers=this.layers,this.add(s);const o=new Ji(Sm,Mm,e,n);o.layers=this.layers,this.add(o);const l=new Ji(Sm,Mm,e,n);l.layers=this.layers,this.add(l);const u=new Ji(Sm,Mm,e,n);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[i,r,a,s,o,l]=n;for(const u of n)this.remove(u);if(e===Ho)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===mg)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of n)this.add(u),u.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,s,o,l,u,h]=this.children,p=e.getRenderTarget(),g=e.getActiveCubeFace(),x=e.getActiveMipmapLevel(),b=e.xr.enabled;e.xr.enabled=!1;const M=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(n,a),e.setRenderTarget(i,1,r),e.render(n,s),e.setRenderTarget(i,2,r),e.render(n,o),e.setRenderTarget(i,3,r),e.render(n,l),e.setRenderTarget(i,4,r),e.render(n,u),i.texture.generateMipmaps=M,e.setRenderTarget(i,5,r),e.render(n,h),e.setRenderTarget(p,g,x),e.xr.enabled=b,i.texture.needsPMREMUpdate=!0}}class xb extends ji{constructor(e=[],n=Tu,i,r,a,s,o,l,u,h){super(e,n,i,r,a,s,o,l,u,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class uT extends Ei{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new xb(r),this._setTextureOptions(n),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new rp(5,5,5),a=new di({name:"CubemapFromEquirect",uniforms:yg(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Hr,blending:_r});a.uniforms.tEquirect.value=n;const s=new zi(r,a),o=n.minFilter;return n.minFilter===Sc&&(n.minFilter=Rn),new ZO(1,10,this).update(e,s),n.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,n=!0,i=!0,r=!0){const a=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(n,i,r);e.setRenderTarget(a)}}class Qm extends xi{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Tee={type:"move"};class WM{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Qm,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Qm,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new se,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new se),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Qm,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new se,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new se),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const i of e.hand.values())this._getHandJoint(n,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,i){let r=null,a=null,s=null;const o=this._targetRay,l=this._grip,u=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(u&&e.hand){s=!0;for(const M of e.hand.values()){const S=n.getJointPose(M,i),T=this._getHandJoint(u,M);S!==null&&(T.matrix.fromArray(S.transform.matrix),T.matrix.decompose(T.position,T.rotation,T.scale),T.matrixWorldNeedsUpdate=!0,T.jointRadius=S.radius),T.visible=S!==null}const h=u.joints["index-finger-tip"],p=u.joints["thumb-tip"],g=h.position.distanceTo(p.position),x=.02,b=.005;u.inputState.pinching&&g>x+b?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&g<=x-b&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(a=n.getPose(e.gripSpace,i),a!==null&&(l.matrix.fromArray(a.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,a.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(a.linearVelocity)):l.hasLinearVelocity=!1,a.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(a.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(r=n.getPose(e.targetRaySpace,i),r===null&&a!==null&&(r=a),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Tee)))}return o!==null&&(o.visible=r!==null),l!==null&&(l.visible=a!==null),u!==null&&(u.visible=s!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const i=new Qm;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[n.jointName]=i,e.add(i)}return e.joints[n.jointName]}}class fT{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new zt(e),this.density=n}clone(){return new fT(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class hT{constructor(e,n=1,i=1e3){this.isFog=!0,this.name="",this.color=new zt(e),this.near=n,this.far=i}clone(){return new hT(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Zh extends xi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ko,this.environmentIntensity=1,this.environmentRotation=new Ko,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class dT{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=o1,this.updateRanges=[],this.version=0,this.uuid=Wo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,i){e*=this.stride,i*=n.stride;for(let r=0,a=this.stride;r<a;r++)this.array[e+r]=n.array[i+r];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Wo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(n,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Wo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Xs=new se;class qo{constructor(e,n,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,i=this.data.count;n<i;n++)Xs.fromBufferAttribute(this,n),Xs.applyMatrix4(e),this.setXYZ(n,Xs.x,Xs.y,Xs.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)Xs.fromBufferAttribute(this,n),Xs.applyNormalMatrix(e),this.setXYZ(n,Xs.x,Xs.y,Xs.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)Xs.fromBufferAttribute(this,n),Xs.transformDirection(e),this.setXYZ(n,Xs.x,Xs.y,Xs.z);return this}getComponent(e,n){let i=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(i=Ks(i,this.array)),i}setComponent(e,n,i){return this.normalized&&(i=zn(i,this.array)),this.data.array[e*this.data.stride+this.offset+n]=i,this}setX(e,n){return this.normalized&&(n=zn(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=zn(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=zn(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=zn(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=Ks(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=Ks(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=Ks(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=Ks(n,this.array)),n}setXY(e,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=zn(n,this.array),i=zn(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this}setXYZ(e,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=zn(n,this.array),i=zn(i,this.array),r=zn(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,n,i,r,a){return e=e*this.data.stride+this.offset,this.normalized&&(n=zn(n,this.array),i=zn(i,this.array),r=zn(r,this.array),a=zn(a,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=a,this}clone(e){if(e===void 0){c1("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[r+a])}return new yi(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new qo(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){c1("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[r+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class KO extends za{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new zt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let _m;const zx=new se,Tm=new se,wm=new se,Am=new Ye,kx=new Ye,UH=new un,SS=new se,Fx=new se,MS=new se,XU=new Ye,OA=new Ye,$U=new Ye;class LH extends xi{constructor(e=new KO){if(super(),this.isSprite=!0,this.type="Sprite",_m===void 0){_m=new An;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new dT(n,5);_m.setIndex([0,1,2,0,2,3]),_m.setAttribute("position",new qo(i,3,0,!1)),_m.setAttribute("uv",new qo(i,2,3,!1))}this.geometry=_m,this.material=e,this.center=new Ye(.5,.5),this.count=1}raycast(e,n){e.camera===null&&wn('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Tm.setFromMatrixScale(this.matrixWorld),UH.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),wm.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Tm.multiplyScalar(-wm.z);const i=this.material.rotation;let r,a;i!==0&&(a=Math.cos(i),r=Math.sin(i));const s=this.center;_S(SS.set(-.5,-.5,0),wm,s,Tm,r,a),_S(Fx.set(.5,-.5,0),wm,s,Tm,r,a),_S(MS.set(.5,.5,0),wm,s,Tm,r,a),XU.set(0,0),OA.set(1,0),$U.set(1,1);let o=e.ray.intersectTriangle(SS,Fx,MS,!1,zx);if(o===null&&(_S(Fx.set(-.5,.5,0),wm,s,Tm,r,a),OA.set(0,1),o=e.ray.intersectTriangle(SS,MS,Fx,!1,zx),o===null))return;const l=e.ray.origin.distanceTo(zx);l<e.near||l>e.far||n.push({distance:l,point:zx.clone(),uv:xo.getInterpolation(zx,SS,Fx,MS,XU,OA,$U,new Ye),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function _S(t,e,n,i,r,a){Am.subVectors(t,n).addScalar(.5).multiply(i),r!==void 0?(kx.x=a*Am.x-r*Am.y,kx.y=r*Am.x+a*Am.y):kx.copy(Am),t.copy(e),t.x+=kx.x,t.y+=kx.y,t.applyMatrix4(UH)}const TS=new se,YU=new se;class BH extends xi{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let i=0,r=n.length;i<r;i++){const a=n[i];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,i=0){n=Math.abs(n);const r=this.levels;let a;for(a=0;a<r.length&&!(n<r[a].distance);a++);return r.splice(a,0,{distance:n,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const n=this.levels;for(let i=0;i<n.length;i++)if(n[i].distance===e){const r=n.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let i,r;for(i=1,r=n.length;i<r;i++){let a=n[i].distance;if(n[i].object.visible&&(a-=a*n[i].hysteresis),e<a)break}return n[i-1].object}return null}raycast(e,n){if(this.levels.length>0){TS.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(TS);this.getObjectForDistance(r).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){TS.setFromMatrixPosition(e.matrixWorld),YU.setFromMatrixPosition(this.matrixWorld);const i=TS.distanceTo(YU)/e.zoom;n[0].object.visible=!0;let r,a;for(r=1,a=n.length;r<a;r++){let s=n[r].distance;if(n[r].object.visible&&(s-=s*n[r].hysteresis),i>=s)n[r-1].object.visible=!1,n[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<a;r++)n[r].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const i=this.levels;for(let r=0,a=i.length;r<a;r++){const s=i[r];n.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return n}}const ZU=new se,KU=new Cn,QU=new Cn,wee=new se,JU=new un,wS=new se,DA=new la,e8=new un,PA=new ip;class zH extends zi{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=_j,this.bindMatrix=new un,this.bindMatrixInverse=new un,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ea),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)this.getVertexPosition(i,wS),this.boundingBox.expandByPoint(wS)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new la),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)this.getVertexPosition(i,wS),this.boundingSphere.expandByPoint(wS)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),DA.copy(this.boundingSphere),DA.applyMatrix4(r),e.ray.intersectsSphere(DA)!==!1&&(e8.copy(r).invert(),PA.copy(e.ray).applyMatrix4(e8),!(this.boundingBox!==null&&PA.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,PA)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Cn,n=this.geometry.attributes.skinWeight;for(let i=0,r=n.count;i<r;i++){e.fromBufferAttribute(n,i);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),n.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===_j?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===yH?this.bindMatrixInverse.copy(this.bindMatrix).invert():Wt("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const i=this.skeleton,r=this.geometry;KU.fromBufferAttribute(r.attributes.skinIndex,e),QU.fromBufferAttribute(r.attributes.skinWeight,e),ZU.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let a=0;a<4;a++){const s=QU.getComponent(a);if(s!==0){const o=KU.getComponent(a);JU.multiplyMatrices(i.bones[o].matrixWorld,i.boneInverses[o]),n.addScaledVector(wee.copy(ZU).applyMatrix4(JU),s)}}return n.applyMatrix4(this.bindMatrixInverse)}}class QO extends xi{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Xo extends ji{constructor(e=null,n=1,i=1,r,a,s,o,l,u=Ir,h=Ir,p,g){super(null,s,o,l,u,h,r,a,p,g),this.isDataTexture=!0,this.image={data:e,width:n,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const t8=new un,Aee=new un;class pT{constructor(e=[],n=[]){this.uuid=Wo(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){Wt("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new un)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const i=new un;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,n=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let a=0,s=e.length;a<s;a++){const o=e[a]?e[a].matrixWorld:Aee;t8.multiplyMatrices(o,n[a]),t8.toArray(i,a*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new pT(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const i=new Xo(n,e,e,Sr,fr);return i.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=i,this}getBoneByName(e){for(let n=0,i=this.bones.length;n<i;n++){const r=this.bones[n];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const a=e.bones[i];let s=n[a];s===void 0&&(Wt("Skeleton: No bone found with UUID:",a),s=new QO),this.bones.push(s),this.boneInverses.push(new un().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,i=this.boneInverses;for(let r=0,a=n.length;r<a;r++){const s=n[r];e.bones.push(s.uuid);const o=i[r];e.boneInverses.push(o.toArray())}return e}}class $0 extends yi{constructor(e,n,i,r=1){super(e,n,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Em=new un,n8=new un,AS=[],i8=new ea,Eee=new un,Gx=new zi,Vx=new la;class kH extends zi{constructor(e,n,i){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new $0(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,Eee)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new ea),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,Em),i8.copy(e.boundingBox).applyMatrix4(Em),this.boundingBox.union(i8)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new la),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,Em),Vx.copy(e.boundingSphere).applyMatrix4(Em),this.boundingSphere.union(Vx)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,n){const i=n.morphTargetInfluences,r=this.morphTexture.source.data.data,a=i.length+1,s=e*a+1;for(let o=0;o<i.length;o++)i[o]=r[s+o]}raycast(e,n){const i=this.matrixWorld,r=this.count;if(Gx.geometry=this.geometry,Gx.material=this.material,Gx.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Vx.copy(this.boundingSphere),Vx.applyMatrix4(i),e.ray.intersectsSphere(Vx)!==!1))for(let a=0;a<r;a++){this.getMatrixAt(a,Em),n8.multiplyMatrices(i,Em),Gx.matrixWorld=n8,Gx.raycast(e,AS);for(let s=0,o=AS.length;s<o;s++){const l=AS[s];l.instanceId=a,l.object=this,n.push(l)}AS.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new $0(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,n){const i=n.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Xo(new Float32Array(r*this.count),r,this.count,np,fr));const a=this.morphTexture.source.data.data;let s=0;for(let u=0;u<i.length;u++)s+=i[u];const o=this.geometry.morphTargetsRelative?1:1-s,l=r*e;a[l]=o,a.set(i,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const IA=new se,Cee=new se,Ree=new Nn;class hu{constructor(e=new se(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,r){return this.normal.set(e,n,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const r=IA.subVectors(i,n).cross(Cee.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const i=e.delta(IA),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/r;return a<0||a>1?null:n.copy(e.start).addScaledVector(i,a)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||Ree.getNormalMatrix(e),r=this.coplanarPoint(IA).applyMatrix4(e),a=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Kd=new la,jee=new Ye(.5,.5),ES=new se;class Qg{constructor(e=new hu,n=new hu,i=new hu,r=new hu,a=new hu,s=new hu){this.planes=[e,n,i,r,a,s]}set(e,n,i,r,a,s){const o=this.planes;return o[0].copy(e),o[1].copy(n),o[2].copy(i),o[3].copy(r),o[4].copy(a),o[5].copy(s),this}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,n=Ho,i=!1){const r=this.planes,a=e.elements,s=a[0],o=a[1],l=a[2],u=a[3],h=a[4],p=a[5],g=a[6],x=a[7],b=a[8],M=a[9],S=a[10],T=a[11],A=a[12],E=a[13],j=a[14],R=a[15];if(r[0].setComponents(u-s,x-h,T-b,R-A).normalize(),r[1].setComponents(u+s,x+h,T+b,R+A).normalize(),r[2].setComponents(u+o,x+p,T+M,R+E).normalize(),r[3].setComponents(u-o,x-p,T-M,R-E).normalize(),i)r[4].setComponents(l,g,S,j).normalize(),r[5].setComponents(u-l,x-g,T-S,R-j).normalize();else if(r[4].setComponents(u-l,x-g,T-S,R-j).normalize(),n===Ho)r[5].setComponents(u+l,x+g,T+S,R+j).normalize();else if(n===mg)r[5].setComponents(l,g,S,j).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Kd.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Kd.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Kd)}intersectsSprite(e){Kd.center.set(0,0,0);const n=jee.distanceTo(e.center);return Kd.radius=.7071067811865476+n,Kd.applyMatrix4(e.matrixWorld),this.intersectsSphere(Kd)}intersectsSphere(e){const n=this.planes,i=e.center,r=-e.radius;for(let a=0;a<6;a++)if(n[a].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const r=n[i];if(ES.x=r.normal.x>0?e.max.x:e.min.x,ES.y=r.normal.y>0?e.max.y:e.min.y,ES.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(ES)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const su=new un,ou=new Qg;class mT{constructor(){this.coordinateSystem=Ho}intersectsObject(e,n){if(!n.isArrayCamera||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){const r=n.cameras[i];if(su.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),ou.setFromProjectionMatrix(su,r.coordinateSystem,r.reversedDepth),ou.intersectsObject(e))return!0}return!1}intersectsSprite(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){const r=n.cameras[i];if(su.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),ou.setFromProjectionMatrix(su,r.coordinateSystem,r.reversedDepth),ou.intersectsSprite(e))return!0}return!1}intersectsSphere(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){const r=n.cameras[i];if(su.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),ou.setFromProjectionMatrix(su,r.coordinateSystem,r.reversedDepth),ou.intersectsSphere(e))return!0}return!1}intersectsBox(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){const r=n.cameras[i];if(su.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),ou.setFromProjectionMatrix(su,r.coordinateSystem,r.reversedDepth),ou.intersectsBox(e))return!0}return!1}containsPoint(e,n){if(!n||!n.cameras||n.cameras.length===0)return!1;for(let i=0;i<n.cameras.length;i++){const r=n.cameras[i];if(su.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),ou.setFromProjectionMatrix(su,r.coordinateSystem,r.reversedDepth),ou.containsPoint(e))return!0}return!1}clone(){return new mT}}function UA(t,e){return t-e}function Nee(t,e){return t.z-e.z}function Oee(t,e){return e.z-t.z}class Dee{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n,i,r){const a=this.pool,s=this.list;this.index>=a.length&&a.push({start:-1,count:-1,z:-1,index:-1});const o=a[this.index];s.push(o),this.index++,o.start=e,o.count=n,o.z=i,o.index=r}reset(){this.list.length=0,this.index=0}}const po=new un,Pee=new zt(1,1,1),r8=new Qg,Iee=new mT,CS=new ea,Qd=new la,Hx=new se,a8=new se,Uee=new se,LA=new Dee,Ms=new zi,RS=[];function Lee(t,e,n=0){const i=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const r=t.count;for(let a=0;a<r;a++)for(let s=0;s<i;s++)e.setComponent(a+n,s,t.getComponent(a,s))}else e.array.set(t.array,n*i);e.needsUpdate=!0}function Jd(t,e){if(t.constructor!==e.constructor){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++)e[i]=t[i]}else{const n=Math.min(t.length,e.length);e.set(new t.constructor(t.buffer,0,n))}}class FH extends zi{constructor(e,n,i=n*2,r){super(new An,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=n,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),i=new Xo(n,e,e,Sr,fr);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Uint32Array(e*e),i=new Xo(n,e,e,mb,Ac);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Float32Array(e*e*4).fill(1),i=new Xo(n,e,e,Sr,fr);i.colorSpace=fi.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const n=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const s=e.getAttribute(a),{array:o,itemSize:l,normalized:u}=s,h=new o.constructor(i*l),p=new yi(h,l,u);n.setAttribute(a,p)}if(e.getIndex()!==null){const a=i>65535?new Uint32Array(r):new Uint16Array(r);n.setIndex(new yi(a,1))}this._geometryInitialized=!0}}_validateGeometry(e){const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in n.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),a=n.getAttribute(i);if(r.itemSize!==a.itemSize||r.normalized!==a.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const n=this._instanceInfo;if(e<0||e>=n.length||n[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const n=this._geometryInfo;if(e<0||e>=n.length||n[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ea);const e=this.boundingBox,n=this._instanceInfo;e.makeEmpty();for(let i=0,r=n.length;i<r;i++){if(n[i].active===!1)continue;const a=n[i].geometryIndex;this.getMatrixAt(i,po),this.getBoundingBoxAt(a,CS).applyMatrix4(po),e.union(CS)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new la);const e=this.boundingSphere,n=this._instanceInfo;e.makeEmpty();for(let i=0,r=n.length;i<r;i++){if(n[i].active===!1)continue;const a=n[i].geometryIndex;this.getMatrixAt(i,po),this.getBoundingSphereAt(a,Qd).applyMatrix4(po),e.union(Qd)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(UA),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const a=this._matricesTexture;po.identity().toArray(a.image.data,r*16),a.needsUpdate=!0;const s=this._colorsTexture;return s&&(Pee.toArray(s.image.data,r*4),s.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,n=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=n===-1?e.getAttribute("position").count:n;const s=e.getIndex();if(s!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?s.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(UA),l=this._availableGeometryIds.shift(),a[l]=r):(l=this._geometryCount,this._geometryCount++,a.push(r)),this.setGeometryAt(l,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,l}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const i=this.geometry,r=i.getIndex()!==null,a=i.getIndex(),s=n.getIndex(),o=this._geometryInfo[e];if(r&&s.count>o.reservedIndexCount||n.attributes.position.count>o.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=o.vertexStart,u=o.reservedVertexCount;o.vertexCount=n.getAttribute("position").count;for(const h in i.attributes){const p=n.getAttribute(h),g=i.getAttribute(h);Lee(p,g,l);const x=p.itemSize;for(let b=p.count,M=u;b<M;b++){const S=l+b;for(let T=0;T<x;T++)g.setComponent(S,T,0)}g.needsUpdate=!0,g.addUpdateRange(l*x,u*x)}if(r){const h=o.indexStart,p=o.reservedIndexCount;o.indexCount=n.getIndex().count;for(let g=0;g<s.count;g++)a.setX(h+g,l+s.getX(g));for(let g=s.count,x=p;g<x;g++)a.setX(h+g,l);a.needsUpdate=!0,a.addUpdateRange(h,o.reservedIndexCount)}return o.start=r?o.indexStart:o.vertexStart,o.count=r?o.indexCount:o.vertexCount,o.boundingBox=null,n.boundingBox!==null&&(o.boundingBox=n.boundingBox.clone()),o.boundingSphere=null,n.boundingSphere!==null&&(o.boundingSphere=n.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._geometryInfo;if(e>=n.length||n[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,a=i.length;r<a;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return n[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,n=0;const i=this._geometryInfo,r=i.map((s,o)=>o).sort((s,o)=>i[s].vertexStart-i[o].vertexStart),a=this.geometry;for(let s=0,o=i.length;s<o;s++){const l=r[s],u=i[l];if(u.active!==!1){if(a.index!==null){if(u.indexStart!==n){const{indexStart:h,vertexStart:p,reservedIndexCount:g}=u,x=a.index,b=x.array,M=e-p;for(let S=h;S<h+g;S++)b[S]=b[S]+M;x.array.copyWithin(n,h,h+g),x.addUpdateRange(n,g),u.indexStart=n}n+=u.reservedIndexCount}if(u.vertexStart!==e){const{vertexStart:h,reservedVertexCount:p}=u,g=a.attributes;for(const x in g){const b=g[x],{array:M,itemSize:S}=b;M.copyWithin(e*S,h*S,(h+p)*S),b.addUpdateRange(e*S,p*S)}u.vertexStart=e}e+=u.reservedVertexCount,u.start=a.index?u.indexStart:u.vertexStart,this._nextIndexStart=a.index?u.indexStart+u.reservedIndexCount:0,this._nextVertexStart=u.vertexStart+u.reservedVertexCount}}return this}getBoundingBoxAt(e,n){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const a=new ea,s=i.index,o=i.attributes.position;for(let l=r.start,u=r.start+r.count;l<u;l++){let h=l;s&&(h=s.getX(h)),a.expandByPoint(Hx.fromBufferAttribute(o,h))}r.boundingBox=a}return n.copy(r.boundingBox),n}getBoundingSphereAt(e,n){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const a=new la;this.getBoundingBoxAt(e,CS),CS.getCenter(a.center);const s=i.index,o=i.attributes.position;let l=0;for(let u=r.start,h=r.start+r.count;u<h;u++){let p=u;s&&(p=s.getX(p)),Hx.fromBufferAttribute(o,p),l=Math.max(l,a.center.distanceToSquared(Hx))}a.radius=Math.sqrt(l),r.boundingSphere=a}return n.copy(r.boundingSphere),n}setMatrixAt(e,n){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return n.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,n){return this.validateInstanceId(e),n.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,n){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),n.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,n){return this.validateInstanceId(e),n.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,n){return this.validateInstanceId(e),this._instanceInfo[e].visible===n?this:(this._instanceInfo[e].visible=n,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,n){return this.validateInstanceId(e),this.validateGeometryId(n),this._instanceInfo[e].geometryIndex=n,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,n={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return n.vertexStart=i.vertexStart,n.vertexCount=i.vertexCount,n.reservedVertexCount=i.reservedVertexCount,n.indexStart=i.indexStart,n.indexCount=i.indexCount,n.reservedIndexCount=i.reservedIndexCount,n.start=i.start,n.count=i.count,n}setInstanceCount(e){const n=this._availableInstanceIds,i=this._instanceInfo;for(n.sort(UA);n[n.length-1]===i.length-1;)i.pop(),n.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),a=new Int32Array(e);Jd(this._multiDrawCounts,r),Jd(this._multiDrawStarts,a),this._multiDrawCounts=r,this._multiDrawStarts=a,this._maxInstanceCount=e;const s=this._indirectTexture,o=this._matricesTexture,l=this._colorsTexture;s.dispose(),this._initIndirectTexture(),Jd(s.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),Jd(o.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),Jd(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,n){const i=[...this._geometryInfo].filter(o=>o.active);if(Math.max(...i.map(o=>o.vertexStart+o.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${n}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(l=>l.indexStart+l.reservedIndexCount))>n)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${n}. Cannot shrink further.`);const a=this.geometry;a.dispose(),this._maxVertexCount=e,this._maxIndexCount=n,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new An,this._initializeGeometry(a));const s=this.geometry;a.index&&Jd(a.index.array,s.index.array);for(const o in a.attributes)Jd(a.attributes[o].array,s.attributes[o].array)}raycast(e,n){const i=this._instanceInfo,r=this._geometryInfo,a=this.matrixWorld,s=this.geometry;Ms.material=this.material,Ms.geometry.index=s.index,Ms.geometry.attributes=s.attributes,Ms.geometry.boundingBox===null&&(Ms.geometry.boundingBox=new ea),Ms.geometry.boundingSphere===null&&(Ms.geometry.boundingSphere=new la);for(let o=0,l=i.length;o<l;o++){if(!i[o].visible||!i[o].active)continue;const u=i[o].geometryIndex,h=r[u];Ms.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(o,Ms.matrixWorld).premultiply(a),this.getBoundingBoxAt(u,Ms.geometry.boundingBox),this.getBoundingSphereAt(u,Ms.geometry.boundingSphere),Ms.raycast(e,RS);for(let p=0,g=RS.length;p<g;p++){const x=RS[p];x.object=this,x.batchId=o,n.push(x)}RS.length=0}Ms.material=null,Ms.geometry.index=null,Ms.geometry.attributes={},Ms.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(n=>({...n,boundingBox:n.boundingBox!==null?n.boundingBox.clone():null,boundingSphere:n.boundingSphere!==null?n.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(n=>({...n})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,n,i,r,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=r.getIndex(),o=s===null?1:s.array.BYTES_PER_ELEMENT,l=this._instanceInfo,u=this._multiDrawStarts,h=this._multiDrawCounts,p=this._geometryInfo,g=this.perObjectFrustumCulled,x=this._indirectTexture,b=x.image.data,M=i.isArrayCamera?Iee:r8;g&&!i.isArrayCamera&&(po.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),r8.setFromProjectionMatrix(po,i.coordinateSystem,i.reversedDepth));let S=0;if(this.sortObjects){po.copy(this.matrixWorld).invert(),Hx.setFromMatrixPosition(i.matrixWorld).applyMatrix4(po),a8.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(po);for(let E=0,j=l.length;E<j;E++)if(l[E].visible&&l[E].active){const R=l[E].geometryIndex;this.getMatrixAt(E,po),this.getBoundingSphereAt(R,Qd).applyMatrix4(po);let C=!1;if(g&&(C=!M.intersectsSphere(Qd,i)),!C){const D=p[R],U=Uee.subVectors(Qd.center,Hx).dot(a8);LA.push(D.start,D.count,U,E)}}const T=LA.list,A=this.customSort;A===null?T.sort(a.transparent?Oee:Nee):A.call(this,T,i);for(let E=0,j=T.length;E<j;E++){const R=T[E];u[S]=R.start*o,h[S]=R.count,b[S]=R.index,S++}LA.reset()}else for(let T=0,A=l.length;T<A;T++)if(l[T].visible&&l[T].active){const E=l[T].geometryIndex;let j=!1;if(g&&(this.getMatrixAt(T,po),this.getBoundingSphereAt(E,Qd).applyMatrix4(po),j=!M.intersectsSphere(Qd,i)),!j){const R=p[E];u[S]=R.start*o,h[S]=R.count,b[S]=T,S++}}x.needsUpdate=!0,this._multiDrawCount=S,this._visibilityChanged=!1}onBeforeShadow(e,n,i,r,a,s){this.onBeforeRender(e,null,r,a,s)}}class Js extends za{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new zt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const B_=new se,z_=new se,s8=new un,qx=new ip,jS=new la,BA=new se,o8=new se;let Kh=class extends xi{constructor(e=new An,n=new Js){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[0];for(let r=1,a=n.count;r<a;r++)B_.fromBufferAttribute(n,r-1),z_.fromBufferAttribute(n,r),i[r]=i[r-1],i[r]+=B_.distanceTo(z_);e.setAttribute("lineDistance",new Qt(i,1))}else Wt("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,a=e.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),jS.copy(i.boundingSphere),jS.applyMatrix4(r),jS.radius+=a,e.ray.intersectsSphere(jS)===!1)return;s8.copy(r).invert(),qx.copy(e.ray).applyMatrix4(s8);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=this.isLineSegments?2:1,h=i.index,g=i.attributes.position;if(h!==null){const x=Math.max(0,s.start),b=Math.min(h.count,s.start+s.count);for(let M=x,S=b-1;M<S;M+=u){const T=h.getX(M),A=h.getX(M+1),E=NS(this,e,qx,l,T,A,M);E&&n.push(E)}if(this.isLineLoop){const M=h.getX(b-1),S=h.getX(x),T=NS(this,e,qx,l,M,S,b-1);T&&n.push(T)}}else{const x=Math.max(0,s.start),b=Math.min(g.count,s.start+s.count);for(let M=x,S=b-1;M<S;M+=u){const T=NS(this,e,qx,l,M,M+1,M);T&&n.push(T)}if(this.isLineLoop){const M=NS(this,e,qx,l,b-1,x,b-1);M&&n.push(M)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}};function NS(t,e,n,i,r,a,s){const o=t.geometry.attributes.position;if(B_.fromBufferAttribute(o,r),z_.fromBufferAttribute(o,a),n.distanceSqToSegment(B_,z_,BA,o8)>i)return;BA.applyMatrix4(t.matrixWorld);const u=e.ray.origin.distanceTo(BA);if(!(u<e.near||u>e.far))return{distance:u,point:o8.clone().applyMatrix4(t.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:t}}const l8=new se,c8=new se;class Eu extends Kh{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[];for(let r=0,a=n.count;r<a;r+=2)l8.fromBufferAttribute(n,r),c8.fromBufferAttribute(n,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+l8.distanceTo(c8);e.setAttribute("lineDistance",new Qt(i,1))}else Wt("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class GH extends Kh{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class JO extends za{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new zt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const u8=new un,Ej=new ip,OS=new la,DS=new se;class VH extends xi{constructor(e=new An,n=new JO){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const i=this.geometry,r=this.matrixWorld,a=e.params.Points.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),OS.copy(i.boundingSphere),OS.applyMatrix4(r),OS.radius+=a,e.ray.intersectsSphere(OS)===!1)return;u8.copy(r).invert(),Ej.copy(e.ray).applyMatrix4(u8);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=i.index,p=i.attributes.position;if(u!==null){const g=Math.max(0,s.start),x=Math.min(u.count,s.start+s.count);for(let b=g,M=x;b<M;b++){const S=u.getX(b);DS.fromBufferAttribute(p,S),f8(DS,S,l,r,e,n,this)}}else{const g=Math.max(0,s.start),x=Math.min(p.count,s.start+s.count);for(let b=g,M=x;b<M;b++)DS.fromBufferAttribute(p,b),f8(DS,b,l,r,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=r.length;a<s;a++){const o=r[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}function f8(t,e,n,i,r,a,s){const o=Ej.distanceSqToPoint(t);if(o<n){const l=new se;Ej.closestPointToPoint(t,l),l.applyMatrix4(i);const u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;a.push({distance:u,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:s})}}class HH extends ji{constructor(e,n,i,r,a=Rn,s=Rn,o,l,u){super(e,n,i,r,a,s,o,l,u),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const h=this;function p(){h.needsUpdate=!0,h._requestVideoFrameCallbackId=e.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(p))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class Bee extends HH{constructor(e,n,i,r,a,s,o,l){super({},e,n,i,r,a,s,o,l),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class zee extends ji{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=Ir,this.minFilter=Ir,this.generateMipmaps=!1,this.needsUpdate=!0}}class gT extends ji{constructor(e,n,i,r,a,s,o,l,u,h,p,g){super(null,s,o,l,u,h,r,a,p,g),this.isCompressedTexture=!0,this.image={width:n,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class kee extends gT{constructor(e,n,i,r,a,s){super(e,n,i,a,s),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=qr,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Fee extends gT{constructor(e,n,i){super(void 0,e[0].width,e[0].height,n,i,Tu),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Ba extends ji{constructor(e,n,i,r,a,s,o,l,u){super(e,n,i,r,a,s,o,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Jg extends ji{constructor(e,n,i=Ac,r,a,s,o=Ir,l=Ir,u,h=W0,p=1){if(h!==W0&&h!==X0)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const g={width:e,height:n,depth:p};super(g,r,a,s,o,l,h,i,u),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new kh(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class eD extends ji{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class vT extends An{constructor(e=1,n=1,i=4,r=8,a=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:n,capSegments:i,radialSegments:r,heightSegments:a},n=Math.max(0,n),i=Math.max(1,Math.floor(i)),r=Math.max(3,Math.floor(r)),a=Math.max(1,Math.floor(a));const s=[],o=[],l=[],u=[],h=n/2,p=Math.PI/2*e,g=n,x=2*p+g,b=i*2+a,M=r+1,S=new se,T=new se;for(let A=0;A<=b;A++){let E=0,j=0,R=0,C=0;if(A<=i){const I=A/i,L=I*Math.PI/2;j=-h-e*Math.cos(L),R=e*Math.sin(L),C=-e*Math.cos(L),E=I*p}else if(A<=i+a){const I=(A-i)/a;j=-h+I*n,R=e,C=0,E=p+I*g}else{const I=(A-i-a)/i,L=I*Math.PI/2;j=h+e*Math.sin(L),R=e*Math.cos(L),C=e*Math.sin(L),E=p+g+I*p}const D=Math.max(0,Math.min(1,E/x));let U=0;A===0?U=.5/r:A===b&&(U=-.5/r);for(let I=0;I<=r;I++){const L=I/r,F=L*Math.PI*2,G=Math.sin(F),H=Math.cos(F);T.x=-R*H,T.y=j,T.z=R*G,o.push(T.x,T.y,T.z),S.set(-R*H,C,R*G),S.normalize(),l.push(S.x,S.y,S.z),u.push(L+U,D)}if(A>0){const I=(A-1)*M;for(let L=0;L<r;L++){const F=I+L,G=I+L+1,H=A*M+L,W=A*M+L+1;s.push(F,G,H),s.push(G,W,H)}}}this.setIndex(s),this.setAttribute("position",new Qt(o,3)),this.setAttribute("normal",new Qt(l,3)),this.setAttribute("uv",new Qt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vT(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class xT extends An{constructor(e=1,n=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:i,thetaLength:r},n=Math.max(3,n);const a=[],s=[],o=[],l=[],u=new se,h=new Ye;s.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let p=0,g=3;p<=n;p++,g+=3){const x=i+p/n*r;u.x=e*Math.cos(x),u.y=e*Math.sin(x),s.push(u.x,u.y,u.z),o.push(0,0,1),h.x=(s[g]/e+1)/2,h.y=(s[g+1]/e+1)/2,l.push(h.x,h.y)}for(let p=1;p<=n;p++)a.push(p,p+1,0);this.setIndex(a),this.setAttribute("position",new Qt(s,3)),this.setAttribute("normal",new Qt(o,3)),this.setAttribute("uv",new Qt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xT(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class yb extends An{constructor(e=1,n=1,i=1,r=32,a=1,s=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:i,radialSegments:r,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:l};const u=this;r=Math.floor(r),a=Math.floor(a);const h=[],p=[],g=[],x=[];let b=0;const M=[],S=i/2;let T=0;A(),s===!1&&(e>0&&E(!0),n>0&&E(!1)),this.setIndex(h),this.setAttribute("position",new Qt(p,3)),this.setAttribute("normal",new Qt(g,3)),this.setAttribute("uv",new Qt(x,2));function A(){const j=new se,R=new se;let C=0;const D=(n-e)/i;for(let U=0;U<=a;U++){const I=[],L=U/a,F=L*(n-e)+e;for(let G=0;G<=r;G++){const H=G/r,W=H*l+o,Y=Math.sin(W),k=Math.cos(W);R.x=F*Y,R.y=-L*i+S,R.z=F*k,p.push(R.x,R.y,R.z),j.set(Y,D,k).normalize(),g.push(j.x,j.y,j.z),x.push(H,1-L),I.push(b++)}M.push(I)}for(let U=0;U<r;U++)for(let I=0;I<a;I++){const L=M[I][U],F=M[I+1][U],G=M[I+1][U+1],H=M[I][U+1];(e>0||I!==0)&&(h.push(L,F,H),C+=3),(n>0||I!==a-1)&&(h.push(F,G,H),C+=3)}u.addGroup(T,C,0),T+=C}function E(j){const R=b,C=new Ye,D=new se;let U=0;const I=j===!0?e:n,L=j===!0?1:-1;for(let G=1;G<=r;G++)p.push(0,S*L,0),g.push(0,L,0),x.push(.5,.5),b++;const F=b;for(let G=0;G<=r;G++){const W=G/r*l+o,Y=Math.cos(W),k=Math.sin(W);D.x=I*k,D.y=S*L,D.z=I*Y,p.push(D.x,D.y,D.z),g.push(0,L,0),C.x=Y*.5+.5,C.y=k*.5*L+.5,x.push(C.x,C.y),b++}for(let G=0;G<r;G++){const H=R+G,W=F+G;j===!0?h.push(W,W+1,H):h.push(W+1,W,H),U+=3}u.addGroup(T,U,j===!0?1:2),T+=U}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yb(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class bb extends yb{constructor(e=1,n=1,i=32,r=1,a=!1,s=0,o=Math.PI*2){super(0,e,n,i,r,a,s,o),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:o}}static fromJSON(e){return new bb(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class td extends An{constructor(e=[],n=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:i,detail:r};const a=[],s=[];o(r),u(i),h(),this.setAttribute("position",new Qt(a,3)),this.setAttribute("normal",new Qt(a.slice(),3)),this.setAttribute("uv",new Qt(s,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function o(A){const E=new se,j=new se,R=new se;for(let C=0;C<n.length;C+=3)x(n[C+0],E),x(n[C+1],j),x(n[C+2],R),l(E,j,R,A)}function l(A,E,j,R){const C=R+1,D=[];for(let U=0;U<=C;U++){D[U]=[];const I=A.clone().lerp(j,U/C),L=E.clone().lerp(j,U/C),F=C-U;for(let G=0;G<=F;G++)G===0&&U===C?D[U][G]=I:D[U][G]=I.clone().lerp(L,G/F)}for(let U=0;U<C;U++)for(let I=0;I<2*(C-U)-1;I++){const L=Math.floor(I/2);I%2===0?(g(D[U][L+1]),g(D[U+1][L]),g(D[U][L])):(g(D[U][L+1]),g(D[U+1][L+1]),g(D[U+1][L]))}}function u(A){const E=new se;for(let j=0;j<a.length;j+=3)E.x=a[j+0],E.y=a[j+1],E.z=a[j+2],E.normalize().multiplyScalar(A),a[j+0]=E.x,a[j+1]=E.y,a[j+2]=E.z}function h(){const A=new se;for(let E=0;E<a.length;E+=3){A.x=a[E+0],A.y=a[E+1],A.z=a[E+2];const j=S(A)/2/Math.PI+.5,R=T(A)/Math.PI+.5;s.push(j,1-R)}b(),p()}function p(){for(let A=0;A<s.length;A+=6){const E=s[A+0],j=s[A+2],R=s[A+4],C=Math.max(E,j,R),D=Math.min(E,j,R);C>.9&&D<.1&&(E<.2&&(s[A+0]+=1),j<.2&&(s[A+2]+=1),R<.2&&(s[A+4]+=1))}}function g(A){a.push(A.x,A.y,A.z)}function x(A,E){const j=A*3;E.x=e[j+0],E.y=e[j+1],E.z=e[j+2]}function b(){const A=new se,E=new se,j=new se,R=new se,C=new Ye,D=new Ye,U=new Ye;for(let I=0,L=0;I<a.length;I+=9,L+=6){A.set(a[I+0],a[I+1],a[I+2]),E.set(a[I+3],a[I+4],a[I+5]),j.set(a[I+6],a[I+7],a[I+8]),C.set(s[L+0],s[L+1]),D.set(s[L+2],s[L+3]),U.set(s[L+4],s[L+5]),R.copy(A).add(E).add(j).divideScalar(3);const F=S(R);M(C,L+0,A,F),M(D,L+2,E,F),M(U,L+4,j,F)}}function M(A,E,j,R){R<0&&A.x===1&&(s[E]=A.x-1),j.x===0&&j.z===0&&(s[E]=R/2/Math.PI+.5)}function S(A){return Math.atan2(A.z,-A.x)}function T(A){return Math.atan2(-A.y,Math.sqrt(A.x*A.x+A.z*A.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new td(e.vertices,e.indices,e.radius,e.details)}}class yT extends td{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=1/i,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,s,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new yT(e.radius,e.detail)}}const PS=new se,IS=new se,zA=new se,US=new xo;class qH extends An{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const r=Math.pow(10,4),a=Math.cos(U0*n),s=e.getIndex(),o=e.getAttribute("position"),l=s?s.count:o.count,u=[0,0,0],h=["a","b","c"],p=new Array(3),g={},x=[];for(let b=0;b<l;b+=3){s?(u[0]=s.getX(b),u[1]=s.getX(b+1),u[2]=s.getX(b+2)):(u[0]=b,u[1]=b+1,u[2]=b+2);const{a:M,b:S,c:T}=US;if(M.fromBufferAttribute(o,u[0]),S.fromBufferAttribute(o,u[1]),T.fromBufferAttribute(o,u[2]),US.getNormal(zA),p[0]=`${Math.round(M.x*r)},${Math.round(M.y*r)},${Math.round(M.z*r)}`,p[1]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,p[2]=`${Math.round(T.x*r)},${Math.round(T.y*r)},${Math.round(T.z*r)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let A=0;A<3;A++){const E=(A+1)%3,j=p[A],R=p[E],C=US[h[A]],D=US[h[E]],U=`${j}_${R}`,I=`${R}_${j}`;I in g&&g[I]?(zA.dot(g[I].normal)<=a&&(x.push(C.x,C.y,C.z),x.push(D.x,D.y,D.z)),g[I]=null):U in g||(g[U]={index0:u[A],index1:u[E],normal:zA.clone()})}}for(const b in g)if(g[b]){const{index0:M,index1:S}=g[b];PS.fromBufferAttribute(o,M),IS.fromBufferAttribute(o,S),x.push(PS.x,PS.y,PS.z),x.push(IS.x,IS.y,IS.z)}this.setAttribute("position",new Qt(x,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}let Ec=class{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){Wt("Curve: .getPoint() not implemented.")}getPointAt(e,n){const i=this.getUtoTmapping(e);return this.getPoint(i,n)}getPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return n}getSpacedPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPointAt(i/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let i,r=this.getPoint(0),a=0;n.push(0);for(let s=1;s<=e;s++)i=this.getPoint(s/e),a+=i.distanceTo(r),n.push(a),r=i;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n=null){const i=this.getLengths();let r=0;const a=i.length;let s;n?s=n:s=e*i[a-1];let o=0,l=a-1,u;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),u=i[r]-s,u<0)o=r+1;else if(u>0)l=r-1;else{l=r;break}if(r=l,i[r]===s)return r/(a-1);const h=i[r],g=i[r+1]-h,x=(s-h)/g;return(r+x)/(a-1)}getTangent(e,n){let r=e-1e-4,a=e+1e-4;r<0&&(r=0),a>1&&(a=1);const s=this.getPoint(r),o=this.getPoint(a),l=n||(s.isVector2?new Ye:new se);return l.copy(o).sub(s).normalize(),l}getTangentAt(e,n){const i=this.getUtoTmapping(e);return this.getTangent(i,n)}computeFrenetFrames(e,n=!1){const i=new se,r=[],a=[],s=[],o=new se,l=new un;for(let x=0;x<=e;x++){const b=x/e;r[x]=this.getTangentAt(b,new se)}a[0]=new se,s[0]=new se;let u=Number.MAX_VALUE;const h=Math.abs(r[0].x),p=Math.abs(r[0].y),g=Math.abs(r[0].z);h<=u&&(u=h,i.set(1,0,0)),p<=u&&(u=p,i.set(0,1,0)),g<=u&&i.set(0,0,1),o.crossVectors(r[0],i).normalize(),a[0].crossVectors(r[0],o),s[0].crossVectors(r[0],a[0]);for(let x=1;x<=e;x++){if(a[x]=a[x-1].clone(),s[x]=s[x-1].clone(),o.crossVectors(r[x-1],r[x]),o.length()>Number.EPSILON){o.normalize();const b=Math.acos(Mn(r[x-1].dot(r[x]),-1,1));a[x].applyMatrix4(l.makeRotationAxis(o,b))}s[x].crossVectors(r[x],a[x])}if(n===!0){let x=Math.acos(Mn(a[0].dot(a[e]),-1,1));x/=e,r[0].dot(o.crossVectors(a[0],a[e]))>0&&(x=-x);for(let b=1;b<=e;b++)a[b].applyMatrix4(l.makeRotationAxis(r[b],x*b)),s[b].crossVectors(r[b],a[b])}return{tangents:r,normals:a,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}};class bT extends Ec{constructor(e=0,n=0,i=1,r=1,a=0,s=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=i,this.yRadius=r,this.aStartAngle=a,this.aEndAngle=s,this.aClockwise=o,this.aRotation=l}getPoint(e,n=new Ye){const i=n,r=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const s=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=r;for(;a>r;)a-=r;a<Number.EPSILON&&(s?a=0:a=r),this.aClockwise===!0&&!s&&(a===r?a=-r:a=a-r);const o=this.aStartAngle+e*a;let l=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const h=Math.cos(this.aRotation),p=Math.sin(this.aRotation),g=l-this.aX,x=u-this.aY;l=g*h-x*p+this.aX,u=g*p+x*h+this.aY}return i.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class WH extends bT{constructor(e,n,i,r,a,s){super(e,n,i,i,r,a,s),this.isArcCurve=!0,this.type="ArcCurve"}}function tD(){let t=0,e=0,n=0,i=0;function r(a,s,o,l){t=a,e=o,n=-3*a+3*s-2*o-l,i=2*a-2*s+o+l}return{initCatmullRom:function(a,s,o,l,u){r(s,o,u*(o-a),u*(l-s))},initNonuniformCatmullRom:function(a,s,o,l,u,h,p){let g=(s-a)/u-(o-a)/(u+h)+(o-s)/h,x=(o-s)/h-(l-s)/(h+p)+(l-o)/p;g*=h,x*=h,r(s,o,g,x)},calc:function(a){const s=a*a,o=s*a;return t+e*a+n*s+i*o}}}const LS=new se,kA=new tD,FA=new tD,GA=new tD;class ST extends Ec{constructor(e=[],n=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=i,this.tension=r}getPoint(e,n=new se){const i=n,r=this.points,a=r.length,s=(a-(this.closed?0:1))*e;let o=Math.floor(s),l=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/a)+1)*a:l===0&&o===a-1&&(o=a-2,l=1);let u,h;this.closed||o>0?u=r[(o-1)%a]:(LS.subVectors(r[0],r[1]).add(r[0]),u=LS);const p=r[o%a],g=r[(o+1)%a];if(this.closed||o+2<a?h=r[(o+2)%a]:(LS.subVectors(r[a-1],r[a-2]).add(r[a-1]),h=LS),this.curveType==="centripetal"||this.curveType==="chordal"){const x=this.curveType==="chordal"?.5:.25;let b=Math.pow(u.distanceToSquared(p),x),M=Math.pow(p.distanceToSquared(g),x),S=Math.pow(g.distanceToSquared(h),x);M<1e-4&&(M=1),b<1e-4&&(b=M),S<1e-4&&(S=M),kA.initNonuniformCatmullRom(u.x,p.x,g.x,h.x,b,M,S),FA.initNonuniformCatmullRom(u.y,p.y,g.y,h.y,b,M,S),GA.initNonuniformCatmullRom(u.z,p.z,g.z,h.z,b,M,S)}else this.curveType==="catmullrom"&&(kA.initCatmullRom(u.x,p.x,g.x,h.x,this.tension),FA.initCatmullRom(u.y,p.y,g.y,h.y,this.tension),GA.initCatmullRom(u.z,p.z,g.z,h.z,this.tension));return i.set(kA.calc(l),FA.calc(l),GA.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new se().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function h8(t,e,n,i,r){const a=(i-e)*.5,s=(r-n)*.5,o=t*t,l=t*o;return(2*n-2*i+a+s)*l+(-3*n+3*i-2*a-s)*o+a*t+n}function Gee(t,e){const n=1-t;return n*n*e}function Vee(t,e){return 2*(1-t)*t*e}function Hee(t,e){return t*t*e}function By(t,e,n,i){return Gee(t,e)+Vee(t,n)+Hee(t,i)}function qee(t,e){const n=1-t;return n*n*n*e}function Wee(t,e){const n=1-t;return 3*n*n*t*e}function Xee(t,e){return 3*(1-t)*t*t*e}function $ee(t,e){return t*t*t*e}function zy(t,e,n,i,r){return qee(t,e)+Wee(t,n)+Xee(t,i)+$ee(t,r)}class nD extends Ec{constructor(e=new Ye,n=new Ye,i=new Ye,r=new Ye){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new Ye){const i=n,r=this.v0,a=this.v1,s=this.v2,o=this.v3;return i.set(zy(e,r.x,a.x,s.x,o.x),zy(e,r.y,a.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class XH extends Ec{constructor(e=new se,n=new se,i=new se,r=new se){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=i,this.v3=r}getPoint(e,n=new se){const i=n,r=this.v0,a=this.v1,s=this.v2,o=this.v3;return i.set(zy(e,r.x,a.x,s.x,o.x),zy(e,r.y,a.y,s.y,o.y),zy(e,r.z,a.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class iD extends Ec{constructor(e=new Ye,n=new Ye){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new Ye){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new Ye){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $H extends Ec{constructor(e=new se,n=new se){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new se){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new se){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class rD extends Ec{constructor(e=new Ye,n=new Ye,i=new Ye){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new Ye){const i=n,r=this.v0,a=this.v1,s=this.v2;return i.set(By(e,r.x,a.x,s.x),By(e,r.y,a.y,s.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class aD extends Ec{constructor(e=new se,n=new se,i=new se){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new se){const i=n,r=this.v0,a=this.v1,s=this.v2;return i.set(By(e,r.x,a.x,s.x),By(e,r.y,a.y,s.y),By(e,r.z,a.z,s.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sD extends Ec{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new Ye){const i=n,r=this.points,a=(r.length-1)*e,s=Math.floor(a),o=a-s,l=r[s===0?s:s-1],u=r[s],h=r[s>r.length-2?r.length-1:s+1],p=r[s>r.length-3?r.length-1:s+2];return i.set(h8(o,l.x,u.x,h.x,p.x),h8(o,l.y,u.y,h.y,p.y)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const r=this.points[n];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const r=e.points[n];this.points.push(new Ye().fromArray(r))}return this}}var k_=Object.freeze({__proto__:null,ArcCurve:WH,CatmullRomCurve3:ST,CubicBezierCurve:nD,CubicBezierCurve3:XH,EllipseCurve:bT,LineCurve:iD,LineCurve3:$H,QuadraticBezierCurve:rD,QuadraticBezierCurve3:aD,SplineCurve:sD});class YH extends Ec{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new k_[i](n,e))}return this}getPoint(e,n){const i=e*this.getLength(),r=this.getCurveLengths();let a=0;for(;a<r.length;){if(r[a]>=i){const s=r[a]-i,o=this.curves[a],l=o.getLength(),u=l===0?0:1-s/l;return o.getPointAt(u,n)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let i=0,r=this.curves.length;i<r;i++)n+=this.curves[i].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let i;for(let r=0,a=this.curves;r<a.length;r++){const s=a[r],o=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,l=s.getPoints(o);for(let u=0;u<l.length;u++){const h=l[u];i&&i.equals(h)||(n.push(h),i=h)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,i=this.curves.length;n<i;n++){const r=this.curves[n];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const r=e.curves[n];this.curves.push(new k_[r.type]().fromJSON(r))}return this}}let F_=class extends YH{constructor(e){super(),this.type="Path",this.currentPoint=new Ye,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,i=e.length;n<i;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const i=new iD(this.currentPoint.clone(),new Ye(e,n));return this.curves.push(i),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,i,r){const a=new rD(this.currentPoint.clone(),new Ye(e,n),new Ye(i,r));return this.curves.push(a),this.currentPoint.set(i,r),this}bezierCurveTo(e,n,i,r,a,s){const o=new nD(this.currentPoint.clone(),new Ye(e,n),new Ye(i,r),new Ye(a,s));return this.curves.push(o),this.currentPoint.set(a,s),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),i=new sD(n);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,i,r,a,s){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,n+l,i,r,a,s),this}absarc(e,n,i,r,a,s){return this.absellipse(e,n,i,i,r,a,s),this}ellipse(e,n,i,r,a,s,o,l){const u=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+u,n+h,i,r,a,s,o,l),this}absellipse(e,n,i,r,a,s,o,l){const u=new bT(e,n,i,r,a,s,o,l);if(this.curves.length>0){const p=u.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(u);const h=u.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},Af=class extends F_{constructor(e){super(e),this.uuid=Wo(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let i=0,r=this.holes.length;i<r;i++)n[i]=this.holes[i].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,i=this.holes.length;n<i;n++){const r=this.holes[n];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const r=e.holes[n];this.holes.push(new F_().fromJSON(r))}return this}};function Yee(t,e,n=2){const i=e&&e.length,r=i?e[0]*n:t.length;let a=ZH(t,0,r,n,!0);const s=[];if(!a||a.next===a.prev)return s;let o,l,u;if(i&&(a=ete(t,e,a,n)),t.length>80*n){o=t[0],l=t[1];let h=o,p=l;for(let g=n;g<r;g+=n){const x=t[g],b=t[g+1];x<o&&(o=x),b<l&&(l=b),x>h&&(h=x),b>p&&(p=b)}u=Math.max(h-o,p-l),u=u!==0?32767/u:0}return f1(a,s,n,o,l,u,0),s}function ZH(t,e,n,i,r){let a;if(r===fte(t,e,n,i)>0)for(let s=e;s<n;s+=i)a=d8(s/i|0,t[s],t[s+1],a);else for(let s=n-i;s>=e;s-=i)a=d8(s/i|0,t[s],t[s+1],a);return a&&bg(a,a.next)&&(d1(a),a=a.next),a}function Y0(t,e){if(!t)return t;e||(e=t);let n=t,i;do if(i=!1,!n.steiner&&(bg(n,n.next)||Nr(n.prev,n,n.next)===0)){if(d1(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function f1(t,e,n,i,r,a,s){if(!t)return;!s&&a&&ate(t,i,r,a);let o=t;for(;t.prev!==t.next;){const l=t.prev,u=t.next;if(a?Kee(t,i,r,a):Zee(t)){e.push(l.i,t.i,u.i),d1(t),t=u.next,o=u.next;continue}if(t=u,t===o){s?s===1?(t=Qee(Y0(t),e),f1(t,e,n,i,r,a,2)):s===2&&Jee(t,e,n,i,r,a):f1(Y0(t),e,n,i,r,a,1);break}}}function Zee(t){const e=t.prev,n=t,i=t.next;if(Nr(e,n,i)>=0)return!1;const r=e.x,a=n.x,s=i.x,o=e.y,l=n.y,u=i.y,h=Math.min(r,a,s),p=Math.min(o,l,u),g=Math.max(r,a,s),x=Math.max(o,l,u);let b=i.next;for(;b!==e;){if(b.x>=h&&b.x<=g&&b.y>=p&&b.y<=x&&My(r,o,a,l,s,u,b.x,b.y)&&Nr(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function Kee(t,e,n,i){const r=t.prev,a=t,s=t.next;if(Nr(r,a,s)>=0)return!1;const o=r.x,l=a.x,u=s.x,h=r.y,p=a.y,g=s.y,x=Math.min(o,l,u),b=Math.min(h,p,g),M=Math.max(o,l,u),S=Math.max(h,p,g),T=Cj(x,b,e,n,i),A=Cj(M,S,e,n,i);let E=t.prevZ,j=t.nextZ;for(;E&&E.z>=T&&j&&j.z<=A;){if(E.x>=x&&E.x<=M&&E.y>=b&&E.y<=S&&E!==r&&E!==s&&My(o,h,l,p,u,g,E.x,E.y)&&Nr(E.prev,E,E.next)>=0||(E=E.prevZ,j.x>=x&&j.x<=M&&j.y>=b&&j.y<=S&&j!==r&&j!==s&&My(o,h,l,p,u,g,j.x,j.y)&&Nr(j.prev,j,j.next)>=0))return!1;j=j.nextZ}for(;E&&E.z>=T;){if(E.x>=x&&E.x<=M&&E.y>=b&&E.y<=S&&E!==r&&E!==s&&My(o,h,l,p,u,g,E.x,E.y)&&Nr(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;j&&j.z<=A;){if(j.x>=x&&j.x<=M&&j.y>=b&&j.y<=S&&j!==r&&j!==s&&My(o,h,l,p,u,g,j.x,j.y)&&Nr(j.prev,j,j.next)>=0)return!1;j=j.nextZ}return!0}function Qee(t,e){let n=t;do{const i=n.prev,r=n.next.next;!bg(i,r)&&QH(i,n,n.next,r)&&h1(i,r)&&h1(r,i)&&(e.push(i.i,n.i,r.i),d1(n),d1(n.next),n=t=r),n=n.next}while(n!==t);return Y0(n)}function Jee(t,e,n,i,r,a){let s=t;do{let o=s.next.next;for(;o!==s.prev;){if(s.i!==o.i&&lte(s,o)){let l=JH(s,o);s=Y0(s,s.next),l=Y0(l,l.next),f1(s,e,n,i,r,a,0),f1(l,e,n,i,r,a,0);return}o=o.next}s=s.next}while(s!==t)}function ete(t,e,n,i){const r=[];for(let a=0,s=e.length;a<s;a++){const o=e[a]*i,l=a<s-1?e[a+1]*i:t.length,u=ZH(t,o,l,i,!1);u===u.next&&(u.steiner=!0),r.push(ote(u))}r.sort(tte);for(let a=0;a<r.length;a++)n=nte(r[a],n);return n}function tte(t,e){let n=t.x-e.x;if(n===0&&(n=t.y-e.y,n===0)){const i=(t.next.y-t.y)/(t.next.x-t.x),r=(e.next.y-e.y)/(e.next.x-e.x);n=i-r}return n}function nte(t,e){const n=ite(t,e);if(!n)return e;const i=JH(n,t);return Y0(i,i.next),Y0(n,n.next)}function ite(t,e){let n=e;const i=t.x,r=t.y;let a=-1/0,s;if(bg(t,n))return n;do{if(bg(t,n.next))return n.next;if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const p=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(p<=i&&p>a&&(a=p,s=n.x<n.next.x?n:n.next,p===i))return s}n=n.next}while(n!==e);if(!s)return null;const o=s,l=s.x,u=s.y;let h=1/0;n=s;do{if(i>=n.x&&n.x>=l&&i!==n.x&&KH(r<u?i:a,r,l,u,r<u?a:i,r,n.x,n.y)){const p=Math.abs(r-n.y)/(i-n.x);h1(n,t)&&(p<h||p===h&&(n.x>s.x||n.x===s.x&&rte(s,n)))&&(s=n,h=p)}n=n.next}while(n!==o);return s}function rte(t,e){return Nr(t.prev,t,e.prev)<0&&Nr(e.next,t,t.next)<0}function ate(t,e,n,i){let r=t;do r.z===0&&(r.z=Cj(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,ste(r)}function ste(t){let e,n=1;do{let i=t,r;t=null;let a=null;for(e=0;i;){e++;let s=i,o=0;for(let u=0;u<n&&(o++,s=s.nextZ,!!s);u++);let l=n;for(;o>0||l>0&&s;)o!==0&&(l===0||!s||i.z<=s.z)?(r=i,i=i.nextZ,o--):(r=s,s=s.nextZ,l--),a?a.nextZ=r:t=r,r.prevZ=a,a=r;i=s}a.nextZ=null,n*=2}while(e>1);return t}function Cj(t,e,n,i,r){return t=(t-n)*r|0,e=(e-i)*r|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function ote(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function KH(t,e,n,i,r,a,s,o){return(r-s)*(e-o)>=(t-s)*(a-o)&&(t-s)*(i-o)>=(n-s)*(e-o)&&(n-s)*(a-o)>=(r-s)*(i-o)}function My(t,e,n,i,r,a,s,o){return!(t===s&&e===o)&&KH(t,e,n,i,r,a,s,o)}function lte(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!cte(t,e)&&(h1(t,e)&&h1(e,t)&&ute(t,e)&&(Nr(t.prev,t,e.prev)||Nr(t,e.prev,e))||bg(t,e)&&Nr(t.prev,t,t.next)>0&&Nr(e.prev,e,e.next)>0)}function Nr(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function bg(t,e){return t.x===e.x&&t.y===e.y}function QH(t,e,n,i){const r=zS(Nr(t,e,n)),a=zS(Nr(t,e,i)),s=zS(Nr(n,i,t)),o=zS(Nr(n,i,e));return!!(r!==a&&s!==o||r===0&&BS(t,n,e)||a===0&&BS(t,i,e)||s===0&&BS(n,t,i)||o===0&&BS(n,e,i))}function BS(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function zS(t){return t>0?1:t<0?-1:0}function cte(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&QH(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function h1(t,e){return Nr(t.prev,t,t.next)<0?Nr(t,e,t.next)>=0&&Nr(t,t.prev,e)>=0:Nr(t,e,t.prev)<0||Nr(t,t.next,e)<0}function ute(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,a=(t.y+e.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function JH(t,e){const n=Rj(t.i,t.x,t.y),i=Rj(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function d8(t,e,n,i){const r=Rj(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function d1(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Rj(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function fte(t,e,n,i){let r=0;for(let a=e,s=n-i;a<n;a+=i)r+=(t[s]-t[a])*(t[a+1]+t[s+1]),s=a;return r}class hte{static triangulate(e,n,i=2){return Yee(e,n,i)}}class Mc{static area(e){const n=e.length;let i=0;for(let r=n-1,a=0;a<n;r=a++)i+=e[r].x*e[a].y-e[a].x*e[r].y;return i*.5}static isClockWise(e){return Mc.area(e)<0}static triangulateShape(e,n){const i=[],r=[],a=[];p8(e),m8(i,e);let s=e.length;n.forEach(p8);for(let l=0;l<n.length;l++)r.push(s),s+=n[l].length,m8(i,n[l]);const o=hte.triangulate(i,r);for(let l=0;l<o.length;l+=3)a.push(o.slice(l,l+3));return a}}function p8(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function m8(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class MT extends An{constructor(e=new Af([new Ye(.5,.5),new Ye(-.5,.5),new Ye(-.5,-.5),new Ye(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const i=this,r=[],a=[];for(let o=0,l=e.length;o<l;o++){const u=e[o];s(u)}this.setAttribute("position",new Qt(r,3)),this.setAttribute("uv",new Qt(a,2)),this.computeVertexNormals();function s(o){const l=[],u=n.curveSegments!==void 0?n.curveSegments:12,h=n.steps!==void 0?n.steps:1,p=n.depth!==void 0?n.depth:1;let g=n.bevelEnabled!==void 0?n.bevelEnabled:!0,x=n.bevelThickness!==void 0?n.bevelThickness:.2,b=n.bevelSize!==void 0?n.bevelSize:x-.1,M=n.bevelOffset!==void 0?n.bevelOffset:0,S=n.bevelSegments!==void 0?n.bevelSegments:3;const T=n.extrudePath,A=n.UVGenerator!==void 0?n.UVGenerator:dte;let E,j=!1,R,C,D,U;T&&(E=T.getSpacedPoints(h),j=!0,g=!1,R=T.computeFrenetFrames(h,!1),C=new se,D=new se,U=new se),g||(S=0,x=0,b=0,M=0);const I=o.extractPoints(u);let L=I.shape;const F=I.holes;if(!Mc.isClockWise(L)){L=L.reverse();for(let Ce=0,re=F.length;Ce<re;Ce++){const Le=F[Ce];Mc.isClockWise(Le)&&(F[Ce]=Le.reverse())}}function H(Ce){const Le=10000000000000001e-36;let He=Ce[0];for(let Ue=1;Ue<=Ce.length;Ue++){const Ge=Ue%Ce.length,nt=Ce[Ge],Ae=nt.x-He.x,at=nt.y-He.y,ne=Ae*Ae+at*at,Z=Math.max(Math.abs(nt.x),Math.abs(nt.y),Math.abs(He.x),Math.abs(He.y)),xe=Le*Z*Z;if(ne<=xe){Ce.splice(Ge,1),Ue--;continue}He=nt}}H(L),F.forEach(H);const W=F.length,Y=L;for(let Ce=0;Ce<W;Ce++){const re=F[Ce];L=L.concat(re)}function k(Ce,re,Le){return re||wn("ExtrudeGeometry: vec does not exist"),Ce.clone().addScaledVector(re,Le)}const $=L.length;function ee(Ce,re,Le){let He,Ue,Ge;const nt=Ce.x-re.x,Ae=Ce.y-re.y,at=Le.x-Ce.x,ne=Le.y-Ce.y,Z=nt*nt+Ae*Ae,xe=nt*ne-Ae*at;if(Math.abs(xe)>Number.EPSILON){const Xe=Math.sqrt(Z),Be=Math.sqrt(at*at+ne*ne),Ne=re.x-Ae/Xe,yt=re.y+nt/Xe,vt=Le.x-ne/Be,Dt=Le.y+at/Be,Nt=((vt-Ne)*ne-(Dt-yt)*at)/(nt*ne-Ae*at);He=Ne+nt*Nt-Ce.x,Ue=yt+Ae*Nt-Ce.y;const We=He*He+Ue*Ue;if(We<=2)return new Ye(He,Ue);Ge=Math.sqrt(We/2)}else{let Xe=!1;nt>Number.EPSILON?at>Number.EPSILON&&(Xe=!0):nt<-Number.EPSILON?at<-Number.EPSILON&&(Xe=!0):Math.sign(Ae)===Math.sign(ne)&&(Xe=!0),Xe?(He=-Ae,Ue=nt,Ge=Math.sqrt(Z)):(He=nt,Ue=Ae,Ge=Math.sqrt(Z/2))}return new Ye(He/Ge,Ue/Ge)}const te=[];for(let Ce=0,re=Y.length,Le=re-1,He=Ce+1;Ce<re;Ce++,Le++,He++)Le===re&&(Le=0),He===re&&(He=0),te[Ce]=ee(Y[Ce],Y[Le],Y[He]);const ae=[];let q,K=te.concat();for(let Ce=0,re=W;Ce<re;Ce++){const Le=F[Ce];q=[];for(let He=0,Ue=Le.length,Ge=Ue-1,nt=He+1;He<Ue;He++,Ge++,nt++)Ge===Ue&&(Ge=0),nt===Ue&&(nt=0),q[He]=ee(Le[He],Le[Ge],Le[nt]);ae.push(q),K=K.concat(q)}let ie;if(S===0)ie=Mc.triangulateShape(Y,F);else{const Ce=[],re=[];for(let Le=0;Le<S;Le++){const He=Le/S,Ue=x*Math.cos(He*Math.PI/2),Ge=b*Math.sin(He*Math.PI/2)+M;for(let nt=0,Ae=Y.length;nt<Ae;nt++){const at=k(Y[nt],te[nt],Ge);Te(at.x,at.y,-Ue),He===0&&Ce.push(at)}for(let nt=0,Ae=W;nt<Ae;nt++){const at=F[nt];q=ae[nt];const ne=[];for(let Z=0,xe=at.length;Z<xe;Z++){const Xe=k(at[Z],q[Z],Ge);Te(Xe.x,Xe.y,-Ue),He===0&&ne.push(Xe)}He===0&&re.push(ne)}}ie=Mc.triangulateShape(Ce,re)}const ue=ie.length,me=b+M;for(let Ce=0;Ce<$;Ce++){const re=g?k(L[Ce],K[Ce],me):L[Ce];j?(D.copy(R.normals[0]).multiplyScalar(re.x),C.copy(R.binormals[0]).multiplyScalar(re.y),U.copy(E[0]).add(D).add(C),Te(U.x,U.y,U.z)):Te(re.x,re.y,0)}for(let Ce=1;Ce<=h;Ce++)for(let re=0;re<$;re++){const Le=g?k(L[re],K[re],me):L[re];j?(D.copy(R.normals[Ce]).multiplyScalar(Le.x),C.copy(R.binormals[Ce]).multiplyScalar(Le.y),U.copy(E[Ce]).add(D).add(C),Te(U.x,U.y,U.z)):Te(Le.x,Le.y,p/h*Ce)}for(let Ce=S-1;Ce>=0;Ce--){const re=Ce/S,Le=x*Math.cos(re*Math.PI/2),He=b*Math.sin(re*Math.PI/2)+M;for(let Ue=0,Ge=Y.length;Ue<Ge;Ue++){const nt=k(Y[Ue],te[Ue],He);Te(nt.x,nt.y,p+Le)}for(let Ue=0,Ge=F.length;Ue<Ge;Ue++){const nt=F[Ue];q=ae[Ue];for(let Ae=0,at=nt.length;Ae<at;Ae++){const ne=k(nt[Ae],q[Ae],He);j?Te(ne.x,ne.y+E[h-1].y,E[h-1].x+Le):Te(ne.x,ne.y,p+Le)}}}fe(),de();function fe(){const Ce=r.length/3;if(g){let re=0,Le=$*re;for(let He=0;He<ue;He++){const Ue=ie[He];Ie(Ue[2]+Le,Ue[1]+Le,Ue[0]+Le)}re=h+S*2,Le=$*re;for(let He=0;He<ue;He++){const Ue=ie[He];Ie(Ue[0]+Le,Ue[1]+Le,Ue[2]+Le)}}else{for(let re=0;re<ue;re++){const Le=ie[re];Ie(Le[2],Le[1],Le[0])}for(let re=0;re<ue;re++){const Le=ie[re];Ie(Le[0]+$*h,Le[1]+$*h,Le[2]+$*h)}}i.addGroup(Ce,r.length/3-Ce,0)}function de(){const Ce=r.length/3;let re=0;_e(Y,re),re+=Y.length;for(let Le=0,He=F.length;Le<He;Le++){const Ue=F[Le];_e(Ue,re),re+=Ue.length}i.addGroup(Ce,r.length/3-Ce,1)}function _e(Ce,re){let Le=Ce.length;for(;--Le>=0;){const He=Le;let Ue=Le-1;Ue<0&&(Ue=Ce.length-1);for(let Ge=0,nt=h+S*2;Ge<nt;Ge++){const Ae=$*Ge,at=$*(Ge+1),ne=re+He+Ae,Z=re+Ue+Ae,xe=re+Ue+at,Xe=re+He+at;Re(ne,Z,xe,Xe)}}}function Te(Ce,re,Le){l.push(Ce),l.push(re),l.push(Le)}function Ie(Ce,re,Le){ye(Ce),ye(re),ye(Le);const He=r.length/3,Ue=A.generateTopUV(i,r,He-3,He-2,He-1);ct(Ue[0]),ct(Ue[1]),ct(Ue[2])}function Re(Ce,re,Le,He){ye(Ce),ye(re),ye(He),ye(re),ye(Le),ye(He);const Ue=r.length/3,Ge=A.generateSideWallUV(i,r,Ue-6,Ue-3,Ue-2,Ue-1);ct(Ge[0]),ct(Ge[1]),ct(Ge[3]),ct(Ge[1]),ct(Ge[2]),ct(Ge[3])}function ye(Ce){r.push(l[Ce*3+0]),r.push(l[Ce*3+1]),r.push(l[Ce*3+2])}function ct(Ce){a.push(Ce.x),a.push(Ce.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,i=this.parameters.options;return pte(n,i,e)}static fromJSON(e,n){const i=[];for(let a=0,s=e.shapes.length;a<s;a++){const o=n[e.shapes[a]];i.push(o)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new k_[r.type]().fromJSON(r)),new MT(i,e.options)}}const dte={generateTopUV:function(t,e,n,i,r){const a=e[n*3],s=e[n*3+1],o=e[i*3],l=e[i*3+1],u=e[r*3],h=e[r*3+1];return[new Ye(a,s),new Ye(o,l),new Ye(u,h)]},generateSideWallUV:function(t,e,n,i,r,a){const s=e[n*3],o=e[n*3+1],l=e[n*3+2],u=e[i*3],h=e[i*3+1],p=e[i*3+2],g=e[r*3],x=e[r*3+1],b=e[r*3+2],M=e[a*3],S=e[a*3+1],T=e[a*3+2];return Math.abs(o-h)<Math.abs(s-u)?[new Ye(s,1-l),new Ye(u,1-p),new Ye(g,1-b),new Ye(M,1-T)]:[new Ye(o,1-l),new Ye(h,1-p),new Ye(x,1-b),new Ye(S,1-T)]}};function pte(t,e,n){if(n.shapes=[],Array.isArray(t))for(let i=0,r=t.length;i<r;i++){const a=t[i];n.shapes.push(a.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class Sb extends td{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,a,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Sb(e.radius,e.detail)}}class _T extends An{constructor(e=[new Ye(0,-.5),new Ye(.5,0),new Ye(0,.5)],n=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:i,phiLength:r},n=Math.floor(n),r=Mn(r,0,Math.PI*2);const a=[],s=[],o=[],l=[],u=[],h=1/n,p=new se,g=new Ye,x=new se,b=new se,M=new se;let S=0,T=0;for(let A=0;A<=e.length-1;A++)switch(A){case 0:S=e[A+1].x-e[A].x,T=e[A+1].y-e[A].y,x.x=T*1,x.y=-S,x.z=T*0,M.copy(x),x.normalize(),l.push(x.x,x.y,x.z);break;case e.length-1:l.push(M.x,M.y,M.z);break;default:S=e[A+1].x-e[A].x,T=e[A+1].y-e[A].y,x.x=T*1,x.y=-S,x.z=T*0,b.copy(x),x.x+=M.x,x.y+=M.y,x.z+=M.z,x.normalize(),l.push(x.x,x.y,x.z),M.copy(b)}for(let A=0;A<=n;A++){const E=i+A*h*r,j=Math.sin(E),R=Math.cos(E);for(let C=0;C<=e.length-1;C++){p.x=e[C].x*j,p.y=e[C].y,p.z=e[C].x*R,s.push(p.x,p.y,p.z),g.x=A/n,g.y=C/(e.length-1),o.push(g.x,g.y);const D=l[3*C+0]*j,U=l[3*C+1],I=l[3*C+0]*R;u.push(D,U,I)}}for(let A=0;A<n;A++)for(let E=0;E<e.length-1;E++){const j=E+A*e.length,R=j,C=j+e.length,D=j+e.length+1,U=j+1;a.push(R,C,U),a.push(D,U,C)}this.setIndex(a),this.setAttribute("position",new Qt(s,3)),this.setAttribute("uv",new Qt(o,2)),this.setAttribute("normal",new Qt(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _T(e.points,e.segments,e.phiStart,e.phiLength)}}class Mb extends td{constructor(e=1,n=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Mb(e.radius,e.detail)}}class Ul extends An{constructor(e=1,n=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:r};const a=e/2,s=n/2,o=Math.floor(i),l=Math.floor(r),u=o+1,h=l+1,p=e/o,g=n/l,x=[],b=[],M=[],S=[];for(let T=0;T<h;T++){const A=T*g-s;for(let E=0;E<u;E++){const j=E*p-a;b.push(j,-A,0),M.push(0,0,1),S.push(E/o),S.push(1-T/l)}}for(let T=0;T<l;T++)for(let A=0;A<o;A++){const E=A+u*T,j=A+u*(T+1),R=A+1+u*(T+1),C=A+1+u*T;x.push(E,j,C),x.push(j,R,C)}this.setIndex(x),this.setAttribute("position",new Qt(b,3)),this.setAttribute("normal",new Qt(M,3)),this.setAttribute("uv",new Qt(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ul(e.width,e.height,e.widthSegments,e.heightSegments)}}class TT extends An{constructor(e=.5,n=1,i=32,r=1,a=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:i,phiSegments:r,thetaStart:a,thetaLength:s},i=Math.max(3,i),r=Math.max(1,r);const o=[],l=[],u=[],h=[];let p=e;const g=(n-e)/r,x=new se,b=new Ye;for(let M=0;M<=r;M++){for(let S=0;S<=i;S++){const T=a+S/i*s;x.x=p*Math.cos(T),x.y=p*Math.sin(T),l.push(x.x,x.y,x.z),u.push(0,0,1),b.x=(x.x/n+1)/2,b.y=(x.y/n+1)/2,h.push(b.x,b.y)}p+=g}for(let M=0;M<r;M++){const S=M*(i+1);for(let T=0;T<i;T++){const A=T+S,E=A,j=A+i+1,R=A+i+2,C=A+1;o.push(E,j,C),o.push(j,R,C)}}this.setIndex(o),this.setAttribute("position",new Qt(l,3)),this.setAttribute("normal",new Qt(u,3)),this.setAttribute("uv",new Qt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new TT(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class _b extends An{constructor(e=new Af([new Ye(0,.5),new Ye(-.5,-.5),new Ye(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const i=[],r=[],a=[],s=[];let o=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let h=0;h<e.length;h++)u(e[h]),this.addGroup(o,l,h),o+=l,l=0;this.setIndex(i),this.setAttribute("position",new Qt(r,3)),this.setAttribute("normal",new Qt(a,3)),this.setAttribute("uv",new Qt(s,2));function u(h){const p=r.length/3,g=h.extractPoints(n);let x=g.shape;const b=g.holes;Mc.isClockWise(x)===!1&&(x=x.reverse());for(let S=0,T=b.length;S<T;S++){const A=b[S];Mc.isClockWise(A)===!0&&(b[S]=A.reverse())}const M=Mc.triangulateShape(x,b);for(let S=0,T=b.length;S<T;S++){const A=b[S];x=x.concat(A)}for(let S=0,T=x.length;S<T;S++){const A=x[S];r.push(A.x,A.y,0),a.push(0,0,1),s.push(A.x,A.y)}for(let S=0,T=M.length;S<T;S++){const A=M[S],E=A[0]+p,j=A[1]+p,R=A[2]+p;i.push(E,j,R),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return mte(n,e)}static fromJSON(e,n){const i=[];for(let r=0,a=e.shapes.length;r<a;r++){const s=n[e.shapes[r]];i.push(s)}return new _b(i,e.curveSegments)}}function mte(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}class Tb extends An{constructor(e=1,n=32,i=16,r=0,a=Math.PI*2,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:r,phiLength:a,thetaStart:s,thetaLength:o},n=Math.max(3,Math.floor(n)),i=Math.max(2,Math.floor(i));const l=Math.min(s+o,Math.PI);let u=0;const h=[],p=new se,g=new se,x=[],b=[],M=[],S=[];for(let T=0;T<=i;T++){const A=[],E=T/i;let j=0;T===0&&s===0?j=.5/n:T===i&&l===Math.PI&&(j=-.5/n);for(let R=0;R<=n;R++){const C=R/n;p.x=-e*Math.cos(r+C*a)*Math.sin(s+E*o),p.y=e*Math.cos(s+E*o),p.z=e*Math.sin(r+C*a)*Math.sin(s+E*o),b.push(p.x,p.y,p.z),g.copy(p).normalize(),M.push(g.x,g.y,g.z),S.push(C+j,1-E),A.push(u++)}h.push(A)}for(let T=0;T<i;T++)for(let A=0;A<n;A++){const E=h[T][A+1],j=h[T][A],R=h[T+1][A],C=h[T+1][A+1];(T!==0||s>0)&&x.push(E,j,C),(T!==i-1||l<Math.PI)&&x.push(j,R,C)}this.setIndex(x),this.setAttribute("position",new Qt(b,3)),this.setAttribute("normal",new Qt(M,3)),this.setAttribute("uv",new Qt(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Tb(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class wT extends td{constructor(e=1,n=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new wT(e.radius,e.detail)}}class AT extends An{constructor(e=1,n=.4,i=12,r=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:i,tubularSegments:r,arc:a},i=Math.floor(i),r=Math.floor(r);const s=[],o=[],l=[],u=[],h=new se,p=new se,g=new se;for(let x=0;x<=i;x++)for(let b=0;b<=r;b++){const M=b/r*a,S=x/i*Math.PI*2;p.x=(e+n*Math.cos(S))*Math.cos(M),p.y=(e+n*Math.cos(S))*Math.sin(M),p.z=n*Math.sin(S),o.push(p.x,p.y,p.z),h.x=e*Math.cos(M),h.y=e*Math.sin(M),g.subVectors(p,h).normalize(),l.push(g.x,g.y,g.z),u.push(b/r),u.push(x/i)}for(let x=1;x<=i;x++)for(let b=1;b<=r;b++){const M=(r+1)*x+b-1,S=(r+1)*(x-1)+b-1,T=(r+1)*(x-1)+b,A=(r+1)*x+b;s.push(M,S,A),s.push(S,T,A)}this.setIndex(s),this.setAttribute("position",new Qt(o,3)),this.setAttribute("normal",new Qt(l,3)),this.setAttribute("uv",new Qt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new AT(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class ET extends An{constructor(e=1,n=.4,i=64,r=8,a=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:i,radialSegments:r,p:a,q:s},i=Math.floor(i),r=Math.floor(r);const o=[],l=[],u=[],h=[],p=new se,g=new se,x=new se,b=new se,M=new se,S=new se,T=new se;for(let E=0;E<=i;++E){const j=E/i*a*Math.PI*2;A(j,a,s,e,x),A(j+.01,a,s,e,b),S.subVectors(b,x),T.addVectors(b,x),M.crossVectors(S,T),T.crossVectors(M,S),M.normalize(),T.normalize();for(let R=0;R<=r;++R){const C=R/r*Math.PI*2,D=-n*Math.cos(C),U=n*Math.sin(C);p.x=x.x+(D*T.x+U*M.x),p.y=x.y+(D*T.y+U*M.y),p.z=x.z+(D*T.z+U*M.z),l.push(p.x,p.y,p.z),g.subVectors(p,x).normalize(),u.push(g.x,g.y,g.z),h.push(E/i),h.push(R/r)}}for(let E=1;E<=i;E++)for(let j=1;j<=r;j++){const R=(r+1)*(E-1)+(j-1),C=(r+1)*E+(j-1),D=(r+1)*E+j,U=(r+1)*(E-1)+j;o.push(R,C,U),o.push(C,D,U)}this.setIndex(o),this.setAttribute("position",new Qt(l,3)),this.setAttribute("normal",new Qt(u,3)),this.setAttribute("uv",new Qt(h,2));function A(E,j,R,C,D){const U=Math.cos(E),I=Math.sin(E),L=R/j*E,F=Math.cos(L);D.x=C*(2+F)*.5*U,D.y=C*(2+F)*I*.5,D.z=C*Math.sin(L)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ET(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class wb extends An{constructor(e=new aD(new se(-1,-1,0),new se(-1,1,0),new se(1,1,0)),n=64,i=1,r=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:i,radialSegments:r,closed:a};const s=e.computeFrenetFrames(n,a);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const o=new se,l=new se,u=new Ye;let h=new se;const p=[],g=[],x=[],b=[];M(),this.setIndex(b),this.setAttribute("position",new Qt(p,3)),this.setAttribute("normal",new Qt(g,3)),this.setAttribute("uv",new Qt(x,2));function M(){for(let E=0;E<n;E++)S(E);S(a===!1?n:0),A(),T()}function S(E){h=e.getPointAt(E/n,h);const j=s.normals[E],R=s.binormals[E];for(let C=0;C<=r;C++){const D=C/r*Math.PI*2,U=Math.sin(D),I=-Math.cos(D);l.x=I*j.x+U*R.x,l.y=I*j.y+U*R.y,l.z=I*j.z+U*R.z,l.normalize(),g.push(l.x,l.y,l.z),o.x=h.x+i*l.x,o.y=h.y+i*l.y,o.z=h.z+i*l.z,p.push(o.x,o.y,o.z)}}function T(){for(let E=1;E<=n;E++)for(let j=1;j<=r;j++){const R=(r+1)*(E-1)+(j-1),C=(r+1)*E+(j-1),D=(r+1)*E+j,U=(r+1)*(E-1)+j;b.push(R,C,U),b.push(C,D,U)}}function A(){for(let E=0;E<=n;E++)for(let j=0;j<=r;j++)u.x=E/n,u.y=j/r,x.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new wb(new k_[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class oD extends An{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],i=new Set,r=new se,a=new se;if(e.index!==null){const s=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let u=0,h=l.length;u<h;++u){const p=l[u],g=p.start,x=p.count;for(let b=g,M=g+x;b<M;b+=3)for(let S=0;S<3;S++){const T=o.getX(b+S),A=o.getX(b+(S+1)%3);r.fromBufferAttribute(s,T),a.fromBufferAttribute(s,A),g8(r,a,i)===!0&&(n.push(r.x,r.y,r.z),n.push(a.x,a.y,a.z))}}}else{const s=e.attributes.position;for(let o=0,l=s.count/3;o<l;o++)for(let u=0;u<3;u++){const h=3*o+u,p=3*o+(u+1)%3;r.fromBufferAttribute(s,h),a.fromBufferAttribute(s,p),g8(r,a,i)===!0&&(n.push(r.x,r.y,r.z),n.push(a.x,a.y,a.z))}}this.setAttribute("position",new Qt(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function g8(t,e,n){const i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(i)===!0||n.has(r)===!0?!1:(n.add(i),n.add(r),!0)}var v8=Object.freeze({__proto__:null,BoxGeometry:rp,CapsuleGeometry:vT,CircleGeometry:xT,ConeGeometry:bb,CylinderGeometry:yb,DodecahedronGeometry:yT,EdgesGeometry:qH,ExtrudeGeometry:MT,IcosahedronGeometry:Sb,LatheGeometry:_T,OctahedronGeometry:Mb,PlaneGeometry:Ul,PolyhedronGeometry:td,RingGeometry:TT,ShapeGeometry:_b,SphereGeometry:Tb,TetrahedronGeometry:wT,TorusGeometry:AT,TorusKnotGeometry:ET,TubeGeometry:wb,WireframeGeometry:oD});class eq extends za{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new zt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class tq extends di{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Ab extends za{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new zt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ed,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ko,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class nq extends Ab{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ye(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Mn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new zt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new zt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new zt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class iq extends za{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new zt(16777215),this.specular=new zt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ed,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ko,this.combine=db,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class rq extends za{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new zt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ed,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class lD extends za{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ed,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class aq extends za{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new zt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ed,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ko,this.combine=db,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Eb extends za{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Il,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class CT extends za{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class sq extends za{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new zt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ed,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class oq extends Js{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function E0(t,e){return!t||t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function lq(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function cq(t){function e(r,a){return t[r]-t[a]}const n=t.length,i=new Array(n);for(let r=0;r!==n;++r)i[r]=r;return i.sort(e),i}function jj(t,e,n){const i=t.length,r=new t.constructor(i);for(let a=0,s=0;s!==i;++a){const o=n[a]*e;for(let l=0;l!==e;++l)r[s++]=t[o+l]}return r}function cD(t,e,n,i){let r=1,a=t[0];for(;a!==void 0&&a[i]===void 0;)a=t[r++];if(a===void 0)return;let s=a[i];if(s!==void 0)if(Array.isArray(s))do s=a[i],s!==void 0&&(e.push(a.time),n.push(...s)),a=t[r++];while(a!==void 0);else if(s.toArray!==void 0)do s=a[i],s!==void 0&&(e.push(a.time),s.toArray(n,n.length)),a=t[r++];while(a!==void 0);else do s=a[i],s!==void 0&&(e.push(a.time),n.push(s)),a=t[r++];while(a!==void 0)}function gte(t,e,n,i,r=30){const a=t.clone();a.name=e;const s=[];for(let l=0;l<a.tracks.length;++l){const u=a.tracks[l],h=u.getValueSize(),p=[],g=[];for(let x=0;x<u.times.length;++x){const b=u.times[x]*r;if(!(b<n||b>=i)){p.push(u.times[x]);for(let M=0;M<h;++M)g.push(u.values[x*h+M])}}p.length!==0&&(u.times=E0(p,u.times.constructor),u.values=E0(g,u.values.constructor),s.push(u))}a.tracks=s;let o=1/0;for(let l=0;l<a.tracks.length;++l)o>a.tracks[l].times[0]&&(o=a.tracks[l].times[0]);for(let l=0;l<a.tracks.length;++l)a.tracks[l].shift(-1*o);return a.resetDuration(),a}function vte(t,e=0,n=t,i=30){i<=0&&(i=30);const r=n.tracks.length,a=e/i;for(let s=0;s<r;++s){const o=n.tracks[s],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;const u=t.tracks.find(function(T){return T.name===o.name&&T.ValueTypeName===l});if(u===void 0)continue;let h=0;const p=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=p/3);let g=0;const x=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=x/3);const b=o.times.length-1;let M;if(a<=o.times[0]){const T=h,A=p-h;M=o.values.slice(T,A)}else if(a>=o.times[b]){const T=b*p+h,A=T+p-h;M=o.values.slice(T,A)}else{const T=o.createInterpolant(),A=h,E=p-h;T.evaluate(a),M=T.resultBuffer.slice(A,E)}l==="quaternion"&&new Jr().fromArray(M).normalize().conjugate().toArray(M);const S=u.times.length;for(let T=0;T<S;++T){const A=T*x+g;if(l==="quaternion")Jr.multiplyQuaternionsFlat(u.values,A,M,0,u.values,A);else{const E=x-g*2;for(let j=0;j<E;++j)u.values[A+j]-=M[j]}}}return t.blendMode=VO,t}class xte{static convertArray(e,n){return E0(e,n)}static isTypedArray(e){return lq(e)}static getKeyframeOrder(e){return cq(e)}static sortedArray(e,n,i){return jj(e,n,i)}static flattenJSON(e,n,i,r){cD(e,n,i,r)}static subclip(e,n,i,r,a=30){return gte(e,n,i,r,a)}static makeClipAdditive(e,n=0,i=e,r=30){return vte(e,n,i,r)}}class Cb{constructor(e,n,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let i=this._cachedIndex,r=n[i],a=n[i-1];e:{t:{let s;n:{i:if(!(e<r)){for(let o=i+2;;){if(r===void 0){if(e<a)break i;return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(a=r,r=n[++i],e<r)break t}s=n.length;break n}if(!(e>=a)){const o=n[1];e<o&&(i=2,a=o);for(let l=i-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=a,a=n[--i-1],e>=a)break t}s=i,i=0;break n}break e}for(;i<s;){const o=i+s>>>1;e<n[o]?s=o:i=o+1}if(r=n[i],a=n[i-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,a,r)}return this.interpolate_(i,a,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,r=this.valueSize,a=e*r;for(let s=0;s!==r;++s)n[s]=i[a+s];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class uq extends Cb{constructor(e,n,i,r){super(e,n,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:T0,endingEnd:T0}}intervalChanged_(e,n,i){const r=this.parameterPositions;let a=e-2,s=e+1,o=r[a],l=r[s];if(o===void 0)switch(this.getSettings_().endingStart){case w0:a=e,o=2*n-i;break;case a1:a=r.length-2,o=n+r[a]-r[a+1];break;default:a=e,o=i}if(l===void 0)switch(this.getSettings_().endingEnd){case w0:s=e,l=2*i-n;break;case a1:s=1,l=i+r[1]-r[0];break;default:s=e-1,l=n}const u=(i-n)*.5,h=this.valueSize;this._weightPrev=u/(n-o),this._weightNext=u/(l-i),this._offsetPrev=a*h,this._offsetNext=s*h}interpolate_(e,n,i,r){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,h=this._offsetPrev,p=this._offsetNext,g=this._weightPrev,x=this._weightNext,b=(i-n)/(r-n),M=b*b,S=M*b,T=-g*S+2*g*M-g*b,A=(1+g)*S+(-1.5-2*g)*M+(-.5+g)*b+1,E=(-1-x)*S+(1.5+x)*M+.5*b,j=x*S-x*M;for(let R=0;R!==o;++R)a[R]=T*s[h+R]+A*s[u+R]+E*s[l+R]+j*s[p+R];return a}}class uD extends Cb{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,h=(i-n)/(r-n),p=1-h;for(let g=0;g!==o;++g)a[g]=s[u+g]*p+s[l+g]*h;return a}}class fq extends Cb{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ll{constructor(e,n,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=E0(n,this.TimeBufferType),this.values=E0(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let i;if(n.toJSON!==this.toJSON)i=n.toJSON(e);else{i={name:e.name,times:E0(e.times,Array),values:E0(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new fq(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new uD(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new uq(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case r1:n=this.InterpolantFactoryMethodDiscrete;break;case L_:n=this.InterpolantFactoryMethodLinear;break;case qM:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return Wt("KeyframeTrack:",i),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return r1;case this.InterpolantFactoryMethodLinear:return L_;case this.InterpolantFactoryMethodSmooth:return qM}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let i=0,r=n.length;i!==r;++i)n[i]*=e}return this}trim(e,n){const i=this.times,r=i.length;let a=0,s=r-1;for(;a!==r&&i[a]<e;)++a;for(;s!==-1&&i[s]>n;)--s;if(++s,a!==0||s!==r){a>=s&&(s=Math.max(s,1),a=s-1);const o=this.getValueSize();this.times=i.slice(a,s),this.values=this.values.slice(a*o,s*o)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(wn("KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,a=i.length;a===0&&(wn("KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let o=0;o!==a;o++){const l=i[o];if(typeof l=="number"&&isNaN(l)){wn("KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(s!==null&&s>l){wn("KeyframeTrack: Out of order keys.",this,o,l,s),e=!1;break}s=l}if(r!==void 0&&lq(r))for(let o=0,l=r.length;o!==l;++o){const u=r[o];if(isNaN(u)){wn("KeyframeTrack: Value is not a valid number.",this,o,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===qM,a=e.length-1;let s=1;for(let o=1;o<a;++o){let l=!1;const u=e[o],h=e[o+1];if(u!==h&&(o!==1||u!==e[0]))if(r)l=!0;else{const p=o*i,g=p-i,x=p+i;for(let b=0;b!==i;++b){const M=n[p+b];if(M!==n[g+b]||M!==n[x+b]){l=!0;break}}}if(l){if(o!==s){e[s]=e[o];const p=o*i,g=s*i;for(let x=0;x!==i;++x)n[g+x]=n[p+x]}++s}}if(a>0){e[s]=e[a];for(let o=a*i,l=s*i,u=0;u!==i;++u)n[l+u]=n[o+u];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=n.slice(0,s*i)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),i=this.constructor,r=new i(this.name,e,n);return r.createInterpolant=this.createInterpolant,r}}Ll.prototype.ValueTypeName="";Ll.prototype.TimeBufferType=Float32Array;Ll.prototype.ValueBufferType=Float32Array;Ll.prototype.DefaultInterpolation=L_;class ap extends Ll{constructor(e,n,i){super(e,n,i)}}ap.prototype.ValueTypeName="bool";ap.prototype.ValueBufferType=Array;ap.prototype.DefaultInterpolation=r1;ap.prototype.InterpolantFactoryMethodLinear=void 0;ap.prototype.InterpolantFactoryMethodSmooth=void 0;class fD extends Ll{constructor(e,n,i,r){super(e,n,i,r)}}fD.prototype.ValueTypeName="color";class p1 extends Ll{constructor(e,n,i,r){super(e,n,i,r)}}p1.prototype.ValueTypeName="number";class hq extends Cb{constructor(e,n,i,r){super(e,n,i,r)}interpolate_(e,n,i,r){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=(i-n)/(r-n);let u=e*o;for(let h=u+o;u!==h;u+=4)Jr.slerpFlat(a,0,s,u-o,s,u,l);return a}}class Rb extends Ll{constructor(e,n,i,r){super(e,n,i,r)}InterpolantFactoryMethodLinear(e){return new hq(this.times,this.values,this.getValueSize(),e)}}Rb.prototype.ValueTypeName="quaternion";Rb.prototype.InterpolantFactoryMethodSmooth=void 0;class sp extends Ll{constructor(e,n,i){super(e,n,i)}}sp.prototype.ValueTypeName="string";sp.prototype.ValueBufferType=Array;sp.prototype.DefaultInterpolation=r1;sp.prototype.InterpolantFactoryMethodLinear=void 0;sp.prototype.InterpolantFactoryMethodSmooth=void 0;class m1 extends Ll{constructor(e,n,i,r){super(e,n,i,r)}}m1.prototype.ValueTypeName="vector";class g1{constructor(e="",n=-1,i=[],r=oT){this.name=e,this.tracks=i,this.duration=n,this.blendMode=r,this.uuid=Wo(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const n=[],i=e.tracks,r=1/(e.fps||1);for(let s=0,o=i.length;s!==o;++s)n.push(bte(i[s]).scale(r));const a=new this(e.name,e.duration,n,e.blendMode);return a.uuid=e.uuid,a.userData=JSON.parse(e.userData||"{}"),a}static toJSON(e){const n=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let a=0,s=i.length;a!==s;++a)n.push(Ll.toJSON(i[a]));return r}static CreateFromMorphTargetSequence(e,n,i,r){const a=n.length,s=[];for(let o=0;o<a;o++){let l=[],u=[];l.push((o+a-1)%a,o,(o+1)%a),u.push(0,1,0);const h=cq(l);l=jj(l,1,h),u=jj(u,1,h),!r&&l[0]===0&&(l.push(a),u.push(u[0])),s.push(new p1(".morphTargetInfluences["+n[o].name+"]",l,u).scale(1/i))}return new this(e,-1,s)}static findByName(e,n){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===n)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,n,i){const r={},a=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const u=e[o],h=u.name.match(a);if(h&&h.length>1){const p=h[1];let g=r[p];g||(r[p]=g=[]),g.push(u)}}const s=[];for(const o in r)s.push(this.CreateFromMorphTargetSequence(o,r[o],n,i));return s}static parseAnimation(e,n){if(Wt("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return wn("AnimationClip: No animation in JSONLoader data."),null;const i=function(p,g,x,b,M){if(x.length!==0){const S=[],T=[];cD(x,S,T,b),S.length!==0&&M.push(new p(g,S,T))}},r=[],a=e.name||"default",s=e.fps||30,o=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let p=0;p<u.length;p++){const g=u[p].keys;if(!(!g||g.length===0))if(g[0].morphTargets){const x={};let b;for(b=0;b<g.length;b++)if(g[b].morphTargets)for(let M=0;M<g[b].morphTargets.length;M++)x[g[b].morphTargets[M]]=-1;for(const M in x){const S=[],T=[];for(let A=0;A!==g[b].morphTargets.length;++A){const E=g[b];S.push(E.time),T.push(E.morphTarget===M?1:0)}r.push(new p1(".morphTargetInfluence["+M+"]",S,T))}l=x.length*s}else{const x=".bones["+n[p].name+"]";i(m1,x+".position",g,"pos",r),i(Rb,x+".quaternion",g,"rot",r),i(m1,x+".scale",g,"scl",r)}}return r.length===0?null:new this(a,l,r,o)}resetDuration(){const e=this.tracks;let n=0;for(let i=0,r=e.length;i!==r;++i){const a=this.tracks[i];n=Math.max(n,a.times[a.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let i=0;i<this.tracks.length;i++)e.push(this.tracks[i].clone());const n=new this.constructor(this.name,this.duration,e,this.blendMode);return n.userData=JSON.parse(JSON.stringify(this.userData)),n}toJSON(){return this.constructor.toJSON(this)}}function yte(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return p1;case"vector":case"vector2":case"vector3":case"vector4":return m1;case"color":return fD;case"quaternion":return Rb;case"bool":case"boolean":return ap;case"string":return sp}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function bte(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=yte(t.type);if(t.times===void 0){const n=[],i=[];cD(t.keys,n,i,"value"),t.times=n,t.values=i}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const mu={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class RT{constructor(e,n,i){const r=this;let a=!1,s=0,o=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this._abortController=null,this.itemStart=function(h){o++,a===!1&&r.onStart!==void 0&&r.onStart(h,s,o),a=!0},this.itemEnd=function(h){s++,r.onProgress!==void 0&&r.onProgress(h,s,o),s===o&&(a=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,p){return u.push(h,p),this},this.removeHandler=function(h){const p=u.indexOf(h);return p!==-1&&u.splice(p,2),this},this.getHandler=function(h){for(let p=0,g=u.length;p<g;p+=2){const x=u[p],b=u[p+1];if(x.global&&(x.lastIndex=0),x.test(h))return b}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const dq=new RT;class eo{constructor(e){this.manager=e!==void 0?e:dq,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const i=this;return new Promise(function(r,a){i.load(e,r,n,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}eo.DEFAULT_MATERIAL_NAME="__DEFAULT";const vf={};class Ste extends Error{constructor(e,n){super(e),this.response=n}}class $o extends eo{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=mu.get(`file:${e}`);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(a),this.manager.itemEnd(e)},0),a;if(vf[e]!==void 0){vf[e].push({onLoad:n,onProgress:i,onError:r});return}vf[e]=[],vf[e].push({onLoad:n,onProgress:i,onError:r});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),o=this.mimeType,l=this.responseType;fetch(s).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&Wt("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const h=vf[e],p=u.body.getReader(),g=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),x=g?parseInt(g):0,b=x!==0;let M=0;const S=new ReadableStream({start(T){A();function A(){p.read().then(({done:E,value:j})=>{if(E)T.close();else{M+=j.byteLength;const R=new ProgressEvent("progress",{lengthComputable:b,loaded:M,total:x});for(let C=0,D=h.length;C<D;C++){const U=h[C];U.onProgress&&U.onProgress(R)}T.enqueue(j),A()}},E=>{T.error(E)})}}});return new Response(S)}else throw new Ste(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(h=>new DOMParser().parseFromString(h,o));case"json":return u.json();default:if(o==="")return u.text();{const p=/charset="?([^;"\s]*)"?/i.exec(o),g=p&&p[1]?p[1].toLowerCase():void 0,x=new TextDecoder(g);return u.arrayBuffer().then(b=>x.decode(b))}}}).then(u=>{mu.add(`file:${e}`,u);const h=vf[e];delete vf[e];for(let p=0,g=h.length;p<g;p++){const x=h[p];x.onLoad&&x.onLoad(u)}}).catch(u=>{const h=vf[e];if(h===void 0)throw this.manager.itemError(e),u;delete vf[e];for(let p=0,g=h.length;p<g;p++){const x=h[p];x.onError&&x.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class Mte extends eo{constructor(e){super(e)}load(e,n,i,r){const a=this,s=new $o(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(o){try{n(a.parse(JSON.parse(o)))}catch(l){r?r(l):wn(l),a.manager.itemError(e)}},i,r)}parse(e){const n=[];for(let i=0;i<e.length;i++){const r=g1.parse(e[i]);n.push(r)}return n}}class _te extends eo{constructor(e){super(e)}load(e,n,i,r){const a=this,s=[],o=new gT,l=new $o(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(a.withCredentials);let u=0;function h(p){l.load(e[p],function(g){const x=a.parse(g,!0);s[p]={width:x.width,height:x.height,format:x.format,mipmaps:x.mipmaps},u+=1,u===6&&(x.mipmapCount===1&&(o.minFilter=Rn),o.image=s,o.format=x.format,o.needsUpdate=!0,n&&n(o))},i,r)}if(Array.isArray(e))for(let p=0,g=e.length;p<g;++p)h(p);else l.load(e,function(p){const g=a.parse(p,!0);if(g.isCubemap){const x=g.mipmaps.length/g.mipmapCount;for(let b=0;b<x;b++){s[b]={mipmaps:[]};for(let M=0;M<g.mipmapCount;M++)s[b].mipmaps.push(g.mipmaps[b*g.mipmapCount+M]),s[b].format=g.format,s[b].width=g.width,s[b].height=g.height}o.image=s}else o.image.width=g.width,o.image.height=g.height,o.mipmaps=g.mipmaps;g.mipmapCount===1&&(o.minFilter=Rn),o.format=g.format,o.needsUpdate=!0,n&&n(o)},i,r);return o}}const Cm=new WeakMap;class v1 extends eo{constructor(e){super(e)}load(e,n,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=mu.get(`image:${e}`);if(s!==void 0){if(s.complete===!0)a.manager.itemStart(e),setTimeout(function(){n&&n(s),a.manager.itemEnd(e)},0);else{let p=Cm.get(s);p===void 0&&(p=[],Cm.set(s,p)),p.push({onLoad:n,onError:r})}return s}const o=l1("img");function l(){h(),n&&n(this);const p=Cm.get(this)||[];for(let g=0;g<p.length;g++){const x=p[g];x.onLoad&&x.onLoad(this)}Cm.delete(this),a.manager.itemEnd(e)}function u(p){h(),r&&r(p),mu.remove(`image:${e}`);const g=Cm.get(this)||[];for(let x=0;x<g.length;x++){const b=g[x];b.onError&&b.onError(p)}Cm.delete(this),a.manager.itemError(e),a.manager.itemEnd(e)}function h(){o.removeEventListener("load",l,!1),o.removeEventListener("error",u,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),mu.add(`image:${e}`,o),a.manager.itemStart(e),o.src=e,o}}class pq extends eo{constructor(e){super(e)}load(e,n,i,r){const a=new xb;a.colorSpace=Kn;const s=new v1(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function l(u){s.load(e[u],function(h){a.images[u]=h,o++,o===6&&(a.needsUpdate=!0,n&&n(a))},void 0,r)}for(let u=0;u<e.length;++u)l(u);return a}}class hD extends eo{constructor(e){super(e)}load(e,n,i,r){const a=this,s=new Xo,o=new $o(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(a.withCredentials),o.load(e,function(l){let u;try{u=a.parse(l)}catch(h){if(r!==void 0)r(h);else{h(h);return}}u.image!==void 0?s.image=u.image:u.data!==void 0&&(s.image.width=u.width,s.image.height=u.height,s.image.data=u.data),s.wrapS=u.wrapS!==void 0?u.wrapS:qr,s.wrapT=u.wrapT!==void 0?u.wrapT:qr,s.magFilter=u.magFilter!==void 0?u.magFilter:Rn,s.minFilter=u.minFilter!==void 0?u.minFilter:Rn,s.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(s.colorSpace=u.colorSpace),u.flipY!==void 0&&(s.flipY=u.flipY),u.format!==void 0&&(s.format=u.format),u.type!==void 0&&(s.type=u.type),u.mipmaps!==void 0&&(s.mipmaps=u.mipmaps,s.minFilter=Sc),u.mipmapCount===1&&(s.minFilter=Rn),u.generateMipmaps!==void 0&&(s.generateMipmaps=u.generateMipmaps),s.needsUpdate=!0,n&&n(s,u)},i,r),s}}class Tte extends eo{constructor(e){super(e)}load(e,n,i,r){const a=new ji,s=new v1(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(o){a.image=o,a.needsUpdate=!0,n!==void 0&&n(a)},i,r),a}}class nd extends xi{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new zt(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(n.object.target=this.target.uuid),n}}class mq extends nd{constructor(e,n,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(xi.DEFAULT_UP),this.updateMatrix(),this.groundColor=new zt(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const VA=new un,x8=new se,y8=new se;class dD{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ye(512,512),this.mapType=nr,this.map=null,this.mapPass=null,this.matrix=new un,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Qg,this._frameExtents=new Ye(1,1),this._viewportCount=1,this._viewports=[new Cn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,i=this.matrix;x8.setFromMatrixPosition(e.matrixWorld),n.position.copy(x8),y8.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(y8),n.updateMatrixWorld(),VA.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(VA,n.coordinateSystem,n.reversedDepth),n.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(VA)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class wte extends dD{constructor(){super(new Ji(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const n=this.camera,i=vg*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,a=e.distance||n.far;(i!==n.fov||r!==n.aspect||a!==n.far)&&(n.fov=i,n.aspect=r,n.far=a,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class gq extends nd{constructor(e,n,i=0,r=Math.PI/3,a=0,s=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(xi.DEFAULT_UP),this.updateMatrix(),this.target=new xi,this.distance=i,this.angle=r,this.penumbra=a,this.decay=s,this.map=null,this.shadow=new wte}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const b8=new un,Wx=new se,HA=new se;class Ate extends dD{constructor(){super(new Ji(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ye(4,2),this._viewportCount=6,this._viewports=[new Cn(2,1,1,1),new Cn(0,1,1,1),new Cn(3,1,1,1),new Cn(1,1,1,1),new Cn(3,0,1,1),new Cn(1,0,1,1)],this._cubeDirections=[new se(1,0,0),new se(-1,0,0),new se(0,0,1),new se(0,0,-1),new se(0,1,0),new se(0,-1,0)],this._cubeUps=[new se(0,1,0),new se(0,1,0),new se(0,1,0),new se(0,1,0),new se(0,0,1),new se(0,0,-1)]}updateMatrices(e,n=0){const i=this.camera,r=this.matrix,a=e.distance||i.far;a!==i.far&&(i.far=a,i.updateProjectionMatrix()),Wx.setFromMatrixPosition(e.matrixWorld),i.position.copy(Wx),HA.copy(i.position),HA.add(this._cubeDirections[n]),i.up.copy(this._cubeUps[n]),i.lookAt(HA),i.updateMatrixWorld(),r.makeTranslation(-Wx.x,-Wx.y,-Wx.z),b8.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(b8,i.coordinateSystem,i.reversedDepth)}}class vq extends nd{constructor(e,n,i=0,r=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new Ate}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Ol extends vb{constructor(e=-1,n=1,i=1,r=-1,a=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=i,this.bottom=r,this.near=a,this.far=s,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,i,r,a,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let a=i-e,s=i+e,o=r+n,l=r-n;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=u*this.view.offsetX,s=a+u*this.view.width,o-=h*this.view.offsetY,l=o-h*this.view.height}this.projectionMatrix.makeOrthographic(a,s,o,l,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}class Ete extends dD{constructor(){super(new Ol(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class xq extends nd{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(xi.DEFAULT_UP),this.updateMatrix(),this.target=new xi,this.shadow=new Ete}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class yq extends nd{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class bq extends nd{constructor(e,n,i=10,r=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class Sq{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new se)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const i=e.x,r=e.y,a=e.z,s=this.coefficients;return n.copy(s[0]).multiplyScalar(.282095),n.addScaledVector(s[1],.488603*r),n.addScaledVector(s[2],.488603*a),n.addScaledVector(s[3],.488603*i),n.addScaledVector(s[4],1.092548*(i*r)),n.addScaledVector(s[5],1.092548*(r*a)),n.addScaledVector(s[6],.315392*(3*a*a-1)),n.addScaledVector(s[7],1.092548*(i*a)),n.addScaledVector(s[8],.546274*(i*i-r*r)),n}getIrradianceAt(e,n){const i=e.x,r=e.y,a=e.z,s=this.coefficients;return n.copy(s[0]).multiplyScalar(.886227),n.addScaledVector(s[1],2*.511664*r),n.addScaledVector(s[2],2*.511664*a),n.addScaledVector(s[3],2*.511664*i),n.addScaledVector(s[4],2*.429043*i*r),n.addScaledVector(s[5],2*.429043*r*a),n.addScaledVector(s[6],.743125*a*a-.247708),n.addScaledVector(s[7],2*.429043*i*a),n.addScaledVector(s[8],.429043*(i*i-r*r)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,n+r*3);return this}toArray(e=[],n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,n+r*3);return e}static getBasisAt(e,n){const i=e.x,r=e.y,a=e.z;n[0]=.282095,n[1]=.488603*r,n[2]=.488603*a,n[3]=.488603*i,n[4]=1.092548*i*r,n[5]=1.092548*r*a,n[6]=.315392*(3*a*a-1),n[7]=1.092548*i*a,n[8]=.546274*(i*i-r*r)}}class Mq extends nd{constructor(e=new Sq,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class jT extends eo{constructor(e){super(e),this.textures={}}load(e,n,i,r){const a=this,s=new $o(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{n(a.parse(JSON.parse(o)))}catch(l){r?r(l):wn(l),a.manager.itemError(e)}},i,r)}parse(e){const n=this.textures;function i(a){return n[a]===void 0&&Wt("MaterialLoader: Undefined texture",a),n[a]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new zt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const s=e.uniforms[a];switch(r.uniforms[a]={},s.type){case"t":r.uniforms[a].value=i(s.value);break;case"c":r.uniforms[a].value=new zt().setHex(s.value);break;case"v2":r.uniforms[a].value=new Ye().fromArray(s.value);break;case"v3":r.uniforms[a].value=new se().fromArray(s.value);break;case"v4":r.uniforms[a].value=new Cn().fromArray(s.value);break;case"m3":r.uniforms[a].value=new Nn().fromArray(s.value);break;case"m4":r.uniforms[a].value=new un().fromArray(s.value);break;default:r.uniforms[a].value=s.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)r.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),r.normalScale=new Ye().fromArray(a)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Ye().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return jT.createMaterialFromType(e)}static createMaterialFromType(e){const n={ShadowMaterial:eq,SpriteMaterial:KO,RawShaderMaterial:tq,ShaderMaterial:di,PointsMaterial:JO,MeshPhysicalMaterial:nq,MeshStandardMaterial:Ab,MeshPhongMaterial:iq,MeshToonMaterial:rq,MeshNormalMaterial:lD,MeshLambertMaterial:aq,MeshDepthMaterial:Eb,MeshDistanceMaterial:CT,MeshBasicMaterial:Au,MeshMatcapMaterial:sq,LineDashedMaterial:oq,LineBasicMaterial:Js,Material:za};return new n[e]}}class Nj{static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class NT extends An{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class _q extends eo{constructor(e){super(e)}load(e,n,i,r){const a=this,s=new $o(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{n(a.parse(JSON.parse(o)))}catch(l){r?r(l):wn(l),a.manager.itemError(e)}},i,r)}parse(e){const n={},i={};function r(x,b){if(n[b]!==void 0)return n[b];const S=x.interleavedBuffers[b],T=a(x,S.buffer),A=Km(S.type,T),E=new dT(A,S.stride);return E.uuid=S.uuid,n[b]=E,E}function a(x,b){if(i[b]!==void 0)return i[b];const S=x.arrayBuffers[b],T=new Uint32Array(S).buffer;return i[b]=T,T}const s=e.isInstancedBufferGeometry?new NT:new An,o=e.data.index;if(o!==void 0){const x=Km(o.type,o.array);s.setIndex(new yi(x,1))}const l=e.data.attributes;for(const x in l){const b=l[x];let M;if(b.isInterleavedBufferAttribute){const S=r(e.data,b.data);M=new qo(S,b.itemSize,b.offset,b.normalized)}else{const S=Km(b.type,b.array),T=b.isInstancedBufferAttribute?$0:yi;M=new T(S,b.itemSize,b.normalized)}b.name!==void 0&&(M.name=b.name),b.usage!==void 0&&M.setUsage(b.usage),s.setAttribute(x,M)}const u=e.data.morphAttributes;if(u)for(const x in u){const b=u[x],M=[];for(let S=0,T=b.length;S<T;S++){const A=b[S];let E;if(A.isInterleavedBufferAttribute){const j=r(e.data,A.data);E=new qo(j,A.itemSize,A.offset,A.normalized)}else{const j=Km(A.type,A.array);E=new yi(j,A.itemSize,A.normalized)}A.name!==void 0&&(E.name=A.name),M.push(E)}s.morphAttributes[x]=M}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let x=0,b=p.length;x!==b;++x){const M=p[x];s.addGroup(M.start,M.count,M.materialIndex)}const g=e.data.boundingSphere;return g!==void 0&&(s.boundingSphere=new la().fromJSON(g)),e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class Cte extends eo{constructor(e){super(e)}load(e,n,i,r){const a=this,s=this.path===""?Nj.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new $o(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(p){r!==void 0&&r(p),p("ObjectLoader: Can't parse "+e+".",p.message);return}const h=u.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),wn("ObjectLoader: Can't load "+e);return}a.parse(u,n)},i,r)}async loadAsync(e,n){const i=this,r=this.path===""?Nj.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const a=new $o(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const s=await a.loadAsync(e,n),o=JSON.parse(s),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(o)}parse(e,n){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,r),s=this.parseImages(e.images,function(){n!==void 0&&n(u)}),o=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,a,l,o,i),h=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,h),this.bindLightTargets(u),n!==void 0){let p=!1;for(const g in s)if(s[g].data instanceof HTMLImageElement){p=!0;break}p===!1&&n(u)}return u}async parseAsync(e){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),a=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,r,o,s,n),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),this.bindLightTargets(l),l}parseShapes(e){const n={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const a=new Af().fromJSON(e[i]);n[a.uuid]=a}return n}parseSkeletons(e,n){const i={},r={};if(n.traverse(function(a){a.isBone&&(r[a.uuid]=a)}),e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=new pT().fromJSON(e[a],r);i[o.uuid]=o}return i}parseGeometries(e,n){const i={};if(e!==void 0){const r=new _q;for(let a=0,s=e.length;a<s;a++){let o;const l=e[a];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(l);break;default:l.type in v8?o=v8[l.type].fromJSON(l,n):Wt(`ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),l.userData!==void 0&&(o.userData=l.userData),i[l.uuid]=o}}return i}parseMaterials(e,n){const i={},r={};if(e!==void 0){const a=new jT;a.setTextures(n);for(let s=0,o=e.length;s<o;s++){const l=e[s];i[l.uuid]===void 0&&(i[l.uuid]=a.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const n={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],a=g1.parse(r);n[a.uuid]=a}return n}parseImages(e,n){const i=this,r={};let a;function s(l){return i.manager.itemStart(l),a.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const u=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:i.resourcePath+u;return s(h)}else return l.data?{data:Km(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new RT(n);a=new v1(l),a.setCrossOrigin(this.crossOrigin);for(let u=0,h=e.length;u<h;u++){const p=e[u],g=p.url;if(Array.isArray(g)){const x=[];for(let b=0,M=g.length;b<M;b++){const S=g[b],T=o(S);T!==null&&(T instanceof HTMLImageElement?x.push(T):x.push(new Xo(T.data,T.width,T.height)))}r[p.uuid]=new kh(x)}else{const x=o(p.url);r[p.uuid]=new kh(x)}}}return r}async parseImagesAsync(e){const n=this,i={};let r;async function a(s){if(typeof s=="string"){const o=s,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:n.resourcePath+o;return await r.loadAsync(l)}else return s.data?{data:Km(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){r=new v1(this.manager),r.setCrossOrigin(this.crossOrigin);for(let s=0,o=e.length;s<o;s++){const l=e[s],u=l.url;if(Array.isArray(u)){const h=[];for(let p=0,g=u.length;p<g;p++){const x=u[p],b=await a(x);b!==null&&(b instanceof HTMLImageElement?h.push(b):h.push(new Xo(b.data,b.width,b.height)))}i[l.uuid]=new kh(h)}else{const h=await a(l.url);i[l.uuid]=new kh(h)}}}return i}parseTextures(e,n){function i(a,s){return typeof a=="number"?a:(Wt("ObjectLoader.parseTexture: Constant should be in numeric form.",a),s[a])}const r={};if(e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=e[a];o.image===void 0&&Wt('ObjectLoader: No "image" specified for',o.uuid),n[o.image]===void 0&&Wt("ObjectLoader: Undefined image",o.image);const l=n[o.image],u=l.data;let h;Array.isArray(u)?(h=new xb,u.length===6&&(h.needsUpdate=!0)):(u&&u.data?h=new Xo:h=new ji,u&&(h.needsUpdate=!0)),h.source=l,h.uuid=o.uuid,o.name!==void 0&&(h.name=o.name),o.mapping!==void 0&&(h.mapping=i(o.mapping,Rte)),o.channel!==void 0&&(h.channel=o.channel),o.offset!==void 0&&h.offset.fromArray(o.offset),o.repeat!==void 0&&h.repeat.fromArray(o.repeat),o.center!==void 0&&h.center.fromArray(o.center),o.rotation!==void 0&&(h.rotation=o.rotation),o.wrap!==void 0&&(h.wrapS=i(o.wrap[0],S8),h.wrapT=i(o.wrap[1],S8)),o.format!==void 0&&(h.format=o.format),o.internalFormat!==void 0&&(h.internalFormat=o.internalFormat),o.type!==void 0&&(h.type=o.type),o.colorSpace!==void 0&&(h.colorSpace=o.colorSpace),o.minFilter!==void 0&&(h.minFilter=i(o.minFilter,M8)),o.magFilter!==void 0&&(h.magFilter=i(o.magFilter,M8)),o.anisotropy!==void 0&&(h.anisotropy=o.anisotropy),o.flipY!==void 0&&(h.flipY=o.flipY),o.generateMipmaps!==void 0&&(h.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(h.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(h.compareFunction=o.compareFunction),o.userData!==void 0&&(h.userData=o.userData),r[o.uuid]=h}return r}parseObject(e,n,i,r,a){let s;function o(g){return n[g]===void 0&&Wt("ObjectLoader: Undefined geometry",g),n[g]}function l(g){if(g!==void 0){if(Array.isArray(g)){const x=[];for(let b=0,M=g.length;b<M;b++){const S=g[b];i[S]===void 0&&Wt("ObjectLoader: Undefined material",S),x.push(i[S])}return x}return i[g]===void 0&&Wt("ObjectLoader: Undefined material",g),i[g]}}function u(g){return r[g]===void 0&&Wt("ObjectLoader: Undefined texture",g),r[g]}let h,p;switch(e.type){case"Scene":s=new Zh,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new zt(e.background):s.background=u(e.background)),e.environment!==void 0&&(s.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new hT(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new fT(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&s.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(s.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&s.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":s=new Ji(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Ol(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new yq(e.color,e.intensity);break;case"DirectionalLight":s=new xq(e.color,e.intensity),s.target=e.target||"";break;case"PointLight":s=new vq(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new bq(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new gq(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),s.target=e.target||"";break;case"HemisphereLight":s=new mq(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=new Mq().fromJSON(e);break;case"SkinnedMesh":h=o(e.geometry),p=l(e.material),s=new zH(h,p),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":h=o(e.geometry),p=l(e.material),s=new zi(h,p);break;case"InstancedMesh":h=o(e.geometry),p=l(e.material);const g=e.count,x=e.instanceMatrix,b=e.instanceColor;s=new kH(h,p,g),s.instanceMatrix=new $0(new Float32Array(x.array),16),b!==void 0&&(s.instanceColor=new $0(new Float32Array(b.array),b.itemSize));break;case"BatchedMesh":h=o(e.geometry),p=l(e.material),s=new FH(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,p),s.geometry=h,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._geometryInfo=e.geometryInfo.map(M=>{let S=null,T=null;return M.boundingBox!==void 0&&(S=new ea().fromJSON(M.boundingBox)),M.boundingSphere!==void 0&&(T=new la().fromJSON(M.boundingSphere)),{...M,boundingBox:S,boundingSphere:T}}),s._instanceInfo=e.instanceInfo,s._availableInstanceIds=e._availableInstanceIds,s._availableGeometryIds=e._availableGeometryIds,s._nextIndexStart=e.nextIndexStart,s._nextVertexStart=e.nextVertexStart,s._geometryCount=e.geometryCount,s._maxInstanceCount=e.maxInstanceCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._matricesTexture=u(e.matricesTexture.uuid),s._indirectTexture=u(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(s._colorsTexture=u(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(s.boundingSphere=new la().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(s.boundingBox=new ea().fromJSON(e.boundingBox));break;case"LOD":s=new BH;break;case"Line":s=new Kh(o(e.geometry),l(e.material));break;case"LineLoop":s=new GH(o(e.geometry),l(e.material));break;case"LineSegments":s=new Eu(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":s=new VH(o(e.geometry),l(e.material));break;case"Sprite":s=new LH(l(e.material));break;case"Group":s=new Qm;break;case"Bone":s=new QO;break;default:s=new xi}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(s.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const g=e.children;for(let x=0;x<g.length;x++)s.add(this.parseObject(g[x],n,i,r,a))}if(e.animations!==void 0){const g=e.animations;for(let x=0;x<g.length;x++){const b=g[x];s.animations.push(a[b])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const g=e.levels;for(let x=0;x<g.length;x++){const b=g[x],M=s.getObjectByProperty("uuid",b.object);M!==void 0&&s.addLevel(M,b.distance,b.hysteresis)}}return s}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=n[i.skeleton];r===void 0?Wt("ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(n){if(n.isDirectionalLight||n.isSpotLight){const i=n.target,r=e.getObjectByProperty("uuid",i);r!==void 0?n.target=r:n.target=new xi}})}}const Rte={UVMapping:Xh,CubeReflectionMapping:Tu,CubeRefractionMapping:$h,EquirectangularReflectionMapping:pg,EquirectangularRefractionMapping:n1,CubeUVReflectionMapping:Kg},S8={RepeatWrapping:ar,ClampToEdgeWrapping:qr,MirroredRepeatWrapping:i1},M8={NearestFilter:Ir,NearestMipmapNearestFilter:BO,NearestMipmapLinearFilter:Zm,LinearFilter:Rn,LinearMipmapNearestFilter:Oy,LinearMipmapLinearFilter:Sc},qA=new WeakMap;class jte extends eo{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&Wt("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&Wt("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,n,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=mu.get(`image-bitmap:${e}`);if(s!==void 0){if(a.manager.itemStart(e),s.then){s.then(u=>{if(qA.has(s)===!0)r&&r(qA.get(s)),a.manager.itemError(e),a.manager.itemEnd(e);else return n&&n(u),a.manager.itemEnd(e),u});return}return setTimeout(function(){n&&n(s),a.manager.itemEnd(e)},0),s}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,o.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const l=fetch(e,o).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(u){return mu.add(`image-bitmap:${e}`,u),n&&n(u),a.manager.itemEnd(e),u}).catch(function(u){r&&r(u),qA.set(l,u),mu.remove(`image-bitmap:${e}`),a.manager.itemError(e),a.manager.itemEnd(e)});mu.add(`image-bitmap:${e}`,l),a.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let kS,pD=class{static getContext(){return kS===void 0&&(kS=new(window.AudioContext||window.webkitAudioContext)),kS}static setContext(e){kS=e}};class Nte extends eo{constructor(e){super(e)}load(e,n,i,r){const a=this,s=new $o(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){try{const u=l.slice(0);pD.getContext().decodeAudioData(u,function(p){n(p)}).catch(o)}catch(u){o(u)}},i,r);function o(l){r?r(l):wn(l),a.manager.itemError(e)}}}const _8=new un,T8=new un,e0=new un;class Ote{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ji,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ji,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,e0.copy(e.projectionMatrix);const r=n.eyeSep/2,a=r*n.near/n.focus,s=n.near*Math.tan(U0*n.fov*.5)/n.zoom;let o,l;T8.elements[12]=-r,_8.elements[12]=r,o=-s*n.aspect+a,l=s*n.aspect+a,e0.elements[0]=2*n.near/(l-o),e0.elements[8]=(l+o)/(l-o),this.cameraL.projectionMatrix.copy(e0),o=-s*n.aspect-a,l=s*n.aspect-a,e0.elements[0]=2*n.near/(l-o),e0.elements[8]=(l+o)/(l-o),this.cameraR.projectionMatrix.copy(e0)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(T8),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(_8)}}class Tq extends Ji{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}let mD=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=performance.now();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}};const t0=new se,WA=new Jr,Dte=new se,n0=new se,i0=new se;class Pte extends xi{constructor(){super(),this.type="AudioListener",this.context=pD.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new mD}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(t0,WA,Dte),n0.set(0,0,-1).applyQuaternion(WA),i0.set(0,1,0).applyQuaternion(WA),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(t0.x,i),n.positionY.linearRampToValueAtTime(t0.y,i),n.positionZ.linearRampToValueAtTime(t0.z,i),n.forwardX.linearRampToValueAtTime(n0.x,i),n.forwardY.linearRampToValueAtTime(n0.y,i),n.forwardZ.linearRampToValueAtTime(n0.z,i),n.upX.linearRampToValueAtTime(i0.x,i),n.upY.linearRampToValueAtTime(i0.y,i),n.upZ.linearRampToValueAtTime(i0.z,i)}else n.setPosition(t0.x,t0.y,t0.z),n.setOrientation(n0.x,n0.y,n0.z,i0.x,i0.y,i0.z)}}let wq=class extends xi{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){Wt("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){Wt("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){Wt("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){Wt("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){Wt("Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(Wt("Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){Wt("Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,n){return super.copy(e,n),e.sourceType!=="buffer"?(Wt("Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}};const r0=new se,w8=new Jr,Ite=new se,a0=new se;class Ute extends wq{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(r0,w8,Ite),a0.set(0,0,1).applyQuaternion(w8);const n=this.panner;if(n.positionX){const i=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(r0.x,i),n.positionY.linearRampToValueAtTime(r0.y,i),n.positionZ.linearRampToValueAtTime(r0.z,i),n.orientationX.linearRampToValueAtTime(a0.x,i),n.orientationY.linearRampToValueAtTime(a0.y,i),n.orientationZ.linearRampToValueAtTime(a0.z,i)}else n.setPosition(r0.x,r0.y,r0.z),n.setOrientation(a0.x,a0.y,a0.z)}}class Lte{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let i=0;i<n.length;i++)e+=n[i];return e/n.length}}class Aq{constructor(e,n,i){this.binding=e,this.valueSize=i;let r,a,s;switch(n){case"quaternion":r=this._slerp,a=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,a=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,a=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=a,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const i=this.buffer,r=this.valueSize,a=e*r+r;let s=this.cumulativeWeight;if(s===0){for(let o=0;o!==r;++o)i[a+o]=i[o];s=n}else{s+=n;const o=n/s;this._mixBufferRegion(i,a,0,o,r)}this.cumulativeWeight=s}accumulateAdditive(e){const n=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,i=this.buffer,r=e*n+n,a=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const l=n*this._origIndex;this._mixBufferRegion(i,r,l,1-a,n)}s>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*n,1,n);for(let l=n,u=n+n;l!==u;++l)if(i[l]!==i[l+n]){o.setValue(i,r);break}}saveOriginalState(){const e=this.binding,n=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(n,r);for(let a=i,s=r;a!==s;++a)n[a]=n[r+a%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let i=e;i<n;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[n+i]=this.buffer[e+i]}_select(e,n,i,r,a){if(r>=.5)for(let s=0;s!==a;++s)e[n+s]=e[i+s]}_slerp(e,n,i,r){Jr.slerpFlat(e,n,e,n,e,i,r)}_slerpAdditive(e,n,i,r,a){const s=this._workIndex*a;Jr.multiplyQuaternionsFlat(e,s,e,n,e,i),Jr.slerpFlat(e,n,e,n,e,s,r)}_lerp(e,n,i,r,a){const s=1-r;for(let o=0;o!==a;++o){const l=n+o;e[l]=e[l]*s+e[i+o]*r}}_lerpAdditive(e,n,i,r,a){for(let s=0;s!==a;++s){const o=n+s;e[o]=e[o]+e[i+s]*r}}}const gD="\\[\\]\\.:\\/",Bte=new RegExp("["+gD+"]","g"),vD="[^"+gD+"]",zte="[^"+gD.replace("\\.","")+"]",kte=/((?:WC+[\/:])*)/.source.replace("WC",vD),Fte=/(WCOD+)?/.source.replace("WCOD",zte),Gte=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",vD),Vte=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",vD),Hte=new RegExp("^"+kte+Fte+Gte+Vte+"$"),qte=["material","materials","bones","map"];class Wte{constructor(e,n,i){const r=i||gi.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,r)}getValue(e,n){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,n)}setValue(e,n){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,a=i.length;r!==a;++r)i[r].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].unbind()}}class gi{constructor(e,n,i){this.path=n,this.parsedPath=i||gi.parseTrackName(n),this.node=gi.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,i){return e&&e.isAnimationObjectGroup?new gi.Composite(e,n,i):new gi(e,n,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Bte,"")}static parseTrackName(e){const n=Hte.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const a=i.nodeName.substring(r+1);qte.indexOf(a)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=a)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(n);if(i!==void 0)return i}if(e.children){const i=function(a){for(let s=0;s<a.length;s++){const o=a[s];if(o.name===n||o.uuid===n)return o;const l=i(o.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)e[n++]=i[r]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,i=n.objectName,r=n.propertyName;let a=n.propertyIndex;if(e||(e=gi.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){Wt("PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let u=n.objectIndex;switch(i){case"materials":if(!e.material){wn("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){wn("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){wn("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===u){u=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){wn("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){wn("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){wn("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(u!==void 0){if(e[u]===void 0){wn("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const s=e[r];if(s===void 0){const u=n.nodeName;wn("PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?o=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(a!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){wn("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){wn("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=a}else s.fromArray!==void 0&&s.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}gi.Composite=Wte;gi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};gi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};gi.prototype.GetterByBindingType=[gi.prototype._getValue_direct,gi.prototype._getValue_array,gi.prototype._getValue_arrayElement,gi.prototype._getValue_toArray];gi.prototype.SetterByBindingTypeAndVersioning=[[gi.prototype._setValue_direct,gi.prototype._setValue_direct_setNeedsUpdate,gi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[gi.prototype._setValue_array,gi.prototype._setValue_array_setNeedsUpdate,gi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[gi.prototype._setValue_arrayElement,gi.prototype._setValue_arrayElement_setNeedsUpdate,gi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[gi.prototype._setValue_fromArray,gi.prototype._setValue_fromArray_setNeedsUpdate,gi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Xte{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Wo(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,i=this._paths,r=this._parsedPaths,a=this._bindings,s=a.length;let o,l=e.length,u=this.nCachedObjects_;for(let h=0,p=arguments.length;h!==p;++h){const g=arguments[h],x=g.uuid;let b=n[x];if(b===void 0){b=l++,n[x]=b,e.push(g);for(let M=0,S=s;M!==S;++M)a[M].push(new gi(g,i[M],r[M]))}else if(b<u){o=e[b];const M=--u,S=e[M];n[S.uuid]=b,e[b]=S,n[x]=M,e[M]=g;for(let T=0,A=s;T!==A;++T){const E=a[T],j=E[M];let R=E[b];E[b]=j,R===void 0&&(R=new gi(g,i[T],r[T])),E[M]=R}}else e[b]!==o&&wn("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_;for(let s=0,o=arguments.length;s!==o;++s){const l=arguments[s],u=l.uuid,h=n[u];if(h!==void 0&&h>=a){const p=a++,g=e[p];n[g.uuid]=h,e[h]=g,n[u]=p,e[p]=l;for(let x=0,b=r;x!==b;++x){const M=i[x],S=M[p],T=M[h];M[h]=S,M[p]=T}}}this.nCachedObjects_=a}uncache(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,r=i.length;let a=this.nCachedObjects_,s=e.length;for(let o=0,l=arguments.length;o!==l;++o){const u=arguments[o],h=u.uuid,p=n[h];if(p!==void 0)if(delete n[h],p<a){const g=--a,x=e[g],b=--s,M=e[b];n[x.uuid]=p,e[p]=x,n[M.uuid]=g,e[g]=M,e.pop();for(let S=0,T=r;S!==T;++S){const A=i[S],E=A[g],j=A[b];A[p]=E,A[g]=j,A.pop()}}else{const g=--s,x=e[g];g>0&&(n[x.uuid]=p),e[p]=x,e.pop();for(let b=0,M=r;b!==M;++b){const S=i[b];S[p]=S[g],S.pop()}}}this.nCachedObjects_=a}subscribe_(e,n){const i=this._bindingsIndicesByPath;let r=i[e];const a=this._bindings;if(r!==void 0)return a[r];const s=this._paths,o=this._parsedPaths,l=this._objects,u=l.length,h=this.nCachedObjects_,p=new Array(u);r=a.length,i[e]=r,s.push(e),o.push(n),a.push(p);for(let g=h,x=l.length;g!==x;++g){const b=l[g];p[g]=new gi(b,e,n)}return p}unsubscribe_(e){const n=this._bindingsIndicesByPath,i=n[e];if(i!==void 0){const r=this._paths,a=this._parsedPaths,s=this._bindings,o=s.length-1,l=s[o],u=e[o];n[u]=i,s[i]=l,s.pop(),a[i]=a[o],a.pop(),r[i]=r[o],r.pop()}}}class Eq{constructor(e,n,i=null,r=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=i,this.blendMode=r;const a=n.tracks,s=a.length,o=new Array(s),l={endingStart:T0,endingEnd:T0};for(let u=0;u!==s;++u){const h=a[u].createInterpolant(null);o[u]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=SH,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,i=!1){if(e.fadeOut(n),this.fadeIn(n),i===!0){const r=this._clip.duration,a=e._clip.duration,s=a/r,o=r/a;e.warp(1,s,n),this.warp(o,1,n)}return this}crossFadeTo(e,n,i=!1){return e.crossFadeFrom(this,n,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,i){const r=this._mixer,a=r.time,s=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,u=o.sampleValues;return l[0]=a,l[1]=a+i,u[0]=e/s,u[1]=n/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,i,r){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const l=(e-a)*i;l<0||i===0?n=0:(this._startTime=null,n=i*l)}n*=this._updateTimeScale(e);const s=this._updateTime(n),o=this._updateWeight(e);if(o>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case VO:for(let h=0,p=l.length;h!==p;++h)l[h].evaluate(s),u[h].accumulateAdditive(o);break;case oT:default:for(let h=0,p=l.length;h!==p;++h)l[h].evaluate(s),u[h].accumulate(r,o)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];n*=r,e>i.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,i=this.loop;let r=this.time+e,a=this._loopCount;const s=i===MH;if(e===0)return a===-1?r:s&&(a&1)===1?n-r:r;if(i===bH){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=n)r=n;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),r>=n||r<0){const o=Math.floor(r/n);r-=n*o,a+=Math.abs(o);const l=this.repetitions-a;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?n:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,s)}else this._setEndings(!1,!1,s);this._loopCount=a,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(s&&(a&1)===1)return n-r}return r}_setEndings(e,n,i){const r=this._interpolantSettings;i?(r.endingStart=w0,r.endingEnd=w0):(e?r.endingStart=this.zeroSlopeAtStart?w0:T0:r.endingStart=a1,n?r.endingEnd=this.zeroSlopeAtEnd?w0:T0:r.endingEnd=a1)}_scheduleFading(e,n,i){const r=this._mixer,a=r.time;let s=this._weightInterpolant;s===null&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);const o=s.parameterPositions,l=s.sampleValues;return o[0]=a,l[0]=n,o[1]=a+e,l[1]=i,this}}const $te=new Float32Array(1);class Yte extends tl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const i=e._localRoot||this._root,r=e._clip.tracks,a=r.length,s=e._propertyBindings,o=e._interpolants,l=i.uuid,u=this._bindingsByRootAndName;let h=u[l];h===void 0&&(h={},u[l]=h);for(let p=0;p!==a;++p){const g=r[p],x=g.name;let b=h[x];if(b!==void 0)++b.referenceCount,s[p]=b;else{if(b=s[p],b!==void 0){b._cacheIndex===null&&(++b.referenceCount,this._addInactiveBinding(b,l,x));continue}const M=n&&n._propertyBindings[p].binding.parsedPath;b=new Aq(gi.create(i,x,M),g.ValueTypeName,g.getValueSize()),++b.referenceCount,this._addInactiveBinding(b,l,x),s[p]=b}o[p].resultBuffer=b.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,a=this._actionsByClip[r];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,r,i)}const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const a=n[i];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const a=n[i];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,i){const r=this._actions,a=this._actionsByClip;let s=a[n];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[n]=s;else{const o=s.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[i]=e}_removeInactiveAction(e){const n=this._actions,i=n[n.length-1],r=e._cacheIndex;i._cacheIndex=r,n[r]=i,n.pop(),e._cacheIndex=null;const a=e._clip.uuid,s=this._actionsByClip,o=s[a],l=o.knownActions,u=l[l.length-1],h=e._byClipCacheIndex;u._byClipCacheIndex=h,l[h]=u,l.pop(),e._byClipCacheIndex=null;const p=o.actionByRoot,g=(e._localRoot||this._root).uuid;delete p[g],l.length===0&&delete s[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let i=0,r=n.length;i!==r;++i){const a=n[i];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const n=this._actions,i=e._cacheIndex,r=this._nActiveActions++,a=n[r];e._cacheIndex=r,n[r]=e,a._cacheIndex=i,n[i]=a}_takeBackAction(e){const n=this._actions,i=e._cacheIndex,r=--this._nActiveActions,a=n[r];e._cacheIndex=r,n[r]=e,a._cacheIndex=i,n[i]=a}_addInactiveBinding(e,n,i){const r=this._bindingsByRootAndName,a=this._bindings;let s=r[n];s===void 0&&(s={},r[n]=s),s[i]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const n=this._bindings,i=e.binding,r=i.rootNode.uuid,a=i.path,s=this._bindingsByRootAndName,o=s[r],l=n[n.length-1],u=e._cacheIndex;l._cacheIndex=u,n[u]=l,n.pop(),delete o[a],Object.keys(o).length===0&&delete s[r]}_lendBinding(e){const n=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,a=n[r];e._cacheIndex=r,n[r]=e,a._cacheIndex=i,n[i]=a}_takeBackBinding(e){const n=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,a=n[r];e._cacheIndex=r,n[r]=e,a._cacheIndex=i,n[i]=a}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let i=e[n];return i===void 0&&(i=new uD(new Float32Array(2),new Float32Array(2),1,$te),i.__cacheIndex=n,e[n]=i),i}_takeBackControlInterpolant(e){const n=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,a=n[r];e.__cacheIndex=r,n[r]=e,a.__cacheIndex=i,n[i]=a}clipAction(e,n,i){const r=n||this._root,a=r.uuid;let s=typeof e=="string"?g1.findByName(r,e):e;const o=s!==null?s.uuid:e,l=this._actionsByClip[o];let u=null;if(i===void 0&&(s!==null?i=s.blendMode:i=oT),l!==void 0){const p=l.actionByRoot[a];if(p!==void 0&&p.blendMode===i)return p;u=l.knownActions[0],s===null&&(s=u._clip)}if(s===null)return null;const h=new Eq(this,s,n,i);return this._bindAction(h,u),this._addInactiveAction(h,o,a),h}existingAction(e,n){const i=n||this._root,r=i.uuid,a=typeof e=="string"?g1.findByName(i,e):e,s=a?a.uuid:e,o=this._actionsByClip[s];return o!==void 0&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let i=n-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const n=this._actions,i=this._nActiveActions,r=this.time+=e,a=Math.sign(e),s=this._accuIndex^=1;for(let u=0;u!==i;++u)n[u]._update(r,e,a,s);const o=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)o[u].apply(s);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,i=e.uuid,r=this._actionsByClip,a=r[i];if(a!==void 0){const s=a.knownActions;for(let o=0,l=s.length;o!==l;++o){const u=s[o];this._deactivateAction(u);const h=u._cacheIndex,p=n[n.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,p._cacheIndex=h,n[h]=p,n.pop(),this._removeInactiveBindingsForAction(u)}delete r[i]}}uncacheRoot(e){const n=e.uuid,i=this._actionsByClip;for(const s in i){const o=i[s].actionByRoot,l=o[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,a=r[n];if(a!==void 0)for(const s in a){const o=a[s];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,n){const i=this.existingAction(e,n);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class Zte extends XO{constructor(e=1,n=1,i=1,r={}){super(e,n,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new cT(null,e,n,i),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class Et{constructor(e){this.value=e}clone(){return new Et(this.value.clone===void 0?this.value:this.value.clone())}}let Kte=0;class Qte extends tl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Kte++}),this.name="",this.usage=o1,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let i=0,r=n.length;i<r;i++){const a=Array.isArray(n[i])?n[i]:[n[i]];for(let s=0;s<a.length;s++)this.uniforms.push(a[s].clone())}return this}clone(){return new this.constructor().copy(this)}}class G_ extends dT{constructor(e,n,i=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class Jte{constructor(e,n,i,r,a,s=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=i,this.elementSize=r,this.count=a,this.normalized=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const A8=new un;class xD{constructor(e,n,i=0,r=1/0){this.ray=new ip(e,n),this.near=i,this.far=r,this.camera=null,this.layers=new xg,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):wn("Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return A8.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(A8),this}intersectObject(e,n=!0,i=[]){return Oj(e,this,i,n),i.sort(E8),i}intersectObjects(e,n=!0,i=[]){for(let r=0,a=e.length;r<a;r++)Oj(e[r],this,i,n);return i.sort(E8),i}}function E8(t,e){return t.distance-e.distance}function Oj(t,e,n,i){let r=!0;if(t.layers.test(e.layers)&&t.raycast(e,n)===!1&&(r=!1),r===!0&&i===!0){const a=t.children;for(let s=0,o=a.length;s<o;s++)Oj(a[s],e,n,!0)}}let ene=class{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=tne.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}};function tne(){this._document.hidden===!1&&this.reset()}class Dj{constructor(e=1,n=0,i=0){this.radius=e,this.phi=n,this.theta=i}set(e,n,i){return this.radius=e,this.phi=n,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Mn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+n*n+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Mn(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class nne{constructor(e=1,n=0,i=0){this.radius=e,this.theta=n,this.y=i}set(e,n,i){return this.radius=e,this.theta=n,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=n,this}clone(){return new this.constructor().copy(this)}}class yD{constructor(e,n,i,r){yD.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,n,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,n=0){for(let i=0;i<4;i++)this.elements[i]=e[i+n];return this}set(e,n,i,r){const a=this.elements;return a[0]=e,a[2]=n,a[1]=i,a[3]=r,this}}const C8=new Ye;class ine{constructor(e=new Ye(1/0,1/0),n=new Ye(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=C8.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,C8).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const R8=new se,FS=new se,Rm=new se,jm=new se,XA=new se,rne=new se,ane=new se;class Cq{constructor(e=new se,n=new se){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){R8.subVectors(e,this.start),FS.subVectors(this.end,this.start);const i=FS.dot(FS);let a=FS.dot(R8)/i;return n&&(a=Mn(a,0,1)),a}closestPointToPoint(e,n,i){const r=this.closestPointToPointParameter(e,n);return this.delta(i).multiplyScalar(r).add(this.start)}distanceSqToLine3(e,n=rne,i=ane){const r=10000000000000001e-32;let a,s;const o=this.start,l=e.start,u=this.end,h=e.end;Rm.subVectors(u,o),jm.subVectors(h,l),XA.subVectors(o,l);const p=Rm.dot(Rm),g=jm.dot(jm),x=jm.dot(XA);if(p<=r&&g<=r)return n.copy(o),i.copy(l),n.sub(i),n.dot(n);if(p<=r)a=0,s=x/g,s=Mn(s,0,1);else{const b=Rm.dot(XA);if(g<=r)s=0,a=Mn(-b/p,0,1);else{const M=Rm.dot(jm),S=p*g-M*M;S!==0?a=Mn((M*x-b*g)/S,0,1):a=0,s=(M*a+x)/g,s<0?(s=0,a=Mn(-b/p,0,1)):s>1&&(s=1,a=Mn((M-b)/p,0,1))}}return n.copy(o).add(Rm.multiplyScalar(a)),i.copy(l).add(jm.multiplyScalar(s)),n.sub(i),n.dot(n)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const j8=new se;class sne extends xi{constructor(e,n){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const i=new An,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,o=1,l=32;s<l;s++,o++){const u=s/l*Math.PI*2,h=o/l*Math.PI*2;r.push(Math.cos(u),Math.sin(u),1,Math.cos(h),Math.sin(h),1)}i.setAttribute("position",new Qt(r,3));const a=new Js({fog:!1,toneMapped:!1});this.cone=new Eu(i,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),j8.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(j8),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Nh=new se,GS=new un,$A=new un;class one extends Eu{constructor(e){const n=Rq(e),i=new An,r=[],a=[];for(let u=0;u<n.length;u++){const h=n[u];h.parent&&h.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),a.push(0,0,0),a.push(0,0,0))}i.setAttribute("position",new Qt(r,3)),i.setAttribute("color",new Qt(a,3));const s=new Js({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,s),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const o=new zt(255),l=new zt(65280);this.setColors(o,l)}updateMatrixWorld(e){const n=this.bones,i=this.geometry,r=i.getAttribute("position");$A.copy(this.root.matrixWorld).invert();for(let a=0,s=0;a<n.length;a++){const o=n[a];o.parent&&o.parent.isBone&&(GS.multiplyMatrices($A,o.matrixWorld),Nh.setFromMatrixPosition(GS),r.setXYZ(s,Nh.x,Nh.y,Nh.z),GS.multiplyMatrices($A,o.parent.matrixWorld),Nh.setFromMatrixPosition(GS),r.setXYZ(s+1,Nh.x,Nh.y,Nh.z),s+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,n){const r=this.geometry.getAttribute("color");for(let a=0;a<r.count;a+=2)r.setXYZ(a,e.r,e.g,e.b),r.setXYZ(a+1,n.r,n.g,n.b);return r.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function Rq(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push(...Rq(t.children[n]));return e}class lne extends zi{constructor(e,n,i){const r=new Tb(n,4,2),a=new Au({wireframe:!0,fog:!1,toneMapped:!1});super(r,a),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const cne=new se,N8=new zt,O8=new zt;class une extends xi{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Mb(n);r.rotateY(Math.PI*.5),this.material=new Au({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=r.getAttribute("position"),s=new Float32Array(a.count*3);r.setAttribute("color",new yi(s,3)),this.add(new zi(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");N8.copy(this.light.color),O8.copy(this.light.groundColor);for(let i=0,r=n.count;i<r;i++){const a=i<r/2?N8:O8;n.setXYZ(i,a.r,a.g,a.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(cne.setFromMatrixPosition(this.light.matrixWorld).negate())}}class fne extends Eu{constructor(e=10,n=10,i=4473924,r=8947848){i=new zt(i),r=new zt(r);const a=n/2,s=e/n,o=e/2,l=[],u=[];for(let g=0,x=0,b=-o;g<=n;g++,b+=s){l.push(-o,0,b,o,0,b),l.push(b,0,-o,b,0,o);const M=g===a?i:r;M.toArray(u,x),x+=3,M.toArray(u,x),x+=3,M.toArray(u,x),x+=3,M.toArray(u,x),x+=3}const h=new An;h.setAttribute("position",new Qt(l,3)),h.setAttribute("color",new Qt(u,3));const p=new Js({vertexColors:!0,toneMapped:!1});super(h,p),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class hne extends Eu{constructor(e=10,n=16,i=8,r=64,a=4473924,s=8947848){a=new zt(a),s=new zt(s);const o=[],l=[];if(n>1)for(let p=0;p<n;p++){const g=p/n*(Math.PI*2),x=Math.sin(g)*e,b=Math.cos(g)*e;o.push(0,0,0),o.push(x,0,b);const M=p&1?a:s;l.push(M.r,M.g,M.b),l.push(M.r,M.g,M.b)}for(let p=0;p<i;p++){const g=p&1?a:s,x=e-e/i*p;for(let b=0;b<r;b++){let M=b/r*(Math.PI*2),S=Math.sin(M)*x,T=Math.cos(M)*x;o.push(S,0,T),l.push(g.r,g.g,g.b),M=(b+1)/r*(Math.PI*2),S=Math.sin(M)*x,T=Math.cos(M)*x,o.push(S,0,T),l.push(g.r,g.g,g.b)}}const u=new An;u.setAttribute("position",new Qt(o,3)),u.setAttribute("color",new Qt(l,3));const h=new Js({vertexColors:!0,toneMapped:!1});super(u,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const D8=new se,VS=new se,P8=new se;class dne extends xi{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",n===void 0&&(n=1);let r=new An;r.setAttribute("position",new Qt([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const a=new Js({fog:!1,toneMapped:!1});this.lightPlane=new Kh(r,a),this.add(this.lightPlane),r=new An,r.setAttribute("position",new Qt([0,0,0,0,0,1],3)),this.targetLine=new Kh(r,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),D8.setFromMatrixPosition(this.light.matrixWorld),VS.setFromMatrixPosition(this.light.target.matrixWorld),P8.subVectors(VS,D8),this.lightPlane.lookAt(VS),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(VS),this.targetLine.scale.z=P8.length()}}const HS=new se,Fr=new vb;class pne extends Eu{constructor(e){const n=new An,i=new Js({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],a=[],s={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(b,M){l(b),l(M)}function l(b){r.push(0,0,0),a.push(0,0,0),s[b]===void 0&&(s[b]=[]),s[b].push(r.length/3-1)}n.setAttribute("position",new Qt(r,3)),n.setAttribute("color",new Qt(a,3)),super(n,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const u=new zt(16755200),h=new zt(16711680),p=new zt(43775),g=new zt(16777215),x=new zt(3355443);this.setColors(u,h,p,g,x)}setColors(e,n,i,r,a){const o=this.geometry.getAttribute("color");return o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,n.r,n.g,n.b),o.setXYZ(25,n.r,n.g,n.b),o.setXYZ(26,n.r,n.g,n.b),o.setXYZ(27,n.r,n.g,n.b),o.setXYZ(28,n.r,n.g,n.b),o.setXYZ(29,n.r,n.g,n.b),o.setXYZ(30,n.r,n.g,n.b),o.setXYZ(31,n.r,n.g,n.b),o.setXYZ(32,i.r,i.g,i.b),o.setXYZ(33,i.r,i.g,i.b),o.setXYZ(34,i.r,i.g,i.b),o.setXYZ(35,i.r,i.g,i.b),o.setXYZ(36,i.r,i.g,i.b),o.setXYZ(37,i.r,i.g,i.b),o.setXYZ(38,r.r,r.g,r.b),o.setXYZ(39,r.r,r.g,r.b),o.setXYZ(40,a.r,a.g,a.b),o.setXYZ(41,a.r,a.g,a.b),o.setXYZ(42,a.r,a.g,a.b),o.setXYZ(43,a.r,a.g,a.b),o.setXYZ(44,a.r,a.g,a.b),o.setXYZ(45,a.r,a.g,a.b),o.setXYZ(46,a.r,a.g,a.b),o.setXYZ(47,a.r,a.g,a.b),o.setXYZ(48,a.r,a.g,a.b),o.setXYZ(49,a.r,a.g,a.b),o.needsUpdate=!0,this}update(){const e=this.geometry,n=this.pointMap,i=1,r=1;let a,s;if(Fr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)a=1,s=0;else if(this.camera.coordinateSystem===Ho)a=-1,s=1;else if(this.camera.coordinateSystem===mg)a=0,s=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);Kr("c",n,e,Fr,0,0,a),Kr("t",n,e,Fr,0,0,s),Kr("n1",n,e,Fr,-i,-r,a),Kr("n2",n,e,Fr,i,-r,a),Kr("n3",n,e,Fr,-i,r,a),Kr("n4",n,e,Fr,i,r,a),Kr("f1",n,e,Fr,-i,-r,s),Kr("f2",n,e,Fr,i,-r,s),Kr("f3",n,e,Fr,-i,r,s),Kr("f4",n,e,Fr,i,r,s),Kr("u1",n,e,Fr,i*.7,r*1.1,a),Kr("u2",n,e,Fr,-i*.7,r*1.1,a),Kr("u3",n,e,Fr,0,r*2,a),Kr("cf1",n,e,Fr,-i,0,s),Kr("cf2",n,e,Fr,i,0,s),Kr("cf3",n,e,Fr,0,-r,s),Kr("cf4",n,e,Fr,0,r,s),Kr("cn1",n,e,Fr,-i,0,a),Kr("cn2",n,e,Fr,i,0,a),Kr("cn3",n,e,Fr,0,-r,a),Kr("cn4",n,e,Fr,0,r,a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Kr(t,e,n,i,r,a,s){HS.set(r,a,s).unproject(i);const o=e[t];if(o!==void 0){const l=n.getAttribute("position");for(let u=0,h=o.length;u<h;u++)l.setXYZ(o[u],HS.x,HS.y,HS.z)}}const qS=new ea;class mne extends Eu{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),a=new An;a.setIndex(new yi(i,1)),a.setAttribute("position",new yi(r,3)),super(a,new Js({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&qS.setFromObject(this.object),qS.isEmpty())return;const e=qS.min,n=qS.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=e.x,r[4]=n.y,r[5]=n.z,r[6]=e.x,r[7]=e.y,r[8]=n.z,r[9]=n.x,r[10]=e.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=e.z,r[15]=e.x,r[16]=n.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=n.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class gne extends Eu{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new An;a.setIndex(new yi(i,1)),a.setAttribute("position",new Qt(r,3)),super(a,new Js({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class vne extends Kh{constructor(e,n=1,i=16776960){const r=i,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new An;s.setAttribute("position",new Qt(a,3)),s.computeBoundingSphere(),super(s,new Js({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new An;l.setAttribute("position",new Qt(o,3)),l.computeBoundingSphere(),this.add(new zi(l,new Au({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const I8=new se;let WS,YA;class xne extends xi{constructor(e=new se(0,0,1),n=new se(0,0,0),i=1,r=16776960,a=i*.2,s=a*.2){super(),this.type="ArrowHelper",WS===void 0&&(WS=new An,WS.setAttribute("position",new Qt([0,0,0,0,1,0],3)),YA=new bb(.5,1,5,1),YA.translate(0,-.5,0)),this.position.copy(n),this.line=new Kh(WS,new Js({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new zi(YA,new Au({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,a,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{I8.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(I8,n)}}setLength(e,n=e*.2,i=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(i,n,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class yne extends Eu{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new An;r.setAttribute("position",new Qt(n,3)),r.setAttribute("color",new Qt(i,3));const a=new Js({vertexColors:!0,toneMapped:!1});super(r,a),this.type="AxesHelper"}setColors(e,n,i){const r=new zt,a=this.geometry.attributes.color.array;return r.set(e),r.toArray(a,0),r.toArray(a,3),r.set(n),r.toArray(a,6),r.toArray(a,9),r.set(i),r.toArray(a,12),r.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class bne{constructor(){this.type="ShapePath",this.color=new zt,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new F_,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,i,r){return this.currentPath.quadraticCurveTo(e,n,i,r),this}bezierCurveTo(e,n,i,r,a,s){return this.currentPath.bezierCurveTo(e,n,i,r,a,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(T){const A=[];for(let E=0,j=T.length;E<j;E++){const R=T[E],C=new Af;C.curves=R.curves,A.push(C)}return A}function i(T,A){const E=A.length;let j=!1;for(let R=E-1,C=0;C<E;R=C++){let D=A[R],U=A[C],I=U.x-D.x,L=U.y-D.y;if(Math.abs(L)>Number.EPSILON){if(L<0&&(D=A[C],I=-I,U=A[R],L=-L),T.y<D.y||T.y>U.y)continue;if(T.y===D.y){if(T.x===D.x)return!0}else{const F=L*(T.x-D.x)-I*(T.y-D.y);if(F===0)return!0;if(F<0)continue;j=!j}}else{if(T.y!==D.y)continue;if(U.x<=T.x&&T.x<=D.x||D.x<=T.x&&T.x<=U.x)return!0}}return j}const r=Mc.isClockWise,a=this.subPaths;if(a.length===0)return[];let s,o,l;const u=[];if(a.length===1)return o=a[0],l=new Af,l.curves=o.curves,u.push(l),u;let h=!r(a[0].getPoints());h=e?!h:h;const p=[],g=[];let x=[],b=0,M;g[b]=void 0,x[b]=[];for(let T=0,A=a.length;T<A;T++)o=a[T],M=o.getPoints(),s=r(M),s=e?!s:s,s?(!h&&g[b]&&b++,g[b]={s:new Af,p:M},g[b].s.curves=o.curves,h&&b++,x[b]=[]):x[b].push({h:o,p:M[0]});if(!g[0])return n(a);if(g.length>1){let T=!1,A=0;for(let E=0,j=g.length;E<j;E++)p[E]=[];for(let E=0,j=g.length;E<j;E++){const R=x[E];for(let C=0;C<R.length;C++){const D=R[C];let U=!0;for(let I=0;I<g.length;I++)i(D.p,g[I].p)&&(E!==I&&A++,U?(U=!1,p[I].push(D)):T=!0);U&&p[E].push(D)}}A>0&&T===!1&&(x=p)}let S;for(let T=0,A=g.length;T<A;T++){l=g[T].s,u.push(l),S=x[T];for(let E=0,j=S.length;E<j;E++)l.holes.push(S[E].h)}return u}}class Sne extends tl{constructor(e,n=null){super(),this.object=e,this.domElement=n,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){Wt("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function Mne(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2):(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0),t}function _ne(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0):(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2),t}function Tne(t){return t.repeat.x=1,t.repeat.y=1,t.offset.x=0,t.offset.y=0,t}function Pj(t,e,n,i){const r=wne(i);switch(n){case FO:return t*e;case np:return t*e/r.components*r.byteLength;case mb:return t*e/r.components*r.byteLength;case gb:return t*e*2/r.components*r.byteLength;case aT:return t*e*2/r.components*r.byteLength;case GO:return t*e*3/r.components*r.byteLength;case Sr:return t*e*4/r.components*r.byteLength;case sT:return t*e*4/r.components*r.byteLength;case Dy:case Py:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case Iy:case Uy:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case u_:case h_:return Math.max(t,16)*Math.max(e,8)/4;case c_:case f_:return Math.max(t,8)*Math.max(e,8)/2;case d_:case p_:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case m_:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case g_:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case v_:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case x_:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case y_:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case b_:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case S_:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case M_:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case __:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case T_:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case w_:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case A_:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case E_:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case C_:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case R_:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case j_:case N_:case O_:return Math.ceil(t/4)*Math.ceil(e/4)*16;case D_:case P_:return Math.ceil(t/4)*Math.ceil(e/4)*8;case I_:case U_:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function wne(t){switch(t){case nr:case tT:return{byteLength:1,components:1};case H0:case nT:case Pr:return{byteLength:2,components:1};case iT:case rT:return{byteLength:2,components:4};case Ac:case pb:case fr:return{byteLength:4,components:1};case zO:case kO:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}class Ane{static contain(e,n){return Mne(e,n)}static cover(e,n){return _ne(e,n)}static fill(e){return Tne(e)}static getByteLength(e,n,i,r){return Pj(e,n,i,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Lf}}));typeof window<"u"&&(window.__THREE__?Wt("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Lf);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function jq(){let t=null,e=!1,n=null,i=null;function r(a,s){n(a,s),i=t.requestAnimationFrame(r)}return{start:function(){e!==!0&&n!==null&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(a){n=a},setContext:function(a){t=a}}}function Ene(t){const e=new WeakMap;function n(o,l){const u=o.array,h=o.usage,p=u.byteLength,g=t.createBuffer();t.bindBuffer(l,g),t.bufferData(l,u,h),o.onUploadCallback();let x;if(u instanceof Float32Array)x=t.FLOAT;else if(typeof Float16Array<"u"&&u instanceof Float16Array)x=t.HALF_FLOAT;else if(u instanceof Uint16Array)o.isFloat16BufferAttribute?x=t.HALF_FLOAT:x=t.UNSIGNED_SHORT;else if(u instanceof Int16Array)x=t.SHORT;else if(u instanceof Uint32Array)x=t.UNSIGNED_INT;else if(u instanceof Int32Array)x=t.INT;else if(u instanceof Int8Array)x=t.BYTE;else if(u instanceof Uint8Array)x=t.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)x=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:g,type:x,bytesPerElement:u.BYTES_PER_ELEMENT,version:o.version,size:p}}function i(o,l,u){const h=l.array,p=l.updateRanges;if(t.bindBuffer(u,o),p.length===0)t.bufferSubData(u,0,h);else{p.sort((x,b)=>x.start-b.start);let g=0;for(let x=1;x<p.length;x++){const b=p[g],M=p[x];M.start<=b.start+b.count+1?b.count=Math.max(b.count,M.start+M.count-b.start):(++g,p[g]=M)}p.length=g+1;for(let x=0,b=p.length;x<b;x++){const M=p[x];t.bufferSubData(u,M.start*h.BYTES_PER_ELEMENT,h,M.start,M.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function a(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(t.deleteBuffer(l.buffer),e.delete(o))}function s(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const h=e.get(o);(!h||h.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const u=e.get(o);if(u===void 0)e.set(o,n(o,l));else if(u.version<o.version){if(u.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(u.buffer,o,l),u.version=o.version}}return{get:r,remove:a,update:s}}var Cne=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Rne=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,jne=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Nne=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,One=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Dne=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Pne=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Ine=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Une=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Lne=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Bne=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,zne=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,kne=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Fne=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Gne=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Vne=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Hne=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,qne=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Wne=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Xne=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,$ne=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Yne=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Zne=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Kne=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Qne=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Jne=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,eie=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,tie=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,nie=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,iie=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,rie="gl_FragColor = linearToOutputTexel( gl_FragColor );",aie=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,sie=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,oie=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,lie=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,cie=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,uie=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fie=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,hie=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,die=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,pie=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,mie=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,gie=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,vie=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,xie=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,yie=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,bie=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Sie=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Mie=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,_ie=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Tie=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,wie=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Aie=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 uv = vec2( roughness, dotNV );
	return texture2D( dfgLUT, uv ).rg;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNV * dotNV), 0.0, dotNV), material.roughness );
	vec2 dfgL = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNL * dotNL), 0.0, dotNL), material.roughness );
	vec3 FssEss_V = material.specularColor * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColor * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColor + ( 1.0 - material.specularColor ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Eie=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Cie=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Rie=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,jie=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Nie=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Oie=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Die=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Pie=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Iie=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Uie=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Lie=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Bie=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,zie=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,kie=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Fie=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Gie=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Vie=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Hie=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,qie=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Wie=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Xie=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,$ie=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Yie=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Zie=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Kie=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Qie=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Jie=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,ere=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,tre=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,nre=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,ire=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,rre=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,are=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,sre=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,ore=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,lre=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,cre=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare, distribution.x );
		#endif
		if ( hard_shadow != 1.0 ) {
			float distance = compare - distribution.x;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,ure=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,fre=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,hre=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,dre=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,pre=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,mre=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,gre=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,vre=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,xre=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,yre=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,bre=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Sre=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Mre=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,_re=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Tre=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,wre=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Are=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Ere=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Cre=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Rre=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,jre=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Nre=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Ore=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Dre=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Pre=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Ire=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Ure=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Lre=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Bre=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,zre=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,kre=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Fre=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Gre=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Vre=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Hre=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qre=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Wre=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Xre=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,$re=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Yre=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Zre=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Kre=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Qre=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Jre=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,eae=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tae=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,nae=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,iae=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,rae=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,aae=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sae=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Ln={alphahash_fragment:Cne,alphahash_pars_fragment:Rne,alphamap_fragment:jne,alphamap_pars_fragment:Nne,alphatest_fragment:One,alphatest_pars_fragment:Dne,aomap_fragment:Pne,aomap_pars_fragment:Ine,batching_pars_vertex:Une,batching_vertex:Lne,begin_vertex:Bne,beginnormal_vertex:zne,bsdfs:kne,iridescence_fragment:Fne,bumpmap_pars_fragment:Gne,clipping_planes_fragment:Vne,clipping_planes_pars_fragment:Hne,clipping_planes_pars_vertex:qne,clipping_planes_vertex:Wne,color_fragment:Xne,color_pars_fragment:$ne,color_pars_vertex:Yne,color_vertex:Zne,common:Kne,cube_uv_reflection_fragment:Qne,defaultnormal_vertex:Jne,displacementmap_pars_vertex:eie,displacementmap_vertex:tie,emissivemap_fragment:nie,emissivemap_pars_fragment:iie,colorspace_fragment:rie,colorspace_pars_fragment:aie,envmap_fragment:sie,envmap_common_pars_fragment:oie,envmap_pars_fragment:lie,envmap_pars_vertex:cie,envmap_physical_pars_fragment:bie,envmap_vertex:uie,fog_vertex:fie,fog_pars_vertex:hie,fog_fragment:die,fog_pars_fragment:pie,gradientmap_pars_fragment:mie,lightmap_pars_fragment:gie,lights_lambert_fragment:vie,lights_lambert_pars_fragment:xie,lights_pars_begin:yie,lights_toon_fragment:Sie,lights_toon_pars_fragment:Mie,lights_phong_fragment:_ie,lights_phong_pars_fragment:Tie,lights_physical_fragment:wie,lights_physical_pars_fragment:Aie,lights_fragment_begin:Eie,lights_fragment_maps:Cie,lights_fragment_end:Rie,logdepthbuf_fragment:jie,logdepthbuf_pars_fragment:Nie,logdepthbuf_pars_vertex:Oie,logdepthbuf_vertex:Die,map_fragment:Pie,map_pars_fragment:Iie,map_particle_fragment:Uie,map_particle_pars_fragment:Lie,metalnessmap_fragment:Bie,metalnessmap_pars_fragment:zie,morphinstance_vertex:kie,morphcolor_vertex:Fie,morphnormal_vertex:Gie,morphtarget_pars_vertex:Vie,morphtarget_vertex:Hie,normal_fragment_begin:qie,normal_fragment_maps:Wie,normal_pars_fragment:Xie,normal_pars_vertex:$ie,normal_vertex:Yie,normalmap_pars_fragment:Zie,clearcoat_normal_fragment_begin:Kie,clearcoat_normal_fragment_maps:Qie,clearcoat_pars_fragment:Jie,iridescence_pars_fragment:ere,opaque_fragment:tre,packing:nre,premultiplied_alpha_fragment:ire,project_vertex:rre,dithering_fragment:are,dithering_pars_fragment:sre,roughnessmap_fragment:ore,roughnessmap_pars_fragment:lre,shadowmap_pars_fragment:cre,shadowmap_pars_vertex:ure,shadowmap_vertex:fre,shadowmask_pars_fragment:hre,skinbase_vertex:dre,skinning_pars_vertex:pre,skinning_vertex:mre,skinnormal_vertex:gre,specularmap_fragment:vre,specularmap_pars_fragment:xre,tonemapping_fragment:yre,tonemapping_pars_fragment:bre,transmission_fragment:Sre,transmission_pars_fragment:Mre,uv_pars_fragment:_re,uv_pars_vertex:Tre,uv_vertex:wre,worldpos_vertex:Are,background_vert:Ere,background_frag:Cre,backgroundCube_vert:Rre,backgroundCube_frag:jre,cube_vert:Nre,cube_frag:Ore,depth_vert:Dre,depth_frag:Pre,distanceRGBA_vert:Ire,distanceRGBA_frag:Ure,equirect_vert:Lre,equirect_frag:Bre,linedashed_vert:zre,linedashed_frag:kre,meshbasic_vert:Fre,meshbasic_frag:Gre,meshlambert_vert:Vre,meshlambert_frag:Hre,meshmatcap_vert:qre,meshmatcap_frag:Wre,meshnormal_vert:Xre,meshnormal_frag:$re,meshphong_vert:Yre,meshphong_frag:Zre,meshphysical_vert:Kre,meshphysical_frag:Qre,meshtoon_vert:Jre,meshtoon_frag:eae,points_vert:tae,points_frag:nae,shadow_vert:iae,shadow_frag:rae,sprite_vert:aae,sprite_frag:sae},Gt={common:{diffuse:{value:new zt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Nn},alphaMap:{value:null},alphaMapTransform:{value:new Nn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Nn}},envmap:{envMap:{value:null},envMapRotation:{value:new Nn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Nn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Nn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Nn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Nn},normalScale:{value:new Ye(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Nn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Nn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Nn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Nn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new zt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new zt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Nn},alphaTest:{value:0},uvTransform:{value:new Nn}},sprite:{diffuse:{value:new zt(16777215)},opacity:{value:1},center:{value:new Ye(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Nn},alphaMap:{value:null},alphaMapTransform:{value:new Nn},alphaTest:{value:0}}},xc={basic:{uniforms:$s([Gt.common,Gt.specularmap,Gt.envmap,Gt.aomap,Gt.lightmap,Gt.fog]),vertexShader:Ln.meshbasic_vert,fragmentShader:Ln.meshbasic_frag},lambert:{uniforms:$s([Gt.common,Gt.specularmap,Gt.envmap,Gt.aomap,Gt.lightmap,Gt.emissivemap,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,Gt.fog,Gt.lights,{emissive:{value:new zt(0)}}]),vertexShader:Ln.meshlambert_vert,fragmentShader:Ln.meshlambert_frag},phong:{uniforms:$s([Gt.common,Gt.specularmap,Gt.envmap,Gt.aomap,Gt.lightmap,Gt.emissivemap,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,Gt.fog,Gt.lights,{emissive:{value:new zt(0)},specular:{value:new zt(1118481)},shininess:{value:30}}]),vertexShader:Ln.meshphong_vert,fragmentShader:Ln.meshphong_frag},standard:{uniforms:$s([Gt.common,Gt.envmap,Gt.aomap,Gt.lightmap,Gt.emissivemap,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,Gt.roughnessmap,Gt.metalnessmap,Gt.fog,Gt.lights,{emissive:{value:new zt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ln.meshphysical_vert,fragmentShader:Ln.meshphysical_frag},toon:{uniforms:$s([Gt.common,Gt.aomap,Gt.lightmap,Gt.emissivemap,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,Gt.gradientmap,Gt.fog,Gt.lights,{emissive:{value:new zt(0)}}]),vertexShader:Ln.meshtoon_vert,fragmentShader:Ln.meshtoon_frag},matcap:{uniforms:$s([Gt.common,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,Gt.fog,{matcap:{value:null}}]),vertexShader:Ln.meshmatcap_vert,fragmentShader:Ln.meshmatcap_frag},points:{uniforms:$s([Gt.points,Gt.fog]),vertexShader:Ln.points_vert,fragmentShader:Ln.points_frag},dashed:{uniforms:$s([Gt.common,Gt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ln.linedashed_vert,fragmentShader:Ln.linedashed_frag},depth:{uniforms:$s([Gt.common,Gt.displacementmap]),vertexShader:Ln.depth_vert,fragmentShader:Ln.depth_frag},normal:{uniforms:$s([Gt.common,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,{opacity:{value:1}}]),vertexShader:Ln.meshnormal_vert,fragmentShader:Ln.meshnormal_frag},sprite:{uniforms:$s([Gt.sprite,Gt.fog]),vertexShader:Ln.sprite_vert,fragmentShader:Ln.sprite_frag},background:{uniforms:{uvTransform:{value:new Nn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ln.background_vert,fragmentShader:Ln.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Nn}},vertexShader:Ln.backgroundCube_vert,fragmentShader:Ln.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ln.cube_vert,fragmentShader:Ln.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ln.equirect_vert,fragmentShader:Ln.equirect_frag},distanceRGBA:{uniforms:$s([Gt.common,Gt.displacementmap,{referencePosition:{value:new se},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ln.distanceRGBA_vert,fragmentShader:Ln.distanceRGBA_frag},shadow:{uniforms:$s([Gt.lights,Gt.fog,{color:{value:new zt(0)},opacity:{value:1}}]),vertexShader:Ln.shadow_vert,fragmentShader:Ln.shadow_frag}};xc.physical={uniforms:$s([xc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Nn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Nn},clearcoatNormalScale:{value:new Ye(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Nn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Nn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Nn},sheen:{value:0},sheenColor:{value:new zt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Nn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Nn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Nn},transmissionSamplerSize:{value:new Ye},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Nn},attenuationDistance:{value:0},attenuationColor:{value:new zt(0)},specularColor:{value:new zt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Nn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Nn},anisotropyVector:{value:new Ye},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Nn}}]),vertexShader:Ln.meshphysical_vert,fragmentShader:Ln.meshphysical_frag};const XS={r:0,b:0,g:0},s0=new Ko,oae=new un;function lae(t,e,n,i,r,a,s){const o=new zt(0);let l=a===!0?0:1,u,h,p=null,g=0,x=null;function b(E){let j=E.isScene===!0?E.background:null;return j&&j.isTexture&&(j=(E.backgroundBlurriness>0?n:e).get(j)),j}function M(E){let j=!1;const R=b(E);R===null?T(o,l):R&&R.isColor&&(T(R,1),j=!0);const C=t.xr.getEnvironmentBlendMode();C==="additive"?i.buffers.color.setClear(0,0,0,1,s):C==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,s),(t.autoClear||j)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function S(E,j){const R=b(j);R&&(R.isCubeTexture||R.mapping===Kg)?(h===void 0&&(h=new zi(new rp(1,1,1),new di({name:"BackgroundCubeMaterial",uniforms:yg(xc.backgroundCube.uniforms),vertexShader:xc.backgroundCube.vertexShader,fragmentShader:xc.backgroundCube.fragmentShader,side:Hr,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(C,D,U){this.matrixWorld.copyPosition(U.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),s0.copy(j.backgroundRotation),s0.x*=-1,s0.y*=-1,s0.z*=-1,R.isCubeTexture&&R.isRenderTargetTexture===!1&&(s0.y*=-1,s0.z*=-1),h.material.uniforms.envMap.value=R,h.material.uniforms.flipEnvMap.value=R.isCubeTexture&&R.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=j.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=j.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(oae.makeRotationFromEuler(s0)),h.material.toneMapped=fi.getTransfer(R.colorSpace)!==Bi,(p!==R||g!==R.version||x!==t.toneMapping)&&(h.material.needsUpdate=!0,p=R,g=R.version,x=t.toneMapping),h.layers.enableAll(),E.unshift(h,h.geometry,h.material,0,0,null)):R&&R.isTexture&&(u===void 0&&(u=new zi(new Ul(2,2),new di({name:"BackgroundMaterial",uniforms:yg(xc.background.uniforms),vertexShader:xc.background.vertexShader,fragmentShader:xc.background.fragmentShader,side:_u,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=R,u.material.uniforms.backgroundIntensity.value=j.backgroundIntensity,u.material.toneMapped=fi.getTransfer(R.colorSpace)!==Bi,R.matrixAutoUpdate===!0&&R.updateMatrix(),u.material.uniforms.uvTransform.value.copy(R.matrix),(p!==R||g!==R.version||x!==t.toneMapping)&&(u.material.needsUpdate=!0,p=R,g=R.version,x=t.toneMapping),u.layers.enableAll(),E.unshift(u,u.geometry,u.material,0,0,null))}function T(E,j){E.getRGB(XS,IH(t)),i.buffers.color.setClear(XS.r,XS.g,XS.b,j,s)}function A(){h!==void 0&&(h.geometry.dispose(),h.material.dispose(),h=void 0),u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0)}return{getClearColor:function(){return o},setClearColor:function(E,j=1){o.set(E),l=j,T(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(E){l=E,T(o,l)},render:M,addToRenderList:S,dispose:A}}function cae(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),i={},r=g(null);let a=r,s=!1;function o(L,F,G,H,W){let Y=!1;const k=p(H,G,F);a!==k&&(a=k,u(a.object)),Y=x(L,H,G,W),Y&&b(L,H,G,W),W!==null&&e.update(W,t.ELEMENT_ARRAY_BUFFER),(Y||s)&&(s=!1,j(L,F,G,H),W!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(W).buffer))}function l(){return t.createVertexArray()}function u(L){return t.bindVertexArray(L)}function h(L){return t.deleteVertexArray(L)}function p(L,F,G){const H=G.wireframe===!0;let W=i[L.id];W===void 0&&(W={},i[L.id]=W);let Y=W[F.id];Y===void 0&&(Y={},W[F.id]=Y);let k=Y[H];return k===void 0&&(k=g(l()),Y[H]=k),k}function g(L){const F=[],G=[],H=[];for(let W=0;W<n;W++)F[W]=0,G[W]=0,H[W]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:F,enabledAttributes:G,attributeDivisors:H,object:L,attributes:{},index:null}}function x(L,F,G,H){const W=a.attributes,Y=F.attributes;let k=0;const $=G.getAttributes();for(const ee in $)if($[ee].location>=0){const ae=W[ee];let q=Y[ee];if(q===void 0&&(ee==="instanceMatrix"&&L.instanceMatrix&&(q=L.instanceMatrix),ee==="instanceColor"&&L.instanceColor&&(q=L.instanceColor)),ae===void 0||ae.attribute!==q||q&&ae.data!==q.data)return!0;k++}return a.attributesNum!==k||a.index!==H}function b(L,F,G,H){const W={},Y=F.attributes;let k=0;const $=G.getAttributes();for(const ee in $)if($[ee].location>=0){let ae=Y[ee];ae===void 0&&(ee==="instanceMatrix"&&L.instanceMatrix&&(ae=L.instanceMatrix),ee==="instanceColor"&&L.instanceColor&&(ae=L.instanceColor));const q={};q.attribute=ae,ae&&ae.data&&(q.data=ae.data),W[ee]=q,k++}a.attributes=W,a.attributesNum=k,a.index=H}function M(){const L=a.newAttributes;for(let F=0,G=L.length;F<G;F++)L[F]=0}function S(L){T(L,0)}function T(L,F){const G=a.newAttributes,H=a.enabledAttributes,W=a.attributeDivisors;G[L]=1,H[L]===0&&(t.enableVertexAttribArray(L),H[L]=1),W[L]!==F&&(t.vertexAttribDivisor(L,F),W[L]=F)}function A(){const L=a.newAttributes,F=a.enabledAttributes;for(let G=0,H=F.length;G<H;G++)F[G]!==L[G]&&(t.disableVertexAttribArray(G),F[G]=0)}function E(L,F,G,H,W,Y,k){k===!0?t.vertexAttribIPointer(L,F,G,W,Y):t.vertexAttribPointer(L,F,G,H,W,Y)}function j(L,F,G,H){M();const W=H.attributes,Y=G.getAttributes(),k=F.defaultAttributeValues;for(const $ in Y){const ee=Y[$];if(ee.location>=0){let te=W[$];if(te===void 0&&($==="instanceMatrix"&&L.instanceMatrix&&(te=L.instanceMatrix),$==="instanceColor"&&L.instanceColor&&(te=L.instanceColor)),te!==void 0){const ae=te.normalized,q=te.itemSize,K=e.get(te);if(K===void 0)continue;const ie=K.buffer,ue=K.type,me=K.bytesPerElement,fe=ue===t.INT||ue===t.UNSIGNED_INT||te.gpuType===pb;if(te.isInterleavedBufferAttribute){const de=te.data,_e=de.stride,Te=te.offset;if(de.isInstancedInterleavedBuffer){for(let Ie=0;Ie<ee.locationSize;Ie++)T(ee.location+Ie,de.meshPerAttribute);L.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=de.meshPerAttribute*de.count)}else for(let Ie=0;Ie<ee.locationSize;Ie++)S(ee.location+Ie);t.bindBuffer(t.ARRAY_BUFFER,ie);for(let Ie=0;Ie<ee.locationSize;Ie++)E(ee.location+Ie,q/ee.locationSize,ue,ae,_e*me,(Te+q/ee.locationSize*Ie)*me,fe)}else{if(te.isInstancedBufferAttribute){for(let de=0;de<ee.locationSize;de++)T(ee.location+de,te.meshPerAttribute);L.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=te.meshPerAttribute*te.count)}else for(let de=0;de<ee.locationSize;de++)S(ee.location+de);t.bindBuffer(t.ARRAY_BUFFER,ie);for(let de=0;de<ee.locationSize;de++)E(ee.location+de,q/ee.locationSize,ue,ae,q*me,q/ee.locationSize*de*me,fe)}}else if(k!==void 0){const ae=k[$];if(ae!==void 0)switch(ae.length){case 2:t.vertexAttrib2fv(ee.location,ae);break;case 3:t.vertexAttrib3fv(ee.location,ae);break;case 4:t.vertexAttrib4fv(ee.location,ae);break;default:t.vertexAttrib1fv(ee.location,ae)}}}}A()}function R(){U();for(const L in i){const F=i[L];for(const G in F){const H=F[G];for(const W in H)h(H[W].object),delete H[W];delete F[G]}delete i[L]}}function C(L){if(i[L.id]===void 0)return;const F=i[L.id];for(const G in F){const H=F[G];for(const W in H)h(H[W].object),delete H[W];delete F[G]}delete i[L.id]}function D(L){for(const F in i){const G=i[F];if(G[L.id]===void 0)continue;const H=G[L.id];for(const W in H)h(H[W].object),delete H[W];delete G[L.id]}}function U(){I(),s=!0,a!==r&&(a=r,u(a.object))}function I(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:o,reset:U,resetDefaultState:I,dispose:R,releaseStatesOfGeometry:C,releaseStatesOfProgram:D,initAttributes:M,enableAttribute:S,disableUnusedAttributes:A}}function uae(t,e,n){let i;function r(u){i=u}function a(u,h){t.drawArrays(i,u,h),n.update(h,i,1)}function s(u,h,p){p!==0&&(t.drawArraysInstanced(i,u,h,p),n.update(h,i,p))}function o(u,h,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,u,0,h,0,p);let x=0;for(let b=0;b<p;b++)x+=h[b];n.update(x,i,1)}function l(u,h,p,g){if(p===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let b=0;b<u.length;b++)s(u[b],h[b],g[b]);else{x.multiDrawArraysInstancedWEBGL(i,u,0,h,0,g,0,p);let b=0;for(let M=0;M<p;M++)b+=h[M]*g[M];n.update(b,i,1)}}this.setMode=r,this.render=a,this.renderInstances=s,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function fae(t,e,n,i){let r;function a(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const D=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(D.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(D){return!(D!==Sr&&i.convert(D)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(D){const U=D===Pr&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(D!==nr&&i.convert(D)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&D!==fr&&!U)}function l(D){if(D==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";D="mediump"}return D==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=n.precision!==void 0?n.precision:"highp";const h=l(u);h!==u&&(Wt("WebGLRenderer:",u,"not supported, using",h,"instead."),u=h);const p=n.logarithmicDepthBuffer===!0,g=n.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),x=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),b=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),M=t.getParameter(t.MAX_TEXTURE_SIZE),S=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),T=t.getParameter(t.MAX_VERTEX_ATTRIBS),A=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),E=t.getParameter(t.MAX_VARYING_VECTORS),j=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),R=b>0,C=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:l,textureFormatReadable:s,textureTypeReadable:o,precision:u,logarithmicDepthBuffer:p,reversedDepthBuffer:g,maxTextures:x,maxVertexTextures:b,maxTextureSize:M,maxCubemapSize:S,maxAttributes:T,maxVertexUniforms:A,maxVaryings:E,maxFragmentUniforms:j,vertexTextures:R,maxSamples:C}}function hae(t){const e=this;let n=null,i=0,r=!1,a=!1;const s=new hu,o=new Nn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(p,g){const x=p.length!==0||g||i!==0||r;return r=g,i=p.length,x},this.beginShadows=function(){a=!0,h(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(p,g){n=h(p,g,0)},this.setState=function(p,g,x){const b=p.clippingPlanes,M=p.clipIntersection,S=p.clipShadows,T=t.get(p);if(!r||b===null||b.length===0||a&&!S)a?h(null):u();else{const A=a?0:i,E=A*4;let j=T.clippingState||null;l.value=j,j=h(b,g,E,x);for(let R=0;R!==E;++R)j[R]=n[R];T.clippingState=j,this.numIntersection=M?this.numPlanes:0,this.numPlanes+=A}};function u(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function h(p,g,x,b){const M=p!==null?p.length:0;let S=null;if(M!==0){if(S=l.value,b!==!0||S===null){const T=x+M*4,A=g.matrixWorldInverse;o.getNormalMatrix(A),(S===null||S.length<T)&&(S=new Float32Array(T));for(let E=0,j=x;E!==M;++E,j+=4)s.copy(p[E]).applyMatrix4(A,o),s.normal.toArray(S,j),S[j+3]=s.constant}l.value=S,l.needsUpdate=!0}return e.numPlanes=M,e.numIntersection=0,S}}function dae(t){let e=new WeakMap;function n(s,o){return o===pg?s.mapping=Tu:o===n1&&(s.mapping=$h),s}function i(s){if(s&&s.isTexture){const o=s.mapping;if(o===pg||o===n1)if(e.has(s)){const l=e.get(s).texture;return n(l,s.mapping)}else{const l=s.image;if(l&&l.height>0){const u=new uT(l.height);return u.fromEquirectangularTexture(t,s),e.set(s,u),s.addEventListener("dispose",r),n(u.texture,s.mapping)}else return null}}return s}function r(s){const o=s.target;o.removeEventListener("dispose",r);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function a(){e=new WeakMap}return{get:i,dispose:a}}const Fh=4,U8=[.125,.215,.35,.446,.526,.582],_0=20,pae=256,Xx=new Ol,L8=new zt;let ZA=null,KA=0,QA=0,JA=!1;const mae=new se;class Ij{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,n=0,i=.1,r=100,a={}){const{size:s=256,position:o=mae}=a;ZA=this._renderer.getRenderTarget(),KA=this._renderer.getActiveCubeFace(),QA=this._renderer.getActiveMipmapLevel(),JA=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,i,r,l,o),n>0&&this._blur(l,0,0,n),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=k8(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=z8(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(ZA,KA,QA),this._renderer.xr.enabled=JA,e.scissorTest=!1,Nm(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Tu||e.mapping===$h?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),ZA=this._renderer.getRenderTarget(),KA=this._renderer.getActiveCubeFace(),QA=this._renderer.getActiveMipmapLevel(),JA=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=n||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:Rn,minFilter:Rn,generateMipmaps:!1,type:Pr,format:Sr,colorSpace:Zo,depthBuffer:!1},r=B8(e,n,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=B8(e,n,i);const{_lodMax:a}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=gae(a)),this._blurMaterial=xae(a,e,n),this._ggxMaterial=vae(a,e,n)}return r}_compileMaterial(e){const n=new zi(new An,e);this._renderer.compile(n,Xx)}_sceneToCubeUV(e,n,i,r,a){const l=new Ji(90,1,n,i),u=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],p=this._renderer,g=p.autoClear,x=p.toneMapping;p.getClearColor(L8),p.toneMapping=Tc,p.autoClear=!1,p.state.buffers.depth.getReversed()&&(p.setRenderTarget(r),p.clearDepth(),p.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new zi(new rp,new Au({name:"PMREM.Background",side:Hr,depthWrite:!1,depthTest:!1})));const M=this._backgroundBox,S=M.material;let T=!1;const A=e.background;A?A.isColor&&(S.color.copy(A),e.background=null,T=!0):(S.color.copy(L8),T=!0);for(let E=0;E<6;E++){const j=E%3;j===0?(l.up.set(0,u[E],0),l.position.set(a.x,a.y,a.z),l.lookAt(a.x+h[E],a.y,a.z)):j===1?(l.up.set(0,0,u[E]),l.position.set(a.x,a.y,a.z),l.lookAt(a.x,a.y+h[E],a.z)):(l.up.set(0,u[E],0),l.position.set(a.x,a.y,a.z),l.lookAt(a.x,a.y,a.z+h[E]));const R=this._cubeSize;Nm(r,j*R,E>2?R:0,R,R),p.setRenderTarget(r),T&&p.render(M,l),p.render(e,l)}p.toneMapping=x,p.autoClear=g,e.background=A}_textureToCubeUV(e,n){const i=this._renderer,r=e.mapping===Tu||e.mapping===$h;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=k8()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=z8());const a=r?this._cubemapMaterial:this._equirectMaterial,s=this._lodMeshes[0];s.material=a;const o=a.uniforms;o.envMap.value=e;const l=this._cubeSize;Nm(n,0,0,3*l,2*l),i.setRenderTarget(n),i.render(s,Xx)}_applyPMREM(e){const n=this._renderer,i=n.autoClear;n.autoClear=!1;const r=this._lodMeshes.length;for(let a=1;a<r;a++)this._applyGGXFilter(e,a-1,a);n.autoClear=i}_applyGGXFilter(e,n,i){const r=this._renderer,a=this._pingPongRenderTarget,s=this._ggxMaterial,o=this._lodMeshes[i];o.material=s;const l=s.uniforms,u=i/(this._lodMeshes.length-1),h=n/(this._lodMeshes.length-1),p=Math.sqrt(u*u-h*h),g=.05+u*.95,x=p*g,{_lodMax:b}=this,M=this._sizeLods[i],S=3*M*(i>b-Fh?i-b+Fh:0),T=4*(this._cubeSize-M);l.envMap.value=e.texture,l.roughness.value=x,l.mipInt.value=b-n,Nm(a,S,T,3*M,2*M),r.setRenderTarget(a),r.render(o,Xx),l.envMap.value=a.texture,l.roughness.value=0,l.mipInt.value=b-i,Nm(e,S,T,3*M,2*M),r.setRenderTarget(e),r.render(o,Xx)}_blur(e,n,i,r,a){const s=this._pingPongRenderTarget;this._halfBlur(e,s,n,i,r,"latitudinal",a),this._halfBlur(s,e,i,i,r,"longitudinal",a)}_halfBlur(e,n,i,r,a,s,o){const l=this._renderer,u=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&wn("blur direction must be either latitudinal or longitudinal!");const h=3,p=this._lodMeshes[r];p.material=u;const g=u.uniforms,x=this._sizeLods[i]-1,b=isFinite(a)?Math.PI/(2*x):2*Math.PI/(2*_0-1),M=a/b,S=isFinite(a)?1+Math.floor(h*M):_0;S>_0&&Wt(`sigmaRadians, ${a}, is too large and will clip, as it requested ${S} samples when the maximum is set to ${_0}`);const T=[];let A=0;for(let D=0;D<_0;++D){const U=D/M,I=Math.exp(-U*U/2);T.push(I),D===0?A+=I:D<S&&(A+=2*I)}for(let D=0;D<T.length;D++)T[D]=T[D]/A;g.envMap.value=e.texture,g.samples.value=S,g.weights.value=T,g.latitudinal.value=s==="latitudinal",o&&(g.poleAxis.value=o);const{_lodMax:E}=this;g.dTheta.value=b,g.mipInt.value=E-i;const j=this._sizeLods[r],R=3*j*(r>E-Fh?r-E+Fh:0),C=4*(this._cubeSize-j);Nm(n,R,C,3*j,2*j),l.setRenderTarget(n),l.render(p,Xx)}}function gae(t){const e=[],n=[],i=[];let r=t;const a=t-Fh+1+U8.length;for(let s=0;s<a;s++){const o=Math.pow(2,r);e.push(o);let l=1/o;s>t-Fh?l=U8[s-t+Fh-1]:s===0&&(l=0),n.push(l);const u=1/(o-2),h=-u,p=1+u,g=[h,h,p,h,p,p,h,h,p,p,h,p],x=6,b=6,M=3,S=2,T=1,A=new Float32Array(M*b*x),E=new Float32Array(S*b*x),j=new Float32Array(T*b*x);for(let C=0;C<x;C++){const D=C%3*2/3-1,U=C>2?0:-1,I=[D,U,0,D+2/3,U,0,D+2/3,U+1,0,D,U,0,D+2/3,U+1,0,D,U+1,0];A.set(I,M*b*C),E.set(g,S*b*C);const L=[C,C,C,C,C,C];j.set(L,T*b*C)}const R=new An;R.setAttribute("position",new yi(A,M)),R.setAttribute("uv",new yi(E,S)),R.setAttribute("faceIndex",new yi(j,T)),i.push(new zi(R,null)),r>Fh&&r--}return{lodMeshes:i,sizeLods:e,sigmas:n}}function B8(t,e,n){const i=new Ei(t,e,n);return i.texture.mapping=Kg,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Nm(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function vae(t,e,n){return new di({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:pae,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:OT(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:_r,depthTest:!1,depthWrite:!1})}function xae(t,e,n){const i=new Float32Array(_0),r=new se(0,1,0);return new di({name:"SphericalGaussianBlur",defines:{n:_0,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:OT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:_r,depthTest:!1,depthWrite:!1})}function z8(){return new di({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:OT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:_r,depthTest:!1,depthWrite:!1})}function k8(){return new di({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:OT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:_r,depthTest:!1,depthWrite:!1})}function OT(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function yae(t){let e=new WeakMap,n=null;function i(o){if(o&&o.isTexture){const l=o.mapping,u=l===pg||l===n1,h=l===Tu||l===$h;if(u||h){let p=e.get(o);const g=p!==void 0?p.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==g)return n===null&&(n=new Ij(t)),p=u?n.fromEquirectangular(o,p):n.fromCubemap(o,p),p.texture.pmremVersion=o.pmremVersion,e.set(o,p),p.texture;if(p!==void 0)return p.texture;{const x=o.image;return u&&x&&x.height>0||h&&x&&r(x)?(n===null&&(n=new Ij(t)),p=u?n.fromEquirectangular(o):n.fromCubemap(o),p.texture.pmremVersion=o.pmremVersion,e.set(o,p),o.addEventListener("dispose",a),p.texture):null}}}return o}function r(o){let l=0;const u=6;for(let h=0;h<u;h++)o[h]!==void 0&&l++;return l===u}function a(o){const l=o.target;l.removeEventListener("dispose",a);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function s(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:s}}function bae(t){const e={};function n(i){if(e[i]!==void 0)return e[i];const r=t.getExtension(i);return e[i]=r,r}return{has:function(i){return n(i)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(i){const r=n(i);return r===null&&gg("WebGLRenderer: "+i+" extension not supported."),r}}}function Sae(t,e,n,i){const r={},a=new WeakMap;function s(p){const g=p.target;g.index!==null&&e.remove(g.index);for(const b in g.attributes)e.remove(g.attributes[b]);g.removeEventListener("dispose",s),delete r[g.id];const x=a.get(g);x&&(e.remove(x),a.delete(g)),i.releaseStatesOfGeometry(g),g.isInstancedBufferGeometry===!0&&delete g._maxInstanceCount,n.memory.geometries--}function o(p,g){return r[g.id]===!0||(g.addEventListener("dispose",s),r[g.id]=!0,n.memory.geometries++),g}function l(p){const g=p.attributes;for(const x in g)e.update(g[x],t.ARRAY_BUFFER)}function u(p){const g=[],x=p.index,b=p.attributes.position;let M=0;if(x!==null){const A=x.array;M=x.version;for(let E=0,j=A.length;E<j;E+=3){const R=A[E+0],C=A[E+1],D=A[E+2];g.push(R,C,C,D,D,R)}}else if(b!==void 0){const A=b.array;M=b.version;for(let E=0,j=A.length/3-1;E<j;E+=3){const R=E+0,C=E+1,D=E+2;g.push(R,C,C,D,D,R)}}else return;const S=new(NH(g)?YO:$O)(g,1);S.version=M;const T=a.get(p);T&&e.remove(T),a.set(p,S)}function h(p){const g=a.get(p);if(g){const x=p.index;x!==null&&g.version<x.version&&u(p)}else u(p);return a.get(p)}return{get:o,update:l,getWireframeAttribute:h}}function Mae(t,e,n){let i;function r(g){i=g}let a,s;function o(g){a=g.type,s=g.bytesPerElement}function l(g,x){t.drawElements(i,x,a,g*s),n.update(x,i,1)}function u(g,x,b){b!==0&&(t.drawElementsInstanced(i,x,a,g*s,b),n.update(x,i,b))}function h(g,x,b){if(b===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,x,0,a,g,0,b);let S=0;for(let T=0;T<b;T++)S+=x[T];n.update(S,i,1)}function p(g,x,b,M){if(b===0)return;const S=e.get("WEBGL_multi_draw");if(S===null)for(let T=0;T<g.length;T++)u(g[T]/s,x[T],M[T]);else{S.multiDrawElementsInstancedWEBGL(i,x,0,a,g,0,M,0,b);let T=0;for(let A=0;A<b;A++)T+=x[A]*M[A];n.update(T,i,1)}}this.setMode=r,this.setIndex=o,this.render=l,this.renderInstances=u,this.renderMultiDraw=h,this.renderMultiDrawInstances=p}function _ae(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(a,s,o){switch(n.calls++,s){case t.TRIANGLES:n.triangles+=o*(a/3);break;case t.LINES:n.lines+=o*(a/2);break;case t.LINE_STRIP:n.lines+=o*(a-1);break;case t.LINE_LOOP:n.lines+=o*a;break;case t.POINTS:n.points+=o*a;break;default:wn("WebGLInfo: Unknown draw mode:",s);break}}function r(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:r,update:i}}function Tae(t,e,n){const i=new WeakMap,r=new Cn;function a(s,o,l){const u=s.morphTargetInfluences,h=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,p=h!==void 0?h.length:0;let g=i.get(o);if(g===void 0||g.count!==p){let L=function(){U.dispose(),i.delete(o),o.removeEventListener("dispose",L)};var x=L;g!==void 0&&g.texture.dispose();const b=o.morphAttributes.position!==void 0,M=o.morphAttributes.normal!==void 0,S=o.morphAttributes.color!==void 0,T=o.morphAttributes.position||[],A=o.morphAttributes.normal||[],E=o.morphAttributes.color||[];let j=0;b===!0&&(j=1),M===!0&&(j=2),S===!0&&(j=3);let R=o.attributes.position.count*j,C=1;R>e.maxTextureSize&&(C=Math.ceil(R/e.maxTextureSize),R=e.maxTextureSize);const D=new Float32Array(R*C*4*p),U=new lT(D,R,C,p);U.type=fr,U.needsUpdate=!0;const I=j*4;for(let F=0;F<p;F++){const G=T[F],H=A[F],W=E[F],Y=R*C*4*F;for(let k=0;k<G.count;k++){const $=k*I;b===!0&&(r.fromBufferAttribute(G,k),D[Y+$+0]=r.x,D[Y+$+1]=r.y,D[Y+$+2]=r.z,D[Y+$+3]=0),M===!0&&(r.fromBufferAttribute(H,k),D[Y+$+4]=r.x,D[Y+$+5]=r.y,D[Y+$+6]=r.z,D[Y+$+7]=0),S===!0&&(r.fromBufferAttribute(W,k),D[Y+$+8]=r.x,D[Y+$+9]=r.y,D[Y+$+10]=r.z,D[Y+$+11]=W.itemSize===4?r.w:1)}}g={count:p,texture:U,size:new Ye(R,C)},i.set(o,g),o.addEventListener("dispose",L)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)l.getUniforms().setValue(t,"morphTexture",s.morphTexture,n);else{let b=0;for(let S=0;S<u.length;S++)b+=u[S];const M=o.morphTargetsRelative?1:1-b;l.getUniforms().setValue(t,"morphTargetBaseInfluence",M),l.getUniforms().setValue(t,"morphTargetInfluences",u)}l.getUniforms().setValue(t,"morphTargetsTexture",g.texture,n),l.getUniforms().setValue(t,"morphTargetsTextureSize",g.size)}return{update:a}}function wae(t,e,n,i){let r=new WeakMap;function a(l){const u=i.render.frame,h=l.geometry,p=e.get(l,h);if(r.get(p)!==u&&(e.update(p),r.set(p,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),r.get(l)!==u&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),r.set(l,u))),l.isSkinnedMesh){const g=l.skeleton;r.get(g)!==u&&(g.update(),r.set(g,u))}return p}function s(){r=new WeakMap}function o(l){const u=l.target;u.removeEventListener("dispose",o),n.remove(u.instanceMatrix),u.instanceColor!==null&&n.remove(u.instanceColor)}return{update:a,dispose:s}}const Nq=new ji,F8=new Jg(1,1),Oq=new lT,Dq=new cT,Pq=new xb,G8=[],V8=[],H8=new Float32Array(16),q8=new Float32Array(9),W8=new Float32Array(4);function ev(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let a=G8[r];if(a===void 0&&(a=new Float32Array(r),G8[r]=a),e!==0){i.toArray(a,0);for(let s=1,o=0;s!==e;++s)o+=n,t[s].toArray(a,o)}return a}function Ta(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function wa(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function DT(t,e){let n=V8[e];n===void 0&&(n=new Int32Array(e),V8[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function Aae(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Eae(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ta(n,e))return;t.uniform2fv(this.addr,e),wa(n,e)}}function Cae(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Ta(n,e))return;t.uniform3fv(this.addr,e),wa(n,e)}}function Rae(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ta(n,e))return;t.uniform4fv(this.addr,e),wa(n,e)}}function jae(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Ta(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),wa(n,e)}else{if(Ta(n,i))return;W8.set(i),t.uniformMatrix2fv(this.addr,!1,W8),wa(n,i)}}function Nae(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Ta(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),wa(n,e)}else{if(Ta(n,i))return;q8.set(i),t.uniformMatrix3fv(this.addr,!1,q8),wa(n,i)}}function Oae(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(Ta(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),wa(n,e)}else{if(Ta(n,i))return;H8.set(i),t.uniformMatrix4fv(this.addr,!1,H8),wa(n,i)}}function Dae(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Pae(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ta(n,e))return;t.uniform2iv(this.addr,e),wa(n,e)}}function Iae(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Ta(n,e))return;t.uniform3iv(this.addr,e),wa(n,e)}}function Uae(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ta(n,e))return;t.uniform4iv(this.addr,e),wa(n,e)}}function Lae(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Bae(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ta(n,e))return;t.uniform2uiv(this.addr,e),wa(n,e)}}function zae(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Ta(n,e))return;t.uniform3uiv(this.addr,e),wa(n,e)}}function kae(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ta(n,e))return;t.uniform4uiv(this.addr,e),wa(n,e)}}function Fae(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r);let a;this.type===t.SAMPLER_2D_SHADOW?(F8.compareFunction=qO,a=F8):a=Nq,n.setTexture2D(e||a,r)}function Gae(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||Dq,r)}function Vae(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||Pq,r)}function Hae(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||Oq,r)}function qae(t){switch(t){case 5126:return Aae;case 35664:return Eae;case 35665:return Cae;case 35666:return Rae;case 35674:return jae;case 35675:return Nae;case 35676:return Oae;case 5124:case 35670:return Dae;case 35667:case 35671:return Pae;case 35668:case 35672:return Iae;case 35669:case 35673:return Uae;case 5125:return Lae;case 36294:return Bae;case 36295:return zae;case 36296:return kae;case 35678:case 36198:case 36298:case 36306:case 35682:return Fae;case 35679:case 36299:case 36307:return Gae;case 35680:case 36300:case 36308:case 36293:return Vae;case 36289:case 36303:case 36311:case 36292:return Hae}}function Wae(t,e){t.uniform1fv(this.addr,e)}function Xae(t,e){const n=ev(e,this.size,2);t.uniform2fv(this.addr,n)}function $ae(t,e){const n=ev(e,this.size,3);t.uniform3fv(this.addr,n)}function Yae(t,e){const n=ev(e,this.size,4);t.uniform4fv(this.addr,n)}function Zae(t,e){const n=ev(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Kae(t,e){const n=ev(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Qae(t,e){const n=ev(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Jae(t,e){t.uniform1iv(this.addr,e)}function ese(t,e){t.uniform2iv(this.addr,e)}function tse(t,e){t.uniform3iv(this.addr,e)}function nse(t,e){t.uniform4iv(this.addr,e)}function ise(t,e){t.uniform1uiv(this.addr,e)}function rse(t,e){t.uniform2uiv(this.addr,e)}function ase(t,e){t.uniform3uiv(this.addr,e)}function sse(t,e){t.uniform4uiv(this.addr,e)}function ose(t,e,n){const i=this.cache,r=e.length,a=DT(n,r);Ta(i,a)||(t.uniform1iv(this.addr,a),wa(i,a));for(let s=0;s!==r;++s)n.setTexture2D(e[s]||Nq,a[s])}function lse(t,e,n){const i=this.cache,r=e.length,a=DT(n,r);Ta(i,a)||(t.uniform1iv(this.addr,a),wa(i,a));for(let s=0;s!==r;++s)n.setTexture3D(e[s]||Dq,a[s])}function cse(t,e,n){const i=this.cache,r=e.length,a=DT(n,r);Ta(i,a)||(t.uniform1iv(this.addr,a),wa(i,a));for(let s=0;s!==r;++s)n.setTextureCube(e[s]||Pq,a[s])}function use(t,e,n){const i=this.cache,r=e.length,a=DT(n,r);Ta(i,a)||(t.uniform1iv(this.addr,a),wa(i,a));for(let s=0;s!==r;++s)n.setTexture2DArray(e[s]||Oq,a[s])}function fse(t){switch(t){case 5126:return Wae;case 35664:return Xae;case 35665:return $ae;case 35666:return Yae;case 35674:return Zae;case 35675:return Kae;case 35676:return Qae;case 5124:case 35670:return Jae;case 35667:case 35671:return ese;case 35668:case 35672:return tse;case 35669:case 35673:return nse;case 5125:return ise;case 36294:return rse;case 36295:return ase;case 36296:return sse;case 35678:case 36198:case 36298:case 36306:case 35682:return ose;case 35679:case 36299:case 36307:return lse;case 35680:case 36300:case 36308:case 36293:return cse;case 36289:case 36303:case 36311:case 36292:return use}}class hse{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.setValue=qae(n.type)}}class dse{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=fse(n.type)}}class pse{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,i){const r=this.seq;for(let a=0,s=r.length;a!==s;++a){const o=r[a];o.setValue(e,n[o.id],i)}}}const eE=/(\w+)(\])?(\[|\.)?/g;function X8(t,e){t.seq.push(e),t.map[e.id]=e}function mse(t,e,n){const i=t.name,r=i.length;for(eE.lastIndex=0;;){const a=eE.exec(i),s=eE.lastIndex;let o=a[1];const l=a[2]==="]",u=a[3];if(l&&(o=o|0),u===void 0||u==="["&&s+2===r){X8(n,u===void 0?new hse(o,t,e):new dse(o,t,e));break}else{let p=n.map[o];p===void 0&&(p=new pse(o),X8(n,p)),n=p}}}class XM{constructor(e,n){this.seq=[],this.map={};const i=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const a=e.getActiveUniform(n,r),s=e.getUniformLocation(n,a.name);mse(a,s,this)}}setValue(e,n,i,r){const a=this.map[n];a!==void 0&&a.setValue(e,i,r)}setOptional(e,n,i){const r=n[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,n,i,r){for(let a=0,s=n.length;a!==s;++a){const o=n[a],l=i[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,r)}}static seqWithValue(e,n){const i=[];for(let r=0,a=e.length;r!==a;++r){const s=e[r];s.id in n&&i.push(s)}return i}}function $8(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}const gse=37297;let vse=0;function xse(t,e){const n=t.split(`
`),i=[],r=Math.max(e-6,0),a=Math.min(e+6,n.length);for(let s=r;s<a;s++){const o=s+1;i.push(`${o===e?">":" "} ${o}: ${n[s]}`)}return i.join(`
`)}const Y8=new Nn;function yse(t){fi._getMatrix(Y8,fi.workingColorSpace,t);const e=`mat3( ${Y8.elements.map(n=>n.toFixed(4))} )`;switch(fi.getTransfer(t)){case s1:return[e,"LinearTransferOETF"];case Bi:return[e,"sRGBTransferOETF"];default:return Wt("WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}function Z8(t,e,n){const i=t.getShaderParameter(e,t.COMPILE_STATUS),a=(t.getShaderInfoLog(e)||"").trim();if(i&&a==="")return"";const s=/ERROR: 0:(\d+)/.exec(a);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+a+`

`+xse(t.getShaderSource(e),o)}else return a}function bse(t,e){const n=yse(e);return[`vec4 ${t}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}function Sse(t,e){let n;switch(e){case dH:n="Linear";break;case pH:n="Reinhard";break;case mH:n="Cineon";break;case LO:n="ACESFilmic";break;case vH:n="AgX";break;case xH:n="Neutral";break;case gH:n="Custom";break;default:Wt("WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const $S=new se;function Mse(){fi.getLuminanceCoefficients($S);const t=$S.x.toFixed(4),e=$S.y.toFixed(4),n=$S.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function _se(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(_y).join(`
`)}function Tse(t){const e=[];for(const n in t){const i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function wse(t,e){const n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const a=t.getActiveAttrib(e,r),s=a.name;let o=1;a.type===t.FLOAT_MAT2&&(o=2),a.type===t.FLOAT_MAT3&&(o=3),a.type===t.FLOAT_MAT4&&(o=4),n[s]={type:a.type,location:t.getAttribLocation(e,s),locationSize:o}}return n}function _y(t){return t!==""}function K8(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Q8(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Ase=/^[ \t]*#include +<([\w\d./]+)>/gm;function Uj(t){return t.replace(Ase,Cse)}const Ese=new Map;function Cse(t,e){let n=Ln[e];if(n===void 0){const i=Ese.get(e);if(i!==void 0)n=Ln[i],Wt('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return Uj(n)}const Rse=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function J8(t){return t.replace(Rse,jse)}function jse(t,e,n,i){let r="";for(let a=parseInt(e);a<parseInt(n);a++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function eL(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Nse(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===hb?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===Ny?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===gc&&(e="SHADOWMAP_TYPE_VSM"),e}function Ose(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Tu:case $h:e="ENVMAP_TYPE_CUBE";break;case Kg:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Dse(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case $h:e="ENVMAP_MODE_REFRACTION";break}return e}function Pse(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case db:e="ENVMAP_BLENDING_MULTIPLY";break;case fH:e="ENVMAP_BLENDING_MIX";break;case hH:e="ENVMAP_BLENDING_ADD";break}return e}function Ise(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}function Use(t,e,n,i){const r=t.getContext(),a=n.defines;let s=n.vertexShader,o=n.fragmentShader;const l=Nse(n),u=Ose(n),h=Dse(n),p=Pse(n),g=Ise(n),x=_se(n),b=Tse(a),M=r.createProgram();let S,T,A=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(S=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b].filter(_y).join(`
`),S.length>0&&(S+=`
`),T=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b].filter(_y).join(`
`),T.length>0&&(T+=`
`)):(S=[eL(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(_y).join(`
`),T=[eL(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",n.envMap?"#define "+p:"",g?"#define CUBEUV_TEXEL_WIDTH "+g.texelWidth:"",g?"#define CUBEUV_TEXEL_HEIGHT "+g.texelHeight:"",g?"#define CUBEUV_MAX_MIP "+g.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Tc?"#define TONE_MAPPING":"",n.toneMapping!==Tc?Ln.tonemapping_pars_fragment:"",n.toneMapping!==Tc?Sse("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Ln.colorspace_pars_fragment,bse("linearToOutputTexel",n.outputColorSpace),Mse(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(_y).join(`
`)),s=Uj(s),s=K8(s,n),s=Q8(s,n),o=Uj(o),o=K8(o,n),o=Q8(o,n),s=J8(s),o=J8(o),n.isRawShaderMaterial!==!0&&(A=`#version 300 es
`,S=[x,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+S,T=["#define varying in",n.glslVersion===Aj?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Aj?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+T);const E=A+S+s,j=A+T+o,R=$8(r,r.VERTEX_SHADER,E),C=$8(r,r.FRAGMENT_SHADER,j);r.attachShader(M,R),r.attachShader(M,C),n.index0AttributeName!==void 0?r.bindAttribLocation(M,0,n.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(M,0,"position"),r.linkProgram(M);function D(F){if(t.debug.checkShaderErrors){const G=r.getProgramInfoLog(M)||"",H=r.getShaderInfoLog(R)||"",W=r.getShaderInfoLog(C)||"",Y=G.trim(),k=H.trim(),$=W.trim();let ee=!0,te=!0;if(r.getProgramParameter(M,r.LINK_STATUS)===!1)if(ee=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(r,M,R,C);else{const ae=Z8(r,R,"vertex"),q=Z8(r,C,"fragment");wn("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(M,r.VALIDATE_STATUS)+`

Material Name: `+F.name+`
Material Type: `+F.type+`

Program Info Log: `+Y+`
`+ae+`
`+q)}else Y!==""?Wt("WebGLProgram: Program Info Log:",Y):(k===""||$==="")&&(te=!1);te&&(F.diagnostics={runnable:ee,programLog:Y,vertexShader:{log:k,prefix:S},fragmentShader:{log:$,prefix:T}})}r.deleteShader(R),r.deleteShader(C),U=new XM(r,M),I=wse(r,M)}let U;this.getUniforms=function(){return U===void 0&&D(this),U};let I;this.getAttributes=function(){return I===void 0&&D(this),I};let L=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return L===!1&&(L=r.getProgramParameter(M,gse)),L},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(M),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=vse++,this.cacheKey=e,this.usedTimes=1,this.program=M,this.vertexShader=R,this.fragmentShader=C,this}let Lse=0;class Bse{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(n),a=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(a)===!1&&(s.add(a),a.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const i of n)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let i=n.get(e);return i===void 0&&(i=new Set,n.set(e,i)),i}_getShaderStage(e){const n=this.shaderCache;let i=n.get(e);return i===void 0&&(i=new zse(e),n.set(e,i)),i}}class zse{constructor(e){this.id=Lse++,this.code=e,this.usedTimes=0}}function kse(t,e,n,i,r,a,s){const o=new xg,l=new Bse,u=new Set,h=[],p=r.logarithmicDepthBuffer,g=r.vertexTextures;let x=r.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function M(I){return u.add(I),I===0?"uv":`uv${I}`}function S(I,L,F,G,H){const W=G.fog,Y=H.geometry,k=I.isMeshStandardMaterial?G.environment:null,$=(I.isMeshStandardMaterial?n:e).get(I.envMap||k),ee=$&&$.mapping===Kg?$.image.height:null,te=b[I.type];I.precision!==null&&(x=r.getMaxPrecision(I.precision),x!==I.precision&&Wt("WebGLProgram.getParameters:",I.precision,"not supported, using",x,"instead."));const ae=Y.morphAttributes.position||Y.morphAttributes.normal||Y.morphAttributes.color,q=ae!==void 0?ae.length:0;let K=0;Y.morphAttributes.position!==void 0&&(K=1),Y.morphAttributes.normal!==void 0&&(K=2),Y.morphAttributes.color!==void 0&&(K=3);let ie,ue,me,fe;if(te){const Yt=xc[te];ie=Yt.vertexShader,ue=Yt.fragmentShader}else ie=I.vertexShader,ue=I.fragmentShader,l.update(I),me=l.getVertexShaderID(I),fe=l.getFragmentShaderID(I);const de=t.getRenderTarget(),_e=t.state.buffers.depth.getReversed(),Te=H.isInstancedMesh===!0,Ie=H.isBatchedMesh===!0,Re=!!I.map,ye=!!I.matcap,ct=!!$,Ce=!!I.aoMap,re=!!I.lightMap,Le=!!I.bumpMap,He=!!I.normalMap,Ue=!!I.displacementMap,Ge=!!I.emissiveMap,nt=!!I.metalnessMap,Ae=!!I.roughnessMap,at=I.anisotropy>0,ne=I.clearcoat>0,Z=I.dispersion>0,xe=I.iridescence>0,Xe=I.sheen>0,Be=I.transmission>0,Ne=at&&!!I.anisotropyMap,yt=ne&&!!I.clearcoatMap,vt=ne&&!!I.clearcoatNormalMap,Dt=ne&&!!I.clearcoatRoughnessMap,Nt=xe&&!!I.iridescenceMap,We=xe&&!!I.iridescenceThicknessMap,qe=Xe&&!!I.sheenColorMap,dt=Xe&&!!I.sheenRoughnessMap,pe=!!I.specularMap,Oe=!!I.specularColorMap,ft=!!I.specularIntensityMap,ge=Be&&!!I.transmissionMap,Ee=Be&&!!I.thicknessMap,ut=!!I.gradientMap,At=!!I.alphaMap,lt=I.alphaTest>0,Ze=!!I.alphaHash,Ct=!!I.extensions;let Ut=Tc;I.toneMapped&&(de===null||de.isXRRenderTarget===!0)&&(Ut=t.toneMapping);const Bt={shaderID:te,shaderType:I.type,shaderName:I.name,vertexShader:ie,fragmentShader:ue,defines:I.defines,customVertexShaderID:me,customFragmentShaderID:fe,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:x,batching:Ie,batchingColor:Ie&&H._colorsTexture!==null,instancing:Te,instancingColor:Te&&H.instanceColor!==null,instancingMorph:Te&&H.morphTexture!==null,supportsVertexTextures:g,outputColorSpace:de===null?t.outputColorSpace:de.isXRRenderTarget===!0?de.texture.colorSpace:Zo,alphaToCoverage:!!I.alphaToCoverage,map:Re,matcap:ye,envMap:ct,envMapMode:ct&&$.mapping,envMapCubeUVHeight:ee,aoMap:Ce,lightMap:re,bumpMap:Le,normalMap:He,displacementMap:g&&Ue,emissiveMap:Ge,normalMapObjectSpace:He&&I.normalMapType===_H,normalMapTangentSpace:He&&I.normalMapType===ed,metalnessMap:nt,roughnessMap:Ae,anisotropy:at,anisotropyMap:Ne,clearcoat:ne,clearcoatMap:yt,clearcoatNormalMap:vt,clearcoatRoughnessMap:Dt,dispersion:Z,iridescence:xe,iridescenceMap:Nt,iridescenceThicknessMap:We,sheen:Xe,sheenColorMap:qe,sheenRoughnessMap:dt,specularMap:pe,specularColorMap:Oe,specularIntensityMap:ft,transmission:Be,transmissionMap:ge,thicknessMap:Ee,gradientMap:ut,opaque:I.transparent===!1&&I.blending===I0&&I.alphaToCoverage===!1,alphaMap:At,alphaTest:lt,alphaHash:Ze,combine:I.combine,mapUv:Re&&M(I.map.channel),aoMapUv:Ce&&M(I.aoMap.channel),lightMapUv:re&&M(I.lightMap.channel),bumpMapUv:Le&&M(I.bumpMap.channel),normalMapUv:He&&M(I.normalMap.channel),displacementMapUv:Ue&&M(I.displacementMap.channel),emissiveMapUv:Ge&&M(I.emissiveMap.channel),metalnessMapUv:nt&&M(I.metalnessMap.channel),roughnessMapUv:Ae&&M(I.roughnessMap.channel),anisotropyMapUv:Ne&&M(I.anisotropyMap.channel),clearcoatMapUv:yt&&M(I.clearcoatMap.channel),clearcoatNormalMapUv:vt&&M(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Dt&&M(I.clearcoatRoughnessMap.channel),iridescenceMapUv:Nt&&M(I.iridescenceMap.channel),iridescenceThicknessMapUv:We&&M(I.iridescenceThicknessMap.channel),sheenColorMapUv:qe&&M(I.sheenColorMap.channel),sheenRoughnessMapUv:dt&&M(I.sheenRoughnessMap.channel),specularMapUv:pe&&M(I.specularMap.channel),specularColorMapUv:Oe&&M(I.specularColorMap.channel),specularIntensityMapUv:ft&&M(I.specularIntensityMap.channel),transmissionMapUv:ge&&M(I.transmissionMap.channel),thicknessMapUv:Ee&&M(I.thicknessMap.channel),alphaMapUv:At&&M(I.alphaMap.channel),vertexTangents:!!Y.attributes.tangent&&(He||at),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!Y.attributes.color&&Y.attributes.color.itemSize===4,pointsUvs:H.isPoints===!0&&!!Y.attributes.uv&&(Re||At),fog:!!W,useFog:I.fog===!0,fogExp2:!!W&&W.isFogExp2,flatShading:I.flatShading===!0&&I.wireframe===!1,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:p,reversedDepthBuffer:_e,skinning:H.isSkinnedMesh===!0,morphTargets:Y.morphAttributes.position!==void 0,morphNormals:Y.morphAttributes.normal!==void 0,morphColors:Y.morphAttributes.color!==void 0,morphTargetsCount:q,morphTextureStride:K,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numLightProbes:L.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:I.dithering,shadowMapEnabled:t.shadowMap.enabled&&F.length>0,shadowMapType:t.shadowMap.type,toneMapping:Ut,decodeVideoTexture:Re&&I.map.isVideoTexture===!0&&fi.getTransfer(I.map.colorSpace)===Bi,decodeVideoTextureEmissive:Ge&&I.emissiveMap.isVideoTexture===!0&&fi.getTransfer(I.emissiveMap.colorSpace)===Bi,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===ai,flipSided:I.side===Hr,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionClipCullDistance:Ct&&I.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ct&&I.extensions.multiDraw===!0||Ie)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()};return Bt.vertexUv1s=u.has(1),Bt.vertexUv2s=u.has(2),Bt.vertexUv3s=u.has(3),u.clear(),Bt}function T(I){const L=[];if(I.shaderID?L.push(I.shaderID):(L.push(I.customVertexShaderID),L.push(I.customFragmentShaderID)),I.defines!==void 0)for(const F in I.defines)L.push(F),L.push(I.defines[F]);return I.isRawShaderMaterial===!1&&(A(L,I),E(L,I),L.push(t.outputColorSpace)),L.push(I.customProgramCacheKey),L.join()}function A(I,L){I.push(L.precision),I.push(L.outputColorSpace),I.push(L.envMapMode),I.push(L.envMapCubeUVHeight),I.push(L.mapUv),I.push(L.alphaMapUv),I.push(L.lightMapUv),I.push(L.aoMapUv),I.push(L.bumpMapUv),I.push(L.normalMapUv),I.push(L.displacementMapUv),I.push(L.emissiveMapUv),I.push(L.metalnessMapUv),I.push(L.roughnessMapUv),I.push(L.anisotropyMapUv),I.push(L.clearcoatMapUv),I.push(L.clearcoatNormalMapUv),I.push(L.clearcoatRoughnessMapUv),I.push(L.iridescenceMapUv),I.push(L.iridescenceThicknessMapUv),I.push(L.sheenColorMapUv),I.push(L.sheenRoughnessMapUv),I.push(L.specularMapUv),I.push(L.specularColorMapUv),I.push(L.specularIntensityMapUv),I.push(L.transmissionMapUv),I.push(L.thicknessMapUv),I.push(L.combine),I.push(L.fogExp2),I.push(L.sizeAttenuation),I.push(L.morphTargetsCount),I.push(L.morphAttributeCount),I.push(L.numDirLights),I.push(L.numPointLights),I.push(L.numSpotLights),I.push(L.numSpotLightMaps),I.push(L.numHemiLights),I.push(L.numRectAreaLights),I.push(L.numDirLightShadows),I.push(L.numPointLightShadows),I.push(L.numSpotLightShadows),I.push(L.numSpotLightShadowsWithMaps),I.push(L.numLightProbes),I.push(L.shadowMapType),I.push(L.toneMapping),I.push(L.numClippingPlanes),I.push(L.numClipIntersection),I.push(L.depthPacking)}function E(I,L){o.disableAll(),L.supportsVertexTextures&&o.enable(0),L.instancing&&o.enable(1),L.instancingColor&&o.enable(2),L.instancingMorph&&o.enable(3),L.matcap&&o.enable(4),L.envMap&&o.enable(5),L.normalMapObjectSpace&&o.enable(6),L.normalMapTangentSpace&&o.enable(7),L.clearcoat&&o.enable(8),L.iridescence&&o.enable(9),L.alphaTest&&o.enable(10),L.vertexColors&&o.enable(11),L.vertexAlphas&&o.enable(12),L.vertexUv1s&&o.enable(13),L.vertexUv2s&&o.enable(14),L.vertexUv3s&&o.enable(15),L.vertexTangents&&o.enable(16),L.anisotropy&&o.enable(17),L.alphaHash&&o.enable(18),L.batching&&o.enable(19),L.dispersion&&o.enable(20),L.batchingColor&&o.enable(21),L.gradientMap&&o.enable(22),I.push(o.mask),o.disableAll(),L.fog&&o.enable(0),L.useFog&&o.enable(1),L.flatShading&&o.enable(2),L.logarithmicDepthBuffer&&o.enable(3),L.reversedDepthBuffer&&o.enable(4),L.skinning&&o.enable(5),L.morphTargets&&o.enable(6),L.morphNormals&&o.enable(7),L.morphColors&&o.enable(8),L.premultipliedAlpha&&o.enable(9),L.shadowMapEnabled&&o.enable(10),L.doubleSided&&o.enable(11),L.flipSided&&o.enable(12),L.useDepthPacking&&o.enable(13),L.dithering&&o.enable(14),L.transmission&&o.enable(15),L.sheen&&o.enable(16),L.opaque&&o.enable(17),L.pointsUvs&&o.enable(18),L.decodeVideoTexture&&o.enable(19),L.decodeVideoTextureEmissive&&o.enable(20),L.alphaToCoverage&&o.enable(21),I.push(o.mask)}function j(I){const L=b[I.type];let F;if(L){const G=xc[L];F=u1.clone(G.uniforms)}else F=I.uniforms;return F}function R(I,L){let F;for(let G=0,H=h.length;G<H;G++){const W=h[G];if(W.cacheKey===L){F=W,++F.usedTimes;break}}return F===void 0&&(F=new Use(t,L,I,a),h.push(F)),F}function C(I){if(--I.usedTimes===0){const L=h.indexOf(I);h[L]=h[h.length-1],h.pop(),I.destroy()}}function D(I){l.remove(I)}function U(){l.dispose()}return{getParameters:S,getProgramCacheKey:T,getUniforms:j,acquireProgram:R,releaseProgram:C,releaseShaderCache:D,programs:h,dispose:U}}function Fse(){let t=new WeakMap;function e(s){return t.has(s)}function n(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function i(s){t.delete(s)}function r(s,o,l){t.get(s)[o]=l}function a(){t=new WeakMap}return{has:e,get:n,remove:i,update:r,dispose:a}}function Gse(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function tL(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function nL(){const t=[];let e=0;const n=[],i=[],r=[];function a(){e=0,n.length=0,i.length=0,r.length=0}function s(p,g,x,b,M,S){let T=t[e];return T===void 0?(T={id:p.id,object:p,geometry:g,material:x,groupOrder:b,renderOrder:p.renderOrder,z:M,group:S},t[e]=T):(T.id=p.id,T.object=p,T.geometry=g,T.material=x,T.groupOrder=b,T.renderOrder=p.renderOrder,T.z=M,T.group=S),e++,T}function o(p,g,x,b,M,S){const T=s(p,g,x,b,M,S);x.transmission>0?i.push(T):x.transparent===!0?r.push(T):n.push(T)}function l(p,g,x,b,M,S){const T=s(p,g,x,b,M,S);x.transmission>0?i.unshift(T):x.transparent===!0?r.unshift(T):n.unshift(T)}function u(p,g){n.length>1&&n.sort(p||Gse),i.length>1&&i.sort(g||tL),r.length>1&&r.sort(g||tL)}function h(){for(let p=e,g=t.length;p<g;p++){const x=t[p];if(x.id===null)break;x.id=null,x.object=null,x.geometry=null,x.material=null,x.group=null}}return{opaque:n,transmissive:i,transparent:r,init:a,push:o,unshift:l,finish:h,sort:u}}function Vse(){let t=new WeakMap;function e(i,r){const a=t.get(i);let s;return a===void 0?(s=new nL,t.set(i,[s])):r>=a.length?(s=new nL,a.push(s)):s=a[r],s}function n(){t=new WeakMap}return{get:e,dispose:n}}function Hse(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new se,color:new zt};break;case"SpotLight":n={position:new se,direction:new se,color:new zt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new se,color:new zt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new se,skyColor:new zt,groundColor:new zt};break;case"RectAreaLight":n={color:new zt,position:new se,halfWidth:new se,halfHeight:new se};break}return t[e.id]=n,n}}}function qse(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let Wse=0;function Xse(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function $se(t){const e=new Hse,n=qse(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new se);const r=new se,a=new un,s=new un;function o(u){let h=0,p=0,g=0;for(let I=0;I<9;I++)i.probe[I].set(0,0,0);let x=0,b=0,M=0,S=0,T=0,A=0,E=0,j=0,R=0,C=0,D=0;u.sort(Xse);for(let I=0,L=u.length;I<L;I++){const F=u[I],G=F.color,H=F.intensity,W=F.distance,Y=F.shadow&&F.shadow.map?F.shadow.map.texture:null;if(F.isAmbientLight)h+=G.r*H,p+=G.g*H,g+=G.b*H;else if(F.isLightProbe){for(let k=0;k<9;k++)i.probe[k].addScaledVector(F.sh.coefficients[k],H);D++}else if(F.isDirectionalLight){const k=e.get(F);if(k.color.copy(F.color).multiplyScalar(F.intensity),F.castShadow){const $=F.shadow,ee=n.get(F);ee.shadowIntensity=$.intensity,ee.shadowBias=$.bias,ee.shadowNormalBias=$.normalBias,ee.shadowRadius=$.radius,ee.shadowMapSize=$.mapSize,i.directionalShadow[x]=ee,i.directionalShadowMap[x]=Y,i.directionalShadowMatrix[x]=F.shadow.matrix,A++}i.directional[x]=k,x++}else if(F.isSpotLight){const k=e.get(F);k.position.setFromMatrixPosition(F.matrixWorld),k.color.copy(G).multiplyScalar(H),k.distance=W,k.coneCos=Math.cos(F.angle),k.penumbraCos=Math.cos(F.angle*(1-F.penumbra)),k.decay=F.decay,i.spot[M]=k;const $=F.shadow;if(F.map&&(i.spotLightMap[R]=F.map,R++,$.updateMatrices(F),F.castShadow&&C++),i.spotLightMatrix[M]=$.matrix,F.castShadow){const ee=n.get(F);ee.shadowIntensity=$.intensity,ee.shadowBias=$.bias,ee.shadowNormalBias=$.normalBias,ee.shadowRadius=$.radius,ee.shadowMapSize=$.mapSize,i.spotShadow[M]=ee,i.spotShadowMap[M]=Y,j++}M++}else if(F.isRectAreaLight){const k=e.get(F);k.color.copy(G).multiplyScalar(H),k.halfWidth.set(F.width*.5,0,0),k.halfHeight.set(0,F.height*.5,0),i.rectArea[S]=k,S++}else if(F.isPointLight){const k=e.get(F);if(k.color.copy(F.color).multiplyScalar(F.intensity),k.distance=F.distance,k.decay=F.decay,F.castShadow){const $=F.shadow,ee=n.get(F);ee.shadowIntensity=$.intensity,ee.shadowBias=$.bias,ee.shadowNormalBias=$.normalBias,ee.shadowRadius=$.radius,ee.shadowMapSize=$.mapSize,ee.shadowCameraNear=$.camera.near,ee.shadowCameraFar=$.camera.far,i.pointShadow[b]=ee,i.pointShadowMap[b]=Y,i.pointShadowMatrix[b]=F.shadow.matrix,E++}i.point[b]=k,b++}else if(F.isHemisphereLight){const k=e.get(F);k.skyColor.copy(F.color).multiplyScalar(H),k.groundColor.copy(F.groundColor).multiplyScalar(H),i.hemi[T]=k,T++}}S>0&&(t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Gt.LTC_FLOAT_1,i.rectAreaLTC2=Gt.LTC_FLOAT_2):(i.rectAreaLTC1=Gt.LTC_HALF_1,i.rectAreaLTC2=Gt.LTC_HALF_2)),i.ambient[0]=h,i.ambient[1]=p,i.ambient[2]=g;const U=i.hash;(U.directionalLength!==x||U.pointLength!==b||U.spotLength!==M||U.rectAreaLength!==S||U.hemiLength!==T||U.numDirectionalShadows!==A||U.numPointShadows!==E||U.numSpotShadows!==j||U.numSpotMaps!==R||U.numLightProbes!==D)&&(i.directional.length=x,i.spot.length=M,i.rectArea.length=S,i.point.length=b,i.hemi.length=T,i.directionalShadow.length=A,i.directionalShadowMap.length=A,i.pointShadow.length=E,i.pointShadowMap.length=E,i.spotShadow.length=j,i.spotShadowMap.length=j,i.directionalShadowMatrix.length=A,i.pointShadowMatrix.length=E,i.spotLightMatrix.length=j+R-C,i.spotLightMap.length=R,i.numSpotLightShadowsWithMaps=C,i.numLightProbes=D,U.directionalLength=x,U.pointLength=b,U.spotLength=M,U.rectAreaLength=S,U.hemiLength=T,U.numDirectionalShadows=A,U.numPointShadows=E,U.numSpotShadows=j,U.numSpotMaps=R,U.numLightProbes=D,i.version=Wse++)}function l(u,h){let p=0,g=0,x=0,b=0,M=0;const S=h.matrixWorldInverse;for(let T=0,A=u.length;T<A;T++){const E=u[T];if(E.isDirectionalLight){const j=i.directional[p];j.direction.setFromMatrixPosition(E.matrixWorld),r.setFromMatrixPosition(E.target.matrixWorld),j.direction.sub(r),j.direction.transformDirection(S),p++}else if(E.isSpotLight){const j=i.spot[x];j.position.setFromMatrixPosition(E.matrixWorld),j.position.applyMatrix4(S),j.direction.setFromMatrixPosition(E.matrixWorld),r.setFromMatrixPosition(E.target.matrixWorld),j.direction.sub(r),j.direction.transformDirection(S),x++}else if(E.isRectAreaLight){const j=i.rectArea[b];j.position.setFromMatrixPosition(E.matrixWorld),j.position.applyMatrix4(S),s.identity(),a.copy(E.matrixWorld),a.premultiply(S),s.extractRotation(a),j.halfWidth.set(E.width*.5,0,0),j.halfHeight.set(0,E.height*.5,0),j.halfWidth.applyMatrix4(s),j.halfHeight.applyMatrix4(s),b++}else if(E.isPointLight){const j=i.point[g];j.position.setFromMatrixPosition(E.matrixWorld),j.position.applyMatrix4(S),g++}else if(E.isHemisphereLight){const j=i.hemi[M];j.direction.setFromMatrixPosition(E.matrixWorld),j.direction.transformDirection(S),M++}}}return{setup:o,setupView:l,state:i}}function iL(t){const e=new $se(t),n=[],i=[];function r(h){u.camera=h,n.length=0,i.length=0}function a(h){n.push(h)}function s(h){i.push(h)}function o(){e.setup(n)}function l(h){e.setupView(n,h)}const u={lightsArray:n,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:u,setupLights:o,setupLightsView:l,pushLight:a,pushShadow:s}}function Yse(t){let e=new WeakMap;function n(r,a=0){const s=e.get(r);let o;return s===void 0?(o=new iL(t),e.set(r,[o])):a>=s.length?(o=new iL(t),s.push(o)):o=s[a],o}function i(){e=new WeakMap}return{get:n,dispose:i}}const Zse=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Kse=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Qse(t,e,n){let i=new Qg;const r=new Ye,a=new Ye,s=new Cn,o=new Eb({depthPacking:HO}),l=new CT,u={},h=n.maxTextureSize,p={[_u]:Hr,[Hr]:_u,[ai]:ai},g=new di({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ye},radius:{value:4}},vertexShader:Zse,fragmentShader:Kse}),x=g.clone();x.defines.HORIZONTAL_PASS=1;const b=new An;b.setAttribute("position",new yi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const M=new zi(b,g),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=hb;let T=this.type;this.render=function(C,D,U){if(S.enabled===!1||S.autoUpdate===!1&&S.needsUpdate===!1||C.length===0)return;const I=t.getRenderTarget(),L=t.getActiveCubeFace(),F=t.getActiveMipmapLevel(),G=t.state;G.setBlending(_r),G.buffers.depth.getReversed()===!0?G.buffers.color.setClear(0,0,0,0):G.buffers.color.setClear(1,1,1,1),G.buffers.depth.setTest(!0),G.setScissorTest(!1);const H=T!==gc&&this.type===gc,W=T===gc&&this.type!==gc;for(let Y=0,k=C.length;Y<k;Y++){const $=C[Y],ee=$.shadow;if(ee===void 0){Wt("WebGLShadowMap:",$,"has no shadow.");continue}if(ee.autoUpdate===!1&&ee.needsUpdate===!1)continue;r.copy(ee.mapSize);const te=ee.getFrameExtents();if(r.multiply(te),a.copy(ee.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(a.x=Math.floor(h/te.x),r.x=a.x*te.x,ee.mapSize.x=a.x),r.y>h&&(a.y=Math.floor(h/te.y),r.y=a.y*te.y,ee.mapSize.y=a.y)),ee.map===null||H===!0||W===!0){const q=this.type!==gc?{minFilter:Ir,magFilter:Ir}:{};ee.map!==null&&ee.map.dispose(),ee.map=new Ei(r.x,r.y,q),ee.map.texture.name=$.name+".shadowMap",ee.camera.updateProjectionMatrix()}t.setRenderTarget(ee.map),t.clear();const ae=ee.getViewportCount();for(let q=0;q<ae;q++){const K=ee.getViewport(q);s.set(a.x*K.x,a.y*K.y,a.x*K.z,a.y*K.w),G.viewport(s),ee.updateMatrices($,q),i=ee.getFrustum(),j(D,U,ee.camera,$,this.type)}ee.isPointLightShadow!==!0&&this.type===gc&&A(ee,U),ee.needsUpdate=!1}T=this.type,S.needsUpdate=!1,t.setRenderTarget(I,L,F)};function A(C,D){const U=e.update(M);g.defines.VSM_SAMPLES!==C.blurSamples&&(g.defines.VSM_SAMPLES=C.blurSamples,x.defines.VSM_SAMPLES=C.blurSamples,g.needsUpdate=!0,x.needsUpdate=!0),C.mapPass===null&&(C.mapPass=new Ei(r.x,r.y)),g.uniforms.shadow_pass.value=C.map.texture,g.uniforms.resolution.value=C.mapSize,g.uniforms.radius.value=C.radius,t.setRenderTarget(C.mapPass),t.clear(),t.renderBufferDirect(D,null,U,g,M,null),x.uniforms.shadow_pass.value=C.mapPass.texture,x.uniforms.resolution.value=C.mapSize,x.uniforms.radius.value=C.radius,t.setRenderTarget(C.map),t.clear(),t.renderBufferDirect(D,null,U,x,M,null)}function E(C,D,U,I){let L=null;const F=U.isPointLight===!0?C.customDistanceMaterial:C.customDepthMaterial;if(F!==void 0)L=F;else if(L=U.isPointLight===!0?l:o,t.localClippingEnabled&&D.clipShadows===!0&&Array.isArray(D.clippingPlanes)&&D.clippingPlanes.length!==0||D.displacementMap&&D.displacementScale!==0||D.alphaMap&&D.alphaTest>0||D.map&&D.alphaTest>0||D.alphaToCoverage===!0){const G=L.uuid,H=D.uuid;let W=u[G];W===void 0&&(W={},u[G]=W);let Y=W[H];Y===void 0&&(Y=L.clone(),W[H]=Y,D.addEventListener("dispose",R)),L=Y}if(L.visible=D.visible,L.wireframe=D.wireframe,I===gc?L.side=D.shadowSide!==null?D.shadowSide:D.side:L.side=D.shadowSide!==null?D.shadowSide:p[D.side],L.alphaMap=D.alphaMap,L.alphaTest=D.alphaToCoverage===!0?.5:D.alphaTest,L.map=D.map,L.clipShadows=D.clipShadows,L.clippingPlanes=D.clippingPlanes,L.clipIntersection=D.clipIntersection,L.displacementMap=D.displacementMap,L.displacementScale=D.displacementScale,L.displacementBias=D.displacementBias,L.wireframeLinewidth=D.wireframeLinewidth,L.linewidth=D.linewidth,U.isPointLight===!0&&L.isMeshDistanceMaterial===!0){const G=t.properties.get(L);G.light=U}return L}function j(C,D,U,I,L){if(C.visible===!1)return;if(C.layers.test(D.layers)&&(C.isMesh||C.isLine||C.isPoints)&&(C.castShadow||C.receiveShadow&&L===gc)&&(!C.frustumCulled||i.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(U.matrixWorldInverse,C.matrixWorld);const H=e.update(C),W=C.material;if(Array.isArray(W)){const Y=H.groups;for(let k=0,$=Y.length;k<$;k++){const ee=Y[k],te=W[ee.materialIndex];if(te&&te.visible){const ae=E(C,te,I,L);C.onBeforeShadow(t,C,D,U,H,ae,ee),t.renderBufferDirect(U,null,H,ae,C,ee),C.onAfterShadow(t,C,D,U,H,ae,ee)}}}else if(W.visible){const Y=E(C,W,I,L);C.onBeforeShadow(t,C,D,U,H,Y,null),t.renderBufferDirect(U,null,H,Y,C,null),C.onAfterShadow(t,C,D,U,H,Y,null)}}const G=C.children;for(let H=0,W=G.length;H<W;H++)j(G[H],D,U,I,L)}function R(C){C.target.removeEventListener("dispose",R);for(const U in u){const I=u[U],L=C.target.uuid;L in I&&(I[L].dispose(),delete I[L])}}}const Jse={[i_]:t1,[r_]:o_,[a_]:l_,[V0]:s_,[t1]:i_,[o_]:r_,[l_]:a_,[s_]:V0};function eoe(t,e){function n(){let ge=!1;const Ee=new Cn;let ut=null;const At=new Cn(0,0,0,0);return{setMask:function(lt){ut!==lt&&!ge&&(t.colorMask(lt,lt,lt,lt),ut=lt)},setLocked:function(lt){ge=lt},setClear:function(lt,Ze,Ct,Ut,Bt){Bt===!0&&(lt*=Ut,Ze*=Ut,Ct*=Ut),Ee.set(lt,Ze,Ct,Ut),At.equals(Ee)===!1&&(t.clearColor(lt,Ze,Ct,Ut),At.copy(Ee))},reset:function(){ge=!1,ut=null,At.set(-1,0,0,0)}}}function i(){let ge=!1,Ee=!1,ut=null,At=null,lt=null;return{setReversed:function(Ze){if(Ee!==Ze){const Ct=e.get("EXT_clip_control");Ze?Ct.clipControlEXT(Ct.LOWER_LEFT_EXT,Ct.ZERO_TO_ONE_EXT):Ct.clipControlEXT(Ct.LOWER_LEFT_EXT,Ct.NEGATIVE_ONE_TO_ONE_EXT),Ee=Ze;const Ut=lt;lt=null,this.setClear(Ut)}},getReversed:function(){return Ee},setTest:function(Ze){Ze?de(t.DEPTH_TEST):_e(t.DEPTH_TEST)},setMask:function(Ze){ut!==Ze&&!ge&&(t.depthMask(Ze),ut=Ze)},setFunc:function(Ze){if(Ee&&(Ze=Jse[Ze]),At!==Ze){switch(Ze){case i_:t.depthFunc(t.NEVER);break;case t1:t.depthFunc(t.ALWAYS);break;case r_:t.depthFunc(t.LESS);break;case V0:t.depthFunc(t.LEQUAL);break;case a_:t.depthFunc(t.EQUAL);break;case s_:t.depthFunc(t.GEQUAL);break;case o_:t.depthFunc(t.GREATER);break;case l_:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}At=Ze}},setLocked:function(Ze){ge=Ze},setClear:function(Ze){lt!==Ze&&(Ee&&(Ze=1-Ze),t.clearDepth(Ze),lt=Ze)},reset:function(){ge=!1,ut=null,At=null,lt=null,Ee=!1}}}function r(){let ge=!1,Ee=null,ut=null,At=null,lt=null,Ze=null,Ct=null,Ut=null,Bt=null;return{setTest:function(Yt){ge||(Yt?de(t.STENCIL_TEST):_e(t.STENCIL_TEST))},setMask:function(Yt){Ee!==Yt&&!ge&&(t.stencilMask(Yt),Ee=Yt)},setFunc:function(Yt,On,Vn){(ut!==Yt||At!==On||lt!==Vn)&&(t.stencilFunc(Yt,On,Vn),ut=Yt,At=On,lt=Vn)},setOp:function(Yt,On,Vn){(Ze!==Yt||Ct!==On||Ut!==Vn)&&(t.stencilOp(Yt,On,Vn),Ze=Yt,Ct=On,Ut=Vn)},setLocked:function(Yt){ge=Yt},setClear:function(Yt){Bt!==Yt&&(t.clearStencil(Yt),Bt=Yt)},reset:function(){ge=!1,Ee=null,ut=null,At=null,lt=null,Ze=null,Ct=null,Ut=null,Bt=null}}}const a=new n,s=new i,o=new r,l=new WeakMap,u=new WeakMap;let h={},p={},g=new WeakMap,x=[],b=null,M=!1,S=null,T=null,A=null,E=null,j=null,R=null,C=null,D=new zt(0,0,0),U=0,I=!1,L=null,F=null,G=null,H=null,W=null;const Y=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let k=!1,$=0;const ee=t.getParameter(t.VERSION);ee.indexOf("WebGL")!==-1?($=parseFloat(/^WebGL (\d)/.exec(ee)[1]),k=$>=1):ee.indexOf("OpenGL ES")!==-1&&($=parseFloat(/^OpenGL ES (\d)/.exec(ee)[1]),k=$>=2);let te=null,ae={};const q=t.getParameter(t.SCISSOR_BOX),K=t.getParameter(t.VIEWPORT),ie=new Cn().fromArray(q),ue=new Cn().fromArray(K);function me(ge,Ee,ut,At){const lt=new Uint8Array(4),Ze=t.createTexture();t.bindTexture(ge,Ze),t.texParameteri(ge,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(ge,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Ct=0;Ct<ut;Ct++)ge===t.TEXTURE_3D||ge===t.TEXTURE_2D_ARRAY?t.texImage3D(Ee,0,t.RGBA,1,1,At,0,t.RGBA,t.UNSIGNED_BYTE,lt):t.texImage2D(Ee+Ct,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,lt);return Ze}const fe={};fe[t.TEXTURE_2D]=me(t.TEXTURE_2D,t.TEXTURE_2D,1),fe[t.TEXTURE_CUBE_MAP]=me(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),fe[t.TEXTURE_2D_ARRAY]=me(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),fe[t.TEXTURE_3D]=me(t.TEXTURE_3D,t.TEXTURE_3D,1,1),a.setClear(0,0,0,1),s.setClear(1),o.setClear(0),de(t.DEPTH_TEST),s.setFunc(V0),Le(!1),He(yj),de(t.CULL_FACE),Ce(_r);function de(ge){h[ge]!==!0&&(t.enable(ge),h[ge]=!0)}function _e(ge){h[ge]!==!1&&(t.disable(ge),h[ge]=!1)}function Te(ge,Ee){return p[ge]!==Ee?(t.bindFramebuffer(ge,Ee),p[ge]=Ee,ge===t.DRAW_FRAMEBUFFER&&(p[t.FRAMEBUFFER]=Ee),ge===t.FRAMEBUFFER&&(p[t.DRAW_FRAMEBUFFER]=Ee),!0):!1}function Ie(ge,Ee){let ut=x,At=!1;if(ge){ut=g.get(Ee),ut===void 0&&(ut=[],g.set(Ee,ut));const lt=ge.textures;if(ut.length!==lt.length||ut[0]!==t.COLOR_ATTACHMENT0){for(let Ze=0,Ct=lt.length;Ze<Ct;Ze++)ut[Ze]=t.COLOR_ATTACHMENT0+Ze;ut.length=lt.length,At=!0}}else ut[0]!==t.BACK&&(ut[0]=t.BACK,At=!0);At&&t.drawBuffers(ut)}function Re(ge){return b!==ge?(t.useProgram(ge),b=ge,!0):!1}const ye={[zh]:t.FUNC_ADD,[$V]:t.FUNC_SUBTRACT,[YV]:t.FUNC_REVERSE_SUBTRACT};ye[ZV]=t.MIN,ye[KV]=t.MAX;const ct={[QV]:t.ZERO,[JV]:t.ONE,[eH]:t.SRC_COLOR,[t_]:t.SRC_ALPHA,[sH]:t.SRC_ALPHA_SATURATE,[rH]:t.DST_COLOR,[nH]:t.DST_ALPHA,[tH]:t.ONE_MINUS_SRC_COLOR,[n_]:t.ONE_MINUS_SRC_ALPHA,[aH]:t.ONE_MINUS_DST_COLOR,[iH]:t.ONE_MINUS_DST_ALPHA,[oH]:t.CONSTANT_COLOR,[lH]:t.ONE_MINUS_CONSTANT_COLOR,[cH]:t.CONSTANT_ALPHA,[uH]:t.ONE_MINUS_CONSTANT_ALPHA};function Ce(ge,Ee,ut,At,lt,Ze,Ct,Ut,Bt,Yt){if(ge===_r){M===!0&&(_e(t.BLEND),M=!1);return}if(M===!1&&(de(t.BLEND),M=!0),ge!==XV){if(ge!==S||Yt!==I){if((T!==zh||j!==zh)&&(t.blendEquation(t.FUNC_ADD),T=zh,j=zh),Yt)switch(ge){case I0:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case bj:t.blendFunc(t.ONE,t.ONE);break;case Sj:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case Mj:t.blendFuncSeparate(t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ZERO,t.ONE);break;default:wn("WebGLState: Invalid blending: ",ge);break}else switch(ge){case I0:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case bj:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE,t.ONE,t.ONE);break;case Sj:wn("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case Mj:wn("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:wn("WebGLState: Invalid blending: ",ge);break}A=null,E=null,R=null,C=null,D.set(0,0,0),U=0,S=ge,I=Yt}return}lt=lt||Ee,Ze=Ze||ut,Ct=Ct||At,(Ee!==T||lt!==j)&&(t.blendEquationSeparate(ye[Ee],ye[lt]),T=Ee,j=lt),(ut!==A||At!==E||Ze!==R||Ct!==C)&&(t.blendFuncSeparate(ct[ut],ct[At],ct[Ze],ct[Ct]),A=ut,E=At,R=Ze,C=Ct),(Ut.equals(D)===!1||Bt!==U)&&(t.blendColor(Ut.r,Ut.g,Ut.b,Bt),D.copy(Ut),U=Bt),S=ge,I=!1}function re(ge,Ee){ge.side===ai?_e(t.CULL_FACE):de(t.CULL_FACE);let ut=ge.side===Hr;Ee&&(ut=!ut),Le(ut),ge.blending===I0&&ge.transparent===!1?Ce(_r):Ce(ge.blending,ge.blendEquation,ge.blendSrc,ge.blendDst,ge.blendEquationAlpha,ge.blendSrcAlpha,ge.blendDstAlpha,ge.blendColor,ge.blendAlpha,ge.premultipliedAlpha),s.setFunc(ge.depthFunc),s.setTest(ge.depthTest),s.setMask(ge.depthWrite),a.setMask(ge.colorWrite);const At=ge.stencilWrite;o.setTest(At),At&&(o.setMask(ge.stencilWriteMask),o.setFunc(ge.stencilFunc,ge.stencilRef,ge.stencilFuncMask),o.setOp(ge.stencilFail,ge.stencilZFail,ge.stencilZPass)),Ge(ge.polygonOffset,ge.polygonOffsetFactor,ge.polygonOffsetUnits),ge.alphaToCoverage===!0?de(t.SAMPLE_ALPHA_TO_COVERAGE):_e(t.SAMPLE_ALPHA_TO_COVERAGE)}function Le(ge){L!==ge&&(ge?t.frontFace(t.CW):t.frontFace(t.CCW),L=ge)}function He(ge){ge!==HV?(de(t.CULL_FACE),ge!==F&&(ge===yj?t.cullFace(t.BACK):ge===qV?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):_e(t.CULL_FACE),F=ge}function Ue(ge){ge!==G&&(k&&t.lineWidth(ge),G=ge)}function Ge(ge,Ee,ut){ge?(de(t.POLYGON_OFFSET_FILL),(H!==Ee||W!==ut)&&(t.polygonOffset(Ee,ut),H=Ee,W=ut)):_e(t.POLYGON_OFFSET_FILL)}function nt(ge){ge?de(t.SCISSOR_TEST):_e(t.SCISSOR_TEST)}function Ae(ge){ge===void 0&&(ge=t.TEXTURE0+Y-1),te!==ge&&(t.activeTexture(ge),te=ge)}function at(ge,Ee,ut){ut===void 0&&(te===null?ut=t.TEXTURE0+Y-1:ut=te);let At=ae[ut];At===void 0&&(At={type:void 0,texture:void 0},ae[ut]=At),(At.type!==ge||At.texture!==Ee)&&(te!==ut&&(t.activeTexture(ut),te=ut),t.bindTexture(ge,Ee||fe[ge]),At.type=ge,At.texture=Ee)}function ne(){const ge=ae[te];ge!==void 0&&ge.type!==void 0&&(t.bindTexture(ge.type,null),ge.type=void 0,ge.texture=void 0)}function Z(){try{t.compressedTexImage2D(...arguments)}catch(ge){ge("WebGLState:",ge)}}function xe(){try{t.compressedTexImage3D(...arguments)}catch(ge){ge("WebGLState:",ge)}}function Xe(){try{t.texSubImage2D(...arguments)}catch(ge){ge("WebGLState:",ge)}}function Be(){try{t.texSubImage3D(...arguments)}catch(ge){ge("WebGLState:",ge)}}function Ne(){try{t.compressedTexSubImage2D(...arguments)}catch(ge){ge("WebGLState:",ge)}}function yt(){try{t.compressedTexSubImage3D(...arguments)}catch(ge){ge("WebGLState:",ge)}}function vt(){try{t.texStorage2D(...arguments)}catch(ge){ge("WebGLState:",ge)}}function Dt(){try{t.texStorage3D(...arguments)}catch(ge){ge("WebGLState:",ge)}}function Nt(){try{t.texImage2D(...arguments)}catch(ge){ge("WebGLState:",ge)}}function We(){try{t.texImage3D(...arguments)}catch(ge){ge("WebGLState:",ge)}}function qe(ge){ie.equals(ge)===!1&&(t.scissor(ge.x,ge.y,ge.z,ge.w),ie.copy(ge))}function dt(ge){ue.equals(ge)===!1&&(t.viewport(ge.x,ge.y,ge.z,ge.w),ue.copy(ge))}function pe(ge,Ee){let ut=u.get(Ee);ut===void 0&&(ut=new WeakMap,u.set(Ee,ut));let At=ut.get(ge);At===void 0&&(At=t.getUniformBlockIndex(Ee,ge.name),ut.set(ge,At))}function Oe(ge,Ee){const At=u.get(Ee).get(ge);l.get(Ee)!==At&&(t.uniformBlockBinding(Ee,At,ge.__bindingPointIndex),l.set(Ee,At))}function ft(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),s.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),h={},te=null,ae={},p={},g=new WeakMap,x=[],b=null,M=!1,S=null,T=null,A=null,E=null,j=null,R=null,C=null,D=new zt(0,0,0),U=0,I=!1,L=null,F=null,G=null,H=null,W=null,ie.set(0,0,t.canvas.width,t.canvas.height),ue.set(0,0,t.canvas.width,t.canvas.height),a.reset(),s.reset(),o.reset()}return{buffers:{color:a,depth:s,stencil:o},enable:de,disable:_e,bindFramebuffer:Te,drawBuffers:Ie,useProgram:Re,setBlending:Ce,setMaterial:re,setFlipSided:Le,setCullFace:He,setLineWidth:Ue,setPolygonOffset:Ge,setScissorTest:nt,activeTexture:Ae,bindTexture:at,unbindTexture:ne,compressedTexImage2D:Z,compressedTexImage3D:xe,texImage2D:Nt,texImage3D:We,updateUBOMapping:pe,uniformBlockBinding:Oe,texStorage2D:vt,texStorage3D:Dt,texSubImage2D:Xe,texSubImage3D:Be,compressedTexSubImage2D:Ne,compressedTexSubImage3D:yt,scissor:qe,viewport:dt,reset:ft}}function toe(t,e,n,i,r,a,s){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new Ye,h=new WeakMap;let p;const g=new WeakMap;let x=!1;try{x=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(ne,Z){return x?new OffscreenCanvas(ne,Z):l1("canvas")}function M(ne,Z,xe){let Xe=1;const Be=at(ne);if((Be.width>xe||Be.height>xe)&&(Xe=xe/Math.max(Be.width,Be.height)),Xe<1)if(typeof HTMLImageElement<"u"&&ne instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ne instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ne instanceof ImageBitmap||typeof VideoFrame<"u"&&ne instanceof VideoFrame){const Ne=Math.floor(Xe*Be.width),yt=Math.floor(Xe*Be.height);p===void 0&&(p=b(Ne,yt));const vt=Z?b(Ne,yt):p;return vt.width=Ne,vt.height=yt,vt.getContext("2d").drawImage(ne,0,0,Ne,yt),Wt("WebGLRenderer: Texture has been resized from ("+Be.width+"x"+Be.height+") to ("+Ne+"x"+yt+")."),vt}else return"data"in ne&&Wt("WebGLRenderer: Image in DataTexture is too big ("+Be.width+"x"+Be.height+")."),ne;return ne}function S(ne){return ne.generateMipmaps}function T(ne){t.generateMipmap(ne)}function A(ne){return ne.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:ne.isWebGL3DRenderTarget?t.TEXTURE_3D:ne.isWebGLArrayRenderTarget||ne.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function E(ne,Z,xe,Xe,Be=!1){if(ne!==null){if(t[ne]!==void 0)return t[ne];Wt("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ne+"'")}let Ne=Z;if(Z===t.RED&&(xe===t.FLOAT&&(Ne=t.R32F),xe===t.HALF_FLOAT&&(Ne=t.R16F),xe===t.UNSIGNED_BYTE&&(Ne=t.R8)),Z===t.RED_INTEGER&&(xe===t.UNSIGNED_BYTE&&(Ne=t.R8UI),xe===t.UNSIGNED_SHORT&&(Ne=t.R16UI),xe===t.UNSIGNED_INT&&(Ne=t.R32UI),xe===t.BYTE&&(Ne=t.R8I),xe===t.SHORT&&(Ne=t.R16I),xe===t.INT&&(Ne=t.R32I)),Z===t.RG&&(xe===t.FLOAT&&(Ne=t.RG32F),xe===t.HALF_FLOAT&&(Ne=t.RG16F),xe===t.UNSIGNED_BYTE&&(Ne=t.RG8)),Z===t.RG_INTEGER&&(xe===t.UNSIGNED_BYTE&&(Ne=t.RG8UI),xe===t.UNSIGNED_SHORT&&(Ne=t.RG16UI),xe===t.UNSIGNED_INT&&(Ne=t.RG32UI),xe===t.BYTE&&(Ne=t.RG8I),xe===t.SHORT&&(Ne=t.RG16I),xe===t.INT&&(Ne=t.RG32I)),Z===t.RGB_INTEGER&&(xe===t.UNSIGNED_BYTE&&(Ne=t.RGB8UI),xe===t.UNSIGNED_SHORT&&(Ne=t.RGB16UI),xe===t.UNSIGNED_INT&&(Ne=t.RGB32UI),xe===t.BYTE&&(Ne=t.RGB8I),xe===t.SHORT&&(Ne=t.RGB16I),xe===t.INT&&(Ne=t.RGB32I)),Z===t.RGBA_INTEGER&&(xe===t.UNSIGNED_BYTE&&(Ne=t.RGBA8UI),xe===t.UNSIGNED_SHORT&&(Ne=t.RGBA16UI),xe===t.UNSIGNED_INT&&(Ne=t.RGBA32UI),xe===t.BYTE&&(Ne=t.RGBA8I),xe===t.SHORT&&(Ne=t.RGBA16I),xe===t.INT&&(Ne=t.RGBA32I)),Z===t.RGB&&(xe===t.UNSIGNED_INT_5_9_9_9_REV&&(Ne=t.RGB9_E5),xe===t.UNSIGNED_INT_10F_11F_11F_REV&&(Ne=t.R11F_G11F_B10F)),Z===t.RGBA){const yt=Be?s1:fi.getTransfer(Xe);xe===t.FLOAT&&(Ne=t.RGBA32F),xe===t.HALF_FLOAT&&(Ne=t.RGBA16F),xe===t.UNSIGNED_BYTE&&(Ne=yt===Bi?t.SRGB8_ALPHA8:t.RGBA8),xe===t.UNSIGNED_SHORT_4_4_4_4&&(Ne=t.RGBA4),xe===t.UNSIGNED_SHORT_5_5_5_1&&(Ne=t.RGB5_A1)}return(Ne===t.R16F||Ne===t.R32F||Ne===t.RG16F||Ne===t.RG32F||Ne===t.RGBA16F||Ne===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Ne}function j(ne,Z){let xe;return ne?Z===null||Z===Ac||Z===q0?xe=t.DEPTH24_STENCIL8:Z===fr?xe=t.DEPTH32F_STENCIL8:Z===H0&&(xe=t.DEPTH24_STENCIL8,Wt("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Z===null||Z===Ac||Z===q0?xe=t.DEPTH_COMPONENT24:Z===fr?xe=t.DEPTH_COMPONENT32F:Z===H0&&(xe=t.DEPTH_COMPONENT16),xe}function R(ne,Z){return S(ne)===!0||ne.isFramebufferTexture&&ne.minFilter!==Ir&&ne.minFilter!==Rn?Math.log2(Math.max(Z.width,Z.height))+1:ne.mipmaps!==void 0&&ne.mipmaps.length>0?ne.mipmaps.length:ne.isCompressedTexture&&Array.isArray(ne.image)?Z.mipmaps.length:1}function C(ne){const Z=ne.target;Z.removeEventListener("dispose",C),U(Z),Z.isVideoTexture&&h.delete(Z)}function D(ne){const Z=ne.target;Z.removeEventListener("dispose",D),L(Z)}function U(ne){const Z=i.get(ne);if(Z.__webglInit===void 0)return;const xe=ne.source,Xe=g.get(xe);if(Xe){const Be=Xe[Z.__cacheKey];Be.usedTimes--,Be.usedTimes===0&&I(ne),Object.keys(Xe).length===0&&g.delete(xe)}i.remove(ne)}function I(ne){const Z=i.get(ne);t.deleteTexture(Z.__webglTexture);const xe=ne.source,Xe=g.get(xe);delete Xe[Z.__cacheKey],s.memory.textures--}function L(ne){const Z=i.get(ne);if(ne.depthTexture&&(ne.depthTexture.dispose(),i.remove(ne.depthTexture)),ne.isWebGLCubeRenderTarget)for(let Xe=0;Xe<6;Xe++){if(Array.isArray(Z.__webglFramebuffer[Xe]))for(let Be=0;Be<Z.__webglFramebuffer[Xe].length;Be++)t.deleteFramebuffer(Z.__webglFramebuffer[Xe][Be]);else t.deleteFramebuffer(Z.__webglFramebuffer[Xe]);Z.__webglDepthbuffer&&t.deleteRenderbuffer(Z.__webglDepthbuffer[Xe])}else{if(Array.isArray(Z.__webglFramebuffer))for(let Xe=0;Xe<Z.__webglFramebuffer.length;Xe++)t.deleteFramebuffer(Z.__webglFramebuffer[Xe]);else t.deleteFramebuffer(Z.__webglFramebuffer);if(Z.__webglDepthbuffer&&t.deleteRenderbuffer(Z.__webglDepthbuffer),Z.__webglMultisampledFramebuffer&&t.deleteFramebuffer(Z.__webglMultisampledFramebuffer),Z.__webglColorRenderbuffer)for(let Xe=0;Xe<Z.__webglColorRenderbuffer.length;Xe++)Z.__webglColorRenderbuffer[Xe]&&t.deleteRenderbuffer(Z.__webglColorRenderbuffer[Xe]);Z.__webglDepthRenderbuffer&&t.deleteRenderbuffer(Z.__webglDepthRenderbuffer)}const xe=ne.textures;for(let Xe=0,Be=xe.length;Xe<Be;Xe++){const Ne=i.get(xe[Xe]);Ne.__webglTexture&&(t.deleteTexture(Ne.__webglTexture),s.memory.textures--),i.remove(xe[Xe])}i.remove(ne)}let F=0;function G(){F=0}function H(){const ne=F;return ne>=r.maxTextures&&Wt("WebGLTextures: Trying to use "+ne+" texture units while this GPU supports only "+r.maxTextures),F+=1,ne}function W(ne){const Z=[];return Z.push(ne.wrapS),Z.push(ne.wrapT),Z.push(ne.wrapR||0),Z.push(ne.magFilter),Z.push(ne.minFilter),Z.push(ne.anisotropy),Z.push(ne.internalFormat),Z.push(ne.format),Z.push(ne.type),Z.push(ne.generateMipmaps),Z.push(ne.premultiplyAlpha),Z.push(ne.flipY),Z.push(ne.unpackAlignment),Z.push(ne.colorSpace),Z.join()}function Y(ne,Z){const xe=i.get(ne);if(ne.isVideoTexture&&nt(ne),ne.isRenderTargetTexture===!1&&ne.isExternalTexture!==!0&&ne.version>0&&xe.__version!==ne.version){const Xe=ne.image;if(Xe===null)Wt("WebGLRenderer: Texture marked for update but no image data found.");else if(Xe.complete===!1)Wt("WebGLRenderer: Texture marked for update but image is incomplete");else{fe(xe,ne,Z);return}}else ne.isExternalTexture&&(xe.__webglTexture=ne.sourceTexture?ne.sourceTexture:null);n.bindTexture(t.TEXTURE_2D,xe.__webglTexture,t.TEXTURE0+Z)}function k(ne,Z){const xe=i.get(ne);if(ne.isRenderTargetTexture===!1&&ne.version>0&&xe.__version!==ne.version){fe(xe,ne,Z);return}else ne.isExternalTexture&&(xe.__webglTexture=ne.sourceTexture?ne.sourceTexture:null);n.bindTexture(t.TEXTURE_2D_ARRAY,xe.__webglTexture,t.TEXTURE0+Z)}function $(ne,Z){const xe=i.get(ne);if(ne.isRenderTargetTexture===!1&&ne.version>0&&xe.__version!==ne.version){fe(xe,ne,Z);return}n.bindTexture(t.TEXTURE_3D,xe.__webglTexture,t.TEXTURE0+Z)}function ee(ne,Z){const xe=i.get(ne);if(ne.version>0&&xe.__version!==ne.version){de(xe,ne,Z);return}n.bindTexture(t.TEXTURE_CUBE_MAP,xe.__webglTexture,t.TEXTURE0+Z)}const te={[ar]:t.REPEAT,[qr]:t.CLAMP_TO_EDGE,[i1]:t.MIRRORED_REPEAT},ae={[Ir]:t.NEAREST,[BO]:t.NEAREST_MIPMAP_NEAREST,[Zm]:t.NEAREST_MIPMAP_LINEAR,[Rn]:t.LINEAR,[Oy]:t.LINEAR_MIPMAP_NEAREST,[Sc]:t.LINEAR_MIPMAP_LINEAR},q={[TH]:t.NEVER,[jH]:t.ALWAYS,[wH]:t.LESS,[qO]:t.LEQUAL,[AH]:t.EQUAL,[RH]:t.GEQUAL,[EH]:t.GREATER,[CH]:t.NOTEQUAL};function K(ne,Z){if(Z.type===fr&&e.has("OES_texture_float_linear")===!1&&(Z.magFilter===Rn||Z.magFilter===Oy||Z.magFilter===Zm||Z.magFilter===Sc||Z.minFilter===Rn||Z.minFilter===Oy||Z.minFilter===Zm||Z.minFilter===Sc)&&Wt("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(ne,t.TEXTURE_WRAP_S,te[Z.wrapS]),t.texParameteri(ne,t.TEXTURE_WRAP_T,te[Z.wrapT]),(ne===t.TEXTURE_3D||ne===t.TEXTURE_2D_ARRAY)&&t.texParameteri(ne,t.TEXTURE_WRAP_R,te[Z.wrapR]),t.texParameteri(ne,t.TEXTURE_MAG_FILTER,ae[Z.magFilter]),t.texParameteri(ne,t.TEXTURE_MIN_FILTER,ae[Z.minFilter]),Z.compareFunction&&(t.texParameteri(ne,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(ne,t.TEXTURE_COMPARE_FUNC,q[Z.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(Z.magFilter===Ir||Z.minFilter!==Zm&&Z.minFilter!==Sc||Z.type===fr&&e.has("OES_texture_float_linear")===!1)return;if(Z.anisotropy>1||i.get(Z).__currentAnisotropy){const xe=e.get("EXT_texture_filter_anisotropic");t.texParameterf(ne,xe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Z.anisotropy,r.getMaxAnisotropy())),i.get(Z).__currentAnisotropy=Z.anisotropy}}}function ie(ne,Z){let xe=!1;ne.__webglInit===void 0&&(ne.__webglInit=!0,Z.addEventListener("dispose",C));const Xe=Z.source;let Be=g.get(Xe);Be===void 0&&(Be={},g.set(Xe,Be));const Ne=W(Z);if(Ne!==ne.__cacheKey){Be[Ne]===void 0&&(Be[Ne]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,xe=!0),Be[Ne].usedTimes++;const yt=Be[ne.__cacheKey];yt!==void 0&&(Be[ne.__cacheKey].usedTimes--,yt.usedTimes===0&&I(Z)),ne.__cacheKey=Ne,ne.__webglTexture=Be[Ne].texture}return xe}function ue(ne,Z,xe){return Math.floor(Math.floor(ne/xe)/Z)}function me(ne,Z,xe,Xe){const Ne=ne.updateRanges;if(Ne.length===0)n.texSubImage2D(t.TEXTURE_2D,0,0,0,Z.width,Z.height,xe,Xe,Z.data);else{Ne.sort((We,qe)=>We.start-qe.start);let yt=0;for(let We=1;We<Ne.length;We++){const qe=Ne[yt],dt=Ne[We],pe=qe.start+qe.count,Oe=ue(dt.start,Z.width,4),ft=ue(qe.start,Z.width,4);dt.start<=pe+1&&Oe===ft&&ue(dt.start+dt.count-1,Z.width,4)===Oe?qe.count=Math.max(qe.count,dt.start+dt.count-qe.start):(++yt,Ne[yt]=dt)}Ne.length=yt+1;const vt=t.getParameter(t.UNPACK_ROW_LENGTH),Dt=t.getParameter(t.UNPACK_SKIP_PIXELS),Nt=t.getParameter(t.UNPACK_SKIP_ROWS);t.pixelStorei(t.UNPACK_ROW_LENGTH,Z.width);for(let We=0,qe=Ne.length;We<qe;We++){const dt=Ne[We],pe=Math.floor(dt.start/4),Oe=Math.ceil(dt.count/4),ft=pe%Z.width,ge=Math.floor(pe/Z.width),Ee=Oe,ut=1;t.pixelStorei(t.UNPACK_SKIP_PIXELS,ft),t.pixelStorei(t.UNPACK_SKIP_ROWS,ge),n.texSubImage2D(t.TEXTURE_2D,0,ft,ge,Ee,ut,xe,Xe,Z.data)}ne.clearUpdateRanges(),t.pixelStorei(t.UNPACK_ROW_LENGTH,vt),t.pixelStorei(t.UNPACK_SKIP_PIXELS,Dt),t.pixelStorei(t.UNPACK_SKIP_ROWS,Nt)}}function fe(ne,Z,xe){let Xe=t.TEXTURE_2D;(Z.isDataArrayTexture||Z.isCompressedArrayTexture)&&(Xe=t.TEXTURE_2D_ARRAY),Z.isData3DTexture&&(Xe=t.TEXTURE_3D);const Be=ie(ne,Z),Ne=Z.source;n.bindTexture(Xe,ne.__webglTexture,t.TEXTURE0+xe);const yt=i.get(Ne);if(Ne.version!==yt.__version||Be===!0){n.activeTexture(t.TEXTURE0+xe);const vt=fi.getPrimaries(fi.workingColorSpace),Dt=Z.colorSpace===yc?null:fi.getPrimaries(Z.colorSpace),Nt=Z.colorSpace===yc||vt===Dt?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,Z.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,Z.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Nt);let We=M(Z.image,!1,r.maxTextureSize);We=Ae(Z,We);const qe=a.convert(Z.format,Z.colorSpace),dt=a.convert(Z.type);let pe=E(Z.internalFormat,qe,dt,Z.colorSpace,Z.isVideoTexture);K(Xe,Z);let Oe;const ft=Z.mipmaps,ge=Z.isVideoTexture!==!0,Ee=yt.__version===void 0||Be===!0,ut=Ne.dataReady,At=R(Z,We);if(Z.isDepthTexture)pe=j(Z.format===X0,Z.type),Ee&&(ge?n.texStorage2D(t.TEXTURE_2D,1,pe,We.width,We.height):n.texImage2D(t.TEXTURE_2D,0,pe,We.width,We.height,0,qe,dt,null));else if(Z.isDataTexture)if(ft.length>0){ge&&Ee&&n.texStorage2D(t.TEXTURE_2D,At,pe,ft[0].width,ft[0].height);for(let lt=0,Ze=ft.length;lt<Ze;lt++)Oe=ft[lt],ge?ut&&n.texSubImage2D(t.TEXTURE_2D,lt,0,0,Oe.width,Oe.height,qe,dt,Oe.data):n.texImage2D(t.TEXTURE_2D,lt,pe,Oe.width,Oe.height,0,qe,dt,Oe.data);Z.generateMipmaps=!1}else ge?(Ee&&n.texStorage2D(t.TEXTURE_2D,At,pe,We.width,We.height),ut&&me(Z,We,qe,dt)):n.texImage2D(t.TEXTURE_2D,0,pe,We.width,We.height,0,qe,dt,We.data);else if(Z.isCompressedTexture)if(Z.isCompressedArrayTexture){ge&&Ee&&n.texStorage3D(t.TEXTURE_2D_ARRAY,At,pe,ft[0].width,ft[0].height,We.depth);for(let lt=0,Ze=ft.length;lt<Ze;lt++)if(Oe=ft[lt],Z.format!==Sr)if(qe!==null)if(ge){if(ut)if(Z.layerUpdates.size>0){const Ct=Pj(Oe.width,Oe.height,Z.format,Z.type);for(const Ut of Z.layerUpdates){const Bt=Oe.data.subarray(Ut*Ct/Oe.data.BYTES_PER_ELEMENT,(Ut+1)*Ct/Oe.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,lt,0,0,Ut,Oe.width,Oe.height,1,qe,Bt)}Z.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,lt,0,0,0,Oe.width,Oe.height,We.depth,qe,Oe.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,lt,pe,Oe.width,Oe.height,We.depth,0,Oe.data,0,0);else Wt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else ge?ut&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,lt,0,0,0,Oe.width,Oe.height,We.depth,qe,dt,Oe.data):n.texImage3D(t.TEXTURE_2D_ARRAY,lt,pe,Oe.width,Oe.height,We.depth,0,qe,dt,Oe.data)}else{ge&&Ee&&n.texStorage2D(t.TEXTURE_2D,At,pe,ft[0].width,ft[0].height);for(let lt=0,Ze=ft.length;lt<Ze;lt++)Oe=ft[lt],Z.format!==Sr?qe!==null?ge?ut&&n.compressedTexSubImage2D(t.TEXTURE_2D,lt,0,0,Oe.width,Oe.height,qe,Oe.data):n.compressedTexImage2D(t.TEXTURE_2D,lt,pe,Oe.width,Oe.height,0,Oe.data):Wt("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ge?ut&&n.texSubImage2D(t.TEXTURE_2D,lt,0,0,Oe.width,Oe.height,qe,dt,Oe.data):n.texImage2D(t.TEXTURE_2D,lt,pe,Oe.width,Oe.height,0,qe,dt,Oe.data)}else if(Z.isDataArrayTexture)if(ge){if(Ee&&n.texStorage3D(t.TEXTURE_2D_ARRAY,At,pe,We.width,We.height,We.depth),ut)if(Z.layerUpdates.size>0){const lt=Pj(We.width,We.height,Z.format,Z.type);for(const Ze of Z.layerUpdates){const Ct=We.data.subarray(Ze*lt/We.data.BYTES_PER_ELEMENT,(Ze+1)*lt/We.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,Ze,We.width,We.height,1,qe,dt,Ct)}Z.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,We.width,We.height,We.depth,qe,dt,We.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,pe,We.width,We.height,We.depth,0,qe,dt,We.data);else if(Z.isData3DTexture)ge?(Ee&&n.texStorage3D(t.TEXTURE_3D,At,pe,We.width,We.height,We.depth),ut&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,We.width,We.height,We.depth,qe,dt,We.data)):n.texImage3D(t.TEXTURE_3D,0,pe,We.width,We.height,We.depth,0,qe,dt,We.data);else if(Z.isFramebufferTexture){if(Ee)if(ge)n.texStorage2D(t.TEXTURE_2D,At,pe,We.width,We.height);else{let lt=We.width,Ze=We.height;for(let Ct=0;Ct<At;Ct++)n.texImage2D(t.TEXTURE_2D,Ct,pe,lt,Ze,0,qe,dt,null),lt>>=1,Ze>>=1}}else if(ft.length>0){if(ge&&Ee){const lt=at(ft[0]);n.texStorage2D(t.TEXTURE_2D,At,pe,lt.width,lt.height)}for(let lt=0,Ze=ft.length;lt<Ze;lt++)Oe=ft[lt],ge?ut&&n.texSubImage2D(t.TEXTURE_2D,lt,0,0,qe,dt,Oe):n.texImage2D(t.TEXTURE_2D,lt,pe,qe,dt,Oe);Z.generateMipmaps=!1}else if(ge){if(Ee){const lt=at(We);n.texStorage2D(t.TEXTURE_2D,At,pe,lt.width,lt.height)}ut&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,qe,dt,We)}else n.texImage2D(t.TEXTURE_2D,0,pe,qe,dt,We);S(Z)&&T(Xe),yt.__version=Ne.version,Z.onUpdate&&Z.onUpdate(Z)}ne.__version=Z.version}function de(ne,Z,xe){if(Z.image.length!==6)return;const Xe=ie(ne,Z),Be=Z.source;n.bindTexture(t.TEXTURE_CUBE_MAP,ne.__webglTexture,t.TEXTURE0+xe);const Ne=i.get(Be);if(Be.version!==Ne.__version||Xe===!0){n.activeTexture(t.TEXTURE0+xe);const yt=fi.getPrimaries(fi.workingColorSpace),vt=Z.colorSpace===yc?null:fi.getPrimaries(Z.colorSpace),Dt=Z.colorSpace===yc||yt===vt?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,Z.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,Z.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Dt);const Nt=Z.isCompressedTexture||Z.image[0].isCompressedTexture,We=Z.image[0]&&Z.image[0].isDataTexture,qe=[];for(let Ze=0;Ze<6;Ze++)!Nt&&!We?qe[Ze]=M(Z.image[Ze],!0,r.maxCubemapSize):qe[Ze]=We?Z.image[Ze].image:Z.image[Ze],qe[Ze]=Ae(Z,qe[Ze]);const dt=qe[0],pe=a.convert(Z.format,Z.colorSpace),Oe=a.convert(Z.type),ft=E(Z.internalFormat,pe,Oe,Z.colorSpace),ge=Z.isVideoTexture!==!0,Ee=Ne.__version===void 0||Xe===!0,ut=Be.dataReady;let At=R(Z,dt);K(t.TEXTURE_CUBE_MAP,Z);let lt;if(Nt){ge&&Ee&&n.texStorage2D(t.TEXTURE_CUBE_MAP,At,ft,dt.width,dt.height);for(let Ze=0;Ze<6;Ze++){lt=qe[Ze].mipmaps;for(let Ct=0;Ct<lt.length;Ct++){const Ut=lt[Ct];Z.format!==Sr?pe!==null?ge?ut&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ze,Ct,0,0,Ut.width,Ut.height,pe,Ut.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ze,Ct,ft,Ut.width,Ut.height,0,Ut.data):Wt("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ge?ut&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ze,Ct,0,0,Ut.width,Ut.height,pe,Oe,Ut.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ze,Ct,ft,Ut.width,Ut.height,0,pe,Oe,Ut.data)}}}else{if(lt=Z.mipmaps,ge&&Ee){lt.length>0&&At++;const Ze=at(qe[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,At,ft,Ze.width,Ze.height)}for(let Ze=0;Ze<6;Ze++)if(We){ge?ut&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ze,0,0,0,qe[Ze].width,qe[Ze].height,pe,Oe,qe[Ze].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ze,0,ft,qe[Ze].width,qe[Ze].height,0,pe,Oe,qe[Ze].data);for(let Ct=0;Ct<lt.length;Ct++){const Bt=lt[Ct].image[Ze].image;ge?ut&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ze,Ct+1,0,0,Bt.width,Bt.height,pe,Oe,Bt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ze,Ct+1,ft,Bt.width,Bt.height,0,pe,Oe,Bt.data)}}else{ge?ut&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ze,0,0,0,pe,Oe,qe[Ze]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ze,0,ft,pe,Oe,qe[Ze]);for(let Ct=0;Ct<lt.length;Ct++){const Ut=lt[Ct];ge?ut&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ze,Ct+1,0,0,pe,Oe,Ut.image[Ze]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ze,Ct+1,ft,pe,Oe,Ut.image[Ze])}}}S(Z)&&T(t.TEXTURE_CUBE_MAP),Ne.__version=Be.version,Z.onUpdate&&Z.onUpdate(Z)}ne.__version=Z.version}function _e(ne,Z,xe,Xe,Be,Ne){const yt=a.convert(xe.format,xe.colorSpace),vt=a.convert(xe.type),Dt=E(xe.internalFormat,yt,vt,xe.colorSpace),Nt=i.get(Z),We=i.get(xe);if(We.__renderTarget=Z,!Nt.__hasExternalTextures){const qe=Math.max(1,Z.width>>Ne),dt=Math.max(1,Z.height>>Ne);Be===t.TEXTURE_3D||Be===t.TEXTURE_2D_ARRAY?n.texImage3D(Be,Ne,Dt,qe,dt,Z.depth,0,yt,vt,null):n.texImage2D(Be,Ne,Dt,qe,dt,0,yt,vt,null)}n.bindFramebuffer(t.FRAMEBUFFER,ne),Ge(Z)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,Xe,Be,We.__webglTexture,0,Ue(Z)):(Be===t.TEXTURE_2D||Be>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Be<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,Xe,Be,We.__webglTexture,Ne),n.bindFramebuffer(t.FRAMEBUFFER,null)}function Te(ne,Z,xe){if(t.bindRenderbuffer(t.RENDERBUFFER,ne),Z.depthBuffer){const Xe=Z.depthTexture,Be=Xe&&Xe.isDepthTexture?Xe.type:null,Ne=j(Z.stencilBuffer,Be),yt=Z.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,vt=Ue(Z);Ge(Z)?o.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,vt,Ne,Z.width,Z.height):xe?t.renderbufferStorageMultisample(t.RENDERBUFFER,vt,Ne,Z.width,Z.height):t.renderbufferStorage(t.RENDERBUFFER,Ne,Z.width,Z.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,yt,t.RENDERBUFFER,ne)}else{const Xe=Z.textures;for(let Be=0;Be<Xe.length;Be++){const Ne=Xe[Be],yt=a.convert(Ne.format,Ne.colorSpace),vt=a.convert(Ne.type),Dt=E(Ne.internalFormat,yt,vt,Ne.colorSpace),Nt=Ue(Z);xe&&Ge(Z)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Nt,Dt,Z.width,Z.height):Ge(Z)?o.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Nt,Dt,Z.width,Z.height):t.renderbufferStorage(t.RENDERBUFFER,Dt,Z.width,Z.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function Ie(ne,Z){if(Z&&Z.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,ne),!(Z.depthTexture&&Z.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Xe=i.get(Z.depthTexture);Xe.__renderTarget=Z,(!Xe.__webglTexture||Z.depthTexture.image.width!==Z.width||Z.depthTexture.image.height!==Z.height)&&(Z.depthTexture.image.width=Z.width,Z.depthTexture.image.height=Z.height,Z.depthTexture.needsUpdate=!0),Y(Z.depthTexture,0);const Be=Xe.__webglTexture,Ne=Ue(Z);if(Z.depthTexture.format===W0)Ge(Z)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Be,0,Ne):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Be,0);else if(Z.depthTexture.format===X0)Ge(Z)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Be,0,Ne):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Be,0);else throw new Error("Unknown depthTexture format")}function Re(ne){const Z=i.get(ne),xe=ne.isWebGLCubeRenderTarget===!0;if(Z.__boundDepthTexture!==ne.depthTexture){const Xe=ne.depthTexture;if(Z.__depthDisposeCallback&&Z.__depthDisposeCallback(),Xe){const Be=()=>{delete Z.__boundDepthTexture,delete Z.__depthDisposeCallback,Xe.removeEventListener("dispose",Be)};Xe.addEventListener("dispose",Be),Z.__depthDisposeCallback=Be}Z.__boundDepthTexture=Xe}if(ne.depthTexture&&!Z.__autoAllocateDepthBuffer){if(xe)throw new Error("target.depthTexture not supported in Cube render targets");const Xe=ne.texture.mipmaps;Xe&&Xe.length>0?Ie(Z.__webglFramebuffer[0],ne):Ie(Z.__webglFramebuffer,ne)}else if(xe){Z.__webglDepthbuffer=[];for(let Xe=0;Xe<6;Xe++)if(n.bindFramebuffer(t.FRAMEBUFFER,Z.__webglFramebuffer[Xe]),Z.__webglDepthbuffer[Xe]===void 0)Z.__webglDepthbuffer[Xe]=t.createRenderbuffer(),Te(Z.__webglDepthbuffer[Xe],ne,!1);else{const Be=ne.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ne=Z.__webglDepthbuffer[Xe];t.bindRenderbuffer(t.RENDERBUFFER,Ne),t.framebufferRenderbuffer(t.FRAMEBUFFER,Be,t.RENDERBUFFER,Ne)}}else{const Xe=ne.texture.mipmaps;if(Xe&&Xe.length>0?n.bindFramebuffer(t.FRAMEBUFFER,Z.__webglFramebuffer[0]):n.bindFramebuffer(t.FRAMEBUFFER,Z.__webglFramebuffer),Z.__webglDepthbuffer===void 0)Z.__webglDepthbuffer=t.createRenderbuffer(),Te(Z.__webglDepthbuffer,ne,!1);else{const Be=ne.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ne=Z.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,Ne),t.framebufferRenderbuffer(t.FRAMEBUFFER,Be,t.RENDERBUFFER,Ne)}}n.bindFramebuffer(t.FRAMEBUFFER,null)}function ye(ne,Z,xe){const Xe=i.get(ne);Z!==void 0&&_e(Xe.__webglFramebuffer,ne,ne.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),xe!==void 0&&Re(ne)}function ct(ne){const Z=ne.texture,xe=i.get(ne),Xe=i.get(Z);ne.addEventListener("dispose",D);const Be=ne.textures,Ne=ne.isWebGLCubeRenderTarget===!0,yt=Be.length>1;if(yt||(Xe.__webglTexture===void 0&&(Xe.__webglTexture=t.createTexture()),Xe.__version=Z.version,s.memory.textures++),Ne){xe.__webglFramebuffer=[];for(let vt=0;vt<6;vt++)if(Z.mipmaps&&Z.mipmaps.length>0){xe.__webglFramebuffer[vt]=[];for(let Dt=0;Dt<Z.mipmaps.length;Dt++)xe.__webglFramebuffer[vt][Dt]=t.createFramebuffer()}else xe.__webglFramebuffer[vt]=t.createFramebuffer()}else{if(Z.mipmaps&&Z.mipmaps.length>0){xe.__webglFramebuffer=[];for(let vt=0;vt<Z.mipmaps.length;vt++)xe.__webglFramebuffer[vt]=t.createFramebuffer()}else xe.__webglFramebuffer=t.createFramebuffer();if(yt)for(let vt=0,Dt=Be.length;vt<Dt;vt++){const Nt=i.get(Be[vt]);Nt.__webglTexture===void 0&&(Nt.__webglTexture=t.createTexture(),s.memory.textures++)}if(ne.samples>0&&Ge(ne)===!1){xe.__webglMultisampledFramebuffer=t.createFramebuffer(),xe.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,xe.__webglMultisampledFramebuffer);for(let vt=0;vt<Be.length;vt++){const Dt=Be[vt];xe.__webglColorRenderbuffer[vt]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,xe.__webglColorRenderbuffer[vt]);const Nt=a.convert(Dt.format,Dt.colorSpace),We=a.convert(Dt.type),qe=E(Dt.internalFormat,Nt,We,Dt.colorSpace,ne.isXRRenderTarget===!0),dt=Ue(ne);t.renderbufferStorageMultisample(t.RENDERBUFFER,dt,qe,ne.width,ne.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+vt,t.RENDERBUFFER,xe.__webglColorRenderbuffer[vt])}t.bindRenderbuffer(t.RENDERBUFFER,null),ne.depthBuffer&&(xe.__webglDepthRenderbuffer=t.createRenderbuffer(),Te(xe.__webglDepthRenderbuffer,ne,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Ne){n.bindTexture(t.TEXTURE_CUBE_MAP,Xe.__webglTexture),K(t.TEXTURE_CUBE_MAP,Z);for(let vt=0;vt<6;vt++)if(Z.mipmaps&&Z.mipmaps.length>0)for(let Dt=0;Dt<Z.mipmaps.length;Dt++)_e(xe.__webglFramebuffer[vt][Dt],ne,Z,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+vt,Dt);else _e(xe.__webglFramebuffer[vt],ne,Z,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+vt,0);S(Z)&&T(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(yt){for(let vt=0,Dt=Be.length;vt<Dt;vt++){const Nt=Be[vt],We=i.get(Nt);let qe=t.TEXTURE_2D;(ne.isWebGL3DRenderTarget||ne.isWebGLArrayRenderTarget)&&(qe=ne.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(qe,We.__webglTexture),K(qe,Nt),_e(xe.__webglFramebuffer,ne,Nt,t.COLOR_ATTACHMENT0+vt,qe,0),S(Nt)&&T(qe)}n.unbindTexture()}else{let vt=t.TEXTURE_2D;if((ne.isWebGL3DRenderTarget||ne.isWebGLArrayRenderTarget)&&(vt=ne.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(vt,Xe.__webglTexture),K(vt,Z),Z.mipmaps&&Z.mipmaps.length>0)for(let Dt=0;Dt<Z.mipmaps.length;Dt++)_e(xe.__webglFramebuffer[Dt],ne,Z,t.COLOR_ATTACHMENT0,vt,Dt);else _e(xe.__webglFramebuffer,ne,Z,t.COLOR_ATTACHMENT0,vt,0);S(Z)&&T(vt),n.unbindTexture()}ne.depthBuffer&&Re(ne)}function Ce(ne){const Z=ne.textures;for(let xe=0,Xe=Z.length;xe<Xe;xe++){const Be=Z[xe];if(S(Be)){const Ne=A(ne),yt=i.get(Be).__webglTexture;n.bindTexture(Ne,yt),T(Ne),n.unbindTexture()}}}const re=[],Le=[];function He(ne){if(ne.samples>0){if(Ge(ne)===!1){const Z=ne.textures,xe=ne.width,Xe=ne.height;let Be=t.COLOR_BUFFER_BIT;const Ne=ne.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,yt=i.get(ne),vt=Z.length>1;if(vt)for(let Nt=0;Nt<Z.length;Nt++)n.bindFramebuffer(t.FRAMEBUFFER,yt.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Nt,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,yt.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Nt,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,yt.__webglMultisampledFramebuffer);const Dt=ne.texture.mipmaps;Dt&&Dt.length>0?n.bindFramebuffer(t.DRAW_FRAMEBUFFER,yt.__webglFramebuffer[0]):n.bindFramebuffer(t.DRAW_FRAMEBUFFER,yt.__webglFramebuffer);for(let Nt=0;Nt<Z.length;Nt++){if(ne.resolveDepthBuffer&&(ne.depthBuffer&&(Be|=t.DEPTH_BUFFER_BIT),ne.stencilBuffer&&ne.resolveStencilBuffer&&(Be|=t.STENCIL_BUFFER_BIT)),vt){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,yt.__webglColorRenderbuffer[Nt]);const We=i.get(Z[Nt]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,We,0)}t.blitFramebuffer(0,0,xe,Xe,0,0,xe,Xe,Be,t.NEAREST),l===!0&&(re.length=0,Le.length=0,re.push(t.COLOR_ATTACHMENT0+Nt),ne.depthBuffer&&ne.resolveDepthBuffer===!1&&(re.push(Ne),Le.push(Ne),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,Le)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,re))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),vt)for(let Nt=0;Nt<Z.length;Nt++){n.bindFramebuffer(t.FRAMEBUFFER,yt.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Nt,t.RENDERBUFFER,yt.__webglColorRenderbuffer[Nt]);const We=i.get(Z[Nt]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,yt.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Nt,t.TEXTURE_2D,We,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,yt.__webglMultisampledFramebuffer)}else if(ne.depthBuffer&&ne.resolveDepthBuffer===!1&&l){const Z=ne.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[Z])}}}function Ue(ne){return Math.min(r.maxSamples,ne.samples)}function Ge(ne){const Z=i.get(ne);return ne.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Z.__useRenderToTexture!==!1}function nt(ne){const Z=s.render.frame;h.get(ne)!==Z&&(h.set(ne,Z),ne.update())}function Ae(ne,Z){const xe=ne.colorSpace,Xe=ne.format,Be=ne.type;return ne.isCompressedTexture===!0||ne.isVideoTexture===!0||xe!==Zo&&xe!==yc&&(fi.getTransfer(xe)===Bi?(Xe!==Sr||Be!==nr)&&Wt("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):wn("WebGLTextures: Unsupported texture color space:",xe)),Z}function at(ne){return typeof HTMLImageElement<"u"&&ne instanceof HTMLImageElement?(u.width=ne.naturalWidth||ne.width,u.height=ne.naturalHeight||ne.height):typeof VideoFrame<"u"&&ne instanceof VideoFrame?(u.width=ne.displayWidth,u.height=ne.displayHeight):(u.width=ne.width,u.height=ne.height),u}this.allocateTextureUnit=H,this.resetTextureUnits=G,this.setTexture2D=Y,this.setTexture2DArray=k,this.setTexture3D=$,this.setTextureCube=ee,this.rebindTextures=ye,this.setupRenderTarget=ct,this.updateRenderTargetMipmap=Ce,this.updateMultisampleRenderTarget=He,this.setupDepthRenderbuffer=Re,this.setupFrameBufferTexture=_e,this.useMultisampledRTT=Ge}function Iq(t,e){function n(i,r=yc){let a;const s=fi.getTransfer(r);if(i===nr)return t.UNSIGNED_BYTE;if(i===iT)return t.UNSIGNED_SHORT_4_4_4_4;if(i===rT)return t.UNSIGNED_SHORT_5_5_5_1;if(i===zO)return t.UNSIGNED_INT_5_9_9_9_REV;if(i===kO)return t.UNSIGNED_INT_10F_11F_11F_REV;if(i===tT)return t.BYTE;if(i===nT)return t.SHORT;if(i===H0)return t.UNSIGNED_SHORT;if(i===pb)return t.INT;if(i===Ac)return t.UNSIGNED_INT;if(i===fr)return t.FLOAT;if(i===Pr)return t.HALF_FLOAT;if(i===FO)return t.ALPHA;if(i===GO)return t.RGB;if(i===Sr)return t.RGBA;if(i===W0)return t.DEPTH_COMPONENT;if(i===X0)return t.DEPTH_STENCIL;if(i===np)return t.RED;if(i===mb)return t.RED_INTEGER;if(i===gb)return t.RG;if(i===aT)return t.RG_INTEGER;if(i===sT)return t.RGBA_INTEGER;if(i===Dy||i===Py||i===Iy||i===Uy)if(s===Bi)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(i===Dy)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Py)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Iy)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Uy)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(i===Dy)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Py)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Iy)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Uy)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===c_||i===u_||i===f_||i===h_)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(i===c_)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===u_)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===f_)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===h_)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===d_||i===p_||i===m_)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(i===d_||i===p_)return s===Bi?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(i===m_)return s===Bi?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===g_||i===v_||i===x_||i===y_||i===b_||i===S_||i===M_||i===__||i===T_||i===w_||i===A_||i===E_||i===C_||i===R_)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(i===g_)return s===Bi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===v_)return s===Bi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===x_)return s===Bi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===y_)return s===Bi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===b_)return s===Bi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===S_)return s===Bi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===M_)return s===Bi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===__)return s===Bi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===T_)return s===Bi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===w_)return s===Bi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===A_)return s===Bi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===E_)return s===Bi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===C_)return s===Bi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===R_)return s===Bi?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===j_||i===N_||i===O_)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(i===j_)return s===Bi?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===N_)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===O_)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===D_||i===P_||i===I_||i===U_)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(i===D_)return a.COMPRESSED_RED_RGTC1_EXT;if(i===P_)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===I_)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===U_)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===q0?t.UNSIGNED_INT_24_8:t[i]!==void 0?t[i]:null}return{convert:n}}const noe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,ioe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class roe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n){if(this.texture===null){const i=new eD(e.texture);(e.depthNear!==n.depthNear||e.depthFar!==n.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,i=new di({vertexShader:noe,fragmentShader:ioe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new zi(new Ul(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class aoe extends tl{constructor(e,n){super();const i=this;let r=null,a=1,s=null,o="local-floor",l=1,u=null,h=null,p=null,g=null,x=null,b=null;const M=typeof XRWebGLBinding<"u",S=new roe,T={},A=n.getContextAttributes();let E=null,j=null;const R=[],C=[],D=new Ye;let U=null;const I=new Ji;I.viewport=new Cn;const L=new Ji;L.viewport=new Cn;const F=[I,L],G=new Tq;let H=null,W=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(fe){let de=R[fe];return de===void 0&&(de=new WM,R[fe]=de),de.getTargetRaySpace()},this.getControllerGrip=function(fe){let de=R[fe];return de===void 0&&(de=new WM,R[fe]=de),de.getGripSpace()},this.getHand=function(fe){let de=R[fe];return de===void 0&&(de=new WM,R[fe]=de),de.getHandSpace()};function Y(fe){const de=C.indexOf(fe.inputSource);if(de===-1)return;const _e=R[de];_e!==void 0&&(_e.update(fe.inputSource,fe.frame,u||s),_e.dispatchEvent({type:fe.type,data:fe.inputSource}))}function k(){r.removeEventListener("select",Y),r.removeEventListener("selectstart",Y),r.removeEventListener("selectend",Y),r.removeEventListener("squeeze",Y),r.removeEventListener("squeezestart",Y),r.removeEventListener("squeezeend",Y),r.removeEventListener("end",k),r.removeEventListener("inputsourceschange",$);for(let fe=0;fe<R.length;fe++){const de=C[fe];de!==null&&(C[fe]=null,R[fe].disconnect(de))}H=null,W=null,S.reset();for(const fe in T)delete T[fe];e.setRenderTarget(E),x=null,g=null,p=null,r=null,j=null,me.stop(),i.isPresenting=!1,e.setPixelRatio(U),e.setSize(D.width,D.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(fe){a=fe,i.isPresenting===!0&&Wt("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(fe){o=fe,i.isPresenting===!0&&Wt("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||s},this.setReferenceSpace=function(fe){u=fe},this.getBaseLayer=function(){return g!==null?g:x},this.getBinding=function(){return p===null&&M&&(p=new XRWebGLBinding(r,n)),p},this.getFrame=function(){return b},this.getSession=function(){return r},this.setSession=async function(fe){if(r=fe,r!==null){if(E=e.getRenderTarget(),r.addEventListener("select",Y),r.addEventListener("selectstart",Y),r.addEventListener("selectend",Y),r.addEventListener("squeeze",Y),r.addEventListener("squeezestart",Y),r.addEventListener("squeezeend",Y),r.addEventListener("end",k),r.addEventListener("inputsourceschange",$),A.xrCompatible!==!0&&await n.makeXRCompatible(),U=e.getPixelRatio(),e.getSize(D),M&&"createProjectionLayer"in XRWebGLBinding.prototype){let _e=null,Te=null,Ie=null;A.depth&&(Ie=A.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,_e=A.stencil?X0:W0,Te=A.stencil?q0:Ac);const Re={colorFormat:n.RGBA8,depthFormat:Ie,scaleFactor:a};p=this.getBinding(),g=p.createProjectionLayer(Re),r.updateRenderState({layers:[g]}),e.setPixelRatio(1),e.setSize(g.textureWidth,g.textureHeight,!1),j=new Ei(g.textureWidth,g.textureHeight,{format:Sr,type:nr,depthTexture:new Jg(g.textureWidth,g.textureHeight,Te,void 0,void 0,void 0,void 0,void 0,void 0,_e),stencilBuffer:A.stencil,colorSpace:e.outputColorSpace,samples:A.antialias?4:0,resolveDepthBuffer:g.ignoreDepthValues===!1,resolveStencilBuffer:g.ignoreDepthValues===!1})}else{const _e={antialias:A.antialias,alpha:!0,depth:A.depth,stencil:A.stencil,framebufferScaleFactor:a};x=new XRWebGLLayer(r,n,_e),r.updateRenderState({baseLayer:x}),e.setPixelRatio(1),e.setSize(x.framebufferWidth,x.framebufferHeight,!1),j=new Ei(x.framebufferWidth,x.framebufferHeight,{format:Sr,type:nr,colorSpace:e.outputColorSpace,stencilBuffer:A.stencil,resolveDepthBuffer:x.ignoreDepthValues===!1,resolveStencilBuffer:x.ignoreDepthValues===!1})}j.isXRRenderTarget=!0,this.setFoveation(l),u=null,s=await r.requestReferenceSpace(o),me.setContext(r),me.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return S.getDepthTexture()};function $(fe){for(let de=0;de<fe.removed.length;de++){const _e=fe.removed[de],Te=C.indexOf(_e);Te>=0&&(C[Te]=null,R[Te].disconnect(_e))}for(let de=0;de<fe.added.length;de++){const _e=fe.added[de];let Te=C.indexOf(_e);if(Te===-1){for(let Re=0;Re<R.length;Re++)if(Re>=C.length){C.push(_e),Te=Re;break}else if(C[Re]===null){C[Re]=_e,Te=Re;break}if(Te===-1)break}const Ie=R[Te];Ie&&Ie.connect(_e)}}const ee=new se,te=new se;function ae(fe,de,_e){ee.setFromMatrixPosition(de.matrixWorld),te.setFromMatrixPosition(_e.matrixWorld);const Te=ee.distanceTo(te),Ie=de.projectionMatrix.elements,Re=_e.projectionMatrix.elements,ye=Ie[14]/(Ie[10]-1),ct=Ie[14]/(Ie[10]+1),Ce=(Ie[9]+1)/Ie[5],re=(Ie[9]-1)/Ie[5],Le=(Ie[8]-1)/Ie[0],He=(Re[8]+1)/Re[0],Ue=ye*Le,Ge=ye*He,nt=Te/(-Le+He),Ae=nt*-Le;if(de.matrixWorld.decompose(fe.position,fe.quaternion,fe.scale),fe.translateX(Ae),fe.translateZ(nt),fe.matrixWorld.compose(fe.position,fe.quaternion,fe.scale),fe.matrixWorldInverse.copy(fe.matrixWorld).invert(),Ie[10]===-1)fe.projectionMatrix.copy(de.projectionMatrix),fe.projectionMatrixInverse.copy(de.projectionMatrixInverse);else{const at=ye+nt,ne=ct+nt,Z=Ue-Ae,xe=Ge+(Te-Ae),Xe=Ce*ct/ne*at,Be=re*ct/ne*at;fe.projectionMatrix.makePerspective(Z,xe,Xe,Be,at,ne),fe.projectionMatrixInverse.copy(fe.projectionMatrix).invert()}}function q(fe,de){de===null?fe.matrixWorld.copy(fe.matrix):fe.matrixWorld.multiplyMatrices(de.matrixWorld,fe.matrix),fe.matrixWorldInverse.copy(fe.matrixWorld).invert()}this.updateCamera=function(fe){if(r===null)return;let de=fe.near,_e=fe.far;S.texture!==null&&(S.depthNear>0&&(de=S.depthNear),S.depthFar>0&&(_e=S.depthFar)),G.near=L.near=I.near=de,G.far=L.far=I.far=_e,(H!==G.near||W!==G.far)&&(r.updateRenderState({depthNear:G.near,depthFar:G.far}),H=G.near,W=G.far),G.layers.mask=fe.layers.mask|6,I.layers.mask=G.layers.mask&3,L.layers.mask=G.layers.mask&5;const Te=fe.parent,Ie=G.cameras;q(G,Te);for(let Re=0;Re<Ie.length;Re++)q(Ie[Re],Te);Ie.length===2?ae(G,I,L):G.projectionMatrix.copy(I.projectionMatrix),K(fe,G,Te)};function K(fe,de,_e){_e===null?fe.matrix.copy(de.matrixWorld):(fe.matrix.copy(_e.matrixWorld),fe.matrix.invert(),fe.matrix.multiply(de.matrixWorld)),fe.matrix.decompose(fe.position,fe.quaternion,fe.scale),fe.updateMatrixWorld(!0),fe.projectionMatrix.copy(de.projectionMatrix),fe.projectionMatrixInverse.copy(de.projectionMatrixInverse),fe.isPerspectiveCamera&&(fe.fov=vg*2*Math.atan(1/fe.projectionMatrix.elements[5]),fe.zoom=1)}this.getCamera=function(){return G},this.getFoveation=function(){if(!(g===null&&x===null))return l},this.setFoveation=function(fe){l=fe,g!==null&&(g.fixedFoveation=fe),x!==null&&x.fixedFoveation!==void 0&&(x.fixedFoveation=fe)},this.hasDepthSensing=function(){return S.texture!==null},this.getDepthSensingMesh=function(){return S.getMesh(G)},this.getCameraTexture=function(fe){return T[fe]};let ie=null;function ue(fe,de){if(h=de.getViewerPose(u||s),b=de,h!==null){const _e=h.views;x!==null&&(e.setRenderTargetFramebuffer(j,x.framebuffer),e.setRenderTarget(j));let Te=!1;_e.length!==G.cameras.length&&(G.cameras.length=0,Te=!0);for(let ct=0;ct<_e.length;ct++){const Ce=_e[ct];let re=null;if(x!==null)re=x.getViewport(Ce);else{const He=p.getViewSubImage(g,Ce);re=He.viewport,ct===0&&(e.setRenderTargetTextures(j,He.colorTexture,He.depthStencilTexture),e.setRenderTarget(j))}let Le=F[ct];Le===void 0&&(Le=new Ji,Le.layers.enable(ct),Le.viewport=new Cn,F[ct]=Le),Le.matrix.fromArray(Ce.transform.matrix),Le.matrix.decompose(Le.position,Le.quaternion,Le.scale),Le.projectionMatrix.fromArray(Ce.projectionMatrix),Le.projectionMatrixInverse.copy(Le.projectionMatrix).invert(),Le.viewport.set(re.x,re.y,re.width,re.height),ct===0&&(G.matrix.copy(Le.matrix),G.matrix.decompose(G.position,G.quaternion,G.scale)),Te===!0&&G.cameras.push(Le)}const Ie=r.enabledFeatures;if(Ie&&Ie.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&M){p=i.getBinding();const ct=p.getDepthInformation(_e[0]);ct&&ct.isValid&&ct.texture&&S.init(ct,r.renderState)}if(Ie&&Ie.includes("camera-access")&&M){e.state.unbindTexture(),p=i.getBinding();for(let ct=0;ct<_e.length;ct++){const Ce=_e[ct].camera;if(Ce){let re=T[Ce];re||(re=new eD,T[Ce]=re);const Le=p.getCameraImage(Ce);re.sourceTexture=Le}}}}for(let _e=0;_e<R.length;_e++){const Te=C[_e],Ie=R[_e];Te!==null&&Ie!==void 0&&Ie.update(Te,de,u||s)}ie&&ie(fe,de),de.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:de}),b=null}const me=new jq;me.setAnimationLoop(ue),this.setAnimationLoop=function(fe){ie=fe},this.dispose=function(){}}}const o0=new Ko,soe=new un;function ooe(t,e){function n(S,T){S.matrixAutoUpdate===!0&&S.updateMatrix(),T.value.copy(S.matrix)}function i(S,T){T.color.getRGB(S.fogColor.value,IH(t)),T.isFog?(S.fogNear.value=T.near,S.fogFar.value=T.far):T.isFogExp2&&(S.fogDensity.value=T.density)}function r(S,T,A,E,j){T.isMeshBasicMaterial||T.isMeshLambertMaterial?a(S,T):T.isMeshToonMaterial?(a(S,T),p(S,T)):T.isMeshPhongMaterial?(a(S,T),h(S,T)):T.isMeshStandardMaterial?(a(S,T),g(S,T),T.isMeshPhysicalMaterial&&x(S,T,j)):T.isMeshMatcapMaterial?(a(S,T),b(S,T)):T.isMeshDepthMaterial?a(S,T):T.isMeshDistanceMaterial?(a(S,T),M(S,T)):T.isMeshNormalMaterial?a(S,T):T.isLineBasicMaterial?(s(S,T),T.isLineDashedMaterial&&o(S,T)):T.isPointsMaterial?l(S,T,A,E):T.isSpriteMaterial?u(S,T):T.isShadowMaterial?(S.color.value.copy(T.color),S.opacity.value=T.opacity):T.isShaderMaterial&&(T.uniformsNeedUpdate=!1)}function a(S,T){S.opacity.value=T.opacity,T.color&&S.diffuse.value.copy(T.color),T.emissive&&S.emissive.value.copy(T.emissive).multiplyScalar(T.emissiveIntensity),T.map&&(S.map.value=T.map,n(T.map,S.mapTransform)),T.alphaMap&&(S.alphaMap.value=T.alphaMap,n(T.alphaMap,S.alphaMapTransform)),T.bumpMap&&(S.bumpMap.value=T.bumpMap,n(T.bumpMap,S.bumpMapTransform),S.bumpScale.value=T.bumpScale,T.side===Hr&&(S.bumpScale.value*=-1)),T.normalMap&&(S.normalMap.value=T.normalMap,n(T.normalMap,S.normalMapTransform),S.normalScale.value.copy(T.normalScale),T.side===Hr&&S.normalScale.value.negate()),T.displacementMap&&(S.displacementMap.value=T.displacementMap,n(T.displacementMap,S.displacementMapTransform),S.displacementScale.value=T.displacementScale,S.displacementBias.value=T.displacementBias),T.emissiveMap&&(S.emissiveMap.value=T.emissiveMap,n(T.emissiveMap,S.emissiveMapTransform)),T.specularMap&&(S.specularMap.value=T.specularMap,n(T.specularMap,S.specularMapTransform)),T.alphaTest>0&&(S.alphaTest.value=T.alphaTest);const A=e.get(T),E=A.envMap,j=A.envMapRotation;E&&(S.envMap.value=E,o0.copy(j),o0.x*=-1,o0.y*=-1,o0.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(o0.y*=-1,o0.z*=-1),S.envMapRotation.value.setFromMatrix4(soe.makeRotationFromEuler(o0)),S.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,S.reflectivity.value=T.reflectivity,S.ior.value=T.ior,S.refractionRatio.value=T.refractionRatio),T.lightMap&&(S.lightMap.value=T.lightMap,S.lightMapIntensity.value=T.lightMapIntensity,n(T.lightMap,S.lightMapTransform)),T.aoMap&&(S.aoMap.value=T.aoMap,S.aoMapIntensity.value=T.aoMapIntensity,n(T.aoMap,S.aoMapTransform))}function s(S,T){S.diffuse.value.copy(T.color),S.opacity.value=T.opacity,T.map&&(S.map.value=T.map,n(T.map,S.mapTransform))}function o(S,T){S.dashSize.value=T.dashSize,S.totalSize.value=T.dashSize+T.gapSize,S.scale.value=T.scale}function l(S,T,A,E){S.diffuse.value.copy(T.color),S.opacity.value=T.opacity,S.size.value=T.size*A,S.scale.value=E*.5,T.map&&(S.map.value=T.map,n(T.map,S.uvTransform)),T.alphaMap&&(S.alphaMap.value=T.alphaMap,n(T.alphaMap,S.alphaMapTransform)),T.alphaTest>0&&(S.alphaTest.value=T.alphaTest)}function u(S,T){S.diffuse.value.copy(T.color),S.opacity.value=T.opacity,S.rotation.value=T.rotation,T.map&&(S.map.value=T.map,n(T.map,S.mapTransform)),T.alphaMap&&(S.alphaMap.value=T.alphaMap,n(T.alphaMap,S.alphaMapTransform)),T.alphaTest>0&&(S.alphaTest.value=T.alphaTest)}function h(S,T){S.specular.value.copy(T.specular),S.shininess.value=Math.max(T.shininess,1e-4)}function p(S,T){T.gradientMap&&(S.gradientMap.value=T.gradientMap)}function g(S,T){S.metalness.value=T.metalness,T.metalnessMap&&(S.metalnessMap.value=T.metalnessMap,n(T.metalnessMap,S.metalnessMapTransform)),S.roughness.value=T.roughness,T.roughnessMap&&(S.roughnessMap.value=T.roughnessMap,n(T.roughnessMap,S.roughnessMapTransform)),T.envMap&&(S.envMapIntensity.value=T.envMapIntensity)}function x(S,T,A){S.ior.value=T.ior,T.sheen>0&&(S.sheenColor.value.copy(T.sheenColor).multiplyScalar(T.sheen),S.sheenRoughness.value=T.sheenRoughness,T.sheenColorMap&&(S.sheenColorMap.value=T.sheenColorMap,n(T.sheenColorMap,S.sheenColorMapTransform)),T.sheenRoughnessMap&&(S.sheenRoughnessMap.value=T.sheenRoughnessMap,n(T.sheenRoughnessMap,S.sheenRoughnessMapTransform))),T.clearcoat>0&&(S.clearcoat.value=T.clearcoat,S.clearcoatRoughness.value=T.clearcoatRoughness,T.clearcoatMap&&(S.clearcoatMap.value=T.clearcoatMap,n(T.clearcoatMap,S.clearcoatMapTransform)),T.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap.value=T.clearcoatRoughnessMap,n(T.clearcoatRoughnessMap,S.clearcoatRoughnessMapTransform)),T.clearcoatNormalMap&&(S.clearcoatNormalMap.value=T.clearcoatNormalMap,n(T.clearcoatNormalMap,S.clearcoatNormalMapTransform),S.clearcoatNormalScale.value.copy(T.clearcoatNormalScale),T.side===Hr&&S.clearcoatNormalScale.value.negate())),T.dispersion>0&&(S.dispersion.value=T.dispersion),T.iridescence>0&&(S.iridescence.value=T.iridescence,S.iridescenceIOR.value=T.iridescenceIOR,S.iridescenceThicknessMinimum.value=T.iridescenceThicknessRange[0],S.iridescenceThicknessMaximum.value=T.iridescenceThicknessRange[1],T.iridescenceMap&&(S.iridescenceMap.value=T.iridescenceMap,n(T.iridescenceMap,S.iridescenceMapTransform)),T.iridescenceThicknessMap&&(S.iridescenceThicknessMap.value=T.iridescenceThicknessMap,n(T.iridescenceThicknessMap,S.iridescenceThicknessMapTransform))),T.transmission>0&&(S.transmission.value=T.transmission,S.transmissionSamplerMap.value=A.texture,S.transmissionSamplerSize.value.set(A.width,A.height),T.transmissionMap&&(S.transmissionMap.value=T.transmissionMap,n(T.transmissionMap,S.transmissionMapTransform)),S.thickness.value=T.thickness,T.thicknessMap&&(S.thicknessMap.value=T.thicknessMap,n(T.thicknessMap,S.thicknessMapTransform)),S.attenuationDistance.value=T.attenuationDistance,S.attenuationColor.value.copy(T.attenuationColor)),T.anisotropy>0&&(S.anisotropyVector.value.set(T.anisotropy*Math.cos(T.anisotropyRotation),T.anisotropy*Math.sin(T.anisotropyRotation)),T.anisotropyMap&&(S.anisotropyMap.value=T.anisotropyMap,n(T.anisotropyMap,S.anisotropyMapTransform))),S.specularIntensity.value=T.specularIntensity,S.specularColor.value.copy(T.specularColor),T.specularColorMap&&(S.specularColorMap.value=T.specularColorMap,n(T.specularColorMap,S.specularColorMapTransform)),T.specularIntensityMap&&(S.specularIntensityMap.value=T.specularIntensityMap,n(T.specularIntensityMap,S.specularIntensityMapTransform))}function b(S,T){T.matcap&&(S.matcap.value=T.matcap)}function M(S,T){const A=e.get(T).light;S.referencePosition.value.setFromMatrixPosition(A.matrixWorld),S.nearDistance.value=A.shadow.camera.near,S.farDistance.value=A.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function loe(t,e,n,i){let r={},a={},s=[];const o=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(A,E){const j=E.program;i.uniformBlockBinding(A,j)}function u(A,E){let j=r[A.id];j===void 0&&(b(A),j=h(A),r[A.id]=j,A.addEventListener("dispose",S));const R=E.program;i.updateUBOMapping(A,R);const C=e.render.frame;a[A.id]!==C&&(g(A),a[A.id]=C)}function h(A){const E=p();A.__bindingPointIndex=E;const j=t.createBuffer(),R=A.__size,C=A.usage;return t.bindBuffer(t.UNIFORM_BUFFER,j),t.bufferData(t.UNIFORM_BUFFER,R,C),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,E,j),j}function p(){for(let A=0;A<o;A++)if(s.indexOf(A)===-1)return s.push(A),A;return wn("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function g(A){const E=r[A.id],j=A.uniforms,R=A.__cache;t.bindBuffer(t.UNIFORM_BUFFER,E);for(let C=0,D=j.length;C<D;C++){const U=Array.isArray(j[C])?j[C]:[j[C]];for(let I=0,L=U.length;I<L;I++){const F=U[I];if(x(F,C,I,R)===!0){const G=F.__offset,H=Array.isArray(F.value)?F.value:[F.value];let W=0;for(let Y=0;Y<H.length;Y++){const k=H[Y],$=M(k);typeof k=="number"||typeof k=="boolean"?(F.__data[0]=k,t.bufferSubData(t.UNIFORM_BUFFER,G+W,F.__data)):k.isMatrix3?(F.__data[0]=k.elements[0],F.__data[1]=k.elements[1],F.__data[2]=k.elements[2],F.__data[3]=0,F.__data[4]=k.elements[3],F.__data[5]=k.elements[4],F.__data[6]=k.elements[5],F.__data[7]=0,F.__data[8]=k.elements[6],F.__data[9]=k.elements[7],F.__data[10]=k.elements[8],F.__data[11]=0):(k.toArray(F.__data,W),W+=$.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,G,F.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function x(A,E,j,R){const C=A.value,D=E+"_"+j;if(R[D]===void 0)return typeof C=="number"||typeof C=="boolean"?R[D]=C:R[D]=C.clone(),!0;{const U=R[D];if(typeof C=="number"||typeof C=="boolean"){if(U!==C)return R[D]=C,!0}else if(U.equals(C)===!1)return U.copy(C),!0}return!1}function b(A){const E=A.uniforms;let j=0;const R=16;for(let D=0,U=E.length;D<U;D++){const I=Array.isArray(E[D])?E[D]:[E[D]];for(let L=0,F=I.length;L<F;L++){const G=I[L],H=Array.isArray(G.value)?G.value:[G.value];for(let W=0,Y=H.length;W<Y;W++){const k=H[W],$=M(k),ee=j%R,te=ee%$.boundary,ae=ee+te;j+=te,ae!==0&&R-ae<$.storage&&(j+=R-ae),G.__data=new Float32Array($.storage/Float32Array.BYTES_PER_ELEMENT),G.__offset=j,j+=$.storage}}}const C=j%R;return C>0&&(j+=R-C),A.__size=j,A.__cache={},this}function M(A){const E={boundary:0,storage:0};return typeof A=="number"||typeof A=="boolean"?(E.boundary=4,E.storage=4):A.isVector2?(E.boundary=8,E.storage=8):A.isVector3||A.isColor?(E.boundary=16,E.storage=12):A.isVector4?(E.boundary=16,E.storage=16):A.isMatrix3?(E.boundary=48,E.storage=48):A.isMatrix4?(E.boundary=64,E.storage=64):A.isTexture?Wt("WebGLRenderer: Texture samplers can not be part of an uniforms group."):Wt("WebGLRenderer: Unsupported uniform value type.",A),E}function S(A){const E=A.target;E.removeEventListener("dispose",S);const j=s.indexOf(E.__bindingPointIndex);s.splice(j,1),t.deleteBuffer(r[E.id]),delete r[E.id],delete a[E.id]}function T(){for(const A in r)t.deleteBuffer(r[A]);s=[],r={},a={}}return{bind:l,update:u,dispose:T}}const coe=new Uint16Array([11481,15204,11534,15171,11808,15015,12385,14843,12894,14716,13396,14600,13693,14483,13976,14366,14237,14171,14405,13961,14511,13770,14605,13598,14687,13444,14760,13305,14822,13066,14876,12857,14923,12675,14963,12517,14997,12379,15025,12230,15049,12023,15070,11843,15086,11687,15100,11551,15111,11433,15120,11330,15127,11217,15132,11060,15135,10922,15138,10801,15139,10695,15139,10600,13012,14923,13020,14917,13064,14886,13176,14800,13349,14666,13513,14526,13724,14398,13960,14230,14200,14020,14383,13827,14488,13651,14583,13491,14667,13348,14740,13132,14803,12908,14856,12713,14901,12542,14938,12394,14968,12241,14992,12017,15010,11822,15024,11654,15034,11507,15041,11380,15044,11269,15044,11081,15042,10913,15037,10764,15031,10635,15023,10520,15014,10419,15003,10330,13657,14676,13658,14673,13670,14660,13698,14622,13750,14547,13834,14442,13956,14317,14112,14093,14291,13889,14407,13704,14499,13538,14586,13389,14664,13201,14733,12966,14792,12758,14842,12577,14882,12418,14915,12272,14940,12033,14959,11826,14972,11646,14980,11490,14983,11355,14983,11212,14979,11008,14971,10830,14961,10675,14950,10540,14936,10420,14923,10315,14909,10204,14894,10041,14089,14460,14090,14459,14096,14452,14112,14431,14141,14388,14186,14305,14252,14130,14341,13941,14399,13756,14467,13585,14539,13430,14610,13272,14677,13026,14737,12808,14790,12617,14833,12449,14869,12303,14896,12065,14916,11845,14929,11655,14937,11490,14939,11347,14936,11184,14930,10970,14921,10783,14912,10621,14900,10480,14885,10356,14867,10247,14848,10062,14827,9894,14805,9745,14400,14208,14400,14206,14402,14198,14406,14174,14415,14122,14427,14035,14444,13913,14469,13767,14504,13613,14548,13463,14598,13324,14651,13082,14704,12858,14752,12658,14795,12483,14831,12330,14860,12106,14881,11875,14895,11675,14903,11501,14905,11351,14903,11178,14900,10953,14892,10757,14880,10589,14865,10442,14847,10313,14827,10162,14805,9965,14782,9792,14757,9642,14731,9507,14562,13883,14562,13883,14563,13877,14566,13862,14570,13830,14576,13773,14584,13689,14595,13582,14613,13461,14637,13336,14668,13120,14704,12897,14741,12695,14776,12516,14808,12358,14835,12150,14856,11910,14870,11701,14878,11519,14882,11361,14884,11187,14880,10951,14871,10748,14858,10572,14842,10418,14823,10286,14801,10099,14777,9897,14751,9722,14725,9567,14696,9430,14666,9309,14702,13604,14702,13604,14702,13600,14703,13591,14705,13570,14707,13533,14709,13477,14712,13400,14718,13305,14727,13106,14743,12907,14762,12716,14784,12539,14807,12380,14827,12190,14844,11943,14855,11727,14863,11539,14870,11376,14871,11204,14868,10960,14858,10748,14845,10565,14829,10406,14809,10269,14786,10058,14761,9852,14734,9671,14705,9512,14674,9374,14641,9253,14608,9076,14821,13366,14821,13365,14821,13364,14821,13358,14821,13344,14821,13320,14819,13252,14817,13145,14815,13011,14814,12858,14817,12698,14823,12539,14832,12389,14841,12214,14850,11968,14856,11750,14861,11558,14866,11390,14867,11226,14862,10972,14853,10754,14840,10565,14823,10401,14803,10259,14780,10032,14754,9820,14725,9635,14694,9473,14661,9333,14627,9203,14593,8988,14557,8798,14923,13014,14922,13014,14922,13012,14922,13004,14920,12987,14919,12957,14915,12907,14909,12834,14902,12738,14894,12623,14888,12498,14883,12370,14880,12203,14878,11970,14875,11759,14873,11569,14874,11401,14872,11243,14865,10986,14855,10762,14842,10568,14825,10401,14804,10255,14781,10017,14754,9799,14725,9611,14692,9445,14658,9301,14623,9139,14587,8920,14548,8729,14509,8562,15008,12672,15008,12672,15008,12671,15007,12667,15005,12656,15001,12637,14997,12605,14989,12556,14978,12490,14966,12407,14953,12313,14940,12136,14927,11934,14914,11742,14903,11563,14896,11401,14889,11247,14879,10992,14866,10767,14851,10570,14833,10400,14812,10252,14789,10007,14761,9784,14731,9592,14698,9424,14663,9279,14627,9088,14588,8868,14548,8676,14508,8508,14467,8360,15080,12386,15080,12386,15079,12385,15078,12383,15076,12378,15072,12367,15066,12347,15057,12315,15045,12253,15030,12138,15012,11998,14993,11845,14972,11685,14951,11530,14935,11383,14920,11228,14904,10981,14887,10762,14870,10567,14850,10397,14827,10248,14803,9997,14774,9771,14743,9578,14710,9407,14674,9259,14637,9048,14596,8826,14555,8632,14514,8464,14471,8317,14427,8182,15139,12008,15139,12008,15138,12008,15137,12007,15135,12003,15130,11990,15124,11969,15115,11929,15102,11872,15086,11794,15064,11693,15041,11581,15013,11459,14987,11336,14966,11170,14944,10944,14921,10738,14898,10552,14875,10387,14850,10239,14824,9983,14794,9758,14762,9563,14728,9392,14692,9244,14653,9014,14611,8791,14569,8597,14526,8427,14481,8281,14436,8110,14391,7885,15188,11617,15188,11617,15187,11617,15186,11618,15183,11617,15179,11612,15173,11601,15163,11581,15150,11546,15133,11495,15110,11427,15083,11346,15051,11246,15024,11057,14996,10868,14967,10687,14938,10517,14911,10362,14882,10206,14853,9956,14821,9737,14787,9543,14752,9375,14715,9228,14675,8980,14632,8760,14589,8565,14544,8395,14498,8248,14451,8049,14404,7824,14357,7630,15228,11298,15228,11298,15227,11299,15226,11301,15223,11303,15219,11302,15213,11299,15204,11290,15191,11271,15174,11217,15150,11129,15119,11015,15087,10886,15057,10744,15024,10599,14990,10455,14957,10318,14924,10143,14891,9911,14856,9701,14820,9516,14782,9352,14744,9200,14703,8946,14659,8725,14615,8533,14568,8366,14521,8220,14472,7992,14423,7770,14374,7578,14315,7408,15260,10819,15260,10819,15259,10822,15258,10826,15256,10832,15251,10836,15246,10841,15237,10838,15225,10821,15207,10788,15183,10734,15151,10660,15120,10571,15087,10469,15049,10359,15012,10249,14974,10041,14937,9837,14900,9647,14860,9475,14820,9320,14779,9147,14736,8902,14691,8688,14646,8499,14598,8335,14549,8189,14499,7940,14448,7720,14397,7529,14347,7363,14256,7218,15285,10410,15285,10411,15285,10413,15284,10418,15282,10425,15278,10434,15272,10442,15264,10449,15252,10445,15235,10433,15210,10403,15179,10358,15149,10301,15113,10218,15073,10059,15033,9894,14991,9726,14951,9565,14909,9413,14865,9273,14822,9073,14777,8845,14730,8641,14682,8459,14633,8300,14583,8129,14531,7883,14479,7670,14426,7482,14373,7321,14305,7176,14201,6939,15305,9939,15305,9940,15305,9945,15304,9955,15302,9967,15298,9989,15293,10010,15286,10033,15274,10044,15258,10045,15233,10022,15205,9975,15174,9903,15136,9808,15095,9697,15053,9578,15009,9451,14965,9327,14918,9198,14871,8973,14825,8766,14775,8579,14725,8408,14675,8259,14622,8058,14569,7821,14515,7615,14460,7435,14405,7276,14350,7108,14256,6866,14149,6653,15321,9444,15321,9445,15321,9448,15320,9458,15317,9470,15314,9490,15310,9515,15302,9540,15292,9562,15276,9579,15251,9577,15226,9559,15195,9519,15156,9463,15116,9389,15071,9304,15025,9208,14978,9023,14927,8838,14878,8661,14827,8496,14774,8344,14722,8206,14667,7973,14612,7749,14556,7555,14499,7382,14443,7229,14385,7025,14322,6791,14210,6588,14100,6409,15333,8920,15333,8921,15332,8927,15332,8943,15329,8965,15326,9002,15322,9048,15316,9106,15307,9162,15291,9204,15267,9221,15244,9221,15212,9196,15175,9134,15133,9043,15088,8930,15040,8801,14990,8665,14938,8526,14886,8391,14830,8261,14775,8087,14719,7866,14661,7664,14603,7482,14544,7322,14485,7178,14426,6936,14367,6713,14281,6517,14166,6348,14054,6198,15341,8360,15341,8361,15341,8366,15341,8379,15339,8399,15336,8431,15332,8473,15326,8527,15318,8585,15302,8632,15281,8670,15258,8690,15227,8690,15191,8664,15149,8612,15104,8543,15055,8456,15001,8360,14948,8259,14892,8122,14834,7923,14776,7734,14716,7558,14656,7397,14595,7250,14534,7070,14472,6835,14410,6628,14350,6443,14243,6283,14125,6135,14010,5889,15348,7715,15348,7717,15348,7725,15347,7745,15345,7780,15343,7836,15339,7905,15334,8e3,15326,8103,15310,8193,15293,8239,15270,8270,15240,8287,15204,8283,15163,8260,15118,8223,15067,8143,15014,8014,14958,7873,14899,7723,14839,7573,14778,7430,14715,7293,14652,7164,14588,6931,14524,6720,14460,6531,14396,6362,14330,6210,14207,6015,14086,5781,13969,5576,15352,7114,15352,7116,15352,7128,15352,7159,15350,7195,15348,7237,15345,7299,15340,7374,15332,7457,15317,7544,15301,7633,15280,7703,15251,7754,15216,7775,15176,7767,15131,7733,15079,7670,15026,7588,14967,7492,14906,7387,14844,7278,14779,7171,14714,6965,14648,6770,14581,6587,14515,6420,14448,6269,14382,6123,14299,5881,14172,5665,14049,5477,13929,5310,15355,6329,15355,6330,15355,6339,15355,6362,15353,6410,15351,6472,15349,6572,15344,6688,15337,6835,15323,6985,15309,7142,15287,7220,15260,7277,15226,7310,15188,7326,15142,7318,15090,7285,15036,7239,14976,7177,14914,7045,14849,6892,14782,6736,14714,6581,14645,6433,14576,6293,14506,6164,14438,5946,14369,5733,14270,5540,14140,5369,14014,5216,13892,5043,15357,5483,15357,5484,15357,5496,15357,5528,15356,5597,15354,5692,15351,5835,15347,6011,15339,6195,15328,6317,15314,6446,15293,6566,15268,6668,15235,6746,15197,6796,15152,6811,15101,6790,15046,6748,14985,6673,14921,6583,14854,6479,14785,6371,14714,6259,14643,6149,14571,5946,14499,5750,14428,5567,14358,5401,14242,5250,14109,5111,13980,4870,13856,4657,15359,4555,15359,4557,15358,4573,15358,4633,15357,4715,15355,4841,15353,5061,15349,5216,15342,5391,15331,5577,15318,5770,15299,5967,15274,6150,15243,6223,15206,6280,15161,6310,15111,6317,15055,6300,14994,6262,14928,6208,14860,6141,14788,5994,14715,5838,14641,5684,14566,5529,14492,5384,14418,5247,14346,5121,14216,4892,14079,4682,13948,4496,13822,4330,15359,3498,15359,3501,15359,3520,15359,3598,15358,3719,15356,3860,15355,4137,15351,4305,15344,4563,15334,4809,15321,5116,15303,5273,15280,5418,15250,5547,15214,5653,15170,5722,15120,5761,15064,5763,15002,5733,14935,5673,14865,5597,14792,5504,14716,5400,14640,5294,14563,5185,14486,5041,14410,4841,14335,4655,14191,4482,14051,4325,13918,4183,13790,4012,15360,2282,15360,2285,15360,2306,15360,2401,15359,2547,15357,2748,15355,3103,15352,3349,15345,3675,15336,4020,15324,4272,15307,4496,15285,4716,15255,4908,15220,5086,15178,5170,15128,5214,15072,5234,15010,5231,14943,5206,14871,5166,14796,5102,14718,4971,14639,4833,14559,4687,14480,4541,14402,4401,14315,4268,14167,4142,14025,3958,13888,3747,13759,3556,15360,923,15360,925,15360,946,15360,1052,15359,1214,15357,1494,15356,1892,15352,2274,15346,2663,15338,3099,15326,3393,15309,3679,15288,3980,15260,4183,15226,4325,15185,4437,15136,4517,15080,4570,15018,4591,14950,4581,14877,4545,14800,4485,14720,4411,14638,4325,14556,4231,14475,4136,14395,3988,14297,3803,14145,3628,13999,3465,13861,3314,13729,3177,15360,263,15360,264,15360,272,15360,325,15359,407,15358,548,15356,780,15352,1144,15347,1580,15339,2099,15328,2425,15312,2795,15292,3133,15264,3329,15232,3517,15191,3689,15143,3819,15088,3923,15025,3978,14956,3999,14882,3979,14804,3931,14722,3855,14639,3756,14554,3645,14470,3529,14388,3409,14279,3289,14124,3173,13975,3055,13834,2848,13701,2658,15360,49,15360,49,15360,52,15360,75,15359,111,15358,201,15356,283,15353,519,15348,726,15340,1045,15329,1415,15314,1795,15295,2173,15269,2410,15237,2649,15197,2866,15150,3054,15095,3140,15032,3196,14963,3228,14888,3236,14808,3224,14725,3191,14639,3146,14553,3088,14466,2976,14382,2836,14262,2692,14103,2549,13952,2409,13808,2278,13674,2154,15360,4,15360,4,15360,4,15360,13,15359,33,15358,59,15357,112,15353,199,15348,302,15341,456,15331,628,15316,827,15297,1082,15272,1332,15241,1601,15202,1851,15156,2069,15101,2172,15039,2256,14970,2314,14894,2348,14813,2358,14728,2344,14640,2311,14551,2263,14463,2203,14376,2133,14247,2059,14084,1915,13930,1761,13784,1609,13648,1464,15360,0,15360,0,15360,0,15360,3,15359,18,15358,26,15357,53,15354,80,15348,97,15341,165,15332,238,15318,326,15299,427,15275,529,15245,654,15207,771,15161,885,15108,994,15046,1089,14976,1170,14900,1229,14817,1266,14731,1284,14641,1282,14550,1260,14460,1223,14370,1174,14232,1116,14066,1050,13909,981,13761,910,13623,839]);let xf=null;function uoe(){return xf===null&&(xf=new Xo(coe,32,32,gb,Pr),xf.minFilter=Rn,xf.magFilter=Rn,xf.wrapS=qr,xf.wrapT=qr,xf.generateMipmaps=!1,xf.needsUpdate=!0),xf}class bD{constructor(e={}){const{canvas:n=OH(),context:i=null,depth:r=!0,stencil:a=!1,alpha:s=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:p=!1,reversedDepthBuffer:g=!1}=e;this.isWebGLRenderer=!0;let x;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");x=i.getContextAttributes().alpha}else x=s;const b=new Set([sT,aT,mb]),M=new Set([nr,Ac,H0,q0,iT,rT]),S=new Uint32Array(4),T=new Int32Array(4);let A=null,E=null;const j=[],R=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Tc,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const C=this;let D=!1;this._outputColorSpace=Kn;let U=0,I=0,L=null,F=-1,G=null;const H=new Cn,W=new Cn;let Y=null;const k=new zt(0);let $=0,ee=n.width,te=n.height,ae=1,q=null,K=null;const ie=new Cn(0,0,ee,te),ue=new Cn(0,0,ee,te);let me=!1;const fe=new Qg;let de=!1,_e=!1;const Te=new un,Ie=new se,Re=new Cn,ye={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ct=!1;function Ce(){return L===null?ae:1}let re=i;function Le(J,ve){return n.getContext(J,ve)}try{const J={alpha:!0,depth:r,stencil:a,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:p};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${Lf}`),n.addEventListener("webglcontextlost",lt,!1),n.addEventListener("webglcontextrestored",Ze,!1),n.addEventListener("webglcontextcreationerror",Ct,!1),re===null){const ve="webgl2";if(re=Le(ve,J),re===null)throw Le(ve)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(J){throw J("WebGLRenderer: "+J.message),J}let He,Ue,Ge,nt,Ae,at,ne,Z,xe,Xe,Be,Ne,yt,vt,Dt,Nt,We,qe,dt,pe,Oe,ft,ge,Ee;function ut(){He=new bae(re),He.init(),ft=new Iq(re,He),Ue=new fae(re,He,e,ft),Ge=new eoe(re,He),Ue.reversedDepthBuffer&&g&&Ge.buffers.depth.setReversed(!0),nt=new _ae(re),Ae=new Fse,at=new toe(re,He,Ge,Ae,Ue,ft,nt),ne=new dae(C),Z=new yae(C),xe=new Ene(re),ge=new cae(re,xe),Xe=new Sae(re,xe,nt,ge),Be=new wae(re,Xe,xe,nt),dt=new Tae(re,Ue,at),Nt=new hae(Ae),Ne=new kse(C,ne,Z,He,Ue,ge,Nt),yt=new ooe(C,Ae),vt=new Vse,Dt=new Yse(He),qe=new lae(C,ne,Z,Ge,Be,x,l),We=new Qse(C,Be,Ue),Ee=new loe(re,nt,Ue,Ge),pe=new uae(re,He,nt),Oe=new Mae(re,He,nt),nt.programs=Ne.programs,C.capabilities=Ue,C.extensions=He,C.properties=Ae,C.renderLists=vt,C.shadowMap=We,C.state=Ge,C.info=nt}ut();const At=new aoe(C,re);this.xr=At,this.getContext=function(){return re},this.getContextAttributes=function(){return re.getContextAttributes()},this.forceContextLoss=function(){const J=He.get("WEBGL_lose_context");J&&J.loseContext()},this.forceContextRestore=function(){const J=He.get("WEBGL_lose_context");J&&J.restoreContext()},this.getPixelRatio=function(){return ae},this.setPixelRatio=function(J){J!==void 0&&(ae=J,this.setSize(ee,te,!1))},this.getSize=function(J){return J.set(ee,te)},this.setSize=function(J,ve,he=!0){if(At.isPresenting){Wt("WebGLRenderer: Can't change size while VR device is presenting.");return}ee=J,te=ve,n.width=Math.floor(J*ae),n.height=Math.floor(ve*ae),he===!0&&(n.style.width=J+"px",n.style.height=ve+"px"),this.setViewport(0,0,J,ve)},this.getDrawingBufferSize=function(J){return J.set(ee*ae,te*ae).floor()},this.setDrawingBufferSize=function(J,ve,he){ee=J,te=ve,ae=he,n.width=Math.floor(J*he),n.height=Math.floor(ve*he),this.setViewport(0,0,J,ve)},this.getCurrentViewport=function(J){return J.copy(H)},this.getViewport=function(J){return J.copy(ie)},this.setViewport=function(J,ve,he,Pe){J.isVector4?ie.set(J.x,J.y,J.z,J.w):ie.set(J,ve,he,Pe),Ge.viewport(H.copy(ie).multiplyScalar(ae).round())},this.getScissor=function(J){return J.copy(ue)},this.setScissor=function(J,ve,he,Pe){J.isVector4?ue.set(J.x,J.y,J.z,J.w):ue.set(J,ve,he,Pe),Ge.scissor(W.copy(ue).multiplyScalar(ae).round())},this.getScissorTest=function(){return me},this.setScissorTest=function(J){Ge.setScissorTest(me=J)},this.setOpaqueSort=function(J){q=J},this.setTransparentSort=function(J){K=J},this.getClearColor=function(J){return J.copy(qe.getClearColor())},this.setClearColor=function(){qe.setClearColor(...arguments)},this.getClearAlpha=function(){return qe.getClearAlpha()},this.setClearAlpha=function(){qe.setClearAlpha(...arguments)},this.clear=function(J=!0,ve=!0,he=!0){let Pe=0;if(J){let be=!1;if(L!==null){const et=L.texture.format;be=b.has(et)}if(be){const et=L.texture.type,ht=M.has(et),Mt=qe.getClearColor(),Rt=qe.getClearAlpha(),Lt=Mt.r,Ft=Mt.g,Vt=Mt.b;ht?(S[0]=Lt,S[1]=Ft,S[2]=Vt,S[3]=Rt,re.clearBufferuiv(re.COLOR,0,S)):(T[0]=Lt,T[1]=Ft,T[2]=Vt,T[3]=Rt,re.clearBufferiv(re.COLOR,0,T))}else Pe|=re.COLOR_BUFFER_BIT}ve&&(Pe|=re.DEPTH_BUFFER_BIT),he&&(Pe|=re.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),re.clear(Pe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",lt,!1),n.removeEventListener("webglcontextrestored",Ze,!1),n.removeEventListener("webglcontextcreationerror",Ct,!1),qe.dispose(),vt.dispose(),Dt.dispose(),Ae.dispose(),ne.dispose(),Z.dispose(),Be.dispose(),ge.dispose(),Ee.dispose(),Ne.dispose(),At.dispose(),At.removeEventListener("sessionstart",Tr),At.removeEventListener("sessionend",wr),bi.stop()};function lt(J){J.preventDefault(),c1("WebGLRenderer: Context Lost."),D=!0}function Ze(){c1("WebGLRenderer: Context Restored."),D=!1;const J=nt.autoReset,ve=We.enabled,he=We.autoUpdate,Pe=We.needsUpdate,be=We.type;ut(),nt.autoReset=J,We.enabled=ve,We.autoUpdate=he,We.needsUpdate=Pe,We.type=be}function Ct(J){wn("WebGLRenderer: A WebGL context could not be created. Reason: ",J.statusMessage)}function Ut(J){const ve=J.target;ve.removeEventListener("dispose",Ut),Bt(ve)}function Bt(J){Yt(J),Ae.remove(J)}function Yt(J){const ve=Ae.get(J).programs;ve!==void 0&&(ve.forEach(function(he){Ne.releaseProgram(he)}),J.isShaderMaterial&&Ne.releaseShaderCache(J))}this.renderBufferDirect=function(J,ve,he,Pe,be,et){ve===null&&(ve=ye);const ht=be.isMesh&&be.matrixWorld.determinant()<0,Mt=Qe(J,ve,he,Pe,be);Ge.setMaterial(Pe,ht);let Rt=he.index,Lt=1;if(Pe.wireframe===!0){if(Rt=Xe.getWireframeAttribute(he),Rt===void 0)return;Lt=2}const Ft=he.drawRange,Vt=he.attributes.position;let Ht=Ft.start*Lt,gn=(Ft.start+Ft.count)*Lt;et!==null&&(Ht=Math.max(Ht,et.start*Lt),gn=Math.min(gn,(et.start+et.count)*Lt)),Rt!==null?(Ht=Math.max(Ht,0),gn=Math.min(gn,Rt.count)):Vt!=null&&(Ht=Math.max(Ht,0),gn=Math.min(gn,Vt.count));const Jt=gn-Ht;if(Jt<0||Jt===1/0)return;ge.setup(be,Pe,Mt,he,Rt);let sn,_n=pe;if(Rt!==null&&(sn=xe.get(Rt),_n=Oe,_n.setIndex(sn)),be.isMesh)Pe.wireframe===!0?(Ge.setLineWidth(Pe.wireframeLinewidth*Ce()),_n.setMode(re.LINES)):_n.setMode(re.TRIANGLES);else if(be.isLine){let en=Pe.linewidth;en===void 0&&(en=1),Ge.setLineWidth(en*Ce()),be.isLineSegments?_n.setMode(re.LINES):be.isLineLoop?_n.setMode(re.LINE_LOOP):_n.setMode(re.LINE_STRIP)}else be.isPoints?_n.setMode(re.POINTS):be.isSprite&&_n.setMode(re.TRIANGLES);if(be.isBatchedMesh)if(be._multiDrawInstances!==null)gg("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),_n.renderMultiDrawInstances(be._multiDrawStarts,be._multiDrawCounts,be._multiDrawCount,be._multiDrawInstances);else if(He.get("WEBGL_multi_draw"))_n.renderMultiDraw(be._multiDrawStarts,be._multiDrawCounts,be._multiDrawCount);else{const en=be._multiDrawStarts,vn=be._multiDrawCounts,Zt=be._multiDrawCount,Dn=Rt?xe.get(Rt).bytesPerElement:1,Hn=Ae.get(Pe).currentProgram.getUniforms();for(let Kt=0;Kt<Zt;Kt++)Hn.setValue(re,"_gl_DrawID",Kt),_n.render(en[Kt]/Dn,vn[Kt])}else if(be.isInstancedMesh)_n.renderInstances(Ht,Jt,be.count);else if(he.isInstancedBufferGeometry){const en=he._maxInstanceCount!==void 0?he._maxInstanceCount:1/0,vn=Math.min(he.instanceCount,en);_n.renderInstances(Ht,Jt,vn)}else _n.render(Ht,Jt)};function On(J,ve,he){J.transparent===!0&&J.side===ai&&J.forceSinglePass===!1?(J.side=Hr,J.needsUpdate=!0,Q(J,ve,he),J.side=_u,J.needsUpdate=!0,Q(J,ve,he),J.side=ai):Q(J,ve,he)}this.compile=function(J,ve,he=null){he===null&&(he=J),E=Dt.get(he),E.init(ve),R.push(E),he.traverseVisible(function(be){be.isLight&&be.layers.test(ve.layers)&&(E.pushLight(be),be.castShadow&&E.pushShadow(be))}),J!==he&&J.traverseVisible(function(be){be.isLight&&be.layers.test(ve.layers)&&(E.pushLight(be),be.castShadow&&E.pushShadow(be))}),E.setupLights();const Pe=new Set;return J.traverse(function(be){if(!(be.isMesh||be.isPoints||be.isLine||be.isSprite))return;const et=be.material;if(et)if(Array.isArray(et))for(let ht=0;ht<et.length;ht++){const Mt=et[ht];On(Mt,he,be),Pe.add(Mt)}else On(et,he,be),Pe.add(et)}),E=R.pop(),Pe},this.compileAsync=function(J,ve,he=null){const Pe=this.compile(J,ve,he);return new Promise(be=>{function et(){if(Pe.forEach(function(ht){Ae.get(ht).currentProgram.isReady()&&Pe.delete(ht)}),Pe.size===0){be(J);return}setTimeout(et,10)}He.get("KHR_parallel_shader_compile")!==null?et():setTimeout(et,10)})};let Vn=null;function Ii(J){Vn&&Vn(J)}function Tr(){bi.stop()}function wr(){bi.start()}const bi=new jq;bi.setAnimationLoop(Ii),typeof self<"u"&&bi.setContext(self),this.setAnimationLoop=function(J){Vn=J,At.setAnimationLoop(J),J===null?bi.stop():bi.start()},At.addEventListener("sessionstart",Tr),At.addEventListener("sessionend",wr),this.render=function(J,ve){if(ve!==void 0&&ve.isCamera!==!0){wn("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(D===!0)return;if(J.matrixWorldAutoUpdate===!0&&J.updateMatrixWorld(),ve.parent===null&&ve.matrixWorldAutoUpdate===!0&&ve.updateMatrixWorld(),At.enabled===!0&&At.isPresenting===!0&&(At.cameraAutoUpdate===!0&&At.updateCamera(ve),ve=At.getCamera()),J.isScene===!0&&J.onBeforeRender(C,J,ve,L),E=Dt.get(J,R.length),E.init(ve),R.push(E),Te.multiplyMatrices(ve.projectionMatrix,ve.matrixWorldInverse),fe.setFromProjectionMatrix(Te,Ho,ve.reversedDepth),_e=this.localClippingEnabled,de=Nt.init(this.clippingPlanes,_e),A=vt.get(J,j.length),A.init(),j.push(A),At.enabled===!0&&At.isPresenting===!0){const et=C.xr.getDepthSensingMesh();et!==null&&sr(et,ve,-1/0,C.sortObjects)}sr(J,ve,0,C.sortObjects),A.finish(),C.sortObjects===!0&&A.sort(q,K),ct=At.enabled===!1||At.isPresenting===!1||At.hasDepthSensing()===!1,ct&&qe.addToRenderList(A,J),this.info.render.frame++,de===!0&&Nt.beginShadows();const he=E.state.shadowsArray;We.render(he,J,ve),de===!0&&Nt.endShadows(),this.info.autoReset===!0&&this.info.reset();const Pe=A.opaque,be=A.transmissive;if(E.setupLights(),ve.isArrayCamera){const et=ve.cameras;if(be.length>0)for(let ht=0,Mt=et.length;ht<Mt;ht++){const Rt=et[ht];rn(Pe,be,J,Rt)}ct&&qe.render(J);for(let ht=0,Mt=et.length;ht<Mt;ht++){const Rt=et[ht];Fi(A,J,Rt,Rt.viewport)}}else be.length>0&&rn(Pe,be,J,ve),ct&&qe.render(J),Fi(A,J,ve);L!==null&&I===0&&(at.updateMultisampleRenderTarget(L),at.updateRenderTargetMipmap(L)),J.isScene===!0&&J.onAfterRender(C,J,ve),ge.resetDefaultState(),F=-1,G=null,R.pop(),R.length>0?(E=R[R.length-1],de===!0&&Nt.setGlobalState(C.clippingPlanes,E.state.camera)):E=null,j.pop(),j.length>0?A=j[j.length-1]:A=null};function sr(J,ve,he,Pe){if(J.visible===!1)return;if(J.layers.test(ve.layers)){if(J.isGroup)he=J.renderOrder;else if(J.isLOD)J.autoUpdate===!0&&J.update(ve);else if(J.isLight)E.pushLight(J),J.castShadow&&E.pushShadow(J);else if(J.isSprite){if(!J.frustumCulled||fe.intersectsSprite(J)){Pe&&Re.setFromMatrixPosition(J.matrixWorld).applyMatrix4(Te);const ht=Be.update(J),Mt=J.material;Mt.visible&&A.push(J,ht,Mt,he,Re.z,null)}}else if((J.isMesh||J.isLine||J.isPoints)&&(!J.frustumCulled||fe.intersectsObject(J))){const ht=Be.update(J),Mt=J.material;if(Pe&&(J.boundingSphere!==void 0?(J.boundingSphere===null&&J.computeBoundingSphere(),Re.copy(J.boundingSphere.center)):(ht.boundingSphere===null&&ht.computeBoundingSphere(),Re.copy(ht.boundingSphere.center)),Re.applyMatrix4(J.matrixWorld).applyMatrix4(Te)),Array.isArray(Mt)){const Rt=ht.groups;for(let Lt=0,Ft=Rt.length;Lt<Ft;Lt++){const Vt=Rt[Lt],Ht=Mt[Vt.materialIndex];Ht&&Ht.visible&&A.push(J,ht,Ht,he,Re.z,Vt)}}else Mt.visible&&A.push(J,ht,Mt,he,Re.z,null)}}const et=J.children;for(let ht=0,Mt=et.length;ht<Mt;ht++)sr(et[ht],ve,he,Pe)}function Fi(J,ve,he,Pe){const{opaque:be,transmissive:et,transparent:ht}=J;E.setupLightsView(he),de===!0&&Nt.setGlobalState(C.clippingPlanes,he),Pe&&Ge.viewport(H.copy(Pe)),be.length>0&&Qn(be,ve,he),et.length>0&&Qn(et,ve,he),ht.length>0&&Qn(ht,ve,he),Ge.buffers.depth.setTest(!0),Ge.buffers.depth.setMask(!0),Ge.buffers.color.setMask(!0),Ge.setPolygonOffset(!1)}function rn(J,ve,he,Pe){if((he.isScene===!0?he.overrideMaterial:null)!==null)return;E.state.transmissionRenderTarget[Pe.id]===void 0&&(E.state.transmissionRenderTarget[Pe.id]=new Ei(1,1,{generateMipmaps:!0,type:He.has("EXT_color_buffer_half_float")||He.has("EXT_color_buffer_float")?Pr:nr,minFilter:Sc,samples:4,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:fi.workingColorSpace}));const et=E.state.transmissionRenderTarget[Pe.id],ht=Pe.viewport||H;et.setSize(ht.z*C.transmissionResolutionScale,ht.w*C.transmissionResolutionScale);const Mt=C.getRenderTarget(),Rt=C.getActiveCubeFace(),Lt=C.getActiveMipmapLevel();C.setRenderTarget(et),C.getClearColor(k),$=C.getClearAlpha(),$<1&&C.setClearColor(16777215,.5),C.clear(),ct&&qe.render(he);const Ft=C.toneMapping;C.toneMapping=Tc;const Vt=Pe.viewport;if(Pe.viewport!==void 0&&(Pe.viewport=void 0),E.setupLightsView(Pe),de===!0&&Nt.setGlobalState(C.clippingPlanes,Pe),Qn(J,he,Pe),at.updateMultisampleRenderTarget(et),at.updateRenderTargetMipmap(et),He.has("WEBGL_multisampled_render_to_texture")===!1){let Ht=!1;for(let gn=0,Jt=ve.length;gn<Jt;gn++){const sn=ve[gn],{object:_n,geometry:en,material:vn,group:Zt}=sn;if(vn.side===ai&&_n.layers.test(Pe.layers)){const Dn=vn.side;vn.side=Hr,vn.needsUpdate=!0,dn(_n,he,Pe,en,vn,Zt),vn.side=Dn,vn.needsUpdate=!0,Ht=!0}}Ht===!0&&(at.updateMultisampleRenderTarget(et),at.updateRenderTargetMipmap(et))}C.setRenderTarget(Mt,Rt,Lt),C.setClearColor(k,$),Vt!==void 0&&(Pe.viewport=Vt),C.toneMapping=Ft}function Qn(J,ve,he){const Pe=ve.isScene===!0?ve.overrideMaterial:null;for(let be=0,et=J.length;be<et;be++){const ht=J[be],{object:Mt,geometry:Rt,group:Lt}=ht;let Ft=ht.material;Ft.allowOverride===!0&&Pe!==null&&(Ft=Pe),Mt.layers.test(he.layers)&&dn(Mt,ve,he,Rt,Ft,Lt)}}function dn(J,ve,he,Pe,be,et){J.onBeforeRender(C,ve,he,Pe,be,et),J.modelViewMatrix.multiplyMatrices(he.matrixWorldInverse,J.matrixWorld),J.normalMatrix.getNormalMatrix(J.modelViewMatrix),be.onBeforeRender(C,ve,he,Pe,J,et),be.transparent===!0&&be.side===ai&&be.forceSinglePass===!1?(be.side=Hr,be.needsUpdate=!0,C.renderBufferDirect(he,ve,Pe,be,J,et),be.side=_u,be.needsUpdate=!0,C.renderBufferDirect(he,ve,Pe,be,J,et),be.side=ai):C.renderBufferDirect(he,ve,Pe,be,J,et),J.onAfterRender(C,ve,he,Pe,be,et)}function Q(J,ve,he){ve.isScene!==!0&&(ve=ye);const Pe=Ae.get(J),be=E.state.lights,et=E.state.shadowsArray,ht=be.state.version,Mt=Ne.getParameters(J,be.state,et,ve,he),Rt=Ne.getProgramCacheKey(Mt);let Lt=Pe.programs;Pe.environment=J.isMeshStandardMaterial?ve.environment:null,Pe.fog=ve.fog,Pe.envMap=(J.isMeshStandardMaterial?Z:ne).get(J.envMap||Pe.environment),Pe.envMapRotation=Pe.environment!==null&&J.envMap===null?ve.environmentRotation:J.envMapRotation,Lt===void 0&&(J.addEventListener("dispose",Ut),Lt=new Map,Pe.programs=Lt);let Ft=Lt.get(Rt);if(Ft!==void 0){if(Pe.currentProgram===Ft&&Pe.lightsStateVersion===ht)return we(J,Mt),Ft}else Mt.uniforms=Ne.getUniforms(J),J.onBeforeCompile(Mt,C),Ft=Ne.acquireProgram(Mt,Rt),Lt.set(Rt,Ft),Pe.uniforms=Mt.uniforms;const Vt=Pe.uniforms;return(!J.isShaderMaterial&&!J.isRawShaderMaterial||J.clipping===!0)&&(Vt.clippingPlanes=Nt.uniform),we(J,Mt),Pe.needsLights=rt(J),Pe.lightsStateVersion=ht,Pe.needsLights&&(Vt.ambientLightColor.value=be.state.ambient,Vt.lightProbe.value=be.state.probe,Vt.directionalLights.value=be.state.directional,Vt.directionalLightShadows.value=be.state.directionalShadow,Vt.spotLights.value=be.state.spot,Vt.spotLightShadows.value=be.state.spotShadow,Vt.rectAreaLights.value=be.state.rectArea,Vt.ltc_1.value=be.state.rectAreaLTC1,Vt.ltc_2.value=be.state.rectAreaLTC2,Vt.pointLights.value=be.state.point,Vt.pointLightShadows.value=be.state.pointShadow,Vt.hemisphereLights.value=be.state.hemi,Vt.directionalShadowMap.value=be.state.directionalShadowMap,Vt.directionalShadowMatrix.value=be.state.directionalShadowMatrix,Vt.spotShadowMap.value=be.state.spotShadowMap,Vt.spotLightMatrix.value=be.state.spotLightMatrix,Vt.spotLightMap.value=be.state.spotLightMap,Vt.pointShadowMap.value=be.state.pointShadowMap,Vt.pointShadowMatrix.value=be.state.pointShadowMatrix),Pe.currentProgram=Ft,Pe.uniformsList=null,Ft}function ce(J){if(J.uniformsList===null){const ve=J.currentProgram.getUniforms();J.uniformsList=XM.seqWithValue(ve.seq,J.uniforms)}return J.uniformsList}function we(J,ve){const he=Ae.get(J);he.outputColorSpace=ve.outputColorSpace,he.batching=ve.batching,he.batchingColor=ve.batchingColor,he.instancing=ve.instancing,he.instancingColor=ve.instancingColor,he.instancingMorph=ve.instancingMorph,he.skinning=ve.skinning,he.morphTargets=ve.morphTargets,he.morphNormals=ve.morphNormals,he.morphColors=ve.morphColors,he.morphTargetsCount=ve.morphTargetsCount,he.numClippingPlanes=ve.numClippingPlanes,he.numIntersection=ve.numClipIntersection,he.vertexAlphas=ve.vertexAlphas,he.vertexTangents=ve.vertexTangents,he.toneMapping=ve.toneMapping}function Qe(J,ve,he,Pe,be){ve.isScene!==!0&&(ve=ye),at.resetTextureUnits();const et=ve.fog,ht=Pe.isMeshStandardMaterial?ve.environment:null,Mt=L===null?C.outputColorSpace:L.isXRRenderTarget===!0?L.texture.colorSpace:Zo,Rt=(Pe.isMeshStandardMaterial?Z:ne).get(Pe.envMap||ht),Lt=Pe.vertexColors===!0&&!!he.attributes.color&&he.attributes.color.itemSize===4,Ft=!!he.attributes.tangent&&(!!Pe.normalMap||Pe.anisotropy>0),Vt=!!he.morphAttributes.position,Ht=!!he.morphAttributes.normal,gn=!!he.morphAttributes.color;let Jt=Tc;Pe.toneMapped&&(L===null||L.isXRRenderTarget===!0)&&(Jt=C.toneMapping);const sn=he.morphAttributes.position||he.morphAttributes.normal||he.morphAttributes.color,_n=sn!==void 0?sn.length:0,en=Ae.get(Pe),vn=E.state.lights;if(de===!0&&(_e===!0||J!==G)){const ir=J===G&&Pe.id===F;Nt.setState(Pe,J,ir)}let Zt=!1;Pe.version===en.__version?(en.needsLights&&en.lightsStateVersion!==vn.state.version||en.outputColorSpace!==Mt||be.isBatchedMesh&&en.batching===!1||!be.isBatchedMesh&&en.batching===!0||be.isBatchedMesh&&en.batchingColor===!0&&be.colorTexture===null||be.isBatchedMesh&&en.batchingColor===!1&&be.colorTexture!==null||be.isInstancedMesh&&en.instancing===!1||!be.isInstancedMesh&&en.instancing===!0||be.isSkinnedMesh&&en.skinning===!1||!be.isSkinnedMesh&&en.skinning===!0||be.isInstancedMesh&&en.instancingColor===!0&&be.instanceColor===null||be.isInstancedMesh&&en.instancingColor===!1&&be.instanceColor!==null||be.isInstancedMesh&&en.instancingMorph===!0&&be.morphTexture===null||be.isInstancedMesh&&en.instancingMorph===!1&&be.morphTexture!==null||en.envMap!==Rt||Pe.fog===!0&&en.fog!==et||en.numClippingPlanes!==void 0&&(en.numClippingPlanes!==Nt.numPlanes||en.numIntersection!==Nt.numIntersection)||en.vertexAlphas!==Lt||en.vertexTangents!==Ft||en.morphTargets!==Vt||en.morphNormals!==Ht||en.morphColors!==gn||en.toneMapping!==Jt||en.morphTargetsCount!==_n)&&(Zt=!0):(Zt=!0,en.__version=Pe.version);let Dn=en.currentProgram;Zt===!0&&(Dn=Q(Pe,ve,be));let Hn=!1,Kt=!1,Xi=!1;const Un=Dn.getUniforms(),kn=en.uniforms;if(Ge.useProgram(Dn.program)&&(Hn=!0,Kt=!0,Xi=!0),Pe.id!==F&&(F=Pe.id,Kt=!0),Hn||G!==J){Ge.buffers.depth.getReversed()&&J.reversedDepth!==!0&&(J._reversedDepth=!0,J.updateProjectionMatrix()),Un.setValue(re,"projectionMatrix",J.projectionMatrix),Un.setValue(re,"viewMatrix",J.matrixWorldInverse);const Ui=Un.map.cameraPosition;Ui!==void 0&&Ui.setValue(re,Ie.setFromMatrixPosition(J.matrixWorld)),Ue.logarithmicDepthBuffer&&Un.setValue(re,"logDepthBufFC",2/(Math.log(J.far+1)/Math.LN2)),(Pe.isMeshPhongMaterial||Pe.isMeshToonMaterial||Pe.isMeshLambertMaterial||Pe.isMeshBasicMaterial||Pe.isMeshStandardMaterial||Pe.isShaderMaterial)&&Un.setValue(re,"isOrthographic",J.isOrthographicCamera===!0),G!==J&&(G=J,Kt=!0,Xi=!0)}if(be.isSkinnedMesh){Un.setOptional(re,be,"bindMatrix"),Un.setOptional(re,be,"bindMatrixInverse");const ir=be.skeleton;ir&&(ir.boneTexture===null&&ir.computeBoneTexture(),Un.setValue(re,"boneTexture",ir.boneTexture,at))}be.isBatchedMesh&&(Un.setOptional(re,be,"batchingTexture"),Un.setValue(re,"batchingTexture",be._matricesTexture,at),Un.setOptional(re,be,"batchingIdTexture"),Un.setValue(re,"batchingIdTexture",be._indirectTexture,at),Un.setOptional(re,be,"batchingColorTexture"),be._colorsTexture!==null&&Un.setValue(re,"batchingColorTexture",be._colorsTexture,at));const pi=he.morphAttributes;if((pi.position!==void 0||pi.normal!==void 0||pi.color!==void 0)&&dt.update(be,he,Dn),(Kt||en.receiveShadow!==be.receiveShadow)&&(en.receiveShadow=be.receiveShadow,Un.setValue(re,"receiveShadow",be.receiveShadow)),Pe.isMeshGouraudMaterial&&Pe.envMap!==null&&(kn.envMap.value=Rt,kn.flipEnvMap.value=Rt.isCubeTexture&&Rt.isRenderTargetTexture===!1?-1:1),Pe.isMeshStandardMaterial&&Pe.envMap===null&&ve.environment!==null&&(kn.envMapIntensity.value=ve.environmentIntensity),kn.dfgLUT!==void 0&&(kn.dfgLUT.value=uoe()),Kt&&(Un.setValue(re,"toneMappingExposure",C.toneMappingExposure),en.needsLights&&st(kn,Xi),et&&Pe.fog===!0&&yt.refreshFogUniforms(kn,et),yt.refreshMaterialUniforms(kn,Pe,ae,te,E.state.transmissionRenderTarget[J.id]),XM.upload(re,ce(en),kn,at)),Pe.isShaderMaterial&&Pe.uniformsNeedUpdate===!0&&(XM.upload(re,ce(en),kn,at),Pe.uniformsNeedUpdate=!1),Pe.isSpriteMaterial&&Un.setValue(re,"center",be.center),Un.setValue(re,"modelViewMatrix",be.modelViewMatrix),Un.setValue(re,"normalMatrix",be.normalMatrix),Un.setValue(re,"modelMatrix",be.matrixWorld),Pe.isShaderMaterial||Pe.isRawShaderMaterial){const ir=Pe.uniformsGroups;for(let Ui=0,Fa=ir.length;Ui<Fa;Ui++){const Ga=ir[Ui];Ee.update(Ga,Dn),Ee.bind(Ga,Dn)}}return Dn}function st(J,ve){J.ambientLightColor.needsUpdate=ve,J.lightProbe.needsUpdate=ve,J.directionalLights.needsUpdate=ve,J.directionalLightShadows.needsUpdate=ve,J.pointLights.needsUpdate=ve,J.pointLightShadows.needsUpdate=ve,J.spotLights.needsUpdate=ve,J.spotLightShadows.needsUpdate=ve,J.rectAreaLights.needsUpdate=ve,J.hemisphereLights.needsUpdate=ve}function rt(J){return J.isMeshLambertMaterial||J.isMeshToonMaterial||J.isMeshPhongMaterial||J.isMeshStandardMaterial||J.isShadowMaterial||J.isShaderMaterial&&J.lights===!0}this.getActiveCubeFace=function(){return U},this.getActiveMipmapLevel=function(){return I},this.getRenderTarget=function(){return L},this.setRenderTargetTextures=function(J,ve,he){const Pe=Ae.get(J);Pe.__autoAllocateDepthBuffer=J.resolveDepthBuffer===!1,Pe.__autoAllocateDepthBuffer===!1&&(Pe.__useRenderToTexture=!1),Ae.get(J.texture).__webglTexture=ve,Ae.get(J.depthTexture).__webglTexture=Pe.__autoAllocateDepthBuffer?void 0:he,Pe.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(J,ve){const he=Ae.get(J);he.__webglFramebuffer=ve,he.__useDefaultFramebuffer=ve===void 0};const jt=re.createFramebuffer();this.setRenderTarget=function(J,ve=0,he=0){L=J,U=ve,I=he;let Pe=!0,be=null,et=!1,ht=!1;if(J){const Rt=Ae.get(J);if(Rt.__useDefaultFramebuffer!==void 0)Ge.bindFramebuffer(re.FRAMEBUFFER,null),Pe=!1;else if(Rt.__webglFramebuffer===void 0)at.setupRenderTarget(J);else if(Rt.__hasExternalTextures)at.rebindTextures(J,Ae.get(J.texture).__webglTexture,Ae.get(J.depthTexture).__webglTexture);else if(J.depthBuffer){const Vt=J.depthTexture;if(Rt.__boundDepthTexture!==Vt){if(Vt!==null&&Ae.has(Vt)&&(J.width!==Vt.image.width||J.height!==Vt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");at.setupDepthRenderbuffer(J)}}const Lt=J.texture;(Lt.isData3DTexture||Lt.isDataArrayTexture||Lt.isCompressedArrayTexture)&&(ht=!0);const Ft=Ae.get(J).__webglFramebuffer;J.isWebGLCubeRenderTarget?(Array.isArray(Ft[ve])?be=Ft[ve][he]:be=Ft[ve],et=!0):J.samples>0&&at.useMultisampledRTT(J)===!1?be=Ae.get(J).__webglMultisampledFramebuffer:Array.isArray(Ft)?be=Ft[he]:be=Ft,H.copy(J.viewport),W.copy(J.scissor),Y=J.scissorTest}else H.copy(ie).multiplyScalar(ae).floor(),W.copy(ue).multiplyScalar(ae).floor(),Y=me;if(he!==0&&(be=jt),Ge.bindFramebuffer(re.FRAMEBUFFER,be)&&Pe&&Ge.drawBuffers(J,be),Ge.viewport(H),Ge.scissor(W),Ge.setScissorTest(Y),et){const Rt=Ae.get(J.texture);re.framebufferTexture2D(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0,re.TEXTURE_CUBE_MAP_POSITIVE_X+ve,Rt.__webglTexture,he)}else if(ht){const Rt=ve;for(let Lt=0;Lt<J.textures.length;Lt++){const Ft=Ae.get(J.textures[Lt]);re.framebufferTextureLayer(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0+Lt,Ft.__webglTexture,he,Rt)}}else if(J!==null&&he!==0){const Rt=Ae.get(J.texture);re.framebufferTexture2D(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0,re.TEXTURE_2D,Rt.__webglTexture,he)}F=-1},this.readRenderTargetPixels=function(J,ve,he,Pe,be,et,ht,Mt=0){if(!(J&&J.isWebGLRenderTarget)){wn("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Rt=Ae.get(J).__webglFramebuffer;if(J.isWebGLCubeRenderTarget&&ht!==void 0&&(Rt=Rt[ht]),Rt){Ge.bindFramebuffer(re.FRAMEBUFFER,Rt);try{const Lt=J.textures[Mt],Ft=Lt.format,Vt=Lt.type;if(!Ue.textureFormatReadable(Ft)){wn("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ue.textureTypeReadable(Vt)){wn("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ve>=0&&ve<=J.width-Pe&&he>=0&&he<=J.height-be&&(J.textures.length>1&&re.readBuffer(re.COLOR_ATTACHMENT0+Mt),re.readPixels(ve,he,Pe,be,ft.convert(Ft),ft.convert(Vt),et))}finally{const Lt=L!==null?Ae.get(L).__webglFramebuffer:null;Ge.bindFramebuffer(re.FRAMEBUFFER,Lt)}}},this.readRenderTargetPixelsAsync=async function(J,ve,he,Pe,be,et,ht,Mt=0){if(!(J&&J.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Rt=Ae.get(J).__webglFramebuffer;if(J.isWebGLCubeRenderTarget&&ht!==void 0&&(Rt=Rt[ht]),Rt)if(ve>=0&&ve<=J.width-Pe&&he>=0&&he<=J.height-be){Ge.bindFramebuffer(re.FRAMEBUFFER,Rt);const Lt=J.textures[Mt],Ft=Lt.format,Vt=Lt.type;if(!Ue.textureFormatReadable(Ft))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ue.textureTypeReadable(Vt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Ht=re.createBuffer();re.bindBuffer(re.PIXEL_PACK_BUFFER,Ht),re.bufferData(re.PIXEL_PACK_BUFFER,et.byteLength,re.STREAM_READ),J.textures.length>1&&re.readBuffer(re.COLOR_ATTACHMENT0+Mt),re.readPixels(ve,he,Pe,be,ft.convert(Ft),ft.convert(Vt),0);const gn=L!==null?Ae.get(L).__webglFramebuffer:null;Ge.bindFramebuffer(re.FRAMEBUFFER,gn);const Jt=re.fenceSync(re.SYNC_GPU_COMMANDS_COMPLETE,0);return re.flush(),await IJ(re,Jt,4),re.bindBuffer(re.PIXEL_PACK_BUFFER,Ht),re.getBufferSubData(re.PIXEL_PACK_BUFFER,0,et),re.deleteBuffer(Ht),re.deleteSync(Jt),et}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(J,ve=null,he=0){const Pe=Math.pow(2,-he),be=Math.floor(J.image.width*Pe),et=Math.floor(J.image.height*Pe),ht=ve!==null?ve.x:0,Mt=ve!==null?ve.y:0;at.setTexture2D(J,0),re.copyTexSubImage2D(re.TEXTURE_2D,he,0,0,ht,Mt,be,et),Ge.unbindTexture()};const Tt=re.createFramebuffer(),_t=re.createFramebuffer();this.copyTextureToTexture=function(J,ve,he=null,Pe=null,be=0,et=null){et===null&&(be!==0?(gg("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),et=be,be=0):et=0);let ht,Mt,Rt,Lt,Ft,Vt,Ht,gn,Jt;const sn=J.isCompressedTexture?J.mipmaps[et]:J.image;if(he!==null)ht=he.max.x-he.min.x,Mt=he.max.y-he.min.y,Rt=he.isBox3?he.max.z-he.min.z:1,Lt=he.min.x,Ft=he.min.y,Vt=he.isBox3?he.min.z:0;else{const pi=Math.pow(2,-be);ht=Math.floor(sn.width*pi),Mt=Math.floor(sn.height*pi),J.isDataArrayTexture?Rt=sn.depth:J.isData3DTexture?Rt=Math.floor(sn.depth*pi):Rt=1,Lt=0,Ft=0,Vt=0}Pe!==null?(Ht=Pe.x,gn=Pe.y,Jt=Pe.z):(Ht=0,gn=0,Jt=0);const _n=ft.convert(ve.format),en=ft.convert(ve.type);let vn;ve.isData3DTexture?(at.setTexture3D(ve,0),vn=re.TEXTURE_3D):ve.isDataArrayTexture||ve.isCompressedArrayTexture?(at.setTexture2DArray(ve,0),vn=re.TEXTURE_2D_ARRAY):(at.setTexture2D(ve,0),vn=re.TEXTURE_2D),re.pixelStorei(re.UNPACK_FLIP_Y_WEBGL,ve.flipY),re.pixelStorei(re.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ve.premultiplyAlpha),re.pixelStorei(re.UNPACK_ALIGNMENT,ve.unpackAlignment);const Zt=re.getParameter(re.UNPACK_ROW_LENGTH),Dn=re.getParameter(re.UNPACK_IMAGE_HEIGHT),Hn=re.getParameter(re.UNPACK_SKIP_PIXELS),Kt=re.getParameter(re.UNPACK_SKIP_ROWS),Xi=re.getParameter(re.UNPACK_SKIP_IMAGES);re.pixelStorei(re.UNPACK_ROW_LENGTH,sn.width),re.pixelStorei(re.UNPACK_IMAGE_HEIGHT,sn.height),re.pixelStorei(re.UNPACK_SKIP_PIXELS,Lt),re.pixelStorei(re.UNPACK_SKIP_ROWS,Ft),re.pixelStorei(re.UNPACK_SKIP_IMAGES,Vt);const Un=J.isDataArrayTexture||J.isData3DTexture,kn=ve.isDataArrayTexture||ve.isData3DTexture;if(J.isDepthTexture){const pi=Ae.get(J),ir=Ae.get(ve),Ui=Ae.get(pi.__renderTarget),Fa=Ae.get(ir.__renderTarget);Ge.bindFramebuffer(re.READ_FRAMEBUFFER,Ui.__webglFramebuffer),Ge.bindFramebuffer(re.DRAW_FRAMEBUFFER,Fa.__webglFramebuffer);for(let Ga=0;Ga<Rt;Ga++)Un&&(re.framebufferTextureLayer(re.READ_FRAMEBUFFER,re.COLOR_ATTACHMENT0,Ae.get(J).__webglTexture,be,Vt+Ga),re.framebufferTextureLayer(re.DRAW_FRAMEBUFFER,re.COLOR_ATTACHMENT0,Ae.get(ve).__webglTexture,et,Jt+Ga)),re.blitFramebuffer(Lt,Ft,ht,Mt,Ht,gn,ht,Mt,re.DEPTH_BUFFER_BIT,re.NEAREST);Ge.bindFramebuffer(re.READ_FRAMEBUFFER,null),Ge.bindFramebuffer(re.DRAW_FRAMEBUFFER,null)}else if(be!==0||J.isRenderTargetTexture||Ae.has(J)){const pi=Ae.get(J),ir=Ae.get(ve);Ge.bindFramebuffer(re.READ_FRAMEBUFFER,Tt),Ge.bindFramebuffer(re.DRAW_FRAMEBUFFER,_t);for(let Ui=0;Ui<Rt;Ui++)Un?re.framebufferTextureLayer(re.READ_FRAMEBUFFER,re.COLOR_ATTACHMENT0,pi.__webglTexture,be,Vt+Ui):re.framebufferTexture2D(re.READ_FRAMEBUFFER,re.COLOR_ATTACHMENT0,re.TEXTURE_2D,pi.__webglTexture,be),kn?re.framebufferTextureLayer(re.DRAW_FRAMEBUFFER,re.COLOR_ATTACHMENT0,ir.__webglTexture,et,Jt+Ui):re.framebufferTexture2D(re.DRAW_FRAMEBUFFER,re.COLOR_ATTACHMENT0,re.TEXTURE_2D,ir.__webglTexture,et),be!==0?re.blitFramebuffer(Lt,Ft,ht,Mt,Ht,gn,ht,Mt,re.COLOR_BUFFER_BIT,re.NEAREST):kn?re.copyTexSubImage3D(vn,et,Ht,gn,Jt+Ui,Lt,Ft,ht,Mt):re.copyTexSubImage2D(vn,et,Ht,gn,Lt,Ft,ht,Mt);Ge.bindFramebuffer(re.READ_FRAMEBUFFER,null),Ge.bindFramebuffer(re.DRAW_FRAMEBUFFER,null)}else kn?J.isDataTexture||J.isData3DTexture?re.texSubImage3D(vn,et,Ht,gn,Jt,ht,Mt,Rt,_n,en,sn.data):ve.isCompressedArrayTexture?re.compressedTexSubImage3D(vn,et,Ht,gn,Jt,ht,Mt,Rt,_n,sn.data):re.texSubImage3D(vn,et,Ht,gn,Jt,ht,Mt,Rt,_n,en,sn):J.isDataTexture?re.texSubImage2D(re.TEXTURE_2D,et,Ht,gn,ht,Mt,_n,en,sn.data):J.isCompressedTexture?re.compressedTexSubImage2D(re.TEXTURE_2D,et,Ht,gn,sn.width,sn.height,_n,sn.data):re.texSubImage2D(re.TEXTURE_2D,et,Ht,gn,ht,Mt,_n,en,sn);re.pixelStorei(re.UNPACK_ROW_LENGTH,Zt),re.pixelStorei(re.UNPACK_IMAGE_HEIGHT,Dn),re.pixelStorei(re.UNPACK_SKIP_PIXELS,Hn),re.pixelStorei(re.UNPACK_SKIP_ROWS,Kt),re.pixelStorei(re.UNPACK_SKIP_IMAGES,Xi),et===0&&ve.generateMipmaps&&re.generateMipmap(vn),Ge.unbindTexture()},this.initRenderTarget=function(J){Ae.get(J).__webglFramebuffer===void 0&&at.setupRenderTarget(J)},this.initTexture=function(J){J.isCubeTexture?at.setTextureCube(J,0):J.isData3DTexture?at.setTexture3D(J,0):J.isDataArrayTexture||J.isCompressedArrayTexture?at.setTexture2DArray(J,0):at.setTexture2D(J,0),Ge.unbindTexture()},this.resetState=function(){U=0,I=0,L=null,Ge.reset(),ge.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ho}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=fi._getDrawingBufferColorSpace(e),n.unpackColorSpace=fi._getUnpackColorSpace()}}const foe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:LO,AddEquation:zh,AddOperation:hH,AdditiveAnimationBlendMode:VO,AdditiveBlending:bj,AgXToneMapping:vH,AlphaFormat:FO,AlwaysCompare:jH,AlwaysDepth:t1,AlwaysStencilFunc:wj,AmbientLight:yq,AnimationAction:Eq,AnimationClip:g1,AnimationLoader:Mte,AnimationMixer:Yte,AnimationObjectGroup:Xte,AnimationUtils:xte,ArcCurve:WH,ArrayCamera:Tq,ArrowHelper:xne,AttachedBindMode:_j,Audio:wq,AudioAnalyser:Lte,AudioContext:pD,AudioListener:Pte,AudioLoader:Nte,AxesHelper:yne,BackSide:Hr,BasicDepthPacking:Il,BasicShadowMap:WV,BatchedMesh:FH,Bone:QO,BooleanKeyframeTrack:ap,Box2:ine,Box3:ea,Box3Helper:gne,BoxGeometry:rp,BoxHelper:mne,BufferAttribute:yi,BufferGeometry:An,BufferGeometryLoader:_q,ByteType:tT,Cache:mu,Camera:vb,CameraHelper:pne,CanvasTexture:Ba,CapsuleGeometry:vT,CatmullRomCurve3:ST,CineonToneMapping:mH,CircleGeometry:xT,ClampToEdgeWrapping:qr,Clock:mD,Color:zt,ColorKeyframeTrack:fD,ColorManagement:fi,CompressedArrayTexture:kee,CompressedCubeTexture:Fee,CompressedTexture:gT,CompressedTextureLoader:_te,ConeGeometry:bb,ConstantAlphaFactor:cH,ConstantColorFactor:oH,Controls:Sne,CubeCamera:ZO,CubeReflectionMapping:Tu,CubeRefractionMapping:$h,CubeTexture:xb,CubeTextureLoader:pq,CubeUVReflectionMapping:Kg,CubicBezierCurve:nD,CubicBezierCurve3:XH,CubicInterpolant:uq,CullFaceBack:yj,CullFaceFront:qV,CullFaceFrontBack:ZQ,CullFaceNone:HV,Curve:Ec,CurvePath:YH,CustomBlending:XV,CustomToneMapping:gH,CylinderGeometry:yb,Cylindrical:nne,Data3DTexture:cT,DataArrayTexture:lT,DataTexture:Xo,DataTextureLoader:hD,DataUtils:A0,DecrementStencilOp:cJ,DecrementWrapStencilOp:fJ,DefaultLoadingManager:dq,DepthFormat:W0,DepthStencilFormat:X0,DepthTexture:Jg,DetachedBindMode:yH,DirectionalLight:xq,DirectionalLightHelper:dne,DiscreteInterpolant:fq,DodecahedronGeometry:yT,DoubleSide:ai,DstAlphaFactor:nH,DstColorFactor:rH,DynamicCopyUsage:AJ,DynamicDrawUsage:bJ,DynamicReadUsage:_J,EdgesGeometry:qH,EllipseCurve:bT,EqualCompare:AH,EqualDepth:a_,EqualStencilFunc:mJ,EquirectangularReflectionMapping:pg,EquirectangularRefractionMapping:n1,Euler:Ko,EventDispatcher:tl,ExternalTexture:eD,ExtrudeGeometry:MT,FileLoader:$o,Float16BufferAttribute:xee,Float32BufferAttribute:Qt,FloatType:fr,Fog:hT,FogExp2:fT,FramebufferTexture:zee,FrontSide:_u,Frustum:Qg,FrustumArray:mT,GLBufferAttribute:Jte,GLSL1:CJ,GLSL3:Aj,GreaterCompare:EH,GreaterDepth:o_,GreaterEqualCompare:RH,GreaterEqualDepth:s_,GreaterEqualStencilFunc:yJ,GreaterStencilFunc:vJ,GridHelper:fne,Group:Qm,HalfFloatType:Pr,HemisphereLight:mq,HemisphereLightHelper:une,IcosahedronGeometry:Sb,ImageBitmapLoader:jte,ImageLoader:v1,ImageUtils:DH,IncrementStencilOp:lJ,IncrementWrapStencilOp:uJ,InstancedBufferAttribute:$0,InstancedBufferGeometry:NT,InstancedInterleavedBuffer:G_,InstancedMesh:kH,Int16BufferAttribute:gee,Int32BufferAttribute:vee,Int8BufferAttribute:dee,IntType:pb,InterleavedBuffer:dT,InterleavedBufferAttribute:qo,Interpolant:Cb,InterpolateDiscrete:r1,InterpolateLinear:L_,InterpolateSmooth:qM,InterpolationSamplingMode:NJ,InterpolationSamplingType:jJ,InvertStencilOp:hJ,KeepStencilOp:v0,KeyframeTrack:Ll,LOD:BH,LatheGeometry:_T,Layers:xg,LessCompare:wH,LessDepth:r_,LessEqualCompare:qO,LessEqualDepth:V0,LessEqualStencilFunc:gJ,LessStencilFunc:pJ,Light:nd,LightProbe:Mq,Line:Kh,Line3:Cq,LineBasicMaterial:Js,LineCurve:iD,LineCurve3:$H,LineDashedMaterial:oq,LineLoop:GH,LineSegments:Eu,LinearFilter:Rn,LinearInterpolant:uD,LinearMipMapLinearFilter:Tj,LinearMipMapNearestFilter:JQ,LinearMipmapLinearFilter:Sc,LinearMipmapNearestFilter:Oy,LinearSRGBColorSpace:Zo,LinearToneMapping:dH,LinearTransfer:s1,Loader:eo,LoaderUtils:Nj,LoadingManager:RT,LoopOnce:bH,LoopPingPong:MH,LoopRepeat:SH,MOUSE:m0,Material:za,MaterialLoader:jT,MathUtils:ba,Matrix2:yD,Matrix3:Nn,Matrix4:un,MaxEquation:KV,Mesh:zi,MeshBasicMaterial:Au,MeshDepthMaterial:Eb,MeshDistanceMaterial:CT,MeshLambertMaterial:aq,MeshMatcapMaterial:sq,MeshNormalMaterial:lD,MeshPhongMaterial:iq,MeshPhysicalMaterial:nq,MeshStandardMaterial:Ab,MeshToonMaterial:rq,MinEquation:ZV,MirroredRepeatWrapping:i1,MixOperation:fH,MultiplyBlending:Mj,MultiplyOperation:db,NearestFilter:Ir,NearestMipMapLinearFilter:QQ,NearestMipMapNearestFilter:KQ,NearestMipmapLinearFilter:Zm,NearestMipmapNearestFilter:BO,NeutralToneMapping:xH,NeverCompare:TH,NeverDepth:i_,NeverStencilFunc:dJ,NoBlending:_r,NoColorSpace:yc,NoToneMapping:Tc,NormalAnimationBlendMode:oT,NormalBlending:I0,NotEqualCompare:CH,NotEqualDepth:l_,NotEqualStencilFunc:xJ,NumberKeyframeTrack:p1,Object3D:xi,ObjectLoader:Cte,ObjectSpaceNormalMap:_H,OctahedronGeometry:Mb,OneFactor:JV,OneMinusConstantAlphaFactor:uH,OneMinusConstantColorFactor:lH,OneMinusDstAlphaFactor:iH,OneMinusDstColorFactor:aH,OneMinusSrcAlphaFactor:n_,OneMinusSrcColorFactor:tH,OrthographicCamera:Ol,PCFShadowMap:hb,PCFSoftShadowMap:Ny,PMREMGenerator:Ij,Path:F_,PerspectiveCamera:Ji,Plane:hu,PlaneGeometry:Ul,PlaneHelper:vne,PointLight:vq,PointLightHelper:lne,Points:VH,PointsMaterial:JO,PolarGridHelper:hne,PolyhedronGeometry:td,PositionalAudio:Ute,PropertyBinding:gi,PropertyMixer:Aq,QuadraticBezierCurve:rD,QuadraticBezierCurve3:aD,Quaternion:Jr,QuaternionKeyframeTrack:Rb,QuaternionLinearInterpolant:hq,RED_GREEN_RGTC2_Format:I_,RED_RGTC1_Format:D_,REVISION:Lf,RGBADepthPacking:HO,RGBAFormat:Sr,RGBAIntegerFormat:sT,RGBA_ASTC_10x10_Format:E_,RGBA_ASTC_10x5_Format:T_,RGBA_ASTC_10x6_Format:w_,RGBA_ASTC_10x8_Format:A_,RGBA_ASTC_12x10_Format:C_,RGBA_ASTC_12x12_Format:R_,RGBA_ASTC_4x4_Format:g_,RGBA_ASTC_5x4_Format:v_,RGBA_ASTC_5x5_Format:x_,RGBA_ASTC_6x5_Format:y_,RGBA_ASTC_6x6_Format:b_,RGBA_ASTC_8x5_Format:S_,RGBA_ASTC_8x6_Format:M_,RGBA_ASTC_8x8_Format:__,RGBA_BPTC_Format:j_,RGBA_ETC2_EAC_Format:m_,RGBA_PVRTC_2BPPV1_Format:h_,RGBA_PVRTC_4BPPV1_Format:f_,RGBA_S3TC_DXT1_Format:Py,RGBA_S3TC_DXT3_Format:Iy,RGBA_S3TC_DXT5_Format:Uy,RGBDepthPacking:rJ,RGBFormat:GO,RGBIntegerFormat:eJ,RGB_BPTC_SIGNED_Format:N_,RGB_BPTC_UNSIGNED_Format:O_,RGB_ETC1_Format:d_,RGB_ETC2_Format:p_,RGB_PVRTC_2BPPV1_Format:u_,RGB_PVRTC_4BPPV1_Format:c_,RGB_S3TC_DXT1_Format:Dy,RGDepthPacking:aJ,RGFormat:gb,RGIntegerFormat:aT,RawShaderMaterial:tq,Ray:ip,Raycaster:xD,RectAreaLight:bq,RedFormat:np,RedIntegerFormat:mb,ReinhardToneMapping:pH,RenderTarget:XO,RenderTarget3D:Zte,RepeatWrapping:ar,ReplaceStencilOp:oJ,ReverseSubtractEquation:YV,RingGeometry:TT,SIGNED_RED_GREEN_RGTC2_Format:U_,SIGNED_RED_RGTC1_Format:P_,SRGBColorSpace:Kn,SRGBTransfer:Bi,Scene:Zh,ShaderChunk:Ln,ShaderLib:xc,ShaderMaterial:di,ShadowMaterial:eq,Shape:Af,ShapeGeometry:_b,ShapePath:bne,ShapeUtils:Mc,ShortType:nT,Skeleton:pT,SkeletonHelper:one,SkinnedMesh:zH,Source:kh,Sphere:la,SphereGeometry:Tb,Spherical:Dj,SphericalHarmonics3:Sq,SplineCurve:sD,SpotLight:gq,SpotLightHelper:sne,Sprite:LH,SpriteMaterial:KO,SrcAlphaFactor:t_,SrcAlphaSaturateFactor:sH,SrcColorFactor:eH,StaticCopyUsage:wJ,StaticDrawUsage:o1,StaticReadUsage:MJ,StereoCamera:Ote,StreamCopyUsage:EJ,StreamDrawUsage:SJ,StreamReadUsage:TJ,StringKeyframeTrack:sp,SubtractEquation:$V,SubtractiveBlending:Sj,TOUCH:g0,TangentSpaceNormalMap:ed,TetrahedronGeometry:wT,Texture:ji,TextureLoader:Tte,TextureUtils:Ane,Timer:ene,TimestampQuery:RJ,TorusGeometry:AT,TorusKnotGeometry:ET,Triangle:xo,TriangleFanDrawMode:iJ,TriangleStripDrawMode:nJ,TrianglesDrawMode:tJ,TubeGeometry:wb,UVMapping:Xh,Uint16BufferAttribute:$O,Uint32BufferAttribute:YO,Uint8BufferAttribute:pee,Uint8ClampedBufferAttribute:mee,Uniform:Et,UniformsGroup:Qte,UniformsLib:Gt,UniformsUtils:u1,UnsignedByteType:nr,UnsignedInt101111Type:kO,UnsignedInt248Type:q0,UnsignedInt5999Type:zO,UnsignedIntType:Ac,UnsignedShort4444Type:iT,UnsignedShort5551Type:rT,UnsignedShortType:H0,VSMShadowMap:gc,Vector2:Ye,Vector3:se,Vector4:Cn,VectorKeyframeTrack:m1,VideoFrameTexture:Bee,VideoTexture:HH,WebGL3DRenderTarget:nee,WebGLArrayRenderTarget:tee,WebGLCoordinateSystem:Ho,WebGLCubeRenderTarget:uT,WebGLRenderTarget:Ei,WebGLRenderer:bD,WebGLUtils:Iq,WebGPUCoordinateSystem:mg,WebXRController:WM,WireframeGeometry:oD,WrapAroundEnding:a1,ZeroCurvatureEnding:T0,ZeroFactor:QV,ZeroSlopeEnding:w0,ZeroStencilOp:sJ,createCanvasElement:OH,error:wn,getConsoleFunction:PJ,log:c1,setConsoleFunction:DJ,warn:Wt,warnOnce:gg},Symbol.toStringTag,{value:"Module"}));var tE={exports:{}},nE={},iE={exports:{}},rE={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rL;function hoe(){if(rL)return rE;rL=1;var t=Zg();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:e,i=t.useState,r=t.useEffect,a=t.useLayoutEffect,s=t.useDebugValue;function o(p,g){var x=g(),b=i({inst:{value:x,getSnapshot:g}}),M=b[0].inst,S=b[1];return a(function(){M.value=x,M.getSnapshot=g,l(M)&&S({inst:M})},[p,x,g]),r(function(){return l(M)&&S({inst:M}),p(function(){l(M)&&S({inst:M})})},[p]),s(x),x}function l(p){var g=p.getSnapshot;p=p.value;try{var x=g();return!n(p,x)}catch{return!0}}function u(p,g){return g()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return rE.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,rE}var aL;function doe(){return aL||(aL=1,iE.exports=hoe()),iE.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sL;function poe(){if(sL)return nE;sL=1;var t=Zg(),e=doe();function n(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var i=typeof Object.is=="function"?Object.is:n,r=e.useSyncExternalStore,a=t.useRef,s=t.useEffect,o=t.useMemo,l=t.useDebugValue;return nE.useSyncExternalStoreWithSelector=function(u,h,p,g,x){var b=a(null);if(b.current===null){var M={hasValue:!1,value:null};b.current=M}else M=b.current;b=o(function(){function T(C){if(!A){if(A=!0,E=C,C=g(C),x!==void 0&&M.hasValue){var D=M.value;if(x(D,C))return j=D}return j=C}if(D=j,i(E,C))return D;var U=g(C);return x!==void 0&&x(D,U)?(E=C,D):(E=C,j=U)}var A=!1,E,j,R=p===void 0?null:p;return[function(){return T(h())},R===null?void 0:function(){return T(R())}]},[h,p,g,x]);var S=r(u,b[0],b[1]);return s(function(){M.hasValue=!0,M.value=S},[S]),l(S),S},nE}var oL;function moe(){return oL||(oL=1,tE.exports=poe()),tE.exports}var goe=moe();const voe=ki(goe),lL=t=>{let e;const n=new Set,i=(u,h)=>{const p=typeof u=="function"?u(e):u;if(!Object.is(p,e)){const g=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(x=>x(e,g))}},r=()=>e,o={setState:i,getState:r,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u))},l=e=t(i,r,o);return o},Uq=(t=>t?lL(t):lL),{useSyncExternalStoreWithSelector:xoe}=voe,yoe=t=>t;function boe(t,e=yoe,n){const i=xoe(t.subscribe,t.getState,t.getInitialState,e,n);return De.useDebugValue(i),i}const cL=(t,e)=>{const n=Uq(t),i=(r,a=e)=>boe(n,r,a);return Object.assign(i,n),i},Lq=((t,e)=>t?cL(t,e):cL),Soe=t=>typeof t=="object"&&typeof t.then=="function",C0=[];function Bq(t,e,n=(i,r)=>i===r){if(t===e)return!0;if(!t||!e)return!1;const i=t.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!n(t[r],e[r]))return!1;return!0}function zq(t,e=null,n=!1,i={}){e===null&&(e=[t]);for(const a of C0)if(Bq(e,a.keys,a.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return i.lifespan&&i.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,i.lifespan)),a.response;if(!n)throw a.promise}const r={keys:e,equal:i.equal,remove:()=>{const a=C0.indexOf(r);a!==-1&&C0.splice(a,1)},promise:(Soe(t)?t:t(...e)).then(a=>{r.response=a,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(a=>r.error=a)};if(C0.push(r),!n)throw r.promise}const kq=(t,e,n)=>zq(t,e,!1,n),Moe=(t,e,n)=>void zq(t,e,!0,n),_oe=t=>{if(t===void 0||t.length===0)C0.splice(0,C0.length);else{const e=C0.find(n=>Bq(t,n.keys,n.equal));e&&e.remove()}};var aE={exports:{}},sE={exports:{}},oE={exports:{}},lE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uL;function Toe(){return uL||(uL=1,(function(t){function e(k,$){var ee=k.length;k.push($);e:for(;0<ee;){var te=ee-1>>>1,ae=k[te];if(0<r(ae,$))k[te]=$,k[ee]=ae,ee=te;else break e}}function n(k){return k.length===0?null:k[0]}function i(k){if(k.length===0)return null;var $=k[0],ee=k.pop();if(ee!==$){k[0]=ee;e:for(var te=0,ae=k.length,q=ae>>>1;te<q;){var K=2*(te+1)-1,ie=k[K],ue=K+1,me=k[ue];if(0>r(ie,ee))ue<ae&&0>r(me,ie)?(k[te]=me,k[ue]=ee,te=ue):(k[te]=ie,k[K]=ee,te=K);else if(ue<ae&&0>r(me,ee))k[te]=me,k[ue]=ee,te=ue;else break e}}return $}function r(k,$){var ee=k.sortIndex-$.sortIndex;return ee!==0?ee:k.id-$.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var l=[],u=[],h=1,p=null,g=3,x=!1,b=!1,M=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function E(k){for(var $=n(u);$!==null;){if($.callback===null)i(u);else if($.startTime<=k)i(u),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(u)}}function j(k){if(M=!1,E(k),!b)if(n(l)!==null)b=!0,W();else{var $=n(u);$!==null&&Y(j,$.startTime-k)}}var R=!1,C=-1,D=5,U=-1;function I(){return!(t.unstable_now()-U<D)}function L(){if(R){var k=t.unstable_now();U=k;var $=!0;try{e:{b=!1,M&&(M=!1,T(C),C=-1),x=!0;var ee=g;try{t:{for(E(k),p=n(l);p!==null&&!(p.expirationTime>k&&I());){var te=p.callback;if(typeof te=="function"){p.callback=null,g=p.priorityLevel;var ae=te(p.expirationTime<=k);if(k=t.unstable_now(),typeof ae=="function"){p.callback=ae,E(k),$=!0;break t}p===n(l)&&i(l),E(k)}else i(l);p=n(l)}if(p!==null)$=!0;else{var q=n(u);q!==null&&Y(j,q.startTime-k),$=!1}}break e}finally{p=null,g=ee,x=!1}$=void 0}}finally{$?F():R=!1}}}var F;if(typeof A=="function")F=function(){A(L)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,H=G.port2;G.port1.onmessage=L,F=function(){H.postMessage(null)}}else F=function(){S(L,0)};function W(){R||(R=!0,F())}function Y(k,$){C=S(function(){k(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_continueExecution=function(){b||x||(b=!0,W())},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(k){switch(g){case 1:case 2:case 3:var $=3;break;default:$=g}var ee=g;g=$;try{return k()}finally{g=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(k,$){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var ee=g;g=k;try{return $()}finally{g=ee}},t.unstable_scheduleCallback=function(k,$,ee){var te=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?te+ee:te):ee=te,k){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=ee+ae,k={id:h++,callback:$,priorityLevel:k,startTime:ee,expirationTime:ae,sortIndex:-1},ee>te?(k.sortIndex=ee,e(u,k),n(l)===null&&k===n(u)&&(M?(T(C),C=-1):M=!0,Y(j,ee-te))):(k.sortIndex=ae,e(l,k),b||x||(b=!0,W())),k},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(k){var $=g;return function(){var ee=g;g=$;try{return k.apply(this,arguments)}finally{g=ee}}}})(lE)),lE}var fL;function Fq(){return fL||(fL=1,oE.exports=Toe()),oE.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hL;function woe(){return hL||(hL=1,(function(t){t.exports=function(e){function n(m,v,w,O){return new Pv(m,v,w,O)}function i(){}function r(m){var v="https://react.dev/errors/"+m;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)v+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+m+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(m){return m===null||typeof m!="object"?null:(m=Fv&&m[Fv]||m["@@iterator"],typeof m=="function"?m:null)}function s(m){if(m==null)return null;if(typeof m=="function")return m.$$typeof===Yu?null:m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case nh:return"Fragment";case No:return"Portal";case kv:return"Profiler";case zv:return"StrictMode";case Np:return"Suspense";case Wc:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case ul:return(m.displayName||"Context")+".Provider";case qc:return(m._context.displayName||"Context")+".Consumer";case ih:var v=m.render;return m=m.displayName,m||(m=v.displayName||v.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case Td:return v=m.displayName||null,v!==null?v:s(m.type)||"Memo";case Oo:v=m._payload,m=m._init;try{return s(m(v))}catch{}}return null}function o(m){if(Op===void 0)try{throw Error()}catch(w){var v=w.stack.trim().match(/\n( *(at )?)/);Op=v&&v[1]||"",Gv=-1<w.stack.indexOf(`
    at`)?" (<anonymous>)":-1<w.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Op+m+Gv}function l(m,v){if(!m||Xc)return"";Xc=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var O={DetermineComponentFrameRoot:function(){try{if(v){var qt=function(){throw Error()};if(Object.defineProperty(qt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(qt,[])}catch(Tn){var $t=Tn}Reflect.construct(m,[],qt)}else{try{qt.call()}catch(Tn){$t=Tn}m.call(qt.prototype)}}else{try{throw Error()}catch(Tn){$t=Tn}(qt=m())&&typeof qt.catch=="function"&&qt.catch(function(){})}}catch(Tn){if(Tn&&$t&&typeof Tn.stack=="string")return[Tn.stack,$t.stack]}return[null,null]}};O.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var B=Object.getOwnPropertyDescriptor(O.DetermineComponentFrameRoot,"name");B&&B.configurable&&Object.defineProperty(O.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var V=O.DetermineComponentFrameRoot(),le=V[0],Se=V[1];if(le&&Se){var Ve=le.split(`
`),gt=Se.split(`
`);for(B=O=0;O<Ve.length&&!Ve[O].includes("DetermineComponentFrameRoot");)O++;for(;B<gt.length&&!gt[B].includes("DetermineComponentFrameRoot");)B++;if(O===Ve.length||B===gt.length)for(O=Ve.length-1,B=gt.length-1;1<=O&&0<=B&&Ve[O]!==gt[B];)B--;for(;1<=O&&0<=B;O--,B--)if(Ve[O]!==gt[B]){if(O!==1||B!==1)do if(O--,B--,0>B||Ve[O]!==gt[B]){var Pt=`
`+Ve[O].replace(" at new "," at ");return m.displayName&&Pt.includes("<anonymous>")&&(Pt=Pt.replace("<anonymous>",m.displayName)),Pt}while(1<=O&&0<=B);break}}}finally{Xc=!1,Error.prepareStackTrace=w}return(w=m?m.displayName||m.name:"")?o(w):""}function u(m){switch(m.tag){case 26:case 27:case 5:return o(m.type);case 16:return o("Lazy");case 13:return o("Suspense");case 19:return o("SuspenseList");case 0:case 15:return m=l(m.type,!1),m;case 11:return m=l(m.type.render,!1),m;case 1:return m=l(m.type,!0),m;default:return""}}function h(m){try{var v="";do v+=u(m),m=m.return;while(m);return v}catch(w){return`
Error generating stack: `+w.message+`
`+w.stack}}function p(m){var v=m,w=m;if(m.alternate)for(;v.return;)v=v.return;else{m=v;do v=m,(v.flags&4098)!==0&&(w=v.return),m=v.return;while(m)}return v.tag===3?w:null}function g(m){if(p(m)!==m)throw Error(r(188))}function x(m){var v=m.alternate;if(!v){if(v=p(m),v===null)throw Error(r(188));return v!==m?null:m}for(var w=m,O=v;;){var B=w.return;if(B===null)break;var V=B.alternate;if(V===null){if(O=B.return,O!==null){w=O;continue}break}if(B.child===V.child){for(V=B.child;V;){if(V===w)return g(B),m;if(V===O)return g(B),v;V=V.sibling}throw Error(r(188))}if(w.return!==O.return)w=B,O=V;else{for(var le=!1,Se=B.child;Se;){if(Se===w){le=!0,w=B,O=V;break}if(Se===O){le=!0,O=B,w=V;break}Se=Se.sibling}if(!le){for(Se=V.child;Se;){if(Se===w){le=!0,w=V,O=B;break}if(Se===O){le=!0,O=V,w=B;break}Se=Se.sibling}if(!le)throw Error(r(189))}}if(w.alternate!==O)throw Error(r(190))}if(w.tag!==3)throw Error(r(188));return w.stateNode.current===w?m:v}function b(m){var v=m.tag;if(v===5||v===26||v===27||v===6)return m;for(m=m.child;m!==null;){if(v=b(m),v!==null)return v;m=m.sibling}return null}function M(m){var v=m.tag;if(v===5||v===26||v===27||v===6)return m;for(m=m.child;m!==null;){if(m.tag!==4&&(v=M(m),v!==null))return v;m=m.sibling}return null}function S(m){return{current:m}}function T(m){0>tc||(m.current=Dd[tc],Dd[tc]=null,tc--)}function A(m,v){tc++,Dd[tc]=m.current,m.current=v}function E(m){return m>>>=0,m===0?32:31-(Pd(m)/O2|0)|0}function j(m){var v=m&42;if(v!==0)return v;switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return m&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return m}}function R(m,v){var w=m.pendingLanes;if(w===0)return 0;var O=0,B=m.suspendedLanes,V=m.pingedLanes,le=m.warmLanes;m=m.finishedLanes!==0;var Se=w&134217727;return Se!==0?(w=Se&~B,w!==0?O=j(w):(V&=Se,V!==0?O=j(V):m||(le=Se&~le,le!==0&&(O=j(le))))):(Se=w&~B,Se!==0?O=j(Se):V!==0?O=j(V):m||(le=w&~le,le!==0&&(O=j(le)))),O===0?0:v!==0&&v!==O&&(v&B)===0&&(B=O&-O,le=v&-v,B>=le||B===32&&(le&4194176)!==0)?v:O}function C(m,v){return(m.pendingLanes&~(m.suspendedLanes&~m.pingedLanes)&v)===0}function D(m,v){switch(m){case 1:case 2:case 4:case 8:return v+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U(){var m=oh;return oh<<=1,(oh&4194176)===0&&(oh=128),m}function I(){var m=Id;return Id<<=1,(Id&62914560)===0&&(Id=4194304),m}function L(m){for(var v=[],w=0;31>w;w++)v.push(m);return v}function F(m,v){m.pendingLanes|=v,v!==268435456&&(m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0)}function G(m,v,w,O,B,V){var le=m.pendingLanes;m.pendingLanes=w,m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0,m.expiredLanes&=w,m.entangledLanes&=w,m.errorRecoveryDisabledLanes&=w,m.shellSuspendCounter=0;var Se=m.entanglements,Ve=m.expirationTimes,gt=m.hiddenUpdates;for(w=le&~w;0<w;){var Pt=31-hs(w),qt=1<<Pt;Se[Pt]=0,Ve[Pt]=-1;var $t=gt[Pt];if($t!==null)for(gt[Pt]=null,Pt=0;Pt<$t.length;Pt++){var Tn=$t[Pt];Tn!==null&&(Tn.lane&=-536870913)}w&=~qt}O!==0&&H(m,O,0),V!==0&&B===0&&m.tag!==0&&(m.suspendedLanes|=V&~(le&~v))}function H(m,v,w){m.pendingLanes|=v,m.suspendedLanes&=~v;var O=31-hs(v);m.entangledLanes|=v,m.entanglements[O]=m.entanglements[O]|1073741824|w&4194218}function W(m,v){var w=m.entangledLanes|=v;for(m=m.entanglements;w;){var O=31-hs(w),B=1<<O;B&v|m[O]&v&&(m[O]|=v),w&=~B}}function Y(m){return m&=-m,2<m?8<m?(m&134217727)!==0?32:268435456:8:2}function k(m){if(ds&&typeof ds.onCommitFiberRoot=="function")try{ds.onCommitFiberRoot(ch,m,void 0,(m.current.flags&128)===128)}catch{}}function $(m){if(typeof U2=="function"&&yx(m),ds&&typeof ds.setStrictMode=="function")try{ds.setStrictMode(ch,m)}catch{}}function ee(m,v){return m===v&&(m!==0||1/m===1/v)||m!==m&&v!==v}function te(m,v){if(typeof m=="object"&&m!==null){var w=Yp.get(m);return w!==void 0?w:(v={value:m,source:v,stack:h(v)},Yp.set(m,v),v)}return{value:m,source:v,stack:h(v)}}function ae(m,v){Ki[gr++]=Bd,Ki[gr++]=Ld,Ld=m,Bd=v}function q(m,v,w){Ls[Bs++]=ml,Ls[Bs++]=oo,Ls[Bs++]=Do,Do=m;var O=ml;m=oo;var B=32-hs(O)-1;O&=~(1<<B),w+=1;var V=32-hs(v)+B;if(30<V){var le=B-B%5;V=(O&(1<<le)-1).toString(32),O>>=le,B-=le,ml=1<<32-hs(v)+B|w<<B|O,oo=V+m}else ml=1<<V|w<<B|O,oo=m}function K(m){m.return!==null&&(ae(m,1),q(m,1,0))}function ie(m){for(;m===Ld;)Ld=Ki[--gr],Ki[gr]=null,Bd=Ki[--gr],Ki[gr]=null;for(;m===Do;)Do=Ls[--Bs],Ls[Bs]=null,oo=Ls[--Bs],Ls[Bs]=null,ml=Ls[--Bs],Ls[Bs]=null}function ue(m,v){A(Po,v),A(zd,m),A(aa,null),m=Zu(v),T(aa),A(aa,m)}function me(){T(aa),T(zd),T(Po)}function fe(m){m.memoizedState!==null&&A(uh,m);var v=aa.current,w=f2(v,m.type);v!==w&&(A(zd,m),A(aa,w))}function de(m){zd.current===m&&(T(aa),T(zd)),uh.current===m&&(T(uh),hl?xn._currentValue=fs:xn._currentValue2=fs)}function _e(m){var v=Error(r(418,""));throw ct(te(v,m)),kd}function Te(m,v){if(!Xa)throw Error(r(175));Cw(m.stateNode,m.type,m.memoizedProps,v,m)||_e(m)}function Ie(m){for(Oa=m.return;Oa;)switch(Oa.tag){case 3:case 27:lo=!0;return;case 5:case 13:lo=!1;return;default:Oa=Oa.return}}function Re(m){if(!Xa||m!==Oa)return!1;if(!oi)return Ie(m),oi=!0,!1;var v=!1;if(ma?m.tag!==3&&m.tag!==27&&(m.tag!==5||E2(m.type)&&!Zc(m.type,m.memoizedProps))&&(v=!0):m.tag!==3&&(m.tag!==5||E2(m.type)&&!Zc(m.type,m.memoizedProps))&&(v=!0),v&&va&&_e(m),Ie(m),m.tag===13){if(!Xa)throw Error(r(316));if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));va=w2(m)}else va=Oa?sx(m.stateNode):null;return!0}function ye(){Xa&&(va=Oa=null,oi=!1)}function ct(m){zs===null?zs=[m]:zs.push(m)}function Ce(){for(var m=Qc,v=fh=Qc=0;v<m;){var w=ks[v];ks[v++]=null;var O=ks[v];ks[v++]=null;var B=ks[v];ks[v++]=null;var V=ks[v];if(ks[v++]=null,O!==null&&B!==null){var le=O.pending;le===null?B.next=B:(B.next=le.next,le.next=B),O.pending=B}V!==0&&Ue(w,B,V)}}function re(m,v,w,O){ks[Qc++]=m,ks[Qc++]=v,ks[Qc++]=w,ks[Qc++]=O,fh|=O,m.lanes|=O,m=m.alternate,m!==null&&(m.lanes|=O)}function Le(m,v,w,O){return re(m,v,w,O),Ge(m)}function He(m,v){return re(m,null,null,v),Ge(m)}function Ue(m,v,w){m.lanes|=w;var O=m.alternate;O!==null&&(O.lanes|=w);for(var B=!1,V=m.return;V!==null;)V.childLanes|=w,O=V.alternate,O!==null&&(O.childLanes|=w),V.tag===22&&(m=V.stateNode,m===null||m._visibility&1||(B=!0)),m=V,V=V.return;B&&v!==null&&m.tag===3&&(V=m.stateNode,B=31-hs(w),V=V.hiddenUpdates,m=V[B],m===null?V[B]=[v]:m.push(v),v.lane=w|536870912)}function Ge(m){if(50<lf)throw lf=0,Za=null,Error(r(185));for(var v=m.return;v!==null;)m=v,v=m.return;return m.tag===3?m.stateNode:null}function nt(m){m!==ef&&m.next===null&&(ef===null?hh=ef=m:ef=ef.next=m),Gd=!0,Fd||(Fd=!0,Xe(at))}function Ae(m,v){if(!Io&&Gd){Io=!0;do for(var w=!1,O=hh;O!==null;){if(m!==0){var B=O.pendingLanes;if(B===0)var V=0;else{var le=O.suspendedLanes,Se=O.pingedLanes;V=(1<<31-hs(42|m)+1)-1,V&=B&~(le&~Se),V=V&201326677?V&201326677|1:V?V|2:0}V!==0&&(w=!0,xe(O,V))}else V=Fn,V=R(O,O===qn?V:0),(V&3)===0||C(O,V)||(w=!0,xe(O,V));O=O.next}while(w);Io=!1}}function at(){Gd=Fd=!1;var m=0;Jc!==0&&(Kc()&&(m=Jc),Jc=0);for(var v=ga(),w=null,O=hh;O!==null;){var B=O.next,V=ne(O,v);V===0?(O.next=null,w===null?hh=B:w.next=B,B===null&&(ef=w)):(w=O,(m!==0||(V&3)!==0)&&(Gd=!0)),O=B}Ae(m)}function ne(m,v){for(var w=m.suspendedLanes,O=m.pingedLanes,B=m.expirationTimes,V=m.pendingLanes&-62914561;0<V;){var le=31-hs(V),Se=1<<le,Ve=B[le];Ve===-1?((Se&w)===0||(Se&O)!==0)&&(B[le]=D(Se,v)):Ve<=v&&(m.expiredLanes|=Se),V&=~Se}if(v=qn,w=Fn,w=R(m,m===v?w:0),O=m.callbackNode,w===0||m===v&&Oi===2||m.cancelPendingCommit!==null)return O!==null&&O!==null&&Ud(O),m.callbackNode=null,m.callbackPriority=0;if((w&3)===0||C(m,w)){if(v=w&-w,v===m.callbackPriority)return v;switch(O!==null&&Ud(O),Y(w)){case 2:case 8:w=I2;break;case 32:w=Xp;break;case 268435456:w=$p;break;default:w=Xp}return O=Z.bind(null,m),w=lh(w,O),m.callbackPriority=v,m.callbackNode=w,v}return O!==null&&O!==null&&Ud(O),m.callbackPriority=2,m.callbackNode=null,2}function Z(m,v){var w=m.callbackNode;if(ia()&&m.callbackNode!==w)return null;var O=Fn;return O=R(m,m===qn?O:0),O===0?null:(yd(m,O,v),ne(m,ga()),m.callbackNode!=null&&m.callbackNode===w?Z.bind(null,m):null)}function xe(m,v){if(ia())return null;yd(m,v,!0)}function Xe(m){Lr?Up(function(){(cn&6)!==0?lh(xx,m):m()}):lh(xx,m)}function Be(){return Jc===0&&(Jc=U()),Jc}function Ne(m,v){if(Vd===null){var w=Vd=[];Zp=0,ps=Be(),eu={status:"pending",value:void 0,then:function(O){w.push(O)}}}return Zp++,v.then(yt,yt),v}function yt(){if(--Zp===0&&Vd!==null){eu!==null&&(eu.status="fulfilled");var m=Vd;Vd=null,ps=0,eu=null;for(var v=0;v<m.length;v++)(0,m[v])()}}function vt(m,v){var w=[],O={status:"pending",value:null,reason:null,then:function(B){w.push(B)}};return m.then(function(){O.status="fulfilled",O.value=v;for(var B=0;B<w.length;B++)(0,w[B])(v)},function(B){for(O.status="rejected",O.reason=B,B=0;B<w.length;B++)(0,w[B])(void 0)}),O}function Dt(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nt(m,v){m=m.updateQueue,v.updateQueue===m&&(v.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,callbacks:null})}function We(m){return{lane:m,tag:0,payload:null,callback:null,next:null}}function qe(m,v,w){var O=m.updateQueue;if(O===null)return null;if(O=O.shared,(cn&2)!==0){var B=O.pending;return B===null?v.next=v:(v.next=B.next,B.next=v),O.pending=v,v=Ge(m),Ue(m,null,w),v}return re(m,O,v,w),Ge(m)}function dt(m,v,w){if(v=v.updateQueue,v!==null&&(v=v.shared,(w&4194176)!==0)){var O=v.lanes;O&=m.pendingLanes,w|=O,v.lanes=w,W(m,w)}}function pe(m,v){var w=m.updateQueue,O=m.alternate;if(O!==null&&(O=O.updateQueue,w===O)){var B=null,V=null;if(w=w.firstBaseUpdate,w!==null){do{var le={lane:w.lane,tag:w.tag,payload:w.payload,callback:null,next:null};V===null?B=V=le:V=V.next=le,w=w.next}while(w!==null);V===null?B=V=v:V=V.next=v}else B=V=v;w={baseState:O.baseState,firstBaseUpdate:B,lastBaseUpdate:V,shared:O.shared,callbacks:O.callbacks},m.updateQueue=w;return}m=w.lastBaseUpdate,m===null?w.firstBaseUpdate=v:m.next=v,w.lastBaseUpdate=v}function Oe(){if(dh){var m=eu;if(m!==null)throw m}}function ft(m,v,w,O){dh=!1;var B=m.updateQueue;nc=!1;var V=B.firstBaseUpdate,le=B.lastBaseUpdate,Se=B.shared.pending;if(Se!==null){B.shared.pending=null;var Ve=Se,gt=Ve.next;Ve.next=null,le===null?V=gt:le.next=gt,le=Ve;var Pt=m.alternate;Pt!==null&&(Pt=Pt.updateQueue,Se=Pt.lastBaseUpdate,Se!==le&&(Se===null?Pt.firstBaseUpdate=gt:Se.next=gt,Pt.lastBaseUpdate=Ve))}if(V!==null){var qt=B.baseState;le=0,Pt=gt=Ve=null,Se=V;do{var $t=Se.lane&-536870913,Tn=$t!==Se.lane;if(Tn?(Fn&$t)===$t:(O&$t)===$t){$t!==0&&$t===ps&&(dh=!0),Pt!==null&&(Pt=Pt.next={lane:0,tag:Se.tag,payload:Se.payload,callback:null,next:null});e:{var xs=m,Xd=Se;$t=v;var cf=w;switch(Xd.tag){case 1:if(xs=Xd.payload,typeof xs=="function"){qt=xs.call(cf,qt,$t);break e}qt=xs;break e;case 3:xs.flags=xs.flags&-65537|128;case 0:if(xs=Xd.payload,$t=typeof xs=="function"?xs.call(cf,qt,$t):xs,$t==null)break e;qt=$u({},qt,$t);break e;case 2:nc=!0}}$t=Se.callback,$t!==null&&(m.flags|=64,Tn&&(m.flags|=8192),Tn=B.callbacks,Tn===null?B.callbacks=[$t]:Tn.push($t))}else Tn={lane:$t,tag:Se.tag,payload:Se.payload,callback:Se.callback,next:null},Pt===null?(gt=Pt=Tn,Ve=qt):Pt=Pt.next=Tn,le|=$t;if(Se=Se.next,Se===null){if(Se=B.shared.pending,Se===null)break;Tn=Se,Se=Tn.next,Tn.next=null,B.lastBaseUpdate=Tn,B.shared.pending=null}}while(!0);Pt===null&&(Ve=qt),B.baseState=Ve,B.firstBaseUpdate=gt,B.lastBaseUpdate=Pt,V===null&&(B.shared.lanes=0),Hs|=le,m.lanes=le,m.memoizedState=qt}}function ge(m,v){if(typeof m!="function")throw Error(r(191,m));m.call(v)}function Ee(m,v){var w=m.callbacks;if(w!==null)for(m.callbacks=null,m=0;m<w.length;m++)ge(w[m],v)}function ut(m,v){if(Us(m,v))return!0;if(typeof m!="object"||m===null||typeof v!="object"||v===null)return!1;var w=Object.keys(m),O=Object.keys(v);if(w.length!==O.length)return!1;for(O=0;O<w.length;O++){var B=w[O];if(!Hd.call(v,B)||!Us(m[B],v[B]))return!1}return!0}function At(m){return m=m.status,m==="fulfilled"||m==="rejected"}function lt(){}function Ze(m,v,w){switch(w=m[w],w===void 0?m.push(v):w!==v&&(v.then(lt,lt),v=w),v.status){case"fulfilled":return v.value;case"rejected":throw m=v.reason,m===Ri?Error(r(483)):m;default:if(typeof v.status=="string")v.then(lt,lt);else{if(m=qn,m!==null&&100<m.shellSuspendCounter)throw Error(r(482));m=v,m.status="pending",m.then(function(O){if(v.status==="pending"){var B=v;B.status="fulfilled",B.value=O}},function(O){if(v.status==="pending"){var B=v;B.status="rejected",B.reason=O}})}switch(v.status){case"fulfilled":return v.value;case"rejected":throw m=v.reason,m===Ri?Error(r(483)):m}throw tf=v,Ri}}function Ct(){if(tf===null)throw Error(r(459));var m=tf;return tf=null,m}function Ut(m){var v=co;return co+=1,gl===null&&(gl=[]),Ze(gl,m,v)}function Bt(m,v){v=v.props.ref,m.ref=v!==void 0?v:null}function Yt(m,v){throw v.$$typeof===Bv?Error(r(525)):(m=Object.prototype.toString.call(v),Error(r(31,m==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":m)))}function On(m){var v=m._init;return v(m._payload)}function Vn(m){function v(Je,ze){if(m){var it=Je.deletions;it===null?(Je.deletions=[ze],Je.flags|=16):it.push(ze)}}function w(Je,ze){if(!m)return null;for(;ze!==null;)v(Je,ze),ze=ze.sibling;return null}function O(Je){for(var ze=new Map;Je!==null;)Je.key!==null?ze.set(Je.key,Je):ze.set(Je.index,Je),Je=Je.sibling;return ze}function B(Je,ze){return Je=ja(Je,ze),Je.index=0,Je.sibling=null,Je}function V(Je,ze,it){return Je.index=it,m?(it=Je.alternate,it!==null?(it=it.index,it<ze?(Je.flags|=33554434,ze):it):(Je.flags|=33554434,ze)):(Je.flags|=1048576,ze)}function le(Je){return m&&Je.alternate===null&&(Je.flags|=33554434),Je}function Se(Je,ze,it,Ot){return ze===null||ze.tag!==6?(ze=Hc(it,Je.mode,Ot),ze.return=Je,ze):(ze=B(ze,it),ze.return=Je,ze)}function Ve(Je,ze,it,Ot){var on=it.type;return on===nh?Pt(Je,ze,it.props.children,Ot,it.key):ze!==null&&(ze.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===Oo&&On(on)===ze.type)?(ze=B(ze,it.props),Bt(ze,it),ze.return=Je,ze):(ze=ao(it.type,it.key,it.props,null,Je.mode,Ot),Bt(ze,it),ze.return=Je,ze)}function gt(Je,ze,it,Ot){return ze===null||ze.tag!==4||ze.stateNode.containerInfo!==it.containerInfo||ze.stateNode.implementation!==it.implementation?(ze=th(it,Je.mode,Ot),ze.return=Je,ze):(ze=B(ze,it.children||[]),ze.return=Je,ze)}function Pt(Je,ze,it,Ot,on){return ze===null||ze.tag!==7?(ze=Zl(it,Je.mode,Ot,on),ze.return=Je,ze):(ze=B(ze,it),ze.return=Je,ze)}function qt(Je,ze,it){if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return ze=Hc(""+ze,Je.mode,it),ze.return=Je,ze;if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case Kl:return it=ao(ze.type,ze.key,ze.props,null,Je.mode,it),Bt(it,ze),it.return=Je,it;case No:return ze=th(ze,Je.mode,it),ze.return=Je,ze;case Oo:var Ot=ze._init;return ze=Ot(ze._payload),qt(Je,ze,it)}if($c(ze)||a(ze))return ze=Zl(ze,Je.mode,it,null),ze.return=Je,ze;if(typeof ze.then=="function")return qt(Je,Ut(ze),it);if(ze.$$typeof===ul)return qt(Je,pd(Je,ze),it);Yt(Je,ze)}return null}function $t(Je,ze,it,Ot){var on=ze!==null?ze.key:null;if(typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint")return on!==null?null:Se(Je,ze,""+it,Ot);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case Kl:return it.key===on?Ve(Je,ze,it,Ot):null;case No:return it.key===on?gt(Je,ze,it,Ot):null;case Oo:return on=it._init,it=on(it._payload),$t(Je,ze,it,Ot)}if($c(it)||a(it))return on!==null?null:Pt(Je,ze,it,Ot,null);if(typeof it.then=="function")return $t(Je,ze,Ut(it),Ot);if(it.$$typeof===ul)return $t(Je,ze,pd(Je,it),Ot);Yt(Je,it)}return null}function Tn(Je,ze,it,Ot,on){if(typeof Ot=="string"&&Ot!==""||typeof Ot=="number"||typeof Ot=="bigint")return Je=Je.get(it)||null,Se(ze,Je,""+Ot,on);if(typeof Ot=="object"&&Ot!==null){switch(Ot.$$typeof){case Kl:return Je=Je.get(Ot.key===null?it:Ot.key)||null,Ve(ze,Je,Ot,on);case No:return Je=Je.get(Ot.key===null?it:Ot.key)||null,gt(ze,Je,Ot,on);case Oo:var Vi=Ot._init;return Ot=Vi(Ot._payload),Tn(Je,ze,it,Ot,on)}if($c(Ot)||a(Ot))return Je=Je.get(it)||null,Pt(ze,Je,Ot,on,null);if(typeof Ot.then=="function")return Tn(Je,ze,it,Ut(Ot),on);if(Ot.$$typeof===ul)return Tn(Je,ze,it,pd(ze,Ot),on);Yt(ze,Ot)}return null}function xs(Je,ze,it,Ot){for(var on=null,Vi=null,yn=ze,ci=ze=0,Zr=null;yn!==null&&ci<it.length;ci++){yn.index>ci?(Zr=yn,yn=null):Zr=yn.sibling;var ui=$t(Je,yn,it[ci],Ot);if(ui===null){yn===null&&(yn=Zr);break}m&&yn&&ui.alternate===null&&v(Je,yn),ze=V(ui,ze,ci),Vi===null?on=ui:Vi.sibling=ui,Vi=ui,yn=Zr}if(ci===it.length)return w(Je,yn),oi&&ae(Je,ci),on;if(yn===null){for(;ci<it.length;ci++)yn=qt(Je,it[ci],Ot),yn!==null&&(ze=V(yn,ze,ci),Vi===null?on=yn:Vi.sibling=yn,Vi=yn);return oi&&ae(Je,ci),on}for(yn=O(yn);ci<it.length;ci++)Zr=Tn(yn,Je,ci,it[ci],Ot),Zr!==null&&(m&&Zr.alternate!==null&&yn.delete(Zr.key===null?ci:Zr.key),ze=V(Zr,ze,ci),Vi===null?on=Zr:Vi.sibling=Zr,Vi=Zr);return m&&yn.forEach(function(cc){return v(Je,cc)}),oi&&ae(Je,ci),on}function Xd(Je,ze,it,Ot){if(it==null)throw Error(r(151));for(var on=null,Vi=null,yn=ze,ci=ze=0,Zr=null,ui=it.next();yn!==null&&!ui.done;ci++,ui=it.next()){yn.index>ci?(Zr=yn,yn=null):Zr=yn.sibling;var cc=$t(Je,yn,ui.value,Ot);if(cc===null){yn===null&&(yn=Zr);break}m&&yn&&cc.alternate===null&&v(Je,yn),ze=V(cc,ze,ci),Vi===null?on=cc:Vi.sibling=cc,Vi=cc,yn=Zr}if(ui.done)return w(Je,yn),oi&&ae(Je,ci),on;if(yn===null){for(;!ui.done;ci++,ui=it.next())ui=qt(Je,ui.value,Ot),ui!==null&&(ze=V(ui,ze,ci),Vi===null?on=ui:Vi.sibling=ui,Vi=ui);return oi&&ae(Je,ci),on}for(yn=O(yn);!ui.done;ci++,ui=it.next())ui=Tn(yn,Je,ci,ui.value,Ot),ui!==null&&(m&&ui.alternate!==null&&yn.delete(ui.key===null?ci:ui.key),ze=V(ui,ze,ci),Vi===null?on=ui:Vi.sibling=ui,Vi=ui);return m&&yn.forEach(function(am){return v(Je,am)}),oi&&ae(Je,ci),on}function cf(Je,ze,it,Ot){if(typeof it=="object"&&it!==null&&it.type===nh&&it.key===null&&(it=it.props.children),typeof it=="object"&&it!==null){switch(it.$$typeof){case Kl:e:{for(var on=it.key;ze!==null;){if(ze.key===on){if(on=it.type,on===nh){if(ze.tag===7){w(Je,ze.sibling),Ot=B(ze,it.props.children),Ot.return=Je,Je=Ot;break e}}else if(ze.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===Oo&&On(on)===ze.type){w(Je,ze.sibling),Ot=B(ze,it.props),Bt(Ot,it),Ot.return=Je,Je=Ot;break e}w(Je,ze);break}else v(Je,ze);ze=ze.sibling}it.type===nh?(Ot=Zl(it.props.children,Je.mode,Ot,it.key),Ot.return=Je,Je=Ot):(Ot=ao(it.type,it.key,it.props,null,Je.mode,Ot),Bt(Ot,it),Ot.return=Je,Je=Ot)}return le(Je);case No:e:{for(on=it.key;ze!==null;){if(ze.key===on)if(ze.tag===4&&ze.stateNode.containerInfo===it.containerInfo&&ze.stateNode.implementation===it.implementation){w(Je,ze.sibling),Ot=B(ze,it.children||[]),Ot.return=Je,Je=Ot;break e}else{w(Je,ze);break}else v(Je,ze);ze=ze.sibling}Ot=th(it,Je.mode,Ot),Ot.return=Je,Je=Ot}return le(Je);case Oo:return on=it._init,it=on(it._payload),cf(Je,ze,it,Ot)}if($c(it))return xs(Je,ze,it,Ot);if(a(it)){if(on=a(it),typeof on!="function")throw Error(r(150));return it=on.call(it),Xd(Je,ze,it,Ot)}if(typeof it.then=="function")return cf(Je,ze,Ut(it),Ot);if(it.$$typeof===ul)return cf(Je,ze,pd(Je,it),Ot);Yt(Je,it)}return typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint"?(it=""+it,ze!==null&&ze.tag===6?(w(Je,ze.sibling),Ot=B(ze,it),Ot.return=Je,Je=Ot):(w(Je,ze),Ot=Hc(it,Je.mode,Ot),Ot.return=Je,Je=Ot),le(Je)):w(Je,ze)}return function(Je,ze,it,Ot){try{co=0;var on=cf(Je,ze,it,Ot);return gl=null,on}catch(yn){if(yn===Ri)throw yn;var Vi=n(29,yn,null,Je.mode);return Vi.lanes=Ot,Vi.return=Je,Vi}finally{}}}function Ii(m,v){m=Uo,A(Fs,m),A(vl,v),Uo=m|v.baseLanes}function Tr(){A(Fs,Uo),A(vl,vl.current)}function wr(){Uo=Fs.current,T(vl),T(Fs)}function bi(m){var v=m.alternate;A(Br,Br.current&1),A(Gs,m),uo===null&&(v===null||vl.current!==null||v.memoizedState!==null)&&(uo=m)}function sr(m){if(m.tag===22){if(A(Br,Br.current),A(Gs,m),uo===null){var v=m.alternate;v!==null&&v.memoizedState!==null&&(uo=m)}}else Fi()}function Fi(){A(Br,Br.current),A(Gs,Gs.current)}function rn(m){T(Gs),uo===m&&(uo=null),T(Br)}function Qn(m){for(var v=m;v!==null;){if(v.tag===13){var w=v.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||Fp(w)||Od(w)))return v}else if(v.tag===19&&v.memoizedProps.revealOrder!==void 0){if((v.flags&128)!==0)return v}else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===m)break;for(;v.sibling===null;){if(v.return===null||v.return===m)return null;v=v.return}v.sibling.return=v.return,v=v.sibling}return null}function dn(){throw Error(r(321))}function Q(m,v){if(v===null)return!1;for(var w=0;w<v.length&&w<m.length;w++)if(!Us(m[w],v[w]))return!1;return!0}function ce(m,v,w,O,B,V){return xl=V,Pn=v,v.memoizedState=null,v.updateQueue=null,v.lanes=0,hn.H=m===null||m.memoizedState===null?zr:Da,ic=!1,V=w(O,B),ic=!1,Qi&&(V=Qe(v,w,O,B)),we(m),V}function we(m){hn.H=li;var v=mi!==null&&mi.next!==null;if(xl=0,Er=mi=Pn=null,fo=!1,vr=0,ph=null,v)throw Error(r(300));m===null||Cr||(m=m.dependencies,m!==null&&Dc(m)&&(Cr=!0))}function Qe(m,v,w,O){Pn=m;var B=0;do{if(Qi&&(ph=null),vr=0,Qi=!1,25<=B)throw Error(r(301));if(B+=1,Er=mi=null,m.updateQueue!=null){var V=m.updateQueue;V.lastEffect=null,V.events=null,V.stores=null,V.memoCache!=null&&(V.memoCache.index=0)}hn.H=nu,V=v(w,O)}while(Qi);return V}function st(){var m=hn.H,v=m.useState()[0];return v=typeof v.then=="function"?ve(v):v,m=m.useState()[0],(mi!==null?mi.memoizedState:null)!==m&&(Pn.flags|=1024),v}function rt(){var m=qd!==0;return qd=0,m}function jt(m,v,w){v.updateQueue=m.updateQueue,v.flags&=-2053,m.lanes&=~w}function Tt(m){if(fo){for(m=m.memoizedState;m!==null;){var v=m.queue;v!==null&&(v.pending=null),m=m.next}fo=!1}xl=0,Er=mi=Pn=null,Qi=!1,vr=qd=0,ph=null}function _t(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Er===null?Pn.memoizedState=Er=m:Er=Er.next=m,Er}function J(){if(mi===null){var m=Pn.alternate;m=m!==null?m.memoizedState:null}else m=mi.next;var v=Er===null?Pn.memoizedState:Er.next;if(v!==null)Er=v,mi=m;else{if(m===null)throw Pn.alternate===null?Error(r(467)):Error(r(310));mi=m,m={memoizedState:mi.memoizedState,baseState:mi.baseState,baseQueue:mi.baseQueue,queue:mi.queue,next:null},Er===null?Pn.memoizedState=Er=m:Er=Er.next=m}return Er}function ve(m){var v=vr;return vr+=1,ph===null&&(ph=[]),m=Ze(ph,m,v),v=Pn,(Er===null?v.memoizedState:Er.next)===null&&(v=v.alternate,hn.H=v===null||v.memoizedState===null?zr:Da),m}function he(m){if(m!==null&&typeof m=="object"){if(typeof m.then=="function")return ve(m);if(m.$$typeof===ul)return ha(m)}throw Error(r(438,String(m)))}function Pe(m){var v=null,w=Pn.updateQueue;if(w!==null&&(v=w.memoCache),v==null){var O=Pn.alternate;O!==null&&(O=O.updateQueue,O!==null&&(O=O.memoCache,O!=null&&(v={data:O.data.map(function(B){return B.slice()}),index:0})))}if(v==null&&(v={data:[],index:0}),w===null&&(w=Qp(),Pn.updateQueue=w),w.memoCache=v,w=v.data[v.index],w===void 0)for(w=v.data[v.index]=Array(m),O=0;O<m;O++)w[O]=u2;return v.index++,w}function be(m,v){return typeof v=="function"?v(m):v}function et(m){var v=J();return ht(v,mi,m)}function ht(m,v,w){var O=m.queue;if(O===null)throw Error(r(311));O.lastRenderedReducer=w;var B=m.baseQueue,V=O.pending;if(V!==null){if(B!==null){var le=B.next;B.next=V.next,V.next=le}v.baseQueue=B=V,O.pending=null}if(V=m.baseState,B===null)m.memoizedState=V;else{v=B.next;var Se=le=null,Ve=null,gt=v,Pt=!1;do{var qt=gt.lane&-536870913;if(qt!==gt.lane?(Fn&qt)===qt:(xl&qt)===qt){var $t=gt.revertLane;if($t===0)Ve!==null&&(Ve=Ve.next={lane:0,revertLane:0,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null}),qt===ps&&(Pt=!0);else if((xl&$t)===$t){gt=gt.next,$t===ps&&(Pt=!0);continue}else qt={lane:0,revertLane:gt.revertLane,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null},Ve===null?(Se=Ve=qt,le=V):Ve=Ve.next=qt,Pn.lanes|=$t,Hs|=$t;qt=gt.action,ic&&w(V,qt),V=gt.hasEagerState?gt.eagerState:w(V,qt)}else $t={lane:qt,revertLane:gt.revertLane,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null},Ve===null?(Se=Ve=$t,le=V):Ve=Ve.next=$t,Pn.lanes|=qt,Hs|=qt;gt=gt.next}while(gt!==null&&gt!==v);if(Ve===null?le=V:Ve.next=Se,!Us(V,m.memoizedState)&&(Cr=!0,Pt&&(w=eu,w!==null)))throw w;m.memoizedState=V,m.baseState=le,m.baseQueue=Ve,O.lastRenderedState=V}return B===null&&(O.lanes=0),[m.memoizedState,O.dispatch]}function Mt(m){var v=J(),w=v.queue;if(w===null)throw Error(r(311));w.lastRenderedReducer=m;var O=w.dispatch,B=w.pending,V=v.memoizedState;if(B!==null){w.pending=null;var le=B=B.next;do V=m(V,le.action),le=le.next;while(le!==B);Us(V,v.memoizedState)||(Cr=!0),v.memoizedState=V,v.baseQueue===null&&(v.baseState=V),w.lastRenderedState=V}return[V,O]}function Rt(m,v,w){var O=Pn,B=J(),V=oi;if(V){if(w===void 0)throw Error(r(407));w=w()}else w=v();var le=!Us((mi||B).memoizedState,w);if(le&&(B.memoizedState=w,Cr=!0),B=B.queue,Mo(Vt.bind(null,O,B,m),[m]),B.getSnapshot!==v||le||Er!==null&&Er.memoizedState.tag&1){if(O.flags|=2048,Ui(9,Ft.bind(null,O,B,w,v),{destroy:void 0},null),qn===null)throw Error(r(349));V||(xl&60)!==0||Lt(O,v,w)}return w}function Lt(m,v,w){m.flags|=16384,m={getSnapshot:v,value:w},v=Pn.updateQueue,v===null?(v=Qp(),Pn.updateQueue=v,v.stores=[m]):(w=v.stores,w===null?v.stores=[m]:w.push(m))}function Ft(m,v,w,O){v.value=w,v.getSnapshot=O,Ht(v)&&gn(m)}function Vt(m,v,w){return w(function(){Ht(v)&&gn(m)})}function Ht(m){var v=m.getSnapshot;m=m.value;try{var w=v();return!Us(m,w)}catch{return!0}}function gn(m){var v=He(m,2);v!==null&&Ra(v,m,2)}function Jt(m){var v=_t();if(typeof m=="function"){var w=m;if(m=w(),ic){$(!0);try{w()}finally{$(!1)}}}return v.memoizedState=v.baseState=m,v.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:be,lastRenderedState:m},v}function sn(m,v,w,O){return m.baseState=w,ht(m,mi,typeof O=="function"?O:be)}function _n(m,v,w,O,B){if(nl(m))throw Error(r(485));if(m=v.action,m!==null){var V={payload:B,action:m,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(le){V.listeners.push(le)}};hn.T!==null?w(!0):V.isTransition=!1,O(V),w=v.pending,w===null?(V.next=v.pending=V,en(v,V)):(V.next=w.next,v.pending=w.next=V)}}function en(m,v){var w=v.action,O=v.payload,B=m.state;if(v.isTransition){var V=hn.T,le={};hn.T=le;try{var Se=w(B,O),Ve=hn.S;Ve!==null&&Ve(le,Se),vn(m,v,Se)}catch(gt){Dn(m,v,gt)}finally{hn.T=V}}else try{V=w(B,O),vn(m,v,V)}catch(gt){Dn(m,v,gt)}}function vn(m,v,w){w!==null&&typeof w=="object"&&typeof w.then=="function"?w.then(function(O){Zt(m,v,O)},function(O){return Dn(m,v,O)}):Zt(m,v,w)}function Zt(m,v,w){v.status="fulfilled",v.value=w,Hn(v),m.state=w,v=m.pending,v!==null&&(w=v.next,w===v?m.pending=null:(w=w.next,v.next=w,en(m,w)))}function Dn(m,v,w){var O=m.pending;if(m.pending=null,O!==null){O=O.next;do v.status="rejected",v.reason=w,Hn(v),v=v.next;while(v!==O)}m.action=null}function Hn(m){m=m.listeners;for(var v=0;v<m.length;v++)(0,m[v])()}function Kt(m,v){return v}function Xi(m,v){if(oi){var w=qn.formState;if(w!==null){e:{var O=Pn;if(oi){if(va){var B=v2(va,lo);if(B){va=sx(B),O=x2(B);break e}}_e(O)}O=!1}O&&(v=w[0])}}w=_t(),w.memoizedState=w.baseState=v,O={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kt,lastRenderedState:v},w.queue=O,w=Iu.bind(null,Pn,O),O.dispatch=w,O=Jt(!1);var V=Uu.bind(null,Pn,!1,O.queue);return O=_t(),B={state:v,dispatch:null,action:m,pending:null},O.queue=B,w=_n.bind(null,Pn,B,V,w),B.dispatch=w,O.memoizedState=m,[v,w,!1]}function Un(m){var v=J();return kn(v,mi,m)}function kn(m,v,w){v=ht(m,v,Kt)[0],m=et(be)[0],v=typeof v=="object"&&v!==null&&typeof v.then=="function"?ve(v):v;var O=J(),B=O.queue,V=B.dispatch;return w!==O.memoizedState&&(Pn.flags|=2048,Ui(9,pi.bind(null,B,w),{destroy:void 0},null)),[v,V,m]}function pi(m,v){m.action=v}function ir(m){var v=J(),w=mi;if(w!==null)return kn(v,w,m);J(),v=v.memoizedState,w=J();var O=w.queue.dispatch;return w.memoizedState=m,[v,O,!1]}function Ui(m,v,w,O){return m={tag:m,create:v,inst:w,deps:O,next:null},v=Pn.updateQueue,v===null&&(v=Qp(),Pn.updateQueue=v),w=v.lastEffect,w===null?v.lastEffect=m.next=m:(O=w.next,w.next=m,m.next=O,v.lastEffect=m),m}function Fa(){return J().memoizedState}function Ga(m,v,w,O){var B=_t();Pn.flags|=m,B.memoizedState=Ui(1|v,w,{destroy:void 0},O===void 0?null:O)}function jc(m,v,w,O){var B=J();O=O===void 0?null:O;var V=B.memoizedState.inst;mi!==null&&O!==null&&Q(O,mi.memoizedState.deps)?B.memoizedState=Ui(v,w,V,O):(Pn.flags|=m,B.memoizedState=Ui(1|v,w,V,O))}function ju(m,v){Ga(8390656,8,m,v)}function Mo(m,v){jc(2048,8,m,v)}function ud(m,v){return jc(4,2,m,v)}function Nu(m,v){return jc(4,4,m,v)}function to(m,v){if(typeof v=="function"){m=m();var w=v(m);return function(){typeof w=="function"?w():v(null)}}if(v!=null)return m=m(),v.current=m,function(){v.current=null}}function ua(m,v,w){w=w!=null?w.concat([m]):null,jc(4,4,to.bind(null,v,m),w)}function _o(){}function Ou(m,v){var w=J();v=v===void 0?null:v;var O=w.memoizedState;return v!==null&&Q(v,O[1])?O[0]:(w.memoizedState=[m,v],m)}function Cs(m,v){var w=J();v=v===void 0?null:v;var O=w.memoizedState;if(v!==null&&Q(v,O[1]))return O[0];if(O=m(),ic){$(!0);try{m()}finally{$(!1)}}return w.memoizedState=[O,v],O}function no(m,v,w){return w===void 0||(xl&1073741824)!==0?m.memoizedState=v:(m.memoizedState=w,m=sl(),Pn.lanes|=m,Hs|=m,w)}function Du(m,v,w,O){return Us(w,v)?w:vl.current!==null?(m=no(m,w,O),Us(m,v)||(Cr=!0),m):(xl&42)===0?(Cr=!0,m.memoizedState=w):(m=sl(),Pn.lanes|=m,Hs|=m,v)}function Pu(m,v,w,O,B){var V=$r();Na(V!==0&&8>V?V:8);var le=hn.T,Se={};hn.T=Se,Uu(m,!1,v,w);try{var Ve=B(),gt=hn.S;if(gt!==null&&gt(Se,Ve),Ve!==null&&typeof Ve=="object"&&typeof Ve.then=="function"){var Pt=vt(Ve,O);io(m,v,Pt,Wa(m))}else io(m,v,O,Wa(m))}catch(qt){io(m,v,{then:function(){},status:"rejected",reason:qt},Wa())}finally{Na(V),hn.T=le}}function Nc(m){var v=m.memoizedState;if(v!==null)return v;v={memoizedState:fs,baseState:fs,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:be,lastRenderedState:fs},next:null};var w={};return v.next={memoizedState:w,baseState:w,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:be,lastRenderedState:w},next:null},m.memoizedState=v,m=m.alternate,m!==null&&(m.memoizedState=v),v}function To(){return ha(xn)}function Rs(){return J().memoizedState}function Ea(){return J().memoizedState}function zl(m){for(var v=m.return;v!==null;){switch(v.tag){case 24:case 3:var w=Wa();m=We(w);var O=qe(v,m,w);O!==null&&(Ra(O,v,w),dt(O,v,w)),v={cache:mp()},m.payload=v;return}v=v.return}}function wo(m,v,w){var O=Wa();w={lane:O,revertLane:0,action:w,hasEagerState:!1,eagerState:null,next:null},nl(m)?Ao(v,w):(w=Le(m,v,w,O),w!==null&&(Ra(w,m,O),kl(w,v,O)))}function Iu(m,v,w){var O=Wa();io(m,v,w,O)}function io(m,v,w,O){var B={lane:O,revertLane:0,action:w,hasEagerState:!1,eagerState:null,next:null};if(nl(m))Ao(v,B);else{var V=m.alternate;if(m.lanes===0&&(V===null||V.lanes===0)&&(V=v.lastRenderedReducer,V!==null))try{var le=v.lastRenderedState,Se=V(le,w);if(B.hasEagerState=!0,B.eagerState=Se,Us(Se,le))return re(m,v,B,0),qn===null&&Ce(),!1}catch{}finally{}if(w=Le(m,v,B,O),w!==null)return Ra(w,m,O),kl(w,v,O),!0}return!1}function Uu(m,v,w,O){if(O={lane:2,revertLane:Be(),action:O,hasEagerState:!1,eagerState:null,next:null},nl(m)){if(v)throw Error(r(479))}else v=Le(m,w,O,2),v!==null&&Ra(v,m,2)}function nl(m){var v=m.alternate;return m===Pn||v!==null&&v===Pn}function Ao(m,v){Qi=fo=!0;var w=m.pending;w===null?v.next=v:(v.next=w.next,w.next=v),m.pending=v}function kl(m,v,w){if((w&4194176)!==0){var O=v.lanes;O&=m.pendingLanes,w|=O,v.lanes=w,W(m,w)}}function $i(m,v,w,O){v=m.memoizedState,w=w(O,v),w=w==null?v:$u({},v,w),m.memoizedState=w,m.lanes===0&&(m.updateQueue.baseState=w)}function Eo(m,v,w,O,B,V,le){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(O,V,le):v.prototype&&v.prototype.isPureReactComponent?!ut(w,O)||!ut(B,V):!0}function Fl(m,v,w,O){m=v.state,typeof v.componentWillReceiveProps=="function"&&v.componentWillReceiveProps(w,O),typeof v.UNSAFE_componentWillReceiveProps=="function"&&v.UNSAFE_componentWillReceiveProps(w,O),v.state!==m&&Jp.enqueueReplaceState(v,v.state,null)}function Va(m,v){var w=v;if("ref"in v){w={};for(var O in v)O!=="ref"&&(w[O]=v[O])}if(m=m.defaultProps){w===v&&(w=$u({},w));for(var B in m)w[B]===void 0&&(w[B]=m[B])}return w}function il(m,v){try{var w=m.onUncaughtError;w(v.value,{componentStack:v.stack})}catch(O){setTimeout(function(){throw O})}}function Lu(m,v,w){try{var O=m.onCaughtError;O(w.value,{componentStack:w.stack,errorBoundary:v.tag===1?v.stateNode:null})}catch(B){setTimeout(function(){throw B})}}function Co(m,v,w){return w=We(w),w.tag=3,w.payload={element:null},w.callback=function(){il(m,v)},w}function rl(m){return m=We(m),m.tag=3,m}function Xr(m,v,w,O){var B=w.type.getDerivedStateFromError;if(typeof B=="function"){var V=O.value;m.payload=function(){return B(V)},m.callback=function(){Lu(v,w,O)}}var le=w.stateNode;le!==null&&typeof le.componentDidCatch=="function"&&(m.callback=function(){Lu(v,w,O),typeof B!="function"&&(Ws===null?Ws=new Set([this]):Ws.add(this));var Se=O.stack;this.componentDidCatch(O.value,{componentStack:Se!==null?Se:""})})}function dp(m,v,w,O,B){if(w.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){if(v=w.alternate,v!==null&&zu(v,w,B,!0),w=Gs.current,w!==null){switch(w.tag){case 13:return uo===null?us():w.alternate===null&&ni===0&&(ni=3),w.flags&=-257,w.flags|=65536,w.lanes=B,O===Kp?w.flags|=16384:(v=w.updateQueue,v===null?w.updateQueue=new Set([O]):v.add(O),Rp(m,O,B)),!1;case 22:return w.flags|=65536,O===Kp?w.flags|=16384:(v=w.updateQueue,v===null?(v={transitions:null,markerInstances:null,retryQueue:new Set([O])},w.updateQueue=v):(w=v.retryQueue,w===null?v.retryQueue=new Set([O]):w.add(O)),Rp(m,O,B)),!1}throw Error(r(435,w.tag))}return Rp(m,O,B),us(),!1}if(oi)return v=Gs.current,v!==null?((v.flags&65536)===0&&(v.flags|=256),v.flags|=65536,v.lanes=B,O!==kd&&(m=Error(r(422),{cause:O}),ct(te(m,w)))):(O!==kd&&(v=Error(r(423),{cause:O}),ct(te(v,w))),m=m.current.alternate,m.flags|=65536,B&=-B,m.lanes|=B,O=te(O,w),B=Co(m.stateNode,O,B),pe(m,B),ni!==4&&(ni=2)),!1;var V=Error(r(520),{cause:O});if(V=te(V,w),gh===null?gh=[V]:gh.push(V),ni!==4&&(ni=2),v===null)return!0;O=te(O,w),w=v;do{switch(w.tag){case 3:return w.flags|=65536,m=B&-B,w.lanes|=m,m=Co(w.stateNode,O,m),pe(w,m),!1;case 1:if(v=w.type,V=w.stateNode,(w.flags&128)===0&&(typeof v.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(Ws===null||!Ws.has(V))))return w.flags|=65536,B&=-B,w.lanes|=B,B=rl(B),Xr(B,m,w,O),pe(w,B),!1}w=w.return}while(w!==null);return!1}function dr(m,v,w,O){v.child=m===null?Sx(v,null,w,O):tu(v,m.child,w,O)}function Bu(m,v,w,O,B){w=w.render;var V=v.ref;if("ref"in O){var le={};for(var Se in O)Se!=="ref"&&(le[Se]=O[Se])}else le=O;return ku(v),O=ce(m,v,w,le,V,B),Se=rt(),m!==null&&!Cr?(jt(m,v,B),Gl(m,v,B)):(oi&&Se&&K(v),v.flags|=1,dr(m,v,O,B),v.child)}function fd(m,v,w,O,B){if(m===null){var V=w.type;return typeof V=="function"&&!$l(V)&&V.defaultProps===void 0&&w.compare===null?(v.tag=15,v.type=V,Ff(m,v,V,O,B)):(m=ao(w.type,null,O,v,v.mode,B),m.ref=v.ref,m.return=v,v.child=m)}if(V=m.child,!yv(m,B)){var le=V.memoizedProps;if(w=w.compare,w=w!==null?w:ut,w(le,O)&&m.ref===v.ref)return Gl(m,v,B)}return v.flags|=1,m=ja(V,O),m.ref=v.ref,m.return=v,v.child=m}function Ff(m,v,w,O,B){if(m!==null){var V=m.memoizedProps;if(ut(V,O)&&m.ref===v.ref)if(Cr=!1,v.pendingProps=O=V,yv(m,B))(m.flags&131072)!==0&&(Cr=!0);else return v.lanes=m.lanes,Gl(m,v,B)}return ro(m,v,w,O,B)}function fa(m,v,w){var O=v.pendingProps,B=O.children,V=(v.stateNode._pendingVisibility&2)!==0,le=m!==null?m.memoizedState:null;if(Ur(m,v),O.mode==="hidden"||V){if((v.flags&128)!==0){if(O=le!==null?le.baseLanes|w:w,m!==null){for(B=v.child=m.child,V=0;B!==null;)V=V|B.lanes|B.childLanes,B=B.sibling;v.childLanes=V&~O}else v.childLanes=0,v.child=null;return os(m,v,O,w)}if((w&536870912)!==0)v.memoizedState={baseLanes:0,cachePool:null},m!==null&&gp(v,le!==null?le.cachePool:null),le!==null?Ii(v,le):Tr(),sr(v);else return v.lanes=v.childLanes=536870912,os(m,v,le!==null?le.baseLanes|w:w,w)}else le!==null?(gp(v,le.cachePool),Ii(v,le),Fi(),v.memoizedState=null):(m!==null&&gp(v,null),Tr(),Fi());return dr(m,v,B,w),v.child}function os(m,v,w,O){var B=Pc();return B=B===null?null:{parent:hl?Si._currentValue:Si._currentValue2,pool:B},v.memoizedState={baseLanes:w,cachePool:B},m!==null&&gp(v,null),Tr(),sr(v),m!==null&&zu(m,v,O,!0),null}function Ur(m,v){var w=v.ref;if(w===null)m!==null&&m.ref!==null&&(v.flags|=2097664);else{if(typeof w!="function"&&typeof w!="object")throw Error(r(284));(m===null||m.ref!==w)&&(v.flags|=2097664)}}function ro(m,v,w,O,B){return ku(v),w=ce(m,v,w,O,void 0,B),O=rt(),m!==null&&!Cr?(jt(m,v,B),Gl(m,v,B)):(oi&&O&&K(v),v.flags|=1,dr(m,v,w,B),v.child)}function hd(m,v,w,O,B,V){return ku(v),v.updateQueue=null,w=Qe(v,O,w,B),we(m),O=rt(),m!==null&&!Cr?(jt(m,v,V),Gl(m,v,V)):(oi&&O&&K(v),v.flags|=1,dr(m,v,w,V),v.child)}function pv(m,v,w,O,B){if(ku(v),v.stateNode===null){var V=Ju,le=w.contextType;typeof le=="object"&&le!==null&&(V=ha(le)),V=new w(O,V),v.memoizedState=V.state!==null&&V.state!==void 0?V.state:null,V.updater=Jp,v.stateNode=V,V._reactInternals=v,V=v.stateNode,V.props=O,V.state=v.memoizedState,V.refs={},Dt(v),le=w.contextType,V.context=typeof le=="object"&&le!==null?ha(le):Ju,V.state=v.memoizedState,le=w.getDerivedStateFromProps,typeof le=="function"&&($i(v,w,le,O),V.state=v.memoizedState),typeof w.getDerivedStateFromProps=="function"||typeof V.getSnapshotBeforeUpdate=="function"||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(le=V.state,typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount(),le!==V.state&&Jp.enqueueReplaceState(V,V.state,null),ft(v,O,V,B),Oe(),V.state=v.memoizedState),typeof V.componentDidMount=="function"&&(v.flags|=4194308),O=!0}else if(m===null){V=v.stateNode;var Se=v.memoizedProps,Ve=Va(w,Se);V.props=Ve;var gt=V.context,Pt=w.contextType;le=Ju,typeof Pt=="object"&&Pt!==null&&(le=ha(Pt));var qt=w.getDerivedStateFromProps;Pt=typeof qt=="function"||typeof V.getSnapshotBeforeUpdate=="function",Se=v.pendingProps!==Se,Pt||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(Se||gt!==le)&&Fl(v,V,O,le),nc=!1;var $t=v.memoizedState;V.state=$t,ft(v,O,V,B),Oe(),gt=v.memoizedState,Se||$t!==gt||nc?(typeof qt=="function"&&($i(v,w,qt,O),gt=v.memoizedState),(Ve=nc||Eo(v,w,Ve,O,$t,gt,le))?(Pt||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(v.flags|=4194308)):(typeof V.componentDidMount=="function"&&(v.flags|=4194308),v.memoizedProps=O,v.memoizedState=gt),V.props=O,V.state=gt,V.context=le,O=Ve):(typeof V.componentDidMount=="function"&&(v.flags|=4194308),O=!1)}else{V=v.stateNode,Nt(m,v),le=v.memoizedProps,Pt=Va(w,le),V.props=Pt,qt=v.pendingProps,$t=V.context,gt=w.contextType,Ve=Ju,typeof gt=="object"&&gt!==null&&(Ve=ha(gt)),Se=w.getDerivedStateFromProps,(gt=typeof Se=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(le!==qt||$t!==Ve)&&Fl(v,V,O,Ve),nc=!1,$t=v.memoizedState,V.state=$t,ft(v,O,V,B),Oe();var Tn=v.memoizedState;le!==qt||$t!==Tn||nc||m!==null&&m.dependencies!==null&&Dc(m.dependencies)?(typeof Se=="function"&&($i(v,w,Se,O),Tn=v.memoizedState),(Pt=nc||Eo(v,w,Pt,O,$t,Tn,Ve)||m!==null&&m.dependencies!==null&&Dc(m.dependencies))?(gt||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(O,Tn,Ve),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(O,Tn,Ve)),typeof V.componentDidUpdate=="function"&&(v.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(v.flags|=1024)):(typeof V.componentDidUpdate!="function"||le===m.memoizedProps&&$t===m.memoizedState||(v.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||le===m.memoizedProps&&$t===m.memoizedState||(v.flags|=1024),v.memoizedProps=O,v.memoizedState=Tn),V.props=O,V.state=Tn,V.context=Ve,O=Pt):(typeof V.componentDidUpdate!="function"||le===m.memoizedProps&&$t===m.memoizedState||(v.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||le===m.memoizedProps&&$t===m.memoizedState||(v.flags|=1024),O=!1)}return V=O,Ur(m,v),O=(v.flags&128)!==0,V||O?(V=v.stateNode,w=O&&typeof w.getDerivedStateFromError!="function"?null:V.render(),v.flags|=1,m!==null&&O?(v.child=tu(v,m.child,null,B),v.child=tu(v,null,w,B)):dr(m,v,w,B),v.memoizedState=V.state,m=v.child):m=Gl(m,v,B),m}function Xb(m,v,w,O){return ye(),v.flags|=256,dr(m,v,w,O),v.child}function mv(m){return{baseLanes:m,cachePool:Qb()}}function gv(m,v,w){return m=m!==null?m.childLanes&~w:0,v&&(m|=vs),m}function $b(m,v,w){var O=v.pendingProps,B=!1,V=(v.flags&128)!==0,le;if((le=V)||(le=m!==null&&m.memoizedState===null?!1:(Br.current&2)!==0),le&&(B=!0,v.flags&=-129),le=(v.flags&32)!==0,v.flags&=-33,m===null){if(oi){if(B?bi(v):Fi(),oi){var Se=va,Ve;(Ve=Se)&&(Se=_2(Se,lo),Se!==null?(v.memoizedState={dehydrated:Se,treeContext:Do!==null?{id:ml,overflow:oo}:null,retryLane:536870912},Ve=n(18,null,null,0),Ve.stateNode=Se,Ve.return=v,v.child=Ve,Oa=v,va=null,Ve=!0):Ve=!1),Ve||_e(v)}if(Se=v.memoizedState,Se!==null&&(Se=Se.dehydrated,Se!==null))return Od(Se)?v.lanes=16:v.lanes=536870912,null;rn(v)}return Se=O.children,O=O.fallback,B?(Fi(),B=v.mode,Se=vv({mode:"hidden",children:Se},B),O=Zl(O,B,w,null),Se.return=v,O.return=v,Se.sibling=O,v.child=Se,B=v.child,B.memoizedState=mv(w),B.childLanes=gv(m,le,w),v.memoizedState=Pa,O):(bi(v),dd(v,Se))}if(Ve=m.memoizedState,Ve!==null&&(Se=Ve.dehydrated,Se!==null)){if(V)v.flags&256?(bi(v),v.flags&=-257,v=xv(m,v,w)):v.memoizedState!==null?(Fi(),v.child=m.child,v.flags|=128,v=null):(Fi(),B=O.fallback,Se=v.mode,O=vv({mode:"visible",children:O.children},Se),B=Zl(B,Se,w,null),B.flags|=2,O.return=v,B.return=v,O.sibling=B,v.child=O,tu(v,m.child,null,w),O=v.child,O.memoizedState=mv(w),O.childLanes=gv(m,le,w),v.memoizedState=Pa,v=B);else if(bi(v),Od(Se))le=g2(Se).digest,O=Error(r(419)),O.stack="",O.digest=le,ct({value:O,source:null,stack:null}),v=xv(m,v,w);else if(Cr||zu(m,v,w,!1),le=(w&m.childLanes)!==0,Cr||le){if(le=qn,le!==null){if(O=w&-w,(O&42)!==0)O=1;else switch(O){case 2:O=1;break;case 8:O=4;break;case 32:O=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:O=64;break;case 268435456:O=134217728;break;default:O=0}if(O=(O&(le.suspendedLanes|w))!==0?0:O,O!==0&&O!==Ve.retryLane)throw Ve.retryLane=O,He(m,O),Ra(le,m,O),B2}Fp(Se)||us(),v=xv(m,v,w)}else Fp(Se)?(v.flags|=128,v.child=m.child,v=Wu.bind(null,m),Ew(Se,v),v=null):(m=Ve.treeContext,Xa&&(va=b2(Se),Oa=v,oi=!0,zs=null,lo=!1,m!==null&&(Ls[Bs++]=ml,Ls[Bs++]=oo,Ls[Bs++]=Do,ml=m.id,oo=m.overflow,Do=v)),v=dd(v,O.children),v.flags|=4096);return v}return B?(Fi(),B=O.fallback,Se=v.mode,Ve=m.child,V=Ve.sibling,O=ja(Ve,{mode:"hidden",children:O.children}),O.subtreeFlags=Ve.subtreeFlags&31457280,V!==null?B=ja(V,B):(B=Zl(B,Se,w,null),B.flags|=2),B.return=v,O.return=v,O.sibling=B,v.child=O,O=B,B=v.child,Se=m.child.memoizedState,Se===null?Se=mv(w):(Ve=Se.cachePool,Ve!==null?(V=hl?Si._currentValue:Si._currentValue2,Ve=Ve.parent!==V?{parent:V,pool:V}:Ve):Ve=Qb(),Se={baseLanes:Se.baseLanes|w,cachePool:Ve}),B.memoizedState=Se,B.childLanes=gv(m,le,w),v.memoizedState=Pa,O):(bi(v),w=m.child,m=w.sibling,w=ja(w,{mode:"visible",children:O.children}),w.return=v,w.sibling=null,m!==null&&(le=v.deletions,le===null?(v.deletions=[m],v.flags|=16):le.push(m)),v.child=w,v.memoizedState=null,w)}function dd(m,v){return v=vv({mode:"visible",children:v},m.mode),v.return=m,m.child=v}function vv(m,v){return jp(m,v,0,null)}function xv(m,v,w){return tu(v,m.child,null,w),m=dd(v,v.pendingProps.children),m.flags|=2,v.memoizedState=null,m}function Yb(m,v,w){m.lanes|=v;var O=m.alternate;O!==null&&(O.lanes|=v),bv(m.return,v,w)}function pp(m,v,w,O,B){var V=m.memoizedState;V===null?m.memoizedState={isBackwards:v,rendering:null,renderingStartTime:0,last:O,tail:w,tailMode:B}:(V.isBackwards=v,V.rendering=null,V.renderingStartTime=0,V.last=O,V.tail=w,V.tailMode=B)}function Zb(m,v,w){var O=v.pendingProps,B=O.revealOrder,V=O.tail;if(dr(m,v,O.children,w),O=Br.current,(O&2)!==0)O=O&1|2,v.flags|=128;else{if(m!==null&&(m.flags&128)!==0)e:for(m=v.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&Yb(m,w,v);else if(m.tag===19)Yb(m,w,v);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===v)break e;for(;m.sibling===null;){if(m.return===null||m.return===v)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}O&=1}switch(A(Br,O),B){case"forwards":for(w=v.child,B=null;w!==null;)m=w.alternate,m!==null&&Qn(m)===null&&(B=w),w=w.sibling;w=B,w===null?(B=v.child,v.child=null):(B=w.sibling,w.sibling=null),pp(v,!1,B,w,V);break;case"backwards":for(w=null,B=v.child,v.child=null;B!==null;){if(m=B.alternate,m!==null&&Qn(m)===null){v.child=B;break}m=B.sibling,B.sibling=w,w=B,B=m}pp(v,!0,w,null,V);break;case"together":pp(v,!1,null,null,void 0);break;default:v.memoizedState=null}return v.child}function Gl(m,v,w){if(m!==null&&(v.dependencies=m.dependencies),Hs|=v.lanes,(w&v.childLanes)===0)if(m!==null){if(zu(m,v,w,!1),(w&v.childLanes)===0)return null}else return null;if(m!==null&&v.child!==m.child)throw Error(r(153));if(v.child!==null){for(m=v.child,w=ja(m,m.pendingProps),v.child=w,w.return=v;m.sibling!==null;)m=m.sibling,w=w.sibling=ja(m,m.pendingProps),w.return=v;w.sibling=null}return v.child}function yv(m,v){return(m.lanes&v)!==0?!0:(m=m.dependencies,!!(m!==null&&Dc(m)))}function Tw(m,v,w){switch(v.tag){case 3:ue(v,v.stateNode.containerInfo),Oc(v,Si,m.memoizedState.cache),ye();break;case 27:case 5:fe(v);break;case 4:ue(v,v.stateNode.containerInfo);break;case 10:Oc(v,v.type,v.memoizedProps.value);break;case 13:var O=v.memoizedState;if(O!==null)return O.dehydrated!==null?(bi(v),v.flags|=128,null):(w&v.child.childLanes)!==0?$b(m,v,w):(bi(v),m=Gl(m,v,w),m!==null?m.sibling:null);bi(v);break;case 19:var B=(m.flags&128)!==0;if(O=(w&v.childLanes)!==0,O||(zu(m,v,w,!1),O=(w&v.childLanes)!==0),B){if(O)return Zb(m,v,w);v.flags|=128}if(B=v.memoizedState,B!==null&&(B.rendering=null,B.tail=null,B.lastEffect=null),A(Br,Br.current),O)break;return null;case 22:case 23:return v.lanes=0,fa(m,v,w);case 24:Oc(v,Si,m.memoizedState.cache)}return Gl(m,v,w)}function Kb(m,v,w){if(m!==null)if(m.memoizedProps!==v.pendingProps)Cr=!0;else{if(!yv(m,w)&&(v.flags&128)===0)return Cr=!1,Tw(m,v,w);Cr=(m.flags&131072)!==0}else Cr=!1,oi&&(v.flags&1048576)!==0&&q(v,Bd,v.index);switch(v.lanes=0,v.tag){case 16:e:{m=v.pendingProps;var O=v.elementType,B=O._init;if(O=B(O._payload),v.type=O,typeof O=="function")$l(O)?(m=Va(O,m),v.tag=1,v=pv(null,v,O,m,w)):(v.tag=0,v=ro(null,v,O,m,w));else{if(O!=null){if(B=O.$$typeof,B===ih){v.tag=11,v=Bu(null,v,O,m,w);break e}else if(B===Td){v.tag=14,v=fd(null,v,O,m,w);break e}}throw v=s(O)||O,Error(r(306,v,""))}}return v;case 0:return ro(m,v,v.type,v.pendingProps,w);case 1:return O=v.type,B=Va(O,v.pendingProps),pv(m,v,O,B,w);case 3:e:{if(ue(v,v.stateNode.containerInfo),m===null)throw Error(r(387));var V=v.pendingProps;B=v.memoizedState,O=B.element,Nt(m,v),ft(v,V,null,w);var le=v.memoizedState;if(V=le.cache,Oc(v,Si,V),V!==B.cache&&Sv(v,[Si],w,!0),Oe(),V=le.element,Xa&&B.isDehydrated)if(B={element:V,isDehydrated:!1,cache:le.cache},v.updateQueue.baseState=B,v.memoizedState=B,v.flags&256){v=Xb(m,v,V,w);break e}else if(V!==O){O=te(Error(r(424)),v),ct(O),v=Xb(m,v,V,w);break e}else for(Xa&&(va=y2(v.stateNode.containerInfo),Oa=v,oi=!0,zs=null,lo=!0),w=Sx(v,null,V,w),v.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(ye(),V===O){v=Gl(m,v,w);break e}dr(m,v,V,w)}v=v.child}return v;case 26:if(Is)return Ur(m,v),m===null?(w=Wp(v.type,null,v.pendingProps,null))?v.memoizedState=w:oi||(v.stateNode=Rw(v.type,v.pendingProps,Po.current,v)):v.memoizedState=Wp(v.type,m.memoizedProps,v.pendingProps,m.memoizedState),null;case 27:if(ma)return fe(v),m===null&&ma&&oi&&(O=v.stateNode=vx(v.type,v.pendingProps,Po.current,aa.current,!1),Oa=v,lo=!0,va=Gp(O)),O=v.pendingProps.children,m!==null||oi?dr(m,v,O,w):v.child=tu(v,null,O,w),Ur(m,v),v.child;case 5:return m===null&&oi&&(C2(v.type,v.pendingProps,aa.current),(B=O=va)&&(O=S2(O,v.type,v.pendingProps,lo),O!==null?(v.stateNode=O,Oa=v,va=Gp(O),lo=!1,B=!0):B=!1),B||_e(v)),fe(v),B=v.type,V=v.pendingProps,le=m!==null?m.memoizedProps:null,O=V.children,Zc(B,V)?O=null:le!==null&&Zc(B,le)&&(v.flags|=32),v.memoizedState!==null&&(B=ce(m,v,st,null,null,w),hl?xn._currentValue=B:xn._currentValue2=B),Ur(m,v),dr(m,v,O,w),v.child;case 6:return m===null&&oi&&(R2(v.pendingProps,aa.current),(m=w=va)&&(w=M2(w,v.pendingProps,lo),w!==null?(v.stateNode=w,Oa=v,va=null,m=!0):m=!1),m||_e(v)),null;case 13:return $b(m,v,w);case 4:return ue(v,v.stateNode.containerInfo),O=v.pendingProps,m===null?v.child=tu(v,null,O,w):dr(m,v,O,w),v.child;case 11:return Bu(m,v,v.type,v.pendingProps,w);case 7:return dr(m,v,v.pendingProps,w),v.child;case 8:return dr(m,v,v.pendingProps.children,w),v.child;case 12:return dr(m,v,v.pendingProps.children,w),v.child;case 10:return O=v.pendingProps,Oc(v,v.type,O.value),dr(m,v,O.children,w),v.child;case 9:return B=v.type._context,O=v.pendingProps.children,ku(v),B=ha(B),O=O(B),v.flags|=1,dr(m,v,O,w),v.child;case 14:return fd(m,v,v.type,v.pendingProps,w);case 15:return Ff(m,v,v.type,v.pendingProps,w);case 19:return Zb(m,v,w);case 22:return fa(m,v,w);case 24:return ku(v),O=ha(Si),m===null?(B=Pc(),B===null&&(B=qn,V=mp(),B.pooledCache=V,V.refCount++,V!==null&&(B.pooledCacheLanes|=w),B=V),v.memoizedState={parent:O,cache:B},Dt(v),Oc(v,Si,B)):((m.lanes&w)!==0&&(Nt(m,v),ft(v,null,null,w),Oe()),B=m.memoizedState,V=v.memoizedState,B.parent!==O?(B={parent:O,cache:O},v.memoizedState=B,v.lanes===0&&(v.memoizedState=v.updateQueue.baseState=B),Oc(v,Si,O)):(O=V.cache,Oc(v,Si,O),O!==B.cache&&Sv(v,[Si],w,!0))),dr(m,v,v.pendingProps.children,w),v.child;case 29:throw v.pendingProps}throw Error(r(156,v.tag))}function Oc(m,v,w){hl?(A(ms,v._currentValue),v._currentValue=w):(A(ms,v._currentValue2),v._currentValue2=w)}function Vl(m){var v=ms.current;hl?m._currentValue=v:m._currentValue2=v,T(ms)}function bv(m,v,w){for(;m!==null;){var O=m.alternate;if((m.childLanes&v)!==v?(m.childLanes|=v,O!==null&&(O.childLanes|=v)):O!==null&&(O.childLanes&v)!==v&&(O.childLanes|=v),m===w)break;m=m.return}}function Sv(m,v,w,O){var B=m.child;for(B!==null&&(B.return=m);B!==null;){var V=B.dependencies;if(V!==null){var le=B.child;V=V.firstContext;e:for(;V!==null;){var Se=V;V=B;for(var Ve=0;Ve<v.length;Ve++)if(Se.context===v[Ve]){V.lanes|=w,Se=V.alternate,Se!==null&&(Se.lanes|=w),bv(V.return,w,m),O||(le=null);break e}V=Se.next}}else if(B.tag===18){if(le=B.return,le===null)throw Error(r(341));le.lanes|=w,V=le.alternate,V!==null&&(V.lanes|=w),bv(le,w,m),le=null}else le=B.child;if(le!==null)le.return=B;else for(le=B;le!==null;){if(le===m){le=null;break}if(B=le.sibling,B!==null){B.return=le.return,le=B;break}le=le.return}B=le}}function zu(m,v,w,O){m=null;for(var B=v,V=!1;B!==null;){if(!V){if((B.flags&524288)!==0)V=!0;else if((B.flags&262144)!==0)break}if(B.tag===10){var le=B.alternate;if(le===null)throw Error(r(387));if(le=le.memoizedProps,le!==null){var Se=B.type;Us(B.pendingProps.value,le.value)||(m!==null?m.push(Se):m=[Se])}}else if(B===uh.current){if(le=B.alternate,le===null)throw Error(r(387));le.memoizedState.memoizedState!==B.memoizedState.memoizedState&&(m!==null?m.push(xn):m=[xn])}B=B.return}m!==null&&Sv(v,m,w,O),v.flags|=262144}function Dc(m){for(m=m.firstContext;m!==null;){var v=m.context;if(!Us(hl?v._currentValue:v._currentValue2,m.memoizedValue))return!0;m=m.next}return!1}function ku(m){iu=m,xr=null,m=m.dependencies,m!==null&&(m.firstContext=null)}function ha(m){return Mv(iu,m)}function pd(m,v){return iu===null&&ku(m),Mv(m,v)}function Mv(m,v){var w=hl?v._currentValue:v._currentValue2;if(v={context:v,memoizedValue:w,next:null},xr===null){if(m===null)throw Error(r(308));xr=v,m.dependencies={lanes:0,firstContext:v},m.flags|=524288}else xr=xr.next=v;return w}function mp(){return{controller:new z2,data:new Map,refCount:0}}function Gf(m){m.refCount--,m.refCount===0&&rc(nf,function(){m.controller.abort()})}function Pc(){var m=ac.current;return m!==null?m:qn.pooledCache}function gp(m,v){v===null?A(ac,ac.current):A(ac,v.pool)}function Qb(){var m=Pc();return m===null?null:{parent:hl?Si._currentValue:Si._currentValue2,pool:m}}function js(m){m.flags|=4}function _v(m,v){if(m!==null&&m.child===v.child)return!1;if((v.flags&16)!==0)return!0;for(m=v.child;m!==null;){if((m.flags&13878)!==0||(m.subtreeFlags&13878)!==0)return!0;m=m.sibling}return!1}function vp(m,v,w,O){if(pa)for(w=v.child;w!==null;){if(w.tag===5||w.tag===6)fl(m,w.stateNode);else if(!(w.tag===4||ma&&w.tag===27)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===v)break;for(;w.sibling===null;){if(w.return===null||w.return===v)return;w=w.return}w.sibling.return=w.return,w=w.sibling}else if(Ds)for(var B=v.child;B!==null;){if(B.tag===5){var V=B.stateNode;w&&O&&(V=rx(V,B.type,B.memoizedProps)),fl(m,V)}else if(B.tag===6)V=B.stateNode,w&&O&&(V=ax(V,B.memoizedProps)),fl(m,V);else if(B.tag!==4){if(B.tag===22&&B.memoizedState!==null)V=B.child,V!==null&&(V.return=B),vp(m,B,!0,!0);else if(B.child!==null){B.child.return=B,B=B.child;continue}}if(B===v)break;for(;B.sibling===null;){if(B.return===null||B.return===v)return;B=B.return}B.sibling.return=B.return,B=B.sibling}}function Vf(m,v,w,O){if(Ds)for(var B=v.child;B!==null;){if(B.tag===5){var V=B.stateNode;w&&O&&(V=rx(V,B.type,B.memoizedProps)),nx(m,V)}else if(B.tag===6)V=B.stateNode,w&&O&&(V=ax(V,B.memoizedProps)),nx(m,V);else if(B.tag!==4){if(B.tag===22&&B.memoizedState!==null)V=B.child,V!==null&&(V.return=B),Vf(m,B,!(B.memoizedProps!==null&&B.memoizedProps.mode==="manual"),!0);else if(B.child!==null){B.child.return=B,B=B.child;continue}}if(B===v)break;for(;B.sibling===null;){if(B.return===null||B.return===v)return;B=B.return}B.sibling.return=B.return,B=B.sibling}}function Hf(m,v){if(Ds&&_v(m,v)){m=v.stateNode;var w=m.containerInfo,O=kp();Vf(O,v,!1,!1),m.pendingChildren=O,js(v),m2(w,O)}}function Tv(m,v,w,O){if(pa)m.memoizedProps!==O&&js(v);else if(Ds){var B=m.stateNode,V=m.memoizedProps;if((m=_v(m,v))||V!==O){var le=aa.current;V=tx(B,w,V,O,!m,null),V===B?v.stateNode=B:(Ql(V,w,O,le)&&js(v),v.stateNode=V,m?vp(V,v,!1,!1):js(v))}else v.stateNode=B}}function qf(m,v,w){if(h2(v,w)){if(m.flags|=16777216,!Jl(v,w))if(bd())m.flags|=8192;else throw tf=Kp,bx}else m.flags&=-16777217}function wv(m,v){if(j2(v)){if(m.flags|=16777216,!mx(v))if(bd())m.flags|=8192;else throw tf=Kp,bx}else m.flags&=-16777217}function md(m,v){v!==null&&(m.flags|=4),m.flags&16384&&(v=m.tag!==22?I():536870912,m.lanes|=v,oc|=v)}function Fu(m,v){if(!oi)switch(m.tailMode){case"hidden":v=m.tail;for(var w=null;v!==null;)v.alternate!==null&&(w=v),v=v.sibling;w===null?m.tail=null:w.sibling=null;break;case"collapsed":w=m.tail;for(var O=null;w!==null;)w.alternate!==null&&(O=w),w=w.sibling;O===null?v||m.tail===null?m.tail=null:m.tail.sibling=null:O.sibling=null}}function Yi(m){var v=m.alternate!==null&&m.alternate.child===m.child,w=0,O=0;if(v)for(var B=m.child;B!==null;)w|=B.lanes|B.childLanes,O|=B.subtreeFlags&31457280,O|=B.flags&31457280,B.return=m,B=B.sibling;else for(B=m.child;B!==null;)w|=B.lanes|B.childLanes,O|=B.subtreeFlags,O|=B.flags,B.return=m,B=B.sibling;return m.subtreeFlags|=O,m.childLanes=w,v}function Jb(m,v,w){var O=v.pendingProps;switch(ie(v),v.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yi(v),null;case 1:return Yi(v),null;case 3:return w=v.stateNode,O=null,m!==null&&(O=m.memoizedState.cache),v.memoizedState.cache!==O&&(v.flags|=2048),Vl(Si),me(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(m===null||m.child===null)&&(Re(v)?js(v):m===null||m.memoizedState.isDehydrated&&(v.flags&256)===0||(v.flags|=1024,zs!==null&&(ql(zs),zs=null))),Hf(m,v),Yi(v),null;case 26:if(Is){w=v.type;var B=v.memoizedState;return m===null?(js(v),B!==null?(Yi(v),wv(v,B)):(Yi(v),qf(v,w,O))):B?B!==m.memoizedState?(js(v),Yi(v),wv(v,B)):(Yi(v),v.flags&=-16777217):(pa?m.memoizedProps!==O&&js(v):Tv(m,v,w,O),Yi(v),qf(v,w,O)),null}case 27:if(ma){if(de(v),w=Po.current,B=v.type,m!==null&&v.stateNode!=null)pa?m.memoizedProps!==O&&js(v):Tv(m,v,B,O);else{if(!O){if(v.stateNode===null)throw Error(r(166));return Yi(v),null}m=aa.current,Re(v)?Te(v,m):(m=vx(B,O,w,m,!0),v.stateNode=m,js(v))}return Yi(v),null}case 5:if(de(v),w=v.type,m!==null&&v.stateNode!=null)Tv(m,v,w,O);else{if(!O){if(v.stateNode===null)throw Error(r(166));return Yi(v),null}m=aa.current,Re(v)?Te(v,m):(B=Hv(w,O,Po.current,m,v),vp(B,v,!1,!1),v.stateNode=B,Ql(B,w,O,m)&&js(v))}return Yi(v),qf(v,v.type,v.pendingProps),null;case 6:if(m&&v.stateNode!=null)w=m.memoizedProps,pa?w!==O&&js(v):Ds&&(w!==O?(v.stateNode=Pp(O,Po.current,aa.current,v),js(v)):v.stateNode=m.stateNode);else{if(typeof O!="string"&&v.stateNode===null)throw Error(r(166));if(m=Po.current,w=aa.current,Re(v)){if(!Xa)throw Error(r(176));if(m=v.stateNode,w=v.memoizedProps,O=null,B=Oa,B!==null)switch(B.tag){case 27:case 5:O=B.memoizedProps}T2(m,w,v,O)||_e(v)}else v.stateNode=Pp(O,m,w,v)}return Yi(v),null;case 13:if(O=v.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(B=Re(v),O!==null&&O.dehydrated!==null){if(m===null){if(!B)throw Error(r(318));if(!Xa)throw Error(r(344));if(B=v.memoizedState,B=B!==null?B.dehydrated:null,!B)throw Error(r(317));ah(B,v)}else ye(),(v.flags&128)===0&&(v.memoizedState=null),v.flags|=4;Yi(v),B=!1}else zs!==null&&(ql(zs),zs=null),B=!0;if(!B)return v.flags&256?(rn(v),v):(rn(v),null)}if(rn(v),(v.flags&128)!==0)return v.lanes=w,v;if(w=O!==null,m=m!==null&&m.memoizedState!==null,w){O=v.child,B=null,O.alternate!==null&&O.alternate.memoizedState!==null&&O.alternate.memoizedState.cachePool!==null&&(B=O.alternate.memoizedState.cachePool.pool);var V=null;O.memoizedState!==null&&O.memoizedState.cachePool!==null&&(V=O.memoizedState.cachePool.pool),V!==B&&(O.flags|=2048)}return w!==m&&w&&(v.child.flags|=8192),md(v,v.updateQueue),Yi(v),null;case 4:return me(),Hf(m,v),m===null&&Xv(v.stateNode.containerInfo),Yi(v),null;case 10:return Vl(v.type),Yi(v),null;case 19:if(T(Br),B=v.memoizedState,B===null)return Yi(v),null;if(O=(v.flags&128)!==0,V=B.rendering,V===null)if(O)Fu(B,!1);else{if(ni!==0||m!==null&&(m.flags&128)!==0)for(m=v.child;m!==null;){if(V=Qn(m),V!==null){for(v.flags|=128,Fu(B,!1),m=V.updateQueue,v.updateQueue=m,md(v,m),v.subtreeFlags=0,m=w,w=v.child;w!==null;)Yl(w,m),w=w.sibling;return A(Br,Br.current&1|2),v.child}m=m.sibling}B.tail!==null&&ga()>lr&&(v.flags|=128,O=!0,Fu(B,!1),v.lanes=4194304)}else{if(!O)if(m=Qn(V),m!==null){if(v.flags|=128,O=!0,m=m.updateQueue,v.updateQueue=m,md(v,m),Fu(B,!0),B.tail===null&&B.tailMode==="hidden"&&!V.alternate&&!oi)return Yi(v),null}else 2*ga()-B.renderingStartTime>lr&&w!==536870912&&(v.flags|=128,O=!0,Fu(B,!1),v.lanes=4194304);B.isBackwards?(V.sibling=v.child,v.child=V):(m=B.last,m!==null?m.sibling=V:v.child=V,B.last=V)}return B.tail!==null?(v=B.tail,B.rendering=v,B.tail=v.sibling,B.renderingStartTime=ga(),v.sibling=null,m=Br.current,A(Br,O?m&1|2:m&1),v):(Yi(v),null);case 22:case 23:return rn(v),wr(),O=v.memoizedState!==null,m!==null?m.memoizedState!==null!==O&&(v.flags|=8192):O&&(v.flags|=8192),O?(w&536870912)!==0&&(v.flags&128)===0&&(Yi(v),v.subtreeFlags&6&&(v.flags|=8192)):Yi(v),w=v.updateQueue,w!==null&&md(v,w.retryQueue),w=null,m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(w=m.memoizedState.cachePool.pool),O=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(O=v.memoizedState.cachePool.pool),O!==w&&(v.flags|=2048),m!==null&&T(ac),null;case 24:return w=null,m!==null&&(w=m.memoizedState.cache),v.memoizedState.cache!==w&&(v.flags|=2048),Vl(Si),Yi(v),null;case 25:return null}throw Error(r(156,v.tag))}function e2(m,v){switch(ie(v),v.tag){case 1:return m=v.flags,m&65536?(v.flags=m&-65537|128,v):null;case 3:return Vl(Si),me(),m=v.flags,(m&65536)!==0&&(m&128)===0?(v.flags=m&-65537|128,v):null;case 26:case 27:case 5:return de(v),null;case 13:if(rn(v),m=v.memoizedState,m!==null&&m.dehydrated!==null){if(v.alternate===null)throw Error(r(340));ye()}return m=v.flags,m&65536?(v.flags=m&-65537|128,v):null;case 19:return T(Br),null;case 4:return me(),null;case 10:return Vl(v.type),null;case 22:case 23:return rn(v),wr(),m!==null&&T(ac),m=v.flags,m&65536?(v.flags=m&-65537|128,v):null;case 24:return Vl(Si),null;case 25:return null;default:return null}}function Av(m,v){switch(ie(v),v.tag){case 3:Vl(Si),me();break;case 26:case 27:case 5:de(v);break;case 4:me();break;case 13:rn(v);break;case 19:T(Br);break;case 10:Vl(v.type);break;case 22:case 23:rn(v),wr(),m!==null&&T(ac);break;case 24:Vl(Si)}}function gd(m,v){try{var w=v.updateQueue,O=w!==null?w.lastEffect:null;if(O!==null){var B=O.next;w=B;do{if((w.tag&m)===m){O=void 0;var V=w.create,le=w.inst;O=V(),le.destroy=O}w=w.next}while(w!==B)}}catch(Se){$n(v,v.return,Se)}}function Ic(m,v,w){try{var O=v.updateQueue,B=O!==null?O.lastEffect:null;if(B!==null){var V=B.next;O=V;do{if((O.tag&m)===m){var le=O.inst,Se=le.destroy;if(Se!==void 0){le.destroy=void 0,B=v;var Ve=w;try{Se()}catch(gt){$n(B,Ve,gt)}}}O=O.next}while(O!==V)}}catch(gt){$n(v,v.return,gt)}}function t2(m){var v=m.updateQueue;if(v!==null){var w=m.stateNode;try{Ee(v,w)}catch(O){$n(m,m.return,O)}}}function n2(m,v,w){w.props=Va(m.type,m.memoizedProps),w.state=m.memoizedState;try{w.componentWillUnmount()}catch(O){$n(m,v,O)}}function Gu(m,v){try{var w=m.ref;if(w!==null){var O=m.stateNode;switch(m.tag){case 26:case 27:case 5:var B=rh(O);break;default:B=O}typeof w=="function"?m.refCleanup=w(B):w.current=B}}catch(V){$n(m,v,V)}}function Zi(m,v){var w=m.ref,O=m.refCleanup;if(w!==null)if(typeof O=="function")try{O()}catch(B){$n(m,v,B)}finally{m.refCleanup=null,m=m.alternate,m!=null&&(m.refCleanup=null)}else if(typeof w=="function")try{w(null)}catch(B){$n(m,v,B)}else w.current=null}function Wf(m){var v=m.type,w=m.memoizedProps,O=m.stateNode;try{Aw(O,v,w,m)}catch(B){$n(m,m.return,B)}}function Ev(m,v,w){try{Kv(m.stateNode,m.type,w,v,m)}catch(O){$n(m,m.return,O)}}function Cv(m){return m.tag===5||m.tag===3||(Is?m.tag===26:!1)||(ma?m.tag===27:!1)||m.tag===4}function xp(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||Cv(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&(!ma||m.tag!==27)&&m.tag!==18;){if(m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function yp(m,v,w){var O=m.tag;if(O===5||O===6)m=m.stateNode,v?Jv(w,m,v):d2(w,m);else if(!(O===4||ma&&O===27)&&(m=m.child,m!==null))for(yp(m,v,w),m=m.sibling;m!==null;)yp(m,v,w),m=m.sibling}function Xf(m,v,w){var O=m.tag;if(O===5||O===6)m=m.stateNode,v?Qv(w,m,v):Zv(w,m);else if(!(O===4||ma&&O===27)&&(m=m.child,m!==null))for(Xf(m,v,w),m=m.sibling;m!==null;)Xf(m,v,w),m=m.sibling}function i2(m,v,w){m=m.containerInfo;try{ix(m,w)}catch(O){$n(v,v.return,O)}}function $f(m,v){for(Yc(m.containerInfo),yr=v;yr!==null;)if(m=yr,v=m.child,(m.subtreeFlags&1028)!==0&&v!==null)v.return=m,yr=v;else for(;yr!==null;){m=yr;var w=m.alternate;switch(v=m.flags,m.tag){case 0:break;case 11:case 15:break;case 1:if((v&1024)!==0&&w!==null){v=void 0;var O=m,B=w.memoizedProps;w=w.memoizedState;var V=O.stateNode;try{var le=Va(O.type,B,O.elementType===O.type);v=V.getSnapshotBeforeUpdate(le,w),V.__reactInternalSnapshotBeforeUpdate=v}catch(Se){$n(O,O.return,Se)}}break;case 3:(v&1024)!==0&&pa&&zp(m.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((v&1024)!==0)throw Error(r(163))}if(v=m.sibling,v!==null){v.return=m.return,yr=v;break}yr=m.return}return le=rf,rf=!1,le}function bp(m,v,w){var O=w.flags;switch(w.tag){case 0:case 11:case 15:al(m,w),O&4&&gd(5,w);break;case 1:if(al(m,w),O&4)if(m=w.stateNode,v===null)try{m.componentDidMount()}catch(Se){$n(w,w.return,Se)}else{var B=Va(w.type,v.memoizedProps);v=v.memoizedState;try{m.componentDidUpdate(B,v,m.__reactInternalSnapshotBeforeUpdate)}catch(Se){$n(w,w.return,Se)}}O&64&&t2(w),O&512&&Gu(w,w.return);break;case 3:if(al(m,w),O&64&&(O=w.updateQueue,O!==null)){if(m=null,w.child!==null)switch(w.child.tag){case 27:case 5:m=rh(w.child.stateNode);break;case 1:m=w.child.stateNode}try{Ee(O,m)}catch(Se){$n(w,w.return,Se)}}break;case 26:if(Is){al(m,w),O&512&&Gu(w,w.return);break}case 27:case 5:al(m,w),v===null&&O&4&&Wf(w),O&512&&Gu(w,w.return);break;case 12:al(m,w);break;case 13:al(m,w),O&4&&Uc(m,w);break;case 22:if(B=w.memoizedState!==null||Yr,!B){v=v!==null&&v.memoizedState!==null||or;var V=Yr,le=or;Yr=B,(or=v)&&!le?Bc(m,w,(w.subtreeFlags&8772)!==0):al(m,w),Yr=V,or=le}O&512&&(w.memoizedProps.mode==="manual"?Gu(w,w.return):Zi(w,w.return));break;default:al(m,w)}}function Yf(m){var v=m.alternate;v!==null&&(m.alternate=null,Yf(v)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(v=m.stateNode,v!==null&&$v(v)),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}function Ns(m,v,w){for(w=w.child;w!==null;)Sp(m,v,w),w=w.sibling}function Sp(m,v,w){if(ds&&typeof ds.onCommitFiberUnmount=="function")try{ds.onCommitFiberUnmount(ch,w)}catch{}switch(w.tag){case 26:if(Is){or||Zi(w,v),Ns(m,v,w),w.memoizedState?ux(w.memoizedState):w.stateNode&&dx(w.stateNode);break}case 27:if(ma){or||Zi(w,v);var O=Rr,B=gs;Rr=w.stateNode,Ns(m,v,w),N2(w.stateNode),Rr=O,gs=B;break}case 5:or||Zi(w,v);case 6:if(pa){if(O=Rr,B=gs,Rr=null,Ns(m,v,w),Rr=O,gs=B,Rr!==null)if(gs)try{Ar(Rr,w.stateNode)}catch(V){$n(w,v,V)}else try{$a(Rr,w.stateNode)}catch(V){$n(w,v,V)}}else Ns(m,v,w);break;case 18:pa&&Rr!==null&&(gs?ox(Rr,w.stateNode):A2(Rr,w.stateNode));break;case 4:pa?(O=Rr,B=gs,Rr=w.stateNode.containerInfo,gs=!0,Ns(m,v,w),Rr=O,gs=B):(Ds&&i2(w.stateNode,w,kp()),Ns(m,v,w));break;case 0:case 11:case 14:case 15:or||Ic(2,w,v),or||Ic(4,w,v),Ns(m,v,w);break;case 1:or||(Zi(w,v),O=w.stateNode,typeof O.componentWillUnmount=="function"&&n2(w,v,O)),Ns(m,v,w);break;case 21:Ns(m,v,w);break;case 22:or||Zi(w,v),or=(O=or)||w.memoizedState!==null,Ns(m,v,w),or=O;break;default:Ns(m,v,w)}}function Uc(m,v){if(Xa&&v.memoizedState===null&&(m=v.alternate,m!==null&&(m=m.memoizedState,m!==null&&(m=m.dehydrated,m!==null))))try{Hp(m)}catch(w){$n(v,v.return,w)}}function Zf(m){switch(m.tag){case 13:case 19:var v=m.stateNode;return v===null&&(v=m.stateNode=new mh),v;case 22:return m=m.stateNode,v=m._retryCache,v===null&&(v=m._retryCache=new mh),v;default:throw Error(r(435,m.tag))}}function vd(m,v){var w=Zf(m);v.forEach(function(O){var B=Dv.bind(null,m,O);w.has(O)||(w.add(O),O.then(B,B))})}function Ha(m,v){var w=v.deletions;if(w!==null)for(var O=0;O<w.length;O++){var B=w[O],V=m,le=v;if(pa){var Se=le;e:for(;Se!==null;){switch(Se.tag){case 27:case 5:Rr=Se.stateNode,gs=!1;break e;case 3:Rr=Se.stateNode.containerInfo,gs=!0;break e;case 4:Rr=Se.stateNode.containerInfo,gs=!0;break e}Se=Se.return}if(Rr===null)throw Error(r(160));Sp(V,le,B),Rr=null,gs=!1}else Sp(V,le,B);V=B.alternate,V!==null&&(V.return=null),B.return=null}if(v.subtreeFlags&13878)for(v=v.child;v!==null;)Lc(v,m),v=v.sibling}function Lc(m,v){var w=m.alternate,O=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:Ha(v,m),ls(m),O&4&&(Ic(3,m,m.return),gd(3,m),Ic(5,m,m.return));break;case 1:Ha(v,m),ls(m),O&512&&(or||w===null||Zi(w,w.return)),O&64&&Yr&&(m=m.updateQueue,m!==null&&(O=m.callbacks,O!==null&&(w=m.shared.hiddenCallbacks,m.shared.hiddenCallbacks=w===null?O:w.concat(O))));break;case 26:if(Is){var B=Ya;Ha(v,m),ls(m),O&512&&(or||w===null||Zi(w,w.return)),O&4&&(O=w!==null?w.memoizedState:null,v=m.memoizedState,w===null?v===null?m.stateNode===null?m.stateNode=fx(B,m.type,m.memoizedProps,m):hx(B,m.type,m.stateNode):m.stateNode=cx(B,v,m.memoizedProps):O!==v?(O===null?w.stateNode!==null&&dx(w.stateNode):ux(O),v===null?hx(B,m.type,m.stateNode):cx(B,v,m.memoizedProps)):v===null&&m.stateNode!==null&&Ev(m,m.memoizedProps,w.memoizedProps));break}case 27:if(ma&&O&4&&m.alternate===null){B=m.stateNode;var V=m.memoizedProps;try{jw(B),Nw(m.type,V,B,m)}catch(Pt){$n(m,m.return,Pt)}}case 5:if(Ha(v,m),ls(m),O&512&&(or||w===null||Zi(w,w.return)),pa){if(m.flags&32){v=m.stateNode;try{jd(v)}catch(Pt){$n(m,m.return,Pt)}}O&4&&m.stateNode!=null&&(v=m.memoizedProps,Ev(m,v,w!==null?w.memoizedProps:v)),O&1024&&(ru=!0)}break;case 6:if(Ha(v,m),ls(m),O&4&&pa){if(m.stateNode===null)throw Error(r(162));O=m.memoizedProps,w=w!==null?w.memoizedProps:O,v=m.stateNode;try{p2(v,w,O)}catch(Pt){$n(m,m.return,Pt)}}break;case 3:if(Is?(px(),B=Ya,Ya=qp(v.containerInfo),Ha(v,m),Ya=B):Ha(v,m),ls(m),O&4){if(pa&&Xa&&w!==null&&w.memoizedState.isDehydrated)try{Vp(v.containerInfo)}catch(Pt){$n(m,m.return,Pt)}if(Ds){O=v.containerInfo,w=v.pendingChildren;try{ix(O,w)}catch(Pt){$n(m,m.return,Pt)}}}ru&&(ru=!1,Rv(m));break;case 4:Is?(w=Ya,Ya=qp(m.stateNode.containerInfo),Ha(v,m),ls(m),Ya=w):(Ha(v,m),ls(m)),O&4&&Ds&&i2(m.stateNode,m,m.stateNode.pendingChildren);break;case 12:Ha(v,m),ls(m);break;case 13:Ha(v,m),ls(m),m.child.flags&8192&&m.memoizedState!==null!=(w!==null&&w.memoizedState!==null)&&(yl=ga()),O&4&&(O=m.updateQueue,O!==null&&(m.updateQueue=null,vd(m,O)));break;case 22:O&512&&(or||w===null||Zi(w,w.return)),B=m.memoizedState!==null;var le=w!==null&&w.memoizedState!==null,Se=Yr,Ve=or;if(Yr=Se||B,or=Ve||le,Ha(v,m),or=Ve,Yr=Se,ls(m),v=m.stateNode,v._current=m,v._visibility&=-3,v._visibility|=v._pendingVisibility&2,O&8192&&(v._visibility=B?v._visibility&-2:v._visibility|1,B&&(v=Yr||or,w===null||le||v||Kf(m)),pa&&(m.memoizedProps===null||m.memoizedProps.mode!=="manual"))){e:if(w=null,pa)for(v=m;;){if(v.tag===5||Is&&v.tag===26||ma&&v.tag===27){if(w===null){le=w=v;try{V=le.stateNode,B?Nd(V):ex(le.stateNode,le.memoizedProps)}catch(Pt){$n(le,le.return,Pt)}}}else if(v.tag===6){if(w===null){le=v;try{var gt=le.stateNode;B?Bp(gt):ec(gt,le.memoizedProps)}catch(Pt){$n(le,le.return,Pt)}}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===m)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===m)break e;for(;v.sibling===null;){if(v.return===null||v.return===m)break e;w===v&&(w=null),v=v.return}w===v&&(w=null),v.sibling.return=v.return,v=v.sibling}}O&4&&(O=m.updateQueue,O!==null&&(w=O.retryQueue,w!==null&&(O.retryQueue=null,vd(m,w))));break;case 19:Ha(v,m),ls(m),O&4&&(O=m.updateQueue,O!==null&&(m.updateQueue=null,vd(m,O)));break;case 21:break;default:Ha(v,m),ls(m)}}function ls(m){var v=m.flags;if(v&2){try{if(pa&&(!ma||m.tag!==27)){e:{for(var w=m.return;w!==null;){if(Cv(w)){var O=w;break e}w=w.return}throw Error(r(160))}switch(O.tag){case 27:if(ma){var B=O.stateNode,V=xp(m);Xf(m,V,B);break}case 5:var le=O.stateNode;O.flags&32&&(jd(le),O.flags&=-33);var Se=xp(m);Xf(m,Se,le);break;case 3:case 4:var Ve=O.stateNode.containerInfo,gt=xp(m);yp(m,gt,Ve);break;default:throw Error(r(161))}}}catch(Pt){$n(m,m.return,Pt)}m.flags&=-3}v&4096&&(m.flags&=-4097)}function Rv(m){if(m.subtreeFlags&1024)for(m=m.child;m!==null;){var v=m;Rv(v),v.tag===5&&v.flags&1024&&Ni(v.stateNode),m=m.sibling}}function al(m,v){if(v.subtreeFlags&8772)for(v=v.child;v!==null;)bp(m,v.alternate,v),v=v.sibling}function Kf(m){for(m=m.child;m!==null;){var v=m;switch(v.tag){case 0:case 11:case 14:case 15:Ic(4,v,v.return),Kf(v);break;case 1:Zi(v,v.return);var w=v.stateNode;typeof w.componentWillUnmount=="function"&&n2(v,v.return,w),Kf(v);break;case 26:case 27:case 5:Zi(v,v.return),Kf(v);break;case 22:Zi(v,v.return),v.memoizedState===null&&Kf(v);break;default:Kf(v)}m=m.sibling}}function Bc(m,v,w){for(w=w&&(v.subtreeFlags&8772)!==0,v=v.child;v!==null;){var O=v.alternate,B=m,V=v,le=V.flags;switch(V.tag){case 0:case 11:case 15:Bc(B,V,w),gd(4,V);break;case 1:if(Bc(B,V,w),O=V,B=O.stateNode,typeof B.componentDidMount=="function")try{B.componentDidMount()}catch(gt){$n(O,O.return,gt)}if(O=V,B=O.updateQueue,B!==null){var Se=O.stateNode;try{var Ve=B.shared.hiddenCallbacks;if(Ve!==null)for(B.shared.hiddenCallbacks=null,B=0;B<Ve.length;B++)ge(Ve[B],Se)}catch(gt){$n(O,O.return,gt)}}w&&le&64&&t2(V),Gu(V,V.return);break;case 26:case 27:case 5:Bc(B,V,w),w&&O===null&&le&4&&Wf(V),Gu(V,V.return);break;case 12:Bc(B,V,w);break;case 13:Bc(B,V,w),w&&le&4&&Uc(B,V);break;case 22:V.memoizedState===null&&Bc(B,V,w),Gu(V,V.return);break;default:Bc(B,V,w)}v=v.sibling}}function jv(m,v){var w=null;m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(w=m.memoizedState.cachePool.pool),m=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(m=v.memoizedState.cachePool.pool),m!==w&&(m!=null&&m.refCount++,w!=null&&Gf(w))}function Mp(m,v){m=null,v.alternate!==null&&(m=v.alternate.memoizedState.cache),v=v.memoizedState.cache,v!==m&&(v.refCount++,m!=null&&Gf(m))}function Hl(m,v,w,O){if(v.subtreeFlags&10256)for(v=v.child;v!==null;)_p(m,v,w,O),v=v.sibling}function _p(m,v,w,O){var B=v.flags;switch(v.tag){case 0:case 11:case 15:Hl(m,v,w,O),B&2048&&gd(9,v);break;case 3:Hl(m,v,w,O),B&2048&&(m=null,v.alternate!==null&&(m=v.alternate.memoizedState.cache),v=v.memoizedState.cache,v!==m&&(v.refCount++,m!=null&&Gf(m)));break;case 12:if(B&2048){Hl(m,v,w,O),m=v.stateNode;try{var V=v.memoizedProps,le=V.id,Se=V.onPostCommit;typeof Se=="function"&&Se(le,v.alternate===null?"mount":"update",m.passiveEffectDuration,-0)}catch(Ve){$n(v,v.return,Ve)}}else Hl(m,v,w,O);break;case 23:break;case 22:V=v.stateNode,v.memoizedState!==null?V._visibility&4?Hl(m,v,w,O):zc(m,v):V._visibility&4?Hl(m,v,w,O):(V._visibility|=4,Ca(m,v,w,O,(v.subtreeFlags&10256)!==0)),B&2048&&jv(v.alternate,v);break;case 24:Hl(m,v,w,O),B&2048&&Mp(v.alternate,v);break;default:Hl(m,v,w,O)}}function Ca(m,v,w,O,B){for(B=B&&(v.subtreeFlags&10256)!==0,v=v.child;v!==null;){var V=m,le=v,Se=w,Ve=O,gt=le.flags;switch(le.tag){case 0:case 11:case 15:Ca(V,le,Se,Ve,B),gd(8,le);break;case 23:break;case 22:var Pt=le.stateNode;le.memoizedState!==null?Pt._visibility&4?Ca(V,le,Se,Ve,B):zc(V,le):(Pt._visibility|=4,Ca(V,le,Se,Ve,B)),B&&gt&2048&&jv(le.alternate,le);break;case 24:Ca(V,le,Se,Ve,B),B&&gt&2048&&Mp(le.alternate,le);break;default:Ca(V,le,Se,Ve,B)}v=v.sibling}}function zc(m,v){if(v.subtreeFlags&10256)for(v=v.child;v!==null;){var w=m,O=v,B=O.flags;switch(O.tag){case 22:zc(w,O),B&2048&&jv(O.alternate,O);break;case 24:zc(w,O),B&2048&&Mp(O.alternate,O);break;default:zc(w,O)}v=v.sibling}}function ta(m){if(m.subtreeFlags&af)for(m=m.child;m!==null;)Vu(m),m=m.sibling}function Vu(m){switch(m.tag){case 26:ta(m),m.flags&af&&(m.memoizedState!==null?gx(Ya,m.memoizedState,m.memoizedProps):pr(m.type,m.memoizedProps));break;case 5:ta(m),m.flags&af&&pr(m.type,m.memoizedProps);break;case 3:case 4:if(Is){var v=Ya;Ya=qp(m.stateNode.containerInfo),ta(m),Ya=v}else ta(m);break;case 22:m.memoizedState===null&&(v=m.alternate,v!==null&&v.memoizedState!==null?(v=af,af=16777216,ta(m),af=v):ta(m));break;default:ta(m)}}function Tp(m){var v=m.alternate;if(v!==null&&(m=v.child,m!==null)){v.child=null;do v=m.sibling,m.sibling=null,m=v;while(m!==null)}}function kc(m){var v=m.deletions;if((m.flags&16)!==0){if(v!==null)for(var w=0;w<v.length;w++){var O=v[w];yr=O,Fc(O,m)}Tp(m)}if(m.subtreeFlags&10256)for(m=m.child;m!==null;)xd(m),m=m.sibling}function xd(m){switch(m.tag){case 0:case 11:case 15:kc(m),m.flags&2048&&Ic(9,m,m.return);break;case 3:kc(m);break;case 12:kc(m);break;case 22:var v=m.stateNode;m.memoizedState!==null&&v._visibility&4&&(m.return===null||m.return.tag!==13)?(v._visibility&=-5,Qf(m)):kc(m);break;default:kc(m)}}function Qf(m){var v=m.deletions;if((m.flags&16)!==0){if(v!==null)for(var w=0;w<v.length;w++){var O=v[w];yr=O,Fc(O,m)}Tp(m)}for(m=m.child;m!==null;){switch(v=m,v.tag){case 0:case 11:case 15:Ic(8,v,v.return),Qf(v);break;case 22:w=v.stateNode,w._visibility&4&&(w._visibility&=-5,Qf(v));break;default:Qf(v)}m=m.sibling}}function Fc(m,v){for(;yr!==null;){var w=yr;switch(w.tag){case 0:case 11:case 15:Ic(8,w,v);break;case 23:case 22:if(w.memoizedState!==null&&w.memoizedState.cachePool!==null){var O=w.memoizedState.cachePool.pool;O!=null&&O.refCount++}break;case 24:Gf(w.memoizedState.cache)}if(O=w.child,O!==null)O.return=w,yr=O;else e:for(w=m;yr!==null;){O=yr;var B=O.sibling,V=O.return;if(Yf(O),O===w){yr=null;break e}if(B!==null){B.return=V,yr=B;break e}yr=V}}}function wp(m){var v=Wv(m);if(v!=null){if(typeof v.memoizedProps["data-testname"]!="string")throw Error(r(364));return v}if(m=Qu(m),m===null)throw Error(r(362));return m.stateNode.current}function Jf(m,v){var w=m.tag;switch(v.$$typeof){case Wd:if(m.type===v.value)return!0;break;case nm:e:{for(v=v.value,m=[m,0],w=0;w<m.length;){var O=m[w++],B=O.tag,V=m[w++],le=v[V];if(B!==5&&B!==26&&B!==27||!pl(O)){for(;le!=null&&Jf(O,le);)V++,le=v[V];if(V===v.length){v=!0;break e}else for(O=O.child;O!==null;)m.push(O,V),O=O.sibling}}v=!1}return v;case im:if((w===5||w===26||w===27)&&ww(m.stateNode,v.value))return!0;break;case Mi:if((w===5||w===6||w===26||w===27)&&(m=Rd(m),m!==null&&0<=m.indexOf(v.value)))return!0;break;case ti:if((w===5||w===26||w===27)&&(m=m.memoizedProps["data-testname"],typeof m=="string"&&m.toLowerCase()===v.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function Gc(m){switch(m.$$typeof){case Wd:return"<"+(s(m.value)||"Unknown")+">";case nm:return":has("+(Gc(m)||"")+")";case im:return'[role="'+m.value+'"]';case Mi:return'"'+m.value+'"';case ti:return'[data-testname="'+m.value+'"]';default:throw Error(r(365))}}function r2(m,v){var w=[];m=[m,0];for(var O=0;O<m.length;){var B=m[O++],V=B.tag,le=m[O++],Se=v[le];if(V!==5&&V!==26&&V!==27||!pl(B)){for(;Se!=null&&Jf(B,Se);)le++,Se=v[le];if(le===v.length)w.push(B);else for(B=B.child;B!==null;)m.push(B,le),B=B.sibling}}return w}function qa(m,v){if(!dl)throw Error(r(363));m=wp(m),m=r2(m,v),v=[],m=Array.from(m);for(var w=0;w<m.length;){var O=m[w++],B=O.tag;if(B===5||B===26||B===27)pl(O)||v.push(O.stateNode);else for(O=O.child;O!==null;)m.push(O),O=O.sibling}return v}function Wa(){if((cn&2)!==0&&Fn!==0)return Fn&-Fn;if(hn.T!==null){var m=ps;return m!==0?m:Be()}return so()}function sl(){vs===0&&(vs=(Fn&536870912)===0||oi?U():536870912);var m=Gs.current;return m!==null&&(m.flags|=32),vs}function Ra(m,v,w){(m===qn&&Oi===2||m.cancelPendingCommit!==null)&&(jo(m,0),Ro(m,Fn,vs,!1)),F(m,w),((cn&2)===0||m!==qn)&&(m===qn&&((cn&2)===0&&(Lo|=w),ni===4&&Ro(m,Fn,vs,!1)),nt(m))}function yd(m,v,w){if((cn&6)!==0)throw Error(r(327));var O=!w&&(v&60)===0&&(v&m.expiredLanes)===0||C(m,v),B=O?cl(m,v):ol(m,v,!0),V=O;do{if(B===0){Vs&&!O&&Ro(m,v,0,!1);break}else if(B===6)Ro(m,v,0,!_i);else{if(w=m.current.alternate,V&&!a2(w)){B=ol(m,v,!1),V=!1;continue}if(B===2){if(V=v,m.errorRecoveryDisabledLanes&V)var le=0;else le=m.pendingLanes&-536870913,le=le!==0?le:le&536870912?536870912:0;if(le!==0){v=le;e:{var Se=m;B=gh;var Ve=Xa&&Se.current.memoizedState.isDehydrated;if(Ve&&(jo(Se,le).flags|=256),le=ol(Se,le,!1),le!==2){if(sc&&!Ve){Se.errorRecoveryDisabledLanes|=V,Lo|=V,B=4;break e}V=qs,qs=B,V!==null&&ql(V)}B=le}if(V=!1,B!==2)continue}}if(B===1){jo(m,0),Ro(m,v,0,!0);break}e:{switch(O=m,B){case 0:case 1:throw Error(r(345));case 4:if((v&4194176)===v){Ro(O,v,vs,!_i);break e}break;case 2:qs=null;break;case 3:case 5:break;default:throw Error(r(329))}if(O.finishedWork=w,O.finishedLanes=v,(v&62914560)===v&&(V=yl+300-ga(),10<V)){if(Ro(O,v,vs,!_i),R(O,0)!==0)break e;O.timeoutHandle=qv(Ap.bind(null,O,w,qs,Bo,vh,v,vs,Lo,oc,_i,2,-0,0),V);break e}Ap(O,w,qs,Bo,vh,v,vs,Lo,oc,_i,0,-0,0)}}break}while(!0);nt(m)}function ql(m){qs===null?qs=m:qs.push.apply(qs,m)}function Ap(m,v,w,O,B,V,le,Se,Ve,gt,Pt,qt,$t){var Tn=v.subtreeFlags;if((Tn&8192||(Tn&16785408)===16785408)&&(Ps(),Vu(v),v=Ip(),v!==null)){m.cancelPendingCommit=v(Gi.bind(null,m,w,O,B,le,Se,Ve,1,qt,$t)),Ro(m,V,le,!gt);return}Gi(m,w,O,B,le,Se,Ve,Pt,qt,$t)}function a2(m){for(var v=m;;){var w=v.tag;if((w===0||w===11||w===15)&&v.flags&16384&&(w=v.updateQueue,w!==null&&(w=w.stores,w!==null)))for(var O=0;O<w.length;O++){var B=w[O],V=B.getSnapshot;B=B.value;try{if(!Us(V(),B))return!1}catch{return!1}}if(w=v.child,v.subtreeFlags&16384&&w!==null)w.return=v,v=w;else{if(v===m)break;for(;v.sibling===null;){if(v.return===null||v.return===m)return!0;v=v.return}v.sibling.return=v.return,v=v.sibling}}return!0}function Ro(m,v,w,O){v&=~Ia,v&=~Lo,m.suspendedLanes|=v,m.pingedLanes&=~v,O&&(m.warmLanes|=v),O=m.expirationTimes;for(var B=v;0<B;){var V=31-hs(B),le=1<<V;O[V]=-1,B&=~le}w!==0&&H(m,w,v)}function Nv(){return(cn&6)===0?(Ae(0),!1):!0}function cs(){if(En!==null){if(Oi===0)var m=En.return;else m=En,xr=iu=null,Tt(m),gl=null,co=0,m=En;for(;m!==null;)Av(m.alternate,m),m=m.return;En=null}}function jo(m,v){m.finishedWork=null,m.finishedLanes=0;var w=m.timeoutHandle;w!==Ku&&(m.timeoutHandle=Ku,Cd(w)),w=m.cancelPendingCommit,w!==null&&(m.cancelPendingCommit=null,w()),cs(),qn=m,En=w=ja(m.current,null),Fn=v,Oi=0,jr=null,_i=!1,Vs=C(m,v),sc=!1,oc=vs=Ia=Lo=Hs=ni=0,qs=gh=null,vh=!1,(v&8)!==0&&(v|=v&32);var O=m.entangledLanes;if(O!==0)for(m=m.entanglements,O&=v;0<O;){var B=31-hs(O),V=1<<B;v|=m[B],O&=~V}return Uo=v,Ce(),w}function Hu(m,v){Pn=null,hn.H=li,v===Ri?(v=Ct(),Oi=3):v===bx?(v=Ct(),Oi=4):Oi=v===B2?8:v!==null&&typeof v=="object"&&typeof v.then=="function"?6:1,jr=v,En===null&&(ni=1,il(m,te(v,m.current)))}function bd(){var m=Gs.current;return m===null?!0:(Fn&4194176)===Fn?uo===null:(Fn&62914560)===Fn||(Fn&536870912)!==0?m===uo:!1}function eh(){var m=hn.H;return hn.H=li,m===null?li:m}function Os(){var m=hn.A;return hn.A=tm,m}function us(){ni=4,_i||(Fn&4194176)!==Fn&&Gs.current!==null||(Vs=!0),(Hs&134217727)===0&&(Lo&134217727)===0||qn===null||Ro(qn,Fn,vs,!1)}function ol(m,v,w){var O=cn;cn|=2;var B=eh(),V=Os();(qn!==m||Fn!==v)&&(Bo=null,jo(m,v)),v=!1;var le=ni;e:do try{if(Oi!==0&&En!==null){var Se=En,Ve=jr;switch(Oi){case 8:cs(),le=6;break e;case 3:case 2:case 6:Gs.current===null&&(v=!0);var gt=Oi;if(Oi=0,jr=null,Vc(m,Se,Ve,gt),w&&Vs){le=0;break e}break;default:gt=Oi,Oi=0,jr=null,Vc(m,Se,Ve,gt)}}ll(),le=ni;break}catch(Pt){Hu(m,Pt)}while(!0);return v&&m.shellSuspendCounter++,xr=iu=null,cn=O,hn.H=B,hn.A=V,En===null&&(qn=null,Fn=0,Ce()),le}function ll(){for(;En!==null;)Ov(En)}function cl(m,v){var w=cn;cn|=2;var O=eh(),B=Os();qn!==m||Fn!==v?(Bo=null,lr=ga()+500,jo(m,v)):Vs=C(m,v);e:do try{if(Oi!==0&&En!==null){v=En;var V=jr;t:switch(Oi){case 1:Oi=0,jr=null,Vc(m,v,V,1);break;case 2:if(At(V)){Oi=0,jr=null,Ep(v);break}v=function(){Oi===2&&qn===m&&(Oi=7),nt(m)},V.then(v,v);break e;case 3:Oi=7;break e;case 4:Oi=5;break e;case 7:At(V)?(Oi=0,jr=null,Ep(v)):(Oi=0,jr=null,Vc(m,v,V,7));break;case 5:var le=null;switch(En.tag){case 26:le=En.memoizedState;case 5:case 27:var Se=En,Ve=Se.type,gt=Se.pendingProps;if(le?mx(le):Jl(Ve,gt)){Oi=0,jr=null;var Pt=Se.sibling;if(Pt!==null)En=Pt;else{var qt=Se.return;qt!==null?(En=qt,Sd(qt)):En=null}break t}}Oi=0,jr=null,Vc(m,v,V,5);break;case 6:Oi=0,jr=null,Vc(m,v,V,6);break;case 8:cs(),ni=6;break e;default:throw Error(r(462))}}Wl();break}catch($t){Hu(m,$t)}while(!0);return xr=iu=null,hn.H=O,hn.A=B,cn=w,En!==null?0:(qn=null,Fn=0,Ce(),ni)}function Wl(){for(;En!==null&&!D2();)Ov(En)}function Ov(m){var v=Kb(m.alternate,m,Uo);m.memoizedProps=m.pendingProps,v===null?Sd(m):En=v}function Ep(m){var v=m,w=v.alternate;switch(v.tag){case 15:case 0:v=hd(w,v,v.pendingProps,v.type,void 0,Fn);break;case 11:v=hd(w,v,v.pendingProps,v.type.render,v.ref,Fn);break;case 5:Tt(v);default:Av(w,v),v=En=Yl(v,Uo),v=Kb(w,v,Uo)}m.memoizedProps=m.pendingProps,v===null?Sd(m):En=v}function Vc(m,v,w,O){xr=iu=null,Tt(v),gl=null,co=0;var B=v.return;try{if(dp(m,B,v,w,Fn)){ni=1,il(m,te(w,m.current)),En=null;return}}catch(V){if(B!==null)throw En=B,V;ni=1,il(m,te(w,m.current)),En=null;return}v.flags&32768?(oi||O===1?m=!0:Vs||(Fn&536870912)!==0?m=!1:(_i=m=!0,(O===2||O===3||O===6)&&(O=Gs.current,O!==null&&O.tag===13&&(O.flags|=16384))),na(v,m)):Sd(v)}function Sd(m){var v=m;do{if((v.flags&32768)!==0){na(v,_i);return}m=v.return;var w=Jb(v.alternate,v,Uo);if(w!==null){En=w;return}if(v=v.sibling,v!==null){En=v;return}En=v=m}while(v!==null);ni===0&&(ni=5)}function na(m,v){do{var w=e2(m.alternate,m);if(w!==null){w.flags&=32767,En=w;return}if(w=m.return,w!==null&&(w.flags|=32768,w.subtreeFlags=0,w.deletions=null),!v&&(m=m.sibling,m!==null)){En=m;return}En=m=w}while(m!==null);ni=6,En=null}function Gi(m,v,w,O,B,V,le,Se,Ve,gt){var Pt=hn.T,qt=$r();try{Na(2),hn.T=null,Jn(m,v,w,O,qt,B,V,le,Se,Ve,gt)}finally{hn.T=Pt,Na(qt)}}function Jn(m,v,w,O,B,V,le,Se){do ia();while(lc!==null);if((cn&6)!==0)throw Error(r(327));var Ve=m.finishedWork;if(O=m.finishedLanes,Ve===null)return null;if(m.finishedWork=null,m.finishedLanes=0,Ve===m.current)throw Error(r(177));m.callbackNode=null,m.callbackPriority=0,m.cancelPendingCommit=null;var gt=Ve.lanes|Ve.childLanes;if(gt|=fh,G(m,O,gt,V,le,Se),m===qn&&(En=qn=null,Fn=0),(Ve.subtreeFlags&10256)===0&&(Ve.flags&10256)===0||ho||(ho=!0,rm=gt,of=w,Md(Xp,function(){return ia(),null})),w=(Ve.flags&15990)!==0,(Ve.subtreeFlags&15990)!==0||w?(w=hn.T,hn.T=null,V=$r(),Na(2),le=cn,cn|=4,$f(m,Ve),Lc(Ve,m),Vv(m.containerInfo),m.current=Ve,bp(m,Ve.alternate,Ve),P2(),cn=le,Na(V),hn.T=w):m.current=Ve,ho?(ho=!1,lc=m,sf=O):Xl(m,gt),gt=m.pendingLanes,gt===0&&(Ws=null),k(Ve.stateNode),nt(m),v!==null)for(B=m.onRecoverableError,Ve=0;Ve<v.length;Ve++)gt=v[Ve],B(gt.value,{componentStack:gt.stack});return(sf&3)!==0&&ia(),gt=m.pendingLanes,(O&4194218)!==0&&(gt&42)!==0?m===Za?lf++:(lf=0,Za=m):lf=0,Ae(0),null}function Xl(m,v){(m.pooledCacheLanes&=v)===0&&(v=m.pooledCache,v!=null&&(m.pooledCache=null,Gf(v)))}function ia(){if(lc!==null){var m=lc,v=rm;rm=0;var w=Y(sf),O=32>w?32:w;w=hn.T;var B=$r();try{if(Na(O),hn.T=null,lc===null)var V=!1;else{O=of,of=null;var le=lc,Se=sf;if(lc=null,sf=0,(cn&6)!==0)throw Error(r(331));var Ve=cn;if(cn|=4,xd(le.current),_p(le,le.current,Se,O),cn=Ve,Ae(0,!1),ds&&typeof ds.onPostCommitFiberRoot=="function")try{ds.onPostCommitFiberRoot(ch,le)}catch{}V=!0}return V}finally{Na(B),hn.T=w,Xl(m,v)}}return!1}function Cp(m,v,w){v=te(w,v),v=Co(m.stateNode,v,2),m=qe(m,v,2),m!==null&&(F(m,2),nt(m))}function $n(m,v,w){if(m.tag===3)Cp(m,m,w);else for(;v!==null;){if(v.tag===3){Cp(v,m,w);break}else if(v.tag===1){var O=v.stateNode;if(typeof v.type.getDerivedStateFromError=="function"||typeof O.componentDidCatch=="function"&&(Ws===null||!Ws.has(O))){m=te(w,m),w=rl(2),O=qe(v,w,2),O!==null&&(Xr(w,O,v,m),F(O,2),nt(O));break}}v=v.return}}function Rp(m,v,w){var O=m.pingCache;if(O===null){O=m.pingCache=new Yn;var B=new Set;O.set(v,B)}else B=O.get(v),B===void 0&&(B=new Set,O.set(v,B));B.has(w)||(sc=!0,B.add(w),m=s2.bind(null,m,v,w),v.then(m,m))}function s2(m,v,w){var O=m.pingCache;O!==null&&O.delete(v),m.pingedLanes|=m.suspendedLanes&w,m.warmLanes&=~w,qn===m&&(Fn&w)===w&&(ni===4||ni===3&&(Fn&62914560)===Fn&&300>ga()-yl?(cn&2)===0&&jo(m,0):Ia|=w,oc===Fn&&(oc=0)),nt(m)}function qu(m,v){v===0&&(v=I()),m=He(m,v),m!==null&&(F(m,v),nt(m))}function Wu(m){var v=m.memoizedState,w=0;v!==null&&(w=v.retryLane),qu(m,w)}function Dv(m,v){var w=0;switch(m.tag){case 13:var O=m.stateNode,B=m.memoizedState;B!==null&&(w=B.retryLane);break;case 19:O=m.stateNode;break;case 22:O=m.stateNode._retryCache;break;default:throw Error(r(314))}O!==null&&O.delete(v),qu(m,w)}function Md(m,v){return lh(m,v)}function Pv(m,v,w,O){this.tag=m,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=v,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=O,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $l(m){return m=m.prototype,!(!m||!m.isReactComponent)}function ja(m,v){var w=m.alternate;return w===null?(w=n(m.tag,v,m.key,m.mode),w.elementType=m.elementType,w.type=m.type,w.stateNode=m.stateNode,w.alternate=m,m.alternate=w):(w.pendingProps=v,w.type=m.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=m.flags&31457280,w.childLanes=m.childLanes,w.lanes=m.lanes,w.child=m.child,w.memoizedProps=m.memoizedProps,w.memoizedState=m.memoizedState,w.updateQueue=m.updateQueue,v=m.dependencies,w.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext},w.sibling=m.sibling,w.index=m.index,w.ref=m.ref,w.refCleanup=m.refCleanup,w}function Yl(m,v){m.flags&=31457282;var w=m.alternate;return w===null?(m.childLanes=0,m.lanes=v,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=w.childLanes,m.lanes=w.lanes,m.child=w.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=w.memoizedProps,m.memoizedState=w.memoizedState,m.updateQueue=w.updateQueue,m.type=w.type,v=w.dependencies,m.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext}),m}function ao(m,v,w,O,B,V){var le=0;if(O=m,typeof m=="function")$l(m)&&(le=1);else if(typeof m=="string")le=Is&&ma?lx(m,w,aa.current)?26:sh(m)?27:5:Is?lx(m,w,aa.current)?26:5:ma&&sh(m)?27:5;else e:switch(m){case nh:return Zl(w.children,B,V,v);case zv:le=8,B|=24;break;case kv:return m=n(12,w,v,B|2),m.elementType=kv,m.lanes=V,m;case Np:return m=n(13,w,v,B),m.elementType=Np,m.lanes=V,m;case Wc:return m=n(19,w,v,B),m.elementType=Wc,m.lanes=V,m;case wd:return jp(w,B,V,v);default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case c2:case ul:le=10;break e;case qc:le=9;break e;case ih:le=11;break e;case Td:le=14;break e;case Oo:le=16,O=null;break e}le=29,w=Error(r(130,m===null?"null":typeof m,"")),O=null}return v=n(le,w,v,B),v.elementType=m,v.type=O,v.lanes=V,v}function Zl(m,v,w,O){return m=n(7,m,O,v),m.lanes=w,m}function jp(m,v,w,O){m=n(22,m,O,v),m.elementType=wd,m.lanes=w;var B={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var V=B._current;if(V===null)throw Error(r(456));if((B._pendingVisibility&2)===0){var le=He(V,2);le!==null&&(B._pendingVisibility|=2,Ra(le,V,2))}},attach:function(){var V=B._current;if(V===null)throw Error(r(456));if((B._pendingVisibility&2)!==0){var le=He(V,2);le!==null&&(B._pendingVisibility&=-3,Ra(le,V,2))}}};return m.stateNode=B,m}function Hc(m,v,w){return m=n(6,m,null,v),m.lanes=w,m}function th(m,v,w){return v=n(4,m.children!==null?m.children:[],m.key,v),v.lanes=w,v.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},v}function Xu(m,v,w,O,B,V,le,Se){this.tag=1,this.containerInfo=m,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ku,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=L(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=L(0),this.hiddenUpdates=L(null),this.identifierPrefix=O,this.onUncaughtError=B,this.onCaughtError=V,this.onRecoverableError=le,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Se,this.incompleteTransitions=new Map}function ra(m,v,w,O,B,V,le,Se,Ve,gt,Pt,qt){return m=new Xu(m,v,w,le,Se,Ve,gt,qt),v=1,V===!0&&(v|=24),V=n(3,null,null,v),m.current=V,V.stateNode=m,v=mp(),v.refCount++,m.pooledCache=v,v.refCount++,V.memoizedState={element:O,isDehydrated:w,cache:v},Dt(V),m}function _d(m){return m?(m=Ju,m):Ju}function Iv(m){var v=m._reactInternals;if(v===void 0)throw typeof m.render=="function"?Error(r(188)):(m=Object.keys(m).join(","),Error(r(268,m)));return m=x(v),m=m!==null?b(m):null,m===null?null:rh(m.stateNode)}function o2(m,v,w,O,B,V){B=_d(B),O.context===null?O.context=B:O.pendingContext=B,O=We(v),O.payload={element:w},V=V===void 0?null:V,V!==null&&(O.callback=V),w=qe(m,O,v),w!==null&&(Ra(w,m,v),dt(w,m,v))}function l2(m,v){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var w=m.retryLane;m.retryLane=w!==0&&w<v?w:v}}function Uv(m,v){l2(m,v),(m=m.alternate)&&l2(m,v)}var ln={},Lv=Zg(),da=Fq(),$u=Object.assign,Bv=Symbol.for("react.element"),Kl=Symbol.for("react.transitional.element"),No=Symbol.for("react.portal"),nh=Symbol.for("react.fragment"),zv=Symbol.for("react.strict_mode"),kv=Symbol.for("react.profiler"),c2=Symbol.for("react.provider"),qc=Symbol.for("react.consumer"),ul=Symbol.for("react.context"),ih=Symbol.for("react.forward_ref"),Np=Symbol.for("react.suspense"),Wc=Symbol.for("react.suspense_list"),Td=Symbol.for("react.memo"),Oo=Symbol.for("react.lazy"),wd=Symbol.for("react.offscreen"),u2=Symbol.for("react.memo_cache_sentinel"),Fv=Symbol.iterator,Yu=Symbol.for("react.client.reference"),hn=Lv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Op,Gv,Xc=!1,$c=Array.isArray,Dp=e.rendererVersion,Ad=e.rendererPackageName,Ed=e.extraDevToolsConfig,rh=e.getPublicInstance,Zu=e.getRootHostContext,f2=e.getChildHostContext,Yc=e.prepareForCommit,Vv=e.resetAfterCommit,Hv=e.createInstance,fl=e.appendInitialChild,Ql=e.finalizeInitialChildren,Zc=e.shouldSetTextContent,Pp=e.createTextInstance,qv=e.scheduleTimeout,Cd=e.cancelTimeout,Ku=e.noTimeout,hl=e.isPrimaryRenderer;e.warnsIfNotActing;var pa=e.supportsMutation,Ds=e.supportsPersistence,Xa=e.supportsHydration,Wv=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var Xv=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Na=e.setCurrentUpdatePriority,$r=e.getCurrentUpdatePriority,so=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var Kc=e.shouldAttemptEagerTransition,$v=e.detachDeletedInstance;e.requestPostPaintCallback;var h2=e.maySuspendCommit,Jl=e.preloadInstance,Ps=e.startSuspendingCommit,pr=e.suspendInstance,Ip=e.waitForCommitToBeReady,fs=e.NotPendingTransition,xn=e.HostTransitionContext,Ni=e.resetFormInstance;e.bindToConsole;var Lr=e.supportsMicrotasks,Up=e.scheduleMicrotask,dl=e.supportsTestSelectors,Qu=e.findFiberRoot,Lp=e.getBoundingRect,Rd=e.getTextContent,pl=e.isHiddenSubtree,ww=e.matchAccessibilityRole,mr=e.setFocusIfFocusable,Yv=e.setupIntersectionObserver,Zv=e.appendChild,d2=e.appendChildToContainer,p2=e.commitTextUpdate,Aw=e.commitMount,Kv=e.commitUpdate,Qv=e.insertBefore,Jv=e.insertInContainerBefore,$a=e.removeChild,Ar=e.removeChildFromContainer,jd=e.resetTextContent,Nd=e.hideInstance,Bp=e.hideTextInstance,ex=e.unhideInstance,ec=e.unhideTextInstance,zp=e.clearContainer,tx=e.cloneInstance,kp=e.createContainerChildSet,nx=e.appendChildToContainerChildSet,m2=e.finalizeContainerChildren,ix=e.replaceContainerChildren,rx=e.cloneHiddenInstance,ax=e.cloneHiddenTextInstance,Fp=e.isSuspenseInstancePending,Od=e.isSuspenseInstanceFallback,g2=e.getSuspenseInstanceFallbackErrorDetails,Ew=e.registerSuspenseInstanceRetry,v2=e.canHydrateFormStateMarker,x2=e.isFormStateMarkerMatching,sx=e.getNextHydratableSibling,Gp=e.getFirstHydratableChild,y2=e.getFirstHydratableChildWithinContainer,b2=e.getFirstHydratableChildWithinSuspenseInstance,S2=e.canHydrateInstance,M2=e.canHydrateTextInstance,_2=e.canHydrateSuspenseInstance,Cw=e.hydrateInstance,T2=e.hydrateTextInstance,ah=e.hydrateSuspenseInstance,w2=e.getNextHydratableInstanceAfterSuspenseInstance,Vp=e.commitHydratedContainer,Hp=e.commitHydratedSuspenseInstance,A2=e.clearSuspenseBoundary,ox=e.clearSuspenseBoundaryFromContainer,E2=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var C2=e.validateHydratableInstance,R2=e.validateHydratableTextInstance,Is=e.supportsResources,lx=e.isHostHoistableType,qp=e.getHoistableRoot,Wp=e.getResource,cx=e.acquireResource,ux=e.releaseResource,fx=e.hydrateHoistable,hx=e.mountHoistable,dx=e.unmountHoistable,Rw=e.createHoistableInstance,px=e.prepareToCommitHoistables,j2=e.mayResourceSuspendCommit,mx=e.preloadResource,gx=e.suspendResource,ma=e.supportsSingletons,vx=e.resolveSingletonInstance,jw=e.clearSingleton,Nw=e.acquireSingletonInstance,N2=e.releaseSingletonInstance,sh=e.isHostSingletonType,Dd=[],tc=-1,Ju={},hs=Math.clz32?Math.clz32:E,Pd=Math.log,O2=Math.LN2,oh=128,Id=4194304,lh=da.unstable_scheduleCallback,Ud=da.unstable_cancelCallback,D2=da.unstable_shouldYield,P2=da.unstable_requestPaint,ga=da.unstable_now,xx=da.unstable_ImmediatePriority,I2=da.unstable_UserBlockingPriority,Xp=da.unstable_NormalPriority,$p=da.unstable_IdlePriority,U2=da.log,yx=da.unstable_setDisableYieldValue,ch=null,ds=null,Us=typeof Object.is=="function"?Object.is:ee,Yp=new WeakMap,Ki=[],gr=0,Ld=null,Bd=0,Ls=[],Bs=0,Do=null,ml=1,oo="",aa=S(null),zd=S(null),Po=S(null),uh=S(null),Oa=null,va=null,oi=!1,zs=null,lo=!1,kd=Error(r(519)),ks=[],Qc=0,fh=0,hh=null,ef=null,Fd=!1,Gd=!1,Io=!1,Jc=0,Vd=null,Zp=0,ps=0,eu=null,nc=!1,dh=!1,Hd=Object.prototype.hasOwnProperty,Ri=Error(r(460)),bx=Error(r(474)),Kp={then:function(){}},tf=null,gl=null,co=0,tu=Vn(!0),Sx=Vn(!1),vl=S(null),Fs=S(0),Gs=S(null),uo=null,Br=S(0),xl=0,Pn=null,mi=null,Er=null,fo=!1,Qi=!1,ic=!1,qd=0,vr=0,ph=null,L2=0,Qp=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},li={readContext:ha,use:he,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useLayoutEffect:dn,useInsertionEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useSyncExternalStore:dn,useId:dn};li.useCacheRefresh=dn,li.useMemoCache=dn,li.useHostTransitionStatus=dn,li.useFormState=dn,li.useActionState=dn,li.useOptimistic=dn;var zr={readContext:ha,use:he,useCallback:function(m,v){return _t().memoizedState=[m,v===void 0?null:v],m},useContext:ha,useEffect:ju,useImperativeHandle:function(m,v,w){w=w!=null?w.concat([m]):null,Ga(4194308,4,to.bind(null,v,m),w)},useLayoutEffect:function(m,v){return Ga(4194308,4,m,v)},useInsertionEffect:function(m,v){Ga(4,2,m,v)},useMemo:function(m,v){var w=_t();v=v===void 0?null:v;var O=m();if(ic){$(!0);try{m()}finally{$(!1)}}return w.memoizedState=[O,v],O},useReducer:function(m,v,w){var O=_t();if(w!==void 0){var B=w(v);if(ic){$(!0);try{w(v)}finally{$(!1)}}}else B=v;return O.memoizedState=O.baseState=B,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:B},O.queue=m,m=m.dispatch=wo.bind(null,Pn,m),[O.memoizedState,m]},useRef:function(m){var v=_t();return m={current:m},v.memoizedState=m},useState:function(m){m=Jt(m);var v=m.queue,w=Iu.bind(null,Pn,v);return v.dispatch=w,[m.memoizedState,w]},useDebugValue:_o,useDeferredValue:function(m,v){var w=_t();return no(w,m,v)},useTransition:function(){var m=Jt(!1);return m=Pu.bind(null,Pn,m.queue,!0,!1),_t().memoizedState=m,[!1,m]},useSyncExternalStore:function(m,v,w){var O=Pn,B=_t();if(oi){if(w===void 0)throw Error(r(407));w=w()}else{if(w=v(),qn===null)throw Error(r(349));(Fn&60)!==0||Lt(O,v,w)}B.memoizedState=w;var V={value:w,getSnapshot:v};return B.queue=V,ju(Vt.bind(null,O,V,m),[m]),O.flags|=2048,Ui(9,Ft.bind(null,O,V,w,v),{destroy:void 0},null),w},useId:function(){var m=_t(),v=qn.identifierPrefix;if(oi){var w=oo,O=ml;w=(O&~(1<<32-hs(O)-1)).toString(32)+w,v=":"+v+"R"+w,w=qd++,0<w&&(v+="H"+w.toString(32)),v+=":"}else w=L2++,v=":"+v+"r"+w.toString(32)+":";return m.memoizedState=v},useCacheRefresh:function(){return _t().memoizedState=zl.bind(null,Pn)}};zr.useMemoCache=Pe,zr.useHostTransitionStatus=To,zr.useFormState=Xi,zr.useActionState=Xi,zr.useOptimistic=function(m){var v=_t();v.memoizedState=v.baseState=m;var w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return v.queue=w,v=Uu.bind(null,Pn,!0,w),w.dispatch=v,[m,v]};var Da={readContext:ha,use:he,useCallback:Ou,useContext:ha,useEffect:Mo,useImperativeHandle:ua,useInsertionEffect:ud,useLayoutEffect:Nu,useMemo:Cs,useReducer:et,useRef:Fa,useState:function(){return et(be)},useDebugValue:_o,useDeferredValue:function(m,v){var w=J();return Du(w,mi.memoizedState,m,v)},useTransition:function(){var m=et(be)[0],v=J().memoizedState;return[typeof m=="boolean"?m:ve(m),v]},useSyncExternalStore:Rt,useId:Rs};Da.useCacheRefresh=Ea,Da.useMemoCache=Pe,Da.useHostTransitionStatus=To,Da.useFormState=Un,Da.useActionState=Un,Da.useOptimistic=function(m,v){var w=J();return sn(w,mi,m,v)};var nu={readContext:ha,use:he,useCallback:Ou,useContext:ha,useEffect:Mo,useImperativeHandle:ua,useInsertionEffect:ud,useLayoutEffect:Nu,useMemo:Cs,useReducer:Mt,useRef:Fa,useState:function(){return Mt(be)},useDebugValue:_o,useDeferredValue:function(m,v){var w=J();return mi===null?no(w,m,v):Du(w,mi.memoizedState,m,v)},useTransition:function(){var m=Mt(be)[0],v=J().memoizedState;return[typeof m=="boolean"?m:ve(m),v]},useSyncExternalStore:Rt,useId:Rs};nu.useCacheRefresh=Ea,nu.useMemoCache=Pe,nu.useHostTransitionStatus=To,nu.useFormState=ir,nu.useActionState=ir,nu.useOptimistic=function(m,v){var w=J();return mi!==null?sn(w,mi,m,v):(w.baseState=m,[m,w.queue.dispatch])};var Jp={isMounted:function(m){return(m=m._reactInternals)?p(m)===m:!1},enqueueSetState:function(m,v,w){m=m._reactInternals;var O=Wa(),B=We(O);B.payload=v,w!=null&&(B.callback=w),v=qe(m,B,O),v!==null&&(Ra(v,m,O),dt(v,m,O))},enqueueReplaceState:function(m,v,w){m=m._reactInternals;var O=Wa(),B=We(O);B.tag=1,B.payload=v,w!=null&&(B.callback=w),v=qe(m,B,O),v!==null&&(Ra(v,m,O),dt(v,m,O))},enqueueForceUpdate:function(m,v){m=m._reactInternals;var w=Wa(),O=We(w);O.tag=2,v!=null&&(O.callback=v),v=qe(m,O,w),v!==null&&(Ra(v,m,w),dt(v,m,w))}},Mx=typeof reportError=="function"?reportError:function(m){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var v=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof m=="object"&&m!==null&&typeof m.message=="string"?String(m.message):String(m),error:m});if(!window.dispatchEvent(v))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",m);return}console.error(m)},B2=Error(r(461)),Cr=!1,Pa={dehydrated:null,treeContext:null,retryLane:0},ms=S(null),iu=null,xr=null,z2=typeof AbortController<"u"?AbortController:function(){var m=[],v=this.signal={aborted:!1,addEventListener:function(w,O){m.push(O)}};this.abort=function(){v.aborted=!0,m.forEach(function(w){return w()})}},rc=da.unstable_scheduleCallback,nf=da.unstable_NormalPriority,Si={$$typeof:ul,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},em=hn.S;hn.S=function(m,v){typeof v=="object"&&v!==null&&typeof v.then=="function"&&Ne(m,v),em!==null&&em(m,v)};var ac=S(null),Yr=!1,or=!1,ru=!1,mh=typeof WeakSet=="function"?WeakSet:Set,yr=null,rf=!1,Rr=null,gs=!1,Ya=null,af=8192,tm={getCacheForType:function(m){var v=ha(Si),w=v.data.get(m);return w===void 0&&(w=m(),v.data.set(m,w)),w}},Wd=0,nm=1,im=2,ti=3,Mi=4;if(typeof Symbol=="function"&&Symbol.for){var In=Symbol.for;Wd=In("selector.component"),nm=In("selector.has_pseudo_class"),im=In("selector.role"),ti=In("selector.test_id"),Mi=In("selector.text")}var Yn=typeof WeakMap=="function"?WeakMap:Map,cn=0,qn=null,En=null,Fn=0,Oi=0,jr=null,_i=!1,Vs=!1,sc=!1,Uo=0,ni=0,Hs=0,Lo=0,Ia=0,vs=0,oc=0,gh=null,qs=null,vh=!1,yl=0,lr=1/0,Bo=null,Ws=null,ho=!1,lc=null,sf=0,rm=0,of=null,lf=0,Za=null;return ln.attemptContinuousHydration=function(m){if(m.tag===13){var v=He(m,67108864);v!==null&&Ra(v,m,67108864),Uv(m,67108864)}},ln.attemptHydrationAtCurrentPriority=function(m){if(m.tag===13){var v=Wa(),w=He(m,v);w!==null&&Ra(w,m,v),Uv(m,v)}},ln.attemptSynchronousHydration=function(m){switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=j(m.pendingLanes);if(v!==0){for(m.pendingLanes|=2,m.entangledLanes|=2;v;){var w=1<<31-hs(v);m.entanglements[1]|=w,v&=~w}nt(m),(cn&6)===0&&(lr=ga()+500,Ae(0))}}break;case 13:v=He(m,2),v!==null&&Ra(v,m,2),Nv(),Uv(m,2)}},ln.batchedUpdates=function(m,v){return m(v)},ln.createComponentSelector=function(m){return{$$typeof:Wd,value:m}},ln.createContainer=function(m,v,w,O,B,V,le,Se,Ve,gt){return ra(m,v,!1,null,w,O,V,le,Se,Ve,gt,null)},ln.createHasPseudoClassSelector=function(m){return{$$typeof:nm,value:m}},ln.createHydrationContainer=function(m,v,w,O,B,V,le,Se,Ve,gt,Pt,qt,$t){return m=ra(w,O,!0,m,B,V,Se,Ve,gt,Pt,qt,$t),m.context=_d(null),w=m.current,O=Wa(),B=We(O),B.callback=v??null,qe(w,B,O),m.current.lanes=O,F(m,O),nt(m),m},ln.createPortal=function(m,v,w){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:No,key:O==null?null:""+O,children:m,containerInfo:v,implementation:w}},ln.createRoleSelector=function(m){return{$$typeof:im,value:m}},ln.createTestNameSelector=function(m){return{$$typeof:ti,value:m}},ln.createTextSelector=function(m){return{$$typeof:Mi,value:m}},ln.defaultOnCaughtError=function(m){console.error(m)},ln.defaultOnRecoverableError=function(m){Mx(m)},ln.defaultOnUncaughtError=function(m){Mx(m)},ln.deferredUpdates=function(m){var v=hn.T,w=$r();try{return Na(32),hn.T=null,m()}finally{Na(w),hn.T=v}},ln.discreteUpdates=function(m,v,w,O,B){var V=hn.T,le=$r();try{return Na(2),hn.T=null,m(v,w,O,B)}finally{Na(le),hn.T=V,cn===0&&(lr=ga()+500)}},ln.findAllNodes=qa,ln.findBoundingRects=function(m,v){if(!dl)throw Error(r(363));v=qa(m,v),m=[];for(var w=0;w<v.length;w++)m.push(Lp(v[w]));for(v=m.length-1;0<v;v--){w=m[v];for(var O=w.x,B=O+w.width,V=w.y,le=V+w.height,Se=v-1;0<=Se;Se--)if(v!==Se){var Ve=m[Se],gt=Ve.x,Pt=gt+Ve.width,qt=Ve.y,$t=qt+Ve.height;if(O>=gt&&V>=qt&&B<=Pt&&le<=$t){m.splice(v,1);break}else if(O!==gt||w.width!==Ve.width||$t<V||qt>le){if(!(V!==qt||w.height!==Ve.height||Pt<O||gt>B)){gt>O&&(Ve.width+=gt-O,Ve.x=O),Pt<B&&(Ve.width=B-gt),m.splice(v,1);break}}else{qt>V&&(Ve.height+=qt-V,Ve.y=V),$t<le&&(Ve.height=le-qt),m.splice(v,1);break}}}return m},ln.findHostInstance=Iv,ln.findHostInstanceWithNoPortals=function(m){return m=x(m),m=m!==null?M(m):null,m===null?null:rh(m.stateNode)},ln.findHostInstanceWithWarning=function(m){return Iv(m)},ln.flushPassiveEffects=ia,ln.flushSyncFromReconciler=function(m){var v=cn;cn|=1;var w=hn.T,O=$r();try{if(Na(2),hn.T=null,m)return m()}finally{Na(O),hn.T=w,cn=v,(cn&6)===0&&Ae(0)}},ln.flushSyncWork=Nv,ln.focusWithin=function(m,v){if(!dl)throw Error(r(363));for(m=wp(m),v=r2(m,v),v=Array.from(v),m=0;m<v.length;){var w=v[m++],O=w.tag;if(!pl(w)){if((O===5||O===26||O===27)&&mr(w.stateNode))return!0;for(w=w.child;w!==null;)v.push(w),w=w.sibling}}return!1},ln.getFindAllNodesFailureDescription=function(m,v){if(!dl)throw Error(r(363));var w=0,O=[];m=[wp(m),0];for(var B=0;B<m.length;){var V=m[B++],le=V.tag,Se=m[B++],Ve=v[Se];if((le!==5&&le!==26&&le!==27||!pl(V))&&(Jf(V,Ve)&&(O.push(Gc(Ve)),Se++,Se>w&&(w=Se)),Se<v.length))for(V=V.child;V!==null;)m.push(V,Se),V=V.sibling}if(w<v.length){for(m=[];w<v.length;w++)m.push(Gc(v[w]));return`findAllNodes was able to match part of the selector:
  `+(O.join(" > ")+`

No matching component was found for:
  `)+m.join(" > ")}return null},ln.getPublicRootInstance=function(m){if(m=m.current,!m.child)return null;switch(m.child.tag){case 27:case 5:return rh(m.child.stateNode);default:return m.child.stateNode}},ln.injectIntoDevTools=function(){var m={bundleType:0,version:Dp,rendererPackageName:Ad,currentDispatcherRef:hn,findFiberByHostInstance:Wv,reconcilerVersion:"19.0.0"};if(Ed!==null&&(m.rendererConfig=Ed),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")m=!1;else{var v=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(v.isDisabled||!v.supportsFiber)m=!0;else{try{ch=v.inject(m),ds=v}catch{}m=!!v.checkDCE}}return m},ln.isAlreadyRendering=function(){return!1},ln.observeVisibleRects=function(m,v,w,O){if(!dl)throw Error(r(363));m=qa(m,v);var B=Yv(m,w,O).disconnect;return{disconnect:function(){B()}}},ln.shouldError=function(){return null},ln.shouldSuspend=function(){return!1},ln.startHostTransition=function(m,v,w,O){if(m.tag!==5)throw Error(r(476));var B=Nc(m).queue;Pu(m,B,v,fs,w===null?i:function(){var V=Nc(m).next.queue;return io(m,V,{},Wa()),w(O)})},ln.updateContainer=function(m,v,w,O){var B=v.current,V=Wa();return o2(B,V,m,v,w,O),V},ln.updateContainerSync=function(m,v,w,O){return v.tag===0&&ia(),o2(v.current,2,m,v,w,O),2},ln},t.exports.default=t.exports,Object.defineProperty(t.exports,"__esModule",{value:!0})})(sE)),sE.exports}var dL;function Aoe(){return dL||(dL=1,aE.exports=woe()),aE.exports}var Eoe=Aoe();const Coe=ki(Eoe);var pL=Fq();function SD(t,e,n){if(!t)return;if(n(t)===!0)return t;let i=e?t.return:t.child;for(;i;){const r=SD(i,e,n);if(r)return r;i=e?null:i.sibling}}function Gq(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const MD=Gq(z.createContext(null));class Vq extends z.Component{render(){return z.createElement(MD.Provider,{value:this._reactInternals},this.props.children)}}function Hq(){const t=z.useContext(MD);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=z.useId();return z.useMemo(()=>{for(const n of[t,t==null?void 0:t.alternate]){if(!n)continue;const i=SD(n,!1,r=>{let a=r.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(i)return i}},[t,e])}const Roe=Symbol.for("react.context"),joe=t=>t!==null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===Roe;function Noe(){const t=Hq(),[e]=z.useState(()=>new Map);e.clear();let n=t;for(;n;){const i=n.type;joe(i)&&i!==MD&&!e.has(i)&&e.set(i,z.use(Gq(i))),n=n.return}return e}function Ooe(){const t=Noe();return z.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>i=>z.createElement(e,null,z.createElement(n.Provider,{...i,value:t.get(n)})),e=>z.createElement(Vq,{...e})),[t])}function qq(t){let e=t.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Wq=t=>t&&t.isOrthographicCamera,Doe=t=>t&&t.hasOwnProperty("current"),Poe=t=>t!=null&&(typeof t=="string"||typeof t=="number"||t.isColor),jb=((t,e)=>typeof window<"u"&&(((t=window.document)==null?void 0:t.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?z.useLayoutEffect:z.useEffect;function _D(t){const e=z.useRef(t);return jb(()=>void(e.current=t),[t]),e}function Ioe(){const t=Hq(),e=Ooe();return z.useMemo(()=>({children:n})=>{const r=!!SD(t,!0,a=>a.type===z.StrictMode)?z.StrictMode:z.Fragment;return c.jsx(r,{children:c.jsx(e,{children:n})})},[t,e])}function Uoe({set:t}){return jb(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}const Loe=(t=>(t=class extends z.Component{constructor(...n){super(...n),this.state={error:!1}}componentDidCatch(n){this.props.set(n)}render(){return this.state.error?null:this.props.children}},t.getDerivedStateFromError=()=>({error:!0}),t))();function Xq(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}function Om(t){var e;return(e=t.__r3f)==null?void 0:e.root.getState()}const br={obj:t=>t===Object(t)&&!br.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,nul:t=>t===null,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:i="reference",strict:r=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(br.str(t)||br.num(t)||br.boo(t))return t===e;const a=br.obj(t);if(a&&i==="reference")return t===e;const s=br.arr(t);if(s&&n==="reference")return t===e;if((s||a)&&t===e)return!0;let o;for(o in t)if(!(o in e))return!1;if(a&&n==="shallow"&&i==="shallow"){for(o in r?e:t)if(!br.equ(t[o],e[o],{strict:r,objects:"reference"}))return!1}else for(o in r?e:t)if(t[o]!==e[o])return!1;if(br.und(o)){if(s&&t.length===0&&e.length===0||a&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function Boe(t){const e={nodes:{},materials:{},meshes:{}};return t&&t.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material),n.isMesh&&!e.meshes[n.name]&&(e.meshes[n.name]=n)}),e}function zoe(t){t.type!=="Scene"&&(t.dispose==null||t.dispose());for(const e in t){const n=t[e];(n==null?void 0:n.type)!=="Scene"&&(n==null||n.dispose==null||n.dispose())}}const $q=["children","key","ref"];function koe(t){const e={};for(const n in t)$q.includes(n)||(e[n]=t[n]);return e}function V_(t,e,n,i){const r=t;let a=r==null?void 0:r.__r3f;return a||(a={root:e,type:n,parent:null,children:[],props:koe(i),object:r,eventCount:0,handlers:{},isHidden:!1},r&&(r.__r3f=a)),a}function x1(t,e){if(!e.includes("-"))return{root:t,key:e,target:t[e]};if(e in t)return{root:t,key:e,target:t[e]};let n=t;const i=e.split("-");for(const r of i){if(typeof n!="object"||n===null){if(n!==void 0){const a=i.slice(i.indexOf(r)).join("-");return{root:n,key:a,target:void 0}}return{root:t,key:e,target:void 0}}e=r,t=n,n=n[e]}return{root:t,key:e,target:n}}const mL=/-\d+$/;function H_(t,e){if(br.str(e.props.attach)){if(mL.test(e.props.attach)){const r=e.props.attach.replace(mL,""),{root:a,key:s}=x1(t.object,r);Array.isArray(a[s])||(a[s]=[])}const{root:n,key:i}=x1(t.object,e.props.attach);e.previousAttach=n[i],n[i]=e.object}else br.fun(e.props.attach)&&(e.previousAttach=e.props.attach(t.object,e.object))}function q_(t,e){if(br.str(e.props.attach)){const{root:n,key:i}=x1(t.object,e.props.attach),r=e.previousAttach;r===void 0?delete n[i]:n[i]=r}else e.previousAttach==null||e.previousAttach(t.object,e.object);delete e.previousAttach}const Lj=[...$q,"args","dispose","attach","object","onUpdate","dispose"],gL=new Map;function Foe(t){let e=gL.get(t.constructor);try{e||(e=new t.constructor,gL.set(t.constructor,e))}catch{}return e}function Goe(t,e){const n={};for(const i in e)if(!Lj.includes(i)&&!br.equ(e[i],t.props[i])){n[i]=e[i];for(const r in e)r.startsWith(`${i}-`)&&(n[r]=e[r])}for(const i in t.props){if(Lj.includes(i)||e.hasOwnProperty(i))continue;const{root:r,key:a}=x1(t.object,i);if(r.constructor&&r.constructor.length===0){const s=Foe(r);br.und(s)||(n[a]=s[a])}else n[a]=0}return n}const Voe=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],Hoe=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function du(t,e){var n;const i=t.__r3f,r=i&&qq(i).getState(),a=i==null?void 0:i.eventCount;for(const o in e){let l=e[o];if(Lj.includes(o))continue;if(i&&Hoe.test(o)){typeof l=="function"?i.handlers[o]=l:delete i.handlers[o],i.eventCount=Object.keys(i.handlers).length;continue}if(l===void 0)continue;let{root:u,key:h,target:p}=x1(t,o);if(p===void 0&&(typeof u!="object"||u===null))throw Error(`R3F: Cannot set "${o}". Ensure it is an object before setting "${h}".`);if(p instanceof xg&&l instanceof xg)p.mask=l.mask;else if(p instanceof zt&&Poe(l))p.set(l);else if(p!==null&&typeof p=="object"&&typeof p.set=="function"&&typeof p.copy=="function"&&l!=null&&l.constructor&&p.constructor===l.constructor)p.copy(l);else if(p!==null&&typeof p=="object"&&typeof p.set=="function"&&Array.isArray(l))typeof p.fromArray=="function"?p.fromArray(l):p.set(...l);else if(p!==null&&typeof p=="object"&&typeof p.set=="function"&&typeof l=="number")typeof p.setScalar=="function"?p.setScalar(l):p.set(l);else{var s;u[h]=l,r&&!r.linear&&Voe.includes(h)&&(s=u[h])!=null&&s.isTexture&&u[h].format===Sr&&u[h].type===nr&&(u[h].colorSpace=Kn)}}if(i!=null&&i.parent&&r!=null&&r.internal&&(n=i.object)!=null&&n.isObject3D&&a!==i.eventCount){const o=i.object,l=r.internal.interaction.indexOf(o);l>-1&&r.internal.interaction.splice(l,1),i.eventCount&&o.raycast!==null&&r.internal.interaction.push(o)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&tv(i),t}function tv(t){var e;if(!t.parent)return;t.props.onUpdate==null||t.props.onUpdate(t.object);const n=(e=t.root)==null||e.getState==null?void 0:e.getState();n&&n.internal.frames===0&&n.invalidate()}function Yq(t,e){t.manual||(Wq(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix())}const Zs=t=>t==null?void 0:t.isObject3D;function YS(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function Zq(t,e,n,i){const r=n.get(e);r&&(n.delete(e),n.size===0&&(t.delete(i),r.target.releasePointerCapture(i)))}function qoe(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(i=>i!==e),n.initialHits=n.initialHits.filter(i=>i!==e),n.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&n.hovered.delete(r)}),n.capturedMap.forEach((i,r)=>{Zq(n.capturedMap,e,i,r)})}function Woe(t){function e(l){const{internal:u}=t.getState(),h=l.offsetX-u.initialClick[0],p=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(h*h+p*p))}function n(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(h=>{var p;return(p=u.__r3f)==null?void 0:p.handlers["onPointer"+h]}))}function i(l,u){const h=t.getState(),p=new Set,g=[],x=u?u(h.internal.interaction):h.internal.interaction;for(let T=0;T<x.length;T++){const A=Om(x[T]);A&&(A.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(l,h);function b(T){const A=Om(T);if(!A||!A.events.enabled||A.raycaster.camera===null)return[];if(A.raycaster.camera===void 0){var E;A.events.compute==null||A.events.compute(l,A,(E=A.previousRoot)==null?void 0:E.getState()),A.raycaster.camera===void 0&&(A.raycaster.camera=null)}return A.raycaster.camera?A.raycaster.intersectObject(T,!0):[]}let M=x.flatMap(b).sort((T,A)=>{const E=Om(T.object),j=Om(A.object);return!E||!j?T.distance-A.distance:j.events.priority-E.events.priority||T.distance-A.distance}).filter(T=>{const A=YS(T);return p.has(A)?!1:(p.add(A),!0)});h.events.filter&&(M=h.events.filter(M,h));for(const T of M){let A=T.object;for(;A;){var S;(S=A.__r3f)!=null&&S.eventCount&&g.push({...T,eventObject:A}),A=A.parent}}if("pointerId"in l&&h.internal.capturedMap.has(l.pointerId))for(let T of h.internal.capturedMap.get(l.pointerId).values())p.has(YS(T.intersection))||g.push(T.intersection);return g}function r(l,u,h,p){if(l.length){const g={stopped:!1};for(const x of l){let b=Om(x.object);if(b||x.object.traverseAncestors(M=>{const S=Om(M);if(S)return b=S,!1}),b){const{raycaster:M,pointer:S,camera:T,internal:A}=b,E=new se(S.x,S.y,0).unproject(T),j=I=>{var L,F;return(L=(F=A.capturedMap.get(I))==null?void 0:F.has(x.eventObject))!=null?L:!1},R=I=>{const L={intersection:x,target:u.target};A.capturedMap.has(I)?A.capturedMap.get(I).set(x.eventObject,L):A.capturedMap.set(I,new Map([[x.eventObject,L]])),u.target.setPointerCapture(I)},C=I=>{const L=A.capturedMap.get(I);L&&Zq(A.capturedMap,x.eventObject,L,I)};let D={};for(let I in u){let L=u[I];typeof L!="function"&&(D[I]=L)}let U={...x,...D,pointer:S,intersections:l,stopped:g.stopped,delta:h,unprojectedPoint:E,ray:M.ray,camera:T,stopPropagation(){const I="pointerId"in u&&A.capturedMap.get(u.pointerId);if((!I||I.has(x.eventObject))&&(U.stopped=g.stopped=!0,A.hovered.size&&Array.from(A.hovered.values()).find(L=>L.eventObject===x.eventObject))){const L=l.slice(0,l.indexOf(x));a([...L,x])}},target:{hasPointerCapture:j,setPointerCapture:R,releasePointerCapture:C},currentTarget:{hasPointerCapture:j,setPointerCapture:R,releasePointerCapture:C},nativeEvent:u};if(p(U),g.stopped===!0)break}}}return l}function a(l){const{internal:u}=t.getState();for(const h of u.hovered.values())if(!l.length||!l.find(p=>p.object===h.object&&p.index===h.index&&p.instanceId===h.instanceId)){const g=h.eventObject.__r3f;if(u.hovered.delete(YS(h)),g!=null&&g.eventCount){const x=g.handlers,b={...h,intersections:l};x.onPointerOut==null||x.onPointerOut(b),x.onPointerLeave==null||x.onPointerLeave(b)}}}function s(l,u){for(let h=0;h<u.length;h++){const p=u[h].__r3f;p==null||p.handlers.onPointerMissed==null||p.handlers.onPointerMissed(l)}}function o(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return u=>{const{internal:h}=t.getState();"pointerId"in u&&h.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(u.pointerId)&&(h.capturedMap.delete(u.pointerId),a([]))})}}return function(h){const{onPointerMissed:p,internal:g}=t.getState();g.lastEvent.current=h;const x=l==="onPointerMove",b=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",S=i(h,x?n:void 0),T=b?e(h):0;l==="onPointerDown"&&(g.initialClick=[h.offsetX,h.offsetY],g.initialHits=S.map(E=>E.eventObject)),b&&!S.length&&T<=2&&(s(h,g.interaction),p&&p(h)),x&&a(S);function A(E){const j=E.eventObject,R=j.__r3f;if(!(R!=null&&R.eventCount))return;const C=R.handlers;if(x){if(C.onPointerOver||C.onPointerEnter||C.onPointerOut||C.onPointerLeave){const D=YS(E),U=g.hovered.get(D);U?U.stopped&&E.stopPropagation():(g.hovered.set(D,E),C.onPointerOver==null||C.onPointerOver(E),C.onPointerEnter==null||C.onPointerEnter(E))}C.onPointerMove==null||C.onPointerMove(E)}else{const D=C[l];D?(!b||g.initialHits.includes(j))&&(s(h,g.interaction.filter(U=>!g.initialHits.includes(U))),D(E)):b&&g.initialHits.includes(j)&&s(h,g.interaction.filter(U=>!g.initialHits.includes(U)))}}r(S,h,T,A)}}return{handlePointer:o}}const vL=t=>!!(t!=null&&t.render),TD=z.createContext(null),Xoe=(t,e)=>{const n=Lq((o,l)=>{const u=new se,h=new se,p=new se;function g(T=l().camera,A=h,E=l().size){const{width:j,height:R,top:C,left:D}=E,U=j/R;A.isVector3?p.copy(A):p.set(...A);const I=T.getWorldPosition(u).distanceTo(p);if(Wq(T))return{width:j/T.zoom,height:R/T.zoom,top:C,left:D,factor:1,distance:I,aspect:U};{const L=T.fov*Math.PI/180,F=2*Math.tan(L/2)*I,G=F*(j/R);return{width:G,height:F,top:C,left:D,factor:j/G,distance:I,aspect:U}}}let x;const b=T=>o(A=>({performance:{...A.performance,current:T}})),M=new Ye;return{set:o,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(T=1)=>t(l(),T),advance:(T,A)=>e(T,A,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new mD,pointer:M,mouse:M,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const T=l();x&&clearTimeout(x),T.performance.current!==T.performance.min&&b(T.performance.min),x=setTimeout(()=>b(l().performance.max),T.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:g},setEvents:T=>o(A=>({...A,events:{...A.events,...T}})),setSize:(T,A,E=0,j=0)=>{const R=l().camera,C={width:T,height:A,top:E,left:j};o(D=>({size:C,viewport:{...D.viewport,...g(R,h,C)}}))},setDpr:T=>o(A=>{const E=Xq(T);return{viewport:{...A.viewport,dpr:E,initialDpr:A.viewport.initialDpr||E}}}),setFrameloop:(T="always")=>{const A=l().clock;A.stop(),A.elapsedTime=0,T!=="never"&&(A.start(),A.elapsedTime=0),o(()=>({frameloop:T}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:z.createRef(),active:!1,frames:0,priority:0,subscribe:(T,A,E)=>{const j=l().internal;return j.priority=j.priority+(A>0?1:0),j.subscribers.push({ref:T,priority:A,store:E}),j.subscribers=j.subscribers.sort((R,C)=>R.priority-C.priority),()=>{const R=l().internal;R!=null&&R.subscribers&&(R.priority=R.priority-(A>0?1:0),R.subscribers=R.subscribers.filter(C=>C.ref!==T))}}}}}),i=n.getState();let r=i.size,a=i.viewport.dpr,s=i.camera;return n.subscribe(()=>{const{camera:o,size:l,viewport:u,gl:h,set:p}=n.getState();if(l.width!==r.width||l.height!==r.height||u.dpr!==a){r=l,a=u.dpr,Yq(o,l),u.dpr>0&&h.setPixelRatio(u.dpr);const g=typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(l.width,l.height,g)}o!==s&&(s=o,p(g=>({viewport:{...g.viewport,...g.viewport.getCurrentViewport(o)}})))}),n.subscribe(o=>t(o)),n};function wD(){const t=z.useContext(TD);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function hi(t=n=>n,e){return wD()(t,e)}function It(t,e=0){const n=wD(),i=n.getState().internal.subscribe,r=_D(t);return jb(()=>i(r,e,n),[e,i,n]),null}const xL=new WeakMap,$oe=t=>{var e;return typeof t=="function"&&(t==null||(e=t.prototype)==null?void 0:e.constructor)===t};function Kq(t,e){return function(n,...i){let r;return $oe(n)?(r=xL.get(n),r||(r=new n,xL.set(n,r))):r=n,t&&t(r),Promise.all(i.map(a=>new Promise((s,o)=>r.load(a,l=>{Zs(l==null?void 0:l.scene)&&Object.assign(l,Boe(l.scene)),s(l)},e,l=>o(new Error(`Could not load ${a}: ${l==null?void 0:l.message}`))))))}}function Sg(t,e,n,i){const r=Array.isArray(e)?e:[e],a=kq(Kq(n,i),[t,...r],{equal:br.equ});return Array.isArray(e)?a:a[0]}Sg.preload=function(t,e,n){const i=Array.isArray(e)?e:[e];return Moe(Kq(n),[t,...i])};Sg.clear=function(t,e){const n=Array.isArray(e)?e:[e];return _oe([t,...n])};var Yoe={version:"9.4.2"};function Zoe(t){const e=Coe(t);return e.injectIntoDevTools(),e}const Qq=0,Mg={},Koe=/^three(?=[A-Z])/,PT=t=>`${t[0].toUpperCase()}${t.slice(1)}`;let Qoe=0;const Joe=t=>typeof t=="function";function IT(t){if(Joe(t)){const e=`${Qoe++}`;return Mg[e]=t,e}else Object.assign(Mg,t)}function Jq(t,e){const n=PT(t),i=Mg[n];if(t!=="primitive"&&!i)throw new Error(`R3F: ${n} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(t==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function ele(t,e,n){var i;return t=PT(t)in Mg?t:t.replace(Koe,""),Jq(t,e),t==="primitive"&&(i=e.object)!=null&&i.__r3f&&delete e.object.__r3f,V_(e.object,n,t,e)}function tle(t){if(!t.isHidden){var e;t.props.attach&&(e=t.parent)!=null&&e.object?q_(t.parent,t):Zs(t.object)&&(t.object.visible=!1),t.isHidden=!0,tv(t)}}function eW(t){if(t.isHidden){var e;t.props.attach&&(e=t.parent)!=null&&e.object?H_(t.parent,t):Zs(t.object)&&t.props.visible!==!1&&(t.object.visible=!0),t.isHidden=!1,tv(t)}}function AD(t,e,n){const i=e.root.getState();if(!(!t.parent&&t.object!==i.scene)){if(!e.object){var r,a;const s=Mg[PT(e.type)];e.object=(r=e.props.object)!=null?r:new s(...(a=e.props.args)!=null?a:[]),e.object.__r3f=e}if(du(e.object,e.props),e.props.attach)H_(t,e);else if(Zs(e.object)&&Zs(t.object)){const s=t.object.children.indexOf(n==null?void 0:n.object);if(n&&s!==-1){const o=t.object.children.indexOf(e.object);if(o!==-1){t.object.children.splice(o,1);const l=o<s?s-1:s;t.object.children.splice(l,0,e.object)}else e.object.parent=t.object,t.object.children.splice(s,0,e.object),e.object.dispatchEvent({type:"added"}),t.object.dispatchEvent({type:"childadded",child:e.object})}else t.object.add(e.object)}for(const s of e.children)AD(e,s);tv(e)}}function cE(t,e){e&&(e.parent=t,t.children.push(e),AD(t,e))}function yL(t,e,n){if(!e||!n)return;e.parent=t;const i=t.children.indexOf(n);i!==-1?t.children.splice(i,0,e):t.children.push(e),AD(t,e,n)}function tW(t){if(typeof t.dispose=="function"){const e=()=>{try{t.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():pL.unstable_scheduleCallback(pL.unstable_IdlePriority,e)}}function Bj(t,e,n){if(!e)return;e.parent=null;const i=t.children.indexOf(e);i!==-1&&t.children.splice(i,1),e.props.attach?q_(t,e):Zs(e.object)&&Zs(t.object)&&(t.object.remove(e.object),qoe(qq(e),e.object));const r=e.props.dispose!==null&&n!==!1;for(let a=e.children.length-1;a>=0;a--){const s=e.children[a];Bj(e,s,r)}e.children.length=0,delete e.object.__r3f,r&&e.type!=="primitive"&&e.object.type!=="Scene"&&tW(e.object),n===void 0&&tv(e)}function nle(t,e){for(const n of[t,t.alternate])if(n!==null)if(typeof n.ref=="function"){n.refCleanup==null||n.refCleanup();const i=n.ref(e);typeof i=="function"&&(n.refCleanup=i)}else n.ref&&(n.ref.current=e)}const $M=[];function ile(){for(const[n]of $M){const i=n.parent;if(i){n.props.attach?q_(i,n):Zs(n.object)&&Zs(i.object)&&i.object.remove(n.object);for(const r of n.children)r.props.attach?q_(n,r):Zs(r.object)&&Zs(n.object)&&n.object.remove(r.object)}n.isHidden&&eW(n),n.object.__r3f&&delete n.object.__r3f,n.type!=="primitive"&&tW(n.object)}for(const[n,i,r]of $M){n.props=i;const a=n.parent;if(a){var t,e;const s=Mg[PT(n.type)];n.object=(t=n.props.object)!=null?t:new s(...(e=n.props.args)!=null?e:[]),n.object.__r3f=n,nle(r,n.object),du(n.object,n.props),n.props.attach?H_(a,n):Zs(n.object)&&Zs(a.object)&&a.object.add(n.object);for(const o of n.children)o.props.attach?H_(n,o):Zs(o.object)&&Zs(n.object)&&n.object.add(o.object);tv(n)}}$M.length=0}const uE=()=>{},bL={};let ZS=Qq;const rle=0,ale=4,W_=Zoe({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:ele,removeChild:Bj,appendChild:cE,appendInitialChild:cE,insertBefore:yL,appendChildToContainer(t,e){const n=t.getState().scene.__r3f;!e||!n||cE(n,e)},removeChildFromContainer(t,e){const n=t.getState().scene.__r3f;!e||!n||Bj(n,e)},insertInContainerBefore(t,e,n){const i=t.getState().scene.__r3f;!e||!n||!i||yL(i,e,n)},getRootHostContext:()=>bL,getChildHostContext:()=>bL,commitUpdate(t,e,n,i,r){var a,s,o;Jq(e,i);let l=!1;if((t.type==="primitive"&&n.object!==i.object||((a=i.args)==null?void 0:a.length)!==((s=n.args)==null?void 0:s.length)||(o=i.args)!=null&&o.some((h,p)=>{var g;return h!==((g=n.args)==null?void 0:g[p])}))&&(l=!0),l)$M.push([t,{...i},r]);else{const h=Goe(t,i);Object.keys(h).length&&(Object.assign(t.props,h),du(t.object,h))}(r.sibling===null||(r.flags&ale)===rle)&&ile()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:t=>t==null?void 0:t.object,prepareForCommit:()=>null,preparePortalMount:t=>V_(t.getState().scene,t,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:tle,unhideInstance:eW,createTextInstance:uE,hideTextInstance:uE,unhideTextInstance:uE,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:z.createContext(null),setCurrentUpdatePriority(t){ZS=t},getCurrentUpdatePriority(){return ZS},resolveUpdatePriority(){var t;if(ZS!==Qq)return ZS;switch(typeof window<"u"&&((t=window.event)==null?void 0:t.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return HM.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return HM.ContinuousEventPriority;default:return HM.DefaultEventPriority}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:Yoe.version}),Z0=new Map,Dm={objects:"shallow",strict:!1};function sle(t,e){if(!e&&typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:n,height:i,top:r,left:a}=t.parentElement.getBoundingClientRect();return{width:n,height:i,top:r,left:a}}else if(!e&&typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function ole(t){const e=Z0.get(t),n=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,a=i||Xoe(Fj,ML),s=n||W_.createContainer(a,HM.ConcurrentRoot,null,!1,null,"",r,r,r,null);e||Z0.set(t,{fiber:s,store:a});let o,l,u=!1,h=null;return{async configure(p={}){let g;h=new Promise(q=>g=q);let{gl:x,size:b,scene:M,events:S,onCreated:T,shadows:A=!1,linear:E=!1,flat:j=!1,legacy:R=!1,orthographic:C=!1,frameloop:D="always",dpr:U=[1,2],performance:I,raycaster:L,camera:F,onPointerMissed:G}=p,H=a.getState(),W=H.gl;if(!H.gl){const q={canvas:t,powerPreference:"high-performance",antialias:!0,alpha:!0},K=typeof x=="function"?await x(q):x;vL(K)?W=K:W=new bD({...q,...x}),H.set({gl:W})}let Y=H.raycaster;Y||H.set({raycaster:Y=new xD});const{params:k,...$}=L||{};if(br.equ($,Y,Dm)||du(Y,{...$}),br.equ(k,Y.params,Dm)||du(Y,{params:{...Y.params,...k}}),!H.camera||H.camera===l&&!br.equ(l,F,Dm)){l=F;const q=F==null?void 0:F.isCamera,K=q?F:C?new Ol(0,0,0,0,.1,1e3):new Ji(75,0,.1,1e3);q||(K.position.z=5,F&&(du(K,F),K.manual||("aspect"in F||"left"in F||"right"in F||"bottom"in F||"top"in F)&&(K.manual=!0,K.updateProjectionMatrix())),!H.camera&&!(F!=null&&F.rotation)&&K.lookAt(0,0,0)),H.set({camera:K}),Y.camera=K}if(!H.scene){let q;M!=null&&M.isScene?(q=M,V_(q,a,"",{})):(q=new Zh,V_(q,a,"",{}),M&&du(q,M)),H.set({scene:q})}S&&!H.events.handlers&&H.set({events:S(a)});const ee=sle(t,b);if(br.equ(ee,H.size,Dm)||H.setSize(ee.width,ee.height,ee.top,ee.left),U&&H.viewport.dpr!==Xq(U)&&H.setDpr(U),H.frameloop!==D&&H.setFrameloop(D),H.onPointerMissed||H.set({onPointerMissed:G}),I&&!br.equ(I,H.performance,Dm)&&H.set(q=>({performance:{...q.performance,...I}})),!H.xr){var te;const q=(ue,me)=>{const fe=a.getState();fe.frameloop!=="never"&&ML(ue,!0,fe,me)},K=()=>{const ue=a.getState();ue.gl.xr.enabled=ue.gl.xr.isPresenting,ue.gl.xr.setAnimationLoop(ue.gl.xr.isPresenting?q:null),ue.gl.xr.isPresenting||Fj(ue)},ie={connect(){const ue=a.getState().gl;ue.xr.addEventListener("sessionstart",K),ue.xr.addEventListener("sessionend",K)},disconnect(){const ue=a.getState().gl;ue.xr.removeEventListener("sessionstart",K),ue.xr.removeEventListener("sessionend",K)}};typeof((te=W.xr)==null?void 0:te.addEventListener)=="function"&&ie.connect(),H.set({xr:ie})}if(W.shadowMap){const q=W.shadowMap.enabled,K=W.shadowMap.type;if(W.shadowMap.enabled=!!A,br.boo(A))W.shadowMap.type=Ny;else if(br.str(A)){var ae;const ie={basic:WV,percentage:hb,soft:Ny,variance:gc};W.shadowMap.type=(ae=ie[A])!=null?ae:Ny}else br.obj(A)&&Object.assign(W.shadowMap,A);(q!==W.shadowMap.enabled||K!==W.shadowMap.type)&&(W.shadowMap.needsUpdate=!0)}return fi.enabled=!R,u||(W.outputColorSpace=E?Zo:Kn,W.toneMapping=j?Tc:LO),H.legacy!==R&&H.set(()=>({legacy:R})),H.linear!==E&&H.set(()=>({linear:E})),H.flat!==j&&H.set(()=>({flat:j})),x&&!br.fun(x)&&!vL(x)&&!br.equ(x,W,Dm)&&du(W,x),o=T,u=!0,g(),this},render(p){return!u&&!h&&this.configure(),h.then(()=>{W_.updateContainer(c.jsx(lle,{store:a,children:p,onCreated:o,rootElement:t}),s,null,()=>{})}),a},unmount(){nW(t)}}}function lle({store:t,children:e,onCreated:n,rootElement:i}){return jb(()=>{const r=t.getState();r.set(a=>({internal:{...a.internal,active:!0}})),n&&n(r),t.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),c.jsx(TD.Provider,{value:t,children:e})}function nW(t,e){const n=Z0.get(t),i=n==null?void 0:n.fiber;if(i){const r=n==null?void 0:n.store.getState();r&&(r.internal.active=!1),W_.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var a,s,o,l;r.events.disconnect==null||r.events.disconnect(),(a=r.gl)==null||(s=a.renderLists)==null||s.dispose==null||s.dispose(),(o=r.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),zoe(r.scene),Z0.delete(t)}catch{}},500)})}}function cle(t,e,n){return c.jsx(ule,{children:t,container:e,state:n})}function ule({state:t={},children:e,container:n}){const{events:i,size:r,...a}=t,s=wD(),[o]=z.useState(()=>new xD),[l]=z.useState(()=>new Ye),u=_D((p,g)=>{let x;if(g.camera&&r){const b=g.camera;x=p.viewport.getCurrentViewport(b,new se,r),b!==p.camera&&Yq(b,r)}return{...p,...g,scene:n,raycaster:o,pointer:l,mouse:l,previousRoot:s,events:{...p.events,...g.events,...i},size:{...p.size,...r},viewport:{...p.viewport,...x},setEvents:b=>g.set(M=>({...M,events:{...M.events,...b}}))}}),h=z.useMemo(()=>{const p=Lq((x,b)=>({...a,set:x,get:b})),g=x=>p.setState(b=>u.current(x,b));return g(s.getState()),s.subscribe(g),p},[s,n]);return c.jsx(c.Fragment,{children:W_.createPortal(c.jsx(TD.Provider,{value:h,children:e}),h,null)})}const fle=new Set,hle=new Set,dle=new Set;function fE(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function ky(t,e){switch(t){case"before":return fE(fle,e);case"after":return fE(hle,e);case"tail":return fE(dle,e)}}let hE,dE;function zj(t,e,n){let i=e.clock.getDelta();e.frameloop==="never"&&typeof t=="number"&&(i=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),hE=e.internal.subscribers;for(let r=0;r<hE.length;r++)dE=hE[r],dE.ref.current(dE.store.getState(),i,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let X_=!1,kj=!1,pE,SL,Pm;function iW(t){SL=requestAnimationFrame(iW),X_=!0,pE=0,ky("before",t),kj=!0;for(const n of Z0.values()){var e;Pm=n.store.getState(),Pm.internal.active&&(Pm.frameloop==="always"||Pm.internal.frames>0)&&!((e=Pm.gl.xr)!=null&&e.isPresenting)&&(pE+=zj(t,Pm))}if(kj=!1,ky("after",t),pE===0)return ky("tail",t),X_=!1,cancelAnimationFrame(SL)}function Fj(t,e=1){var n;if(!t)return Z0.forEach(i=>Fj(i.store.getState(),e));(n=t.gl.xr)!=null&&n.isPresenting||!t.internal.active||t.frameloop==="never"||(e>1?t.internal.frames=Math.min(60,t.internal.frames+e):kj?t.internal.frames=2:t.internal.frames=1,X_||(X_=!0,requestAnimationFrame(iW)))}function ML(t,e=!0,n,i){if(e&&ky("before",t),n)zj(t,n,i);else for(const r of Z0.values())zj(t,r.store.getState());e&&ky("after",t)}const mE={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function ple(t){const{handlePointer:e}=Woe(t);return{priority:1,enabled:!0,compute(n,i,r){i.pointer.set(n.offsetX/i.size.width*2-1,-(n.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(mE).reduce((n,i)=>({...n,[i]:e(i)}),{}),update:()=>{var n;const{events:i,internal:r}=t.getState();(n=r.lastEvent)!=null&&n.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:n=>{const{set:i,events:r}=t.getState();if(r.disconnect==null||r.disconnect(),i(a=>({events:{...a.events,connected:n}})),r.handlers)for(const a in r.handlers){const s=r.handlers[a],[o,l]=mE[a];n.addEventListener(o,s,{passive:l})}},disconnect:()=>{const{set:n,events:i}=t.getState();if(i.connected){if(i.handlers)for(const r in i.handlers){const a=i.handlers[r],[s]=mE[r];i.connected.removeEventListener(s,a)}n(r=>({events:{...r.events,connected:void 0}}))}}}}function _L(t,e){let n;return(...i)=>{window.clearTimeout(n),n=window.setTimeout(()=>t(...i),e)}}function mle({debounce:t,scroll:e,polyfill:n,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,s]=z.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=z.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),l=t?typeof t=="number"?t:t.scroll:null,u=t?typeof t=="number"?t:t.resize:null,h=z.useRef(!1);z.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[p,g,x]=z.useMemo(()=>{const T=()=>{if(!o.current.element)return;const{left:A,top:E,width:j,height:R,bottom:C,right:D,x:U,y:I}=o.current.element.getBoundingClientRect(),L={left:A,top:E,width:j,height:R,bottom:C,right:D,x:U,y:I};o.current.element instanceof HTMLElement&&i&&(L.height=o.current.element.offsetHeight,L.width=o.current.element.offsetWidth),Object.freeze(L),h.current&&!yle(o.current.lastBounds,L)&&s(o.current.lastBounds=L)};return[T,u?_L(T,u):T,l?_L(T,l):T]},[s,i,l,u]);function b(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(T=>T.removeEventListener("scroll",x,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function M(){o.current.element&&(o.current.resizeObserver=new r(x),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(T=>T.addEventListener("scroll",x,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{x()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const S=T=>{!T||T===o.current.element||(b(),o.current.element=T,o.current.scrollContainers=rW(T),M())};return vle(x,!!e),gle(g),z.useEffect(()=>{b(),M()},[e,x,g]),z.useEffect(()=>b,[]),[S,a,p]}function gle(t){z.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function vle(t,e){z.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function rW(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:i,overflowY:r}=window.getComputedStyle(t);return[n,i,r].some(a=>a==="auto"||a==="scroll")&&e.push(t),[...e,...rW(t.parentElement)]}const xle=["x","y","top","bottom","left","right","width","height"],yle=(t,e)=>xle.every(n=>t[n]===e[n]);function ble({ref:t,children:e,fallback:n,resize:i,style:r,gl:a,events:s=ple,eventSource:o,eventPrefix:l,shadows:u,linear:h,flat:p,legacy:g,orthographic:x,frameloop:b,dpr:M,performance:S,raycaster:T,camera:A,scene:E,onPointerMissed:j,onCreated:R,...C}){z.useMemo(()=>IT(foe),[]);const D=Ioe(),[U,I]=mle({scroll:!0,debounce:{scroll:50,resize:0},...i}),L=z.useRef(null),F=z.useRef(null);z.useImperativeHandle(t,()=>L.current);const G=_D(j),[H,W]=z.useState(!1),[Y,k]=z.useState(!1);if(H)throw H;if(Y)throw Y;const $=z.useRef(null);jb(()=>{const te=L.current;if(I.width>0&&I.height>0&&te){$.current||($.current=ole(te));async function ae(){await $.current.configure({gl:a,scene:E,events:s,shadows:u,linear:h,flat:p,legacy:g,orthographic:x,frameloop:b,dpr:M,performance:S,raycaster:T,camera:A,size:I,onPointerMissed:(...q)=>G.current==null?void 0:G.current(...q),onCreated:q=>{q.events.connect==null||q.events.connect(o?Doe(o)?o.current:o:F.current),l&&q.setEvents({compute:(K,ie)=>{const ue=K[l+"X"],me=K[l+"Y"];ie.pointer.set(ue/ie.size.width*2-1,-(me/ie.size.height)*2+1),ie.raycaster.setFromCamera(ie.pointer,ie.camera)}}),R==null||R(q)}}),$.current.render(c.jsx(D,{children:c.jsx(Loe,{set:k,children:c.jsx(z.Suspense,{fallback:c.jsx(Uoe,{set:W}),children:e??null})})}))}ae()}}),z.useEffect(()=>{const te=L.current;if(te)return()=>nW(te)},[]);const ee=o?"none":"auto";return c.jsx("div",{ref:F,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ee,...r},...C,children:c.jsx("div",{ref:U,style:{width:"100%",height:"100%"},children:c.jsx("canvas",{ref:L,style:{display:"block"},children:n})})})}function Sle(t){return c.jsx(Vq,{children:c.jsx(ble,{...t})})}function bo(){return bo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},bo.apply(null,arguments)}const Nb=new se,ED=new se,Mle=new se,TL=new Ye;function _le(t,e,n){const i=Nb.setFromMatrixPosition(t.matrixWorld);i.project(e);const r=n.width/2,a=n.height/2;return[i.x*r+r,-(i.y*a)+a]}function Tle(t,e){const n=Nb.setFromMatrixPosition(t.matrixWorld),i=ED.setFromMatrixPosition(e.matrixWorld),r=n.sub(i),a=e.getWorldDirection(Mle);return r.angleTo(a)>Math.PI/2}function wle(t,e,n,i){const r=Nb.setFromMatrixPosition(t.matrixWorld),a=r.clone();a.project(e),TL.set(a.x,a.y),n.setFromCamera(TL,e);const s=n.intersectObjects(i,!0);if(s.length){const o=s[0].distance;return r.distanceTo(n.ray.origin)<o}return!0}function Ale(t,e){if(e instanceof Ol)return e.zoom;if(e instanceof Ji){const n=Nb.setFromMatrixPosition(t.matrixWorld),i=ED.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,a=n.distanceTo(i);return 1/(2*Math.tan(r/2)*a)}else return 1}function Ele(t,e,n){if(e instanceof Ji||e instanceof Ol){const i=Nb.setFromMatrixPosition(t.matrixWorld),r=ED.setFromMatrixPosition(e.matrixWorld),a=i.distanceTo(r),s=(n[1]-n[0])/(e.far-e.near),o=n[1]-s*e.far;return Math.round(s*a+o)}}const Gj=t=>Math.abs(t)<1e-10?0:t;function aW(t,e,n=""){let i="matrix3d(";for(let r=0;r!==16;r++)i+=Gj(e[r]*t.elements[r])+(r!==15?",":")");return n+i}const Cle=(t=>e=>aW(e,t))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),Rle=(t=>(e,n)=>aW(e,t(n),"translate(-50%,-50%)"))(t=>[1/t,1/t,1/t,1,-1/t,-1/t,-1/t,-1,1/t,1/t,1/t,1,1,1,1,1]);function jle(t){return t&&typeof t=="object"&&"current"in t}const Ob=z.forwardRef(({children:t,eps:e=.001,style:n,className:i,prepend:r,center:a,fullscreen:s,portal:o,distanceFactor:l,sprite:u=!1,transform:h=!1,occlude:p,onOcclude:g,castShadow:x,receiveShadow:b,material:M,geometry:S,zIndexRange:T=[16777271,0],calculatePosition:A=_le,as:E="div",wrapperClass:j,pointerEvents:R="auto",...C},D)=>{const{gl:U,camera:I,scene:L,size:F,raycaster:G,events:H,viewport:W}=hi(),[Y]=z.useState(()=>document.createElement(E)),k=z.useRef(null),$=z.useRef(null),ee=z.useRef(0),te=z.useRef([0,0]),ae=z.useRef(null),q=z.useRef(null),K=(o==null?void 0:o.current)||H.connected||U.domElement.parentNode,ie=z.useRef(null),ue=z.useRef(!1),me=z.useMemo(()=>p&&p!=="blending"||Array.isArray(p)&&p.length&&jle(p[0]),[p]);z.useLayoutEffect(()=>{const Ie=U.domElement;p&&p==="blending"?(Ie.style.zIndex=`${Math.floor(T[0]/2)}`,Ie.style.position="absolute",Ie.style.pointerEvents="none"):(Ie.style.zIndex=null,Ie.style.position=null,Ie.style.pointerEvents=null)},[p]),z.useLayoutEffect(()=>{if($.current){const Ie=k.current=VV.createRoot(Y);if(L.updateMatrixWorld(),h)Y.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Re=A($.current,I,F);Y.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Re[0]}px,${Re[1]}px,0);transform-origin:0 0;`}return K&&(r?K.prepend(Y):K.appendChild(Y)),()=>{K&&K.removeChild(Y),Ie.unmount()}}},[K,h]),z.useLayoutEffect(()=>{j&&(Y.className=j)},[j]);const fe=z.useMemo(()=>h?{position:"absolute",top:0,left:0,width:F.width,height:F.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:a?"translate3d(-50%,-50%,0)":"none",...s&&{top:-F.height/2,left:-F.width/2,width:F.width,height:F.height},...n},[n,a,s,F,h]),de=z.useMemo(()=>({position:"absolute",pointerEvents:R}),[R]);z.useLayoutEffect(()=>{if(ue.current=!1,h){var Ie;(Ie=k.current)==null||Ie.render(z.createElement("div",{ref:ae,style:fe},z.createElement("div",{ref:q,style:de},z.createElement("div",{ref:D,className:i,style:n,children:t}))))}else{var Re;(Re=k.current)==null||Re.render(z.createElement("div",{ref:D,style:fe,className:i,children:t}))}});const _e=z.useRef(!0);It(Ie=>{if($.current){I.updateMatrixWorld(),$.current.updateWorldMatrix(!0,!1);const Re=h?te.current:A($.current,I,F);if(h||Math.abs(ee.current-I.zoom)>e||Math.abs(te.current[0]-Re[0])>e||Math.abs(te.current[1]-Re[1])>e){const ye=Tle($.current,I);let ct=!1;me&&(Array.isArray(p)?ct=p.map(He=>He.current):p!=="blending"&&(ct=[L]));const Ce=_e.current;if(ct){const He=wle($.current,I,G,ct);_e.current=He&&!ye}else _e.current=!ye;Ce!==_e.current&&(g?g(!_e.current):Y.style.display=_e.current?"block":"none");const re=Math.floor(T[0]/2),Le=p?me?[T[0],re]:[re-1,0]:T;if(Y.style.zIndex=`${Ele($.current,I,Le)}`,h){const[He,Ue]=[F.width/2,F.height/2],Ge=I.projectionMatrix.elements[5]*Ue,{isOrthographicCamera:nt,top:Ae,left:at,bottom:ne,right:Z}=I,xe=Cle(I.matrixWorldInverse),Xe=nt?`scale(${Ge})translate(${Gj(-(Z+at)/2)}px,${Gj((Ae+ne)/2)}px)`:`translateZ(${Ge}px)`;let Be=$.current.matrixWorld;u&&(Be=I.matrixWorldInverse.clone().transpose().copyPosition(Be).scale($.current.scale),Be.elements[3]=Be.elements[7]=Be.elements[11]=0,Be.elements[15]=1),Y.style.width=F.width+"px",Y.style.height=F.height+"px",Y.style.perspective=nt?"":`${Ge}px`,ae.current&&q.current&&(ae.current.style.transform=`${Xe}${xe}translate(${He}px,${Ue}px)`,q.current.style.transform=Rle(Be,1/((l||10)/400)))}else{const He=l===void 0?1:Ale($.current,I)*l;Y.style.transform=`translate3d(${Re[0]}px,${Re[1]}px,0) scale(${He})`}te.current=Re,ee.current=I.zoom}}if(!me&&ie.current&&!ue.current)if(h){if(ae.current){const Re=ae.current.children[0];if(Re!=null&&Re.clientWidth&&Re!=null&&Re.clientHeight){const{isOrthographicCamera:ye}=I;if(ye||S)C.scale&&(Array.isArray(C.scale)?C.scale instanceof se?ie.current.scale.copy(C.scale.clone().divideScalar(1)):ie.current.scale.set(1/C.scale[0],1/C.scale[1],1/C.scale[2]):ie.current.scale.setScalar(1/C.scale));else{const ct=(l||10)/400,Ce=Re.clientWidth*ct,re=Re.clientHeight*ct;ie.current.scale.set(Ce,re,1)}ue.current=!0}}}else{const Re=Y.children[0];if(Re!=null&&Re.clientWidth&&Re!=null&&Re.clientHeight){const ye=1/W.factor,ct=Re.clientWidth*ye,Ce=Re.clientHeight*ye;ie.current.scale.set(ct,Ce,1),ue.current=!0}ie.current.lookAt(Ie.camera.position)}});const Te=z.useMemo(()=>({vertexShader:h?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[h]);return z.createElement("group",bo({},C,{ref:$}),p&&!me&&z.createElement("mesh",{castShadow:x,receiveShadow:b,ref:ie},S||z.createElement("planeGeometry",null),M||z.createElement("shaderMaterial",{side:ai,vertexShader:Te.vertexShader,fragmentShader:Te.fragmentShader})))}),Nle=t=>t;function Ole(t,e=Nle){const n=De.useSyncExternalStore(t.subscribe,De.useCallback(()=>e(t.getState()),[t,e]),De.useCallback(()=>e(t.getInitialState()),[t,e]));return De.useDebugValue(n),n}const wL=t=>{const e=Uq(t),n=i=>Ole(e,i);return Object.assign(n,e),n},CD=(t=>t?wL(t):wL),Dle=t=>(e,n,i)=>{const r=i.subscribe;return i.subscribe=((s,o,l)=>{let u=s;if(o){const h=(l==null?void 0:l.equalityFn)||Object.is;let p=s(i.getState());u=g=>{const x=s(g);if(!h(p,x)){const b=p;o(p=x,b)}},l!=null&&l.fireImmediately&&o(p,p)}return r(u)}),t(e,n,i)},Ple=Dle;function Ile(t,e){let n;try{n=t()}catch{return}return{getItem:r=>{var a;const s=l=>l===null?null:JSON.parse(l,void 0),o=(a=n.getItem(r))!=null?a:null;return o instanceof Promise?o.then(s):s(o)},setItem:(r,a)=>n.setItem(r,JSON.stringify(a,void 0)),removeItem:r=>n.removeItem(r)}}const Vj=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(i){return Vj(i)(n)},catch(i){return this}}}catch(n){return{then(i){return this},catch(i){return Vj(i)(n)}}}},Ule=(t,e)=>(n,i,r)=>{let a={storage:Ile(()=>localStorage),partialize:M=>M,version:0,merge:(M,S)=>({...S,...M}),...e},s=!1;const o=new Set,l=new Set;let u=a.storage;if(!u)return t((...M)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...M)},i,r);const h=()=>{const M=a.partialize({...i()});return u.setItem(a.name,{state:M,version:a.version})},p=r.setState;r.setState=(M,S)=>(p(M,S),h());const g=t((...M)=>(n(...M),h()),i,r);r.getInitialState=()=>g;let x;const b=()=>{var M,S;if(!u)return;s=!1,o.forEach(A=>{var E;return A((E=i())!=null?E:g)});const T=((S=a.onRehydrateStorage)==null?void 0:S.call(a,(M=i())!=null?M:g))||void 0;return Vj(u.getItem.bind(u))(a.name).then(A=>{if(A)if(typeof A.version=="number"&&A.version!==a.version){if(a.migrate){const E=a.migrate(A.state,A.version);return E instanceof Promise?E.then(j=>[!0,j]):[!0,E]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,A.state];return[!1,void 0]}).then(A=>{var E;const[j,R]=A;if(x=a.merge(R,(E=i())!=null?E:g),n(x,!0),j)return h()}).then(()=>{T==null||T(x,void 0),x=i(),s=!0,l.forEach(A=>A(x))}).catch(A=>{T==null||T(void 0,A)})};return r.persist={setOptions:M=>{a={...a,...M},M.storage&&(u=M.storage)},clearStorage:()=>{u==null||u.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>b(),hasHydrated:()=>s,onHydrate:M=>(o.add(M),()=>{o.delete(M)}),onFinishHydration:M=>(l.add(M),()=>{l.delete(M)})},a.skipHydration||b(),x||g},Lle=Ule,UT=parseInt(Lf.replace(/\D+/g,"")),sW=UT>=125?"uv1":"uv2";function Ble(t,e=Math.PI/3){const n=Math.cos(e),i=(1+1e-10)*100,r=[new se,new se,new se],a=new se,s=new se,o=new se,l=new se;function u(M){const S=~~(M.x*i),T=~~(M.y*i),A=~~(M.z*i);return`${S},${T},${A}`}const h=t.index?t.toNonIndexed():t,p=h.attributes.position,g={};for(let M=0,S=p.count/3;M<S;M++){const T=3*M,A=r[0].fromBufferAttribute(p,T+0),E=r[1].fromBufferAttribute(p,T+1),j=r[2].fromBufferAttribute(p,T+2);a.subVectors(j,E),s.subVectors(A,E);const R=new se().crossVectors(a,s).normalize();for(let C=0;C<3;C++){const D=r[C],U=u(D);U in g||(g[U]=[]),g[U].push(R)}}const x=new Float32Array(p.count*3),b=new yi(x,3,!1);for(let M=0,S=p.count/3;M<S;M++){const T=3*M,A=r[0].fromBufferAttribute(p,T+0),E=r[1].fromBufferAttribute(p,T+1),j=r[2].fromBufferAttribute(p,T+2);a.subVectors(j,E),s.subVectors(A,E),o.crossVectors(a,s).normalize();for(let R=0;R<3;R++){const C=r[R],D=u(C),U=g[D];l.set(0,0,0);for(let I=0,L=U.length;I<L;I++){const F=U[I];o.dot(F)>n&&l.add(F)}l.normalize(),b.setXYZ(T+R,l.x,l.y,l.z)}}return h.setAttribute("normal",b),h}var jl=Uint8Array,Gh=Uint16Array,Hj=Uint32Array,oW=new jl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),lW=new jl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),zle=new jl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),cW=function(t,e){for(var n=new Gh(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];for(var r=new Hj(n[30]),i=1;i<30;++i)for(var a=n[i];a<n[i+1];++a)r[a]=a-n[i]<<5|i;return[n,r]},uW=cW(oW,2),fW=uW[0],kle=uW[1];fW[28]=258,kle[258]=28;var Fle=cW(lW,0),Gle=Fle[0],qj=new Gh(32768);for(var ur=0;ur<32768;++ur){var Oh=(ur&43690)>>>1|(ur&21845)<<1;Oh=(Oh&52428)>>>2|(Oh&13107)<<2,Oh=(Oh&61680)>>>4|(Oh&3855)<<4,qj[ur]=((Oh&65280)>>>8|(Oh&255)<<8)>>>1}var Fy=(function(t,e,n){for(var i=t.length,r=0,a=new Gh(e);r<i;++r)++a[t[r]-1];var s=new Gh(e);for(r=0;r<e;++r)s[r]=s[r-1]+a[r-1]<<1;var o;if(n){o=new Gh(1<<e);var l=15-e;for(r=0;r<i;++r)if(t[r])for(var u=r<<4|t[r],h=e-t[r],p=s[t[r]-1]++<<h,g=p|(1<<h)-1;p<=g;++p)o[qj[p]>>>l]=u}else for(o=new Gh(i),r=0;r<i;++r)t[r]&&(o[r]=qj[s[t[r]-1]++]>>>15-t[r]);return o}),Db=new jl(288);for(var ur=0;ur<144;++ur)Db[ur]=8;for(var ur=144;ur<256;++ur)Db[ur]=9;for(var ur=256;ur<280;++ur)Db[ur]=7;for(var ur=280;ur<288;++ur)Db[ur]=8;var hW=new jl(32);for(var ur=0;ur<32;++ur)hW[ur]=5;var Vle=Fy(Db,9,1),Hle=Fy(hW,5,1),gE=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},dc=function(t,e,n){var i=e/8|0;return(t[i]|t[i+1]<<8)>>(e&7)&n},vE=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},qle=function(t){return(t/8|0)+(t&7&&1)},Wle=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var i=new(t instanceof Gh?Gh:t instanceof Hj?Hj:jl)(n-e);return i.set(t.subarray(e,n)),i},Xle=function(t,e,n){var i=t.length;if(!i||n&&!n.l&&i<5)return e||new jl(0);var r=!e||n,a=!n||n.i;n||(n={}),e||(e=new jl(i*3));var s=function(fe){var de=e.length;if(fe>de){var _e=new jl(Math.max(de*2,fe));_e.set(e),e=_e}},o=n.f||0,l=n.p||0,u=n.b||0,h=n.l,p=n.d,g=n.m,x=n.n,b=i*8;do{if(!h){n.f=o=dc(t,l,1);var M=dc(t,l+1,3);if(l+=3,M)if(M==1)h=Vle,p=Hle,g=9,x=5;else if(M==2){var E=dc(t,l,31)+257,j=dc(t,l+10,15)+4,R=E+dc(t,l+5,31)+1;l+=14;for(var C=new jl(R),D=new jl(19),U=0;U<j;++U)D[zle[U]]=dc(t,l+U*3,7);l+=j*3;for(var I=gE(D),L=(1<<I)-1,F=Fy(D,I,1),U=0;U<R;){var G=F[dc(t,l,L)];l+=G&15;var S=G>>>4;if(S<16)C[U++]=S;else{var H=0,W=0;for(S==16?(W=3+dc(t,l,3),l+=2,H=C[U-1]):S==17?(W=3+dc(t,l,7),l+=3):S==18&&(W=11+dc(t,l,127),l+=7);W--;)C[U++]=H}}var Y=C.subarray(0,E),k=C.subarray(E);g=gE(Y),x=gE(k),h=Fy(Y,g,1),p=Fy(k,x,1)}else throw"invalid block type";else{var S=qle(l)+4,T=t[S-4]|t[S-3]<<8,A=S+T;if(A>i){if(a)throw"unexpected EOF";break}r&&s(u+T),e.set(t.subarray(S,A),u),n.b=u+=T,n.p=l=A*8;continue}if(l>b){if(a)throw"unexpected EOF";break}}r&&s(u+131072);for(var $=(1<<g)-1,ee=(1<<x)-1,te=l;;te=l){var H=h[vE(t,l)&$],ae=H>>>4;if(l+=H&15,l>b){if(a)throw"unexpected EOF";break}if(!H)throw"invalid length/literal";if(ae<256)e[u++]=ae;else if(ae==256){te=l,h=null;break}else{var q=ae-254;if(ae>264){var U=ae-257,K=oW[U];q=dc(t,l,(1<<K)-1)+fW[U],l+=K}var ie=p[vE(t,l)&ee],ue=ie>>>4;if(!ie)throw"invalid distance";l+=ie&15;var k=Gle[ue];if(ue>3){var K=lW[ue];k+=vE(t,l)&(1<<K)-1,l+=K}if(l>b){if(a)throw"unexpected EOF";break}r&&s(u+131072);for(var me=u+q;u<me;u+=4)e[u]=e[u-k],e[u+1]=e[u+1-k],e[u+2]=e[u+2-k],e[u+3]=e[u+3-k];u=me}}n.l=h,n.p=te,n.b=u,h&&(o=1,n.m=g,n.d=p,n.n=x)}while(!o);return u==e.length?e:Wle(e,0,u)},$le=new jl(0),Yle=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function KS(t,e){return Xle((Yle(t),t.subarray(2,-4)),e)}var Zle=typeof TextDecoder<"u"&&new TextDecoder,Kle=0;try{Zle.decode($le,{stream:!0}),Kle=1}catch{}const Qle=t=>t&&t.isCubeTexture;class Jle extends zi{constructor(e,n){var i,r;const a=Qle(e),o=((r=a?(i=e.image[0])==null?void 0:i.width:e.image.width)!=null?r:1024)/4,l=Math.floor(Math.log2(o)),u=Math.pow(2,l),h=3*Math.max(u,112),p=4*u,g=[a?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/h}`,`#define CUBEUV_TEXEL_HEIGHT ${1/p}`,`#define CUBEUV_MAX_MIP ${l}.0`],x=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,b=g.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${UT>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,M={map:{value:e},height:{value:(n==null?void 0:n.height)||15},radius:{value:(n==null?void 0:n.radius)||100}},S=new Sb(1,16),T=new di({uniforms:M,fragmentShader:b,vertexShader:x,side:ai});super(S,T)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var ece=Object.defineProperty,tce=(t,e,n)=>e in t?ece(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nce=(t,e,n)=>(tce(t,e+"",n),n);class ice{constructor(){nce(this,"_listeners")}addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const a=r.indexOf(n);a!==-1&&r.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let a=0,s=r.length;a<s;a++)r[a].call(this,e);e.target=null}}}var rce=Object.defineProperty,ace=(t,e,n)=>e in t?rce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pn=(t,e,n)=>(ace(t,typeof e!="symbol"?e+"":e,n),n);const QS=new ip,AL=new hu,sce=Math.cos(70*(Math.PI/180)),EL=(t,e)=>(t%e+e)%e;let oce=class extends ice{constructor(e,n){super(),pn(this,"object"),pn(this,"domElement"),pn(this,"enabled",!0),pn(this,"target",new se),pn(this,"minDistance",0),pn(this,"maxDistance",1/0),pn(this,"minZoom",0),pn(this,"maxZoom",1/0),pn(this,"minPolarAngle",0),pn(this,"maxPolarAngle",Math.PI),pn(this,"minAzimuthAngle",-1/0),pn(this,"maxAzimuthAngle",1/0),pn(this,"enableDamping",!1),pn(this,"dampingFactor",.05),pn(this,"enableZoom",!0),pn(this,"zoomSpeed",1),pn(this,"enableRotate",!0),pn(this,"rotateSpeed",1),pn(this,"enablePan",!0),pn(this,"panSpeed",1),pn(this,"screenSpacePanning",!0),pn(this,"keyPanSpeed",7),pn(this,"zoomToCursor",!1),pn(this,"autoRotate",!1),pn(this,"autoRotateSpeed",2),pn(this,"reverseOrbit",!1),pn(this,"reverseHorizontalOrbit",!1),pn(this,"reverseVerticalOrbit",!1),pn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),pn(this,"mouseButtons",{LEFT:m0.ROTATE,MIDDLE:m0.DOLLY,RIGHT:m0.PAN}),pn(this,"touches",{ONE:g0.ROTATE,TWO:g0.DOLLY_PAN}),pn(this,"target0"),pn(this,"position0"),pn(this,"zoom0"),pn(this,"_domElementKeyEvents",null),pn(this,"getPolarAngle"),pn(this,"getAzimuthalAngle"),pn(this,"setPolarAngle"),pn(this,"setAzimuthalAngle"),pn(this,"getDistance"),pn(this,"getZoomScale"),pn(this,"listenToKeyEvents"),pn(this,"stopListenToKeyEvents"),pn(this,"saveState"),pn(this,"reset"),pn(this,"update"),pn(this,"connect"),pn(this,"dispose"),pn(this,"dollyIn"),pn(this,"dollyOut"),pn(this,"getScale"),pn(this,"setScale"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>h.phi,this.getAzimuthalAngle=()=>h.theta,this.setPolarAngle=pe=>{let Oe=EL(pe,2*Math.PI),ft=h.phi;ft<0&&(ft+=2*Math.PI),Oe<0&&(Oe+=2*Math.PI);let ge=Math.abs(Oe-ft);2*Math.PI-ge<ge&&(Oe<ft?Oe+=2*Math.PI:ft+=2*Math.PI),p.phi=Oe-ft,i.update()},this.setAzimuthalAngle=pe=>{let Oe=EL(pe,2*Math.PI),ft=h.theta;ft<0&&(ft+=2*Math.PI),Oe<0&&(Oe+=2*Math.PI);let ge=Math.abs(Oe-ft);2*Math.PI-ge<ge&&(Oe<ft?Oe+=2*Math.PI:ft+=2*Math.PI),p.theta=Oe-ft,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=pe=>{pe.addEventListener("keydown",Ne),this._domElementKeyEvents=pe},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ne),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=o.NONE},this.update=(()=>{const pe=new se,Oe=new se(0,1,0),ft=new Jr().setFromUnitVectors(e.up,Oe),ge=ft.clone().invert(),Ee=new se,ut=new Jr,At=2*Math.PI;return function(){const Ze=i.object.position;ft.setFromUnitVectors(e.up,Oe),ge.copy(ft).invert(),pe.copy(Ze).sub(i.target),pe.applyQuaternion(ft),h.setFromVector3(pe),i.autoRotate&&l===o.NONE&&W(G()),i.enableDamping?(h.theta+=p.theta*i.dampingFactor,h.phi+=p.phi*i.dampingFactor):(h.theta+=p.theta,h.phi+=p.phi);let Ct=i.minAzimuthAngle,Ut=i.maxAzimuthAngle;isFinite(Ct)&&isFinite(Ut)&&(Ct<-Math.PI?Ct+=At:Ct>Math.PI&&(Ct-=At),Ut<-Math.PI?Ut+=At:Ut>Math.PI&&(Ut-=At),Ct<=Ut?h.theta=Math.max(Ct,Math.min(Ut,h.theta)):h.theta=h.theta>(Ct+Ut)/2?Math.max(Ct,h.theta):Math.min(Ut,h.theta)),h.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,h.phi)),h.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(x,i.dampingFactor):i.target.add(x),i.zoomToCursor&&I||i.object.isOrthographicCamera?h.radius=ie(h.radius):h.radius=ie(h.radius*g),pe.setFromSpherical(h),pe.applyQuaternion(ge),Ze.copy(i.target).add(pe),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(p.theta*=1-i.dampingFactor,p.phi*=1-i.dampingFactor,x.multiplyScalar(1-i.dampingFactor)):(p.set(0,0,0),x.set(0,0,0));let Bt=!1;if(i.zoomToCursor&&I){let Yt=null;if(i.object instanceof Ji&&i.object.isPerspectiveCamera){const On=pe.length();Yt=ie(On*g);const Vn=On-Yt;i.object.position.addScaledVector(D,Vn),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const On=new se(U.x,U.y,0);On.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/g)),i.object.updateProjectionMatrix(),Bt=!0;const Vn=new se(U.x,U.y,0);Vn.unproject(i.object),i.object.position.sub(Vn).add(On),i.object.updateMatrixWorld(),Yt=pe.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Yt!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Yt).add(i.object.position):(QS.origin.copy(i.object.position),QS.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(QS.direction))<sce?e.lookAt(i.target):(AL.setFromNormalAndCoplanarPoint(i.object.up,i.target),QS.intersectPlane(AL,i.target))))}else i.object instanceof Ol&&i.object.isOrthographicCamera&&(Bt=g!==1,Bt&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/g)),i.object.updateProjectionMatrix()));return g=1,I=!1,Bt||Ee.distanceToSquared(i.object.position)>u||8*(1-ut.dot(i.object.quaternion))>u?(i.dispatchEvent(r),Ee.copy(i.object.position),ut.copy(i.object.quaternion),Bt=!1,!0):!1}})(),this.connect=pe=>{i.domElement=pe,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",Dt),i.domElement.addEventListener("pointerdown",at),i.domElement.addEventListener("pointercancel",Z),i.domElement.addEventListener("wheel",Be)},this.dispose=()=>{var pe,Oe,ft,ge,Ee,ut;i.domElement&&(i.domElement.style.touchAction="auto"),(pe=i.domElement)==null||pe.removeEventListener("contextmenu",Dt),(Oe=i.domElement)==null||Oe.removeEventListener("pointerdown",at),(ft=i.domElement)==null||ft.removeEventListener("pointercancel",Z),(ge=i.domElement)==null||ge.removeEventListener("wheel",Be),(Ee=i.domElement)==null||Ee.ownerDocument.removeEventListener("pointermove",ne),(ut=i.domElement)==null||ut.ownerDocument.removeEventListener("pointerup",Z),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",Ne)};const i=this,r={type:"change"},a={type:"start"},s={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=o.NONE;const u=1e-6,h=new Dj,p=new Dj;let g=1;const x=new se,b=new Ye,M=new Ye,S=new Ye,T=new Ye,A=new Ye,E=new Ye,j=new Ye,R=new Ye,C=new Ye,D=new se,U=new Ye;let I=!1;const L=[],F={};function G(){return 2*Math.PI/60/60*i.autoRotateSpeed}function H(){return Math.pow(.95,i.zoomSpeed)}function W(pe){i.reverseOrbit||i.reverseHorizontalOrbit?p.theta+=pe:p.theta-=pe}function Y(pe){i.reverseOrbit||i.reverseVerticalOrbit?p.phi+=pe:p.phi-=pe}const k=(()=>{const pe=new se;return function(ft,ge){pe.setFromMatrixColumn(ge,0),pe.multiplyScalar(-ft),x.add(pe)}})(),$=(()=>{const pe=new se;return function(ft,ge){i.screenSpacePanning===!0?pe.setFromMatrixColumn(ge,1):(pe.setFromMatrixColumn(ge,0),pe.crossVectors(i.object.up,pe)),pe.multiplyScalar(ft),x.add(pe)}})(),ee=(()=>{const pe=new se;return function(ft,ge){const Ee=i.domElement;if(Ee&&i.object instanceof Ji&&i.object.isPerspectiveCamera){const ut=i.object.position;pe.copy(ut).sub(i.target);let At=pe.length();At*=Math.tan(i.object.fov/2*Math.PI/180),k(2*ft*At/Ee.clientHeight,i.object.matrix),$(2*ge*At/Ee.clientHeight,i.object.matrix)}else Ee&&i.object instanceof Ol&&i.object.isOrthographicCamera?(k(ft*(i.object.right-i.object.left)/i.object.zoom/Ee.clientWidth,i.object.matrix),$(ge*(i.object.top-i.object.bottom)/i.object.zoom/Ee.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function te(pe){i.object instanceof Ji&&i.object.isPerspectiveCamera||i.object instanceof Ol&&i.object.isOrthographicCamera?g=pe:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function ae(pe){te(g/pe)}function q(pe){te(g*pe)}function K(pe){if(!i.zoomToCursor||!i.domElement)return;I=!0;const Oe=i.domElement.getBoundingClientRect(),ft=pe.clientX-Oe.left,ge=pe.clientY-Oe.top,Ee=Oe.width,ut=Oe.height;U.x=ft/Ee*2-1,U.y=-(ge/ut)*2+1,D.set(U.x,U.y,1).unproject(i.object).sub(i.object.position).normalize()}function ie(pe){return Math.max(i.minDistance,Math.min(i.maxDistance,pe))}function ue(pe){b.set(pe.clientX,pe.clientY)}function me(pe){K(pe),j.set(pe.clientX,pe.clientY)}function fe(pe){T.set(pe.clientX,pe.clientY)}function de(pe){M.set(pe.clientX,pe.clientY),S.subVectors(M,b).multiplyScalar(i.rotateSpeed);const Oe=i.domElement;Oe&&(W(2*Math.PI*S.x/Oe.clientHeight),Y(2*Math.PI*S.y/Oe.clientHeight)),b.copy(M),i.update()}function _e(pe){R.set(pe.clientX,pe.clientY),C.subVectors(R,j),C.y>0?ae(H()):C.y<0&&q(H()),j.copy(R),i.update()}function Te(pe){A.set(pe.clientX,pe.clientY),E.subVectors(A,T).multiplyScalar(i.panSpeed),ee(E.x,E.y),T.copy(A),i.update()}function Ie(pe){K(pe),pe.deltaY<0?q(H()):pe.deltaY>0&&ae(H()),i.update()}function Re(pe){let Oe=!1;switch(pe.code){case i.keys.UP:ee(0,i.keyPanSpeed),Oe=!0;break;case i.keys.BOTTOM:ee(0,-i.keyPanSpeed),Oe=!0;break;case i.keys.LEFT:ee(i.keyPanSpeed,0),Oe=!0;break;case i.keys.RIGHT:ee(-i.keyPanSpeed,0),Oe=!0;break}Oe&&(pe.preventDefault(),i.update())}function ye(){if(L.length==1)b.set(L[0].pageX,L[0].pageY);else{const pe=.5*(L[0].pageX+L[1].pageX),Oe=.5*(L[0].pageY+L[1].pageY);b.set(pe,Oe)}}function ct(){if(L.length==1)T.set(L[0].pageX,L[0].pageY);else{const pe=.5*(L[0].pageX+L[1].pageX),Oe=.5*(L[0].pageY+L[1].pageY);T.set(pe,Oe)}}function Ce(){const pe=L[0].pageX-L[1].pageX,Oe=L[0].pageY-L[1].pageY,ft=Math.sqrt(pe*pe+Oe*Oe);j.set(0,ft)}function re(){i.enableZoom&&Ce(),i.enablePan&&ct()}function Le(){i.enableZoom&&Ce(),i.enableRotate&&ye()}function He(pe){if(L.length==1)M.set(pe.pageX,pe.pageY);else{const ft=dt(pe),ge=.5*(pe.pageX+ft.x),Ee=.5*(pe.pageY+ft.y);M.set(ge,Ee)}S.subVectors(M,b).multiplyScalar(i.rotateSpeed);const Oe=i.domElement;Oe&&(W(2*Math.PI*S.x/Oe.clientHeight),Y(2*Math.PI*S.y/Oe.clientHeight)),b.copy(M)}function Ue(pe){if(L.length==1)A.set(pe.pageX,pe.pageY);else{const Oe=dt(pe),ft=.5*(pe.pageX+Oe.x),ge=.5*(pe.pageY+Oe.y);A.set(ft,ge)}E.subVectors(A,T).multiplyScalar(i.panSpeed),ee(E.x,E.y),T.copy(A)}function Ge(pe){const Oe=dt(pe),ft=pe.pageX-Oe.x,ge=pe.pageY-Oe.y,Ee=Math.sqrt(ft*ft+ge*ge);R.set(0,Ee),C.set(0,Math.pow(R.y/j.y,i.zoomSpeed)),ae(C.y),j.copy(R)}function nt(pe){i.enableZoom&&Ge(pe),i.enablePan&&Ue(pe)}function Ae(pe){i.enableZoom&&Ge(pe),i.enableRotate&&He(pe)}function at(pe){var Oe,ft;i.enabled!==!1&&(L.length===0&&((Oe=i.domElement)==null||Oe.ownerDocument.addEventListener("pointermove",ne),(ft=i.domElement)==null||ft.ownerDocument.addEventListener("pointerup",Z)),Nt(pe),pe.pointerType==="touch"?yt(pe):xe(pe))}function ne(pe){i.enabled!==!1&&(pe.pointerType==="touch"?vt(pe):Xe(pe))}function Z(pe){var Oe,ft,ge;We(pe),L.length===0&&((Oe=i.domElement)==null||Oe.releasePointerCapture(pe.pointerId),(ft=i.domElement)==null||ft.ownerDocument.removeEventListener("pointermove",ne),(ge=i.domElement)==null||ge.ownerDocument.removeEventListener("pointerup",Z)),i.dispatchEvent(s),l=o.NONE}function xe(pe){let Oe;switch(pe.button){case 0:Oe=i.mouseButtons.LEFT;break;case 1:Oe=i.mouseButtons.MIDDLE;break;case 2:Oe=i.mouseButtons.RIGHT;break;default:Oe=-1}switch(Oe){case m0.DOLLY:if(i.enableZoom===!1)return;me(pe),l=o.DOLLY;break;case m0.ROTATE:if(pe.ctrlKey||pe.metaKey||pe.shiftKey){if(i.enablePan===!1)return;fe(pe),l=o.PAN}else{if(i.enableRotate===!1)return;ue(pe),l=o.ROTATE}break;case m0.PAN:if(pe.ctrlKey||pe.metaKey||pe.shiftKey){if(i.enableRotate===!1)return;ue(pe),l=o.ROTATE}else{if(i.enablePan===!1)return;fe(pe),l=o.PAN}break;default:l=o.NONE}l!==o.NONE&&i.dispatchEvent(a)}function Xe(pe){if(i.enabled!==!1)switch(l){case o.ROTATE:if(i.enableRotate===!1)return;de(pe);break;case o.DOLLY:if(i.enableZoom===!1)return;_e(pe);break;case o.PAN:if(i.enablePan===!1)return;Te(pe);break}}function Be(pe){i.enabled===!1||i.enableZoom===!1||l!==o.NONE&&l!==o.ROTATE||(pe.preventDefault(),i.dispatchEvent(a),Ie(pe),i.dispatchEvent(s))}function Ne(pe){i.enabled===!1||i.enablePan===!1||Re(pe)}function yt(pe){switch(qe(pe),L.length){case 1:switch(i.touches.ONE){case g0.ROTATE:if(i.enableRotate===!1)return;ye(),l=o.TOUCH_ROTATE;break;case g0.PAN:if(i.enablePan===!1)return;ct(),l=o.TOUCH_PAN;break;default:l=o.NONE}break;case 2:switch(i.touches.TWO){case g0.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;re(),l=o.TOUCH_DOLLY_PAN;break;case g0.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Le(),l=o.TOUCH_DOLLY_ROTATE;break;default:l=o.NONE}break;default:l=o.NONE}l!==o.NONE&&i.dispatchEvent(a)}function vt(pe){switch(qe(pe),l){case o.TOUCH_ROTATE:if(i.enableRotate===!1)return;He(pe),i.update();break;case o.TOUCH_PAN:if(i.enablePan===!1)return;Ue(pe),i.update();break;case o.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;nt(pe),i.update();break;case o.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Ae(pe),i.update();break;default:l=o.NONE}}function Dt(pe){i.enabled!==!1&&pe.preventDefault()}function Nt(pe){L.push(pe)}function We(pe){delete F[pe.pointerId];for(let Oe=0;Oe<L.length;Oe++)if(L[Oe].pointerId==pe.pointerId){L.splice(Oe,1);return}}function qe(pe){let Oe=F[pe.pointerId];Oe===void 0&&(Oe=new Ye,F[pe.pointerId]=Oe),Oe.set(pe.pageX,pe.pageY)}function dt(pe){const Oe=pe.pointerId===L[0].pointerId?L[1]:L[0];return F[Oe.pointerId]}this.dollyIn=(pe=H())=>{q(pe),i.update()},this.dollyOut=(pe=H())=>{ae(pe),i.update()},this.getScale=()=>g,this.setScale=pe=>{te(pe),i.update()},this.getZoomScale=()=>H(),n!==void 0&&this.connect(n),this.update()}};const lce={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},cce={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `};class uce extends hD{constructor(e){super(e),this.type=Pr}parse(e){const s=function(U,I){switch(U){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(I||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(I||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(I||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(I||""))}},p=function(U,I,L){I=I||1024;let G=U.pos,H=-1,W=0,Y="",k=String.fromCharCode.apply(null,new Uint16Array(U.subarray(G,G+128)));for(;0>(H=k.indexOf(`
`))&&W<I&&G<U.byteLength;)Y+=k,W+=k.length,G+=128,k+=String.fromCharCode.apply(null,new Uint16Array(U.subarray(G,G+128)));return-1<H?(U.pos+=W+H+1,Y+k.slice(0,H)):!1},g=function(U){const I=/^#\?(\S+)/,L=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,F=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,G=/^\s*FORMAT=(\S+)\s*$/,H=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,W={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let Y,k;for((U.pos>=U.byteLength||!(Y=p(U)))&&s(1,"no header found"),(k=Y.match(I))||s(3,"bad initial token"),W.valid|=1,W.programtype=k[1],W.string+=Y+`
`;Y=p(U),Y!==!1;){if(W.string+=Y+`
`,Y.charAt(0)==="#"){W.comments+=Y+`
`;continue}if((k=Y.match(L))&&(W.gamma=parseFloat(k[1])),(k=Y.match(F))&&(W.exposure=parseFloat(k[1])),(k=Y.match(G))&&(W.valid|=2,W.format=k[1]),(k=Y.match(H))&&(W.valid|=4,W.height=parseInt(k[1],10),W.width=parseInt(k[2],10)),W.valid&2&&W.valid&4)break}return W.valid&2||s(3,"missing format specifier"),W.valid&4||s(3,"missing image size specifier"),W},x=function(U,I,L){const F=I;if(F<8||F>32767||U[0]!==2||U[1]!==2||U[2]&128)return new Uint8Array(U);F!==(U[2]<<8|U[3])&&s(3,"wrong scanline width");const G=new Uint8Array(4*I*L);G.length||s(4,"unable to allocate buffer space");let H=0,W=0;const Y=4*F,k=new Uint8Array(4),$=new Uint8Array(Y);let ee=L;for(;ee>0&&W<U.byteLength;){W+4>U.byteLength&&s(1),k[0]=U[W++],k[1]=U[W++],k[2]=U[W++],k[3]=U[W++],(k[0]!=2||k[1]!=2||(k[2]<<8|k[3])!=F)&&s(3,"bad rgbe scanline format");let te=0,ae;for(;te<Y&&W<U.byteLength;){ae=U[W++];const K=ae>128;if(K&&(ae-=128),(ae===0||te+ae>Y)&&s(3,"bad scanline data"),K){const ie=U[W++];for(let ue=0;ue<ae;ue++)$[te++]=ie}else $.set(U.subarray(W,W+ae),te),te+=ae,W+=ae}const q=F;for(let K=0;K<q;K++){let ie=0;G[H]=$[K+ie],ie+=F,G[H+1]=$[K+ie],ie+=F,G[H+2]=$[K+ie],ie+=F,G[H+3]=$[K+ie],H+=4}ee--}return G},b=function(U,I,L,F){const G=U[I+3],H=Math.pow(2,G-128)/255;L[F+0]=U[I+0]*H,L[F+1]=U[I+1]*H,L[F+2]=U[I+2]*H,L[F+3]=1},M=function(U,I,L,F){const G=U[I+3],H=Math.pow(2,G-128)/255;L[F+0]=A0.toHalfFloat(Math.min(U[I+0]*H,65504)),L[F+1]=A0.toHalfFloat(Math.min(U[I+1]*H,65504)),L[F+2]=A0.toHalfFloat(Math.min(U[I+2]*H,65504)),L[F+3]=A0.toHalfFloat(1)},S=new Uint8Array(e);S.pos=0;const T=g(S),A=T.width,E=T.height,j=x(S.subarray(S.pos),A,E);let R,C,D;switch(this.type){case fr:D=j.length/4;const U=new Float32Array(D*4);for(let L=0;L<D;L++)b(j,L*4,U,L*4);R=U,C=fr;break;case Pr:D=j.length/4;const I=new Uint16Array(D*4);for(let L=0;L<D;L++)M(j,L*4,I,L*4);R=I,C=Pr;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:A,height:E,data:R,header:T.string,gamma:T.gamma,exposure:T.exposure,type:C}}setDataType(e){return this.type=e,this}load(e,n,i,r){function a(s,o){switch(s.type){case fr:case Pr:"colorSpace"in s?s.colorSpace="srgb-linear":s.encoding=3e3,s.minFilter=Rn,s.magFilter=Rn,s.generateMipmaps=!1,s.flipY=!0;break}n&&n(s,o)}return super.load(e,a,i,r)}}const $x=UT>=152;class fce extends hD{constructor(e){super(e),this.type=Pr}parse(e){const I=Math.pow(2.7182818,2.2);function L(Q,ce){for(var we=0,Qe=0;Qe<65536;++Qe)(Qe==0||Q[Qe>>3]&1<<(Qe&7))&&(ce[we++]=Qe);for(var st=we-1;we<65536;)ce[we++]=0;return st}function F(Q){for(var ce=0;ce<16384;ce++)Q[ce]={},Q[ce].len=0,Q[ce].lit=0,Q[ce].p=null}const G={l:0,c:0,lc:0};function H(Q,ce,we,Qe,st){for(;we<Q;)ce=ce<<8|dt(Qe,st),we+=8;we-=Q,G.l=ce>>we&(1<<Q)-1,G.c=ce,G.lc=we}const W=new Array(59);function Y(Q){for(var ce=0;ce<=58;++ce)W[ce]=0;for(var ce=0;ce<65537;++ce)W[Q[ce]]+=1;for(var we=0,ce=58;ce>0;--ce){var Qe=we+W[ce]>>1;W[ce]=we,we=Qe}for(var ce=0;ce<65537;++ce){var st=Q[ce];st>0&&(Q[ce]=st|W[st]++<<6)}}function k(Q,ce,we,Qe,st,rt,jt){for(var Tt=we,_t=0,J=0;st<=rt;st++){if(Tt.value-we.value>Qe)return!1;H(6,_t,J,Q,Tt);var ve=G.l;if(_t=G.c,J=G.lc,jt[st]=ve,ve==63){if(Tt.value-we.value>Qe)throw"Something wrong with hufUnpackEncTable";H(8,_t,J,Q,Tt);var he=G.l+6;if(_t=G.c,J=G.lc,st+he>rt+1)throw"Something wrong with hufUnpackEncTable";for(;he--;)jt[st++]=0;st--}else if(ve>=59){var he=ve-59+2;if(st+he>rt+1)throw"Something wrong with hufUnpackEncTable";for(;he--;)jt[st++]=0;st--}}Y(jt)}function $(Q){return Q&63}function ee(Q){return Q>>6}function te(Q,ce,we,Qe){for(;ce<=we;ce++){var st=ee(Q[ce]),rt=$(Q[ce]);if(st>>rt)throw"Invalid table entry";if(rt>14){var jt=Qe[st>>rt-14];if(jt.len)throw"Invalid table entry";if(jt.lit++,jt.p){var Tt=jt.p;jt.p=new Array(jt.lit);for(var _t=0;_t<jt.lit-1;++_t)jt.p[_t]=Tt[_t]}else jt.p=new Array(1);jt.p[jt.lit-1]=ce}else if(rt)for(var J=0,_t=1<<14-rt;_t>0;_t--){var jt=Qe[(st<<14-rt)+J];if(jt.len||jt.p)throw"Invalid table entry";jt.len=rt,jt.lit=ce,J++}}return!0}const ae={c:0,lc:0};function q(Q,ce,we,Qe){Q=Q<<8|dt(we,Qe),ce+=8,ae.c=Q,ae.lc=ce}const K={c:0,lc:0};function ie(Q,ce,we,Qe,st,rt,jt,Tt,_t,J){if(Q==ce){Qe<8&&(q(we,Qe,st,jt),we=ae.c,Qe=ae.lc),Qe-=8;var ve=we>>Qe,ve=new Uint8Array([ve])[0];if(_t.value+ve>J)return!1;for(var he=Tt[_t.value-1];ve-- >0;)Tt[_t.value++]=he}else if(_t.value<J)Tt[_t.value++]=Q;else return!1;K.c=we,K.lc=Qe}function ue(Q){return Q&65535}function me(Q){var ce=ue(Q);return ce>32767?ce-65536:ce}const fe={a:0,b:0};function de(Q,ce){var we=me(Q),Qe=me(ce),st=Qe,rt=we+(st&1)+(st>>1),jt=rt,Tt=rt-st;fe.a=jt,fe.b=Tt}function _e(Q,ce){var we=ue(Q),Qe=ue(ce),st=we-(Qe>>1)&65535,rt=Qe+st-32768&65535;fe.a=rt,fe.b=st}function Te(Q,ce,we,Qe,st,rt,jt){for(var Tt=jt<16384,_t=we>st?st:we,J=1,ve;J<=_t;)J<<=1;for(J>>=1,ve=J,J>>=1;J>=1;){for(var he=0,Pe=he+rt*(st-ve),be=rt*J,et=rt*ve,ht=Qe*J,Mt=Qe*ve,Rt,Lt,Ft,Vt;he<=Pe;he+=et){for(var Ht=he,gn=he+Qe*(we-ve);Ht<=gn;Ht+=Mt){var Jt=Ht+ht,sn=Ht+be,_n=sn+ht;Tt?(de(Q[Ht+ce],Q[sn+ce]),Rt=fe.a,Ft=fe.b,de(Q[Jt+ce],Q[_n+ce]),Lt=fe.a,Vt=fe.b,de(Rt,Lt),Q[Ht+ce]=fe.a,Q[Jt+ce]=fe.b,de(Ft,Vt),Q[sn+ce]=fe.a,Q[_n+ce]=fe.b):(_e(Q[Ht+ce],Q[sn+ce]),Rt=fe.a,Ft=fe.b,_e(Q[Jt+ce],Q[_n+ce]),Lt=fe.a,Vt=fe.b,_e(Rt,Lt),Q[Ht+ce]=fe.a,Q[Jt+ce]=fe.b,_e(Ft,Vt),Q[sn+ce]=fe.a,Q[_n+ce]=fe.b)}if(we&J){var sn=Ht+be;Tt?de(Q[Ht+ce],Q[sn+ce]):_e(Q[Ht+ce],Q[sn+ce]),Rt=fe.a,Q[sn+ce]=fe.b,Q[Ht+ce]=Rt}}if(st&J)for(var Ht=he,gn=he+Qe*(we-ve);Ht<=gn;Ht+=Mt){var Jt=Ht+ht;Tt?de(Q[Ht+ce],Q[Jt+ce]):_e(Q[Ht+ce],Q[Jt+ce]),Rt=fe.a,Q[Jt+ce]=fe.b,Q[Ht+ce]=Rt}ve=J,J>>=1}return he}function Ie(Q,ce,we,Qe,st,rt,jt,Tt,_t,J){for(var ve=0,he=0,Pe=Tt,be=Math.trunc(st.value+(rt+7)/8);st.value<be;)for(q(ve,he,we,st),ve=ae.c,he=ae.lc;he>=14;){var et=ve>>he-14&16383,ht=ce[et];if(ht.len)he-=ht.len,ie(ht.lit,jt,ve,he,we,Qe,st,_t,J,Pe),ve=K.c,he=K.lc;else{if(!ht.p)throw"hufDecode issues";var Mt;for(Mt=0;Mt<ht.lit;Mt++){for(var Rt=$(Q[ht.p[Mt]]);he<Rt&&st.value<be;)q(ve,he,we,st),ve=ae.c,he=ae.lc;if(he>=Rt&&ee(Q[ht.p[Mt]])==(ve>>he-Rt&(1<<Rt)-1)){he-=Rt,ie(ht.p[Mt],jt,ve,he,we,Qe,st,_t,J,Pe),ve=K.c,he=K.lc;break}}if(Mt==ht.lit)throw"hufDecode issues"}}var Lt=8-rt&7;for(ve>>=Lt,he-=Lt;he>0;){var ht=ce[ve<<14-he&16383];if(ht.len)he-=ht.len,ie(ht.lit,jt,ve,he,we,Qe,st,_t,J,Pe),ve=K.c,he=K.lc;else throw"hufDecode issues"}return!0}function Re(Q,ce,we,Qe,st,rt){var jt={value:0},Tt=we.value,_t=qe(ce,we),J=qe(ce,we);we.value+=4;var ve=qe(ce,we);if(we.value+=4,_t<0||_t>=65537||J<0||J>=65537)throw"Something wrong with HUF_ENCSIZE";var he=new Array(65537),Pe=new Array(16384);F(Pe);var be=Qe-(we.value-Tt);if(k(Q,ce,we,be,_t,J,he),ve>8*(Qe-(we.value-Tt)))throw"Something wrong with hufUncompress";te(he,_t,J,Pe),Ie(he,Pe,Q,ce,we,ve,J,rt,st,jt)}function ye(Q,ce,we){for(var Qe=0;Qe<we;++Qe)ce[Qe]=Q[ce[Qe]]}function ct(Q){for(var ce=1;ce<Q.length;ce++){var we=Q[ce-1]+Q[ce]-128;Q[ce]=we}}function Ce(Q,ce){for(var we=0,Qe=Math.floor((Q.length+1)/2),st=0,rt=Q.length-1;!(st>rt||(ce[st++]=Q[we++],st>rt));)ce[st++]=Q[Qe++]}function re(Q){for(var ce=Q.byteLength,we=new Array,Qe=0,st=new DataView(Q);ce>0;){var rt=st.getInt8(Qe++);if(rt<0){var jt=-rt;ce-=jt+1;for(var Tt=0;Tt<jt;Tt++)we.push(st.getUint8(Qe++))}else{var jt=rt;ce-=2;for(var _t=st.getUint8(Qe++),Tt=0;Tt<jt+1;Tt++)we.push(_t)}}return we}function Le(Q,ce,we,Qe,st,rt){var Jt=new DataView(rt.buffer),jt=we[Q.idx[0]].width,Tt=we[Q.idx[0]].height,_t=3,J=Math.floor(jt/8),ve=Math.ceil(jt/8),he=Math.ceil(Tt/8),Pe=jt-(ve-1)*8,be=Tt-(he-1)*8,et={value:0},ht=new Array(_t),Mt=new Array(_t),Rt=new Array(_t),Lt=new Array(_t),Ft=new Array(_t);for(let Zt=0;Zt<_t;++Zt)Ft[Zt]=ce[Q.idx[Zt]],ht[Zt]=Zt<1?0:ht[Zt-1]+ve*he,Mt[Zt]=new Float32Array(64),Rt[Zt]=new Uint16Array(64),Lt[Zt]=new Uint16Array(ve*64);for(let Zt=0;Zt<he;++Zt){var Vt=8;Zt==he-1&&(Vt=be);var Ht=8;for(let Hn=0;Hn<ve;++Hn){Hn==ve-1&&(Ht=Pe);for(let Kt=0;Kt<_t;++Kt)Rt[Kt].fill(0),Rt[Kt][0]=st[ht[Kt]++],He(et,Qe,Rt[Kt]),Ue(Rt[Kt],Mt[Kt]),Ge(Mt[Kt]);nt(Mt);for(let Kt=0;Kt<_t;++Kt)Ae(Mt[Kt],Lt[Kt],Hn*64)}let Dn=0;for(let Hn=0;Hn<_t;++Hn){const Kt=we[Q.idx[Hn]].type;for(let Xi=8*Zt;Xi<8*Zt+Vt;++Xi){Dn=Ft[Hn][Xi];for(let Un=0;Un<J;++Un){const kn=Un*64+(Xi&7)*8;Jt.setUint16(Dn+0*Kt,Lt[Hn][kn+0],!0),Jt.setUint16(Dn+2*Kt,Lt[Hn][kn+1],!0),Jt.setUint16(Dn+4*Kt,Lt[Hn][kn+2],!0),Jt.setUint16(Dn+6*Kt,Lt[Hn][kn+3],!0),Jt.setUint16(Dn+8*Kt,Lt[Hn][kn+4],!0),Jt.setUint16(Dn+10*Kt,Lt[Hn][kn+5],!0),Jt.setUint16(Dn+12*Kt,Lt[Hn][kn+6],!0),Jt.setUint16(Dn+14*Kt,Lt[Hn][kn+7],!0),Dn+=16*Kt}}if(J!=ve)for(let Xi=8*Zt;Xi<8*Zt+Vt;++Xi){const Un=Ft[Hn][Xi]+8*J*2*Kt,kn=J*64+(Xi&7)*8;for(let pi=0;pi<Ht;++pi)Jt.setUint16(Un+pi*2*Kt,Lt[Hn][kn+pi],!0)}}}for(var gn=new Uint16Array(jt),Jt=new DataView(rt.buffer),sn=0;sn<_t;++sn){we[Q.idx[sn]].decoded=!0;var _n=we[Q.idx[sn]].type;if(we[sn].type==2)for(var en=0;en<Tt;++en){const Zt=Ft[sn][en];for(var vn=0;vn<jt;++vn)gn[vn]=Jt.getUint16(Zt+vn*2*_n,!0);for(var vn=0;vn<jt;++vn)Jt.setFloat32(Zt+vn*2*_n,Ee(gn[vn]),!0)}}}function He(Q,ce,we){for(var Qe,st=1;st<64;)Qe=ce[Q.value],Qe==65280?st=64:Qe>>8==255?st+=Qe&255:(we[st]=Qe,st++),Q.value++}function Ue(Q,ce){ce[0]=Ee(Q[0]),ce[1]=Ee(Q[1]),ce[2]=Ee(Q[5]),ce[3]=Ee(Q[6]),ce[4]=Ee(Q[14]),ce[5]=Ee(Q[15]),ce[6]=Ee(Q[27]),ce[7]=Ee(Q[28]),ce[8]=Ee(Q[2]),ce[9]=Ee(Q[4]),ce[10]=Ee(Q[7]),ce[11]=Ee(Q[13]),ce[12]=Ee(Q[16]),ce[13]=Ee(Q[26]),ce[14]=Ee(Q[29]),ce[15]=Ee(Q[42]),ce[16]=Ee(Q[3]),ce[17]=Ee(Q[8]),ce[18]=Ee(Q[12]),ce[19]=Ee(Q[17]),ce[20]=Ee(Q[25]),ce[21]=Ee(Q[30]),ce[22]=Ee(Q[41]),ce[23]=Ee(Q[43]),ce[24]=Ee(Q[9]),ce[25]=Ee(Q[11]),ce[26]=Ee(Q[18]),ce[27]=Ee(Q[24]),ce[28]=Ee(Q[31]),ce[29]=Ee(Q[40]),ce[30]=Ee(Q[44]),ce[31]=Ee(Q[53]),ce[32]=Ee(Q[10]),ce[33]=Ee(Q[19]),ce[34]=Ee(Q[23]),ce[35]=Ee(Q[32]),ce[36]=Ee(Q[39]),ce[37]=Ee(Q[45]),ce[38]=Ee(Q[52]),ce[39]=Ee(Q[54]),ce[40]=Ee(Q[20]),ce[41]=Ee(Q[22]),ce[42]=Ee(Q[33]),ce[43]=Ee(Q[38]),ce[44]=Ee(Q[46]),ce[45]=Ee(Q[51]),ce[46]=Ee(Q[55]),ce[47]=Ee(Q[60]),ce[48]=Ee(Q[21]),ce[49]=Ee(Q[34]),ce[50]=Ee(Q[37]),ce[51]=Ee(Q[47]),ce[52]=Ee(Q[50]),ce[53]=Ee(Q[56]),ce[54]=Ee(Q[59]),ce[55]=Ee(Q[61]),ce[56]=Ee(Q[35]),ce[57]=Ee(Q[36]),ce[58]=Ee(Q[48]),ce[59]=Ee(Q[49]),ce[60]=Ee(Q[57]),ce[61]=Ee(Q[58]),ce[62]=Ee(Q[62]),ce[63]=Ee(Q[63])}function Ge(Q){const ce=.5*Math.cos(.7853975),we=.5*Math.cos(3.14159/16),Qe=.5*Math.cos(3.14159/8),st=.5*Math.cos(3*3.14159/16),rt=.5*Math.cos(5*3.14159/16),jt=.5*Math.cos(3*3.14159/8),Tt=.5*Math.cos(7*3.14159/16);for(var _t=new Array(4),J=new Array(4),ve=new Array(4),he=new Array(4),Pe=0;Pe<8;++Pe){var be=Pe*8;_t[0]=Qe*Q[be+2],_t[1]=jt*Q[be+2],_t[2]=Qe*Q[be+6],_t[3]=jt*Q[be+6],J[0]=we*Q[be+1]+st*Q[be+3]+rt*Q[be+5]+Tt*Q[be+7],J[1]=st*Q[be+1]-Tt*Q[be+3]-we*Q[be+5]-rt*Q[be+7],J[2]=rt*Q[be+1]-we*Q[be+3]+Tt*Q[be+5]+st*Q[be+7],J[3]=Tt*Q[be+1]-rt*Q[be+3]+st*Q[be+5]-we*Q[be+7],ve[0]=ce*(Q[be+0]+Q[be+4]),ve[3]=ce*(Q[be+0]-Q[be+4]),ve[1]=_t[0]+_t[3],ve[2]=_t[1]-_t[2],he[0]=ve[0]+ve[1],he[1]=ve[3]+ve[2],he[2]=ve[3]-ve[2],he[3]=ve[0]-ve[1],Q[be+0]=he[0]+J[0],Q[be+1]=he[1]+J[1],Q[be+2]=he[2]+J[2],Q[be+3]=he[3]+J[3],Q[be+4]=he[3]-J[3],Q[be+5]=he[2]-J[2],Q[be+6]=he[1]-J[1],Q[be+7]=he[0]-J[0]}for(var et=0;et<8;++et)_t[0]=Qe*Q[16+et],_t[1]=jt*Q[16+et],_t[2]=Qe*Q[48+et],_t[3]=jt*Q[48+et],J[0]=we*Q[8+et]+st*Q[24+et]+rt*Q[40+et]+Tt*Q[56+et],J[1]=st*Q[8+et]-Tt*Q[24+et]-we*Q[40+et]-rt*Q[56+et],J[2]=rt*Q[8+et]-we*Q[24+et]+Tt*Q[40+et]+st*Q[56+et],J[3]=Tt*Q[8+et]-rt*Q[24+et]+st*Q[40+et]-we*Q[56+et],ve[0]=ce*(Q[et]+Q[32+et]),ve[3]=ce*(Q[et]-Q[32+et]),ve[1]=_t[0]+_t[3],ve[2]=_t[1]-_t[2],he[0]=ve[0]+ve[1],he[1]=ve[3]+ve[2],he[2]=ve[3]-ve[2],he[3]=ve[0]-ve[1],Q[0+et]=he[0]+J[0],Q[8+et]=he[1]+J[1],Q[16+et]=he[2]+J[2],Q[24+et]=he[3]+J[3],Q[32+et]=he[3]-J[3],Q[40+et]=he[2]-J[2],Q[48+et]=he[1]-J[1],Q[56+et]=he[0]-J[0]}function nt(Q){for(var ce=0;ce<64;++ce){var we=Q[0][ce],Qe=Q[1][ce],st=Q[2][ce];Q[0][ce]=we+1.5747*st,Q[1][ce]=we-.1873*Qe-.4682*st,Q[2][ce]=we+1.8556*Qe}}function Ae(Q,ce,we){for(var Qe=0;Qe<64;++Qe)ce[we+Qe]=A0.toHalfFloat(at(Q[Qe]))}function at(Q){return Q<=1?Math.sign(Q)*Math.pow(Math.abs(Q),2.2):Math.sign(Q)*Math.pow(I,Math.abs(Q)-1)}function ne(Q){return new DataView(Q.array.buffer,Q.offset.value,Q.size)}function Z(Q){var ce=Q.viewer.buffer.slice(Q.offset.value,Q.offset.value+Q.size),we=new Uint8Array(re(ce)),Qe=new Uint8Array(we.length);return ct(we),Ce(we,Qe),new DataView(Qe.buffer)}function xe(Q){var ce=Q.array.slice(Q.offset.value,Q.offset.value+Q.size),we=KS(ce),Qe=new Uint8Array(we.length);return ct(we),Ce(we,Qe),new DataView(Qe.buffer)}function Xe(Q){for(var ce=Q.viewer,we={value:Q.offset.value},Qe=new Uint16Array(Q.width*Q.scanlineBlockSize*(Q.channels*Q.type)),st=new Uint8Array(8192),rt=0,jt=new Array(Q.channels),Tt=0;Tt<Q.channels;Tt++)jt[Tt]={},jt[Tt].start=rt,jt[Tt].end=jt[Tt].start,jt[Tt].nx=Q.width,jt[Tt].ny=Q.lines,jt[Tt].size=Q.type,rt+=jt[Tt].nx*jt[Tt].ny*jt[Tt].size;var _t=ut(ce,we),J=ut(ce,we);if(J>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(_t<=J)for(var Tt=0;Tt<J-_t+1;Tt++)st[Tt+_t]=pe(ce,we);var ve=new Uint16Array(65536),he=L(st,ve),Pe=qe(ce,we);Re(Q.array,ce,we,Pe,Qe,rt);for(var Tt=0;Tt<Q.channels;++Tt)for(var be=jt[Tt],et=0;et<jt[Tt].size;++et)Te(Qe,be.start+et,be.nx,be.size,be.ny,be.nx*be.size,he);ye(ve,Qe,rt);for(var ht=0,Mt=new Uint8Array(Qe.buffer.byteLength),Rt=0;Rt<Q.lines;Rt++)for(var Lt=0;Lt<Q.channels;Lt++){var be=jt[Lt],Ft=be.nx*be.size,Vt=new Uint8Array(Qe.buffer,be.end*2,Ft*2);Mt.set(Vt,ht),ht+=Ft*2,be.end+=Ft}return new DataView(Mt.buffer)}function Be(Q){var ce=Q.array.slice(Q.offset.value,Q.offset.value+Q.size),we=KS(ce);const Qe=Q.lines*Q.channels*Q.width,st=Q.type==1?new Uint16Array(Qe):new Uint32Array(Qe);let rt=0,jt=0;const Tt=new Array(4);for(let _t=0;_t<Q.lines;_t++)for(let J=0;J<Q.channels;J++){let ve=0;switch(Q.type){case 1:Tt[0]=rt,Tt[1]=Tt[0]+Q.width,rt=Tt[1]+Q.width;for(let he=0;he<Q.width;++he){const Pe=we[Tt[0]++]<<8|we[Tt[1]++];ve+=Pe,st[jt]=ve,jt++}break;case 2:Tt[0]=rt,Tt[1]=Tt[0]+Q.width,Tt[2]=Tt[1]+Q.width,rt=Tt[2]+Q.width;for(let he=0;he<Q.width;++he){const Pe=we[Tt[0]++]<<24|we[Tt[1]++]<<16|we[Tt[2]++]<<8;ve+=Pe,st[jt]=ve,jt++}break}}return new DataView(st.buffer)}function Ne(Q){var ce=Q.viewer,we={value:Q.offset.value},Qe=new Uint8Array(Q.width*Q.lines*(Q.channels*Q.type*2)),st={version:Oe(ce,we),unknownUncompressedSize:Oe(ce,we),unknownCompressedSize:Oe(ce,we),acCompressedSize:Oe(ce,we),dcCompressedSize:Oe(ce,we),rleCompressedSize:Oe(ce,we),rleUncompressedSize:Oe(ce,we),rleRawSize:Oe(ce,we),totalAcUncompressedCount:Oe(ce,we),totalDcUncompressedCount:Oe(ce,we),acCompression:Oe(ce,we)};if(st.version<2)throw"EXRLoader.parse: "+Fi.compression+" version "+st.version+" is unsupported";for(var rt=new Array,jt=ut(ce,we)-2;jt>0;){var Tt=yt(ce.buffer,we),_t=pe(ce,we),J=_t>>2&3,ve=(_t>>4)-1,he=new Int8Array([ve])[0],Pe=pe(ce,we);rt.push({name:Tt,index:he,type:Pe,compression:J}),jt-=Tt.length+3}for(var be=Fi.channels,et=new Array(Q.channels),ht=0;ht<Q.channels;++ht){var Mt=et[ht]={},Rt=be[ht];Mt.name=Rt.name,Mt.compression=0,Mt.decoded=!1,Mt.type=Rt.pixelType,Mt.pLinear=Rt.pLinear,Mt.width=Q.width,Mt.height=Q.lines}for(var Lt={idx:new Array(3)},Ft=0;Ft<Q.channels;++Ft)for(var Mt=et[Ft],ht=0;ht<rt.length;++ht){var Vt=rt[ht];Mt.name==Vt.name&&(Mt.compression=Vt.compression,Vt.index>=0&&(Lt.idx[Vt.index]=Ft),Mt.offset=Ft)}if(st.acCompressedSize>0)switch(st.acCompression){case 0:var Jt=new Uint16Array(st.totalAcUncompressedCount);Re(Q.array,ce,we,st.acCompressedSize,Jt,st.totalAcUncompressedCount);break;case 1:var Ht=Q.array.slice(we.value,we.value+st.totalAcUncompressedCount),gn=KS(Ht),Jt=new Uint16Array(gn.buffer);we.value+=st.totalAcUncompressedCount;break}if(st.dcCompressedSize>0){var sn={array:Q.array,offset:we,size:st.dcCompressedSize},_n=new Uint16Array(xe(sn).buffer);we.value+=st.dcCompressedSize}if(st.rleRawSize>0){var Ht=Q.array.slice(we.value,we.value+st.rleCompressedSize),gn=KS(Ht),en=re(gn.buffer);we.value+=st.rleCompressedSize}for(var vn=0,Zt=new Array(et.length),ht=0;ht<Zt.length;++ht)Zt[ht]=new Array;for(var Dn=0;Dn<Q.lines;++Dn)for(var Hn=0;Hn<et.length;++Hn)Zt[Hn].push(vn),vn+=et[Hn].width*Q.type*2;Le(Lt,Zt,et,Jt,_n,Qe);for(var ht=0;ht<et.length;++ht){var Mt=et[ht];if(!Mt.decoded)switch(Mt.compression){case 2:for(var Kt=0,Xi=0,Dn=0;Dn<Q.lines;++Dn){for(var Un=Zt[ht][Kt],kn=0;kn<Mt.width;++kn){for(var pi=0;pi<2*Mt.type;++pi)Qe[Un++]=en[Xi+pi*Mt.width*Mt.height];Xi++}Kt++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(Qe.buffer)}function yt(Q,ce){for(var we=new Uint8Array(Q),Qe=0;we[ce.value+Qe]!=0;)Qe+=1;var st=new TextDecoder().decode(we.slice(ce.value,ce.value+Qe));return ce.value=ce.value+Qe+1,st}function vt(Q,ce,we){var Qe=new TextDecoder().decode(new Uint8Array(Q).slice(ce.value,ce.value+we));return ce.value=ce.value+we,Qe}function Dt(Q,ce){var we=We(Q,ce),Qe=qe(Q,ce);return[we,Qe]}function Nt(Q,ce){var we=qe(Q,ce),Qe=qe(Q,ce);return[we,Qe]}function We(Q,ce){var we=Q.getInt32(ce.value,!0);return ce.value=ce.value+4,we}function qe(Q,ce){var we=Q.getUint32(ce.value,!0);return ce.value=ce.value+4,we}function dt(Q,ce){var we=Q[ce.value];return ce.value=ce.value+1,we}function pe(Q,ce){var we=Q.getUint8(ce.value);return ce.value=ce.value+1,we}const Oe=function(Q,ce){let we;return"getBigInt64"in DataView.prototype?we=Number(Q.getBigInt64(ce.value,!0)):we=Q.getUint32(ce.value+4,!0)+Number(Q.getUint32(ce.value,!0)<<32),ce.value+=8,we};function ft(Q,ce){var we=Q.getFloat32(ce.value,!0);return ce.value+=4,we}function ge(Q,ce){return A0.toHalfFloat(ft(Q,ce))}function Ee(Q){var ce=(Q&31744)>>10,we=Q&1023;return(Q>>15?-1:1)*(ce?ce===31?we?NaN:1/0:Math.pow(2,ce-15)*(1+we/1024):6103515625e-14*(we/1024))}function ut(Q,ce){var we=Q.getUint16(ce.value,!0);return ce.value+=2,we}function At(Q,ce){return Ee(ut(Q,ce))}function lt(Q,ce,we,Qe){for(var st=we.value,rt=[];we.value<st+Qe-1;){var jt=yt(ce,we),Tt=We(Q,we),_t=pe(Q,we);we.value+=3;var J=We(Q,we),ve=We(Q,we);rt.push({name:jt,pixelType:Tt,pLinear:_t,xSampling:J,ySampling:ve})}return we.value+=1,rt}function Ze(Q,ce){var we=ft(Q,ce),Qe=ft(Q,ce),st=ft(Q,ce),rt=ft(Q,ce),jt=ft(Q,ce),Tt=ft(Q,ce),_t=ft(Q,ce),J=ft(Q,ce);return{redX:we,redY:Qe,greenX:st,greenY:rt,blueX:jt,blueY:Tt,whiteX:_t,whiteY:J}}function Ct(Q,ce){var we=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Qe=pe(Q,ce);return we[Qe]}function Ut(Q,ce){var we=qe(Q,ce),Qe=qe(Q,ce),st=qe(Q,ce),rt=qe(Q,ce);return{xMin:we,yMin:Qe,xMax:st,yMax:rt}}function Bt(Q,ce){var we=["INCREASING_Y"],Qe=pe(Q,ce);return we[Qe]}function Yt(Q,ce){var we=ft(Q,ce),Qe=ft(Q,ce);return[we,Qe]}function On(Q,ce){var we=ft(Q,ce),Qe=ft(Q,ce),st=ft(Q,ce);return[we,Qe,st]}function Vn(Q,ce,we,Qe,st){if(Qe==="string"||Qe==="stringvector"||Qe==="iccProfile")return vt(ce,we,st);if(Qe==="chlist")return lt(Q,ce,we,st);if(Qe==="chromaticities")return Ze(Q,we);if(Qe==="compression")return Ct(Q,we);if(Qe==="box2i")return Ut(Q,we);if(Qe==="lineOrder")return Bt(Q,we);if(Qe==="float")return ft(Q,we);if(Qe==="v2f")return Yt(Q,we);if(Qe==="v3f")return On(Q,we);if(Qe==="int")return We(Q,we);if(Qe==="rational")return Dt(Q,we);if(Qe==="timecode")return Nt(Q,we);if(Qe==="preview")return we.value+=st,"skipped";we.value+=st}function Ii(Q,ce,we){const Qe={};if(Q.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";Qe.version=Q.getUint8(4);const st=Q.getUint8(5);Qe.spec={singleTile:!!(st&2),longName:!!(st&4),deepFormat:!!(st&8),multiPart:!!(st&16)},we.value=8;for(var rt=!0;rt;){var jt=yt(ce,we);if(jt==0)rt=!1;else{var Tt=yt(ce,we),_t=qe(Q,we),J=Vn(Q,ce,we,Tt,_t);J===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${Tt}'.`):Qe[jt]=J}}if((st&-5)!=0)throw console.error("EXRHeader:",Qe),"THREE.EXRLoader: provided file is currently unsupported.";return Qe}function Tr(Q,ce,we,Qe,st){const rt={size:0,viewer:ce,array:we,offset:Qe,width:Q.dataWindow.xMax-Q.dataWindow.xMin+1,height:Q.dataWindow.yMax-Q.dataWindow.yMin+1,channels:Q.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:Q.channels[0].pixelType,uncompress:null,getter:null,format:null,[$x?"colorSpace":"encoding"]:null};switch(Q.compression){case"NO_COMPRESSION":rt.lines=1,rt.uncompress=ne;break;case"RLE_COMPRESSION":rt.lines=1,rt.uncompress=Z;break;case"ZIPS_COMPRESSION":rt.lines=1,rt.uncompress=xe;break;case"ZIP_COMPRESSION":rt.lines=16,rt.uncompress=xe;break;case"PIZ_COMPRESSION":rt.lines=32,rt.uncompress=Xe;break;case"PXR24_COMPRESSION":rt.lines=16,rt.uncompress=Be;break;case"DWAA_COMPRESSION":rt.lines=32,rt.uncompress=Ne;break;case"DWAB_COMPRESSION":rt.lines=256,rt.uncompress=Ne;break;default:throw"EXRLoader.parse: "+Q.compression+" is unsupported"}if(rt.scanlineBlockSize=rt.lines,rt.type==1)switch(st){case fr:rt.getter=At,rt.inputSize=2;break;case Pr:rt.getter=ut,rt.inputSize=2;break}else if(rt.type==2)switch(st){case fr:rt.getter=ft,rt.inputSize=4;break;case Pr:rt.getter=ge,rt.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+rt.type+" for "+Q.compression+".";rt.blockCount=(Q.dataWindow.yMax+1)/rt.scanlineBlockSize;for(var jt=0;jt<rt.blockCount;jt++)Oe(ce,Qe);rt.outputChannels=rt.channels==3?4:rt.channels;const Tt=rt.width*rt.height*rt.outputChannels;switch(st){case fr:rt.byteArray=new Float32Array(Tt),rt.channels<rt.outputChannels&&rt.byteArray.fill(1,0,Tt);break;case Pr:rt.byteArray=new Uint16Array(Tt),rt.channels<rt.outputChannels&&rt.byteArray.fill(15360,0,Tt);break;default:console.error("THREE.EXRLoader: unsupported type: ",st);break}return rt.bytesPerLine=rt.width*rt.inputSize*rt.channels,rt.outputChannels==4?rt.format=Sr:rt.format=np,$x?rt.colorSpace="srgb-linear":rt.encoding=3e3,rt}const wr=new DataView(e),bi=new Uint8Array(e),sr={value:0},Fi=Ii(wr,e,sr),rn=Tr(Fi,wr,bi,sr,this.type),Qn={value:0},dn={R:0,G:1,B:2,A:3,Y:0};for(let Q=0;Q<rn.height/rn.scanlineBlockSize;Q++){const ce=qe(wr,sr);rn.size=qe(wr,sr),rn.lines=ce+rn.scanlineBlockSize>rn.height?rn.height-ce:rn.scanlineBlockSize;const Qe=rn.size<rn.lines*rn.bytesPerLine?rn.uncompress(rn):ne(rn);sr.value+=rn.size;for(let st=0;st<rn.scanlineBlockSize;st++){const rt=st+Q*rn.scanlineBlockSize;if(rt>=rn.height)break;for(let jt=0;jt<rn.channels;jt++){const Tt=dn[Fi.channels[jt].name];for(let _t=0;_t<rn.width;_t++){Qn.value=(st*(rn.channels*rn.width)+jt*rn.width+_t)*rn.inputSize;const J=(rn.height-1-rt)*(rn.width*rn.outputChannels)+_t*rn.outputChannels+Tt;rn.byteArray[J]=rn.getter(Qe,Qn)}}}}return{header:Fi,width:rn.width,height:rn.height,data:rn.byteArray,format:rn.format,[$x?"colorSpace":"encoding"]:rn[$x?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,n,i,r){function a(s,o){$x?s.colorSpace=o.colorSpace:s.encoding=o.encoding,s.minFilter=Rn,s.magFilter=Rn,s.generateMipmaps=!1,s.flipY=!1,n&&n(s,o)}return super.load(e,a,i,r)}}const CL=new ea,JS=new se;class RD extends NT{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],n=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],i=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(i),this.setAttribute("position",new Qt(e,3)),this.setAttribute("uv",new Qt(n,2))}applyMatrix4(e){const n=this.attributes.instanceStart,i=this.attributes.instanceEnd;return n!==void 0&&(n.applyMatrix4(e),i.applyMatrix4(e),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let n;e instanceof Float32Array?n=e:Array.isArray(e)&&(n=new Float32Array(e));const i=new G_(n,6,1);return this.setAttribute("instanceStart",new qo(i,3,0)),this.setAttribute("instanceEnd",new qo(i,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e,n=3){let i;e instanceof Float32Array?i=e:Array.isArray(e)&&(i=new Float32Array(e));const r=new G_(i,n*2,1);return this.setAttribute("instanceColorStart",new qo(r,n,0)),this.setAttribute("instanceColorEnd",new qo(r,n,n)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new oD(e.geometry)),this}fromLineSegments(e){const n=e.geometry;return this.setPositions(n.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ea);const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;e!==void 0&&n!==void 0&&(this.boundingBox.setFromBufferAttribute(e),CL.setFromBufferAttribute(n),this.boundingBox.union(CL))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new la),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;if(e!==void 0&&n!==void 0){const i=this.boundingSphere.center;this.boundingBox.getCenter(i);let r=0;for(let a=0,s=e.count;a<s;a++)JS.fromBufferAttribute(e,a),r=Math.max(r,i.distanceToSquared(JS)),JS.fromBufferAttribute(n,a),r=Math.max(r,i.distanceToSquared(JS));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class dW extends RD{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const n=e.length-3,i=new Float32Array(2*n);for(let r=0;r<n;r+=3)i[2*r]=e[r],i[2*r+1]=e[r+1],i[2*r+2]=e[r+2],i[2*r+3]=e[r+3],i[2*r+4]=e[r+4],i[2*r+5]=e[r+5];return super.setPositions(i),this}setColors(e,n=3){const i=e.length-n,r=new Float32Array(2*i);if(n===3)for(let a=0;a<i;a+=n)r[2*a]=e[a],r[2*a+1]=e[a+1],r[2*a+2]=e[a+2],r[2*a+3]=e[a+3],r[2*a+4]=e[a+4],r[2*a+5]=e[a+5];else for(let a=0;a<i;a+=n)r[2*a]=e[a],r[2*a+1]=e[a+1],r[2*a+2]=e[a+2],r[2*a+3]=e[a+3],r[2*a+4]=e[a+4],r[2*a+5]=e[a+5],r[2*a+6]=e[a+6],r[2*a+7]=e[a+7];return super.setColors(r,n),this}fromLine(e){const n=e.geometry;return this.setPositions(n.attributes.position.array),this}}class jD extends di{constructor(e){super({type:"LineMaterial",uniforms:u1.clone(u1.merge([Gt.common,Gt.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Ye(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
						attribute vec4 instanceColorStart;
						attribute vec4 instanceColorEnd;
					#else
						varying vec3 vLineColor;
						attribute vec3 instanceColorStart;
						attribute vec3 instanceColorEnd;
					#endif
				#endif

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vLineColor = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
					#else
						varying vec3 vLineColor;
					#endif
				#endif

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );
					#ifdef USE_COLOR
						#ifdef USE_LINE_COLOR_ALPHA
							diffuseColor *= vLineColor;
						#else
							diffuseColor.rgb *= vLineColor;
						#endif
					#endif

					#include <logdepthbuf_fragment>

					gl_FragColor = diffuseColor;

					#include <tonemapping_fragment>
					#include <${UT>=154?"colorspace_fragment":"encodings_fragment"}>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,this.onBeforeCompile=function(){this.transparent?this.defines.USE_LINE_COLOR_ALPHA="1":delete this.defines.USE_LINE_COLOR_ALPHA},Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(n){this.uniforms.diffuse.value=n}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(n){n===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(n){this.uniforms.linewidth.value=n}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(n){!!n!="USE_DASH"in this.defines&&(this.needsUpdate=!0),n===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(n){this.uniforms.dashScale.value=n}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(n){this.uniforms.dashSize.value=n}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(n){this.uniforms.dashOffset.value=n}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(n){this.uniforms.gapSize.value=n}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(n){this.uniforms.opacity.value=n}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(n){this.uniforms.resolution.value.copy(n)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(n){!!n!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),n===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const xE=new Cn,RL=new se,jL=new se,Qa=new Cn,Ja=new Cn,lu=new Cn,yE=new se,bE=new un,ns=new Cq,NL=new se,eM=new ea,tM=new la,cu=new Cn;let pu,L0;function OL(t,e,n){return cu.set(0,0,-e,1).applyMatrix4(t.projectionMatrix),cu.multiplyScalar(1/cu.w),cu.x=L0/n.width,cu.y=L0/n.height,cu.applyMatrix4(t.projectionMatrixInverse),cu.multiplyScalar(1/cu.w),Math.abs(Math.max(cu.x,cu.y))}function hce(t,e){const n=t.matrixWorld,i=t.geometry,r=i.attributes.instanceStart,a=i.attributes.instanceEnd,s=Math.min(i.instanceCount,r.count);for(let o=0,l=s;o<l;o++){ns.start.fromBufferAttribute(r,o),ns.end.fromBufferAttribute(a,o),ns.applyMatrix4(n);const u=new se,h=new se;pu.distanceSqToSegment(ns.start,ns.end,h,u),h.distanceTo(u)<L0*.5&&e.push({point:h,pointOnLine:u,distance:pu.origin.distanceTo(h),object:t,face:null,faceIndex:o,uv:null,[sW]:null})}}function dce(t,e,n){const i=e.projectionMatrix,a=t.material.resolution,s=t.matrixWorld,o=t.geometry,l=o.attributes.instanceStart,u=o.attributes.instanceEnd,h=Math.min(o.instanceCount,l.count),p=-e.near;pu.at(1,lu),lu.w=1,lu.applyMatrix4(e.matrixWorldInverse),lu.applyMatrix4(i),lu.multiplyScalar(1/lu.w),lu.x*=a.x/2,lu.y*=a.y/2,lu.z=0,yE.copy(lu),bE.multiplyMatrices(e.matrixWorldInverse,s);for(let g=0,x=h;g<x;g++){if(Qa.fromBufferAttribute(l,g),Ja.fromBufferAttribute(u,g),Qa.w=1,Ja.w=1,Qa.applyMatrix4(bE),Ja.applyMatrix4(bE),Qa.z>p&&Ja.z>p)continue;if(Qa.z>p){const E=Qa.z-Ja.z,j=(Qa.z-p)/E;Qa.lerp(Ja,j)}else if(Ja.z>p){const E=Ja.z-Qa.z,j=(Ja.z-p)/E;Ja.lerp(Qa,j)}Qa.applyMatrix4(i),Ja.applyMatrix4(i),Qa.multiplyScalar(1/Qa.w),Ja.multiplyScalar(1/Ja.w),Qa.x*=a.x/2,Qa.y*=a.y/2,Ja.x*=a.x/2,Ja.y*=a.y/2,ns.start.copy(Qa),ns.start.z=0,ns.end.copy(Ja),ns.end.z=0;const M=ns.closestPointToPointParameter(yE,!0);ns.at(M,NL);const S=ba.lerp(Qa.z,Ja.z,M),T=S>=-1&&S<=1,A=yE.distanceTo(NL)<L0*.5;if(T&&A){ns.start.fromBufferAttribute(l,g),ns.end.fromBufferAttribute(u,g),ns.start.applyMatrix4(s),ns.end.applyMatrix4(s);const E=new se,j=new se;pu.distanceSqToSegment(ns.start,ns.end,j,E),n.push({point:j,pointOnLine:E,distance:pu.origin.distanceTo(j),object:t,face:null,faceIndex:g,uv:null,[sW]:null})}}}class pW extends zi{constructor(e=new RD,n=new jD({color:Math.random()*16777215})){super(e,n),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,n=e.attributes.instanceStart,i=e.attributes.instanceEnd,r=new Float32Array(2*n.count);for(let s=0,o=0,l=n.count;s<l;s++,o+=2)RL.fromBufferAttribute(n,s),jL.fromBufferAttribute(i,s),r[o]=o===0?0:r[o-1],r[o+1]=r[o]+RL.distanceTo(jL);const a=new G_(r,2,1);return e.setAttribute("instanceDistanceStart",new qo(a,1,0)),e.setAttribute("instanceDistanceEnd",new qo(a,1,1)),this}raycast(e,n){const i=this.material.worldUnits,r=e.camera;r===null&&!i&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const a=e.params.Line2!==void 0&&e.params.Line2.threshold||0;pu=e.ray;const s=this.matrixWorld,o=this.geometry,l=this.material;L0=l.linewidth+a,o.boundingSphere===null&&o.computeBoundingSphere(),tM.copy(o.boundingSphere).applyMatrix4(s);let u;if(i)u=L0*.5;else{const p=Math.max(r.near,tM.distanceToPoint(pu.origin));u=OL(r,p,l.resolution)}if(tM.radius+=u,pu.intersectsSphere(tM)===!1)return;o.boundingBox===null&&o.computeBoundingBox(),eM.copy(o.boundingBox).applyMatrix4(s);let h;if(i)h=L0*.5;else{const p=Math.max(r.near,eM.distanceToPoint(pu.origin));h=OL(r,p,l.resolution)}eM.expandByScalar(h),pu.intersectsBox(eM)!==!1&&(i?hce(this,n):dce(this,r,n))}onBeforeRender(e){const n=this.material.uniforms;n&&n.resolution&&(e.getViewport(xE),this.material.uniforms.resolution.value.set(xE.z,xE.w))}}class pce extends pW{constructor(e=new dW,n=new jD({color:Math.random()*16777215})){super(e,n),this.isLine2=!0,this.type="Line2"}}const mW=z.forwardRef(function({children:e,follow:n=!0,lockX:i=!1,lockY:r=!1,lockZ:a=!1,...s},o){const l=z.useRef(null),u=z.useRef(null),h=new Jr;return It(({camera:p})=>{if(!n||!u.current)return;const g=l.current.rotation.clone();u.current.updateMatrix(),u.current.updateWorldMatrix(!1,!1),u.current.getWorldQuaternion(h),p.getWorldQuaternion(l.current.quaternion).premultiply(h.invert()),i&&(l.current.rotation.x=g.x),r&&(l.current.rotation.y=g.y),a&&(l.current.rotation.z=g.z)}),z.useImperativeHandle(o,()=>u.current,[]),z.createElement("group",bo({ref:u},s),z.createElement("group",{ref:l},e))}),mce=z.forwardRef(function({points:e,color:n=16777215,vertexColors:i,linewidth:r,lineWidth:a,segments:s,dashed:o,...l},u){var h,p;const g=hi(T=>T.size),x=z.useMemo(()=>s?new pW:new pce,[s]),[b]=z.useState(()=>new jD),M=(i==null||(h=i[0])==null?void 0:h.length)===4?4:3,S=z.useMemo(()=>{const T=s?new RD:new dW,A=e.map(E=>{const j=Array.isArray(E);return E instanceof se||E instanceof Cn?[E.x,E.y,E.z]:E instanceof Ye?[E.x,E.y,0]:j&&E.length===3?[E[0],E[1],E[2]]:j&&E.length===2?[E[0],E[1],0]:E});if(T.setPositions(A.flat()),i){n=16777215;const E=i.map(j=>j instanceof zt?j.toArray():j);T.setColors(E.flat(),M)}return T},[e,s,i,M]);return z.useLayoutEffect(()=>{x.computeLineDistances()},[e,x]),z.useLayoutEffect(()=>{o?b.defines.USE_DASH="":delete b.defines.USE_DASH,b.needsUpdate=!0},[o,b]),z.useEffect(()=>()=>{S.dispose(),b.dispose()},[S]),z.createElement("primitive",bo({object:x,ref:u},l),z.createElement("primitive",{object:S,attach:"geometry"}),z.createElement("primitive",bo({object:b,attach:"material",color:n,vertexColors:!!i,resolution:[g.width,g.height],linewidth:(p=r??a)!==null&&p!==void 0?p:1,dashed:o,transparent:M===4},l)))});function gce(){var t=Object.create(null);function e(r,a){var s=r.id,o=r.name,l=r.dependencies;l===void 0&&(l=[]);var u=r.init;u===void 0&&(u=function(){});var h=r.getTransferables;if(h===void 0&&(h=null),!t[s])try{l=l.map(function(g){return g&&g.isWorkerModule&&(e(g,function(x){if(x instanceof Error)throw x}),g=t[g.id].value),g}),u=i("<"+o+">.init",u),h&&(h=i("<"+o+">.getTransferables",h));var p=null;typeof u=="function"?p=u.apply(void 0,l):console.error("worker module init function failed to rehydrate"),t[s]={id:s,value:p,getTransferables:h},a(p)}catch(g){g&&g.noLog||console.error(g),a(g)}}function n(r,a){var s,o=r.id,l=r.args;(!t[o]||typeof t[o].value!="function")&&a(new Error("Worker module "+o+": not found or its 'init' did not return a function"));try{var u=(s=t[o]).value.apply(s,l);u&&typeof u.then=="function"?u.then(h,function(p){return a(p instanceof Error?p:new Error(""+p))}):h(u)}catch(p){a(p)}function h(p){try{var g=t[o].getTransferables&&t[o].getTransferables(p);(!g||!Array.isArray(g)||!g.length)&&(g=void 0),a(p,g)}catch(x){console.error(x),a(x)}}}function i(r,a){var s=void 0;self.troikaDefine=function(l){return s=l};var o=URL.createObjectURL(new Blob(["/** "+r.replace(/\*/g,"")+` **/

troikaDefine(
`+a+`
)`],{type:"application/javascript"}));try{importScripts(o)}catch(l){console.error(l)}return URL.revokeObjectURL(o),delete self.troikaDefine,s}self.addEventListener("message",function(r){var a=r.data,s=a.messageId,o=a.action,l=a.data;try{o==="registerModule"&&e(l,function(u){u instanceof Error?postMessage({messageId:s,success:!1,error:u.message}):postMessage({messageId:s,success:!0,result:{isCallable:typeof u=="function"}})}),o==="callModule"&&n(l,function(u,h){u instanceof Error?postMessage({messageId:s,success:!1,error:u.message}):postMessage({messageId:s,success:!0,result:u},h||void 0)})}catch(u){postMessage({messageId:s,success:!1,error:u.stack})}})}function vce(t){var e=function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];return e._getInitResult().then(function(r){if(typeof r=="function")return r.apply(void 0,n);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var n=t.dependencies,i=t.init;n=Array.isArray(n)?n.map(function(a){return a&&(a=a.onMainThread||a,a._getInitResult&&(a=a._getInitResult())),a}):[];var r=Promise.all(n).then(function(a){return i.apply(null,a)});return e._getInitResult=function(){return r},r},e}var gW=function(){var t=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),t=!0}catch(n){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+n.message+"]")}return gW=function(){return t},t},xce=0,yce=0,SE=!1,Gy=Object.create(null),Vy=Object.create(null),Wj=Object.create(null);function nv(t){if((!t||typeof t.init!="function")&&!SE)throw new Error("requires `options.init` function");var e=t.dependencies,n=t.init,i=t.getTransferables,r=t.workerId,a=vce(t);r==null&&(r="#default");var s="workerModule"+ ++xce,o=t.name||s,l=null;e=e&&e.map(function(h){return typeof h=="function"&&!h.workerModuleData&&(SE=!0,h=nv({workerId:r,name:"<"+o+"> function dependency: "+h.name,init:`function(){return (
`+YM(h)+`
)}`}),SE=!1),h&&h.workerModuleData&&(h=h.workerModuleData),h});function u(){for(var h=[],p=arguments.length;p--;)h[p]=arguments[p];if(!gW())return a.apply(void 0,h);if(!l){l=DL(r,"registerModule",u.workerModuleData);var g=function(){l=null,Vy[r].delete(g)};(Vy[r]||(Vy[r]=new Set)).add(g)}return l.then(function(x){var b=x.isCallable;if(b)return DL(r,"callModule",{id:s,args:h});throw new Error("Worker module function was called but `init` did not return a callable function")})}return u.workerModuleData={isWorkerModule:!0,id:s,name:o,dependencies:e,init:YM(n),getTransferables:i&&YM(i)},u.onMainThread=a,u}function bce(t){Vy[t]&&Vy[t].forEach(function(e){e()}),Gy[t]&&(Gy[t].terminate(),delete Gy[t])}function YM(t){var e=t.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function Sce(t){var e=Gy[t];if(!e){var n=YM(gce);e=Gy[t]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+t.replace(/\*/g,"")+` **/

;(`+n+")()"],{type:"application/javascript"}))),e.onmessage=function(i){var r=i.data,a=r.messageId,s=Wj[a];if(!s)throw new Error("WorkerModule response with empty or unknown messageId");delete Wj[a],s(r)}}return e}function DL(t,e,n){return new Promise(function(i,r){var a=++yce;Wj[a]=function(s){s.success?i(s.result):r(new Error("Error in worker "+e+" call: "+s.error))},Sce(t).postMessage({messageId:a,action:e,data:n})})}function vW(){var t=(function(e){function n(te,ae,q,K,ie,ue,me,fe){var de=1-me;fe.x=de*de*te+2*de*me*q+me*me*ie,fe.y=de*de*ae+2*de*me*K+me*me*ue}function i(te,ae,q,K,ie,ue,me,fe,de,_e){var Te=1-de;_e.x=Te*Te*Te*te+3*Te*Te*de*q+3*Te*de*de*ie+de*de*de*me,_e.y=Te*Te*Te*ae+3*Te*Te*de*K+3*Te*de*de*ue+de*de*de*fe}function r(te,ae){for(var q=/([MLQCZ])([^MLQCZ]*)/g,K,ie,ue,me,fe;K=q.exec(te);){var de=K[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(_e){return parseFloat(_e)});switch(K[1]){case"M":me=ie=de[0],fe=ue=de[1];break;case"L":(de[0]!==me||de[1]!==fe)&&ae("L",me,fe,me=de[0],fe=de[1]);break;case"Q":{ae("Q",me,fe,me=de[2],fe=de[3],de[0],de[1]);break}case"C":{ae("C",me,fe,me=de[4],fe=de[5],de[0],de[1],de[2],de[3]);break}case"Z":(me!==ie||fe!==ue)&&ae("L",me,fe,ie,ue);break}}}function a(te,ae,q){q===void 0&&(q=16);var K={x:0,y:0};r(te,function(ie,ue,me,fe,de,_e,Te,Ie,Re){switch(ie){case"L":ae(ue,me,fe,de);break;case"Q":{for(var ye=ue,ct=me,Ce=1;Ce<q;Ce++)n(ue,me,_e,Te,fe,de,Ce/(q-1),K),ae(ye,ct,K.x,K.y),ye=K.x,ct=K.y;break}case"C":{for(var re=ue,Le=me,He=1;He<q;He++)i(ue,me,_e,Te,Ie,Re,fe,de,He/(q-1),K),ae(re,Le,K.x,K.y),re=K.x,Le=K.y;break}}})}var s="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",o="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,u={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function h(te,ae){var q=te.getContext?te.getContext("webgl",u):te,K=l.get(q);if(!K){let re=function(Ae){var at=ue[Ae];if(!at&&(at=ue[Ae]=q.getExtension(Ae),!at))throw new Error(Ae+" not supported");return at},Le=function(Ae,at){var ne=q.createShader(at);return q.shaderSource(ne,Ae),q.compileShader(ne),ne},He=function(Ae,at,ne,Z){if(!me[Ae]){var xe={},Xe={},Be=q.createProgram();q.attachShader(Be,Le(at,q.VERTEX_SHADER)),q.attachShader(Be,Le(ne,q.FRAGMENT_SHADER)),q.linkProgram(Be),me[Ae]={program:Be,transaction:function(yt){q.useProgram(Be),yt({setUniform:function(Dt,Nt){for(var We=[],qe=arguments.length-2;qe-- >0;)We[qe]=arguments[qe+2];var dt=Xe[Nt]||(Xe[Nt]=q.getUniformLocation(Be,Nt));q["uniform"+Dt].apply(q,[dt].concat(We))},setAttribute:function(Dt,Nt,We,qe,dt){var pe=xe[Dt];pe||(pe=xe[Dt]={buf:q.createBuffer(),loc:q.getAttribLocation(Be,Dt),data:null}),q.bindBuffer(q.ARRAY_BUFFER,pe.buf),q.vertexAttribPointer(pe.loc,Nt,q.FLOAT,!1,0,0),q.enableVertexAttribArray(pe.loc),ie?q.vertexAttribDivisor(pe.loc,qe):re("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(pe.loc,qe),dt!==pe.data&&(q.bufferData(q.ARRAY_BUFFER,dt,We),pe.data=dt)}})}}}me[Ae].transaction(Z)},Ue=function(Ae,at){de++;try{q.activeTexture(q.TEXTURE0+de);var ne=fe[Ae];ne||(ne=fe[Ae]=q.createTexture(),q.bindTexture(q.TEXTURE_2D,ne),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.NEAREST),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.NEAREST)),q.bindTexture(q.TEXTURE_2D,ne),at(ne,de)}finally{de--}},Ge=function(Ae,at,ne){var Z=q.createFramebuffer();_e.push(Z),q.bindFramebuffer(q.FRAMEBUFFER,Z),q.activeTexture(q.TEXTURE0+at),q.bindTexture(q.TEXTURE_2D,Ae),q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,Ae,0);try{ne(Z)}finally{q.deleteFramebuffer(Z),q.bindFramebuffer(q.FRAMEBUFFER,_e[--_e.length-1]||null)}},nt=function(){ue={},me={},fe={},de=-1,_e.length=0};var Te=re,Ie=Le,Re=He,ye=Ue,ct=Ge,Ce=nt,ie=typeof WebGL2RenderingContext<"u"&&q instanceof WebGL2RenderingContext,ue={},me={},fe={},de=-1,_e=[];q.canvas.addEventListener("webglcontextlost",function(Ae){nt(),Ae.preventDefault()},!1),l.set(q,K={gl:q,isWebGL2:ie,getExtension:re,withProgram:He,withTexture:Ue,withTextureFramebuffer:Ge,handleContextLoss:nt})}ae(K)}function p(te,ae,q,K,ie,ue,me,fe){me===void 0&&(me=15),fe===void 0&&(fe=null),h(te,function(de){var _e=de.gl,Te=de.withProgram,Ie=de.withTexture;Ie("copy",function(Re,ye){_e.texImage2D(_e.TEXTURE_2D,0,_e.RGBA,ie,ue,0,_e.RGBA,_e.UNSIGNED_BYTE,ae),Te("copy",s,o,function(ct){var Ce=ct.setUniform,re=ct.setAttribute;re("aUV",2,_e.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),Ce("1i","image",ye),_e.bindFramebuffer(_e.FRAMEBUFFER,fe||null),_e.disable(_e.BLEND),_e.colorMask(me&8,me&4,me&2,me&1),_e.viewport(q,K,ie,ue),_e.scissor(q,K,ie,ue),_e.drawArrays(_e.TRIANGLES,0,3)})})})}function g(te,ae,q){var K=te.width,ie=te.height;h(te,function(ue){var me=ue.gl,fe=new Uint8Array(K*ie*4);me.readPixels(0,0,K,ie,me.RGBA,me.UNSIGNED_BYTE,fe),te.width=ae,te.height=q,p(me,fe,0,0,K,ie)})}var x=Object.freeze({__proto__:null,withWebGLContext:h,renderImageData:p,resizeWebGLCanvasWithoutClearing:g});function b(te,ae,q,K,ie,ue){ue===void 0&&(ue=1);var me=new Uint8Array(te*ae),fe=K[2]-K[0],de=K[3]-K[1],_e=[];a(q,function(re,Le,He,Ue){_e.push({x1:re,y1:Le,x2:He,y2:Ue,minX:Math.min(re,He),minY:Math.min(Le,Ue),maxX:Math.max(re,He),maxY:Math.max(Le,Ue)})}),_e.sort(function(re,Le){return re.maxX-Le.maxX});for(var Te=0;Te<te;Te++)for(var Ie=0;Ie<ae;Ie++){var Re=ct(K[0]+fe*(Te+.5)/te,K[1]+de*(Ie+.5)/ae),ye=Math.pow(1-Math.abs(Re)/ie,ue)/2;Re<0&&(ye=1-ye),ye=Math.max(0,Math.min(255,Math.round(ye*255))),me[Ie*te+Te]=ye}return me;function ct(re,Le){for(var He=1/0,Ue=1/0,Ge=_e.length;Ge--;){var nt=_e[Ge];if(nt.maxX+Ue<=re)break;if(re+Ue>nt.minX&&Le-Ue<nt.maxY&&Le+Ue>nt.minY){var Ae=T(re,Le,nt.x1,nt.y1,nt.x2,nt.y2);Ae<He&&(He=Ae,Ue=Math.sqrt(He))}}return Ce(re,Le)&&(Ue=-Ue),Ue}function Ce(re,Le){for(var He=0,Ue=_e.length;Ue--;){var Ge=_e[Ue];if(Ge.maxX<=re)break;var nt=Ge.y1>Le!=Ge.y2>Le&&re<(Ge.x2-Ge.x1)*(Le-Ge.y1)/(Ge.y2-Ge.y1)+Ge.x1;nt&&(He+=Ge.y1<Ge.y2?1:-1)}return He!==0}}function M(te,ae,q,K,ie,ue,me,fe,de,_e){ue===void 0&&(ue=1),fe===void 0&&(fe=0),de===void 0&&(de=0),_e===void 0&&(_e=0),S(te,ae,q,K,ie,ue,me,null,fe,de,_e)}function S(te,ae,q,K,ie,ue,me,fe,de,_e,Te){ue===void 0&&(ue=1),de===void 0&&(de=0),_e===void 0&&(_e=0),Te===void 0&&(Te=0);for(var Ie=b(te,ae,q,K,ie,ue),Re=new Uint8Array(Ie.length*4),ye=0;ye<Ie.length;ye++)Re[ye*4+Te]=Ie[ye];p(me,Re,de,_e,te,ae,1<<3-Te,fe)}function T(te,ae,q,K,ie,ue){var me=ie-q,fe=ue-K,de=me*me+fe*fe,_e=de?Math.max(0,Math.min(1,((te-q)*me+(ae-K)*fe)/de)):0,Te=te-(q+_e*me),Ie=ae-(K+_e*fe);return Te*Te+Ie*Ie}var A=Object.freeze({__proto__:null,generate:b,generateIntoCanvas:M,generateIntoFramebuffer:S}),E="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",j="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",R="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",C=new Float32Array([0,0,2,0,0,2]),D=null,U=!1,I={},L=new WeakMap;function F(te){if(!U&&!Y(te))throw new Error("WebGL generation not supported")}function G(te,ae,q,K,ie,ue,me){if(ue===void 0&&(ue=1),me===void 0&&(me=null),!me&&(me=D,!me)){var fe=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!fe)throw new Error("OffscreenCanvas or DOM canvas not supported");me=D=fe.getContext("webgl",{depth:!1})}F(me);var de=new Uint8Array(te*ae*4);h(me,function(Re){var ye=Re.gl,ct=Re.withTexture,Ce=Re.withTextureFramebuffer;ct("readable",function(re,Le){ye.texImage2D(ye.TEXTURE_2D,0,ye.RGBA,te,ae,0,ye.RGBA,ye.UNSIGNED_BYTE,null),Ce(re,Le,function(He){W(te,ae,q,K,ie,ue,ye,He,0,0,0),ye.readPixels(0,0,te,ae,ye.RGBA,ye.UNSIGNED_BYTE,de)})})});for(var _e=new Uint8Array(te*ae),Te=0,Ie=0;Te<de.length;Te+=4)_e[Ie++]=de[Te];return _e}function H(te,ae,q,K,ie,ue,me,fe,de,_e){ue===void 0&&(ue=1),fe===void 0&&(fe=0),de===void 0&&(de=0),_e===void 0&&(_e=0),W(te,ae,q,K,ie,ue,me,null,fe,de,_e)}function W(te,ae,q,K,ie,ue,me,fe,de,_e,Te){ue===void 0&&(ue=1),de===void 0&&(de=0),_e===void 0&&(_e=0),Te===void 0&&(Te=0),F(me);var Ie=[];a(q,function(Re,ye,ct,Ce){Ie.push(Re,ye,ct,Ce)}),Ie=new Float32Array(Ie),h(me,function(Re){var ye=Re.gl,ct=Re.isWebGL2,Ce=Re.getExtension,re=Re.withProgram,Le=Re.withTexture,He=Re.withTextureFramebuffer,Ue=Re.handleContextLoss;if(Le("rawDistances",function(Ge,nt){(te!==Ge._lastWidth||ae!==Ge._lastHeight)&&ye.texImage2D(ye.TEXTURE_2D,0,ye.RGBA,Ge._lastWidth=te,Ge._lastHeight=ae,0,ye.RGBA,ye.UNSIGNED_BYTE,null),re("main",E,j,function(Ae){var at=Ae.setAttribute,ne=Ae.setUniform,Z=!ct&&Ce("ANGLE_instanced_arrays"),xe=!ct&&Ce("EXT_blend_minmax");at("aUV",2,ye.STATIC_DRAW,0,C),at("aLineSegment",4,ye.DYNAMIC_DRAW,1,Ie),ne.apply(void 0,["4f","uGlyphBounds"].concat(K)),ne("1f","uMaxDistance",ie),ne("1f","uExponent",ue),He(Ge,nt,function(Xe){ye.enable(ye.BLEND),ye.colorMask(!0,!0,!0,!0),ye.viewport(0,0,te,ae),ye.scissor(0,0,te,ae),ye.blendFunc(ye.ONE,ye.ONE),ye.blendEquationSeparate(ye.FUNC_ADD,ct?ye.MAX:xe.MAX_EXT),ye.clear(ye.COLOR_BUFFER_BIT),ct?ye.drawArraysInstanced(ye.TRIANGLES,0,3,Ie.length/4):Z.drawArraysInstancedANGLE(ye.TRIANGLES,0,3,Ie.length/4)})}),re("post",s,R,function(Ae){Ae.setAttribute("aUV",2,ye.STATIC_DRAW,0,C),Ae.setUniform("1i","tex",nt),ye.bindFramebuffer(ye.FRAMEBUFFER,fe),ye.disable(ye.BLEND),ye.colorMask(Te===0,Te===1,Te===2,Te===3),ye.viewport(de,_e,te,ae),ye.scissor(de,_e,te,ae),ye.drawArrays(ye.TRIANGLES,0,3)})}),ye.isContextLost())throw Ue(),new Error("webgl context lost")})}function Y(te){var ae=!te||te===D?I:te.canvas||te,q=L.get(ae);if(q===void 0){U=!0;var K=null;try{var ie=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],ue=G(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,te);q=ue&&ie.length===ue.length&&ue.every(function(me,fe){return me===ie[fe]}),q||(K="bad trial run results",console.info(ie,ue))}catch(me){q=!1,K=me.message}K&&console.warn("WebGL SDF generation not supported:",K),U=!1,L.set(ae,q)}return q}var k=Object.freeze({__proto__:null,generate:G,generateIntoCanvas:H,generateIntoFramebuffer:W,isSupported:Y});function $(te,ae,q,K,ie,ue){ie===void 0&&(ie=Math.max(K[2]-K[0],K[3]-K[1])/2),ue===void 0&&(ue=1);try{return G.apply(k,arguments)}catch(me){return console.info("WebGL SDF generation failed, falling back to JS",me),b.apply(A,arguments)}}function ee(te,ae,q,K,ie,ue,me,fe,de,_e){ie===void 0&&(ie=Math.max(K[2]-K[0],K[3]-K[1])/2),ue===void 0&&(ue=1),fe===void 0&&(fe=0),de===void 0&&(de=0),_e===void 0&&(_e=0);try{return H.apply(k,arguments)}catch(Te){return console.info("WebGL SDF generation failed, falling back to JS",Te),M.apply(A,arguments)}}return e.forEachPathCommand=r,e.generate=$,e.generateIntoCanvas=ee,e.javascript=A,e.pathToLineSegments=a,e.webgl=k,e.webglUtils=x,Object.defineProperty(e,"__esModule",{value:!0}),e})({});return t}function Mce(){var t=(function(e){var n={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},r={};i.L=1,r[1]="L",Object.keys(n).forEach(function(Ue,Ge){i[Ue]=1<<Ge+1,r[i[Ue]]=Ue}),Object.freeze(i);var a=i.LRI|i.RLI|i.FSI,s=i.L|i.R|i.AL,o=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,l=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,u=i.S|i.WS|i.B|a|i.PDI|l,h=null;function p(){if(!h){h=new Map;var Ue=function(nt){if(n.hasOwnProperty(nt)){var Ae=0;n[nt].split(",").forEach(function(at){var ne=at.split("+"),Z=ne[0],xe=ne[1];Z=parseInt(Z,36),xe=xe?parseInt(xe,36):0,h.set(Ae+=Z,i[nt]);for(var Xe=0;Xe<xe;Xe++)h.set(++Ae,i[nt])})}};for(var Ge in n)Ue(Ge)}}function g(Ue){return p(),h.get(Ue.codePointAt(0))||i.L}function x(Ue){return r[g(Ue)]}var b={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function M(Ue,Ge){var nt=36,Ae=0,at=new Map,ne=Ge&&new Map,Z;return Ue.split(",").forEach(function xe(Xe){if(Xe.indexOf("+")!==-1)for(var Be=+Xe;Be--;)xe(Z);else{Z=Xe;var Ne=Xe.split(">"),yt=Ne[0],vt=Ne[1];yt=String.fromCodePoint(Ae+=parseInt(yt,nt)),vt=String.fromCodePoint(Ae+=parseInt(vt,nt)),at.set(yt,vt),Ge&&ne.set(vt,yt)}}),{map:at,reverseMap:ne}}var S,T,A;function E(){if(!S){var Ue=M(b.pairs,!0),Ge=Ue.map,nt=Ue.reverseMap;S=Ge,T=nt,A=M(b.canonical,!1).map}}function j(Ue){return E(),S.get(Ue)||null}function R(Ue){return E(),T.get(Ue)||null}function C(Ue){return E(),A.get(Ue)||null}var D=i.L,U=i.R,I=i.EN,L=i.ES,F=i.ET,G=i.AN,H=i.CS,W=i.B,Y=i.S,k=i.ON,$=i.BN,ee=i.NSM,te=i.AL,ae=i.LRO,q=i.RLO,K=i.LRE,ie=i.RLE,ue=i.PDF,me=i.LRI,fe=i.RLI,de=i.FSI,_e=i.PDI;function Te(Ue,Ge){for(var nt=125,Ae=new Uint32Array(Ue.length),at=0;at<Ue.length;at++)Ae[at]=g(Ue[at]);var ne=new Map;function Z(fa,os){var Ur=Ae[fa];Ae[fa]=os,ne.set(Ur,ne.get(Ur)-1),Ur&o&&ne.set(o,ne.get(o)-1),ne.set(os,(ne.get(os)||0)+1),os&o&&ne.set(o,(ne.get(o)||0)+1)}for(var xe=new Uint8Array(Ue.length),Xe=new Map,Be=[],Ne=null,yt=0;yt<Ue.length;yt++)Ne||Be.push(Ne={start:yt,end:Ue.length-1,level:Ge==="rtl"?1:Ge==="ltr"?0:fd(yt,!1)}),Ae[yt]&W&&(Ne.end=yt,Ne=null);for(var vt=ie|K|q|ae|a|_e|ue|W,Dt=function(fa){return fa+(fa&1?1:2)},Nt=function(fa){return fa+(fa&1?2:1)},We=0;We<Be.length;We++){Ne=Be[We];var qe=[{_level:Ne.level,_override:0,_isolate:0}],dt=void 0,pe=0,Oe=0,ft=0;ne.clear();for(var ge=Ne.start;ge<=Ne.end;ge++){var Ee=Ae[ge];if(dt=qe[qe.length-1],ne.set(Ee,(ne.get(Ee)||0)+1),Ee&o&&ne.set(o,(ne.get(o)||0)+1),Ee&vt)if(Ee&(ie|K)){xe[ge]=dt._level;var ut=(Ee===ie?Nt:Dt)(dt._level);ut<=nt&&!pe&&!Oe?qe.push({_level:ut,_override:0,_isolate:0}):pe||Oe++}else if(Ee&(q|ae)){xe[ge]=dt._level;var At=(Ee===q?Nt:Dt)(dt._level);At<=nt&&!pe&&!Oe?qe.push({_level:At,_override:Ee&q?U:D,_isolate:0}):pe||Oe++}else if(Ee&a){Ee&de&&(Ee=fd(ge+1,!0)===1?fe:me),xe[ge]=dt._level,dt._override&&Z(ge,dt._override);var lt=(Ee===fe?Nt:Dt)(dt._level);lt<=nt&&pe===0&&Oe===0?(ft++,qe.push({_level:lt,_override:0,_isolate:1,_isolInitIndex:ge})):pe++}else if(Ee&_e){if(pe>0)pe--;else if(ft>0){for(Oe=0;!qe[qe.length-1]._isolate;)qe.pop();var Ze=qe[qe.length-1]._isolInitIndex;Ze!=null&&(Xe.set(Ze,ge),Xe.set(ge,Ze)),qe.pop(),ft--}dt=qe[qe.length-1],xe[ge]=dt._level,dt._override&&Z(ge,dt._override)}else Ee&ue?(pe===0&&(Oe>0?Oe--:!dt._isolate&&qe.length>1&&(qe.pop(),dt=qe[qe.length-1])),xe[ge]=dt._level):Ee&W&&(xe[ge]=Ne.level);else xe[ge]=dt._level,dt._override&&Ee!==$&&Z(ge,dt._override)}for(var Ct=[],Ut=null,Bt=Ne.start;Bt<=Ne.end;Bt++){var Yt=Ae[Bt];if(!(Yt&l)){var On=xe[Bt],Vn=Yt&a,Ii=Yt===_e;Ut&&On===Ut._level?(Ut._end=Bt,Ut._endsWithIsolInit=Vn):Ct.push(Ut={_start:Bt,_end:Bt,_level:On,_startsWithPDI:Ii,_endsWithIsolInit:Vn})}}for(var Tr=[],wr=0;wr<Ct.length;wr++){var bi=Ct[wr];if(!bi._startsWithPDI||bi._startsWithPDI&&!Xe.has(bi._start)){for(var sr=[Ut=bi],Fi=void 0;Ut&&Ut._endsWithIsolInit&&(Fi=Xe.get(Ut._end))!=null;)for(var rn=wr+1;rn<Ct.length;rn++)if(Ct[rn]._start===Fi){sr.push(Ut=Ct[rn]);break}for(var Qn=[],dn=0;dn<sr.length;dn++)for(var Q=sr[dn],ce=Q._start;ce<=Q._end;ce++)Qn.push(ce);for(var we=xe[Qn[0]],Qe=Ne.level,st=Qn[0]-1;st>=0;st--)if(!(Ae[st]&l)){Qe=xe[st];break}var rt=Qn[Qn.length-1],jt=xe[rt],Tt=Ne.level;if(!(Ae[rt]&a)){for(var _t=rt+1;_t<=Ne.end;_t++)if(!(Ae[_t]&l)){Tt=xe[_t];break}}Tr.push({_seqIndices:Qn,_sosType:Math.max(Qe,we)%2?U:D,_eosType:Math.max(Tt,jt)%2?U:D})}}for(var J=0;J<Tr.length;J++){var ve=Tr[J],he=ve._seqIndices,Pe=ve._sosType,be=ve._eosType,et=xe[he[0]]&1?U:D;if(ne.get(ee))for(var ht=0;ht<he.length;ht++){var Mt=he[ht];if(Ae[Mt]&ee){for(var Rt=Pe,Lt=ht-1;Lt>=0;Lt--)if(!(Ae[he[Lt]]&l)){Rt=Ae[he[Lt]];break}Z(Mt,Rt&(a|_e)?k:Rt)}}if(ne.get(I))for(var Ft=0;Ft<he.length;Ft++){var Vt=he[Ft];if(Ae[Vt]&I)for(var Ht=Ft-1;Ht>=-1;Ht--){var gn=Ht===-1?Pe:Ae[he[Ht]];if(gn&s){gn===te&&Z(Vt,G);break}}}if(ne.get(te))for(var Jt=0;Jt<he.length;Jt++){var sn=he[Jt];Ae[sn]&te&&Z(sn,U)}if(ne.get(L)||ne.get(H))for(var _n=1;_n<he.length-1;_n++){var en=he[_n];if(Ae[en]&(L|H)){for(var vn=0,Zt=0,Dn=_n-1;Dn>=0&&(vn=Ae[he[Dn]],!!(vn&l));Dn--);for(var Hn=_n+1;Hn<he.length&&(Zt=Ae[he[Hn]],!!(Zt&l));Hn++);vn===Zt&&(Ae[en]===L?vn===I:vn&(I|G))&&Z(en,vn)}}if(ne.get(I))for(var Kt=0;Kt<he.length;Kt++){var Xi=he[Kt];if(Ae[Xi]&I){for(var Un=Kt-1;Un>=0&&Ae[he[Un]]&(F|l);Un--)Z(he[Un],I);for(Kt++;Kt<he.length&&Ae[he[Kt]]&(F|l|I);Kt++)Ae[he[Kt]]!==I&&Z(he[Kt],I)}}if(ne.get(F)||ne.get(L)||ne.get(H))for(var kn=0;kn<he.length;kn++){var pi=he[kn];if(Ae[pi]&(F|L|H)){Z(pi,k);for(var ir=kn-1;ir>=0&&Ae[he[ir]]&l;ir--)Z(he[ir],k);for(var Ui=kn+1;Ui<he.length&&Ae[he[Ui]]&l;Ui++)Z(he[Ui],k)}}if(ne.get(I))for(var Fa=0,Ga=Pe;Fa<he.length;Fa++){var jc=he[Fa],ju=Ae[jc];ju&I?Ga===D&&Z(jc,D):ju&s&&(Ga=ju)}if(ne.get(o)){var Mo=U|I|G,ud=Mo|D,Nu=[];{for(var to=[],ua=0;ua<he.length;ua++)if(Ae[he[ua]]&o){var _o=Ue[he[ua]],Ou=void 0;if(j(_o)!==null)if(to.length<63)to.push({char:_o,seqIndex:ua});else break;else if((Ou=R(_o))!==null)for(var Cs=to.length-1;Cs>=0;Cs--){var no=to[Cs].char;if(no===Ou||no===R(C(_o))||j(C(no))===_o){Nu.push([to[Cs].seqIndex,ua]),to.length=Cs;break}}}Nu.sort(function(fa,os){return fa[0]-os[0]})}for(var Du=0;Du<Nu.length;Du++){for(var Pu=Nu[Du],Nc=Pu[0],To=Pu[1],Rs=!1,Ea=0,zl=Nc+1;zl<To;zl++){var wo=he[zl];if(Ae[wo]&ud){Rs=!0;var Iu=Ae[wo]&Mo?U:D;if(Iu===et){Ea=Iu;break}}}if(Rs&&!Ea){Ea=Pe;for(var io=Nc-1;io>=0;io--){var Uu=he[io];if(Ae[Uu]&ud){var nl=Ae[Uu]&Mo?U:D;nl!==et?Ea=nl:Ea=et;break}}}if(Ea){if(Ae[he[Nc]]=Ae[he[To]]=Ea,Ea!==et){for(var Ao=Nc+1;Ao<he.length;Ao++)if(!(Ae[he[Ao]]&l)){g(Ue[he[Ao]])&ee&&(Ae[he[Ao]]=Ea);break}}if(Ea!==et){for(var kl=To+1;kl<he.length;kl++)if(!(Ae[he[kl]]&l)){g(Ue[he[kl]])&ee&&(Ae[he[kl]]=Ea);break}}}}for(var $i=0;$i<he.length;$i++)if(Ae[he[$i]]&o){for(var Eo=$i,Fl=$i,Va=Pe,il=$i-1;il>=0;il--)if(Ae[he[il]]&l)Eo=il;else{Va=Ae[he[il]]&Mo?U:D;break}for(var Lu=be,Co=$i+1;Co<he.length;Co++)if(Ae[he[Co]]&(o|l))Fl=Co;else{Lu=Ae[he[Co]]&Mo?U:D;break}for(var rl=Eo;rl<=Fl;rl++)Ae[he[rl]]=Va===Lu?Va:et;$i=Fl}}}for(var Xr=Ne.start;Xr<=Ne.end;Xr++){var dp=xe[Xr],dr=Ae[Xr];if(dp&1?dr&(D|I|G)&&xe[Xr]++:dr&U?xe[Xr]++:dr&(G|I)&&(xe[Xr]+=2),dr&l&&(xe[Xr]=Xr===0?Ne.level:xe[Xr-1]),Xr===Ne.end||g(Ue[Xr])&(Y|W))for(var Bu=Xr;Bu>=0&&g(Ue[Bu])&u;Bu--)xe[Bu]=Ne.level}}return{levels:xe,paragraphs:Be};function fd(fa,os){for(var Ur=fa;Ur<Ue.length;Ur++){var ro=Ae[Ur];if(ro&(U|te))return 1;if(ro&(W|D)||os&&ro===_e)return 0;if(ro&a){var hd=Ff(Ur);Ur=hd===-1?Ue.length:hd}}return 0}function Ff(fa){for(var os=1,Ur=fa+1;Ur<Ue.length;Ur++){var ro=Ae[Ur];if(ro&W)break;if(ro&_e){if(--os===0)return Ur}else ro&a&&os++}return-1}}var Ie="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Re;function ye(){if(!Re){var Ue=M(Ie,!0),Ge=Ue.map,nt=Ue.reverseMap;nt.forEach(function(Ae,at){Ge.set(at,Ae)}),Re=Ge}}function ct(Ue){return ye(),Re.get(Ue)||null}function Ce(Ue,Ge,nt,Ae){var at=Ue.length;nt=Math.max(0,nt==null?0:+nt),Ae=Math.min(at-1,Ae==null?at-1:+Ae);for(var ne=new Map,Z=nt;Z<=Ae;Z++)if(Ge[Z]&1){var xe=ct(Ue[Z]);xe!==null&&ne.set(Z,xe)}return ne}function re(Ue,Ge,nt,Ae){var at=Ue.length;nt=Math.max(0,nt==null?0:+nt),Ae=Math.min(at-1,Ae==null?at-1:+Ae);var ne=[];return Ge.paragraphs.forEach(function(Z){var xe=Math.max(nt,Z.start),Xe=Math.min(Ae,Z.end);if(xe<Xe){for(var Be=Ge.levels.slice(xe,Xe+1),Ne=Xe;Ne>=xe&&g(Ue[Ne])&u;Ne--)Be[Ne]=Z.level;for(var yt=Z.level,vt=1/0,Dt=0;Dt<Be.length;Dt++){var Nt=Be[Dt];Nt>yt&&(yt=Nt),Nt<vt&&(vt=Nt|1)}for(var We=yt;We>=vt;We--)for(var qe=0;qe<Be.length;qe++)if(Be[qe]>=We){for(var dt=qe;qe+1<Be.length&&Be[qe+1]>=We;)qe++;qe>dt&&ne.push([dt+xe,qe+xe])}}}),ne}function Le(Ue,Ge,nt,Ae){var at=He(Ue,Ge,nt,Ae),ne=[].concat(Ue);return at.forEach(function(Z,xe){ne[xe]=(Ge.levels[Z]&1?ct(Ue[Z]):null)||Ue[Z]}),ne.join("")}function He(Ue,Ge,nt,Ae){for(var at=re(Ue,Ge,nt,Ae),ne=[],Z=0;Z<Ue.length;Z++)ne[Z]=Z;return at.forEach(function(xe){for(var Xe=xe[0],Be=xe[1],Ne=ne.slice(Xe,Be+1),yt=Ne.length;yt--;)ne[Be-yt]=Ne[yt]}),ne}return e.closingToOpeningBracket=R,e.getBidiCharType=g,e.getBidiCharTypeName=x,e.getCanonicalBracket=C,e.getEmbeddingLevels=Te,e.getMirroredCharacter=ct,e.getMirroredCharactersMap=Ce,e.getReorderSegments=re,e.getReorderedIndices=He,e.getReorderedString=Le,e.openingToClosingBracket=j,Object.defineProperty(e,"__esModule",{value:!0}),e})({});return t}const xW=/\bvoid\s+main\s*\(\s*\)\s*{/g;function Xj(t){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function n(i,r){let a=Ln[r];return a?Xj(a):i}return t.replace(e,n)}const es=[];for(let t=0;t<256;t++)es[t]=(t<16?"0":"")+t.toString(16);function _ce(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(es[t&255]+es[t>>8&255]+es[t>>16&255]+es[t>>24&255]+"-"+es[e&255]+es[e>>8&255]+"-"+es[e>>16&15|64]+es[e>>24&255]+"-"+es[n&63|128]+es[n>>8&255]+"-"+es[n>>16&255]+es[n>>24&255]+es[i&255]+es[i>>8&255]+es[i>>16&255]+es[i>>24&255]).toUpperCase()}const l0=Object.assign||function(){let t=arguments[0];for(let e=1,n=arguments.length;e<n;e++){let i=arguments[e];if(i)for(let r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},Tce=Date.now(),PL=new WeakMap,IL=new Map;let wce=1e10;function $j(t,e){const n=Rce(e);let i=PL.get(t);if(i||PL.set(t,i=Object.create(null)),i[n])return new i[n];const r=`_onBeforeCompile${n}`,a=function(u,h){t.onBeforeCompile.call(this,u,h);const p=this.customProgramCacheKey()+"|"+u.vertexShader+"|"+u.fragmentShader;let g=IL[p];if(!g){const x=Ace(this,u,e,n);g=IL[p]=x}u.vertexShader=g.vertexShader,u.fragmentShader=g.fragmentShader,l0(u.uniforms,this.uniforms),e.timeUniform&&(u.uniforms[e.timeUniform]={get value(){return Date.now()-Tce}}),this[r]&&this[r](u)},s=function(){return o(e.chained?t:t.clone())},o=function(u){const h=Object.create(u,l);return Object.defineProperty(h,"baseMaterial",{value:t}),Object.defineProperty(h,"id",{value:wce++}),h.uuid=_ce(),h.uniforms=l0({},u.uniforms,e.uniforms),h.defines=l0({},u.defines,e.defines),h.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",h.extensions=l0({},u.extensions,e.extensions),h._listeners=void 0,h},l={constructor:{value:s},isDerivedMaterial:{value:!0},type:{get:()=>t.type,set:u=>{t.type=u}},isDerivedFrom:{writable:!0,configurable:!0,value:function(u){const h=this.baseMaterial;return u===h||h.isDerivedMaterial&&h.isDerivedFrom(u)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return t.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get(){return a},set(u){this[r]=u}},copy:{writable:!0,configurable:!0,value:function(u){return t.copy.call(this,u),!t.isShaderMaterial&&!t.isDerivedMaterial&&(l0(this.extensions,u.extensions),l0(this.defines,u.defines),l0(this.uniforms,u1.clone(u.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const u=new t.constructor;return o(u).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let u=this._depthMaterial;return u||(u=this._depthMaterial=$j(t.isDerivedMaterial?t.getDepthMaterial():new Eb({depthPacking:HO}),e),u.defines.IS_DEPTH_MATERIAL="",u.uniforms=this.uniforms),u}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let u=this._distanceMaterial;return u||(u=this._distanceMaterial=$j(t.isDerivedMaterial?t.getDistanceMaterial():new CT,e),u.defines.IS_DISTANCE_MATERIAL="",u.uniforms=this.uniforms),u}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:u,_distanceMaterial:h}=this;u&&u.dispose(),h&&h.dispose(),t.dispose.call(this)}}};return i[n]=s,new s}function Ace(t,{vertexShader:e,fragmentShader:n},i,r){let{vertexDefs:a,vertexMainIntro:s,vertexMainOutro:o,vertexTransform:l,fragmentDefs:u,fragmentMainIntro:h,fragmentMainOutro:p,fragmentColorTransform:g,customRewriter:x,timeUniform:b}=i;if(a=a||"",s=s||"",o=o||"",u=u||"",h=h||"",p=p||"",(l||x)&&(e=Xj(e)),(g||x)&&(n=n.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),n=Xj(n)),x){let M=x({vertexShader:e,fragmentShader:n});e=M.vertexShader,n=M.fragmentShader}if(g){let M=[];n=n.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,S=>(M.push(S),"")),p=`${g}
${M.join(`
`)}
${p}`}if(b){const M=`
uniform float ${b};
`;a=M+a,u=M+u}return l&&(e=`vec3 troika_position_${r};
vec3 troika_normal_${r};
vec2 troika_uv_${r};
${e}
`,a=`${a}
void troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,s=`
troika_position_${r} = vec3(position);
troika_normal_${r} = vec3(normal);
troika_uv_${r} = vec2(uv);
troikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});
${s}
`,e=e.replace(/\b(position|normal|uv)\b/g,(M,S,T,A)=>/\battribute\s+vec[23]\s+$/.test(A.substr(0,T))?S:`troika_${S}_${r}`),t.map&&t.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${r}`))),e=UL(e,r,a,s,o),n=UL(n,r,u,h,p),{vertexShader:e,fragmentShader:n}}function UL(t,e,n,i,r){return(i||r||n)&&(t=t.replace(xW,`
${n}
void troikaOrigMain${e}() {`),t+=`
void main() {
  ${i}
  troikaOrigMain${e}();
  ${r}
}`),t}function Ece(t,e){return t==="uniforms"?void 0:typeof e=="function"?e.toString():e}let Cce=0;const LL=new Map;function Rce(t){const e=JSON.stringify(t,Ece);let n=LL.get(e);return n==null&&LL.set(e,n=++Cce),n}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function jce(){return typeof window>"u"&&(self.window=self),(function(t){var e={parse:function(r){var a=e._bin,s=new Uint8Array(r);if(a.readASCII(s,0,4)=="ttcf"){var o=4;a.readUshort(s,o),o+=2,a.readUshort(s,o),o+=2;var l=a.readUint(s,o);o+=4;for(var u=[],h=0;h<l;h++){var p=a.readUint(s,o);o+=4,u.push(e._readFont(s,p))}return u}return[e._readFont(s,0)]},_readFont:function(r,a){var s=e._bin,o=a;s.readFixed(r,a),a+=4;var l=s.readUshort(r,a);a+=2,s.readUshort(r,a),a+=2,s.readUshort(r,a),a+=2,s.readUshort(r,a),a+=2;for(var u=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],h={_data:r,_offset:o},p={},g=0;g<l;g++){var x=s.readASCII(r,a,4);a+=4,s.readUint(r,a),a+=4;var b=s.readUint(r,a);a+=4;var M=s.readUint(r,a);a+=4,p[x]={offset:b,length:M}}for(g=0;g<u.length;g++){var S=u[g];p[S]&&(h[S.trim()]=e[S.trim()].parse(r,p[S].offset,p[S].length,h))}return h},_tabOffset:function(r,a,s){for(var o=e._bin,l=o.readUshort(r,s+4),u=s+12,h=0;h<l;h++){var p=o.readASCII(r,u,4);u+=4,o.readUint(r,u),u+=4;var g=o.readUint(r,u);if(u+=4,o.readUint(r,u),u+=4,p==a)return g}return 0}};e._bin={readFixed:function(r,a){return(r[a]<<8|r[a+1])+(r[a+2]<<8|r[a+3])/65540},readF2dot14:function(r,a){return e._bin.readShort(r,a)/16384},readInt:function(r,a){return e._bin._view(r).getInt32(a)},readInt8:function(r,a){return e._bin._view(r).getInt8(a)},readShort:function(r,a){return e._bin._view(r).getInt16(a)},readUshort:function(r,a){return e._bin._view(r).getUint16(a)},readUshorts:function(r,a,s){for(var o=[],l=0;l<s;l++)o.push(e._bin.readUshort(r,a+2*l));return o},readUint:function(r,a){return e._bin._view(r).getUint32(a)},readUint64:function(r,a){return 4294967296*e._bin.readUint(r,a)+e._bin.readUint(r,a+4)},readASCII:function(r,a,s){for(var o="",l=0;l<s;l++)o+=String.fromCharCode(r[a+l]);return o},readUnicode:function(r,a,s){for(var o="",l=0;l<s;l++){var u=r[a++]<<8|r[a++];o+=String.fromCharCode(u)}return o},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(r,a,s){var o=e._bin._tdec;return o&&a==0&&s==r.length?o.decode(r):e._bin.readASCII(r,a,s)},readBytes:function(r,a,s){for(var o=[],l=0;l<s;l++)o.push(r[a+l]);return o},readASCIIArray:function(r,a,s){for(var o=[],l=0;l<s;l++)o.push(String.fromCharCode(r[a+l]));return o},_view:function(r){return r._dataView||(r._dataView=r.buffer?new DataView(r.buffer,r.byteOffset,r.byteLength):new DataView(new Uint8Array(r).buffer))}},e._lctf={},e._lctf.parse=function(r,a,s,o,l){var u=e._bin,h={},p=a;u.readFixed(r,a),a+=4;var g=u.readUshort(r,a);a+=2;var x=u.readUshort(r,a);a+=2;var b=u.readUshort(r,a);return a+=2,h.scriptList=e._lctf.readScriptList(r,p+g),h.featureList=e._lctf.readFeatureList(r,p+x),h.lookupList=e._lctf.readLookupList(r,p+b,l),h},e._lctf.readLookupList=function(r,a,s){var o=e._bin,l=a,u=[],h=o.readUshort(r,a);a+=2;for(var p=0;p<h;p++){var g=o.readUshort(r,a);a+=2;var x=e._lctf.readLookupTable(r,l+g,s);u.push(x)}return u},e._lctf.readLookupTable=function(r,a,s){var o=e._bin,l=a,u={tabs:[]};u.ltype=o.readUshort(r,a),a+=2,u.flag=o.readUshort(r,a),a+=2;var h=o.readUshort(r,a);a+=2;for(var p=u.ltype,g=0;g<h;g++){var x=o.readUshort(r,a);a+=2;var b=s(r,p,l+x,u);u.tabs.push(b)}return u},e._lctf.numOfOnes=function(r){for(var a=0,s=0;s<32;s++)(r>>>s&1)!=0&&a++;return a},e._lctf.readClassDef=function(r,a){var s=e._bin,o=[],l=s.readUshort(r,a);if(a+=2,l==1){var u=s.readUshort(r,a);a+=2;var h=s.readUshort(r,a);a+=2;for(var p=0;p<h;p++)o.push(u+p),o.push(u+p),o.push(s.readUshort(r,a)),a+=2}if(l==2){var g=s.readUshort(r,a);for(a+=2,p=0;p<g;p++)o.push(s.readUshort(r,a)),a+=2,o.push(s.readUshort(r,a)),a+=2,o.push(s.readUshort(r,a)),a+=2}return o},e._lctf.getInterval=function(r,a){for(var s=0;s<r.length;s+=3){var o=r[s],l=r[s+1];if(r[s+2],o<=a&&a<=l)return s}return-1},e._lctf.readCoverage=function(r,a){var s=e._bin,o={};o.fmt=s.readUshort(r,a),a+=2;var l=s.readUshort(r,a);return a+=2,o.fmt==1&&(o.tab=s.readUshorts(r,a,l)),o.fmt==2&&(o.tab=s.readUshorts(r,a,3*l)),o},e._lctf.coverageIndex=function(r,a){var s=r.tab;if(r.fmt==1)return s.indexOf(a);if(r.fmt==2){var o=e._lctf.getInterval(s,a);if(o!=-1)return s[o+2]+(a-s[o])}return-1},e._lctf.readFeatureList=function(r,a){var s=e._bin,o=a,l=[],u=s.readUshort(r,a);a+=2;for(var h=0;h<u;h++){var p=s.readASCII(r,a,4);a+=4;var g=s.readUshort(r,a);a+=2;var x=e._lctf.readFeatureTable(r,o+g);x.tag=p.trim(),l.push(x)}return l},e._lctf.readFeatureTable=function(r,a){var s=e._bin,o=a,l={},u=s.readUshort(r,a);a+=2,u>0&&(l.featureParams=o+u);var h=s.readUshort(r,a);a+=2,l.tab=[];for(var p=0;p<h;p++)l.tab.push(s.readUshort(r,a+2*p));return l},e._lctf.readScriptList=function(r,a){var s=e._bin,o=a,l={},u=s.readUshort(r,a);a+=2;for(var h=0;h<u;h++){var p=s.readASCII(r,a,4);a+=4;var g=s.readUshort(r,a);a+=2,l[p.trim()]=e._lctf.readScriptTable(r,o+g)}return l},e._lctf.readScriptTable=function(r,a){var s=e._bin,o=a,l={},u=s.readUshort(r,a);a+=2,u>0&&(l.default=e._lctf.readLangSysTable(r,o+u));var h=s.readUshort(r,a);a+=2;for(var p=0;p<h;p++){var g=s.readASCII(r,a,4);a+=4;var x=s.readUshort(r,a);a+=2,l[g.trim()]=e._lctf.readLangSysTable(r,o+x)}return l},e._lctf.readLangSysTable=function(r,a){var s=e._bin,o={};s.readUshort(r,a),a+=2,o.reqFeature=s.readUshort(r,a),a+=2;var l=s.readUshort(r,a);return a+=2,o.features=s.readUshorts(r,a,l),o},e.CFF={},e.CFF.parse=function(r,a,s){var o=e._bin;(r=new Uint8Array(r.buffer,a,s))[a=0],r[++a],r[++a],r[++a],a++;var l=[];a=e.CFF.readIndex(r,a,l);for(var u=[],h=0;h<l.length-1;h++)u.push(o.readASCII(r,a+l[h],l[h+1]-l[h]));a+=l[l.length-1];var p=[];a=e.CFF.readIndex(r,a,p);var g=[];for(h=0;h<p.length-1;h++)g.push(e.CFF.readDict(r,a+p[h],a+p[h+1]));a+=p[p.length-1];var x=g[0],b=[];a=e.CFF.readIndex(r,a,b);var M=[];for(h=0;h<b.length-1;h++)M.push(o.readASCII(r,a+b[h],b[h+1]-b[h]));if(a+=b[b.length-1],e.CFF.readSubrs(r,a,x),x.CharStrings){a=x.CharStrings,b=[],a=e.CFF.readIndex(r,a,b);var S=[];for(h=0;h<b.length-1;h++)S.push(o.readBytes(r,a+b[h],b[h+1]-b[h]));x.CharStrings=S}if(x.ROS){a=x.FDArray;var T=[];for(a=e.CFF.readIndex(r,a,T),x.FDArray=[],h=0;h<T.length-1;h++){var A=e.CFF.readDict(r,a+T[h],a+T[h+1]);e.CFF._readFDict(r,A,M),x.FDArray.push(A)}a+=T[T.length-1],a=x.FDSelect,x.FDSelect=[];var E=r[a];if(a++,E!=3)throw E;var j=o.readUshort(r,a);for(a+=2,h=0;h<j+1;h++)x.FDSelect.push(o.readUshort(r,a),r[a+2]),a+=3}return x.Encoding&&(x.Encoding=e.CFF.readEncoding(r,x.Encoding,x.CharStrings.length)),x.charset&&(x.charset=e.CFF.readCharset(r,x.charset,x.CharStrings.length)),e.CFF._readFDict(r,x,M),x},e.CFF._readFDict=function(r,a,s){var o;for(var l in a.Private&&(o=a.Private[1],a.Private=e.CFF.readDict(r,o,o+a.Private[0]),a.Private.Subrs&&e.CFF.readSubrs(r,o+a.Private.Subrs,a.Private)),a)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(a[l]=s[a[l]-426+35])},e.CFF.readSubrs=function(r,a,s){var o=e._bin,l=[];a=e.CFF.readIndex(r,a,l);var u,h=l.length;u=h<1240?107:h<33900?1131:32768,s.Bias=u,s.Subrs=[];for(var p=0;p<l.length-1;p++)s.Subrs.push(o.readBytes(r,a+l[p],l[p+1]-l[p]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(r,a){for(var s=0;s<r.charset.length;s++)if(r.charset[s]==a)return s;return-1},e.CFF.glyphBySE=function(r,a){return a<0||a>255?-1:e.CFF.glyphByUnicode(r,e.CFF.tableSE[a])},e.CFF.readEncoding=function(r,a,s){e._bin;var o=[".notdef"],l=r[a];if(a++,l!=0)throw"error: unknown encoding format: "+l;var u=r[a];a++;for(var h=0;h<u;h++)o.push(r[a+h]);return o},e.CFF.readCharset=function(r,a,s){var o=e._bin,l=[".notdef"],u=r[a];if(a++,u==0)for(var h=0;h<s;h++){var p=o.readUshort(r,a);a+=2,l.push(p)}else{if(u!=1&&u!=2)throw"error: format: "+u;for(;l.length<s;){p=o.readUshort(r,a),a+=2;var g=0;for(u==1?(g=r[a],a++):(g=o.readUshort(r,a),a+=2),h=0;h<=g;h++)l.push(p),p++}}return l},e.CFF.readIndex=function(r,a,s){var o=e._bin,l=o.readUshort(r,a)+1,u=r[a+=2];if(a++,u==1)for(var h=0;h<l;h++)s.push(r[a+h]);else if(u==2)for(h=0;h<l;h++)s.push(o.readUshort(r,a+2*h));else if(u==3)for(h=0;h<l;h++)s.push(16777215&o.readUint(r,a+3*h-1));else if(l!=1)throw"unsupported offset size: "+u+", count: "+l;return(a+=l*u)-1},e.CFF.getCharString=function(r,a,s){var o=e._bin,l=r[a],u=r[a+1];r[a+2],r[a+3],r[a+4];var h=1,p=null,g=null;l<=20&&(p=l,h=1),l==12&&(p=100*l+u,h=2),21<=l&&l<=27&&(p=l,h=1),l==28&&(g=o.readShort(r,a+1),h=3),29<=l&&l<=31&&(p=l,h=1),32<=l&&l<=246&&(g=l-139,h=1),247<=l&&l<=250&&(g=256*(l-247)+u+108,h=2),251<=l&&l<=254&&(g=256*-(l-251)-u-108,h=2),l==255&&(g=o.readInt(r,a+1)/65535,h=5),s.val=g??"o"+p,s.size=h},e.CFF.readCharString=function(r,a,s){for(var o=a+s,l=e._bin,u=[];a<o;){var h=r[a],p=r[a+1];r[a+2],r[a+3],r[a+4];var g=1,x=null,b=null;h<=20&&(x=h,g=1),h==12&&(x=100*h+p,g=2),h!=19&&h!=20||(x=h,g=2),21<=h&&h<=27&&(x=h,g=1),h==28&&(b=l.readShort(r,a+1),g=3),29<=h&&h<=31&&(x=h,g=1),32<=h&&h<=246&&(b=h-139,g=1),247<=h&&h<=250&&(b=256*(h-247)+p+108,g=2),251<=h&&h<=254&&(b=256*-(h-251)-p-108,g=2),h==255&&(b=l.readInt(r,a+1)/65535,g=5),u.push(b??"o"+x),a+=g}return u},e.CFF.readDict=function(r,a,s){for(var o=e._bin,l={},u=[];a<s;){var h=r[a],p=r[a+1];r[a+2],r[a+3],r[a+4];var g=1,x=null,b=null;if(h==28&&(b=o.readShort(r,a+1),g=3),h==29&&(b=o.readInt(r,a+1),g=5),32<=h&&h<=246&&(b=h-139,g=1),247<=h&&h<=250&&(b=256*(h-247)+p+108,g=2),251<=h&&h<=254&&(b=256*-(h-251)-p-108,g=2),h==255)throw b=o.readInt(r,a+1)/65535,g=5,"unknown number";if(h==30){var M=[];for(g=1;;){var S=r[a+g];g++;var T=S>>4,A=15&S;if(T!=15&&M.push(T),A!=15&&M.push(A),A==15)break}for(var E="",j=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],R=0;R<M.length;R++)E+=j[M[R]];b=parseFloat(E)}h<=21&&(x=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][h],g=1,h==12&&(x=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][p],g=2)),x!=null?(l[x]=u.length==1?u[0]:u,u=[]):u.push(b),a+=g}return l},e.cmap={},e.cmap.parse=function(r,a,s){r=new Uint8Array(r.buffer,a,s),a=0;var o=e._bin,l={};o.readUshort(r,a),a+=2;var u=o.readUshort(r,a);a+=2;var h=[];l.tables=[];for(var p=0;p<u;p++){var g=o.readUshort(r,a);a+=2;var x=o.readUshort(r,a);a+=2;var b=o.readUint(r,a);a+=4;var M="p"+g+"e"+x,S=h.indexOf(b);if(S==-1){var T;S=l.tables.length,h.push(b);var A=o.readUshort(r,b);A==0?T=e.cmap.parse0(r,b):A==4?T=e.cmap.parse4(r,b):A==6?T=e.cmap.parse6(r,b):A==12?T=e.cmap.parse12(r,b):console.debug("unknown format: "+A,g,x,b),l.tables.push(T)}if(l[M]!=null)throw"multiple tables for one platform+encoding";l[M]=S}return l},e.cmap.parse0=function(r,a){var s=e._bin,o={};o.format=s.readUshort(r,a),a+=2;var l=s.readUshort(r,a);a+=2,s.readUshort(r,a),a+=2,o.map=[];for(var u=0;u<l-6;u++)o.map.push(r[a+u]);return o},e.cmap.parse4=function(r,a){var s=e._bin,o=a,l={};l.format=s.readUshort(r,a),a+=2;var u=s.readUshort(r,a);a+=2,s.readUshort(r,a),a+=2;var h=s.readUshort(r,a);a+=2;var p=h/2;l.searchRange=s.readUshort(r,a),a+=2,l.entrySelector=s.readUshort(r,a),a+=2,l.rangeShift=s.readUshort(r,a),a+=2,l.endCount=s.readUshorts(r,a,p),a+=2*p,a+=2,l.startCount=s.readUshorts(r,a,p),a+=2*p,l.idDelta=[];for(var g=0;g<p;g++)l.idDelta.push(s.readShort(r,a)),a+=2;for(l.idRangeOffset=s.readUshorts(r,a,p),a+=2*p,l.glyphIdArray=[];a<o+u;)l.glyphIdArray.push(s.readUshort(r,a)),a+=2;return l},e.cmap.parse6=function(r,a){var s=e._bin,o={};o.format=s.readUshort(r,a),a+=2,s.readUshort(r,a),a+=2,s.readUshort(r,a),a+=2,o.firstCode=s.readUshort(r,a),a+=2;var l=s.readUshort(r,a);a+=2,o.glyphIdArray=[];for(var u=0;u<l;u++)o.glyphIdArray.push(s.readUshort(r,a)),a+=2;return o},e.cmap.parse12=function(r,a){var s=e._bin,o={};o.format=s.readUshort(r,a),a+=2,a+=2,s.readUint(r,a),a+=4,s.readUint(r,a),a+=4;var l=s.readUint(r,a);a+=4,o.groups=[];for(var u=0;u<l;u++){var h=a+12*u,p=s.readUint(r,h+0),g=s.readUint(r,h+4),x=s.readUint(r,h+8);o.groups.push([p,g,x])}return o},e.glyf={},e.glyf.parse=function(r,a,s,o){for(var l=[],u=0;u<o.maxp.numGlyphs;u++)l.push(null);return l},e.glyf._parseGlyf=function(r,a){var s=e._bin,o=r._data,l=e._tabOffset(o,"glyf",r._offset)+r.loca[a];if(r.loca[a]==r.loca[a+1])return null;var u={};if(u.noc=s.readShort(o,l),l+=2,u.xMin=s.readShort(o,l),l+=2,u.yMin=s.readShort(o,l),l+=2,u.xMax=s.readShort(o,l),l+=2,u.yMax=s.readShort(o,l),l+=2,u.xMin>=u.xMax||u.yMin>=u.yMax)return null;if(u.noc>0){u.endPts=[];for(var h=0;h<u.noc;h++)u.endPts.push(s.readUshort(o,l)),l+=2;var p=s.readUshort(o,l);if(l+=2,o.length-l<p)return null;u.instructions=s.readBytes(o,l,p),l+=p;var g=u.endPts[u.noc-1]+1;for(u.flags=[],h=0;h<g;h++){var x=o[l];if(l++,u.flags.push(x),(8&x)!=0){var b=o[l];l++;for(var M=0;M<b;M++)u.flags.push(x),h++}}for(u.xs=[],h=0;h<g;h++){var S=(2&u.flags[h])!=0,T=(16&u.flags[h])!=0;S?(u.xs.push(T?o[l]:-o[l]),l++):T?u.xs.push(0):(u.xs.push(s.readShort(o,l)),l+=2)}for(u.ys=[],h=0;h<g;h++)S=(4&u.flags[h])!=0,T=(32&u.flags[h])!=0,S?(u.ys.push(T?o[l]:-o[l]),l++):T?u.ys.push(0):(u.ys.push(s.readShort(o,l)),l+=2);var A=0,E=0;for(h=0;h<g;h++)A+=u.xs[h],E+=u.ys[h],u.xs[h]=A,u.ys[h]=E}else{var j;u.parts=[];do{j=s.readUshort(o,l),l+=2;var R={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(u.parts.push(R),R.glyphIndex=s.readUshort(o,l),l+=2,1&j){var C=s.readShort(o,l);l+=2;var D=s.readShort(o,l);l+=2}else C=s.readInt8(o,l),l++,D=s.readInt8(o,l),l++;2&j?(R.m.tx=C,R.m.ty=D):(R.p1=C,R.p2=D),8&j?(R.m.a=R.m.d=s.readF2dot14(o,l),l+=2):64&j?(R.m.a=s.readF2dot14(o,l),l+=2,R.m.d=s.readF2dot14(o,l),l+=2):128&j&&(R.m.a=s.readF2dot14(o,l),l+=2,R.m.b=s.readF2dot14(o,l),l+=2,R.m.c=s.readF2dot14(o,l),l+=2,R.m.d=s.readF2dot14(o,l),l+=2)}while(32&j);if(256&j){var U=s.readUshort(o,l);for(l+=2,u.instr=[],h=0;h<U;h++)u.instr.push(o[l]),l++}}return u},e.GDEF={},e.GDEF.parse=function(r,a,s,o){var l=a;a+=4;var u=e._bin.readUshort(r,a);return{glyphClassDef:u===0?null:e._lctf.readClassDef(r,l+u)}},e.GPOS={},e.GPOS.parse=function(r,a,s,o){return e._lctf.parse(r,a,s,o,e.GPOS.subt)},e.GPOS.subt=function(r,a,s,o){var l=e._bin,u=s,h={};if(h.fmt=l.readUshort(r,s),s+=2,a==1||a==2||a==3||a==7||a==8&&h.fmt<=2){var p=l.readUshort(r,s);s+=2,h.coverage=e._lctf.readCoverage(r,p+u)}if(a==1&&h.fmt==1){var g=l.readUshort(r,s);s+=2,g!=0&&(h.pos=e.GPOS.readValueRecord(r,s,g))}else if(a==2&&h.fmt>=1&&h.fmt<=2){g=l.readUshort(r,s),s+=2;var x=l.readUshort(r,s);s+=2;var b=e._lctf.numOfOnes(g),M=e._lctf.numOfOnes(x);if(h.fmt==1){h.pairsets=[];var S=l.readUshort(r,s);s+=2;for(var T=0;T<S;T++){var A=u+l.readUshort(r,s);s+=2;var E=l.readUshort(r,A);A+=2;for(var j=[],R=0;R<E;R++){var C=l.readUshort(r,A);A+=2,g!=0&&(G=e.GPOS.readValueRecord(r,A,g),A+=2*b),x!=0&&(H=e.GPOS.readValueRecord(r,A,x),A+=2*M),j.push({gid2:C,val1:G,val2:H})}h.pairsets.push(j)}}if(h.fmt==2){var D=l.readUshort(r,s);s+=2;var U=l.readUshort(r,s);s+=2;var I=l.readUshort(r,s);s+=2;var L=l.readUshort(r,s);for(s+=2,h.classDef1=e._lctf.readClassDef(r,u+D),h.classDef2=e._lctf.readClassDef(r,u+U),h.matrix=[],T=0;T<I;T++){var F=[];for(R=0;R<L;R++){var G=null,H=null;g!=0&&(G=e.GPOS.readValueRecord(r,s,g),s+=2*b),x!=0&&(H=e.GPOS.readValueRecord(r,s,x),s+=2*M),F.push({val1:G,val2:H})}h.matrix.push(F)}}}else if(a==4&&h.fmt==1)h.markCoverage=e._lctf.readCoverage(r,l.readUshort(r,s)+u),h.baseCoverage=e._lctf.readCoverage(r,l.readUshort(r,s+2)+u),h.markClassCount=l.readUshort(r,s+4),h.markArray=e.GPOS.readMarkArray(r,l.readUshort(r,s+6)+u),h.baseArray=e.GPOS.readBaseArray(r,l.readUshort(r,s+8)+u,h.markClassCount);else if(a==6&&h.fmt==1)h.mark1Coverage=e._lctf.readCoverage(r,l.readUshort(r,s)+u),h.mark2Coverage=e._lctf.readCoverage(r,l.readUshort(r,s+2)+u),h.markClassCount=l.readUshort(r,s+4),h.mark1Array=e.GPOS.readMarkArray(r,l.readUshort(r,s+6)+u),h.mark2Array=e.GPOS.readBaseArray(r,l.readUshort(r,s+8)+u,h.markClassCount);else{if(a==9&&h.fmt==1){var W=l.readUshort(r,s);s+=2;var Y=l.readUint(r,s);if(s+=4,o.ltype==9)o.ltype=W;else if(o.ltype!=W)throw"invalid extension substitution";return e.GPOS.subt(r,o.ltype,u+Y)}console.debug("unsupported GPOS table LookupType",a,"format",h.fmt)}return h},e.GPOS.readValueRecord=function(r,a,s){var o=e._bin,l=[];return l.push(1&s?o.readShort(r,a):0),a+=1&s?2:0,l.push(2&s?o.readShort(r,a):0),a+=2&s?2:0,l.push(4&s?o.readShort(r,a):0),a+=4&s?2:0,l.push(8&s?o.readShort(r,a):0),a+=8&s?2:0,l},e.GPOS.readBaseArray=function(r,a,s){var o=e._bin,l=[],u=a,h=o.readUshort(r,a);a+=2;for(var p=0;p<h;p++){for(var g=[],x=0;x<s;x++)g.push(e.GPOS.readAnchorRecord(r,u+o.readUshort(r,a))),a+=2;l.push(g)}return l},e.GPOS.readMarkArray=function(r,a){var s=e._bin,o=[],l=a,u=s.readUshort(r,a);a+=2;for(var h=0;h<u;h++){var p=e.GPOS.readAnchorRecord(r,s.readUshort(r,a+2)+l);p.markClass=s.readUshort(r,a),o.push(p),a+=4}return o},e.GPOS.readAnchorRecord=function(r,a){var s=e._bin,o={};return o.fmt=s.readUshort(r,a),o.x=s.readShort(r,a+2),o.y=s.readShort(r,a+4),o},e.GSUB={},e.GSUB.parse=function(r,a,s,o){return e._lctf.parse(r,a,s,o,e.GSUB.subt)},e.GSUB.subt=function(r,a,s,o){var l=e._bin,u=s,h={};if(h.fmt=l.readUshort(r,s),s+=2,a!=1&&a!=2&&a!=4&&a!=5&&a!=6)return null;if(a==1||a==2||a==4||a==5&&h.fmt<=2||a==6&&h.fmt<=2){var p=l.readUshort(r,s);s+=2,h.coverage=e._lctf.readCoverage(r,u+p)}if(a==1&&h.fmt>=1&&h.fmt<=2){if(h.fmt==1)h.delta=l.readShort(r,s),s+=2;else if(h.fmt==2){var g=l.readUshort(r,s);s+=2,h.newg=l.readUshorts(r,s,g),s+=2*h.newg.length}}else if(a==2&&h.fmt==1){g=l.readUshort(r,s),s+=2,h.seqs=[];for(var x=0;x<g;x++){var b=l.readUshort(r,s)+u;s+=2;var M=l.readUshort(r,b);h.seqs.push(l.readUshorts(r,b+2,M))}}else if(a==4)for(h.vals=[],g=l.readUshort(r,s),s+=2,x=0;x<g;x++){var S=l.readUshort(r,s);s+=2,h.vals.push(e.GSUB.readLigatureSet(r,u+S))}else if(a==5&&h.fmt==2){if(h.fmt==2){var T=l.readUshort(r,s);s+=2,h.cDef=e._lctf.readClassDef(r,u+T),h.scset=[];var A=l.readUshort(r,s);for(s+=2,x=0;x<A;x++){var E=l.readUshort(r,s);s+=2,h.scset.push(E==0?null:e.GSUB.readSubClassSet(r,u+E))}}}else if(a==6&&h.fmt==3){if(h.fmt==3){for(x=0;x<3;x++){g=l.readUshort(r,s),s+=2;for(var j=[],R=0;R<g;R++)j.push(e._lctf.readCoverage(r,u+l.readUshort(r,s+2*R)));s+=2*g,x==0&&(h.backCvg=j),x==1&&(h.inptCvg=j),x==2&&(h.ahedCvg=j)}g=l.readUshort(r,s),s+=2,h.lookupRec=e.GSUB.readSubstLookupRecords(r,s,g)}}else{if(a==7&&h.fmt==1){var C=l.readUshort(r,s);s+=2;var D=l.readUint(r,s);if(s+=4,o.ltype==9)o.ltype=C;else if(o.ltype!=C)throw"invalid extension substitution";return e.GSUB.subt(r,o.ltype,u+D)}console.debug("unsupported GSUB table LookupType",a,"format",h.fmt)}return h},e.GSUB.readSubClassSet=function(r,a){var s=e._bin.readUshort,o=a,l=[],u=s(r,a);a+=2;for(var h=0;h<u;h++){var p=s(r,a);a+=2,l.push(e.GSUB.readSubClassRule(r,o+p))}return l},e.GSUB.readSubClassRule=function(r,a){var s=e._bin.readUshort,o={},l=s(r,a),u=s(r,a+=2);a+=2,o.input=[];for(var h=0;h<l-1;h++)o.input.push(s(r,a)),a+=2;return o.substLookupRecords=e.GSUB.readSubstLookupRecords(r,a,u),o},e.GSUB.readSubstLookupRecords=function(r,a,s){for(var o=e._bin.readUshort,l=[],u=0;u<s;u++)l.push(o(r,a),o(r,a+2)),a+=4;return l},e.GSUB.readChainSubClassSet=function(r,a){var s=e._bin,o=a,l=[],u=s.readUshort(r,a);a+=2;for(var h=0;h<u;h++){var p=s.readUshort(r,a);a+=2,l.push(e.GSUB.readChainSubClassRule(r,o+p))}return l},e.GSUB.readChainSubClassRule=function(r,a){for(var s=e._bin,o={},l=["backtrack","input","lookahead"],u=0;u<l.length;u++){var h=s.readUshort(r,a);a+=2,u==1&&h--,o[l[u]]=s.readUshorts(r,a,h),a+=2*o[l[u]].length}return h=s.readUshort(r,a),a+=2,o.subst=s.readUshorts(r,a,2*h),a+=2*o.subst.length,o},e.GSUB.readLigatureSet=function(r,a){var s=e._bin,o=a,l=[],u=s.readUshort(r,a);a+=2;for(var h=0;h<u;h++){var p=s.readUshort(r,a);a+=2,l.push(e.GSUB.readLigature(r,o+p))}return l},e.GSUB.readLigature=function(r,a){var s=e._bin,o={chain:[]};o.nglyph=s.readUshort(r,a),a+=2;var l=s.readUshort(r,a);a+=2;for(var u=0;u<l-1;u++)o.chain.push(s.readUshort(r,a)),a+=2;return o},e.head={},e.head.parse=function(r,a,s){var o=e._bin,l={};return o.readFixed(r,a),a+=4,l.fontRevision=o.readFixed(r,a),a+=4,o.readUint(r,a),a+=4,o.readUint(r,a),a+=4,l.flags=o.readUshort(r,a),a+=2,l.unitsPerEm=o.readUshort(r,a),a+=2,l.created=o.readUint64(r,a),a+=8,l.modified=o.readUint64(r,a),a+=8,l.xMin=o.readShort(r,a),a+=2,l.yMin=o.readShort(r,a),a+=2,l.xMax=o.readShort(r,a),a+=2,l.yMax=o.readShort(r,a),a+=2,l.macStyle=o.readUshort(r,a),a+=2,l.lowestRecPPEM=o.readUshort(r,a),a+=2,l.fontDirectionHint=o.readShort(r,a),a+=2,l.indexToLocFormat=o.readShort(r,a),a+=2,l.glyphDataFormat=o.readShort(r,a),a+=2,l},e.hhea={},e.hhea.parse=function(r,a,s){var o=e._bin,l={};return o.readFixed(r,a),a+=4,l.ascender=o.readShort(r,a),a+=2,l.descender=o.readShort(r,a),a+=2,l.lineGap=o.readShort(r,a),a+=2,l.advanceWidthMax=o.readUshort(r,a),a+=2,l.minLeftSideBearing=o.readShort(r,a),a+=2,l.minRightSideBearing=o.readShort(r,a),a+=2,l.xMaxExtent=o.readShort(r,a),a+=2,l.caretSlopeRise=o.readShort(r,a),a+=2,l.caretSlopeRun=o.readShort(r,a),a+=2,l.caretOffset=o.readShort(r,a),a+=2,a+=8,l.metricDataFormat=o.readShort(r,a),a+=2,l.numberOfHMetrics=o.readUshort(r,a),a+=2,l},e.hmtx={},e.hmtx.parse=function(r,a,s,o){for(var l=e._bin,u={aWidth:[],lsBearing:[]},h=0,p=0,g=0;g<o.maxp.numGlyphs;g++)g<o.hhea.numberOfHMetrics&&(h=l.readUshort(r,a),a+=2,p=l.readShort(r,a),a+=2),u.aWidth.push(h),u.lsBearing.push(p);return u},e.kern={},e.kern.parse=function(r,a,s,o){var l=e._bin,u=l.readUshort(r,a);if(a+=2,u==1)return e.kern.parseV1(r,a-2,s,o);var h=l.readUshort(r,a);a+=2;for(var p={glyph1:[],rval:[]},g=0;g<h;g++){a+=2,s=l.readUshort(r,a),a+=2;var x=l.readUshort(r,a);a+=2;var b=x>>>8;if((b&=15)!=0)throw"unknown kern table format: "+b;a=e.kern.readFormat0(r,a,p)}return p},e.kern.parseV1=function(r,a,s,o){var l=e._bin;l.readFixed(r,a),a+=4;var u=l.readUint(r,a);a+=4;for(var h={glyph1:[],rval:[]},p=0;p<u;p++){l.readUint(r,a),a+=4;var g=l.readUshort(r,a);a+=2,l.readUshort(r,a),a+=2;var x=g>>>8;if((x&=15)!=0)throw"unknown kern table format: "+x;a=e.kern.readFormat0(r,a,h)}return h},e.kern.readFormat0=function(r,a,s){var o=e._bin,l=-1,u=o.readUshort(r,a);a+=2,o.readUshort(r,a),a+=2,o.readUshort(r,a),a+=2,o.readUshort(r,a),a+=2;for(var h=0;h<u;h++){var p=o.readUshort(r,a);a+=2;var g=o.readUshort(r,a);a+=2;var x=o.readShort(r,a);a+=2,p!=l&&(s.glyph1.push(p),s.rval.push({glyph2:[],vals:[]}));var b=s.rval[s.rval.length-1];b.glyph2.push(g),b.vals.push(x),l=p}return a},e.loca={},e.loca.parse=function(r,a,s,o){var l=e._bin,u=[],h=o.head.indexToLocFormat,p=o.maxp.numGlyphs+1;if(h==0)for(var g=0;g<p;g++)u.push(l.readUshort(r,a+(g<<1))<<1);if(h==1)for(g=0;g<p;g++)u.push(l.readUint(r,a+(g<<2)));return u},e.maxp={},e.maxp.parse=function(r,a,s){var o=e._bin,l={},u=o.readUint(r,a);return a+=4,l.numGlyphs=o.readUshort(r,a),a+=2,u==65536&&(l.maxPoints=o.readUshort(r,a),a+=2,l.maxContours=o.readUshort(r,a),a+=2,l.maxCompositePoints=o.readUshort(r,a),a+=2,l.maxCompositeContours=o.readUshort(r,a),a+=2,l.maxZones=o.readUshort(r,a),a+=2,l.maxTwilightPoints=o.readUshort(r,a),a+=2,l.maxStorage=o.readUshort(r,a),a+=2,l.maxFunctionDefs=o.readUshort(r,a),a+=2,l.maxInstructionDefs=o.readUshort(r,a),a+=2,l.maxStackElements=o.readUshort(r,a),a+=2,l.maxSizeOfInstructions=o.readUshort(r,a),a+=2,l.maxComponentElements=o.readUshort(r,a),a+=2,l.maxComponentDepth=o.readUshort(r,a),a+=2),l},e.name={},e.name.parse=function(r,a,s){var o=e._bin,l={};o.readUshort(r,a),a+=2;var u=o.readUshort(r,a);a+=2,o.readUshort(r,a);for(var h,p=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],g=a+=2,x=0;x<u;x++){var b=o.readUshort(r,a);a+=2;var M=o.readUshort(r,a);a+=2;var S=o.readUshort(r,a);a+=2;var T=o.readUshort(r,a);a+=2;var A=o.readUshort(r,a);a+=2;var E=o.readUshort(r,a);a+=2;var j,R=p[T],C=g+12*u+E;if(b==0)j=o.readUnicode(r,C,A/2);else if(b==3&&M==0)j=o.readUnicode(r,C,A/2);else if(M==0)j=o.readASCII(r,C,A);else if(M==1)j=o.readUnicode(r,C,A/2);else if(M==3)j=o.readUnicode(r,C,A/2);else{if(b!=1)throw"unknown encoding "+M+", platformID: "+b;j=o.readASCII(r,C,A),console.debug("reading unknown MAC encoding "+M+" as ASCII")}var D="p"+b+","+S.toString(16);l[D]==null&&(l[D]={}),l[D][R!==void 0?R:T]=j,l[D]._lang=S}for(var U in l)if(l[U].postScriptName!=null&&l[U]._lang==1033)return l[U];for(var U in l)if(l[U].postScriptName!=null&&l[U]._lang==0)return l[U];for(var U in l)if(l[U].postScriptName!=null&&l[U]._lang==3084)return l[U];for(var U in l)if(l[U].postScriptName!=null)return l[U];for(var U in l){h=U;break}return console.debug("returning name table with languageID "+l[h]._lang),l[h]},e["OS/2"]={},e["OS/2"].parse=function(r,a,s){var o=e._bin.readUshort(r,a);a+=2;var l={};if(o==0)e["OS/2"].version0(r,a,l);else if(o==1)e["OS/2"].version1(r,a,l);else if(o==2||o==3||o==4)e["OS/2"].version2(r,a,l);else{if(o!=5)throw"unknown OS/2 table version: "+o;e["OS/2"].version5(r,a,l)}return l},e["OS/2"].version0=function(r,a,s){var o=e._bin;return s.xAvgCharWidth=o.readShort(r,a),a+=2,s.usWeightClass=o.readUshort(r,a),a+=2,s.usWidthClass=o.readUshort(r,a),a+=2,s.fsType=o.readUshort(r,a),a+=2,s.ySubscriptXSize=o.readShort(r,a),a+=2,s.ySubscriptYSize=o.readShort(r,a),a+=2,s.ySubscriptXOffset=o.readShort(r,a),a+=2,s.ySubscriptYOffset=o.readShort(r,a),a+=2,s.ySuperscriptXSize=o.readShort(r,a),a+=2,s.ySuperscriptYSize=o.readShort(r,a),a+=2,s.ySuperscriptXOffset=o.readShort(r,a),a+=2,s.ySuperscriptYOffset=o.readShort(r,a),a+=2,s.yStrikeoutSize=o.readShort(r,a),a+=2,s.yStrikeoutPosition=o.readShort(r,a),a+=2,s.sFamilyClass=o.readShort(r,a),a+=2,s.panose=o.readBytes(r,a,10),a+=10,s.ulUnicodeRange1=o.readUint(r,a),a+=4,s.ulUnicodeRange2=o.readUint(r,a),a+=4,s.ulUnicodeRange3=o.readUint(r,a),a+=4,s.ulUnicodeRange4=o.readUint(r,a),a+=4,s.achVendID=[o.readInt8(r,a),o.readInt8(r,a+1),o.readInt8(r,a+2),o.readInt8(r,a+3)],a+=4,s.fsSelection=o.readUshort(r,a),a+=2,s.usFirstCharIndex=o.readUshort(r,a),a+=2,s.usLastCharIndex=o.readUshort(r,a),a+=2,s.sTypoAscender=o.readShort(r,a),a+=2,s.sTypoDescender=o.readShort(r,a),a+=2,s.sTypoLineGap=o.readShort(r,a),a+=2,s.usWinAscent=o.readUshort(r,a),a+=2,s.usWinDescent=o.readUshort(r,a),a+=2},e["OS/2"].version1=function(r,a,s){var o=e._bin;return a=e["OS/2"].version0(r,a,s),s.ulCodePageRange1=o.readUint(r,a),a+=4,s.ulCodePageRange2=o.readUint(r,a),a+=4},e["OS/2"].version2=function(r,a,s){var o=e._bin;return a=e["OS/2"].version1(r,a,s),s.sxHeight=o.readShort(r,a),a+=2,s.sCapHeight=o.readShort(r,a),a+=2,s.usDefault=o.readUshort(r,a),a+=2,s.usBreak=o.readUshort(r,a),a+=2,s.usMaxContext=o.readUshort(r,a),a+=2},e["OS/2"].version5=function(r,a,s){var o=e._bin;return a=e["OS/2"].version2(r,a,s),s.usLowerOpticalPointSize=o.readUshort(r,a),a+=2,s.usUpperOpticalPointSize=o.readUshort(r,a),a+=2},e.post={},e.post.parse=function(r,a,s){var o=e._bin,l={};return l.version=o.readFixed(r,a),a+=4,l.italicAngle=o.readFixed(r,a),a+=4,l.underlinePosition=o.readShort(r,a),a+=2,l.underlineThickness=o.readShort(r,a),a+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(r,a){var s=r.cmap,o=-1;if(s.p0e4!=null?o=s.p0e4:s.p3e1!=null?o=s.p3e1:s.p1e0!=null?o=s.p1e0:s.p0e3!=null&&(o=s.p0e3),o==-1)throw"no familiar platform and encoding!";var l=s.tables[o];if(l.format==0)return a>=l.map.length?0:l.map[a];if(l.format==4){for(var u=-1,h=0;h<l.endCount.length;h++)if(a<=l.endCount[h]){u=h;break}return u==-1||l.startCount[u]>a?0:65535&(l.idRangeOffset[u]!=0?l.glyphIdArray[a-l.startCount[u]+(l.idRangeOffset[u]>>1)-(l.idRangeOffset.length-u)]:a+l.idDelta[u])}if(l.format==12){if(a>l.groups[l.groups.length-1][1])return 0;for(h=0;h<l.groups.length;h++){var p=l.groups[h];if(p[0]<=a&&a<=p[1])return p[2]+(a-p[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(r,a){var s={cmds:[],crds:[]};if(r.SVG&&r.SVG.entries[a]){var o=r.SVG.entries[a];return o==null?s:(typeof o=="string"&&(o=e.SVG.toPath(o),r.SVG.entries[a]=o),o)}if(r.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r.CFF.Private?r.CFF.Private.defaultWidthX:0,open:!1},u=r.CFF,h=r.CFF.Private;if(u.ROS){for(var p=0;u.FDSelect[p+2]<=a;)p+=2;h=u.FDArray[u.FDSelect[p+1]].Private}e.U._drawCFF(r.CFF.CharStrings[a],l,u,h,s)}else r.glyf&&e.U._drawGlyf(a,r,s);return s},e.U._drawGlyf=function(r,a,s){var o=a.glyf[r];o==null&&(o=a.glyf[r]=e.glyf._parseGlyf(a,r)),o!=null&&(o.noc>-1?e.U._simpleGlyph(o,s):e.U._compoGlyph(o,a,s))},e.U._simpleGlyph=function(r,a){for(var s=0;s<r.noc;s++){for(var o=s==0?0:r.endPts[s-1]+1,l=r.endPts[s],u=o;u<=l;u++){var h=u==o?l:u-1,p=u==l?o:u+1,g=1&r.flags[u],x=1&r.flags[h],b=1&r.flags[p],M=r.xs[u],S=r.ys[u];if(u==o)if(g){if(!x){e.U.P.moveTo(a,M,S);continue}e.U.P.moveTo(a,r.xs[h],r.ys[h])}else x?e.U.P.moveTo(a,r.xs[h],r.ys[h]):e.U.P.moveTo(a,(r.xs[h]+M)/2,(r.ys[h]+S)/2);g?x&&e.U.P.lineTo(a,M,S):b?e.U.P.qcurveTo(a,M,S,r.xs[p],r.ys[p]):e.U.P.qcurveTo(a,M,S,(M+r.xs[p])/2,(S+r.ys[p])/2)}e.U.P.closePath(a)}},e.U._compoGlyph=function(r,a,s){for(var o=0;o<r.parts.length;o++){var l={cmds:[],crds:[]},u=r.parts[o];e.U._drawGlyf(u.glyphIndex,a,l);for(var h=u.m,p=0;p<l.crds.length;p+=2){var g=l.crds[p],x=l.crds[p+1];s.crds.push(g*h.a+x*h.b+h.tx),s.crds.push(g*h.c+x*h.d+h.ty)}for(p=0;p<l.cmds.length;p++)s.cmds.push(l.cmds[p])}},e.U._getGlyphClass=function(r,a){var s=e._lctf.getInterval(a,r);return s==-1?0:a[s+2]},e.U._applySubs=function(r,a,s,o){for(var l=r.length-a-1,u=0;u<s.tabs.length;u++)if(s.tabs[u]!=null){var h,p=s.tabs[u];if(!p.coverage||(h=e._lctf.coverageIndex(p.coverage,r[a]))!=-1){if(s.ltype==1)r[a],p.fmt==1?r[a]=r[a]+p.delta:r[a]=p.newg[h];else if(s.ltype==4)for(var g=p.vals[h],x=0;x<g.length;x++){var b=g[x],M=b.chain.length;if(!(M>l)){for(var S=!0,T=0,A=0;A<M;A++){for(;r[a+T+(1+A)]==-1;)T++;b.chain[A]!=r[a+T+(1+A)]&&(S=!1)}if(S){for(r[a]=b.nglyph,A=0;A<M+T;A++)r[a+A+1]=-1;break}}}else if(s.ltype==5&&p.fmt==2)for(var E=e._lctf.getInterval(p.cDef,r[a]),j=p.cDef[E+2],R=p.scset[j],C=0;C<R.length;C++){var D=R[C],U=D.input;if(!(U.length>l)){for(S=!0,A=0;A<U.length;A++){var I=e._lctf.getInterval(p.cDef,r[a+1+A]);if(E==-1&&p.cDef[I+2]!=U[A]){S=!1;break}}if(S){var L=D.substLookupRecords;for(x=0;x<L.length;x+=2)L[x],L[x+1]}}}else if(s.ltype==6&&p.fmt==3){if(!e.U._glsCovered(r,p.backCvg,a-p.backCvg.length)||!e.U._glsCovered(r,p.inptCvg,a)||!e.U._glsCovered(r,p.ahedCvg,a+p.inptCvg.length))continue;var F=p.lookupRec;for(C=0;C<F.length;C+=2){E=F[C];var G=o[F[C+1]];e.U._applySubs(r,a+E,G,o)}}}}},e.U._glsCovered=function(r,a,s){for(var o=0;o<a.length;o++)if(e._lctf.coverageIndex(a[o],r[s+o])==-1)return!1;return!0},e.U.glyphsToPath=function(r,a,s){for(var o={cmds:[],crds:[]},l=0,u=0;u<a.length;u++){var h=a[u];if(h!=-1){for(var p=u<a.length-1&&a[u+1]!=-1?a[u+1]:0,g=e.U.glyphToPath(r,h),x=0;x<g.crds.length;x+=2)o.crds.push(g.crds[x]+l),o.crds.push(g.crds[x+1]);for(s&&o.cmds.push(s),x=0;x<g.cmds.length;x++)o.cmds.push(g.cmds[x]);s&&o.cmds.push("X"),l+=r.hmtx.aWidth[h],u<a.length-1&&(l+=e.U.getPairAdjustment(r,h,p))}}return o},e.U.P={},e.U.P.moveTo=function(r,a,s){r.cmds.push("M"),r.crds.push(a,s)},e.U.P.lineTo=function(r,a,s){r.cmds.push("L"),r.crds.push(a,s)},e.U.P.curveTo=function(r,a,s,o,l,u,h){r.cmds.push("C"),r.crds.push(a,s,o,l,u,h)},e.U.P.qcurveTo=function(r,a,s,o,l){r.cmds.push("Q"),r.crds.push(a,s,o,l)},e.U.P.closePath=function(r){r.cmds.push("Z")},e.U._drawCFF=function(r,a,s,o,l){for(var u=a.stack,h=a.nStems,p=a.haveWidth,g=a.width,x=a.open,b=0,M=a.x,S=a.y,T=0,A=0,E=0,j=0,R=0,C=0,D=0,U=0,I=0,L=0,F={val:0,size:0};b<r.length;){e.CFF.getCharString(r,b,F);var G=F.val;if(b+=F.size,G=="o1"||G=="o18")u.length%2!=0&&!p&&(g=u.shift()+o.nominalWidthX),h+=u.length>>1,u.length=0,p=!0;else if(G=="o3"||G=="o23")u.length%2!=0&&!p&&(g=u.shift()+o.nominalWidthX),h+=u.length>>1,u.length=0,p=!0;else if(G=="o4")u.length>1&&!p&&(g=u.shift()+o.nominalWidthX,p=!0),x&&e.U.P.closePath(l),S+=u.pop(),e.U.P.moveTo(l,M,S),x=!0;else if(G=="o5")for(;u.length>0;)M+=u.shift(),S+=u.shift(),e.U.P.lineTo(l,M,S);else if(G=="o6"||G=="o7")for(var H=u.length,W=G=="o6",Y=0;Y<H;Y++){var k=u.shift();W?M+=k:S+=k,W=!W,e.U.P.lineTo(l,M,S)}else if(G=="o8"||G=="o24"){H=u.length;for(var $=0;$+6<=H;)T=M+u.shift(),A=S+u.shift(),E=T+u.shift(),j=A+u.shift(),M=E+u.shift(),S=j+u.shift(),e.U.P.curveTo(l,T,A,E,j,M,S),$+=6;G=="o24"&&(M+=u.shift(),S+=u.shift(),e.U.P.lineTo(l,M,S))}else{if(G=="o11")break;if(G=="o1234"||G=="o1235"||G=="o1236"||G=="o1237")G=="o1234"&&(A=S,E=(T=M+u.shift())+u.shift(),L=j=A+u.shift(),C=j,U=S,M=(D=(R=(I=E+u.shift())+u.shift())+u.shift())+u.shift(),e.U.P.curveTo(l,T,A,E,j,I,L),e.U.P.curveTo(l,R,C,D,U,M,S)),G=="o1235"&&(T=M+u.shift(),A=S+u.shift(),E=T+u.shift(),j=A+u.shift(),I=E+u.shift(),L=j+u.shift(),R=I+u.shift(),C=L+u.shift(),D=R+u.shift(),U=C+u.shift(),M=D+u.shift(),S=U+u.shift(),u.shift(),e.U.P.curveTo(l,T,A,E,j,I,L),e.U.P.curveTo(l,R,C,D,U,M,S)),G=="o1236"&&(T=M+u.shift(),A=S+u.shift(),E=T+u.shift(),L=j=A+u.shift(),C=j,D=(R=(I=E+u.shift())+u.shift())+u.shift(),U=C+u.shift(),M=D+u.shift(),e.U.P.curveTo(l,T,A,E,j,I,L),e.U.P.curveTo(l,R,C,D,U,M,S)),G=="o1237"&&(T=M+u.shift(),A=S+u.shift(),E=T+u.shift(),j=A+u.shift(),I=E+u.shift(),L=j+u.shift(),R=I+u.shift(),C=L+u.shift(),D=R+u.shift(),U=C+u.shift(),Math.abs(D-M)>Math.abs(U-S)?M=D+u.shift():S=U+u.shift(),e.U.P.curveTo(l,T,A,E,j,I,L),e.U.P.curveTo(l,R,C,D,U,M,S));else if(G=="o14"){if(u.length>0&&!p&&(g=u.shift()+s.nominalWidthX,p=!0),u.length==4){var ee=u.shift(),te=u.shift(),ae=u.shift(),q=u.shift(),K=e.CFF.glyphBySE(s,ae),ie=e.CFF.glyphBySE(s,q);e.U._drawCFF(s.CharStrings[K],a,s,o,l),a.x=ee,a.y=te,e.U._drawCFF(s.CharStrings[ie],a,s,o,l)}x&&(e.U.P.closePath(l),x=!1)}else if(G=="o19"||G=="o20")u.length%2!=0&&!p&&(g=u.shift()+o.nominalWidthX),h+=u.length>>1,u.length=0,p=!0,b+=h+7>>3;else if(G=="o21")u.length>2&&!p&&(g=u.shift()+o.nominalWidthX,p=!0),S+=u.pop(),M+=u.pop(),x&&e.U.P.closePath(l),e.U.P.moveTo(l,M,S),x=!0;else if(G=="o22")u.length>1&&!p&&(g=u.shift()+o.nominalWidthX,p=!0),M+=u.pop(),x&&e.U.P.closePath(l),e.U.P.moveTo(l,M,S),x=!0;else if(G=="o25"){for(;u.length>6;)M+=u.shift(),S+=u.shift(),e.U.P.lineTo(l,M,S);T=M+u.shift(),A=S+u.shift(),E=T+u.shift(),j=A+u.shift(),M=E+u.shift(),S=j+u.shift(),e.U.P.curveTo(l,T,A,E,j,M,S)}else if(G=="o26")for(u.length%2&&(M+=u.shift());u.length>0;)T=M,A=S+u.shift(),M=E=T+u.shift(),S=(j=A+u.shift())+u.shift(),e.U.P.curveTo(l,T,A,E,j,M,S);else if(G=="o27")for(u.length%2&&(S+=u.shift());u.length>0;)A=S,E=(T=M+u.shift())+u.shift(),j=A+u.shift(),M=E+u.shift(),S=j,e.U.P.curveTo(l,T,A,E,j,M,S);else if(G=="o10"||G=="o29"){var ue=G=="o10"?o:s;if(u.length==0)console.debug("error: empty stack");else{var me=u.pop(),fe=ue.Subrs[me+ue.Bias];a.x=M,a.y=S,a.nStems=h,a.haveWidth=p,a.width=g,a.open=x,e.U._drawCFF(fe,a,s,o,l),M=a.x,S=a.y,h=a.nStems,p=a.haveWidth,g=a.width,x=a.open}}else if(G=="o30"||G=="o31"){var de=u.length,_e=($=0,G=="o31");for($+=de-(H=-3&de);$<H;)_e?(A=S,E=(T=M+u.shift())+u.shift(),S=(j=A+u.shift())+u.shift(),H-$==5?(M=E+u.shift(),$++):M=E,_e=!1):(T=M,A=S+u.shift(),E=T+u.shift(),j=A+u.shift(),M=E+u.shift(),H-$==5?(S=j+u.shift(),$++):S=j,_e=!0),e.U.P.curveTo(l,T,A,E,j,M,S),$+=4}else{if((G+"").charAt(0)=="o")throw console.debug("Unknown operation: "+G,r),G;u.push(G)}}}a.x=M,a.y=S,a.nStems=h,a.haveWidth=p,a.width=g,a.open=x};var n=e,i={Typr:n};return t.Typr=n,t.default=i,Object.defineProperty(t,"__esModule",{value:!0}),t})({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function Nce(){return(function(t){var e=Uint8Array,n=Uint16Array,i=Uint32Array,r=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),a=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=function(G,H){for(var W=new n(31),Y=0;Y<31;++Y)W[Y]=H+=1<<G[Y-1];var k=new i(W[30]);for(Y=1;Y<30;++Y)for(var $=W[Y];$<W[Y+1];++$)k[$]=$-W[Y]<<5|Y;return[W,k]},l=o(r,2),u=l[0],h=l[1];u[28]=258,h[258]=28;for(var p=o(a,0)[0],g=new n(32768),x=0;x<32768;++x){var b=(43690&x)>>>1|(21845&x)<<1;b=(61680&(b=(52428&b)>>>2|(13107&b)<<2))>>>4|(3855&b)<<4,g[x]=((65280&b)>>>8|(255&b)<<8)>>>1}var M=function(G,H,W){for(var Y=G.length,k=0,$=new n(H);k<Y;++k)++$[G[k]-1];var ee,te=new n(H);for(k=0;k<H;++k)te[k]=te[k-1]+$[k-1]<<1;{ee=new n(1<<H);var ae=15-H;for(k=0;k<Y;++k)if(G[k])for(var q=k<<4|G[k],K=H-G[k],ie=te[G[k]-1]++<<K,ue=ie|(1<<K)-1;ie<=ue;++ie)ee[g[ie]>>>ae]=q}return ee},S=new e(288);for(x=0;x<144;++x)S[x]=8;for(x=144;x<256;++x)S[x]=9;for(x=256;x<280;++x)S[x]=7;for(x=280;x<288;++x)S[x]=8;var T=new e(32);for(x=0;x<32;++x)T[x]=5;var A=M(S,9),E=M(T,5),j=function(G){for(var H=G[0],W=1;W<G.length;++W)G[W]>H&&(H=G[W]);return H},R=function(G,H,W){var Y=H/8|0;return(G[Y]|G[Y+1]<<8)>>(7&H)&W},C=function(G,H){var W=H/8|0;return(G[W]|G[W+1]<<8|G[W+2]<<16)>>(7&H)},D=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],U=function(G,H,W){var Y=new Error(H||D[G]);if(Y.code=G,Error.captureStackTrace&&Error.captureStackTrace(Y,U),!W)throw Y;return Y},I=function(G,H,W){var Y=G.length;if(!Y||W&&!W.l&&Y<5)return H||new e(0);var k=!H||W,$=!W||W.i;W||(W={}),H||(H=new e(3*Y));var ee,te=function(dt){var pe=H.length;if(dt>pe){var Oe=new e(Math.max(2*pe,dt));Oe.set(H),H=Oe}},ae=W.f||0,q=W.p||0,K=W.b||0,ie=W.l,ue=W.d,me=W.m,fe=W.n,de=8*Y;do{if(!ie){W.f=ae=R(G,q,1);var _e=R(G,q+1,3);if(q+=3,!_e){var Te=G[(nt=((ee=q)/8|0)+(7&ee&&1)+4)-4]|G[nt-3]<<8,Ie=nt+Te;if(Ie>Y){$&&U(0);break}k&&te(K+Te),H.set(G.subarray(nt,Ie),K),W.b=K+=Te,W.p=q=8*Ie;continue}if(_e==1)ie=A,ue=E,me=9,fe=5;else if(_e==2){var Re=R(G,q,31)+257,ye=R(G,q+10,15)+4,ct=Re+R(G,q+5,31)+1;q+=14;for(var Ce=new e(ct),re=new e(19),Le=0;Le<ye;++Le)re[s[Le]]=R(G,q+3*Le,7);q+=3*ye;var He=j(re),Ue=(1<<He)-1,Ge=M(re,He);for(Le=0;Le<ct;){var nt,Ae=Ge[R(G,q,Ue)];if(q+=15&Ae,(nt=Ae>>>4)<16)Ce[Le++]=nt;else{var at=0,ne=0;for(nt==16?(ne=3+R(G,q,3),q+=2,at=Ce[Le-1]):nt==17?(ne=3+R(G,q,7),q+=3):nt==18&&(ne=11+R(G,q,127),q+=7);ne--;)Ce[Le++]=at}}var Z=Ce.subarray(0,Re),xe=Ce.subarray(Re);me=j(Z),fe=j(xe),ie=M(Z,me),ue=M(xe,fe)}else U(1);if(q>de){$&&U(0);break}}k&&te(K+131072);for(var Xe=(1<<me)-1,Be=(1<<fe)-1,Ne=q;;Ne=q){var yt=(at=ie[C(G,q)&Xe])>>>4;if((q+=15&at)>de){$&&U(0);break}if(at||U(2),yt<256)H[K++]=yt;else{if(yt==256){Ne=q,ie=null;break}var vt=yt-254;if(yt>264){var Dt=r[Le=yt-257];vt=R(G,q,(1<<Dt)-1)+u[Le],q+=Dt}var Nt=ue[C(G,q)&Be],We=Nt>>>4;if(Nt||U(3),q+=15&Nt,xe=p[We],We>3&&(Dt=a[We],xe+=C(G,q)&(1<<Dt)-1,q+=Dt),q>de){$&&U(0);break}k&&te(K+131072);for(var qe=K+vt;K<qe;K+=4)H[K]=H[K-xe],H[K+1]=H[K+1-xe],H[K+2]=H[K+2-xe],H[K+3]=H[K+3-xe];K=qe}}W.l=ie,W.p=Ne,W.b=K,ie&&(ae=1,W.m=me,W.d=ue,W.n=fe)}while(!ae);return K==H.length?H:(function(dt,pe,Oe){(Oe==null||Oe>dt.length)&&(Oe=dt.length);var ft=new(dt instanceof n?n:dt instanceof i?i:e)(Oe-pe);return ft.set(dt.subarray(pe,Oe)),ft})(H,0,K)},L=new e(0),F=typeof TextDecoder<"u"&&new TextDecoder;try{F.decode(L,{stream:!0})}catch{}return t.convert_streams=function(G){var H=new DataView(G),W=0;function Y(){var Re=H.getUint16(W);return W+=2,Re}function k(){var Re=H.getUint32(W);return W+=4,Re}function $(Re){Te.setUint16(Ie,Re),Ie+=2}function ee(Re){Te.setUint32(Ie,Re),Ie+=4}for(var te={signature:k(),flavor:k(),length:k(),numTables:Y(),reserved:Y(),totalSfntSize:k(),majorVersion:Y(),minorVersion:Y(),metaOffset:k(),metaLength:k(),metaOrigLength:k(),privOffset:k(),privLength:k()},ae=0;Math.pow(2,ae)<=te.numTables;)ae++;ae--;for(var q=16*Math.pow(2,ae),K=16*te.numTables-q,ie=12,ue=[],me=0;me<te.numTables;me++)ue.push({tag:k(),offset:k(),compLength:k(),origLength:k(),origChecksum:k()}),ie+=16;var fe,de=new Uint8Array(12+16*ue.length+ue.reduce((function(Re,ye){return Re+ye.origLength+4}),0)),_e=de.buffer,Te=new DataView(_e),Ie=0;return ee(te.flavor),$(te.numTables),$(q),$(ae),$(K),ue.forEach((function(Re){ee(Re.tag),ee(Re.origChecksum),ee(ie),ee(Re.origLength),Re.outOffset=ie,(ie+=Re.origLength)%4!=0&&(ie+=4-ie%4)})),ue.forEach((function(Re){var ye,ct=G.slice(Re.offset,Re.offset+Re.compLength);if(Re.compLength!=Re.origLength){var Ce=new Uint8Array(Re.origLength);ye=new Uint8Array(ct,2),I(ye,Ce)}else Ce=new Uint8Array(ct);de.set(Ce,Re.outOffset);var re=0;(ie=Re.outOffset+Re.origLength)%4!=0&&(re=4-ie%4),de.set(new Uint8Array(re).buffer,Re.outOffset+Re.origLength),fe=ie+re})),_e.slice(0,fe)},Object.defineProperty(t,"__esModule",{value:!0}),t})({}).convert_streams}function Oce(t,e){const n={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},r=1,a=2,s=4,o=8,l=16,u=32;let h;function p(D){if(!h){const U={R:a,L:r,D:s,C:l,U:u,T:o};h=new Map;for(let I in i){let L=0;i[I].split(",").forEach(F=>{let[G,H]=F.split("+");G=parseInt(G,36),H=H?parseInt(H,36):0,h.set(L+=G,U[I]);for(let W=H;W--;)h.set(++L,U[I])})}}return h.get(D)||u}const g=1,x=2,b=3,M=4,S=[null,"isol","init","fina","medi"];function T(D){const U=new Uint8Array(D.length);let I=u,L=g,F=-1;for(let G=0;G<D.length;G++){const H=D.codePointAt(G);let W=p(H)|0,Y=g;W&o||(I&(r|s|l)?W&(a|s|l)?(Y=b,(L===g||L===b)&&U[F]++):W&(r|u)&&(L===x||L===M)&&U[F]--:I&(a|u)&&(L===x||L===M)&&U[F]--,L=U[G]=Y,I=W,F=G,H>65535&&G++)}return U}function A(D,U){const I=[];for(let F=0;F<U.length;F++){const G=U.codePointAt(F);G>65535&&F++,I.push(t.U.codeToGlyph(D,G))}const L=D.GSUB;if(L){const{lookupList:F,featureList:G}=L;let H;const W=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,Y=[];G.forEach(k=>{if(W.test(k.tag))for(let $=0;$<k.tab.length;$++){if(Y[k.tab[$]])continue;Y[k.tab[$]]=!0;const ee=F[k.tab[$]],te=/^(isol|init|fina|medi)$/.test(k.tag);te&&!H&&(H=T(U));for(let ae=0;ae<I.length;ae++)(!H||!te||S[H[ae]]===k.tag)&&t.U._applySubs(I,ae,ee,F)}})}return I}function E(D,U){const I=new Int16Array(U.length*3);let L=0;for(;L<U.length;L++){const W=U[L];if(W===-1)continue;I[L*3+2]=D.hmtx.aWidth[W];const Y=D.GPOS;if(Y){const k=Y.lookupList;for(let $=0;$<k.length;$++){const ee=k[$];for(let te=0;te<ee.tabs.length;te++){const ae=ee.tabs[te];if(ee.ltype===1){if(t._lctf.coverageIndex(ae.coverage,W)!==-1&&ae.pos){H(ae.pos,L);break}}else if(ee.ltype===2){let q=null,K=F();if(K!==-1){const ie=t._lctf.coverageIndex(ae.coverage,U[K]);if(ie!==-1){if(ae.fmt===1){const ue=ae.pairsets[ie];for(let me=0;me<ue.length;me++)ue[me].gid2===W&&(q=ue[me])}else if(ae.fmt===2){const ue=t.U._getGlyphClass(U[K],ae.classDef1),me=t.U._getGlyphClass(W,ae.classDef2);q=ae.matrix[ue][me]}if(q){q.val1&&H(q.val1,K),q.val2&&H(q.val2,L);break}}}}else if(ee.ltype===4){const q=t._lctf.coverageIndex(ae.markCoverage,W);if(q!==-1){const K=F(G),ie=K===-1?-1:t._lctf.coverageIndex(ae.baseCoverage,U[K]);if(ie!==-1){const ue=ae.markArray[q],me=ae.baseArray[ie][ue.markClass];I[L*3]=me.x-ue.x+I[K*3]-I[K*3+2],I[L*3+1]=me.y-ue.y+I[K*3+1];break}}}else if(ee.ltype===6){const q=t._lctf.coverageIndex(ae.mark1Coverage,W);if(q!==-1){const K=F();if(K!==-1){const ie=U[K];if(j(D,ie)===3){const ue=t._lctf.coverageIndex(ae.mark2Coverage,ie);if(ue!==-1){const me=ae.mark1Array[q],fe=ae.mark2Array[ue][me.markClass];I[L*3]=fe.x-me.x+I[K*3]-I[K*3+2],I[L*3+1]=fe.y-me.y+I[K*3+1];break}}}}}}}}else if(D.kern&&!D.cff){const k=F();if(k!==-1){const $=D.kern.glyph1.indexOf(U[k]);if($!==-1){const ee=D.kern.rval[$].glyph2.indexOf(W);ee!==-1&&(I[k*3+2]+=D.kern.rval[$].vals[ee])}}}}return I;function F(W){for(let Y=L-1;Y>=0;Y--)if(U[Y]!==-1&&(!W||W(U[Y])))return Y;return-1}function G(W){return j(D,W)===1}function H(W,Y){for(let k=0;k<3;k++)I[Y*3+k]+=W[k]||0}}function j(D,U){const I=D.GDEF&&D.GDEF.glyphClassDef;return I?t.U._getGlyphClass(U,I):0}function R(...D){for(let U=0;U<D.length;U++)if(typeof D[U]=="number")return D[U]}function C(D){const U=Object.create(null),I=D["OS/2"],L=D.hhea,F=D.head.unitsPerEm,G=R(I&&I.sTypoAscender,L&&L.ascender,F),H={unitsPerEm:F,ascender:G,descender:R(I&&I.sTypoDescender,L&&L.descender,0),capHeight:R(I&&I.sCapHeight,G),xHeight:R(I&&I.sxHeight,G),lineGap:R(I&&I.sTypoLineGap,L&&L.lineGap),supportsCodePoint(W){return t.U.codeToGlyph(D,W)>0},forEachGlyph(W,Y,k,$){let ee=0;const te=1/H.unitsPerEm*Y,ae=A(D,W);let q=0;const K=E(D,ae);return ae.forEach((ie,ue)=>{if(ie!==-1){let me=U[ie];if(!me){const{cmds:fe,crds:de}=t.U.glyphToPath(D,ie);let _e="",Te=0;for(let Ce=0,re=fe.length;Ce<re;Ce++){const Le=n[fe[Ce]];_e+=fe[Ce];for(let He=1;He<=Le;He++)_e+=(He>1?",":"")+de[Te++]}let Ie,Re,ye,ct;if(de.length){Ie=Re=1/0,ye=ct=-1/0;for(let Ce=0,re=de.length;Ce<re;Ce+=2){let Le=de[Ce],He=de[Ce+1];Le<Ie&&(Ie=Le),He<Re&&(Re=He),Le>ye&&(ye=Le),He>ct&&(ct=He)}}else Ie=ye=Re=ct=0;me=U[ie]={index:ie,advanceWidth:D.hmtx.aWidth[ie],xMin:Ie,yMin:Re,xMax:ye,yMax:ct,path:_e}}$.call(null,me,ee+K[ue*3]*te,K[ue*3+1]*te,q),ee+=K[ue*3+2]*te,k&&(ee+=k*Y)}q+=W.codePointAt(q)>65535?2:1}),ee}};return H}return function(U){const I=new Uint8Array(U,0,4),L=t._bin.readASCII(I,0,4);if(L==="wOFF")U=e(U);else if(L==="wOF2")throw new Error("woff2 fonts not supported");return C(t.parse(U)[0])}}const Dce=nv({name:"Typr Font Parser",dependencies:[jce,Nce,Oce],init(t,e,n){const i=t(),r=e();return n(i,r)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function Pce(){return(function(t){var e=function(){this.buckets=new Map};e.prototype.add=function(E){var j=E>>5;this.buckets.set(j,(this.buckets.get(j)||0)|1<<(31&E))},e.prototype.has=function(E){var j=this.buckets.get(E>>5);return j!==void 0&&(j&1<<(31&E))!=0},e.prototype.serialize=function(){var E=[];return this.buckets.forEach((function(j,R){E.push((+R).toString(36)+":"+j.toString(36))})),E.join(",")},e.prototype.deserialize=function(E){var j=this;this.buckets.clear(),E.split(",").forEach((function(R){var C=R.split(":");j.buckets.set(parseInt(C[0],36),parseInt(C[1],36))}))};var n=Math.pow(2,8),i=n-1,r=~i;function a(E){var j=(function(C){return C&r})(E).toString(16),R=(function(C){return(C&r)+n-1})(E).toString(16);return"codepoint-index/plane"+(E>>16)+"/"+j+"-"+R+".json"}function s(E,j){var R=E&i,C=j.codePointAt(R/6|0);return((C=(C||48)-48)&1<<R%6)!=0}function o(E,j){var R;(R=E,R.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map((function(C){return C.split("-").map((function(D){return parseInt(D.trim(),16)}))}))).forEach((function(C){var D=C[0],U=C[1];U===void 0&&(U=D),j(D,U)}))}function l(E,j){o(E,(function(R,C){for(var D=R;D<=C;D++)j(D)}))}var u={},h={},p=new WeakMap,g="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function x(E){var j=p.get(E);return j||(j=new e,l(E.ranges,(function(R){return j.add(R)})),p.set(E,j)),j}var b,M=new Map;function S(E,j,R){return E[j]?j:E[R]?R:(function(C){for(var D in C)return D})(E)}function T(E,j){var R=j;if(!E.includes(R)){R=1/0;for(var C=0;C<E.length;C++)Math.abs(E[C]-j)<Math.abs(R-j)&&(R=E[C])}return R}function A(E){return b||(b=new Set,l("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",(function(j){b.add(j)}))),b.has(E)}return t.CodePointSet=e,t.clearCache=function(){u={},h={}},t.getFontsForString=function(E,j){j===void 0&&(j={});var R,C=j.lang;C===void 0&&(C=new RegExp("\\p{Script=Hangul}","u").test(R=E)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(R)?"ja":"en");var D=j.category;D===void 0&&(D="sans-serif");var U=j.style;U===void 0&&(U="normal");var I=j.weight;I===void 0&&(I=400);var L=(j.dataUrl||g).replace(/\/$/g,""),F=new Map,G=new Uint8Array(E.length),H={},W={},Y=new Array(E.length),k=new Map,$=!1;function ee(q){var K=M.get(q);return K||(K=fetch(L+"/"+q).then((function(ie){if(!ie.ok)throw new Error(ie.statusText);return ie.json().then((function(ue){if(!Array.isArray(ue)||ue[0]!==1)throw new Error("Incorrect schema version; need 1, got "+ue[0]);return ue[1]}))})).catch((function(ie){if(L!==g)return $||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+L+'", trying default CDN. '+ie.message),$=!0),L=g,M.delete(q),ee(q);throw ie})),M.set(q,K)),K}for(var te=function(q){var K=E.codePointAt(q),ie=a(K);Y[q]=ie,u[ie]||k.has(ie)||k.set(ie,ee(ie).then((function(ue){u[ie]=ue}))),K>65535&&(q++,ae=q)},ae=0;ae<E.length;ae++)te(ae);return Promise.all(k.values()).then((function(){k.clear();for(var q=function(ie){var ue=E.codePointAt(ie),me=null,fe=u[Y[ie]],de=void 0;for(var _e in fe){var Te=W[_e];if(Te===void 0&&(Te=W[_e]=new RegExp(_e).test(C||"en")),Te){for(var Ie in de=_e,fe[_e])if(s(ue,fe[_e][Ie])){me=Ie;break}break}}if(!me){e:for(var Re in fe)if(Re!==de){for(var ye in fe[Re])if(s(ue,fe[Re][ye])){me=ye;break e}}}me||(console.debug("No font coverage for U+"+ue.toString(16)),me="latin"),Y[ie]=me,h[me]||k.has(me)||k.set(me,ee("font-meta/"+me+".json").then((function(ct){h[me]=ct}))),ue>65535&&(ie++,K=ie)},K=0;K<E.length;K++)q(K);return Promise.all(k.values())})).then((function(){for(var q,K=null,ie=0;ie<E.length;ie++){var ue=E.codePointAt(ie);if(K&&(A(ue)||x(K).has(ue)))G[ie]=G[ie-1];else{K=h[Y[ie]];var me=H[K.id];if(!me){var fe=K.typeforms,de=S(fe,D,"sans-serif"),_e=S(fe[de],U,"normal"),Te=T((q=fe[de])===null||q===void 0?void 0:q[_e],I);me=H[K.id]=L+"/font-files/"+K.id+"/"+de+"."+_e+"."+Te+".woff"}var Ie=F.get(me);Ie==null&&(Ie=F.size,F.set(me,Ie)),G[ie]=Ie}ue>65535&&(ie++,G[ie]=G[ie-1])}return{fontUrls:Array.from(F.keys()),chars:G}}))},Object.defineProperty(t,"__esModule",{value:!0}),t})({})}function Ice(t,e){const n=Object.create(null),i=Object.create(null);function r(s,o){const l=u=>{console.error(`Failure loading font ${s}`,u)};try{const u=new XMLHttpRequest;u.open("get",s,!0),u.responseType="arraybuffer",u.onload=function(){if(u.status>=400)l(new Error(u.statusText));else if(u.status>0)try{const h=t(u.response);h.src=s,o(h)}catch(h){l(h)}},u.onerror=l,u.send()}catch(u){l(u)}}function a(s,o){let l=n[s];l?o(l):i[s]?i[s].push(o):(i[s]=[o],r(s,u=>{u.src=s,n[s]=u,i[s].forEach(h=>h(u)),delete i[s]}))}return function(s,o,{lang:l,fonts:u=[],style:h="normal",weight:p="normal",unicodeFontsURL:g}={}){const x=new Uint8Array(s.length),b=[];s.length||A();const M=new Map,S=[];if(h!=="italic"&&(h="normal"),typeof p!="number"&&(p=p==="bold"?700:400),u&&!Array.isArray(u)&&(u=[u]),u=u.slice().filter(j=>!j.lang||j.lang.test(l)).reverse(),u.length){let D=0;(function U(I=0){for(let L=I,F=s.length;L<F;L++){const G=s.codePointAt(L);if(D===1&&b[x[L-1]].supportsCodePoint(G)||L>0&&/\s/.test(s[L]))x[L]=x[L-1],D===2&&(S[S.length-1][1]=L);else for(let H=x[L],W=u.length;H<=W;H++)if(H===W){const Y=D===2?S[S.length-1]:S[S.length]=[L,L];Y[1]=L,D=2}else{x[L]=H;const{src:Y,unicodeRange:k}=u[H];if(!k||E(G,k)){const $=n[Y];if(!$){a(Y,()=>{U(L)});return}if($.supportsCodePoint(G)){let ee=M.get($);typeof ee!="number"&&(ee=b.length,b.push($),M.set($,ee)),x[L]=ee,D=1;break}}}G>65535&&L+1<F&&(x[L+1]=x[L],L++,D===2&&(S[S.length-1][1]=L))}T()})()}else S.push([0,s.length-1]),T();function T(){if(S.length){const j=S.map(R=>s.substring(R[0],R[1]+1)).join(`
`);e.getFontsForString(j,{lang:l||void 0,style:h,weight:p,dataUrl:g}).then(({fontUrls:R,chars:C})=>{const D=b.length;let U=0;S.forEach(L=>{for(let F=0,G=L[1]-L[0];F<=G;F++)x[L[0]+F]=C[U++]+D;U++});let I=0;R.forEach((L,F)=>{a(L,G=>{b[F+D]=G,++I===R.length&&A()})})})}else A()}function A(){o({chars:x,fonts:b})}function E(j,R){for(let C=0;C<R.length;C++){const[D,U=D]=R[C];if(D<=j&&j<=U)return!0}return!1}}}const Uce=nv({name:"FontResolver",dependencies:[Ice,Dce,Pce],init(t,e,n){return t(e,n())}});function Lce(t,e){const i=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,r="[^\\S\\u00A0]",a=new RegExp(`${r}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function s({text:b,lang:M,fonts:S,style:T,weight:A,preResolvedFonts:E,unicodeFontsURL:j},R){const C=({chars:D,fonts:U})=>{let I,L;const F=[];for(let G=0;G<D.length;G++)D[G]!==L?(L=D[G],F.push(I={start:G,end:G,fontObj:U[D[G]]})):I.end=G;R(F)};E?C(E):t(b,C,{lang:M,fonts:S,style:T,weight:A,unicodeFontsURL:j})}function o({text:b="",font:M,lang:S,sdfGlyphSize:T=64,fontSize:A=400,fontWeight:E=1,fontStyle:j="normal",letterSpacing:R=0,lineHeight:C="normal",maxWidth:D=1/0,direction:U,textAlign:I="left",textIndent:L=0,whiteSpace:F="normal",overflowWrap:G="normal",anchorX:H=0,anchorY:W=0,metricsOnly:Y=!1,unicodeFontsURL:k,preResolvedFonts:$=null,includeCaretPositions:ee=!1,chunkedBoundsSize:te=8192,colorRanges:ae=null},q){const K=p(),ie={fontLoad:0,typesetting:0};b.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),b=b.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),A=+A,R=+R,D=+D,C=C||"normal",L=+L,s({text:b,lang:S,style:j,weight:E,fonts:typeof M=="string"?[{src:M}]:M,unicodeFontsURL:k,preResolvedFonts:$},ue=>{ie.fontLoad=p()-K;const me=isFinite(D);let fe=null,de=null,_e=null,Te=null,Ie=null,Re=null,ye=null,ct=null,Ce=0,re=0,Le=F!=="nowrap";const He=new Map,Ue=p();let Ge=L,nt=0,Ae=new g;const at=[Ae];ue.forEach(Be=>{const{fontObj:Ne}=Be,{ascender:yt,descender:vt,unitsPerEm:Dt,lineGap:Nt,capHeight:We,xHeight:qe}=Ne;let dt=He.get(Ne);if(!dt){const Ee=A/Dt,ut=C==="normal"?(yt-vt+Nt)*Ee:C*A,At=(ut-(yt-vt)*Ee)/2,lt=Math.min(ut,(yt-vt)*Ee),Ze=(yt+vt)/2*Ee+lt/2;dt={index:He.size,src:Ne.src,fontObj:Ne,fontSizeMult:Ee,unitsPerEm:Dt,ascender:yt*Ee,descender:vt*Ee,capHeight:We*Ee,xHeight:qe*Ee,lineHeight:ut,baseline:-At-yt*Ee,caretTop:Ze,caretBottom:Ze-lt},He.set(Ne,dt)}const{fontSizeMult:pe}=dt,Oe=b.slice(Be.start,Be.end+1);let ft,ge;Ne.forEachGlyph(Oe,A,R,(Ee,ut,At,lt)=>{ut+=nt,lt+=Be.start,ft=ut,ge=Ee;const Ze=b.charAt(lt),Ct=Ee.advanceWidth*pe,Ut=Ae.count;let Bt;if("isEmpty"in Ee||(Ee.isWhitespace=!!Ze&&new RegExp(r).test(Ze),Ee.canBreakAfter=!!Ze&&a.test(Ze),Ee.isEmpty=Ee.xMin===Ee.xMax||Ee.yMin===Ee.yMax||i.test(Ze)),!Ee.isWhitespace&&!Ee.isEmpty&&re++,Le&&me&&!Ee.isWhitespace&&ut+Ct+Ge>D&&Ut){if(Ae.glyphAt(Ut-1).glyphObj.canBreakAfter)Bt=new g,Ge=-ut;else for(let On=Ut;On--;)if(On===0&&G==="break-word"){Bt=new g,Ge=-ut;break}else if(Ae.glyphAt(On).glyphObj.canBreakAfter){Bt=Ae.splitAt(On+1);const Vn=Bt.glyphAt(0).x;Ge-=Vn;for(let Ii=Bt.count;Ii--;)Bt.glyphAt(Ii).x-=Vn;break}Bt&&(Ae.isSoftWrapped=!0,Ae=Bt,at.push(Ae),Ce=D)}let Yt=Ae.glyphAt(Ae.count);Yt.glyphObj=Ee,Yt.x=ut+Ge,Yt.y=At,Yt.width=Ct,Yt.charIndex=lt,Yt.fontData=dt,Ze===`
`&&(Ae=new g,at.push(Ae),Ge=-(ut+Ct+R*A)+L)}),nt=ft+ge.advanceWidth*pe+R*A});let ne=0;at.forEach(Be=>{let Ne=!0;for(let yt=Be.count;yt--;){const vt=Be.glyphAt(yt);Ne&&!vt.glyphObj.isWhitespace&&(Be.width=vt.x+vt.width,Be.width>Ce&&(Ce=Be.width),Ne=!1);let{lineHeight:Dt,capHeight:Nt,xHeight:We,baseline:qe}=vt.fontData;Dt>Be.lineHeight&&(Be.lineHeight=Dt);const dt=qe-Be.baseline;dt<0&&(Be.baseline+=dt,Be.cap+=dt,Be.ex+=dt),Be.cap=Math.max(Be.cap,Be.baseline+Nt),Be.ex=Math.max(Be.ex,Be.baseline+We)}Be.baseline-=ne,Be.cap-=ne,Be.ex-=ne,ne+=Be.lineHeight});let Z=0,xe=0;if(H&&(typeof H=="number"?Z=-H:typeof H=="string"&&(Z=-Ce*(H==="left"?0:H==="center"?.5:H==="right"?1:u(H)))),W&&(typeof W=="number"?xe=-W:typeof W=="string"&&(xe=W==="top"?0:W==="top-baseline"?-at[0].baseline:W==="top-cap"?-at[0].cap:W==="top-ex"?-at[0].ex:W==="middle"?ne/2:W==="bottom"?ne:W==="bottom-baseline"?-at[at.length-1].baseline:u(W)*ne)),!Y){const Be=e.getEmbeddingLevels(b,U);fe=new Uint16Array(re),de=new Uint8Array(re),_e=new Float32Array(re*2),Te={},ye=[1/0,1/0,-1/0,-1/0],ct=[],ee&&(Re=new Float32Array(b.length*4)),ae&&(Ie=new Uint8Array(re*3));let Ne=0,yt=-1,vt=-1,Dt,Nt;if(at.forEach((We,qe)=>{let{count:dt,width:pe}=We;if(dt>0){let Oe=0;for(let lt=dt;lt--&&We.glyphAt(lt).glyphObj.isWhitespace;)Oe++;let ft=0,ge=0;if(I==="center")ft=(Ce-pe)/2;else if(I==="right")ft=Ce-pe;else if(I==="justify"&&We.isSoftWrapped){let lt=0;for(let Ze=dt-Oe;Ze--;)We.glyphAt(Ze).glyphObj.isWhitespace&&lt++;ge=(Ce-pe)/lt}if(ge||ft){let lt=0;for(let Ze=0;Ze<dt;Ze++){let Ct=We.glyphAt(Ze);const Ut=Ct.glyphObj;Ct.x+=ft+lt,ge!==0&&Ut.isWhitespace&&Ze<dt-Oe&&(lt+=ge,Ct.width+=ge)}}const Ee=e.getReorderSegments(b,Be,We.glyphAt(0).charIndex,We.glyphAt(We.count-1).charIndex);for(let lt=0;lt<Ee.length;lt++){const[Ze,Ct]=Ee[lt];let Ut=1/0,Bt=-1/0;for(let Yt=0;Yt<dt;Yt++)if(We.glyphAt(Yt).charIndex>=Ze){let On=Yt,Vn=Yt;for(;Vn<dt;Vn++){let Ii=We.glyphAt(Vn);if(Ii.charIndex>Ct)break;Vn<dt-Oe&&(Ut=Math.min(Ut,Ii.x),Bt=Math.max(Bt,Ii.x+Ii.width))}for(let Ii=On;Ii<Vn;Ii++){const Tr=We.glyphAt(Ii);Tr.x=Bt-(Tr.x+Tr.width-Ut)}break}}let ut;const At=lt=>ut=lt;for(let lt=0;lt<dt;lt++){const Ze=We.glyphAt(lt);ut=Ze.glyphObj;const Ct=ut.index,Ut=Be.levels[Ze.charIndex]&1;if(Ut){const Bt=e.getMirroredCharacter(b[Ze.charIndex]);Bt&&Ze.fontData.fontObj.forEachGlyph(Bt,0,0,At)}if(ee){const{charIndex:Bt,fontData:Yt}=Ze,On=Ze.x+Z,Vn=Ze.x+Ze.width+Z;Re[Bt*4]=Ut?Vn:On,Re[Bt*4+1]=Ut?On:Vn,Re[Bt*4+2]=We.baseline+Yt.caretBottom+xe,Re[Bt*4+3]=We.baseline+Yt.caretTop+xe;const Ii=Bt-yt;Ii>1&&h(Re,yt,Ii),yt=Bt}if(ae){const{charIndex:Bt}=Ze;for(;Bt>vt;)vt++,ae.hasOwnProperty(vt)&&(Nt=ae[vt])}if(!ut.isWhitespace&&!ut.isEmpty){const Bt=Ne++,{fontSizeMult:Yt,src:On,index:Vn}=Ze.fontData,Ii=Te[On]||(Te[On]={});Ii[Ct]||(Ii[Ct]={path:ut.path,pathBounds:[ut.xMin,ut.yMin,ut.xMax,ut.yMax]});const Tr=Ze.x+Z,wr=Ze.y+We.baseline+xe;_e[Bt*2]=Tr,_e[Bt*2+1]=wr;const bi=Tr+ut.xMin*Yt,sr=wr+ut.yMin*Yt,Fi=Tr+ut.xMax*Yt,rn=wr+ut.yMax*Yt;bi<ye[0]&&(ye[0]=bi),sr<ye[1]&&(ye[1]=sr),Fi>ye[2]&&(ye[2]=Fi),rn>ye[3]&&(ye[3]=rn),Bt%te===0&&(Dt={start:Bt,end:Bt,rect:[1/0,1/0,-1/0,-1/0]},ct.push(Dt)),Dt.end++;const Qn=Dt.rect;if(bi<Qn[0]&&(Qn[0]=bi),sr<Qn[1]&&(Qn[1]=sr),Fi>Qn[2]&&(Qn[2]=Fi),rn>Qn[3]&&(Qn[3]=rn),fe[Bt]=Ct,de[Bt]=Vn,ae){const dn=Bt*3;Ie[dn]=Nt>>16&255,Ie[dn+1]=Nt>>8&255,Ie[dn+2]=Nt&255}}}}}),Re){const We=b.length-yt;We>1&&h(Re,yt,We)}}const Xe=[];He.forEach(({index:Be,src:Ne,unitsPerEm:yt,ascender:vt,descender:Dt,lineHeight:Nt,capHeight:We,xHeight:qe})=>{Xe[Be]={src:Ne,unitsPerEm:yt,ascender:vt,descender:Dt,lineHeight:Nt,capHeight:We,xHeight:qe}}),ie.typesetting=p()-Ue,q({glyphIds:fe,glyphFontIndices:de,glyphPositions:_e,glyphData:Te,fontData:Xe,caretPositions:Re,glyphColors:Ie,chunkedBounds:ct,fontSize:A,topBaseline:xe+at[0].baseline,blockBounds:[Z,xe-ne,Z+Ce,xe],visibleBounds:ye,timings:ie})})}function l(b,M){o({...b,metricsOnly:!0},S=>{const[T,A,E,j]=S.blockBounds;M({width:E-T,height:j-A})})}function u(b){let M=b.match(/^([\d.]+)%$/),S=M?parseFloat(M[1]):NaN;return isNaN(S)?0:S/100}function h(b,M,S){const T=b[M*4],A=b[M*4+1],E=b[M*4+2],j=b[M*4+3],R=(A-T)/S;for(let C=0;C<S;C++){const D=(M+C)*4;b[D]=T+R*C,b[D+1]=T+R*(C+1),b[D+2]=E,b[D+3]=j}}function p(){return(self.performance||Date).now()}function g(){this.data=[]}const x=["glyphObj","x","y","width","charIndex","fontData"];return g.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/x.length)},glyphAt(b){let M=g.flyweight;return M.data=this.data,M.index=b,M},splitAt(b){let M=new g;return M.data=this.data.splice(b*x.length),M}},g.flyweight=x.reduce((b,M,S,T)=>(Object.defineProperty(b,M,{get(){return this.data[this.index*x.length+S]},set(A){this.data[this.index*x.length+S]=A}}),b),{data:null,index:0}),{typeset:o,measure:l}}const B0=()=>(self.performance||Date).now(),LT=vW();let BL;function Bce(t,e,n,i,r,a,s,o,l,u,h=!0){return h?kce(t,e,n,i,r,a,s,o,l,u).then(null,p=>(BL||(console.warn("WebGL SDF generation failed, falling back to JS",p),BL=!0),kL(t,e,n,i,r,a,s,o,l,u))):kL(t,e,n,i,r,a,s,o,l,u)}const ZM=[],zce=5;let Yj=0;function yW(){const t=B0();for(;ZM.length&&B0()-t<zce;)ZM.shift()();Yj=ZM.length?setTimeout(yW,0):0}const kce=(...t)=>new Promise((e,n)=>{ZM.push(()=>{const i=B0();try{LT.webgl.generateIntoCanvas(...t),e({timing:B0()-i})}catch(r){n(r)}}),Yj||(Yj=setTimeout(yW,0))}),Fce=4,Gce=2e3,zL={};let Vce=0;function kL(t,e,n,i,r,a,s,o,l,u){const h="TroikaTextSDFGenerator_JS_"+Vce++%Fce;let p=zL[h];return p||(p=zL[h]={workerModule:nv({name:h,workerId:h,dependencies:[vW,B0],init(g,x){const b=g().javascript.generate;return function(...M){const S=x();return{textureData:b(...M),timing:x()-S}}},getTransferables(g){return[g.textureData.buffer]}}),requests:0,idleTimer:null}),p.requests++,clearTimeout(p.idleTimer),p.workerModule(t,e,n,i,r,a).then(({textureData:g,timing:x})=>{const b=B0(),M=new Uint8Array(g.length*4);for(let S=0;S<g.length;S++)M[S*4+u]=g[S];return LT.webglUtils.renderImageData(s,M,o,l,t,e,1<<3-u),x+=B0()-b,--p.requests===0&&(p.idleTimer=setTimeout(()=>{bce(h)},Gce)),{timing:x}})}function Hce(t){t._warm||(LT.webgl.isSupported(t),t._warm=!0)}const qce=LT.webglUtils.resizeWebGLCanvasWithoutClearing,Ty={unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},Wce=new zt;function Im(){return(self.performance||Date).now()}const FL=Object.create(null);function bW(t,e){t=Yce({},t);const n=Im(),i=[];if(t.font&&i.push({label:"user",src:Zce(t.font)}),t.font=i,t.text=""+t.text,t.sdfGlyphSize=t.sdfGlyphSize||Ty.sdfGlyphSize,t.unicodeFontsURL=t.unicodeFontsURL||Ty.unicodeFontsURL,t.colorRanges!=null){let g={};for(let x in t.colorRanges)if(t.colorRanges.hasOwnProperty(x)){let b=t.colorRanges[x];typeof b!="number"&&(b=Wce.set(b).getHex()),g[x]=b}t.colorRanges=g}Object.freeze(t);const{textureWidth:r,sdfExponent:a}=Ty,{sdfGlyphSize:s}=t,o=r/s*4;let l=FL[s];if(!l){const g=document.createElement("canvas");g.width=r,g.height=s*256/o,l=FL[s]={glyphCount:0,sdfGlyphSize:s,sdfCanvas:g,sdfTexture:new ji(g,void 0,void 0,void 0,Rn,Rn),contextLost:!1,glyphsByFont:new Map},l.sdfTexture.generateMipmaps=!1,Xce(l)}const{sdfTexture:u,sdfCanvas:h}=l;_W(t).then(g=>{const{glyphIds:x,glyphFontIndices:b,fontData:M,glyphPositions:S,fontSize:T,timings:A}=g,E=[],j=new Float32Array(x.length*4);let R=0,C=0;const D=Im(),U=M.map(H=>{let W=l.glyphsByFont.get(H.src);return W||l.glyphsByFont.set(H.src,W=new Map),W});x.forEach((H,W)=>{const Y=b[W],{src:k,unitsPerEm:$}=M[Y];let ee=U[Y].get(H);if(!ee){const{path:ie,pathBounds:ue}=g.glyphData[k][H],me=Math.max(ue[2]-ue[0],ue[3]-ue[1])/s*(Ty.sdfMargin*s+.5),fe=l.glyphCount++,de=[ue[0]-me,ue[1]-me,ue[2]+me,ue[3]+me];U[Y].set(H,ee={path:ie,atlasIndex:fe,sdfViewBox:de}),E.push(ee)}const{sdfViewBox:te}=ee,ae=S[C++],q=S[C++],K=T/$;j[R++]=ae+te[0]*K,j[R++]=q+te[1]*K,j[R++]=ae+te[2]*K,j[R++]=q+te[3]*K,x[W]=ee.atlasIndex}),A.quads=(A.quads||0)+(Im()-D);const I=Im();A.sdf={};const L=h.height,F=Math.ceil(l.glyphCount/o),G=Math.pow(2,Math.ceil(Math.log2(F*s)));G>L&&(console.info(`Increasing SDF texture size ${L}->${G}`),qce(h,r,G),u.dispose()),Promise.all(E.map(H=>SW(H,l,t.gpuAccelerateSDF).then(({timing:W})=>{A.sdf[H.atlasIndex]=W}))).then(()=>{E.length&&!l.contextLost&&(MW(l),u.needsUpdate=!0),A.sdfTotal=Im()-I,A.total=Im()-n,e(Object.freeze({parameters:t,sdfTexture:u,sdfGlyphSize:s,sdfExponent:a,glyphBounds:j,glyphAtlasIndices:x,glyphColors:g.glyphColors,caretPositions:g.caretPositions,chunkedBounds:g.chunkedBounds,ascender:g.ascender,descender:g.descender,lineHeight:g.lineHeight,capHeight:g.capHeight,xHeight:g.xHeight,topBaseline:g.topBaseline,blockBounds:g.blockBounds,visibleBounds:g.visibleBounds,timings:g.timings}))})}),Promise.resolve().then(()=>{l.contextLost||Hce(h)})}function SW({path:t,atlasIndex:e,sdfViewBox:n},{sdfGlyphSize:i,sdfCanvas:r,contextLost:a},s){if(a)return Promise.resolve({timing:-1});const{textureWidth:o,sdfExponent:l}=Ty,u=Math.max(n[2]-n[0],n[3]-n[1]),h=Math.floor(e/4),p=h%(o/i)*i,g=Math.floor(h/(o/i))*i,x=e%4;return Bce(i,i,t,n,u,l,r,p,g,x,s)}function Xce(t){const e=t.sdfCanvas;e.addEventListener("webglcontextlost",n=>{console.log("Context Lost",n),n.preventDefault(),t.contextLost=!0}),e.addEventListener("webglcontextrestored",n=>{console.log("Context Restored",n),t.contextLost=!1;const i=[];t.glyphsByFont.forEach(r=>{r.forEach(a=>{i.push(SW(a,t,!0))})}),Promise.all(i).then(()=>{MW(t),t.sdfTexture.needsUpdate=!0})})}function $ce({font:t,characters:e,sdfGlyphSize:n},i){let r=Array.isArray(e)?e.join(`
`):""+e;bW({font:t,sdfGlyphSize:n,text:r},i)}function Yce(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}let nM;function Zce(t){return nM||(nM=typeof document>"u"?{}:document.createElement("a")),nM.href=t,nM.href}function MW(t){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:n}=t,{width:i,height:r}=e,a=t.sdfCanvas.getContext("webgl");let s=n.image.data;(!s||s.length!==i*r*4)&&(s=new Uint8Array(i*r*4),n.image={width:i,height:r,data:s},n.flipY=!1,n.isDataTexture=!0),a.readPixels(0,0,i,r,a.RGBA,a.UNSIGNED_BYTE,s)}}const Kce=nv({name:"Typesetter",dependencies:[Lce,Uce,Mce],init(t,e,n){return t(e,n())}}),_W=nv({name:"Typesetter",dependencies:[Kce],init(t){return function(e){return new Promise(n=>{t.typeset(e,n)})}},getTransferables(t){const e=[];for(let n in t)t[n]&&t[n].buffer&&e.push(t[n].buffer);return e}});_W.onMainThread;const GL={};function Qce(t){let e=GL[t];return e||(e=GL[t]=new Ul(1,1,t,t).translate(.5,.5,0)),e}const Jce="aTroikaGlyphBounds",VL="aTroikaGlyphIndex",eue="aTroikaGlyphColor";class tue extends NT{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new la,this.boundingBox=new ea}computeBoundingSphere(){}computeBoundingBox(){}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let n=Qce(e);["position","normal","uv"].forEach(i=>{this.attributes[i]=n.attributes[i].clone()}),this.setIndex(n.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,n,i,r,a){this.updateAttributeData(Jce,e,4),this.updateAttributeData(VL,n,1),this.updateAttributeData(eue,a,3),this._blockBounds=i,this._chunkedBounds=r,this.instanceCount=n.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:n,boundingBox:i}=this;if(n){const{PI:r,floor:a,min:s,max:o,sin:l,cos:u}=Math,h=r/2,p=r*2,g=Math.abs(n),x=e[0]/g,b=e[2]/g,M=a((x+h)/p)!==a((b+h)/p)?-g:s(l(x)*g,l(b)*g),S=a((x-h)/p)!==a((b-h)/p)?g:o(l(x)*g,l(b)*g),T=a((x+r)/p)!==a((b+r)/p)?g*2:o(g-u(x)*g,g-u(b)*g);i.min.set(M,e[1],n<0?-T:0),i.max.set(S,e[3],n<0?0:T)}else i.min.set(e[0],e[1],0),i.max.set(e[2],e[3],0);i.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let n=this.getAttribute(VL).count,i=this._chunkedBounds;if(i)for(let r=i.length;r--;){n=i[r].end;let a=i[r].rect;if(a[1]<e.w&&a[3]>e.y&&a[0]<e.z&&a[2]>e.x)break}this.instanceCount=n}updateAttributeData(e,n,i){const r=this.getAttribute(e);n?r&&r.array.length===n.length?(r.array.set(n),r.needsUpdate=!0):(this.setAttribute(e,new $0(n,i)),delete this._maxInstanceCount,this.dispose()):r&&this.deleteAttribute(e)}}const nue=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,iue=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,rue=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,aue=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function sue(t){const e=$j(t,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Ye},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Cn(0,0,0,0)},uTroikaClipRect:{value:new Cn(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Ye},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new zt},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Nn},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:nue,vertexTransform:iue,fragmentDefs:rue,fragmentColorTransform:aue,customRewriter({vertexShader:n,fragmentShader:i}){let r=/\buniform\s+vec3\s+diffuse\b/;return r.test(i)&&(i=i.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(n)||(n=n.replace(xW,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:n,fragmentShader:i}}});return e.transparent=!0,e.forceSinglePass=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const ND=new Au({color:16777215,side:ai,transparent:!0}),HL=8421504,qL=new un,iM=new se,ME=new se,Yx=[],oue=new se,_E="+x+y";function WL(t){return Array.isArray(t)?t[0]:t}let TW=()=>{const t=new zi(new Ul(1,1),ND);return TW=()=>t,t},wW=()=>{const t=new zi(new Ul(1,1,32,1),ND);return wW=()=>t,t};const lue={type:"syncstart"},cue={type:"synccomplete"},AW=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],uue=AW.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let EW=class extends zi{constructor(){const e=new tue;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=HL,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=_E,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(lue),bW({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},n=>{this._isSyncing=!1,this._textRenderInfo=n,this.geometry.updateGlyphs(n.glyphBounds,n.glyphAtlasIndices,n.blockBounds,n.chunkedBounds,n.glyphColors);const i=this._queuedSyncs;i&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{i.forEach(r=>r&&r())})),this.dispatchEvent(cue),e&&e()})))}onBeforeRender(e,n,i,r,a,s){this.sync(),a.isTroikaTextMaterial&&this._prepareForRender(a)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(e){return sue(e)}get material(){let e=this._derivedMaterial;const n=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=ND.clone());if((!e||!e.isDerivedFrom(n))&&(e=this._derivedMaterial=this.createDerivedMaterial(n),n.addEventListener("dispose",function i(){n.removeEventListener("dispose",i),e.dispose()})),this.hasOutline()){let i=e._outlineMtl;return i||(i=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),i.isTextOutlineMaterial=!0,i.depthWrite=!1,i.map=null,e.addEventListener("dispose",function r(){e.removeEventListener("dispose",r),i.dispose()})),[i,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return WL(this.material).getDepthMaterial()}set customDepthMaterial(e){}get customDistanceMaterial(){return WL(this.material).getDistanceMaterial()}set customDistanceMaterial(e){}_prepareForRender(e){const n=e.isTextOutlineMaterial,i=e.uniforms,r=this.textRenderInfo;if(r){const{sdfTexture:o,blockBounds:l}=r;i.uTroikaSDFTexture.value=o,i.uTroikaSDFTextureSize.value.set(o.image.width,o.image.height),i.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,i.uTroikaSDFExponent.value=r.sdfExponent,i.uTroikaTotalBounds.value.fromArray(l),i.uTroikaUseGlyphColors.value=!n&&!!r.glyphColors;let u=0,h=0,p=0,g,x,b,M=0,S=0;if(n){let{outlineWidth:A,outlineOffsetX:E,outlineOffsetY:j,outlineBlur:R,outlineOpacity:C}=this;u=this._parsePercent(A)||0,h=Math.max(0,this._parsePercent(R)||0),g=C,M=this._parsePercent(E)||0,S=this._parsePercent(j)||0}else p=Math.max(0,this._parsePercent(this.strokeWidth)||0),p&&(b=this.strokeColor,i.uTroikaStrokeColor.value.set(b??HL),x=this.strokeOpacity,x==null&&(x=1)),g=this.fillOpacity;i.uTroikaEdgeOffset.value=u,i.uTroikaPositionOffset.value.set(M,S),i.uTroikaBlurRadius.value=h,i.uTroikaStrokeWidth.value=p,i.uTroikaStrokeOpacity.value=x,i.uTroikaFillOpacity.value=g??1,i.uTroikaCurveRadius.value=this.curveRadius||0;let T=this.clipRect;if(T&&Array.isArray(T)&&T.length===4)i.uTroikaClipRect.value.fromArray(T);else{const A=(this.fontSize||.1)*100;i.uTroikaClipRect.value.set(l[0]-A,l[1]-A,l[2]+A,l[3]+A)}this.geometry.applyClipRect(i.uTroikaClipRect.value)}i.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const a=n?this.outlineColor||0:this.color;if(a==null)delete e.color;else{const o=e.hasOwnProperty("color")?e.color:e.color=new zt;(a!==o._input||typeof a=="object")&&o.set(o._input=a)}let s=this.orientation||_E;if(s!==e._orientation){let o=i.uTroikaOrient.value;s=s.replace(/[^-+xyz]/g,"");let l=s!==_E&&s.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,u,h,p,g]=l;iM.set(0,0,0)[h]=u==="-"?1:-1,ME.set(0,0,0)[g]=p==="-"?-1:1,qL.lookAt(oue,iM.cross(ME),ME),o.setFromMatrix4(qL)}else o.identity();e._orientation=s}}_parsePercent(e){if(typeof e=="string"){let n=e.match(/^(-?[\d.]+)%$/),i=n?parseFloat(n[1]):NaN;e=(isNaN(i)?0:i/100)*this.fontSize}return e}localPositionToTextCoords(e,n=new Ye){n.copy(e);const i=this.curveRadius;return i&&(n.x=Math.atan2(e.x,Math.abs(i)-Math.abs(e.z))*Math.abs(i)),n}worldPositionToTextCoords(e,n=new Ye){return iM.copy(e),this.localPositionToTextCoords(this.worldToLocal(iM),n)}raycast(e,n){const{textRenderInfo:i,curveRadius:r}=this;if(i){const a=i.blockBounds,s=r?wW():TW(),o=s.geometry,{position:l,uv:u}=o.attributes;for(let h=0;h<u.count;h++){let p=a[0]+u.getX(h)*(a[2]-a[0]);const g=a[1]+u.getY(h)*(a[3]-a[1]);let x=0;r&&(x=r-Math.cos(p/r)*r,p=Math.sin(p/r)*r),l.setXYZ(h,p,g,x)}o.boundingSphere=this.geometry.boundingSphere,o.boundingBox=this.geometry.boundingBox,s.matrixWorld=this.matrixWorld,s.material.side=this.material.side,Yx.length=0,s.raycast(e,Yx);for(let h=0;h<Yx.length;h++)Yx[h].object=this,n.push(Yx[h])}}copy(e){const n=this.geometry;return super.copy(e),this.geometry=n,uue.forEach(i=>{this[i]=e[i]}),this}clone(){return new this.constructor().copy(this)}};AW.forEach(t=>{const e="_private_"+t;Object.defineProperty(EW.prototype,t,{get(){return this[e]},set(n){n!==this[e]&&(this[e]=n,this._needsSync=!0)}})});new ea;new zt;const Sa=z.forwardRef(({sdfGlyphSize:t=64,anchorX:e="center",anchorY:n="middle",font:i,fontSize:r=1,children:a,characters:s,onSync:o,...l},u)=>{const h=hi(({invalidate:b})=>b),[p]=z.useState(()=>new EW),[g,x]=z.useMemo(()=>{const b=[];let M="";return z.Children.forEach(a,S=>{typeof S=="string"||typeof S=="number"?M+=S:b.push(S)}),[b,M]},[a]);return kq(()=>new Promise(b=>$ce({font:i,characters:s},b)),["troika-text",i,s]),z.useLayoutEffect(()=>void p.sync(()=>{h(),o&&o(p)})),z.useEffect(()=>()=>p.dispose(),[p]),z.createElement("primitive",bo({object:p,ref:u,font:i,text:x,anchorX:e,anchorY:n,fontSize:r,sdfGlyphSize:t},l),g)}),fue=()=>parseInt(Lf.replace(/\D+/g,"")),hue=fue();function CW(t,e,n){const i=hi(x=>x.size),r=hi(x=>x.viewport),a=typeof t=="number"?t:i.width*r.dpr,s=typeof e=="number"?e:i.height*r.dpr,o=(typeof t=="number"?n:t)||{},{samples:l=0,depth:u,...h}=o,p=u??o.depthBuffer,g=z.useMemo(()=>{const x=new Ei(a,s,{minFilter:Rn,magFilter:Rn,type:Pr,...h});return p&&(x.depthTexture=new Jg(a,s,fr)),x.samples=l,x},[]);return z.useLayoutEffect(()=>{g.setSize(a,s),l&&(g.samples=l)},[l,g,a,s]),z.useEffect(()=>()=>g.dispose(),[]),g}const due=t=>typeof t=="function",pue=z.forwardRef(({envMap:t,resolution:e=256,frames:n=1/0,makeDefault:i,children:r,...a},s)=>{const o=hi(({set:S})=>S),l=hi(({camera:S})=>S),u=hi(({size:S})=>S),h=z.useRef(null);z.useImperativeHandle(s,()=>h.current,[]);const p=z.useRef(null),g=CW(e);z.useLayoutEffect(()=>{a.manual||(h.current.aspect=u.width/u.height)},[u,a]),z.useLayoutEffect(()=>{h.current.updateProjectionMatrix()});let x=0,b=null;const M=due(r);return It(S=>{M&&(n===1/0||x<n)&&(p.current.visible=!1,S.gl.setRenderTarget(g),b=S.scene.background,t&&(S.scene.background=t),S.gl.render(S.scene,h.current),S.scene.background=b,S.gl.setRenderTarget(null),p.current.visible=!0,x++)}),z.useLayoutEffect(()=>{if(i){const S=l;return o(()=>({camera:h.current})),()=>o(()=>({camera:S}))}},[h,i,o]),z.createElement(z.Fragment,null,z.createElement("perspectiveCamera",bo({ref:h},a),!M&&r),z.createElement("group",{ref:p},M&&r(g.texture)))}),mue=z.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:i,enableDamping:r=!0,keyEvents:a=!1,onChange:s,onStart:o,onEnd:l,...u},h)=>{const p=hi(C=>C.invalidate),g=hi(C=>C.camera),x=hi(C=>C.gl),b=hi(C=>C.events),M=hi(C=>C.setEvents),S=hi(C=>C.set),T=hi(C=>C.get),A=hi(C=>C.performance),E=e||g,j=i||b.connected||x.domElement,R=z.useMemo(()=>new oce(E),[E]);return It(()=>{R.enabled&&R.update()},-1),z.useEffect(()=>(a&&R.connect(a===!0?j:a),R.connect(j),()=>void R.dispose()),[a,j,n,R,p]),z.useEffect(()=>{const C=I=>{p(),n&&A.regress(),s&&s(I)},D=I=>{o&&o(I)},U=I=>{l&&l(I)};return R.addEventListener("change",C),R.addEventListener("start",D),R.addEventListener("end",U),()=>{R.removeEventListener("start",D),R.removeEventListener("end",U),R.removeEventListener("change",C)}},[s,o,l,R,p,M]),z.useEffect(()=>{if(t){const C=T().controls;return S({controls:R}),()=>S({controls:C})}},[t,R]),z.createElement("primitive",bo({ref:h,object:R,enableDamping:r},u))});class gue extends di{constructor(e=new Ye){super({uniforms:{inputBuffer:new Et(null),depthBuffer:new Et(null),resolution:new Et(new Ye),texelSize:new Et(new Ye),halfTexelSize:new Et(new Ye),kernel:new Et(0),scale:new Et(1),cameraNear:new Et(0),cameraFar:new Et(1),minDepthThreshold:new Et(0),maxDepthThreshold:new Et(1),depthScale:new Et(0),depthToBlurRatioBias:new Et(.25)},fragmentShader:`#include <common>
        #include <dithering_pars_fragment>      
        uniform sampler2D inputBuffer;
        uniform sampler2D depthBuffer;
        uniform float cameraNear;
        uniform float cameraFar;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          float depthFactor = 0.0;
          
          #ifdef USE_DEPTH
            vec4 depth = texture2D(depthBuffer, vUv);
            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
            depthFactor *= depthScale;
            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));
          #endif
          
          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));
          gl_FragColor = sum * 0.25 ;

          #include <dithering_fragment>
          #include <tonemapping_fragment>
          #include <${hue>=154?"colorspace_fragment":"encodings_fragment"}>
        }`,vertexShader:`uniform vec2 texelSize;
        uniform vec2 halfTexelSize;
        uniform float kernel;
        uniform float scale;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          vec2 uv = position.xy * 0.5 + 0.5;
          vUv = uv;

          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;
          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);
          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);
          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);
          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);

          gl_Position = vec4(position.xy, 1.0, 1.0);
        }`,blending:_r,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setTexelSize(e.x,e.y),this.kernel=new Float32Array([0,1,2,2,3])}setTexelSize(e,n){this.uniforms.texelSize.value.set(e,n),this.uniforms.halfTexelSize.value.set(e,n).multiplyScalar(.5)}setResolution(e){this.uniforms.resolution.value.copy(e)}}class vue{constructor({gl:e,resolution:n,width:i=500,height:r=500,minDepthThreshold:a=0,maxDepthThreshold:s=1,depthScale:o=0,depthToBlurRatioBias:l=.25}){this.renderToScreen=!1,this.renderTargetA=new Ei(n,n,{minFilter:Rn,magFilter:Rn,stencilBuffer:!1,depthBuffer:!1,type:Pr}),this.renderTargetB=this.renderTargetA.clone(),this.convolutionMaterial=new gue,this.convolutionMaterial.setTexelSize(1/i,1/r),this.convolutionMaterial.setResolution(new Ye(i,r)),this.scene=new Zh,this.camera=new vb,this.convolutionMaterial.uniforms.minDepthThreshold.value=a,this.convolutionMaterial.uniforms.maxDepthThreshold.value=s,this.convolutionMaterial.uniforms.depthScale.value=o,this.convolutionMaterial.uniforms.depthToBlurRatioBias.value=l,this.convolutionMaterial.defines.USE_DEPTH=o>0;const u=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),h=new Float32Array([0,0,2,0,0,2]),p=new An;p.setAttribute("position",new yi(u,3)),p.setAttribute("uv",new yi(h,2)),this.screen=new zi(p,this.convolutionMaterial),this.screen.frustumCulled=!1,this.scene.add(this.screen)}render(e,n,i){const r=this.scene,a=this.camera,s=this.renderTargetA,o=this.renderTargetB;let l=this.convolutionMaterial,u=l.uniforms;u.depthBuffer.value=n.depthTexture;const h=l.kernel;let p=n,g,x,b;for(x=0,b=h.length-1;x<b;++x)g=(x&1)===0?s:o,u.kernel.value=h[x],u.inputBuffer.value=p.texture,e.setRenderTarget(g),e.render(r,a),p=g;u.kernel.value=h[x],u.inputBuffer.value=p.texture,e.setRenderTarget(this.renderToScreen?null:i),e.render(r,a)}}let xue=class extends Ab{constructor(e={}){super(e),this._tDepth={value:null},this._distortionMap={value:null},this._tDiffuse={value:null},this._tDiffuseBlur={value:null},this._textureMatrix={value:null},this._hasBlur={value:!1},this._mirror={value:0},this._mixBlur={value:0},this._blurStrength={value:.5},this._minDepthThreshold={value:.9},this._maxDepthThreshold={value:1},this._depthScale={value:0},this._depthToBlurRatioBias={value:.25},this._distortion={value:1},this._mixContrast={value:1},this.setValues(e)}onBeforeCompile(e){var n;(n=e.defines)!=null&&n.USE_UV||(e.defines.USE_UV=""),e.uniforms.hasBlur=this._hasBlur,e.uniforms.tDiffuse=this._tDiffuse,e.uniforms.tDepth=this._tDepth,e.uniforms.distortionMap=this._distortionMap,e.uniforms.tDiffuseBlur=this._tDiffuseBlur,e.uniforms.textureMatrix=this._textureMatrix,e.uniforms.mirror=this._mirror,e.uniforms.mixBlur=this._mixBlur,e.uniforms.mixStrength=this._blurStrength,e.uniforms.minDepthThreshold=this._minDepthThreshold,e.uniforms.maxDepthThreshold=this._maxDepthThreshold,e.uniforms.depthScale=this._depthScale,e.uniforms.depthToBlurRatioBias=this._depthToBlurRatioBias,e.uniforms.distortion=this._distortion,e.uniforms.mixContrast=this._mixContrast,e.vertexShader=`
        uniform mat4 textureMatrix;
        varying vec4 my_vUv;
      ${e.vertexShader}`,e.vertexShader=e.vertexShader.replace("#include <project_vertex>",`#include <project_vertex>
        my_vUv = textureMatrix * vec4( position, 1.0 );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );`),e.fragmentShader=`
        uniform sampler2D tDiffuse;
        uniform sampler2D tDiffuseBlur;
        uniform sampler2D tDepth;
        uniform sampler2D distortionMap;
        uniform float distortion;
        uniform float cameraNear;
			  uniform float cameraFar;
        uniform bool hasBlur;
        uniform float mixBlur;
        uniform float mirror;
        uniform float mixStrength;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float mixContrast;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec4 my_vUv;
        ${e.fragmentShader}`,e.fragmentShader=e.fragmentShader.replace("#include <emissivemap_fragment>",`#include <emissivemap_fragment>

      float distortionFactor = 0.0;
      #ifdef USE_DISTORTION
        distortionFactor = texture2D(distortionMap, vUv).r * distortion;
      #endif

      vec4 new_vUv = my_vUv;
      new_vUv.x += distortionFactor;
      new_vUv.y += distortionFactor;

      vec4 base = texture2DProj(tDiffuse, new_vUv);
      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);

      vec4 merge = base;

      #ifdef USE_NORMALMAP
        vec2 normal_uv = vec2(0.0);
        vec4 normalColor = texture2D(normalMap, vUv * normalScale);
        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );
        vec3 coord = new_vUv.xyz / new_vUv.w;
        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;
        vec4 base_normal = texture2D(tDiffuse, normal_uv);
        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);
        merge = base_normal;
        blur = blur_normal;
      #endif

      float depthFactor = 0.0001;
      float blurFactor = 0.0;

      #ifdef USE_DEPTH
        vec4 depth = texture2DProj(tDepth, new_vUv);
        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
        depthFactor *= depthScale;
        depthFactor = max(0.0001, min(1.0, depthFactor));

        #ifdef USE_BLUR
          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);
          merge = merge * min(1.0, depthFactor + 0.5);
        #else
          merge = merge * depthFactor;
        #endif

      #endif

      float reflectorRoughnessFactor = roughness;
      #ifdef USE_ROUGHNESSMAP
        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );
        reflectorRoughnessFactor *= reflectorTexelRoughness.g;
      #endif

      #ifdef USE_BLUR
        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);
        merge = mix(merge, blur, blurFactor);
      #endif

      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);
      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;
      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;
      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;

      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);
      `)}get tDiffuse(){return this._tDiffuse.value}set tDiffuse(e){this._tDiffuse.value=e}get tDepth(){return this._tDepth.value}set tDepth(e){this._tDepth.value=e}get distortionMap(){return this._distortionMap.value}set distortionMap(e){this._distortionMap.value=e}get tDiffuseBlur(){return this._tDiffuseBlur.value}set tDiffuseBlur(e){this._tDiffuseBlur.value=e}get textureMatrix(){return this._textureMatrix.value}set textureMatrix(e){this._textureMatrix.value=e}get hasBlur(){return this._hasBlur.value}set hasBlur(e){this._hasBlur.value=e}get mirror(){return this._mirror.value}set mirror(e){this._mirror.value=e}get mixBlur(){return this._mixBlur.value}set mixBlur(e){this._mixBlur.value=e}get mixStrength(){return this._blurStrength.value}set mixStrength(e){this._blurStrength.value=e}get minDepthThreshold(){return this._minDepthThreshold.value}set minDepthThreshold(e){this._minDepthThreshold.value=e}get maxDepthThreshold(){return this._maxDepthThreshold.value}set maxDepthThreshold(e){this._maxDepthThreshold.value=e}get depthScale(){return this._depthScale.value}set depthScale(e){this._depthScale.value=e}get depthToBlurRatioBias(){return this._depthToBlurRatioBias.value}set depthToBlurRatioBias(e){this._depthToBlurRatioBias.value=e}get distortion(){return this._distortion.value}set distortion(e){this._distortion.value=e}get mixContrast(){return this._mixContrast.value}set mixContrast(e){this._mixContrast.value=e}};const yue=z.forwardRef(({mixBlur:t=0,mixStrength:e=1,resolution:n=256,blur:i=[0,0],minDepthThreshold:r=.9,maxDepthThreshold:a=1,depthScale:s=0,depthToBlurRatioBias:o=.25,mirror:l=0,distortion:u=1,mixContrast:h=1,distortionMap:p,reflectorOffset:g=0,...x},b)=>{IT({MeshReflectorMaterialImpl:xue});const M=hi(({gl:ie})=>ie),S=hi(({camera:ie})=>ie),T=hi(({scene:ie})=>ie);i=Array.isArray(i)?i:[i,i];const A=i[0]+i[1]>0,E=i[0],j=i[1],R=z.useRef(null);z.useImperativeHandle(b,()=>R.current,[]);const[C]=z.useState(()=>new hu),[D]=z.useState(()=>new se),[U]=z.useState(()=>new se),[I]=z.useState(()=>new se),[L]=z.useState(()=>new un),[F]=z.useState(()=>new se(0,0,-1)),[G]=z.useState(()=>new Cn),[H]=z.useState(()=>new se),[W]=z.useState(()=>new se),[Y]=z.useState(()=>new Cn),[k]=z.useState(()=>new un),[$]=z.useState(()=>new Ji),ee=z.useCallback(()=>{var ie;const ue=R.current.parent||((ie=R.current)==null||(ie=ie.__r3f.parent)==null?void 0:ie.object);if(!ue||(U.setFromMatrixPosition(ue.matrixWorld),I.setFromMatrixPosition(S.matrixWorld),L.extractRotation(ue.matrixWorld),D.set(0,0,1),D.applyMatrix4(L),U.addScaledVector(D,g),H.subVectors(U,I),H.dot(D)>0))return;H.reflect(D).negate(),H.add(U),L.extractRotation(S.matrixWorld),F.set(0,0,-1),F.applyMatrix4(L),F.add(I),W.subVectors(U,F),W.reflect(D).negate(),W.add(U),$.position.copy(H),$.up.set(0,1,0),$.up.applyMatrix4(L),$.up.reflect(D),$.lookAt(W),$.far=S.far,$.updateMatrixWorld(),$.projectionMatrix.copy(S.projectionMatrix),k.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),k.multiply($.projectionMatrix),k.multiply($.matrixWorldInverse),k.multiply(ue.matrixWorld),C.setFromNormalAndCoplanarPoint(D,U),C.applyMatrix4($.matrixWorldInverse),G.set(C.normal.x,C.normal.y,C.normal.z,C.constant);const me=$.projectionMatrix;Y.x=(Math.sign(G.x)+me.elements[8])/me.elements[0],Y.y=(Math.sign(G.y)+me.elements[9])/me.elements[5],Y.z=-1,Y.w=(1+me.elements[10])/me.elements[14],G.multiplyScalar(2/G.dot(Y)),me.elements[2]=G.x,me.elements[6]=G.y,me.elements[10]=G.z+1,me.elements[14]=G.w},[S,g]),[te,ae,q,K]=z.useMemo(()=>{const ie={minFilter:Rn,magFilter:Rn,type:Pr},ue=new Ei(n,n,ie);ue.depthBuffer=!0,ue.depthTexture=new Jg(n,n),ue.depthTexture.format=W0,ue.depthTexture.type=H0;const me=new Ei(n,n,ie),fe=new vue({gl:M,resolution:n,width:E,height:j,minDepthThreshold:r,maxDepthThreshold:a,depthScale:s,depthToBlurRatioBias:o}),de={mirror:l,textureMatrix:k,mixBlur:t,tDiffuse:ue.texture,tDepth:ue.depthTexture,tDiffuseBlur:me.texture,hasBlur:A,mixStrength:e,minDepthThreshold:r,maxDepthThreshold:a,depthScale:s,depthToBlurRatioBias:o,distortion:u,distortionMap:p,mixContrast:h,"defines-USE_BLUR":A?"":void 0,"defines-USE_DEPTH":s>0?"":void 0,"defines-USE_DISTORTION":p?"":void 0};return[ue,me,fe,de]},[M,E,j,k,n,l,A,t,e,r,a,s,o,u,p,h]);return It(()=>{var ie;const ue=R.current.parent||((ie=R.current)==null||(ie=ie.__r3f.parent)==null?void 0:ie.object);if(!ue)return;ue.visible=!1;const me=M.xr.enabled,fe=M.shadowMap.autoUpdate;ee(),M.xr.enabled=!1,M.shadowMap.autoUpdate=!1,M.setRenderTarget(te),M.state.buffers.depth.setMask(!0),M.autoClear||M.clear(),M.render(T,$),A&&q.render(M,te,ae),M.xr.enabled=me,M.shadowMap.autoUpdate=fe,ue.visible=!0,M.setRenderTarget(null)}),z.createElement("meshReflectorMaterialImpl",bo({attach:"material",key:"key"+K["defines-USE_BLUR"]+K["defines-USE_DEPTH"]+K["defines-USE_DISTORTION"],ref:R},K,x))}),fu=1e-5;function bue(t,e,n){const i=new Af,r=n-fu;return i.absarc(fu,fu,fu,-Math.PI/2,-Math.PI,!0),i.absarc(fu,e-r*2,fu,Math.PI,Math.PI/2,!0),i.absarc(t-r*2,e-r*2,fu,Math.PI/2,0,!0),i.absarc(t-r*2,fu,fu,0,-Math.PI/2,!0),i}const Sue=z.forwardRef(function({args:[e=1,n=1,i=1]=[],radius:r=.05,steps:a=1,smoothness:s=4,bevelSegments:o=4,creaseAngle:l=.4,children:u,...h},p){return z.createElement("mesh",bo({ref:p},h),z.createElement(Mue,{args:[e,n,i],radius:r,steps:a,smoothness:s,bevelSegments:o,creaseAngle:l}),u)}),Mue=z.forwardRef(function({args:[e=1,n=1,i=1]=[],radius:r=.05,steps:a=1,smoothness:s=4,bevelSegments:o=4,creaseAngle:l=.4,...u},h){const p=z.useMemo(()=>bue(e,n,r),[e,n,r]),g=z.useMemo(()=>({depth:i-r*2,bevelEnabled:!0,bevelSegments:o*2,steps:a,bevelSize:r-fu,bevelThickness:r,curveSegments:s}),[i,r,s,o,a]),x=z.useRef(null);return z.useLayoutEffect(()=>{x.current&&(x.current.center(),Ble(x.current,l))},[p,g,l]),z.useImperativeHandle(h,()=>x.current),z.createElement("extrudeGeometry",bo({ref:x,args:[p,g]},u))}),RW=(t,e,n)=>{let i;switch(t){case nr:i=new Uint8ClampedArray(e*n*4);break;case Pr:i=new Uint16Array(e*n*4);break;case Ac:i=new Uint32Array(e*n*4);break;case tT:i=new Int8Array(e*n*4);break;case nT:i=new Int16Array(e*n*4);break;case pb:i=new Int32Array(e*n*4);break;case fr:i=new Float32Array(e*n*4);break;default:throw new Error("Unsupported data type")}return i};let rM;const _ue=(t,e,n,i)=>{if(rM!==void 0)return rM;const r=new Ei(1,1,i);e.setRenderTarget(r);const a=new zi(new Ul,new Au({color:16777215}));e.render(a,n),e.setRenderTarget(null);const s=RW(t,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,s),r.dispose(),a.geometry.dispose(),a.material.dispose(),rM=s[0]!==0,rM};class OD{constructor(e){kr(this,"_renderer");kr(this,"_rendererIsDisposable",!1);kr(this,"_material");kr(this,"_scene");kr(this,"_camera");kr(this,"_quad");kr(this,"_renderTarget");kr(this,"_width");kr(this,"_height");kr(this,"_type");kr(this,"_colorSpace");kr(this,"_supportsReadPixels",!0);kr(this,"render",()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(e){throw this._renderer.setRenderTarget(null),e}this._renderer.setRenderTarget(null)});var i,r,a,s,o,l,u,h,p,g,x,b,M,S,T,A;this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const n={format:Sr,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((i=e.renderTargetOptions)==null?void 0:i.anisotropy)!==void 0?(r=e.renderTargetOptions)==null?void 0:r.anisotropy:1,generateMipmaps:((a=e.renderTargetOptions)==null?void 0:a.generateMipmaps)!==void 0?(s=e.renderTargetOptions)==null?void 0:s.generateMipmaps:!1,magFilter:((o=e.renderTargetOptions)==null?void 0:o.magFilter)!==void 0?(l=e.renderTargetOptions)==null?void 0:l.magFilter:Rn,minFilter:((u=e.renderTargetOptions)==null?void 0:u.minFilter)!==void 0?(h=e.renderTargetOptions)==null?void 0:h.minFilter:Rn,samples:((p=e.renderTargetOptions)==null?void 0:p.samples)!==void 0?(g=e.renderTargetOptions)==null?void 0:g.samples:void 0,wrapS:((x=e.renderTargetOptions)==null?void 0:x.wrapS)!==void 0?(b=e.renderTargetOptions)==null?void 0:b.wrapS:qr,wrapT:((M=e.renderTargetOptions)==null?void 0:M.wrapT)!==void 0?(S=e.renderTargetOptions)==null?void 0:S.wrapT:qr};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=OD.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Zh,this._camera=new Ol,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!_ue(this._type,this._renderer,this._camera,n)){let E;switch(this._type){case Pr:E=this._renderer.extensions.has("EXT_color_buffer_float")?fr:void 0;break}E!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${fr}`),this._type=E):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new zi(new Ul,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Ei(this.width,this.height,n),this._renderTarget.texture.mapping=((T=e.renderTargetOptions)==null?void 0:T.mapping)!==void 0?(A=e.renderTargetOptions)==null?void 0:A.mapping:Xh}static instantiateRenderer(){const e=new bD;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=RW(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const n=new Xo(this.toArray(),this.width,this.height,Sr,this._type,(e==null?void 0:e.mapping)||Xh,(e==null?void 0:e.wrapS)||qr,(e==null?void 0:e.wrapT)||qr,(e==null?void 0:e.magFilter)||Rn,(e==null?void 0:e.minFilter)||Rn,(e==null?void 0:e.anisotropy)||1,Zo);return n.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,n}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof di&&Object.values(this.material.uniforms).forEach(n=>{n.value instanceof ji&&n.value.dispose()}),Object.values(this.material).forEach(n=>{n instanceof ji&&n.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class jW extends Error{}class NW extends Error{}const Zx=(t,e,n)=>{const i=new RegExp(`${e}="([^"]*)"`,"i").exec(t);if(i)return i[1];const r=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(t);if(r){const a=r[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return a&&a.length===3?a.map(s=>s.replace(/<\/?rdf:li>/g,"")):r[1].trim()}if(n!==void 0)return n;throw new Error(`Can't find ${e} in gainmap metadata`)},Tue=t=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(t):e=t.toString();let n=e.indexOf("<x:xmpmeta");for(;n!==-1;){const i=e.indexOf("x:xmpmeta>",n),r=e.slice(n,i+10);try{const a=Zx(r,"hdrgm:GainMapMin","0"),s=Zx(r,"hdrgm:GainMapMax"),o=Zx(r,"hdrgm:Gamma","1"),l=Zx(r,"hdrgm:OffsetSDR","0.015625"),u=Zx(r,"hdrgm:OffsetHDR","0.015625"),h=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(r),p=h?h[1]:"0",g=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(r);if(!g)throw new Error("Incomplete gainmap metadata");const x=g[1];return{gainMapMin:Array.isArray(a)?a.map(b=>parseFloat(b)):[parseFloat(a),parseFloat(a),parseFloat(a)],gainMapMax:Array.isArray(s)?s.map(b=>parseFloat(b)):[parseFloat(s),parseFloat(s),parseFloat(s)],gamma:Array.isArray(o)?o.map(b=>parseFloat(b)):[parseFloat(o),parseFloat(o),parseFloat(o)],offsetSdr:Array.isArray(l)?l.map(b=>parseFloat(b)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetHdr:Array.isArray(u)?u.map(b=>parseFloat(b)):[parseFloat(u),parseFloat(u),parseFloat(u)],hdrCapacityMin:parseFloat(p),hdrCapacityMax:parseFloat(x)}}catch{}n=e.indexOf("<x:xmpmeta",i)}};class wue{constructor(e){kr(this,"options");this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((n,i)=>{const r=this.options.debug,a=new DataView(e.buffer);if(a.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const s=a.byteLength;let o=2,l=0,u;for(;o<s;){if(++l>250){i(new Error(`Found no marker after ${l} loops `));return}if(a.getUint8(o)!==255){i(new Error(`Not a valid marker at offset 0x${o.toString(16)}, found: 0x${a.getUint8(o).toString(16)}`));return}if(u=a.getUint8(o+1),r&&console.log(`Marker: ${u.toString(16)}`),u===226){r&&console.log("Found APP2 marker (0xffe2)");const h=o+4;if(a.getUint32(h)===1297106432){const p=h+4;let g;if(a.getUint16(p)===18761)g=!1;else if(a.getUint16(p)===19789)g=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(a.getUint16(p+2,!g)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const x=a.getUint32(p+4,!g);if(x<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const b=p+x,M=a.getUint16(b,!g),S=b+2;let T=0;for(let R=S;R<S+12*M;R+=12)a.getUint16(R,!g)===45057&&(T=a.getUint32(R+8,!g));const E=b+2+M*12+4,j=[];for(let R=E;R<E+T*16;R+=16){const C={MPType:a.getUint32(R,!g),size:a.getUint32(R+4,!g),dataOffset:a.getUint32(R+8,!g),dependantImages:a.getUint32(R+12,!g),start:-1,end:-1,isFII:!1};C.dataOffset?(C.start=p+C.dataOffset,C.isFII=!1):(C.start=0,C.isFII=!0),C.end=C.start+C.size,j.push(C)}if(this.options.extractNonFII&&j.length){const R=new Blob([a]),C=[];for(const D of j){if(D.isFII&&!this.options.extractFII)continue;const U=R.slice(D.start,D.end+1,"image/jpeg");C.push(U)}n(C)}}}o+=2+a.getUint16(o+2)}})}}const Aue=async t=>{const e=Tue(t);if(!e)throw new NW("Gain map XMP metadata not found");const i=await new wue({extractFII:!0,extractNonFII:!0}).extract(t);if(i.length!==2)throw new jW("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},XL=t=>new Promise((e,n)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=r=>{n(r)},i.src=URL.createObjectURL(t)});class Eue extends eo{constructor(n,i){super(i);kr(this,"_renderer");kr(this,"_renderTargetOptions");kr(this,"_internalLoadingManager");kr(this,"_config");this._config=n,n.renderer&&(this._renderer=n.renderer),this._internalLoadingManager=new RT}setRenderer(n){return this._renderer=n,this}setRenderTargetOptions(n){return this._renderTargetOptions=n,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: A Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const n=this._config.createMaterial({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new ji,sdr:new ji});return this._config.createQuadRenderer({width:16,height:16,type:Pr,colorSpace:Zo,material:n,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async processImages(n,i,r){const a=i?new Blob([i],{type:"image/jpeg"}):void 0,s=new Blob([n],{type:"image/jpeg"});let o,l,u=!1;if(typeof createImageBitmap>"u"){const h=await Promise.all([a?XL(a):Promise.resolve(void 0),XL(s)]);l=h[0],o=h[1],u=r==="flipY"}else{const h=await Promise.all([a?createImageBitmap(a,{imageOrientation:r||"flipY"}):Promise.resolve(void 0),createImageBitmap(s,{imageOrientation:r||"flipY"})]);l=h[0],o=h[1]}return{sdrImage:o,gainMapImage:l,needsFlip:u}}createTextures(n,i,r){const a=new ji(i||new ImageData(2,2),Xh,qr,qr,Rn,Tj,Sr,nr,1,Zo);a.flipY=r,a.needsUpdate=!0;const s=new ji(n,Xh,qr,qr,Rn,Tj,Sr,nr,1,Kn);return s.flipY=r,s.needsUpdate=!0,{gainMap:a,sdr:s}}updateQuadRenderer(n,i,r,a,s){n.width=i.width,n.height=i.height,n.material.gainMap=r,n.material.sdr=a,n.material.gainMapMin=s.gainMapMin,n.material.gainMapMax=s.gainMapMax,n.material.offsetHdr=s.offsetHdr,n.material.offsetSdr=s.offsetSdr,n.material.gamma=s.gamma,n.material.hdrCapacityMin=s.hdrCapacityMin,n.material.hdrCapacityMax=s.hdrCapacityMax,n.material.maxDisplayBoost=Math.pow(2,s.hdrCapacityMax),n.material.needsUpdate=!0}}const Cue=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,Rue=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class jue extends di{constructor({gamma:n,offsetHdr:i,offsetSdr:r,gainMapMin:a,gainMapMax:s,maxDisplayBoost:o,hdrCapacityMin:l,hdrCapacityMax:u,sdr:h,gainMap:p}){super({name:"GainMapDecoderMaterial",vertexShader:Cue,fragmentShader:Rue,uniforms:{sdr:{value:h},gainMap:{value:p},gamma:{value:new se(1/n[0],1/n[1],1/n[2])},offsetHdr:{value:new se().fromArray(i)},offsetSdr:{value:new se().fromArray(r)},gainMapMin:{value:new se().fromArray(a)},gainMapMax:{value:new se().fromArray(s)},weightFactor:{value:(Math.log2(o)-l)/(u-l)}},blending:_r,depthTest:!1,depthWrite:!1});kr(this,"_maxDisplayBoost");kr(this,"_hdrCapacityMin");kr(this,"_hdrCapacityMax");this._maxDisplayBoost=o,this._hdrCapacityMin=l,this._hdrCapacityMax=u,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(n){this.uniforms.sdr.value=n}get gainMap(){return this.uniforms.gainMap.value}set gainMap(n){this.uniforms.gainMap.value=n}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(n){this.uniforms.offsetHdr.value.fromArray(n)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(n){this.uniforms.offsetSdr.value.fromArray(n)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(n){this.uniforms.gainMapMin.value.fromArray(n)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(n){this.uniforms.gainMapMax.value.fromArray(n)}get gamma(){const n=this.uniforms.gamma.value;return[1/n.x,1/n.y,1/n.z]}set gamma(n){const i=this.uniforms.gamma.value;i.x=1/n[0],i.y=1/n[1],i.z=1/n[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(n){this._hdrCapacityMin=n,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(n){this._hdrCapacityMax=n,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(n){this._maxDisplayBoost=Math.max(1,Math.min(65504,n)),this.calculateWeight()}calculateWeight(){const n=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,n))}}class OW extends Eue{constructor(e,n){super({renderer:e,createMaterial:i=>new jue(i),createQuadRenderer:i=>new OD(i)},n)}async render(e,n,i,r){const{sdrImage:a,gainMapImage:s,needsFlip:o}=await this.processImages(i,r,"flipY"),{gainMap:l,sdr:u}=this.createTextures(a,s,o);this.updateQuadRenderer(e,a,l,u,n),e.render()}}class Nue extends OW{load([e,n,i],r,a,s){const o=this.prepareQuadRenderer();let l,u,h;const p=async()=>{if(l&&u&&h){try{await this.render(o,h,l,u)}catch(I){this.manager.itemError(e),this.manager.itemError(n),this.manager.itemError(i),typeof s=="function"&&s(I),o.disposeOnDemandRenderer();return}typeof r=="function"&&r(o),this.manager.itemEnd(e),this.manager.itemEnd(n),this.manager.itemEnd(i),o.disposeOnDemandRenderer()}};let g=!0,x=0,b=0,M=!0,S=0,T=0,A=!0,E=0,j=0;const R=()=>{if(typeof a=="function"){const I=x+S+E,L=b+T+j,F=g&&M&&A;a(new ProgressEvent("progress",{lengthComputable:F,loaded:L,total:I}))}};this.manager.itemStart(e),this.manager.itemStart(n),this.manager.itemStart(i);const C=new $o(this._internalLoadingManager);C.setResponseType("arraybuffer"),C.setRequestHeader(this.requestHeader),C.setPath(this.path),C.setWithCredentials(this.withCredentials),C.load(e,async I=>{if(typeof I=="string")throw new Error("Invalid sdr buffer");l=I,await p()},I=>{g=I.lengthComputable,b=I.loaded,x=I.total,R()},I=>{this.manager.itemError(e),typeof s=="function"&&s(I)});const D=new $o(this._internalLoadingManager);D.setResponseType("arraybuffer"),D.setRequestHeader(this.requestHeader),D.setPath(this.path),D.setWithCredentials(this.withCredentials),D.load(n,async I=>{if(typeof I=="string")throw new Error("Invalid gainmap buffer");u=I,await p()},I=>{M=I.lengthComputable,T=I.loaded,S=I.total,R()},I=>{this.manager.itemError(n),typeof s=="function"&&s(I)});const U=new $o(this._internalLoadingManager);return U.setRequestHeader(this.requestHeader),U.setPath(this.path),U.setWithCredentials(this.withCredentials),U.load(i,async I=>{if(typeof I!="string")throw new Error("Invalid metadata string");h=JSON.parse(I),await p()},I=>{A=I.lengthComputable,j=I.loaded,E=I.total,R()},I=>{this.manager.itemError(i),typeof s=="function"&&s(I)}),o}}class Oue extends OW{load(e,n,i,r){const a=this.prepareQuadRenderer(),s=new $o(this._internalLoadingManager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(this.withCredentials),this.manager.itemStart(e),s.load(e,async o=>{if(typeof o=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(o);let u,h,p;try{const g=await Aue(l);u=g.sdr,h=g.gainMap,p=g.metadata}catch(g){if(g instanceof NW||g instanceof jW)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),p={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},u=l;else throw g}try{await this.render(a,p,u.buffer,h==null?void 0:h.buffer)}catch(g){this.manager.itemError(e),typeof r=="function"&&r(g),a.disposeOnDemandRenderer();return}typeof n=="function"&&n(a),this.manager.itemEnd(e),a.disposeOnDemandRenderer()},i,o=>{this.manager.itemError(e),typeof r=="function"&&r(o)}),a}}const y1={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},DW="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",cg=t=>Array.isArray(t),DD=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function BT({files:t=DD,path:e="",preset:n=void 0,colorSpace:i=void 0,extensions:r}={}){n&&(PD(n),t=y1[n],e=DW);const a=cg(t),{extension:s,isCubemap:o}=ID(t),l=UD(s);if(!l)throw new Error("useEnvironment: Unrecognized file extension: "+t);const u=hi(x=>x.gl);z.useLayoutEffect(()=>{if(s!=="webp"&&s!=="jpg"&&s!=="jpeg")return;function x(){Sg.clear(l,a?[t]:t)}u.domElement.addEventListener("webglcontextlost",x,{once:!0})},[t,u.domElement]);const h=Sg(l,a?[t]:t,x=>{(s==="webp"||s==="jpg"||s==="jpeg")&&x.setRenderer(u),x.setPath==null||x.setPath(e),r&&r(x)});let p=a?h[0]:h;if(s==="jpg"||s==="jpeg"||s==="webp"){var g;p=(g=p.renderTarget)==null?void 0:g.texture}return p.mapping=o?Tu:pg,p.colorSpace=i??(o?"srgb":"srgb-linear"),p}const Due={files:DD,path:"",preset:void 0,extensions:void 0};BT.preload=t=>{const e={...Due,...t};let{files:n,path:i=""}=e;const{preset:r,extensions:a}=e;r&&(PD(r),n=y1[r],i=DW);const{extension:s}=ID(n);if(s==="webp"||s==="jpg"||s==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const o=UD(s);if(!o)throw new Error("useEnvironment: Unrecognized file extension: "+n);Sg.preload(o,cg(n)?[n]:n,l=>{l.setPath==null||l.setPath(i),a&&a(l)})};const Pue={files:DD,preset:void 0};BT.clear=t=>{const e={...Pue,...t};let{files:n}=e;const{preset:i}=e;i&&(PD(i),n=y1[i]);const{extension:r}=ID(n),a=UD(r);if(!a)throw new Error("useEnvironment: Unrecognized file extension: "+n);Sg.clear(a,cg(n)?[n]:n)};function PD(t){if(!(t in y1))throw new Error("Preset must be one of: "+Object.keys(y1).join(", "))}function ID(t){var e;const n=cg(t)&&t.length===6,i=cg(t)&&t.length===3&&t.some(s=>s.endsWith("json")),r=cg(t)?t[0]:t;return{extension:n?"cube":i?"webp":r.startsWith("data:application/exr")?"exr":r.startsWith("data:application/hdr")?"hdr":r.startsWith("data:image/jpeg")?"jpg":(e=r.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:n,isGainmap:i}}function UD(t){return t==="cube"?pq:t==="hdr"?uce:t==="exr"?fce:t==="jpg"||t==="jpeg"?Oue:t==="webp"?Nue:null}const Iue=t=>t.current&&t.current.isScene,Uue=t=>Iue(t)?t.current:t;function LD(t,e,n,i,r={}){var a,s,o,l;r={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const u=Uue(e||n),h=u.background,p=u.environment,g={backgroundBlurriness:u.backgroundBlurriness,backgroundIntensity:u.backgroundIntensity,backgroundRotation:(a=(s=u.backgroundRotation)==null||s.clone==null?void 0:s.clone())!==null&&a!==void 0?a:[0,0,0],environmentIntensity:u.environmentIntensity,environmentRotation:(o=(l=u.environmentRotation)==null||l.clone==null?void 0:l.clone())!==null&&o!==void 0?o:[0,0,0]};return t!=="only"&&(u.environment=i),t&&(u.background=i),du(u,r),()=>{t!=="only"&&(u.environment=p),t&&(u.background=h),du(u,g)}}function BD({scene:t,background:e=!1,map:n,...i}){const r=hi(a=>a.scene);return z.useLayoutEffect(()=>{if(n)return LD(e,t,r,n,i)}),null}function PW({background:t=!1,scene:e,blur:n,backgroundBlurriness:i,backgroundIntensity:r,backgroundRotation:a,environmentIntensity:s,environmentRotation:o,...l}){const u=BT(l),h=hi(p=>p.scene);return z.useLayoutEffect(()=>LD(t,e,h,u,{backgroundBlurriness:n??i,backgroundIntensity:r,backgroundRotation:a,environmentIntensity:s,environmentRotation:o})),z.useEffect(()=>()=>{u.dispose()},[u]),null}function Lue({children:t,near:e=.1,far:n=1e3,resolution:i=256,frames:r=1,map:a,background:s=!1,blur:o,backgroundBlurriness:l,backgroundIntensity:u,backgroundRotation:h,environmentIntensity:p,environmentRotation:g,scene:x,files:b,path:M,preset:S=void 0,extensions:T}){const A=hi(U=>U.gl),E=hi(U=>U.scene),j=z.useRef(null),[R]=z.useState(()=>new Zh),C=z.useMemo(()=>{const U=new uT(i);return U.texture.type=Pr,U},[i]);z.useEffect(()=>()=>{C.dispose()},[C]),z.useLayoutEffect(()=>{if(r===1){const U=A.autoClear;A.autoClear=!0,j.current.update(A,R),A.autoClear=U}return LD(s,x,E,C.texture,{backgroundBlurriness:o??l,backgroundIntensity:u,backgroundRotation:h,environmentIntensity:p,environmentRotation:g})},[t,R,C.texture,x,E,s,r,A]);let D=1;return It(()=>{if(r===1/0||D<r){const U=A.autoClear;A.autoClear=!0,j.current.update(A,R),A.autoClear=U,D++}}),z.createElement(z.Fragment,null,cle(z.createElement(z.Fragment,null,t,z.createElement("cubeCamera",{ref:j,args:[e,n,C]}),b||S?z.createElement(PW,{background:!0,files:b,preset:S,path:M,extensions:T}):a?z.createElement(BD,{background:!0,map:a,extensions:T}):null),R))}function Bue(t){var e,n,i,r;const a=BT(t),s=t.map||a;z.useMemo(()=>IT({GroundProjectedEnvImpl:Jle}),[]),z.useEffect(()=>()=>{a.dispose()},[a]);const o=z.useMemo(()=>[s],[s]),l=(e=t.ground)==null?void 0:e.height,u=(n=t.ground)==null?void 0:n.radius,h=(i=(r=t.ground)==null?void 0:r.scale)!==null&&i!==void 0?i:1e3;return z.createElement(z.Fragment,null,z.createElement(BD,bo({},t,{map:s})),z.createElement("groundProjectedEnvImpl",{args:o,scale:h,height:l,radius:u}))}function zue(t){return t.ground?z.createElement(Bue,t):t.map?z.createElement(BD,t):t.children?z.createElement(Lue,t):z.createElement(PW,t)}const kue=z.forwardRef(({scale:t=10,frames:e=1/0,opacity:n=1,width:i=1,height:r=1,blur:a=1,near:s=0,far:o=10,resolution:l=512,smooth:u=!0,color:h="#000000",depthWrite:p=!1,renderOrder:g,...x},b)=>{const M=z.useRef(null),S=hi(W=>W.scene),T=hi(W=>W.gl),A=z.useRef(null);i=i*(Array.isArray(t)?t[0]:t||1),r=r*(Array.isArray(t)?t[1]:t||1);const[E,j,R,C,D,U,I]=z.useMemo(()=>{const W=new Ei(l,l),Y=new Ei(l,l);Y.texture.generateMipmaps=W.texture.generateMipmaps=!1;const k=new Ul(i,r).rotateX(Math.PI/2),$=new zi(k),ee=new Eb;ee.depthTest=ee.depthWrite=!1,ee.onBeforeCompile=q=>{q.uniforms={...q.uniforms,ucolor:{value:new zt(h)}},q.fragmentShader=q.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),q.fragmentShader=q.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const te=new di(lce),ae=new di(cce);return ae.depthTest=te.depthTest=!1,[W,k,ee,$,te,ae,Y]},[l,i,r,t,h]),L=W=>{C.visible=!0,C.material=D,D.uniforms.tDiffuse.value=E.texture,D.uniforms.h.value=W*1/256,T.setRenderTarget(I),T.render(C,A.current),C.material=U,U.uniforms.tDiffuse.value=I.texture,U.uniforms.v.value=W*1/256,T.setRenderTarget(E),T.render(C,A.current),C.visible=!1};let F=0,G,H;return It(()=>{A.current&&(e===1/0||F<e)&&(F++,G=S.background,H=S.overrideMaterial,M.current.visible=!1,S.background=null,S.overrideMaterial=R,T.setRenderTarget(E),T.render(S,A.current),L(a),u&&L(a*.4),T.setRenderTarget(null),M.current.visible=!0,S.overrideMaterial=H,S.background=G)}),z.useImperativeHandle(b,()=>M.current,[]),z.createElement("group",bo({"rotation-x":Math.PI/2},x,{ref:M}),z.createElement("mesh",{renderOrder:g,geometry:j,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},z.createElement("meshBasicMaterial",{transparent:!0,map:E.texture,opacity:n,depthWrite:p})),z.createElement("orthographicCamera",{ref:A,args:[-i/2,i/2,r/2,-r/2,s,o]}))});function Fue({all:t,scene:e,camera:n}){const i=hi(({gl:s})=>s),r=hi(({camera:s})=>s),a=hi(({scene:s})=>s);return z.useLayoutEffect(()=>{const s=[];t&&(e||a).traverse(u=>{u.visible===!1&&(s.push(u),u.visible=!0)}),i.compile(e||a,n||r);const o=new uT(128);new ZO(.01,1e5,o).update(i,e||a),o.dispose(),s.forEach(u=>u.visible=!1)},[]),null}var Wn=(t=>(t.SILO="SILO",t.ROLLER_MILL="ROLLER_MILL",t.PLANSIFTER="PLANSIFTER",t.PACKER="PACKER",t.CONTROL_ROOM="CONTROL_ROOM",t))(Wn||{});const b1=[{id:"w1",name:"Marcus Chen",role:"Supervisor",icon:"supervisor",speed:1.2,currentTask:"Overseeing production line",targetMachine:"rm-103",status:"working",shiftStart:"06:00",experience:15,certifications:["Six Sigma","HACCP","ISO 22000"],color:"#3b82f6"},{id:"w2",name:"Sarah Mitchell",role:"Engineer",icon:"engineer",speed:1.5,currentTask:"Calibrating Roller Mill #2",targetMachine:"mill-1.5",status:"working",shiftStart:"06:00",experience:8,certifications:["PLC Programming","Mechanical Systems"],color:"#ffffff"},{id:"w3",name:"James Rodriguez",role:"Operator",icon:"operator",speed:1.3,currentTask:"Monitoring Silo levels",targetMachine:"silo-0",status:"working",shiftStart:"06:00",experience:5,certifications:["Forklift License","Food Safety"],color:"#f97316"},{id:"w4",name:"Emily Watson",role:"Quality Control",icon:"quality",speed:1.1,currentTask:"Testing flour samples",targetMachine:"packer-2",status:"working",shiftStart:"06:00",experience:6,certifications:["Lab Analysis","ISO 17025"],color:"#a855f7"},{id:"w5",name:"David Kim",role:"Maintenance",icon:"maintenance",speed:1.4,currentTask:"Preventive maintenance on Packer #1",targetMachine:"packer-0",status:"working",shiftStart:"06:00",experience:12,certifications:["Electrical Systems","Pneumatics"],color:"#eab308"},{id:"w6",name:"Lisa Thompson",role:"Safety Officer",icon:"safety",speed:1,currentTask:"Safety inspection - Zone 2",targetMachine:"sifter-b",status:"working",shiftStart:"06:00",experience:10,certifications:["OSHA","First Aid","Fire Safety"],color:"#22c55e"},{id:"w7",name:"Robert Garcia",role:"Operator",icon:"operator",speed:1.2,currentTask:"Loading grain into Silo 3",targetMachine:"silo-2",status:"working",shiftStart:"06:00",experience:3,certifications:["Forklift License"],color:"#f97316"},{id:"w8",name:"Anna Kowalski",role:"Engineer",icon:"engineer",speed:1.6,currentTask:"Optimizing Plansifter efficiency",targetMachine:"sifter-0",status:"working",shiftStart:"06:00",experience:7,certifications:["Process Optimization","Data Analytics"],color:"#ffffff"},{id:"w9",name:"Michael Brown",role:"Operator",icon:"operator",speed:1.3,currentTask:"Operating Packer #2",targetMachine:"packer-2",status:"working",shiftStart:"14:00",experience:4,certifications:["Packaging Systems"],color:"#f97316"},{id:"w10",name:"Jennifer Lee",role:"Quality Control",icon:"quality",speed:1.2,currentTask:"Moisture analysis",targetMachine:"sifter-a",status:"working",shiftStart:"14:00",experience:5,certifications:["Food Science","HACCP"],color:"#a855f7"}];class Gue{constructor(){this.audioContext=null,this.masterGain=null,this.lastHornTime=new Map,this.lastBeepTime=new Map,this._muted=!1,this._volume=.5,this.listeners=new Set,this._initialized=!1,this.ambientNodes={},this.machineNodes=new Map,this.forkliftEngines=new Map,this.radioChatterActive=!1,this.radioChatterInterval=null,this.outdoorNodes={},this.cameraPosition={x:0,y:0,z:0},this.soundPositions=new Map,this.musicAudio=null,this._musicEnabled=!0,this._musicVolume=.3,this._currentTrackIndex=0,this._ttsEnabled=!0,this._ttsVoice=null,this._ttsVoiceLoaded=!1,this.allMusicTracks=[{id:"the_builder",name:"The Builder",file:"/v0.10/The Builder.mp3"},{id:"space_jazz",name:"Space Jazz",file:"/v0.10/Space Jazz.mp3"},{id:"upbeat_forever",name:"Upbeat Forever",file:"/v0.10/Upbeat Forever.mp3"},{id:"fuzzball_parade",name:"Fuzzball Parade",file:"/v0.10/Fuzzball Parade.mp3"},{id:"i_got_a_stick",name:"I Got a Stick",file:"/v0.10/I Got a Stick Feat James Gavins.mp3"},{id:"boogie_party",name:"Boogie Party",file:"/v0.10/Boogie Party.mp3"},{id:"voxel_revolution",name:"Voxel Revolution",file:"/v0.10/Voxel Revolution.mp3"},{id:"newer_wave",name:"Newer Wave",file:"/v0.10/Newer Wave.mp3"},{id:"neon_laser_horizon",name:"Neon Laser Horizon",file:"/v0.10/Neon Laser Horizon.mp3"},{id:"cloud_dancer",name:"Cloud Dancer",file:"/v0.10/Cloud Dancer.mp3"}],this.truckEngines=new Map,this.lastFootstepTime=new Map,this.workerVoiceActive=!1,this.workerVoiceInterval=null,this.currentTimeOfDay="day",this.nightAmbientInterval=null,this.conveyorNodes=new Map,this.lastSpeedZoneTime=new Map,this.emergencyAlarmNode=null,this.paSystemActive=!1,this.paSystemInterval=null,this.compressorActive=!1,this.compressorInterval=null,this.compressorNodes=null,this.metalClankActive=!1,this.metalClankInterval=null,this.weatherNodes={},this.isRaining=!1,this.thunderListeners=new Set,this.spoutingNodes=new Map,this.ventilationFanNodes=null,this.lastFlickerSoundTime=0,this.lastDripSoundTime=0,this.musicTracks=[...this.allMusicTracks],this.shufflePlaylist()}get initialized(){return this._initialized}shufflePlaylist(){for(let e=this.musicTracks.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[this.musicTracks[e],this.musicTracks[n]]=[this.musicTracks[n],this.musicTracks[e]]}}get muted(){return this._muted}set muted(e){this._muted=e,this.updateMasterVolume(),this.updateMusicVolume(),this.notifyListeners()}get volume(){return this._volume}set volume(e){this._volume=Math.max(0,Math.min(1,e)),this.updateMasterVolume(),this.notifyListeners()}get musicEnabled(){return this._musicEnabled}set musicEnabled(e){this._musicEnabled=e,e?this.startMusic():this.stopMusic(),this.notifyListeners()}get musicVolume(){return this._musicVolume}set musicVolume(e){this._musicVolume=Math.max(0,Math.min(1,e)),this.updateMusicVolume(),this.notifyListeners()}get currentTrack(){return this.musicTracks[this._currentTrackIndex]}get trackCount(){return this.musicTracks.length}get trackIndex(){return this._currentTrackIndex}nextTrack(){this._currentTrackIndex=this._currentTrackIndex+1,this._currentTrackIndex>=this.musicTracks.length&&(this._currentTrackIndex=0,this.shufflePlaylist()),this._musicEnabled&&this.musicAudio&&(this.musicAudio.src=this.currentTrack.file,this.musicAudio.play().catch(()=>{})),this.notifyListeners()}prevTrack(){this._currentTrackIndex=(this._currentTrackIndex-1+this.musicTracks.length)%this.musicTracks.length,this._musicEnabled&&this.musicAudio&&(this.musicAudio.src=this.currentTrack.file,this.musicAudio.play().catch(()=>{})),this.notifyListeners()}updateMusicVolume(){this.musicAudio&&(this.musicAudio.volume=this._muted?0:this._musicVolume)}startMusic(){this._musicEnabled&&(this.musicAudio?this.musicAudio.src!==window.location.origin+this.currentTrack.file&&(this.musicAudio.src=this.currentTrack.file):(this.musicAudio=new Audio(this.currentTrack.file),this.musicAudio.loop=!1,this.updateMusicVolume(),this.musicAudio.addEventListener("ended",()=>{this.nextTrack()})),this.musicAudio.play().catch(()=>{}))}stopMusic(){this.musicAudio&&(this.musicAudio.pause(),this.musicAudio.currentTime=0)}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notifyListeners(){this.listeners.forEach(e=>e())}getContext(){return this._initialized?(this.audioContext||(this.audioContext=new AudioContext,this.masterGain=this.audioContext.createGain(),this.masterGain.connect(this.audioContext.destination),this.updateMasterVolume()),this.audioContext):null}getMasterGain(){return this.getContext()?this.masterGain:null}updateMasterVolume(){var e;if(this.masterGain){const n=this._muted?0:this._volume;this.masterGain.gain.setTargetAtTime(n,((e=this.audioContext)==null?void 0:e.currentTime)||0,.1)}}getEffectiveVolume(){return this._muted?0:this._volume}createNoiseBuffer(e,n="white"){const i=this.getContext();if(!i)return null;const r=i.sampleRate,a=r*e,s=i.createBuffer(1,a,r),o=s.getChannelData(0);let l=0,u=0,h=0,p=0,g=0,x=0,b=0;for(let M=0;M<a;M++){const S=Math.random()*2-1;n==="white"?o[M]=S:n==="pink"?(l=.99886*l+S*.0555179,u=.99332*u+S*.0750759,h=.969*h+S*.153852,p=.8665*p+S*.3104856,g=.55*g+S*.5329522,x=-.7616*x-S*.016898,o[M]=(l+u+h+p+g+x+b+S*.5362)*.11,b=S*.115926):o[M]=(l=(l+.02*S)/1.02)*3.5}return s}playHorn(e){if(this.getEffectiveVolume()===0)return;const n=Date.now(),i=this.lastHornTime.get(e)||0;if(!(n-i<800)){this.lastHornTime.set(e,n);try{const r=this.getContext(),a=this.getMasterGain();if(!r||!a)return;const s=r.currentTime,o=[220,277,330],l=[],u=[];o.forEach((b,M)=>{const S=r.createOscillator(),T=r.createGain(),A=r.createBiquadFilter();S.type="sawtooth",S.frequency.setValueAtTime(b*.98,s),S.frequency.linearRampToValueAtTime(b,s+.05),A.type="lowpass",A.frequency.setValueAtTime(800,s),A.Q.setValueAtTime(2,s);const E=.12/o.length;T.gain.setValueAtTime(0,s),T.gain.linearRampToValueAtTime(E,s+.02),T.gain.setValueAtTime(E,s+.25),T.gain.exponentialRampToValueAtTime(.001,s+.4),S.connect(A),A.connect(T),T.connect(a),S.start(s),S.stop(s+.45),u.push(S),l.push(T)});const h=this.createNoiseBuffer(.5,"pink");if(!h)return;const p=r.createBufferSource(),g=r.createGain(),x=r.createBiquadFilter();p.buffer=h,x.type="bandpass",x.frequency.setValueAtTime(400,s),x.Q.setValueAtTime(1,s),g.gain.setValueAtTime(0,s),g.gain.linearRampToValueAtTime(.03,s+.02),g.gain.exponentialRampToValueAtTime(.001,s+.4),p.connect(x),x.connect(g),g.connect(a),p.start(s),p.stop(s+.45)}catch{}}}playBackupBeep(e){if(this.getEffectiveVolume()===0)return;const n=Date.now(),i=this.lastBeepTime.get(e)||0;if(!(n-i<600)){this.lastBeepTime.set(e,n);try{const r=this.getContext(),a=this.getMasterGain();if(!r||!a)return;const s=r.currentTime,o=r.createOscillator(),l=r.createOscillator(),u=r.createGain(),h=r.createBiquadFilter();o.type="square",o.frequency.setValueAtTime(1200,s),l.type="square",l.frequency.setValueAtTime(1e3,s),h.type="lowpass",h.frequency.setValueAtTime(2e3,s),u.gain.setValueAtTime(0,s),u.gain.linearRampToValueAtTime(.06,s+.01),u.gain.setValueAtTime(.06,s+.15),u.gain.linearRampToValueAtTime(0,s+.2),u.gain.setValueAtTime(0,s+.25),u.gain.linearRampToValueAtTime(.06,s+.26),u.gain.setValueAtTime(.06,s+.4),u.gain.linearRampToValueAtTime(0,s+.45);const p=r.createGain();o.connect(p),l.connect(p),p.gain.setValueAtTime(.5,s),p.connect(h),h.connect(u),u.connect(a),o.start(s),l.start(s),o.stop(s+.5),l.stop(s+.5)}catch{}}}startAmbientSounds(){if(!this.ambientNodes.machineryHum)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;{const i=this.createNoiseBuffer(4,"brown");if(!i)return;const r=e.createBufferSource(),a=e.createGain(),s=e.createBiquadFilter();r.buffer=i,r.loop=!0,s.type="lowpass",s.frequency.setValueAtTime(120,e.currentTime),s.Q.setValueAtTime(5,e.currentTime),a.gain.setValueAtTime(.08,e.currentTime),r.connect(s),s.connect(a),a.connect(n),r.start(),this.ambientNodes.machineryHum={source:r,gain:a}}{const i=this.createNoiseBuffer(2,"pink");if(!i)return;const r=e.createBufferSource(),a=e.createGain(),s=e.createBiquadFilter();r.buffer=i,r.loop=!0,s.type="bandpass",s.frequency.setValueAtTime(300,e.currentTime),s.Q.setValueAtTime(2,e.currentTime),a.gain.setValueAtTime(.03,e.currentTime),r.connect(s),s.connect(a),a.connect(n),r.start(),this.ambientNodes.conveyorNoise={source:r,gain:a}}{const i=this.createNoiseBuffer(3,"white");if(!i)return;const r=e.createBufferSource(),a=e.createGain(),s=e.createBiquadFilter();r.buffer=i,r.loop=!0,s.type="highpass",s.frequency.setValueAtTime(500,e.currentTime),s.Q.setValueAtTime(.5,e.currentTime),a.gain.setValueAtTime(.015,e.currentTime),r.connect(s),s.connect(a),a.connect(n),r.start(),this.ambientNodes.ventilation={source:r,gain:a}}{const i=this.createNoiseBuffer(2,"white");if(!i)return;const r=e.createBufferSource(),a=e.createGain(),s=e.createBiquadFilter();r.buffer=i,r.loop=!0,s.type="bandpass",s.frequency.setValueAtTime(2500,e.currentTime),s.Q.setValueAtTime(3,e.currentTime),a.gain.setValueAtTime(.012,e.currentTime),r.connect(s),s.connect(a),a.connect(n),r.start(),this.ambientNodes.grainFlow={source:r,gain:a}}}catch{}}stopAmbientSounds(){Object.values(this.ambientNodes).forEach(e=>{if(e)try{e.source.stop()}catch{}}),this.ambientNodes={}}playMillSound(e,n=1400){if(!this.machineNodes.has(e)&&this.getEffectiveVolume()!==0)try{const i=this.getContext(),r=this.getMasterGain();if(!i||!r)return;const a=this.createNoiseBuffer(2,"pink");if(!a)return;const s=i.createBufferSource(),o=i.createGain(),l=i.createBiquadFilter(),u=i.createOscillator(),h=i.createGain();s.buffer=a,s.loop=!0;const p=200+n/10;l.type="bandpass",l.frequency.setValueAtTime(p,i.currentTime),l.Q.setValueAtTime(3,i.currentTime),u.type="sine",u.frequency.setValueAtTime(n/60,i.currentTime),h.gain.setValueAtTime(.02,i.currentTime),o.gain.setValueAtTime(.04,i.currentTime),s.connect(l),l.connect(o),u.connect(h),h.connect(o.gain),o.connect(r),s.start(),u.start(),this.machineNodes.set(e,{source:s,gain:o})}catch{}}stopMillSound(e){const n=this.machineNodes.get(e);if(n){try{n.source.stop()}catch{}this.machineNodes.delete(e)}}playSifterSound(e,n=200){if(!this.machineNodes.has(e)&&this.getEffectiveVolume()!==0)try{const i=this.getContext(),r=this.getMasterGain();if(!i||!r)return;const a=this.createNoiseBuffer(2,"white");if(!a)return;const s=i.createBufferSource(),o=i.createGain(),l=i.createBiquadFilter();s.buffer=a,s.loop=!0,l.type="bandpass",l.frequency.setValueAtTime(800,i.currentTime),l.Q.setValueAtTime(4,i.currentTime);const u=i.createOscillator(),h=i.createGain();u.type="sine",u.frequency.setValueAtTime(n/60*2,i.currentTime),h.gain.setValueAtTime(.015,i.currentTime),o.gain.setValueAtTime(.025,i.currentTime),s.connect(l),l.connect(o),u.connect(h),h.connect(o.gain),o.connect(r),s.start(),u.start(),this.machineNodes.set(e,{source:s,gain:o})}catch{}}playPackerSound(e){if(!this.machineNodes.has(e)&&this.getEffectiveVolume()!==0)try{const n=this.getContext(),i=this.getMasterGain();if(!n||!i)return;const r=this.createNoiseBuffer(3,"white");if(!r)return;const a=n.createBufferSource(),s=n.createGain(),o=n.createBiquadFilter();a.buffer=r,a.loop=!0,o.type="highpass",o.frequency.setValueAtTime(2e3,n.currentTime),o.Q.setValueAtTime(1,n.currentTime);const l=n.createOscillator(),u=n.createGain();l.type="square",l.frequency.setValueAtTime(1,n.currentTime),u.gain.setValueAtTime(.02,n.currentTime),s.gain.setValueAtTime(.01,n.currentTime),a.connect(o),o.connect(s),l.connect(u),u.connect(s.gain),s.connect(i),a.start(),l.start(),this.machineNodes.set(e,{source:a,gain:s})}catch{}}stopMachineSound(e){const n=this.machineNodes.get(e);if(n){try{n.source.stop()}catch{}this.machineNodes.delete(e)}}playClunk(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime,r=e.createOscillator(),a=e.createGain(),s=e.createBiquadFilter();r.type="sine",r.frequency.setValueAtTime(80,i),r.frequency.exponentialRampToValueAtTime(40,i+.1),s.type="lowpass",s.frequency.setValueAtTime(200,i),a.gain.setValueAtTime(.15,i),a.gain.exponentialRampToValueAtTime(.001,i+.15),r.connect(s),s.connect(a),a.connect(n),r.start(i),r.stop(i+.2)}catch{}}playAlert(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime;for(let r=0;r<3;r++){const a=e.createOscillator(),s=e.createGain();a.type="sine";const o=i+r*.2;a.frequency.setValueAtTime(880,o),a.frequency.setValueAtTime(660,o+.1),s.gain.setValueAtTime(0,o),s.gain.linearRampToValueAtTime(.08,o+.02),s.gain.setValueAtTime(.08,o+.15),s.gain.linearRampToValueAtTime(0,o+.18),a.connect(s),s.connect(n),a.start(o),a.stop(o+.2)}}catch{}}playGrainFlow(e=1){if(this.getEffectiveVolume()!==0)try{const n=this.getContext(),i=this.getMasterGain();if(!n||!i)return;const r=n.currentTime,a=this.createNoiseBuffer(e+.5,"white");if(!a)return;const s=n.createBufferSource(),o=n.createGain(),l=n.createBiquadFilter();s.buffer=a,l.type="bandpass",l.frequency.setValueAtTime(3e3,r),l.Q.setValueAtTime(2,r),o.gain.setValueAtTime(0,r),o.gain.linearRampToValueAtTime(.05,r+.1),o.gain.setValueAtTime(.05,r+e),o.gain.exponentialRampToValueAtTime(.001,r+e+.3),s.connect(l),l.connect(o),o.connect(i),s.start(r),s.stop(r+e+.5)}catch{}}startTruckEngine(e,n=!1){if(!this.truckEngines.has(e)&&this.getEffectiveVolume()!==0)try{const i=this.getContext(),r=this.getMasterGain();if(!i||!r)return;const a=this.createNoiseBuffer(3,"brown");if(!a)return;const s=i.createBufferSource(),o=i.createGain(),l=i.createBiquadFilter(),u=i.createOscillator(),h=i.createGain();s.buffer=a,s.loop=!0,l.type="lowpass",l.frequency.setValueAtTime(n?150:80,i.currentTime),l.Q.setValueAtTime(3,i.currentTime),u.type="sine",u.frequency.setValueAtTime(n?25:15,i.currentTime),h.gain.setValueAtTime(.01,i.currentTime),o.gain.setValueAtTime(n?.04:.025,i.currentTime),s.connect(l),l.connect(o),u.connect(h),h.connect(o.gain),o.connect(r),s.start(),u.start(),this.truckEngines.set(e,{source:s,gain:o})}catch{}}updateTruckEngine(e,n){const i=this.truckEngines.get(e);if(i&&this.audioContext){const r=n?.04:.025;i.gain.gain.setTargetAtTime(r,this.audioContext.currentTime,.3)}}stopTruckEngine(e){const n=this.truckEngines.get(e);if(n){try{n.source.stop()}catch{}this.truckEngines.delete(e)}}playAirBrake(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime,r=this.createNoiseBuffer(.8,"white");if(!r)return;const a=e.createBufferSource(),s=e.createGain(),o=e.createBiquadFilter();a.buffer=r,o.type="highpass",o.frequency.setValueAtTime(1500,i),o.frequency.exponentialRampToValueAtTime(500,i+.5),s.gain.setValueAtTime(.08,i),s.gain.exponentialRampToValueAtTime(.001,i+.6),a.connect(o),o.connect(s),s.connect(n),a.start(i),a.stop(i+.7)}catch{}}playFootstep(e){if(this.getEffectiveVolume()===0)return;const n=Date.now(),i=this.lastFootstepTime.get(e)||0;if(!(n-i<280)){this.lastFootstepTime.set(e,n);try{const r=this.getContext(),a=this.getMasterGain();if(!r||!a)return;const s=r.currentTime,o=this.createNoiseBuffer(.15,"brown");if(!o)return;const l=r.createBufferSource(),u=r.createGain(),h=r.createBiquadFilter();l.buffer=o;const p=.8+Math.random()*.4;h.type="bandpass",h.frequency.setValueAtTime(200*p,s),h.Q.setValueAtTime(2,s);const g=.015+Math.random()*.008;u.gain.setValueAtTime(g,s),u.gain.exponentialRampToValueAtTime(.001,s+.08),l.connect(h),h.connect(u),u.connect(a),l.start(s),l.stop(s+.1)}catch{}}}playAICriticalAlert(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime;[440,554,698].forEach((a,s)=>{const o=e.createOscillator(),l=e.createGain(),u=i+s*.12;o.type="sine",o.frequency.setValueAtTime(a,u),l.gain.setValueAtTime(0,u),l.gain.linearRampToValueAtTime(.08,u+.02),l.gain.setValueAtTime(.08,u+.08),l.gain.exponentialRampToValueAtTime(.001,u+.11),o.connect(l),l.connect(n),o.start(u),o.stop(u+.15)})}catch{}}playAIDecision(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime,r=e.createOscillator(),a=e.createGain();r.type="sine",r.frequency.setValueAtTime(880,i),r.frequency.setValueAtTime(1047,i+.08),a.gain.setValueAtTime(0,i),a.gain.linearRampToValueAtTime(.04,i+.01),a.gain.linearRampToValueAtTime(.02,i+.06),a.gain.linearRampToValueAtTime(.04,i+.09),a.gain.exponentialRampToValueAtTime(.001,i+.15),r.connect(a),a.connect(n),r.start(i),r.stop(i+.18)}catch{}}playAIAnomaly(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime,r=e.createOscillator(),a=e.createOscillator(),s=e.createGain(),o=e.createGain();r.type="triangle",r.frequency.setValueAtTime(660,i),a.type="sine",a.frequency.setValueAtTime(15,i),s.gain.setValueAtTime(30,i),a.connect(s),s.connect(r.frequency),o.gain.setValueAtTime(0,i),o.gain.linearRampToValueAtTime(.06,i+.05),o.gain.setValueAtTime(.06,i+.3),o.gain.exponentialRampToValueAtTime(.001,i+.5),r.connect(o),o.connect(n),r.start(i),a.start(i),r.stop(i+.55),a.stop(i+.55)}catch{}}playAISuccess(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime;[523,659,784,1047].forEach((a,s)=>{const o=e.createOscillator(),l=e.createGain(),u=i+s*.06;o.type="sine",o.frequency.setValueAtTime(a,u),l.gain.setValueAtTime(0,u),l.gain.linearRampToValueAtTime(.03,u+.02),l.gain.exponentialRampToValueAtTime(.001,u+.2),o.connect(l),l.connect(n),o.start(u),o.stop(u+.25)})}catch{}}playClick(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime,r=e.createOscillator(),a=e.createGain();r.type="sine",r.frequency.setValueAtTime(600,i),r.frequency.exponentialRampToValueAtTime(400,i+.05),a.gain.setValueAtTime(.08,i),a.gain.exponentialRampToValueAtTime(.001,i+.06),r.connect(a),a.connect(n),r.start(i),r.stop(i+.08)}catch{}}playHover(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime,r=e.createOscillator(),a=e.createGain();r.type="sine",r.frequency.setValueAtTime(800,i),a.gain.setValueAtTime(.02,i),a.gain.exponentialRampToValueAtTime(.001,i+.03),r.connect(a),a.connect(n),r.start(i),r.stop(i+.04)}catch{}}playPanelOpen(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime,r=e.createOscillator(),a=e.createGain();r.type="sine",r.frequency.setValueAtTime(300,i),r.frequency.exponentialRampToValueAtTime(500,i+.1),a.gain.setValueAtTime(.05,i),a.gain.exponentialRampToValueAtTime(.001,i+.12),r.connect(a),a.connect(n),r.start(i),r.stop(i+.15)}catch{}}playPanelClose(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime,r=e.createOscillator(),a=e.createGain();r.type="sine",r.frequency.setValueAtTime(500,i),r.frequency.exponentialRampToValueAtTime(300,i+.1),a.gain.setValueAtTime(.05,i),a.gain.exponentialRampToValueAtTime(.001,i+.12),r.connect(a),a.connect(n),r.start(i),r.stop(i+.15)}catch{}}async resume(){this._initialized=!0;const e=this.getContext();e&&e.state==="suspended"&&await e.resume()}updateCameraPosition(e,n,i){this.cameraPosition={x:e,y:n,z:i}}registerSoundPosition(e,n,i,r){this.soundPositions.set(e,{x:n,y:i,z:r})}calculateSpatialVolume(e,n,i=50){const r=this.soundPositions.get(e);if(!r)return n;const a=r.x-this.cameraPosition.x,s=r.y-this.cameraPosition.y,o=r.z-this.cameraPosition.z,l=Math.sqrt(a*a+s*s+o*o),u=Math.max(0,1-l/i);return n*u*u}updateMachineSpatialVolume(e){const n=this.machineNodes.get(e);if(n&&this.audioContext){const i=this.calculateSpatialVolume(e,.04,35);n.gain.gain.setTargetAtTime(i,this.audioContext.currentTime,.2)}}startWorkerVoices(){if(this.workerVoiceActive)return;this.workerVoiceActive=!0;const e=()=>{if(!this.workerVoiceActive||this.getEffectiveVolume()===0)return;const n=Math.random();n<.35?this.playWorkerShout():n<.6?this.playWorkerWhistle():this.playWorkerCall();const i=15e3+Math.random()*3e4;this.workerVoiceInterval=setTimeout(e,i)};this.workerVoiceInterval=setTimeout(e,1e4+Math.random()*15e3)}stopWorkerVoices(){this.workerVoiceActive=!1,this.workerVoiceInterval&&(clearTimeout(this.workerVoiceInterval),this.workerVoiceInterval=null)}playWorkerShout(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime,r=150+Math.random()*100,a=[{freq:r,gain:.3},{freq:r*2,gain:.15},{freq:700+Math.random()*300,gain:.1},{freq:1200+Math.random()*400,gain:.05}],s=.2+Math.random()*.15;a.forEach(({freq:o,gain:l})=>{const u=e.createOscillator(),h=e.createGain(),p=e.createBiquadFilter();u.type="sawtooth",u.frequency.setValueAtTime(o,i),u.frequency.exponentialRampToValueAtTime(o*.7,i+s),p.type="lowpass",p.frequency.setValueAtTime(2e3,i),h.gain.setValueAtTime(0,i),h.gain.linearRampToValueAtTime(l*.015,i+.02),h.gain.setValueAtTime(l*.015,i+s*.7),h.gain.exponentialRampToValueAtTime(.001,i+s),u.connect(p),p.connect(h),h.connect(n),u.start(i),u.stop(i+s+.1)})}catch{}}playWorkerWhistle(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime,r=e.createOscillator(),a=e.createGain();r.type="sine",r.frequency.setValueAtTime(1200,i),r.frequency.setValueAtTime(1600,i+.15),r.frequency.setValueAtTime(1200,i+.3),a.gain.setValueAtTime(0,i),a.gain.linearRampToValueAtTime(.02,i+.02),a.gain.setValueAtTime(.02,i+.4),a.gain.exponentialRampToValueAtTime(.001,i+.5),r.connect(a),a.connect(n),r.start(i),r.stop(i+.55)}catch{}}playWorkerCall(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime,r=.4+Math.random()*.3,a=this.createNoiseBuffer(r+.2,"pink");if(!a)return;const s=e.createBufferSource(),o=e.createGain(),l=e.createBiquadFilter();s.buffer=a,l.type="bandpass",l.frequency.setValueAtTime(400+Math.random()*200,i),l.Q.setValueAtTime(3,i),o.gain.setValueAtTime(0,i),o.gain.linearRampToValueAtTime(.012,i+.03),o.gain.linearRampToValueAtTime(.006,i+r*.3),o.gain.linearRampToValueAtTime(.012,i+r*.5),o.gain.exponentialRampToValueAtTime(.001,i+r),s.connect(l),l.connect(o),o.connect(n),s.start(i),s.stop(i+r+.1)}catch{}}updateTimeOfDay(e){const i=e<6||e>20?"night":"day";i!==this.currentTimeOfDay&&(this.currentTimeOfDay=i,this.adjustAmbientForTimeOfDay())}adjustAmbientForTimeOfDay(){if(!this.audioContext)return;const e=this.audioContext.currentTime;if(this.outdoorNodes.birds){const n=this.currentTimeOfDay==="night"?.001:.004;this.outdoorNodes.birds.gain.gain.setTargetAtTime(n,e,2)}if(this.outdoorNodes.wind){const n=this.currentTimeOfDay==="night"?.018:.012;this.outdoorNodes.wind.gain.gain.setTargetAtTime(n,e,2)}if(this.outdoorNodes.traffic){const n=this.currentTimeOfDay==="night"?.008:.015;this.outdoorNodes.traffic.gain.gain.setTargetAtTime(n,e,2)}this.currentTimeOfDay==="night"?this.startNightAmbient():this.stopNightAmbient()}startNightAmbient(){if(this.nightAmbientInterval)return;const e=()=>{this.currentTimeOfDay!=="night"||this.getEffectiveVolume()===0||this.playCricketChirp()};this.nightAmbientInterval=setInterval(e,2e3+Math.random()*3e3)}stopNightAmbient(){this.nightAmbientInterval&&(clearInterval(this.nightAmbientInterval),this.nightAmbientInterval=null)}playCricketChirp(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime,r=3+Math.floor(Math.random()*3),a=4e3+Math.random()*1e3;for(let s=0;s<r;s++){const o=e.createOscillator(),l=e.createGain(),u=i+s*.08;o.type="sine",o.frequency.setValueAtTime(a,u),l.gain.setValueAtTime(0,u),l.gain.linearRampToValueAtTime(.008,u+.01),l.gain.exponentialRampToValueAtTime(.001,u+.05),o.connect(l),l.connect(n),o.start(u),o.stop(u+.06)}}catch{}}startConveyorSound(e,n,i,r){if(!this.conveyorNodes.has(e)&&this.getEffectiveVolume()!==0)try{const a=this.getContext(),s=this.getMasterGain();if(!a||!s)return;const o=this.createNoiseBuffer(3,"pink");if(!o)return;const l=a.createBufferSource(),u=a.createGain(),h=a.createBiquadFilter();l.buffer=o,l.loop=!0,h.type="bandpass",h.frequency.setValueAtTime(350,a.currentTime),h.Q.setValueAtTime(2,a.currentTime),u.gain.setValueAtTime(.015,a.currentTime),l.connect(h),h.connect(u),u.connect(s),l.start(),this.conveyorNodes.set(e,{source:l,gain:u}),this.registerSoundPosition(e,n,i,r)}catch{}}updateConveyorSpatialVolume(e){const n=this.conveyorNodes.get(e);if(n&&this.audioContext){const i=this.calculateSpatialVolume(e,.015,30);n.gain.gain.setTargetAtTime(i,this.audioContext.currentTime,.2)}}stopConveyorSound(e){const n=this.conveyorNodes.get(e);if(n){try{n.source.stop()}catch{}this.conveyorNodes.delete(e)}}playTruckArrival(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime;[180,220].forEach((a,s)=>{const o=e.createOscillator(),l=e.createGain(),u=e.createBiquadFilter();o.type="sawtooth",o.frequency.setValueAtTime(a,i),u.type="lowpass",u.frequency.setValueAtTime(600,i),u.Q.setValueAtTime(2,i),l.gain.setValueAtTime(0,i),l.gain.linearRampToValueAtTime(.06,i+.05),l.gain.setValueAtTime(.06,i+.4),l.gain.exponentialRampToValueAtTime(.001,i+.6),o.connect(u),u.connect(l),l.connect(n),o.start(i),o.stop(i+.65)}),setTimeout(()=>this.playAirBrake(),700)}catch{}}playTruckDeparture(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime,r=this.createNoiseBuffer(2,"brown");if(!r)return;const a=e.createBufferSource(),s=e.createGain(),o=e.createBiquadFilter();a.buffer=r,o.type="lowpass",o.frequency.setValueAtTime(80,i),o.frequency.linearRampToValueAtTime(200,i+.8),o.frequency.linearRampToValueAtTime(150,i+1.5),o.Q.setValueAtTime(4,i),s.gain.setValueAtTime(.02,i),s.gain.linearRampToValueAtTime(.06,i+.8),s.gain.linearRampToValueAtTime(.03,i+1.5),s.gain.exponentialRampToValueAtTime(.001,i+2),a.connect(o),o.connect(s),s.connect(n),a.start(i),a.stop(i+2.1)}catch{}}startForkliftEngine(e){if(!this.forkliftEngines.has(e)&&this.getEffectiveVolume()!==0)try{const n=this.getContext(),i=this.getMasterGain();if(!n||!i)return;const r=this.createNoiseBuffer(4,"brown");if(!r)return;const a=n.createBufferSource(),s=n.createGain(),o=n.createBiquadFilter(),l=n.createOscillator(),u=n.createGain();a.buffer=r,a.loop=!0,o.type="lowpass",o.frequency.setValueAtTime(100,n.currentTime),o.Q.setValueAtTime(4,n.currentTime),l.type="sine",l.frequency.setValueAtTime(8+Math.random()*2,n.currentTime),u.gain.setValueAtTime(.008,n.currentTime),s.gain.setValueAtTime(.02,n.currentTime),a.connect(o),o.connect(s),l.connect(u),u.connect(s.gain),s.connect(i),a.start(),l.start(),this.forkliftEngines.set(e,{source:a,gain:s,lfo:l})}catch{}}updateForkliftEngine(e,n,i){const r=this.forkliftEngines.get(e);if(r&&this.audioContext){let a=n?.035:.02;i&&(a=.025);const s=this.calculateSpatialVolume(e,a,40);r.gain.gain.setTargetAtTime(s,this.audioContext.currentTime,.3);const o=n?12:8;r.lfo.frequency.setTargetAtTime(o,this.audioContext.currentTime,.5)}}stopForkliftEngine(e){const n=this.forkliftEngines.get(e);if(n){try{n.source.stop(),n.lfo.stop()}catch{}this.forkliftEngines.delete(e)}}startRadioChatter(){if(this.radioChatterActive)return;this.radioChatterActive=!0;const e=()=>{if(!this.radioChatterActive||this.getEffectiveVolume()===0)return;const n=Math.random();n<.4?this.playRadioStatic():n<.7?this.playRadioBeep():this.playRadioSquelch();const i=8e3+Math.random()*17e3;this.radioChatterInterval=setTimeout(e,i)};this.radioChatterInterval=setTimeout(e,5e3+Math.random()*1e4)}stopRadioChatter(){this.radioChatterActive=!1,this.radioChatterInterval&&(clearTimeout(this.radioChatterInterval),this.radioChatterInterval=null)}playRadioStatic(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime,r=.3+Math.random()*.4,a=this.createNoiseBuffer(r+.2,"white");if(!a)return;const s=e.createBufferSource(),o=e.createGain(),l=e.createBiquadFilter();s.buffer=a,l.type="bandpass",l.frequency.setValueAtTime(1200,i),l.Q.setValueAtTime(5,i),o.gain.setValueAtTime(0,i),o.gain.linearRampToValueAtTime(.015,i+.02),o.gain.setValueAtTime(.015,i+r),o.gain.exponentialRampToValueAtTime(.001,i+r+.1),s.connect(l),l.connect(o),o.connect(n),s.start(i),s.stop(i+r+.2)}catch{}}playRadioBeep(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime;for(let r=0;r<2;r++){const a=e.createOscillator(),s=e.createGain(),o=i+r*.12;a.type="sine",a.frequency.setValueAtTime(1800,o),s.gain.setValueAtTime(0,o),s.gain.linearRampToValueAtTime(.025,o+.01),s.gain.setValueAtTime(.025,o+.06),s.gain.exponentialRampToValueAtTime(.001,o+.08),a.connect(s),s.connect(n),a.start(o),a.stop(o+.1)}}catch{}}playRadioSquelch(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime,r=this.createNoiseBuffer(.15,"white");if(!r)return;const a=e.createBufferSource(),s=e.createGain(),o=e.createBiquadFilter();a.buffer=r,o.type="highpass",o.frequency.setValueAtTime(800,i),o.frequency.exponentialRampToValueAtTime(3e3,i+.08),s.gain.setValueAtTime(.02,i),s.gain.exponentialRampToValueAtTime(.001,i+.1),a.connect(o),o.connect(s),s.connect(n),a.start(i),a.stop(i+.15)}catch{}}startOutdoorAmbient(){if(!this.outdoorNodes.birds)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;{const i=this.createNoiseBuffer(6,"white");if(!i)return;const r=e.createBufferSource(),a=e.createGain(),s=e.createBiquadFilter(),o=e.createOscillator(),l=e.createGain();r.buffer=i,r.loop=!0,s.type="bandpass",s.frequency.setValueAtTime(3500,e.currentTime),s.Q.setValueAtTime(8,e.currentTime),o.type="sine",o.frequency.setValueAtTime(4+Math.random()*2,e.currentTime),l.gain.setValueAtTime(.005,e.currentTime),a.gain.setValueAtTime(.004,e.currentTime),r.connect(s),s.connect(a),o.connect(l),l.connect(a.gain),a.connect(n),r.start(),o.start(),this.outdoorNodes.birds={source:r,gain:a}}{const i=this.createNoiseBuffer(8,"pink");if(!i)return;const r=e.createBufferSource(),a=e.createGain(),s=e.createBiquadFilter(),o=e.createOscillator(),l=e.createGain();r.buffer=i,r.loop=!0,s.type="lowpass",s.frequency.setValueAtTime(400,e.currentTime),s.Q.setValueAtTime(.5,e.currentTime),o.type="sine",o.frequency.setValueAtTime(.15,e.currentTime),l.gain.setValueAtTime(.008,e.currentTime),a.gain.setValueAtTime(.012,e.currentTime),r.connect(s),s.connect(a),o.connect(l),l.connect(a.gain),a.connect(n),r.start(),o.start(),this.outdoorNodes.wind={source:r,gain:a}}{const i=this.createNoiseBuffer(5,"brown");if(!i)return;const r=e.createBufferSource(),a=e.createGain(),s=e.createBiquadFilter();r.buffer=i,r.loop=!0,s.type="lowpass",s.frequency.setValueAtTime(80,e.currentTime),s.Q.setValueAtTime(2,e.currentTime),a.gain.setValueAtTime(.015,e.currentTime),r.connect(s),s.connect(a),a.connect(n),r.start(),this.outdoorNodes.traffic={source:r,gain:a}}}catch{}}stopOutdoorAmbient(){Object.values(this.outdoorNodes).forEach(e=>{if(e)try{e.source.stop()}catch{}}),this.outdoorNodes={}}playSpeedZoneEnter(e){if(this.getEffectiveVolume()===0)return;const n=Date.now(),i=this.lastSpeedZoneTime.get(e)||0;if(!(n-i<2e3)){this.lastSpeedZoneTime.set(e,n);try{const r=this.getContext(),a=this.getMasterGain();if(!r||!a)return;const s=r.currentTime;[880,660].forEach((l,u)=>{const h=r.createOscillator(),p=r.createGain(),g=s+u*.12;h.type="sine",h.frequency.setValueAtTime(l,g),p.gain.setValueAtTime(0,g),p.gain.linearRampToValueAtTime(.06,g+.02),p.gain.exponentialRampToValueAtTime(.001,g+.2),h.connect(p),p.connect(a),h.start(g),h.stop(g+.25)})}catch{}}}playSpeedZoneExit(e){if(this.getEffectiveVolume()===0)return;const n=Date.now(),i=this.lastSpeedZoneTime.get(e)||0;if(!(n-i<2e3)){this.lastSpeedZoneTime.set(e,n);try{const r=this.getContext(),a=this.getMasterGain();if(!r||!a)return;const s=r.currentTime;[660,880].forEach((l,u)=>{const h=r.createOscillator(),p=r.createGain(),g=s+u*.1;h.type="sine",h.frequency.setValueAtTime(l,g),p.gain.setValueAtTime(0,g),p.gain.linearRampToValueAtTime(.05,g+.02),p.gain.exponentialRampToValueAtTime(.001,g+.15),h.connect(p),p.connect(a),h.start(g),h.stop(g+.2)})}catch{}}}startEmergencyAlarm(){if(!this.emergencyAlarmNode&&this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.createOscillator(),r=e.createGain(),a=e.createOscillator(),s=e.createGain();i.type="sawtooth",i.frequency.setValueAtTime(800,e.currentTime),a.type="square",a.frequency.setValueAtTime(2,e.currentTime),s.gain.setValueAtTime(200,e.currentTime),a.connect(s),s.connect(i.frequency),r.gain.setValueAtTime(.1,e.currentTime),i.connect(r),r.connect(n),i.start(),a.start(),this.emergencyAlarmNode={source:i,gain:r}}catch{}}stopEmergencyAlarm(){if(this.emergencyAlarmNode){try{this.emergencyAlarmNode.source.stop()}catch{}this.emergencyAlarmNode=null}}playEmergencyStop(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime,r=e.createOscillator(),a=e.createGain(),s=e.createBiquadFilter();r.type="sawtooth",r.frequency.setValueAtTime(1200,i),r.frequency.exponentialRampToValueAtTime(400,i+.5),s.type="lowpass",s.frequency.setValueAtTime(2e3,i),a.gain.setValueAtTime(.15,i),a.gain.setValueAtTime(.15,i+.4),a.gain.exponentialRampToValueAtTime(.001,i+.6),r.connect(s),s.connect(a),a.connect(n),r.start(i),r.stop(i+.65)}catch{}}playForkliftAcknowledge(e){if(this.getEffectiveVolume()!==0)try{const n=this.getContext(),i=this.getMasterGain();if(!n||!i)return;const r=n.currentTime;for(let a=0;a<2;a++){const s=n.createOscillator(),o=n.createGain(),l=r+a*.15;s.type="sine",s.frequency.setValueAtTime(440,l),o.gain.setValueAtTime(0,l),o.gain.linearRampToValueAtTime(.08,l+.02),o.gain.exponentialRampToValueAtTime(.001,l+.1),s.connect(o),o.connect(i),s.start(l),s.stop(l+.12)}}catch{}}startPASystem(){if(this.paSystemActive)return;this.paSystemActive=!0;const e=()=>{if(!this.paSystemActive||this.getEffectiveVolume()===0)return;const n=Math.random();n<.4?this.playPAChime():n<.7?this.playShiftBell():this.playPATone();const i=6e4+Math.random()*12e4;this.paSystemInterval=setTimeout(e,i)};this.paSystemInterval=setTimeout(e,3e4+Math.random()*6e4)}stopPASystem(){this.paSystemActive=!1,this.paSystemInterval&&(clearTimeout(this.paSystemInterval),this.paSystemInterval=null)}playPAChime(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime;[523,659,784].forEach((a,s)=>{const o=e.createOscillator(),l=e.createGain(),u=i+s*.3;o.type="sine",o.frequency.setValueAtTime(a,u),l.gain.setValueAtTime(0,u),l.gain.linearRampToValueAtTime(.04,u+.02),l.gain.setValueAtTime(.04,u+.2),l.gain.exponentialRampToValueAtTime(.001,u+.5),o.connect(l),l.connect(n),o.start(u),o.stop(u+.55)}),setTimeout(()=>this.playPASpeech(),1200)}catch{}}playPASpeech(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime,r=2+Math.random()*2,a=this.createNoiseBuffer(r+.5,"pink");if(!a)return;const s=e.createBufferSource(),o=e.createGain(),l=e.createBiquadFilter();s.buffer=a,l.type="bandpass",l.frequency.setValueAtTime(600,i),l.Q.setValueAtTime(2,i),o.gain.setValueAtTime(0,i);const u=Math.floor(r*3);for(let h=0;h<u;h++){const p=i+h/u*r;o.gain.linearRampToValueAtTime(.008+Math.random()*.004,p),o.gain.linearRampToValueAtTime(.003,p+.1)}o.gain.exponentialRampToValueAtTime(.001,i+r),s.connect(l),l.connect(o),o.connect(n),s.start(i),s.stop(i+r+.2)}catch{}}playShiftBell(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime;for(let r=0;r<3;r++){const a=i+r*.8;[800,1200,1600,2e3].forEach((o,l)=>{const u=e.createOscillator(),h=e.createGain();u.type="sine",u.frequency.setValueAtTime(o,a);const p=.025/(l+1);h.gain.setValueAtTime(0,a),h.gain.linearRampToValueAtTime(p,a+.005),h.gain.exponentialRampToValueAtTime(.001,a+.6),u.connect(h),h.connect(n),u.start(a),u.stop(a+.65)})}}catch{}}playPATone(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime,r=e.createOscillator(),a=e.createGain();r.type="sine",r.frequency.setValueAtTime(880,i),r.frequency.setValueAtTime(660,i+.3),a.gain.setValueAtTime(0,i),a.gain.linearRampToValueAtTime(.03,i+.02),a.gain.setValueAtTime(.03,i+.5),a.gain.exponentialRampToValueAtTime(.001,i+.7),r.connect(a),a.connect(n),r.start(i),r.stop(i+.75)}catch{}}startCompressorCycling(){if(this.compressorActive)return;this.compressorActive=!0;const e=()=>{if(!this.compressorActive||this.getEffectiveVolume()===0)return;const n=8e3+Math.random()*12e3,i=15e3+Math.random()*3e4;this.startCompressorSound(),setTimeout(()=>{this.stopCompressorSound(),this.compressorActive&&(this.compressorInterval=setTimeout(e,i))},n)};this.compressorInterval=setTimeout(e,5e3+Math.random()*1e4)}stopCompressorCycling(){this.compressorActive=!1,this.compressorInterval&&(clearTimeout(this.compressorInterval),this.compressorInterval=null),this.stopCompressorSound()}startCompressorSound(){if(!(this.compressorNodes||this.getEffectiveVolume()===0))try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime,r=this.createNoiseBuffer(4,"brown");if(!r)return;const a=e.createBufferSource(),s=e.createGain(),o=e.createBiquadFilter(),l=e.createBiquadFilter(),u=e.createOscillator(),h=e.createGain();a.buffer=r,a.loop=!0,o.type="lowpass",o.frequency.setValueAtTime(200,i),o.Q.setValueAtTime(2,i),l.type="bandpass",l.frequency.setValueAtTime(120,i),l.Q.setValueAtTime(4,i),u.type="sine",u.frequency.setValueAtTime(3.5,i),h.gain.setValueAtTime(.015,i),s.gain.setValueAtTime(0,i),s.gain.linearRampToValueAtTime(.035,i+.5),a.connect(o),o.connect(l),l.connect(s),u.connect(h),h.connect(s.gain),s.connect(n),a.start(),u.start(),this.compressorNodes={source:a,gain:s},this.playCompressorStartup()}catch{}}stopCompressorSound(){if(this.compressorNodes)try{const e=this.getContext();e&&(this.compressorNodes.gain.gain.setTargetAtTime(0,e.currentTime,.3),setTimeout(()=>{var n;try{(n=this.compressorNodes)==null||n.source.stop()}catch{}this.compressorNodes=null},500))}catch{}}playCompressorStartup(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime,r=e.createOscillator(),a=e.createGain(),s=e.createBiquadFilter();r.type="sine",r.frequency.setValueAtTime(60,i),r.frequency.exponentialRampToValueAtTime(25,i+.15),s.type="lowpass",s.frequency.setValueAtTime(100,i),a.gain.setValueAtTime(.12,i),a.gain.exponentialRampToValueAtTime(.001,i+.25),r.connect(s),s.connect(a),a.connect(n),r.start(i),r.stop(i+.3)}catch{}}startMetalClanks(){if(this.metalClankActive)return;this.metalClankActive=!0;const e=()=>{if(!this.metalClankActive||this.getEffectiveVolume()===0)return;const n=Math.random();n<.3?this.playMetalClankHeavy():n<.6?this.playMetalClankLight():n<.85?this.playMetalPing():this.playChainRattle();const i=1e4+Math.random()*3e4;this.metalClankInterval=setTimeout(e,i)};this.metalClankInterval=setTimeout(e,8e3+Math.random()*12e3)}stopMetalClanks(){this.metalClankActive=!1,this.metalClankInterval&&(clearTimeout(this.metalClankInterval),this.metalClankInterval=null)}playMetalClankHeavy(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime;[80,180,340,680].forEach((u,h)=>{const p=e.createOscillator(),g=e.createGain(),x=e.createBiquadFilter();p.type="sine",p.frequency.setValueAtTime(u,i),p.frequency.exponentialRampToValueAtTime(u*.7,i+.1),x.type="bandpass",x.frequency.setValueAtTime(u,i),x.Q.setValueAtTime(8,i);const b=.04/(h+1);g.gain.setValueAtTime(b,i),g.gain.exponentialRampToValueAtTime(.001,i+.15+h*.05),p.connect(x),x.connect(g),g.connect(n),p.start(i),p.stop(i+.25)});const a=this.createNoiseBuffer(.1,"white");if(!a)return;const s=e.createBufferSource(),o=e.createGain(),l=e.createBiquadFilter();s.buffer=a,l.type="bandpass",l.frequency.setValueAtTime(2e3,i),l.Q.setValueAtTime(1,i),o.gain.setValueAtTime(.03,i),o.gain.exponentialRampToValueAtTime(.001,i+.05),s.connect(l),l.connect(o),o.connect(n),s.start(i),s.stop(i+.1)}catch{}}playMetalClankLight(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime;[400,800,1600,2400].forEach((a,s)=>{const o=e.createOscillator(),l=e.createGain();o.type="sine",o.frequency.setValueAtTime(a+Math.random()*50,i);const u=.025/(s+1);l.gain.setValueAtTime(u,i),l.gain.exponentialRampToValueAtTime(.001,i+.08+s*.02),o.connect(l),l.connect(n),o.start(i),o.stop(i+.15)})}catch{}}playMetalPing(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime,r=1e3+Math.random()*500,a=e.createOscillator(),s=e.createGain();a.type="sine",a.frequency.setValueAtTime(r,i),s.gain.setValueAtTime(.04,i),s.gain.exponentialRampToValueAtTime(.001,i+.4),a.connect(s),s.connect(n),a.start(i),a.stop(i+.45)}catch{}}playChainRattle(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime,r=5+Math.floor(Math.random()*5);for(let a=0;a<r;a++){const s=e.createOscillator(),o=e.createGain(),l=i+a*.04+Math.random()*.02;s.type="sine",s.frequency.setValueAtTime(1200+Math.random()*600,l),o.gain.setValueAtTime(.015,l),o.gain.exponentialRampToValueAtTime(.001,l+.03),s.connect(o),o.connect(n),s.start(l),s.stop(l+.04)}}catch{}}playHydraulicLift(e,n=1.5){if(this.getEffectiveVolume()!==0)try{const i=this.getContext(),r=this.getMasterGain();if(!i||!r)return;const a=i.currentTime,s=this.createNoiseBuffer(n+.5,"pink");if(!s)return;const o=i.createBufferSource(),l=i.createGain(),u=i.createBiquadFilter(),h=i.createBiquadFilter();o.buffer=s,u.type="lowpass",u.frequency.setValueAtTime(400,a),u.frequency.linearRampToValueAtTime(600,a+n*.3),u.frequency.linearRampToValueAtTime(350,a+n),h.type="highpass",h.frequency.setValueAtTime(80,a),l.gain.setValueAtTime(0,a),l.gain.linearRampToValueAtTime(.025,a+.1),l.gain.setValueAtTime(.025,a+n-.2),l.gain.exponentialRampToValueAtTime(.001,a+n),o.connect(h),h.connect(u),u.connect(l),l.connect(r),o.start(a),o.stop(a+n+.2),this.playHydraulicFluid(n)}catch{}}playHydraulicLower(e,n=2){if(this.getEffectiveVolume()!==0)try{const i=this.getContext(),r=this.getMasterGain();if(!i||!r)return;const a=i.currentTime,s=this.createNoiseBuffer(n+.5,"white");if(!s)return;const o=i.createBufferSource(),l=i.createGain(),u=i.createBiquadFilter();o.buffer=s,u.type="bandpass",u.frequency.setValueAtTime(800,a),u.frequency.exponentialRampToValueAtTime(300,a+n),u.Q.setValueAtTime(2,a),l.gain.setValueAtTime(0,a),l.gain.linearRampToValueAtTime(.02,a+.1),l.gain.setValueAtTime(.02,a+n*.8),l.gain.exponentialRampToValueAtTime(.001,a+n),o.connect(u),u.connect(l),l.connect(r),o.start(a),o.stop(a+n+.2)}catch{}}playHydraulicFluid(e){if(this.getEffectiveVolume()!==0)try{const n=this.getContext(),i=this.getMasterGain();if(!n||!i)return;const r=n.currentTime,a=this.createNoiseBuffer(e,"brown");if(!a)return;const s=n.createBufferSource(),o=n.createGain(),l=n.createBiquadFilter();s.buffer=a,l.type="lowpass",l.frequency.setValueAtTime(150,r),l.Q.setValueAtTime(3,r),o.gain.setValueAtTime(.015,r),o.gain.setValueAtTime(.015,r+e*.7),o.gain.exponentialRampToValueAtTime(.001,r+e),s.connect(l),l.connect(o),o.connect(i),s.start(r),s.stop(r+e+.1)}catch{}}onThunder(e){return this.thunderListeners.add(e),()=>this.thunderListeners.delete(e)}notifyThunderListeners(){this.thunderListeners.forEach(e=>e())}startRain(){if(!(this.weatherNodes.rain||this.getEffectiveVolume()===0)){this.isRaining=!0;try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=this.createNoiseBuffer(4,"white");if(!i)return;const r=e.createBufferSource(),a=e.createGain(),s=e.createBiquadFilter(),o=e.createBiquadFilter();r.buffer=i,r.loop=!0,s.type="highpass",s.frequency.setValueAtTime(2e3,e.currentTime),o.type="lowpass",o.frequency.setValueAtTime(8e3,e.currentTime),a.gain.setValueAtTime(0,e.currentTime),a.gain.linearRampToValueAtTime(.03,e.currentTime+2),r.connect(s),s.connect(o),o.connect(a),a.connect(n),r.start(),this.weatherNodes.rain={source:r,gain:a},this.scheduleThunder()}catch{}}}stopRain(){if(this.isRaining=!1,this.weatherNodes.rain)try{const e=this.getContext();e&&(this.weatherNodes.rain.gain.gain.setTargetAtTime(0,e.currentTime,1),setTimeout(()=>{var n;try{(n=this.weatherNodes.rain)==null||n.source.stop()}catch{}this.weatherNodes.rain=void 0},3e3))}catch{}}scheduleThunder(){if(!this.isRaining)return;const e=15e3+Math.random()*45e3;setTimeout(()=>{this.isRaining&&(this.playThunder(),this.scheduleThunder())},e)}playThunder(){if(!(this.getEffectiveVolume()===0||!this.isRaining))try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime;this.notifyThunderListeners();const r=2+Math.random()*3,a=this.createNoiseBuffer(r+1,"brown");if(!a)return;const s=e.createBufferSource(),o=e.createGain(),l=e.createBiquadFilter();s.buffer=a,l.type="lowpass",l.frequency.setValueAtTime(150,i),o.gain.setValueAtTime(0,i),o.gain.linearRampToValueAtTime(.08,i+.1),o.gain.exponentialRampToValueAtTime(.02,i+.5),o.gain.exponentialRampToValueAtTime(.001,i+r),s.connect(l),l.connect(o),o.connect(n),s.start(i),s.stop(i+r+.5)}catch{}}startSpoutingSound(e,n,i,r){if(!this.spoutingNodes.has(e)&&this.getEffectiveVolume()!==0)try{const a=this.getContext(),s=this.getMasterGain();if(!a||!s)return;const o=this.createNoiseBuffer(3,"white");if(!o)return;const l=a.createBufferSource(),u=a.createGain(),h=a.createBiquadFilter();l.buffer=o,l.loop=!0,h.type="bandpass",h.frequency.setValueAtTime(1500,a.currentTime),h.Q.setValueAtTime(1,a.currentTime),u.gain.setValueAtTime(.02,a.currentTime),l.connect(h),h.connect(u),u.connect(s),l.start(),this.spoutingNodes.set(e,{source:l,gain:u}),this.registerSoundPosition(e,n,i,r)}catch{}}updateSpoutingSpatialVolume(e){const n=this.spoutingNodes.get(e);if(n&&this.audioContext){const i=this.calculateSpatialVolume(e,.02,25);n.gain.gain.setTargetAtTime(i,this.audioContext.currentTime,.2)}}stopSpoutingSound(e){const n=this.spoutingNodes.get(e);if(n){try{n.source.stop()}catch{}this.spoutingNodes.delete(e)}}startVentilationFanSound(){if(!(this.ventilationFanNodes||this.getEffectiveVolume()===0))try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime,r=this.createNoiseBuffer(4,"pink");if(!r)return;const a=e.createBufferSource(),s=e.createGain(),o=e.createBiquadFilter(),l=e.createBiquadFilter(),u=e.createOscillator(),h=e.createGain();a.buffer=r,a.loop=!0,o.type="lowpass",o.frequency.setValueAtTime(800,i),o.Q.setValueAtTime(1,i),l.type="highpass",l.frequency.setValueAtTime(100,i),u.type="sine",u.frequency.setValueAtTime(2.5,i),h.gain.setValueAtTime(.008,i),s.gain.setValueAtTime(0,i),s.gain.linearRampToValueAtTime(.025,i+1),a.connect(l),l.connect(o),o.connect(s),u.connect(h),h.connect(s.gain),s.connect(n),a.start(),u.start(),this.ventilationFanNodes={source:a,gain:s}}catch{}}stopVentilationFanSound(){if(this.ventilationFanNodes)try{const e=this.getContext();e&&(this.ventilationFanNodes.gain.gain.setTargetAtTime(0,e.currentTime,.5),setTimeout(()=>{var n;try{(n=this.ventilationFanNodes)==null||n.source.stop()}catch{}this.ventilationFanNodes=null},1e3))}catch{}}playPowerFlicker(){if(this.getEffectiveVolume()===0)return;const e=Date.now();if(!(e-this.lastFlickerSoundTime<100)){this.lastFlickerSoundTime=e;try{const n=this.getContext(),i=this.getMasterGain();if(!n||!i)return;const r=n.currentTime,a=.1+Math.random()*.2,s=n.createOscillator(),o=n.createGain();s.type="sawtooth",s.frequency.setValueAtTime(60,r),o.gain.setValueAtTime(.04,r),o.gain.exponentialRampToValueAtTime(.001,r+a),s.connect(o),o.connect(i),s.start(r),s.stop(r+a);const l=n.createOscillator(),u=n.createGain();l.type="square",l.frequency.setValueAtTime(120,r),u.gain.setValueAtTime(.02,r),u.gain.exponentialRampToValueAtTime(.001,r+a*.8),l.connect(u),u.connect(i),l.start(r),l.stop(r+a);const h=this.createNoiseBuffer(a,"white");if(h){const p=n.createBufferSource(),g=n.createGain(),x=n.createBiquadFilter();p.buffer=h,x.type="highpass",x.frequency.setValueAtTime(2e3,r),g.gain.setValueAtTime(.03,r),g.gain.exponentialRampToValueAtTime(.001,r+a*.5),p.connect(x),x.connect(g),g.connect(i),p.start(r),p.stop(r+a)}}catch{}}}playWaterDrip(){if(this.getEffectiveVolume()===0)return;const e=Date.now();if(!(e-this.lastDripSoundTime<200)){this.lastDripSoundTime=e;try{const n=this.getContext(),i=this.getMasterGain();if(!n||!i)return;const r=n.currentTime,a=n.createOscillator(),s=n.createGain(),o=n.createBiquadFilter(),l=800+Math.random()*400;a.type="sine",a.frequency.setValueAtTime(l,r),a.frequency.exponentialRampToValueAtTime(l*.3,r+.15),o.type="lowpass",o.frequency.setValueAtTime(2e3,r),o.Q.setValueAtTime(2,r),s.gain.setValueAtTime(.06,r),s.gain.exponentialRampToValueAtTime(.001,r+.2),a.connect(o),o.connect(s),s.connect(i),a.start(r),a.stop(r+.25);const u=this.createNoiseBuffer(.1,"white");if(u){const h=n.createBufferSource(),p=n.createGain(),g=n.createBiquadFilter();h.buffer=u,g.type="bandpass",g.frequency.setValueAtTime(3e3,r),g.Q.setValueAtTime(1,r),p.gain.setValueAtTime(.02,r),p.gain.exponentialRampToValueAtTime(.001,r+.08),h.connect(g),g.connect(p),p.connect(i),h.start(r),h.stop(r+.1)}}catch{}}}playDoorOpen(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime,r=2.5,a=this.createNoiseBuffer(r+.5,"brown");if(!a)return;const s=e.createBufferSource(),o=e.createGain(),l=e.createBiquadFilter();s.buffer=a,l.type="lowpass",l.frequency.setValueAtTime(200,i),l.frequency.linearRampToValueAtTime(400,i+r),l.Q.setValueAtTime(2,i),o.gain.setValueAtTime(0,i),o.gain.linearRampToValueAtTime(.04,i+.1),o.gain.setValueAtTime(.04,i+r-.3),o.gain.exponentialRampToValueAtTime(.001,i+r),s.connect(l),l.connect(o),o.connect(n),s.start(i),s.stop(i+r+.2),setTimeout(()=>this.playDoorClunk(),(r-.2)*1e3)}catch{}}playDoorClose(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime,r=2.5,a=this.createNoiseBuffer(r+.5,"brown");if(!a)return;const s=e.createBufferSource(),o=e.createGain(),l=e.createBiquadFilter();s.buffer=a,l.type="lowpass",l.frequency.setValueAtTime(400,i),l.frequency.linearRampToValueAtTime(150,i+r),l.Q.setValueAtTime(2,i),o.gain.setValueAtTime(0,i),o.gain.linearRampToValueAtTime(.04,i+.1),o.gain.setValueAtTime(.04,i+r-.3),o.gain.exponentialRampToValueAtTime(.001,i+r),s.connect(l),l.connect(o),o.connect(n),s.start(i),s.stop(i+r+.2),setTimeout(()=>this.playDoorClunk(),(r-.1)*1e3)}catch{}}playDoorClunk(){if(this.getEffectiveVolume()!==0)try{const e=this.getContext(),n=this.getMasterGain();if(!e||!n)return;const i=e.currentTime,r=e.createOscillator(),a=e.createGain();r.type="sine",r.frequency.setValueAtTime(60,i),r.frequency.exponentialRampToValueAtTime(30,i+.2),a.gain.setValueAtTime(.08,i),a.gain.exponentialRampToValueAtTime(.001,i+.3),r.connect(a),a.connect(n),r.start(i),r.stop(i+.35)}catch{}}get ttsEnabled(){return this._ttsEnabled}set ttsEnabled(e){this._ttsEnabled=e,e||this.stopTTS(),this.notifyListeners()}initTTSVoice(){if(this._ttsVoiceLoaded||!("speechSynthesis"in window))return;const e=()=>{const n=window.speechSynthesis.getVoices();if(n.length===0)return;const i=["Samantha","Karen","Victoria","Moira","Tessa","Google UK English Female","Microsoft Zira","Microsoft Hazel"];for(const r of i){const a=n.find(s=>s.name===r||s.name.includes(r));if(a){this._ttsVoice=a;break}}if(!this._ttsVoice){const r=n.find(a=>a.lang.startsWith("en")&&a.name.toLowerCase().includes("female"));r&&(this._ttsVoice=r)}this._ttsVoice||(this._ttsVoice=n.find(r=>r.lang.startsWith("en"))||n[0]),this._ttsVoiceLoaded=!0};window.speechSynthesis.getVoices().length?e():window.speechSynthesis.onvoiceschanged=e}speakAnnouncement(e){if(!(!this._ttsEnabled||this._muted||!("speechSynthesis"in window))){this._ttsVoiceLoaded||this.initTTSVoice(),this.stopTTS();try{const n=new SpeechSynthesisUtterance(e);this._ttsVoice&&(n.voice=this._ttsVoice),n.rate=.9,n.pitch=1,n.volume=this._volume*.8,n.onerror=()=>{},this.playPAChime(),setTimeout(()=>{this._ttsEnabled&&!this._muted&&window.speechSynthesis.speak(n)},1200)}catch{}}}stopTTS(){"speechSynthesis"in window&&window.speechSynthesis.cancel()}isSpeaking(){return"speechSynthesis"in window&&window.speechSynthesis.speaking}stopAll(){this.stopAmbientSounds(),this.stopOutdoorAmbient(),this.stopRadioChatter(),this.stopWorkerVoices(),this.stopTTS(),this.stopNightAmbient(),this.stopPASystem(),this.stopRain(),this.stopEmergencyAlarm(),this.stopCompressorCycling(),this.stopMetalClanks(),this.stopVentilationFanSound(),this.machineNodes.forEach((e,n)=>{this.stopMachineSound(n)}),this.forkliftEngines.forEach((e,n)=>{this.stopForkliftEngine(n)}),this.forkliftEngines.clear(),this.truckEngines.forEach((e,n)=>{this.stopTruckEngine(n)}),this.conveyorNodes.forEach((e,n)=>{this.stopConveyorSound(n)}),this.spoutingNodes.forEach((e,n)=>{this.stopSpoutingSound(n)})}}const wt=new Gue,TE={low:{quality:"low",enableSSAO:!1,enableBloom:!1,enableVignette:!1,enableChromaticAberration:!1,enableFilmGrain:!1,enableDepthOfField:!1,enableMachineVibration:!1,enableProceduralTextures:!1,enableWeathering:!1,enableDustParticles:!1,enableGrainFlow:!1,enableAtmosphericHaze:!1,enableLightShafts:!1,enableContactShadows:!1,enableHighResShadows:!1,enableFloorPuddles:!1,enableWornPaths:!1,enableCableConduits:!1,enableVolumetricFog:!1,enableControlPanels:!1,enableWarehouseClutter:!1,enableSignage:!1,enableVentilationDucts:!1,enableAnisotropicReflections:!1,dustParticleCount:0,shadowMapSize:1024,ssaoSamples:8},medium:{quality:"medium",enableSSAO:!1,enableBloom:!1,enableVignette:!1,enableChromaticAberration:!1,enableFilmGrain:!1,enableDepthOfField:!1,enableMachineVibration:!0,enableProceduralTextures:!1,enableWeathering:!1,enableDustParticles:!0,enableGrainFlow:!1,enableAtmosphericHaze:!0,enableLightShafts:!1,enableContactShadows:!0,enableHighResShadows:!1,enableFloorPuddles:!1,enableWornPaths:!0,enableCableConduits:!1,enableVolumetricFog:!1,enableControlPanels:!1,enableWarehouseClutter:!1,enableSignage:!1,enableVentilationDucts:!1,enableAnisotropicReflections:!1,dustParticleCount:200,shadowMapSize:2048,ssaoSamples:12},high:{quality:"high",enableSSAO:!0,enableBloom:!0,enableVignette:!0,enableChromaticAberration:!0,enableFilmGrain:!0,enableDepthOfField:!1,enableMachineVibration:!0,enableProceduralTextures:!0,enableWeathering:!0,enableDustParticles:!0,enableGrainFlow:!0,enableAtmosphericHaze:!0,enableLightShafts:!0,enableContactShadows:!0,enableHighResShadows:!1,enableFloorPuddles:!0,enableWornPaths:!0,enableCableConduits:!0,enableVolumetricFog:!0,enableControlPanels:!0,enableWarehouseClutter:!0,enableSignage:!0,enableVentilationDucts:!0,enableAnisotropicReflections:!0,dustParticleCount:400,shadowMapSize:2048,ssaoSamples:16},ultra:{quality:"ultra",enableSSAO:!0,enableBloom:!0,enableVignette:!0,enableChromaticAberration:!0,enableFilmGrain:!0,enableDepthOfField:!1,enableMachineVibration:!0,enableProceduralTextures:!0,enableWeathering:!0,enableDustParticles:!0,enableGrainFlow:!0,enableAtmosphericHaze:!0,enableLightShafts:!0,enableContactShadows:!0,enableHighResShadows:!0,enableFloorPuddles:!0,enableWornPaths:!0,enableCableConduits:!0,enableVolumetricFog:!0,enableControlPanels:!0,enableWarehouseClutter:!0,enableSignage:!0,enableVentilationDucts:!0,enableAnisotropicReflections:!0,dustParticleCount:500,shadowMapSize:4096,ssaoSamples:21}},Fe=CD()(Ple(Lle(t=>({gameTime:8,setGameTime:e=>t({gameTime:e%24}),tickGameTime:()=>t(e=>({gameTime:(e.gameTime+.004)%24})),productionSpeed:.8,setProductionSpeed:e=>t({productionSpeed:e}),workers:[],selectedWorker:null,setSelectedWorker:e=>t({selectedWorker:e}),updateWorkerTask:(e,n,i)=>t(r=>({workers:r.workers.map(a=>a.id===e?{...a,currentTask:n,targetMachine:i}:a)})),machines:[],selectedMachine:null,setSelectedMachine:e=>t({selectedMachine:e}),updateMachineStatus:(e,n)=>t(i=>({machines:i.machines.map(r=>r.id===e?{...r,status:n}:r)})),alerts:[],addAlert:e=>t(n=>({alerts:[e,...n.alerts].slice(0,10)})),dismissAlert:e=>t(n=>({alerts:n.alerts.filter(i=>i.id!==e)})),aiDecisions:[],addAIDecision:e=>t(n=>({aiDecisions:[e,...n.aiDecisions].slice(0,50)})),updateDecisionStatus:(e,n,i)=>t(r=>({aiDecisions:r.aiDecisions.map(a=>a.id===e?{...a,status:n,outcome:i??a.outcome}:a)})),getActiveDecisionsForMachine:e=>Fe.getState().aiDecisions.filter(i=>i.machineId===e&&(i.status==="pending"||i.status==="in_progress")),getActiveDecisionsForWorker:e=>Fe.getState().aiDecisions.filter(i=>i.workerId===e&&(i.status==="pending"||i.status==="in_progress")),setMachines:e=>t({machines:e}),updateMachineMetrics:(e,n)=>t(i=>({machines:i.machines.map(r=>r.id===e?{...r,metrics:{...r.metrics,...n}}:r)})),metrics:{throughput:1240,efficiency:98.2,uptime:99.7,quality:99.9},updateMetrics:e=>t(n=>({metrics:{...n.metrics,...e}})),safetyMetrics:{nearMisses:0,safetyStops:0,workerEvasions:0,lastIncidentTime:null,daysSinceIncident:127},recordSafetyStop:()=>t(e=>({safetyMetrics:{...e.safetyMetrics,safetyStops:e.safetyMetrics.safetyStops+1,nearMisses:e.safetyMetrics.nearMisses+1,lastIncidentTime:Date.now(),daysSinceIncident:0}})),recordWorkerEvasion:()=>t(e=>({safetyMetrics:{...e.safetyMetrics,workerEvasions:e.safetyMetrics.workerEvasions+1}})),safetyIncidents:[],addSafetyIncident:e=>t(n=>({safetyIncidents:[{...e,id:`incident-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,timestamp:Date.now()},...n.safetyIncidents].slice(0,50)})),clearSafetyIncidents:()=>t({safetyIncidents:[]}),forkliftEmergencyStop:!1,setForkliftEmergencyStop:e=>t({forkliftEmergencyStop:e}),forkliftMetrics:{},updateForkliftMetrics:(e,n)=>t(i=>{const r=Date.now(),a=i.forkliftMetrics[e]||{totalMovingTime:0,totalStoppedTime:0,lastUpdateTime:r,isMoving:!0},s=(r-a.lastUpdateTime)/1e3;return{forkliftMetrics:{...i.forkliftMetrics,[e]:{totalMovingTime:a.totalMovingTime+(a.isMoving?s:0),totalStoppedTime:a.totalStoppedTime+(a.isMoving?0:s),lastUpdateTime:r,isMoving:n}}}}),resetForkliftMetrics:()=>t({forkliftMetrics:{}}),incidentHeatMap:[],recordIncidentLocation:(e,n,i)=>t(r=>{const s=r.incidentHeatMap.find(o=>Math.abs(o.x-e)<3&&Math.abs(o.z-n)<3);return s?{incidentHeatMap:r.incidentHeatMap.map(o=>o===s?{...o,intensity:Math.min(o.intensity+1,10)}:o)}:{incidentHeatMap:[...r.incidentHeatMap,{x:e,z:n,intensity:1,type:i}].slice(-100)}}),clearIncidentHeatMap:()=>t({incidentHeatMap:[]}),showIncidentHeatMap:!1,setShowIncidentHeatMap:e=>t({showIncidentHeatMap:e}),workerSatisfaction:{overallScore:85,breakCount:0,conversationCount:0,averageEnergy:100,productivityBonus:5},updateWorkerSatisfaction:e=>t(n=>{const i={...n.workerSatisfaction,...e},r=i.averageEnergy*.4,a=Math.min(100,i.conversationCount*2)*.3,s=Math.min(100,i.breakCount*5)*.3;return i.overallScore=Math.round(r+a+s),i.productivityBonus=Math.round((i.overallScore-50)/5),{workerSatisfaction:i}}),recordConversation:()=>t(e=>({workerSatisfaction:{...e.workerSatisfaction,conversationCount:e.workerSatisfaction.conversationCount+1}})),recordBreakTaken:()=>t(e=>({workerSatisfaction:{...e.workerSatisfaction,breakCount:e.workerSatisfaction.breakCount+1}})),currentShift:"morning",shiftStartTime:Date.now(),shiftChangeActive:!1,shiftChangePhase:"idle",setShift:e=>t({currentShift:e,shiftStartTime:Date.now()}),triggerShiftChange:()=>t({shiftChangeActive:!0,shiftChangePhase:"leaving"}),completeShiftChange:()=>t(e=>{const n=["morning","afternoon","night"],i=n.indexOf(e.currentShift);return{shiftChangeActive:!1,shiftChangePhase:"idle",currentShift:n[(i+1)%n.length],shiftStartTime:Date.now()}}),emergencyActive:!1,emergencyMachineId:null,emergencyDrillMode:!1,triggerEmergency:e=>t({emergencyActive:!0,emergencyMachineId:e}),resolveEmergency:()=>t({emergencyActive:!1,emergencyMachineId:null,emergencyDrillMode:!1}),startEmergencyDrill:()=>t({emergencyActive:!0,emergencyMachineId:"DRILL",emergencyDrillMode:!0}),endEmergencyDrill:()=>t({emergencyActive:!1,emergencyMachineId:null,emergencyDrillMode:!1}),weather:"clear",setWeather:e=>t({weather:e}),heatMapData:[],recordHeatMapPoint:(e,n)=>t(i=>{const a=i.heatMapData.find(s=>Math.abs(s.x-e)<2&&Math.abs(s.z-n)<2);return a?{heatMapData:i.heatMapData.map(s=>s===a?{...s,intensity:Math.min(s.intensity+.1,10)}:s)}:{heatMapData:[...i.heatMapData,{x:e,z:n,intensity:1}].slice(-500)}}),clearHeatMap:()=>t({heatMapData:[]}),showHeatMap:!1,setShowHeatMap:e=>t({showHeatMap:e}),safetyConfig:{workerDetectionRadius:1.8,forkliftSafetyRadius:3,pathCheckDistance:4,speedZoneSlowdown:.5},setSafetyConfig:e=>t(n=>({safetyConfig:{...n.safetyConfig,...e}})),speedZones:[{id:"zone-1",x:0,z:0,radius:5,name:"Central Area"},{id:"zone-2",x:0,z:28,radius:4,name:"North Loading"},{id:"zone-3",x:0,z:-28,radius:4,name:"South Loading"},{id:"zone-4",x:-28,z:0,radius:3,name:"West Corridor"},{id:"zone-5",x:28,z:0,radius:3,name:"East Corridor"},{id:"zone-6",x:0,z:18,radius:4,name:"Packing Zone"}],addSpeedZone:e=>t(n=>({speedZones:[...n.speedZones,{...e,id:`zone-${Date.now()}`}]})),removeSpeedZone:e=>t(n=>({speedZones:n.speedZones.filter(i=>i.id!==e)})),updateSpeedZone:(e,n)=>t(i=>({speedZones:i.speedZones.map(r=>r.id===e?{...r,...n}:r)})),showZones:!0,setShowZones:e=>t({showZones:e}),showAIPanel:!0,setShowAIPanel:e=>t({showAIPanel:e}),panelMinimized:!1,setPanelMinimized:e=>t({panelMinimized:e}),theme:"dark",toggleTheme:()=>t(e=>({theme:e.theme==="dark"?"light":"dark"})),showShortcuts:!1,setShowShortcuts:e=>t({showShortcuts:e}),legendPosition:{x:-1,y:-1},setLegendPosition:e=>t({legendPosition:e}),resetLegendPosition:()=>t({legendPosition:{x:-1,y:-1}}),graphics:TE.medium,setGraphicsQuality:e=>t({graphics:{...TE[e]}}),setGraphicsSetting:(e,n)=>t(i=>({graphics:{...i.graphics,[e]:n,quality:"high"}})),resetGraphicsToPreset:e=>t({graphics:{...TE[e]}}),productionTarget:{id:"daily-target-1",date:new Date().toISOString().split("T")[0],targetBags:5e3,producedBags:0,targetThroughput:50,actualThroughput:0,status:"in_progress"},setProductionTarget:e=>t({productionTarget:e}),updateProductionProgress:e=>t(n=>({productionTarget:n.productionTarget?{...n.productionTarget,producedBags:e,status:e>=n.productionTarget.targetBags?"completed":"in_progress"}:null})),totalBagsProduced:0,incrementBagsProduced:(e=1)=>t(n=>({totalBagsProduced:n.totalBagsProduced+e,productionTarget:n.productionTarget?{...n.productionTarget,producedBags:n.productionTarget.producedBags+e,status:n.productionTarget.producedBags+e>=n.productionTarget.targetBags?"completed":"in_progress"}:null})),achievements:[{id:"safety-100",name:"Safety Champion",description:"100 days without incident",icon:"Shield",category:"safety",requirement:100,currentValue:73,progress:73},{id:"bags-1m",name:"Million Bags",description:"Pack 1 million bags",icon:"Package",category:"production",requirement:1e6,currentValue:847293,progress:84.7},{id:"quality-99",name:"Quality Master",description:"Maintain 99% quality for a week",icon:"Award",category:"quality",requirement:7,currentValue:5,progress:71.4},{id:"team-player",name:"Team Player",description:"50 worker collaborations",icon:"Users",category:"teamwork",requirement:50,currentValue:50,progress:100,unlockedAt:"2024-11-15T10:30:00Z"},{id:"efficiency-expert",name:"Efficiency Expert",description:"Reach 99% uptime",icon:"TrendingUp",category:"production",requirement:99,currentValue:97.2,progress:98.2}],unlockAchievement:e=>t(n=>({achievements:n.achievements.map(i=>i.id===e?{...i,unlockedAt:new Date().toISOString(),progress:100}:i)})),updateAchievementProgress:(e,n)=>t(i=>({achievements:i.achievements.map(r=>r.id===e?{...r,currentValue:n,progress:Math.min(100,n/r.requirement*100)}:r)})),announcements:[],addAnnouncement:e=>t(n=>({announcements:[{...e,id:`pa-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,timestamp:Date.now()},...n.announcements].slice(0,10)})),dismissAnnouncement:e=>t(n=>({announcements:n.announcements.filter(i=>i.id!==e)})),clearOldAnnouncements:()=>t(e=>{const n=Date.now(),i=e.announcements.filter(r=>n-r.timestamp<r.duration*1e3);return i.length===e.announcements.length?e:{announcements:i}}),replayMode:!1,replayFrames:[],currentReplayIndex:0,setReplayMode:e=>t({replayMode:e}),recordReplayFrame:e=>t(n=>({replayFrames:[...n.replayFrames,e].slice(-600)})),setReplayIndex:e=>t({currentReplayIndex:e}),clearReplayFrames:()=>t({replayFrames:[],currentReplayIndex:0}),workerLeaderboard:[],updateWorkerScore:(e,n,i,r)=>t(a=>{const s=a.workerLeaderboard.findIndex(l=>l.workerId===e),o=[...a.workerLeaderboard];return s>=0?o[s]={workerId:e,name:n,score:i,tasksCompleted:r}:o.push({workerId:e,name:n,score:i,tasksCompleted:r}),o.sort((l,u)=>u.score-l.score),{workerLeaderboard:o.slice(0,10)}}),showGamificationBar:!0,setShowGamificationBar:e=>t({showGamificationBar:e}),showMiniMap:!1,setShowMiniMap:e=>t({showMiniMap:e}),showSecurityCameras:!1,setShowSecurityCameras:e=>t({showSecurityCameras:e}),activeCameraId:null,setActiveCameraId:e=>t({activeCameraId:e}),cameraContainers:new Map,registerCameraContainer:(e,n)=>t(i=>{const r=new Map(i.cameraContainers);return r.set(e,n),{cameraContainers:r}}),unregisterCameraContainer:e=>t(n=>{const i=new Map(n.cameraContainers);return i.delete(e),{cameraContainers:i}})}),{name:"millos-settings",partialize:t=>({productionSpeed:t.productionSpeed,showZones:t.showZones,showAIPanel:t.showAIPanel,showHeatMap:t.showHeatMap,graphics:t.graphics,safetyConfig:t.safetyConfig,speedZones:t.speedZones,weather:t.weather,panelMinimized:t.panelMinimized,theme:t.theme,legendPosition:t.legendPosition,showMiniMap:t.showMiniMap,showSecurityCameras:t.showSecurityCameras,achievements:t.achievements,totalBagsProduced:t.totalBagsProduced})}))),Vue={premium:"#22c55e",standard:"#3b82f6",economy:"#f59e0b",mixed:"#8b5cf6"},Hue={premium:"Premium",standard:"Standard",economy:"Economy",mixed:"Mixed"},$L=["Wheat","Corn","Barley","Oats","Rye"],que=({fillLevel:t,quality:e,grainType:n,radius:i,height:r})=>{const a=t/100*r*.85,s=Vue[e],o=Fe(l=>l.graphics);return c.jsxs("group",{children:[c.jsxs("mesh",{position:[0,-r/2+a/2+.5,0],children:[c.jsx("cylinderGeometry",{args:[i-.15,i-.15,a,o.quality==="low"?16:32]}),o.quality==="low"?c.jsx("meshBasicMaterial",{color:e==="premium"?"#f5d78e":e==="economy"?"#d4a574":"#e8c872",transparent:!0,opacity:.7}):c.jsx("meshStandardMaterial",{color:e==="premium"?"#f5d78e":e==="economy"?"#d4a574":"#e8c872",roughness:.9,transparent:!0,opacity:.7})]}),o.quality!=="low"&&c.jsxs("mesh",{position:[0,-r/2+a+.5,0],children:[c.jsx("torusGeometry",{args:[i-.1,.05,8,32]}),c.jsx("meshStandardMaterial",{color:s,emissive:s,emissiveIntensity:.5,toneMapped:!1})]}),o.quality!=="low"&&c.jsx(Ob,{position:[i+.8,0,0],center:!0,distanceFactor:15,children:c.jsxs("div",{className:"bg-slate-900/90 backdrop-blur px-2 py-1 rounded-lg border border-slate-700 min-w-[70px]",children:[c.jsxs("div",{className:"text-xs font-mono text-white font-bold",children:[t.toFixed(0),"%"]}),c.jsx("div",{className:"text-[9px] text-slate-400",children:n}),c.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[c.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:s}}),c.jsx("span",{className:"text-[8px]",style:{color:s},children:Hue[e]})]})]})})]})},Wue=({hoursRemaining:t,position:e})=>{if(Fe(o=>o.graphics.quality)==="low")return null;const i=t<24,r=t<8,a=r?"#ef4444":i?"#f59e0b":"#22c55e",s=o=>{if(o>=24){const l=Math.floor(o/24),u=Math.floor(o%24);return`${l}d ${u}h`}return`${Math.floor(o)}h`};return c.jsx(Ob,{position:e,center:!0,distanceFactor:12,children:c.jsxs("div",{className:`bg-slate-900/90 backdrop-blur px-2 py-1 rounded border ${r?"border-red-500/50 animate-pulse":i?"border-amber-500/50":"border-slate-700"}`,children:[c.jsx("div",{className:"text-[8px] text-slate-500 uppercase tracking-wider",children:"Maintenance"}),c.jsxs("div",{className:"text-xs font-mono font-bold flex items-center gap-1",style:{color:a},children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),s(t)]})]})})},Xue=(t,e=0)=>z.useMemo(()=>{if(!t)return{roughnessMap:null,normalMap:null};const n=b=>Math.abs(Math.sin(b*12.9898+78.233)*43758.5453)%1,i=document.createElement("canvas");i.width=i.height=256;const r=i.getContext("2d");r.fillStyle="#666",r.fillRect(0,0,256,256),r.fillStyle="#444";for(let b=40;b<256;b+=60)r.fillRect(0,b+e%10,256,3);r.strokeStyle="#555",r.lineWidth=1;for(let b=0;b<30;b++)r.beginPath(),r.moveTo(n(e+b)*256,n(e+b+100)*256),r.lineTo(n(e+b+50)*256,n(e+b+150)*256),r.stroke();for(let b=0;b<15;b++){const M=n(e+b*3)*256,S=n(e+b*3+1)*256,T=5+n(e+b*3+2)*15,A=r.createRadialGradient(M,S,0,M,S,T);A.addColorStop(0,`rgb(${100+n(e+b)*40}, ${100+n(e+b)*40}, ${100+n(e+b)*40})`),A.addColorStop(1,"rgba(102, 102, 102, 0)"),r.fillStyle=A,r.beginPath(),r.arc(M,S,T,0,Math.PI*2),r.fill()}const a=new Ba(i);a.wrapS=a.wrapT=ar,a.repeat.set(1,2);const s=document.createElement("canvas"),o=256;s.width=s.height=o;const l=s.getContext("2d");l.fillStyle="rgb(128, 128, 255)",l.fillRect(0,0,o,o);const u=(b,M,S,T)=>{const A=l.createRadialGradient(b,M,0,b,M,S),E=Math.min(255,128+T*60);A.addColorStop(0,`rgb(128, ${E}, 255)`),A.addColorStop(.7,"rgb(128, 128, 255)"),A.addColorStop(1,`rgb(128, ${Math.max(0,128-T*30)}, 255)`),l.fillStyle=A,l.beginPath(),l.arc(b,M,S,0,Math.PI*2),l.fill()},h=48,p=4;for(let b=0;b<o/h;b++)for(let M=0;M<o/h;M++){const S=24+M*h+(n(e+b*10+M)-.5)*4,T=24+b*h+(n(e+b*10+M+50)-.5)*4;u(S,T,p,1.5)}for(let b=64;b<o;b+=64)l.fillStyle="rgb(128, 160, 255)",l.fillRect(0,b-2,o,2),l.fillStyle="rgb(128, 96, 255)",l.fillRect(0,b,o,2);for(let b=128;b<o;b+=128)l.fillStyle="rgb(160, 128, 255)",l.fillRect(b-2,0,2,o),l.fillStyle="rgb(96, 128, 255)",l.fillRect(b,0,2,o);for(let b=0;b<20;b++){const M=n(e+b*7)*o,S=n(e+b*7+1)*o,T=n(e+b*7+2)*Math.PI,A=20+n(e+b*7+3)*40,E=M+Math.cos(T)*A,j=S+Math.sin(T)*A,R=T+Math.PI/2,C=Math.cos(R)*30,D=Math.sin(R)*30;l.strokeStyle=`rgb(${128+C}, ${128+D}, 240)`,l.lineWidth=1,l.beginPath(),l.moveTo(M,S),l.lineTo(E,j),l.stroke()}for(let b=0;b<5;b++){const M=n(e+b*11)*o,S=n(e+b*11+1)*o,T=8+n(e+b*11+2)*12,A=l.createRadialGradient(M,S,0,M,S,T);A.addColorStop(0,"rgb(128, 80, 255)"),A.addColorStop(.6,"rgb(128, 128, 255)"),A.addColorStop(1,"rgb(128, 150, 255)"),l.fillStyle=A,l.beginPath(),l.arc(M,S,T,0,Math.PI*2),l.fill()}const g=l.getImageData(0,0,o,o);for(let b=0;b<g.data.length;b+=4){const M=(n(e+b)-.5)*6;g.data[b]=Math.max(0,Math.min(255,g.data[b]+M)),g.data[b+1]=Math.max(0,Math.min(255,g.data[b+1]+M))}l.putImageData(g,0,0);const x=new Ba(s);return x.wrapS=x.wrapT=ar,{roughnessMap:a,normalMap:x}},[t,e]),wE=({size:t,yOffset:e=0,enabled:n})=>n?c.jsxs("group",{position:[0,e,0],children:[c.jsxs("mesh",{position:[0,t[1]/2+.003,0],rotation:[-Math.PI/2,0,0],children:[c.jsx("planeGeometry",{args:[t[0]*.95,t[2]*.95]}),c.jsx("meshStandardMaterial",{color:"#e8dcc8",transparent:!0,opacity:.2,roughness:1,depthWrite:!1})]}),c.jsxs("mesh",{position:[0,-t[1]/2+.15,t[2]/2+.003],children:[c.jsx("planeGeometry",{args:[t[0],.3]}),c.jsx("meshStandardMaterial",{color:"#8b7355",transparent:!0,opacity:.15,roughness:1,depthWrite:!1})]})]}):null,$ue=({radius:t,height:e,enabled:n})=>{if(!n)return null;const i=Math.floor(e/3);return c.jsx("group",{children:Array.from({length:i}).map((r,a)=>c.jsxs("mesh",{position:[0,-e/2+(a+1)*(e/(i+1)),0],children:[c.jsx("torusGeometry",{args:[t+.02,.015,8,32]}),c.jsx("meshStandardMaterial",{color:"#94a3b8",metalness:.8,roughness:.3})]},a))})},Yue=({position:t,temperature:e,size:n})=>{const i=z.useRef(null),r=Math.max(0,(e-45)/30),a=z.useMemo(()=>new di({uniforms:{time:{value:0},intensity:{value:r}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        }
      `,fragmentShader:`
        uniform float time;
        uniform float intensity;
        varying vec2 vUv;

        void main() {
          float distort = sin(vUv.y * 20.0 + time * 3.0) * 0.02 * intensity;
          float alpha = (1.0 - vUv.y) * 0.08 * intensity;
          alpha *= sin(vUv.x * 3.14159);
          gl_FragColor = vec4(1.0, 0.95, 0.9, alpha);
        }
      `,transparent:!0,side:ai,depthWrite:!1}),[r]);return It(s=>{a&&(a.uniforms.time.value=s.clock.elapsedTime)}),r<=0?null:c.jsx("mesh",{ref:i,position:[t[0],t[1]+n[1]+1.5,t[2]],material:a,children:c.jsx("planeGeometry",{args:[n[0]*1.5,4]})})},Zue=({position:t,intensity:e})=>{const n=z.useRef(null),i=30,r=z.useMemo(()=>{const s=new Float32Array(i*3);for(let o=0;o<i;o++)s[o*3]=(Math.random()-.5)*.3,s[o*3+1]=Math.random()*2,s[o*3+2]=(Math.random()-.5)*.3;return s},[]),a=z.useMemo(()=>Array.from({length:i},()=>({speed:.5+Math.random()*1,drift:(Math.random()-.5)*.02})),[]);return It((s,o)=>{if(!n.current||e<=0)return;const l=n.current.geometry.attributes.position.array;for(let u=0;u<i;u++)l[u*3+1]+=a[u].speed*o*e,l[u*3]+=a[u].drift,l[u*3+2]+=a[u].drift,l[u*3+1]>2.5&&(l[u*3+1]=0,l[u*3]=(Math.random()-.5)*.3,l[u*3+2]=(Math.random()-.5)*.3);n.current.geometry.attributes.position.needsUpdate=!0}),e<=0?null:c.jsxs("points",{ref:n,position:t,children:[c.jsx("bufferGeometry",{children:c.jsx("bufferAttribute",{attach:"attributes-position",count:i,array:r,itemSize:3})}),c.jsx("pointsMaterial",{size:.15,color:"#e2e8f0",transparent:!0,opacity:.4*e,sizeAttenuation:!0})]})},AE=({position:t,rotation:e=[0,0,0],status:n,enabled:i})=>{const r=z.useRef(0),[,a]=z.useState(0);It(u=>{if(!i)return;const h=u.clock.elapsedTime;let p=0;n==="running"?p=Math.floor(h*2)%4:n==="warning"?p=Math.sin(h*6)>0?1:0:n==="critical"&&(p=Math.sin(h*10)>0?2:3),p!==r.current&&(r.current=p,a(g=>g+1))});const s=r.current;if(!i)return null;const l={running:["#22c55e","#22c55e","#3b82f6","#3b82f6"],idle:["#64748b","#64748b","#64748b","#64748b"],warning:["#f59e0b","#1e293b","#f59e0b","#1e293b"],critical:["#ef4444","#ef4444","#1e293b","#1e293b"]}[n];return c.jsxs("group",{position:t,rotation:e,children:[c.jsxs("mesh",{children:[c.jsx("boxGeometry",{args:[.4,.3,.05]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.8,roughness:.3})]}),c.jsxs("mesh",{position:[0,.02,.026],children:[c.jsx("planeGeometry",{args:[.25,.12]}),c.jsx("meshStandardMaterial",{color:n==="critical"?"#450a0a":n==="warning"?"#451a03":"#0f172a",emissive:n==="critical"?"#ef4444":n==="warning"?"#f59e0b":"#3b82f6",emissiveIntensity:.3})]}),[[-.12,-.08],[-.04,-.08],[.04,-.08],[.12,-.08]].map(([u,h],p)=>c.jsxs("mesh",{position:[u,h,.026],children:[c.jsx("circleGeometry",{args:[.02,8]}),c.jsx("meshStandardMaterial",{color:l[(s+p)%4],emissive:l[(s+p)%4],emissiveIntensity:l[(s+p)%4]!=="#1e293b"&&l[(s+p)%4]!=="#64748b"?.8:0,toneMapped:!1})]},p)),[[.15,.08],[.15,0]].map(([u,h],p)=>c.jsxs("mesh",{position:[u,h,.03],children:[c.jsx("cylinderGeometry",{args:[.015,.015,.02,8]}),c.jsx("meshStandardMaterial",{color:p===0?"#22c55e":"#ef4444",roughness:.4})]},p))]})},YL=({position:t,radius:e,length:n,rotation:i=[0,0,Math.PI/2],enabled:r,rpm:a=0})=>{const s=z.useRef(null),o=z.useMemo(()=>{if(!r)return null;const l=256,u=document.createElement("canvas");u.width=l,u.height=l;const h=u.getContext("2d");h.fillStyle="rgb(128, 128, 255)",h.fillRect(0,0,l,l);for(let g=0;g<l;g+=2){const x=20+Math.random()*20;h.strokeStyle=`rgb(128, ${128+x}, 255)`,h.lineWidth=1,h.beginPath(),h.moveTo(0,g),h.lineTo(l,g+(Math.random()-.5)*2),h.stroke()}h.strokeStyle="rgb(150, 128, 240)",h.lineWidth=1;for(let g=0;g<10;g++){h.beginPath();const x=Math.random()*l;h.moveTo(x,0),h.lineTo(x+(Math.random()-.5)*20,l),h.stroke()}const p=new Ba(u);return p.wrapS=ar,p.wrapT=ar,p.repeat.set(4,1),p},[r]);return It((l,u)=>{s.current&&a>0&&(s.current.rotation.x+=a/60*Math.PI*2*u)}),c.jsxs("mesh",{ref:s,position:t,rotation:i,children:[c.jsx("cylinderGeometry",{args:[e,e,n,32]}),c.jsx("meshStandardMaterial",{color:"#94a3b8",metalness:.95,roughness:r?.15:.3,normalMap:o,normalScale:r?new Ye(.5,.1):void 0})]})},Kue=({position:t,active:e})=>{const n=z.useRef(null),i=20,r=z.useRef(0),a=z.useMemo(()=>new Float32Array(i*3),[]),s=z.useMemo(()=>Array.from({length:i},()=>({x:0,y:0,z:0,life:0})),[]);return It((o,l)=>{if(!n.current||!e)return;const u=n.current.geometry.attributes.position.array;if(r.current-=l,r.current<=0&&Math.random()>.7){const h=Math.floor(Math.random()*i);u[h*3]=0,u[h*3+1]=0,u[h*3+2]=0,s[h]={x:(Math.random()-.5)*3,y:Math.random()*2+1,z:(Math.random()-.5)*3,life:1},r.current=.05+Math.random()*.1}for(let h=0;h<i;h++)s[h].life>0?(u[h*3]+=s[h].x*l,u[h*3+1]+=s[h].y*l,u[h*3+2]+=s[h].z*l,s[h].y-=5*l,s[h].life-=l*2):u[h*3+1]=-100;n.current.geometry.attributes.position.needsUpdate=!0}),e?c.jsxs("points",{ref:n,position:t,children:[c.jsx("bufferGeometry",{children:c.jsx("bufferAttribute",{attach:"attributes-position",count:i,array:a,itemSize:3})}),c.jsx("pointsMaterial",{size:.08,color:"#fcd34d",transparent:!0,opacity:.9,sizeAttenuation:!0})]}):null},Que=({position:t,speed:e,size:n=.4})=>{const i=z.useRef(null);return It((r,a)=>{i.current&&e>0&&(i.current.rotation.z+=a*e*.5)}),c.jsxs("group",{position:t,children:[c.jsxs("mesh",{children:[c.jsx("cylinderGeometry",{args:[n+.05,n+.05,.1,16]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.8,roughness:.3})]}),c.jsx("group",{ref:i,position:[0,.06,0],children:[0,1,2,3].map(r=>c.jsxs("mesh",{rotation:[0,0,r*Math.PI/2],position:[0,0,0],children:[c.jsx("boxGeometry",{args:[n*1.8,.02,n*.3]}),c.jsx("meshStandardMaterial",{color:"#64748b",metalness:.6,roughness:.4})]},r))})]})},ZL=({position:t,value:e,maxValue:n})=>{const i=z.useRef(null),r=z.useRef(0);return It(()=>{if(!i.current)return;const a=Math.min(e/n,1);r.current=(-.75+a*1.5)*Math.PI,i.current.rotation.z=ba.lerp(i.current.rotation.z,r.current,.05)}),c.jsxs("group",{position:t,children:[c.jsxs("mesh",{children:[c.jsx("circleGeometry",{args:[.12,32]}),c.jsx("meshBasicMaterial",{color:"#1e293b"})]}),c.jsxs("mesh",{position:[0,0,.001],children:[c.jsx("ringGeometry",{args:[.08,.1,32,1,-2.35,4.7]}),c.jsx("meshBasicMaterial",{color:"#22c55e"})]}),c.jsxs("mesh",{position:[0,0,.001],children:[c.jsx("ringGeometry",{args:[.08,.1,32,1,1.57,.78]}),c.jsx("meshBasicMaterial",{color:"#ef4444"})]}),c.jsxs("mesh",{ref:i,position:[0,0,.002],children:[c.jsx("boxGeometry",{args:[.015,.08,.005]}),c.jsx("meshBasicMaterial",{color:"#f59e0b"})]}),c.jsxs("mesh",{position:[0,0,.003],children:[c.jsx("circleGeometry",{args:[.02,16]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.9,roughness:.2})]})]})},Jue=({machines:t,onSelect:e})=>c.jsx("group",{children:t.map(n=>c.jsx(efe,{data:n,onClick:()=>e(n)},n.id))}),efe=({data:t,onClick:e})=>{const{type:n,position:i,size:r,rotation:a,status:s}=t,o=z.useRef(null),[l,u]=z.useState(!1),h=Fe(C=>C.graphics),p=h.enableMachineVibration,g=h.enableProceduralTextures,x=h.enableWeathering,b=h.enableControlPanels,M=h.enableAnisotropicReflections,S=z.useMemo(()=>{let C=0;for(let D=0;D<t.id.length;D++)C=(C<<5)-C+t.id.charCodeAt(D),C|=0;return Math.abs(C)},[t.id]),{roughnessMap:T,normalMap:A}=Xue(g,S);z.useEffect(()=>{if(s!=="running"){wt.stopMachineSound(t.id);return}switch(n){case Wn.ROLLER_MILL:wt.playMillSound(t.id,t.metrics.rpm);break;case Wn.PLANSIFTER:wt.playSifterSound(t.id,t.metrics.rpm);break;case Wn.PACKER:wt.playPackerSound(t.id);break}return()=>{wt.stopMachineSound(t.id)}},[t.id,n,s,t.metrics.rpm]),It(C=>{if(s==="running"&&o.current&&p){const D=C.clock.elapsedTime,U=t.metrics.rpm||0,I=Math.min(U/1500,1);switch(n){case Wn.PLANSIFTER:{const L=.04+I*.03,F=12+I*8;o.current.position.x=i[0]+Math.cos(D*F)*L,o.current.position.z=i[2]+Math.sin(D*F)*L,o.current.rotation.x=Math.sin(D*F*.5)*.003,o.current.rotation.z=Math.cos(D*F*.5)*.003;break}case Wn.ROLLER_MILL:{const L=.005+I*.015,F=30+I*30;o.current.position.y=i[1]+Math.sin(D*F)*L,o.current.position.x=i[0]+Math.sin(D*F*2.3)*L*.3;break}case Wn.PACKER:{const L=D*3,F=Math.sin(L)>.7?1:0;o.current.position.y=i[1]+F*.02,o.current.position.x=i[0]+Math.sin(D*15)*.003;break}case Wn.SILO:{const L=t.metrics.load||0;if(L>50){const F=.002*(L/100);o.current.position.x=i[0]+Math.sin(D*5)*F,o.current.position.z=i[2]+Math.cos(D*4)*F}break}}}else o.current&&!p&&(o.current.position.set(i[0],i[1],i[2]),o.current.rotation.set(0,a,0));s==="running"&&(wt.registerSoundPosition(t.id,i[0],i[1]+r[1]/2,i[2]),wt.updateMachineSpatialVolume(t.id))});const E=s==="running"?"#22c55e":s==="warning"?"#f59e0b":s==="critical"?"#ef4444":"#9ca3af",j={emissive:l?"#3b82f6":"#000000",emissiveIntensity:l?.3:0},R=()=>{switch(n){case Wn.SILO:{const C=t.fillLevel??50+Math.sin(S)*30,D=t.grainQuality??["premium","standard","economy","mixed"][S%4],U=t.grainType??$L[S%$L.length],I=t.maintenanceCountdown??48+S%200;return c.jsxs("group",{position:[0,r[1]/2,0],children:[c.jsxs("mesh",{castShadow:!0,receiveShadow:!0,children:[c.jsx("cylinderGeometry",{args:[r[0]/2,r[0]/2,r[1],32]}),c.jsx("meshStandardMaterial",{color:"#cbd5e1",metalness:.7,roughness:.2,roughnessMap:T,normalMap:A,normalScale:A?new Ye(.3,.3):void 0,...j})]}),c.jsx(que,{fillLevel:C,quality:D,grainType:U,radius:r[0]/2,height:r[1]}),c.jsx($ue,{radius:r[0]/2,height:r[1],enabled:g}),c.jsxs("mesh",{position:[0,r[1]/2+1,0],castShadow:!0,children:[c.jsx("coneGeometry",{args:[r[0]/2,2,32]}),c.jsx("meshStandardMaterial",{color:"#94a3b8",metalness:.7,roughness:.2,...j})]}),x&&c.jsxs("mesh",{position:[0,r[1]/2+2.01,0],rotation:[-Math.PI/2,0,0],children:[c.jsx("circleGeometry",{args:[r[0]/2*.6,16]}),c.jsx("meshStandardMaterial",{color:"#e8dcc8",transparent:!0,opacity:.25,roughness:1,depthWrite:!1})]}),c.jsxs("mesh",{position:[0,-r[1]/2-1,0],castShadow:!0,children:[c.jsx("coneGeometry",{args:[r[0]/2,2,32]}),c.jsx("meshStandardMaterial",{color:"#94a3b8",metalness:.7,roughness:.2,...j})]}),[1,-1].map(L=>[1,-1].map(F=>c.jsxs("mesh",{position:[L*r[0]/3,-r[1]/2-3,F*r[0]/3],children:[c.jsx("cylinderGeometry",{args:[.15,.2,4]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.8,roughness:.3})]},`${L}-${F}`))),c.jsxs("mesh",{position:[r[0]/2+.2,0,0],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.1,r[1],.4]}),c.jsx("meshStandardMaterial",{color:"#475569",metalness:.8,roughness:.3})]}),h.quality!=="low"&&c.jsx(Wue,{hoursRemaining:I,position:[-(r[0]/2+1),r[1]/2-1,0]})]})}case Wn.ROLLER_MILL:return c.jsxs("group",{position:[0,r[1]/2,0],children:[c.jsxs("mesh",{castShadow:!0,receiveShadow:!0,children:[c.jsx("boxGeometry",{args:[r[0],r[1],r[2]]}),c.jsx("meshPhysicalMaterial",{color:"#3b82f6",metalness:.3,roughness:.4,roughnessMap:T,clearcoat:.8,clearcoatRoughness:.2,...j})]}),c.jsx(wE,{size:r,enabled:x}),c.jsxs("mesh",{position:[0,r[1]/2+.5,0],children:[c.jsx("coneGeometry",{args:[1.2,1.2,4],rotation:[Math.PI,0,0]}),c.jsx("meshStandardMaterial",{color:"#bfdbfe",metalness:.6,roughness:.3})]}),!b&&c.jsxs(c.Fragment,{children:[c.jsxs("mesh",{position:[r[0]/2+.1,.5,0],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.2,1,.8]}),c.jsx("meshStandardMaterial",{color:"#1e293b"})]}),c.jsxs("mesh",{position:[r[0]/2+.15,.5,0],children:[c.jsx("planeGeometry",{args:[.1,.5]}),c.jsx("meshBasicMaterial",{color:"#22c55e"})]})]}),c.jsx(AE,{position:[r[0]/2+.13,.5,0],rotation:[0,-Math.PI/2,0],status:s,enabled:b}),c.jsx(ZL,{position:[r[0]/2+.16,.8,.2],value:t.metrics.rpm,maxValue:1600}),c.jsx(ZL,{position:[r[0]/2+.16,.8,-.2],value:t.metrics.temperature,maxValue:80}),M&&c.jsxs(c.Fragment,{children:[c.jsx(YL,{position:[0,-r[1]/4,r[2]/2-.3],radius:.3,length:r[0]-.4,enabled:M,rpm:s==="running"?t.metrics.rpm*.8:0}),c.jsx(YL,{position:[0,-r[1]/4-.4,r[2]/2-.3],radius:.25,length:r[0]-.4,enabled:M,rpm:s==="running"?-t.metrics.rpm:0})]}),c.jsx(Que,{position:[-r[0]/2-.05,0,0],speed:s==="running"?t.metrics.rpm/100:0,size:.35}),h.quality!=="low"&&s==="running"&&t.metrics.temperature>50&&c.jsx(Zue,{position:[0,r[1]/2+1,r[2]/2],intensity:(t.metrics.temperature-50)/25}),h.quality!=="low"&&s==="running"&&t.metrics.rpm>1400&&c.jsx(Kue,{position:[0,-r[1]/2+.5,0],active:!0})]});case Wn.PLANSIFTER:return c.jsxs("group",{position:[0,r[1]/2,0],children:[[[-1,-1],[-1,1],[1,-1],[1,1]].map(([C,D],U)=>c.jsxs("mesh",{position:[C*(r[0]/2-.3),5,D*(r[2]/2-.3)],children:[c.jsx("cylinderGeometry",{args:[.03,.03,10]}),c.jsx("meshStandardMaterial",{color:"#1f2937",metalness:.9,roughness:.1})]},U)),c.jsxs("mesh",{castShadow:!0,receiveShadow:!0,children:[c.jsx("boxGeometry",{args:[r[0],r[1],r[2]]}),c.jsx("meshPhysicalMaterial",{color:"#f8fafc",metalness:.1,roughness:.15,roughnessMap:T,clearcoat:1,clearcoatRoughness:.1,...j})]}),c.jsx(wE,{size:r,enabled:x}),[-1,1].map(C=>c.jsxs("mesh",{position:[C*(r[0]/2+.05),0,0],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.1,r[1]*.8,r[2]*.6]}),c.jsx("meshStandardMaterial",{color:"#e2e8f0"})]},C)),c.jsx(AE,{position:[0,-r[1]/2+.3,r[2]/2+.05],rotation:[0,0,0],status:s,enabled:b})]});case Wn.PACKER:return c.jsxs("group",{position:[0,r[1]/2,0],children:[c.jsxs("mesh",{castShadow:!0,receiveShadow:!0,children:[c.jsx("boxGeometry",{args:[r[0],r[1],r[2]]}),c.jsx("meshPhysicalMaterial",{color:"#f59e0b",metalness:.25,roughness:.35,roughnessMap:T,clearcoat:.7,clearcoatRoughness:.25,...j})]}),c.jsx(wE,{size:r,enabled:x}),c.jsxs("mesh",{position:[0,-r[1]/3,r[2]/2+.5],rotation:[.3,0,0],castShadow:!0,children:[c.jsx("boxGeometry",{args:[1.8,.3,1.2]}),c.jsx("meshStandardMaterial",{color:"#9ca3af",metalness:.6,roughness:.3})]}),!b&&c.jsxs(c.Fragment,{children:[c.jsxs("mesh",{position:[-r[0]/2-.1,.5,0],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.2,1.5,1]}),c.jsx("meshStandardMaterial",{color:"#1e293b"})]}),c.jsxs("mesh",{position:[-r[0]/2-.15,.5,0],children:[c.jsx("planeGeometry",{args:[.1,.8]}),c.jsx("meshBasicMaterial",{color:"#3b82f6"})]})]}),c.jsx(AE,{position:[-r[0]/2-.13,.5,0],rotation:[0,Math.PI/2,0],status:s,enabled:b})]});default:return null}};return c.jsxs("group",{ref:o,position:new se(...i),rotation:[0,a,0],onPointerOver:C=>{C.stopPropagation(),u(!0),document.body.style.cursor="pointer"},onPointerOut:()=>{u(!1),document.body.style.cursor="auto"},onClick:C=>{C.stopPropagation(),wt.playClick(),e()},children:[R(),s==="running"&&(n===Wn.ROLLER_MILL||n===Wn.PACKER)&&c.jsx(Yue,{position:i,temperature:t.metrics.temperature,size:r}),c.jsxs("mesh",{position:[0,r[1]+1.5,0],children:[c.jsx("sphereGeometry",{args:[.3]}),c.jsx("meshStandardMaterial",{color:E,emissive:E,emissiveIntensity:3,toneMapped:!1})]}),c.jsxs("mesh",{position:[0,r[1]+.75,0],children:[c.jsx("cylinderGeometry",{args:[.05,.05,1.5]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.8,roughness:.3})]}),l&&c.jsx(Ob,{position:[0,r[1]+2.5,0],center:!0,distanceFactor:12,children:c.jsxs("div",{className:"bg-slate-900/95 backdrop-blur-xl border border-cyan-500/30 px-4 py-2 rounded-lg shadow-2xl pointer-events-none min-w-[180px]",children:[c.jsx("div",{className:"font-bold text-white text-sm",children:t.name}),c.jsx("div",{className:"text-xs text-cyan-400",children:t.type.replace("_"," ")}),c.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[c.jsx("span",{className:"w-2 h-2 rounded-full animate-pulse",style:{backgroundColor:E}}),c.jsx("span",{className:"text-xs text-slate-400 capitalize",children:s})]}),c.jsx("div",{className:"text-[10px] text-slate-500 mt-1",children:"Click to inspect"})]})})]})},tfe=t=>{const n=new Date().toISOString().slice(0,10).replace(/-/g,""),i=String(t+1).padStart(3,"0");return`${n}-${i}`},nfe={premium:"#22c55e",standard:"#3b82f6",economy:"#f59e0b",mixed:"#8b5cf6"},ife=()=>z.useMemo(()=>{const e=document.createElement("canvas");e.width=256,e.height=256;const n=e.getContext("2d");n.fillStyle="#1f2937",n.fillRect(0,0,256,256);for(let a=0;a<256;a+=16)n.fillStyle="#374151",n.fillRect(0,a,256,3),n.fillStyle="#111827",n.fillRect(0,a+12,256,2);const i=n.getImageData(0,0,256,256);for(let a=0;a<i.data.length;a+=4){const s=(Math.random()-.5)*10;i.data[a]=Math.max(0,Math.min(255,i.data[a]+s)),i.data[a+1]=Math.max(0,Math.min(255,i.data[a+1]+s)),i.data[a+2]=Math.max(0,Math.min(255,i.data[a+2]+s))}n.putImageData(i,0,0),n.fillStyle="#3b82f6",n.fillRect(256/2-2,0,4,256);const r=new Ba(e);return r.wrapS=ar,r.wrapT=ar,r.repeat.set(10,1),r},[]),rfe=()=>z.useMemo(()=>{const e=document.createElement("canvas");e.width=64,e.height=64;const n=e.getContext("2d");n.fillStyle="#94a3b8",n.fillRect(0,0,64,64);for(let r=0;r<64;r+=8)n.fillStyle="#64748b",n.fillRect(0,r,64,1),n.fillStyle="#cbd5e1",n.fillRect(0,r+1,64,1);const i=new Ba(e);return i.wrapS=ar,i.wrapT=ar,i.repeat.set(1,4),i},[]),afe=[{quality:"premium",weight:.3},{quality:"standard",weight:.5},{quality:"economy",weight:.15},{quality:"mixed",weight:.05}],sfe=()=>{const t=Math.random();let e=0;for(const{quality:n,weight:i}of afe)if(e+=i,t<e)return n;return"standard"},ofe=({productionSpeed:t})=>{const e=Fe(r=>r.graphics.quality);Fe(r=>r.incrementBagsProduced);const n=e==="low"?15:e==="medium"?30:60,i=z.useMemo(()=>{const r=[];for(let a=0;a<n;a++)r.push({id:`bag-${a}`,position:[(Math.random()-.5)*50,1.1,19],speed:4+Math.random()*2,rotation:(Math.random()-.5)*.1,batchNumber:tfe(a),quality:sfe(),weight:25+Math.floor(Math.random()*6)});return r},[n]);return c.jsxs("group",{children:[c.jsx(ufe,{position:[0,.5,19],length:55,productionSpeed:t}),c.jsx(lfe,{position:[0,1.3,19],length:55}),[-25,-15,-5,5,15,25].map((r,a)=>c.jsx(cfe,{position:[r,0,19]},a)),i.map(r=>c.jsx(hfe,{data:r,speedMulti:t},r.id)),c.jsx(ffe,{position:[0,.5,16],productionSpeed:t}),c.jsx(KL,{position:[-27.5,.5,19]}),c.jsx(KL,{position:[27.5,.5,19]})]})},lfe=({position:t,length:e})=>c.jsxs("group",{position:t,children:[c.jsxs("mesh",{position:[0,0,-1],castShadow:!0,children:[c.jsx("boxGeometry",{args:[e,.1,.15]}),c.jsx("meshStandardMaterial",{color:"#475569",metalness:.8,roughness:.3})]}),c.jsxs("mesh",{position:[0,0,1],castShadow:!0,children:[c.jsx("boxGeometry",{args:[e,.1,.15]}),c.jsx("meshStandardMaterial",{color:"#475569",metalness:.8,roughness:.3})]}),Array.from({length:Math.floor(e/5)}).map((n,i)=>{const r=-e/2+2.5+i*5;return c.jsxs("group",{position:[r,-.15,0],children:[c.jsxs("mesh",{position:[0,0,-.9],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.08,.25,.08]}),c.jsx("meshStandardMaterial",{color:"#334155",metalness:.7,roughness:.4})]}),c.jsxs("mesh",{position:[0,0,.9],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.08,.25,.08]}),c.jsx("meshStandardMaterial",{color:"#334155",metalness:.7,roughness:.4})]})]},i)})]}),cfe=({position:t})=>c.jsxs("group",{position:t,children:[c.jsxs("mesh",{position:[0,.25,-.5],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.3,.5,.15]}),c.jsx("meshStandardMaterial",{color:"#1f2937",metalness:.6,roughness:.4})]}),c.jsxs("mesh",{position:[0,.25,.5],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.3,.5,.15]}),c.jsx("meshStandardMaterial",{color:"#1f2937",metalness:.6,roughness:.4})]}),c.jsxs("mesh",{position:[0,.25,0],rotation:[0,0,.3],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.08,.08,.9]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.5,roughness:.5})]}),c.jsxs("mesh",{position:[0,.02,-.5],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.4,.04,.25]}),c.jsx("meshStandardMaterial",{color:"#0f172a",metalness:.4,roughness:.6})]}),c.jsxs("mesh",{position:[0,.02,.5],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.4,.04,.25]}),c.jsx("meshStandardMaterial",{color:"#0f172a",metalness:.4,roughness:.6})]})]}),KL=({position:t})=>{const e=z.useRef(null);return c.jsxs("group",{position:t,children:[c.jsxs("mesh",{castShadow:!0,children:[c.jsx("boxGeometry",{args:[.6,.4,2.4]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.7,roughness:.3})]}),c.jsxs("mesh",{position:[0,.05,0],rotation:[Math.PI/2,0,0],castShadow:!0,children:[c.jsx("cylinderGeometry",{args:[.2,.2,2,16]}),c.jsx("meshStandardMaterial",{color:"#64748b",metalness:.8,roughness:.2})]}),c.jsxs("mesh",{ref:e,position:[.35,0,-1],rotation:[0,0,Math.PI/2],castShadow:!0,children:[c.jsx("cylinderGeometry",{args:[.05,.05,.3,8]}),c.jsx("meshStandardMaterial",{color:"#fbbf24",metalness:.9,roughness:.1})]}),c.jsxs("mesh",{position:[.35,0,1],rotation:[0,0,Math.PI/2],castShadow:!0,children:[c.jsx("cylinderGeometry",{args:[.05,.05,.3,8]}),c.jsx("meshStandardMaterial",{color:"#fbbf24",metalness:.9,roughness:.1})]}),c.jsxs("mesh",{position:[.52,0,-1],rotation:[0,0,Math.PI/2],castShadow:!0,children:[c.jsx("cylinderGeometry",{args:[.08,.08,.04,6]}),c.jsx("meshStandardMaterial",{color:"#fbbf24",metalness:.9,roughness:.1})]}),c.jsxs("mesh",{position:[.52,0,1],rotation:[0,0,Math.PI/2],castShadow:!0,children:[c.jsx("cylinderGeometry",{args:[.08,.08,.04,6]}),c.jsx("meshStandardMaterial",{color:"#fbbf24",metalness:.9,roughness:.1})]})]})},ufe=({position:t,length:e,productionSpeed:n})=>{const i=z.useRef(null),r=z.useRef(null),a=`conveyor-main-${t[0]}-${t[2]}`,s=ife(),o=Fe(u=>u.graphics);z.useEffect(()=>(wt.startConveyorSound(a,t[0],t[1],t[2]),()=>{wt.stopConveyorSound(a)}),[a,t]),It((u,h)=>{if(o.quality==="low")return;const p=Math.min(h,.1);i.current&&s&&(s.offset.x=(s.offset.x+p*n*.3)%1),r.current&&(r.current.rotation.z=(r.current.rotation.z+p*n*3)%(Math.PI*2)),wt.updateConveyorSpatialVolume(a)});const l=o.enableProceduralTextures;return c.jsxs("group",{position:t,children:[c.jsxs("mesh",{ref:i,receiveShadow:!0,position:[0,.3,0],children:[c.jsx("boxGeometry",{args:[e,.1,2]}),c.jsx("meshStandardMaterial",{map:s,roughness:.8})]}),c.jsxs("mesh",{position:[0,0,0],children:[c.jsx("boxGeometry",{args:[e,.5,2.2]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.6,roughness:.4})]}),l&&Array.from({length:Math.floor(e/4)}).map((u,h)=>{const p=-e/2+2+h*4;return c.jsxs("group",{ref:h===0?r:void 0,position:[p,.15,0],children:[c.jsxs("mesh",{rotation:[Math.PI/2,0,0],castShadow:!0,children:[c.jsx("cylinderGeometry",{args:[.12,.12,1.9,12]}),c.jsx("meshStandardMaterial",{color:"#64748b",metalness:.85,roughness:.15})]}),c.jsxs("mesh",{position:[0,0,-1],rotation:[Math.PI/2,0,0],castShadow:!0,children:[c.jsx("cylinderGeometry",{args:[.15,.15,.05,12]}),c.jsx("meshStandardMaterial",{color:"#475569",metalness:.8,roughness:.2})]}),c.jsxs("mesh",{position:[0,0,1],rotation:[Math.PI/2,0,0],castShadow:!0,children:[c.jsx("cylinderGeometry",{args:[.15,.15,.05,12]}),c.jsx("meshStandardMaterial",{color:"#475569",metalness:.8,roughness:.2})]}),c.jsxs("mesh",{position:[0,0,-1.05],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.15,.15,.08]}),c.jsx("meshStandardMaterial",{color:"#334155",metalness:.7,roughness:.3})]}),c.jsxs("mesh",{position:[0,0,1.05],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.15,.15,.08]}),c.jsx("meshStandardMaterial",{color:"#334155",metalness:.7,roughness:.3})]})]},h)}),l&&c.jsxs("group",{position:[-e/2+1,-.1,1.3],children:[c.jsxs("mesh",{castShadow:!0,children:[c.jsx("boxGeometry",{args:[.8,.6,.5]}),c.jsx("meshStandardMaterial",{color:"#1e3a5f",metalness:.7,roughness:.3})]}),c.jsxs("mesh",{position:[0,.1,-.3],rotation:[Math.PI/2,0,0],castShadow:!0,children:[c.jsx("cylinderGeometry",{args:[.08,.08,.3,8]}),c.jsx("meshStandardMaterial",{color:"#64748b",metalness:.9,roughness:.1})]}),c.jsxs("mesh",{position:[0,0,.26],children:[c.jsx("planeGeometry",{args:[.5,.35]}),c.jsx("meshStandardMaterial",{color:"#0f172a",metalness:.5,roughness:.5})]}),c.jsxs("mesh",{position:[.41,.1,0],rotation:[0,Math.PI/2,0],children:[c.jsx("planeGeometry",{args:[.2,.15]}),c.jsx("meshBasicMaterial",{color:"#fbbf24"})]})]})]})},ffe=({position:t,productionSpeed:e})=>{const n=z.useRef(null),i=`conveyor-roller-${t[0]}-${t[2]}`,r=rfe(),a=Fe(o=>o.graphics);z.useEffect(()=>(wt.startConveyorSound(i,t[0],t[1],t[2]),()=>{wt.stopConveyorSound(i)}),[i,t]),It((o,l)=>{if(a.quality==="low")return;const u=Math.min(l,.1);n.current&&n.current.children.forEach((h,p)=>{const g=1+Math.sin(p*.5)*.1;h.rotation.z=(h.rotation.z+u*e*5*g)%(Math.PI*2)}),wt.updateConveyorSpatialVolume(i)});const s=a.enableProceduralTextures;return c.jsxs("group",{position:t,children:[c.jsxs("mesh",{position:[0,-.05,0],children:[c.jsx("boxGeometry",{args:[30,.2,2.5]}),c.jsx("meshStandardMaterial",{color:"#475569",metalness:.7,roughness:.3})]}),c.jsxs("mesh",{position:[0,.2,-1.2],castShadow:!0,children:[c.jsx("boxGeometry",{args:[30,.35,.1]}),c.jsx("meshStandardMaterial",{color:"#334155",metalness:.75,roughness:.25})]}),c.jsxs("mesh",{position:[0,.2,1.2],castShadow:!0,children:[c.jsx("boxGeometry",{args:[30,.35,.1]}),c.jsx("meshStandardMaterial",{color:"#334155",metalness:.75,roughness:.25})]}),c.jsx("group",{ref:n,children:Array.from({length:25}).map((o,l)=>c.jsxs("group",{position:[-12+l*1,.25,0],children:[c.jsxs("mesh",{rotation:[Math.PI/2,0,0],castShadow:!0,children:[c.jsx("cylinderGeometry",{args:[.15,.15,2,16]}),c.jsx("meshStandardMaterial",{map:s?r:null,color:s?"#ffffff":"#94a3b8",metalness:.8,roughness:.2})]}),s&&c.jsxs(c.Fragment,{children:[c.jsxs("mesh",{position:[0,0,-1.05],rotation:[Math.PI/2,0,0],castShadow:!0,children:[c.jsx("cylinderGeometry",{args:[.05,.05,.1,8]}),c.jsx("meshStandardMaterial",{color:"#475569",metalness:.9,roughness:.1})]}),c.jsxs("mesh",{position:[0,0,1.05],rotation:[Math.PI/2,0,0],castShadow:!0,children:[c.jsx("cylinderGeometry",{args:[.05,.05,.1,8]}),c.jsx("meshStandardMaterial",{color:"#475569",metalness:.9,roughness:.1})]})]})]},l))}),c.jsxs("mesh",{position:[-14.5,.3,0],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.3,.4,2.6]}),c.jsx("meshStandardMaterial",{color:"#ef4444",metalness:.5,roughness:.5})]}),c.jsxs("mesh",{position:[14.5,.3,0],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.3,.4,2.6]}),c.jsx("meshStandardMaterial",{color:"#ef4444",metalness:.5,roughness:.5})]}),[-10,0,10].map((o,l)=>c.jsxs("group",{position:[o,-.3,0],children:[c.jsxs("mesh",{position:[0,0,-1],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.2,.6,.2]}),c.jsx("meshStandardMaterial",{color:"#1f2937",metalness:.6,roughness:.4})]}),c.jsxs("mesh",{position:[0,0,1],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.2,.6,.2]}),c.jsx("meshStandardMaterial",{color:"#1f2937",metalness:.6,roughness:.4})]})]},l))]})},EE=28,hfe=De.memo(({data:t,speedMulti:e})=>{const n=z.useRef(null),[i,r]=z.useState(!1),a=Fe(M=>M.graphics),s=Fe(M=>M.incrementBagsProduced),o=z.useRef(!1),l=z.useRef(t.position[0]);It((M,S)=>{if(!n.current)return;const T=Math.min(S,.1);if(l.current+=t.speed*e*T,l.current>EE){const A=l.current-EE;l.current=-EE+A,o.current||(s(1),o.current=!0)}else o.current=!1;n.current.position.x=l.current});const u=a.enableProceduralTextures,h=nfe[t.quality],p=t.position[0],g=t.position[1],x=t.position[2],b=z.useMemo(()=>[p,g,x],[p,g,x]);return c.jsxs("group",{ref:n,position:b,rotation:[0,t.rotation,0],onPointerOver:()=>r(!0),onPointerOut:()=>r(!1),children:[c.jsxs("mesh",{castShadow:!0,position:[0,.25,0],children:[c.jsx("boxGeometry",{args:[.6,.5,.9]}),c.jsx("meshStandardMaterial",{color:i?"#fff7ed":"#fef3c7",roughness:.9,emissive:i?"#fbbf24":"#000000",emissiveIntensity:i?.1:0})]}),c.jsxs("mesh",{position:[0,.25,.46],children:[c.jsx("planeGeometry",{args:[.5,.3]}),c.jsx("meshBasicMaterial",{color:h})]}),u&&c.jsx(Sa,{position:[0,.25,.47],fontSize:.06,color:"white",anchorX:"center",anchorY:"middle",font:void 0,children:t.batchNumber}),u&&c.jsxs(Sa,{position:[0,.15,.47],fontSize:.04,color:"white",anchorX:"center",anchorY:"middle",font:void 0,children:[t.weight,"kg"]}),u&&c.jsxs(c.Fragment,{children:[c.jsxs("mesh",{position:[0,.51,0],children:[c.jsx("boxGeometry",{args:[.58,.02,.88]}),c.jsx("meshStandardMaterial",{color:"#d4c4a8",roughness:1})]}),c.jsxs("mesh",{position:[0,.52,.2],rotation:[.2,0,0],children:[c.jsx("boxGeometry",{args:[.5,.01,.2]}),c.jsx("meshStandardMaterial",{color:"#f5f0e6",roughness:.95})]})]}),i&&c.jsx(Ob,{position:[0,.8,0],center:!0,distanceFactor:10,children:c.jsxs("div",{className:"bg-slate-900/95 backdrop-blur px-3 py-2 rounded-lg border border-slate-700 shadow-xl pointer-events-none min-w-[120px]",children:[c.jsx("div",{className:"text-xs font-mono text-white font-bold",children:t.batchNumber}),c.jsxs("div",{className:"text-[10px] text-slate-400 mt-1",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Quality:"}),c.jsx("span",{style:{color:h},className:"font-medium capitalize",children:t.quality})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Weight:"}),c.jsxs("span",{className:"text-white",children:[t.weight," kg"]})]})]})]})})]})});/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dfe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pfe=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),QL=t=>{const e=pfe(t);return e.charAt(0).toUpperCase()+e.slice(1)},IW=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),mfe=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gfe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vfe=z.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:a,iconNode:s,...o},l)=>z.createElement("svg",{ref:l,...gfe,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:IW("lucide",r),...!a&&!mfe(o)&&{"aria-hidden":"true"},...o},[...s.map(([u,h])=>z.createElement(u,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=(t,e)=>{const n=z.forwardRef(({className:i,...r},a)=>z.createElement(vfe,{ref:a,iconNode:e,className:IW(`lucide-${dfe(QL(t))}`,`lucide-${t}`,i),...r}));return n.displayName=QL(t),n};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xfe=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Jm=Xt("activity",xfe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yfe=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],bfe=Xt("arrow-down",yfe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sfe=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Mfe=Xt("arrow-up",Sfe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _fe=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],UW=Xt("award",_fe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tfe=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],wfe=Xt("bell",Tfe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Afe=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],JL=Xt("bot",Afe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Efe=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Zj=Xt("brain",Efe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cfe=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],LW=Xt("briefcase",Cfe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rfe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Kj=Xt("calendar",Rfe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jfe=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Qj=Xt("camera",jfe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nfe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Ofe=Xt("chart-column",Nfe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dfe=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Cc=Xt("chevron-down",Dfe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pfe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ife=Xt("chevron-right",Pfe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ufe=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Cu=Xt("chevron-up",Ufe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lfe=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],BW=Xt("circle-check-big",Lfe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bfe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],e6=Xt("circle-question-mark",Bfe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zfe=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$_=Xt("clock",zfe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kfe=[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]],Ffe=Xt("cloud-lightning",kfe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gfe=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],Vfe=Xt("cloud-rain",Gfe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hfe=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],t6=Xt("cloud",Hfe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qfe=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],Wfe=Xt("cpu",qfe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xfe=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],$fe=Xt("dollar-sign",Xfe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yfe=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],zW=Xt("download",Yfe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zfe=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Y_=Xt("eye",Zfe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kfe=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Qfe=Xt("file-text",Kfe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jfe=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],kW=Xt("flask-conical",Jfe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ehe=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],Jj=Xt("gauge",ehe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const the=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],nhe=Xt("grip-vertical",the);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ihe=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],rhe=Xt("hard-drive",ihe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ahe=[["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["rect",{x:"2",y:"15",width:"20",height:"4",rx:"1",key:"g3x8cw"}]],FW=Xt("hard-hat",ahe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const she=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],ohe=Xt("history",she);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lhe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],che=Xt("image",lhe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uhe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],fhe=Xt("info",uhe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hhe=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],GW=Xt("keyboard",hhe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dhe=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],KM=Xt("layers",dhe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const phe=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],mhe=Xt("map-pin",phe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ghe=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],VW=Xt("map",ghe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vhe=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],xhe=Xt("medal",vhe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yhe=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],bhe=Xt("message-square",yhe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const She=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Mhe=Xt("monitor",She);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _he=[["path",{d:"M18 5h4",key:"1lhgn2"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],n6=Xt("moon-star",_he);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const The=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],whe=Xt("moon",The);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ahe=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Ehe=Xt("music",Ahe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Che=[["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z",key:"2d38gg"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],eN=Xt("octagon-x",Che);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rhe=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],HW=Xt("package",Rhe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jhe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],Nhe=Xt("panel-left-close",jhe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ohe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],Dhe=Xt("panel-left",Ohe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Phe=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Ihe=Xt("pause",Phe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uhe=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Lhe=Xt("play",Uhe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bhe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],zhe=Xt("plus",Bhe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const khe=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Fhe=Xt("rotate-ccw",khe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ghe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Vhe=Xt("settings",Ghe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hhe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],qhe=Xt("shield-check",Hhe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Whe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Qo=Xt("shield",Whe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xhe=[["path",{d:"M7 18v-6a5 5 0 1 1 10 0v6",key:"pcx96s"}],["path",{d:"M5 21a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-1a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2z",key:"1b4s83"}],["path",{d:"M21 12h1",key:"jtio3y"}],["path",{d:"M18.5 4.5 18 5",key:"g5sp9y"}],["path",{d:"M2 12h1",key:"1uaihz"}],["path",{d:"M12 2v1",key:"11qlp1"}],["path",{d:"m4.929 4.929.707.707",key:"1i51kw"}],["path",{d:"M12 12v6",key:"3ahymv"}]],$he=Xt("siren",Xhe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yhe=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],qW=Xt("skip-back",Yhe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zhe=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],WW=Xt("skip-forward",Zhe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Khe=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Qhe=Xt("sparkles",Khe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jhe=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],XW=Xt("star",Jhe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ede=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 3v1",key:"1asbbs"}],["path",{d:"M12 20v1",key:"1wcdkc"}],["path",{d:"M3 12h1",key:"lp3yf2"}],["path",{d:"M20 12h1",key:"1vloll"}],["path",{d:"m18.364 5.636-.707.707",key:"1hakh0"}],["path",{d:"m6.343 17.657-.707.707",key:"18m9nf"}],["path",{d:"m5.636 5.636.707.707",key:"1xv1c5"}],["path",{d:"m17.657 17.657.707.707",key:"vl76zb"}]],i6=Xt("sun-medium",ede);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tde=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],zD=Xt("sun",tde);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nde=[["path",{d:"M12 10V2",key:"16sf7g"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m16 6-4 4-4-4",key:"6wukr"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]],ide=Xt("sunset",nde);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rde=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],$W=Xt("target",rde);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ade=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],sde=Xt("trash-2",ade);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ode=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],K0=Xt("trending-up",ode);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lde=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],S1=Xt("triangle-alert",lde);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cde=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],tN=Xt("trophy",cde);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ude=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],fde=Xt("truck",ude);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hde=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],M1=Xt("user",hde);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dde=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Z_=Xt("users",dde);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pde=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],YW=Xt("volume-2",pde);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mde=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],Um=Xt("wind",mde);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gde=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],_g=Xt("wrench",gde);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vde=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],op=Xt("x",vde);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xde=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],nN=Xt("zap",xde);class yde{constructor(){this.positions=new Map}register(e,n,i,r,a,s,o){this.positions.set(e,{id:e,x:n,z:i,type:r,dirX:a,dirZ:s,isStopped:o})}unregister(e){this.positions.delete(e)}getEntitiesNearby(e,n,i,r,a){const s=[];return this.positions.forEach(o=>{if(o.type===r&&o.id!==a){const l=o.x-e,u=o.z-n;Math.sqrt(l*l+u*u)<i&&s.push(o)}}),s}getWorkersNearby(e,n,i){return this.getEntitiesNearby(e,n,i,"worker")}getForkliftsNearby(e,n,i,r){return this.getEntitiesNearby(e,n,i,"forklift",r)}isPathClear(e,n,i,r,a,s,o){for(let l=1;l<=a;l+=.5){const u=e+i*l,h=n+r*l;if(this.getWorkersNearby(u,h,s).length>0||o&&this.getForkliftsNearby(u,h,s,o).length>0)return!1}return!0}getNearestForklift(e,n,i){let r=null,a=i;return this.positions.forEach(s=>{if(s.type==="forklift"){const o=s.x-e,l=s.z-n,u=Math.sqrt(o*o+l*l);u<a&&(a=u,r=s)}}),r}getNearestWorker(e,n,i,r){let a=null,s=i;return this.positions.forEach(o=>{if(o.type==="worker"&&o.id!==r){const l=o.x-e,u=o.z-n,h=Math.sqrt(l*l+u*u);h<s&&(s=h,a={...o,distance:h})}}),a}getWorkerPosition(e){const n=this.positions.get(e);return(n==null?void 0:n.type)==="worker"?n:null}isForkliftApproaching(e,n,i){if(i.isStopped||i.dirX===void 0||i.dirZ===void 0)return!1;const r=e-i.x,a=n-i.z;return r*i.dirX+a*i.dirZ>.3}getAllWorkers(){const e=[];return this.positions.forEach(n=>{n.type==="worker"&&e.push(n)}),e}getAllForklifts(){const e=[];return this.positions.forEach(n=>{n.type==="forklift"&&e.push(n)}),e}}const Mf=new yde,bde=({onSelectWorker:t})=>{const e=z.useMemo(()=>{const n=[10,-10,0];return b1.map((i,r)=>({...i,position:[n[r%n.length]+(Math.random()-.5)*4,0,Math.random()*40-20],direction:Math.random()>.5?1:-1}))},[]);return c.jsx("group",{children:e.map(n=>c.jsx(jde,{data:n,onSelect:()=>t(n)},n.id))})},Sde=(t,e,n)=>{const i=["#f5d0c5","#d4a574","#8d5524","#c68642","#e0ac69","#ffdbac","#f1c27d","#cd8c52"],r=["#1a1a1a","#3d2314","#8b4513","#d4a574","#4a3728","#2d1810","#654321","#8b0000"],a=["bald","short","medium","curly","ponytail"],s=n.charCodeAt(n.length-1)%i.length,o=n.charCodeAt(0)%r.length,l=(n.charCodeAt(1)||0)%a.length,u=i[s],h=r[o],p=a[l];switch(t){case"Supervisor":return{uniformColor:"#1e40af",skinTone:u,hatColor:"#1e40af",hasVest:!1,pantsColor:"#1e293b",hairColor:h,hairStyle:p,tool:"clipboard"};case"Engineer":return{uniformColor:"#374151",skinTone:u,hatColor:"#ffffff",hasVest:!1,pantsColor:"#1f2937",hairColor:h,hairStyle:p,tool:"tablet"};case"Safety Officer":return{uniformColor:"#166534",skinTone:u,hatColor:"#22c55e",hasVest:!0,pantsColor:"#14532d",hairColor:h,hairStyle:p,tool:"radio"};case"Quality Control":return{uniformColor:"#7c3aed",skinTone:u,hatColor:"#ffffff",hasVest:!1,pantsColor:"#1e1b4b",hairColor:h,hairStyle:p,tool:"magnifier"};case"Maintenance":return{uniformColor:"#9a3412",skinTone:u,hatColor:"#f97316",hasVest:!0,pantsColor:"#431407",hairColor:h,hairStyle:p,tool:"wrench"};case"Operator":default:return{uniformColor:e||"#475569",skinTone:u,hatColor:"#eab308",hasVest:n.charCodeAt(2)%2===0,pantsColor:"#1e3a5f",hairColor:h,hairStyle:p,tool:"none"}}},Mde=()=>c.jsxs("group",{position:[.08,-.02,.04],rotation:[.3,0,.1],children:[c.jsxs("mesh",{castShadow:!0,children:[c.jsx("boxGeometry",{args:[.12,.16,.015]}),c.jsx("meshStandardMaterial",{color:"#8b4513",roughness:.7})]}),c.jsxs("mesh",{position:[0,.07,.01],children:[c.jsx("boxGeometry",{args:[.04,.02,.02]}),c.jsx("meshStandardMaterial",{color:"#c0c0c0",metalness:.8,roughness:.2})]}),c.jsxs("mesh",{position:[0,-.01,.01],children:[c.jsx("boxGeometry",{args:[.1,.12,.002]}),c.jsx("meshStandardMaterial",{color:"#ffffff"})]}),[-.03,0,.03].map((t,e)=>c.jsxs("mesh",{position:[0,t,.012],children:[c.jsx("boxGeometry",{args:[.07,.008,.001]}),c.jsx("meshStandardMaterial",{color:"#333"})]},e))]}),_de=()=>c.jsxs("group",{position:[.06,-.02,.04],rotation:[.4,0,.15],children:[c.jsxs("mesh",{castShadow:!0,children:[c.jsx("boxGeometry",{args:[.1,.14,.01]}),c.jsx("meshStandardMaterial",{color:"#1a1a1a",roughness:.3})]}),c.jsxs("mesh",{position:[0,0,.006],children:[c.jsx("boxGeometry",{args:[.085,.12,.002]}),c.jsx("meshStandardMaterial",{color:"#1e40af",emissive:"#1e40af",emissiveIntensity:.3})]}),c.jsxs("mesh",{position:[0,.02,.008],children:[c.jsx("boxGeometry",{args:[.06,.002,.001]}),c.jsx("meshStandardMaterial",{color:"#22c55e",emissive:"#22c55e",emissiveIntensity:.5})]})]}),Tde=()=>c.jsxs("group",{position:[.04,0,.03],rotation:[.2,.3,0],children:[c.jsxs("mesh",{castShadow:!0,children:[c.jsx("boxGeometry",{args:[.04,.1,.025]}),c.jsx("meshStandardMaterial",{color:"#1a1a1a",roughness:.4})]}),c.jsxs("mesh",{position:[.01,.07,0],children:[c.jsx("cylinderGeometry",{args:[.004,.003,.06,8]}),c.jsx("meshStandardMaterial",{color:"#333"})]}),c.jsxs("mesh",{position:[0,.04,.014],children:[c.jsx("sphereGeometry",{args:[.004,8,8]}),c.jsx("meshStandardMaterial",{color:"#22c55e",emissive:"#22c55e",emissiveIntensity:2})]})]}),wde=()=>c.jsxs("group",{position:[.02,-.04,.02],rotation:[0,.5,-.3],children:[c.jsxs("mesh",{castShadow:!0,children:[c.jsx("boxGeometry",{args:[.025,.14,.012]}),c.jsx("meshStandardMaterial",{color:"#c0c0c0",metalness:.9,roughness:.3})]}),c.jsxs("mesh",{castShadow:!0,position:[0,.08,0],children:[c.jsx("boxGeometry",{args:[.05,.03,.012]}),c.jsx("meshStandardMaterial",{color:"#c0c0c0",metalness:.9,roughness:.3})]}),c.jsxs("mesh",{position:[0,-.03,.007],children:[c.jsx("boxGeometry",{args:[.027,.05,.004]}),c.jsx("meshStandardMaterial",{color:"#ef4444",roughness:.8})]})]}),Ade=()=>c.jsxs("group",{position:[.05,0,.04],rotation:[.3,.2,0],children:[c.jsxs("mesh",{castShadow:!0,children:[c.jsx("cylinderGeometry",{args:[.012,.015,.08,12]}),c.jsx("meshStandardMaterial",{color:"#1a1a1a",roughness:.5})]}),c.jsxs("mesh",{castShadow:!0,position:[0,.06,0],rotation:[Math.PI/2,0,0],children:[c.jsx("torusGeometry",{args:[.035,.006,8,24]}),c.jsx("meshStandardMaterial",{color:"#c0c0c0",metalness:.8,roughness:.2})]}),c.jsxs("mesh",{position:[0,.06,0],rotation:[Math.PI/2,0,0],children:[c.jsx("circleGeometry",{args:[.032,24]}),c.jsx("meshStandardMaterial",{color:"#a0d8ef",transparent:!0,opacity:.4})]})]}),Ede=({tool:t})=>{switch(t){case"clipboard":return c.jsx(Mde,{});case"tablet":return c.jsx(_de,{});case"radio":return c.jsx(Tde,{});case"wrench":return c.jsx(wde,{});case"magnifier":return c.jsx(Ade,{});default:return null}},Cde=({style:t,color:e})=>{switch(t){case"short":return c.jsxs("group",{position:[0,.05,-.02],children:[c.jsxs("mesh",{castShadow:!0,position:[-.14,-.02,0],children:[c.jsx("boxGeometry",{args:[.04,.08,.1]}),c.jsx("meshStandardMaterial",{color:e,roughness:.9})]}),c.jsxs("mesh",{castShadow:!0,position:[.14,-.02,0],children:[c.jsx("boxGeometry",{args:[.04,.08,.1]}),c.jsx("meshStandardMaterial",{color:e,roughness:.9})]}),c.jsxs("mesh",{castShadow:!0,position:[0,-.02,-.12],children:[c.jsx("boxGeometry",{args:[.2,.1,.04]}),c.jsx("meshStandardMaterial",{color:e,roughness:.9})]})]});case"medium":return c.jsxs("group",{position:[0,.02,0],children:[c.jsxs("mesh",{castShadow:!0,position:[-.15,-.06,0],children:[c.jsx("boxGeometry",{args:[.04,.14,.12]}),c.jsx("meshStandardMaterial",{color:e,roughness:.9})]}),c.jsxs("mesh",{castShadow:!0,position:[.15,-.06,0],children:[c.jsx("boxGeometry",{args:[.04,.14,.12]}),c.jsx("meshStandardMaterial",{color:e,roughness:.9})]}),c.jsxs("mesh",{castShadow:!0,position:[0,-.04,-.13],children:[c.jsx("boxGeometry",{args:[.22,.14,.04]}),c.jsx("meshStandardMaterial",{color:e,roughness:.9})]})]});case"curly":return c.jsx("group",{position:[0,.02,0],children:[[-.13,-.04,.02],[.13,-.04,.02],[-.12,-.08,-.04],[.12,-.08,-.04],[0,-.06,-.14]].map((n,i)=>c.jsxs("mesh",{castShadow:!0,position:n,children:[c.jsx("sphereGeometry",{args:[.04,8,8]}),c.jsx("meshStandardMaterial",{color:e,roughness:1})]},i))});case"ponytail":return c.jsxs("group",{position:[0,0,-.1],children:[c.jsxs("mesh",{castShadow:!0,position:[0,-.1,-.05],children:[c.jsx("capsuleGeometry",{args:[.03,.12,6,12]}),c.jsx("meshStandardMaterial",{color:e,roughness:.8})]}),c.jsxs("mesh",{position:[0,-.02,-.05],children:[c.jsx("torusGeometry",{args:[.035,.008,8,16]}),c.jsx("meshStandardMaterial",{color:"#1a1a1a"})]})]});case"bald":default:return null}},Rde=({walkCycleRef:t,uniformColor:e,skinTone:n,hatColor:i,hasVest:r,pantsColor:a,headRotation:s=0,hairColor:o,hairStyle:l,tool:u,isWaving:h=!1,isIdle:p=!1})=>{const g=z.useRef(null),x=z.useRef(null),b=z.useRef(null),M=z.useRef(null),S=z.useRef(null),T=z.useRef(0);return It((A,E)=>{const j=t.current,R=p&&u!=="none",C=p?Math.sin(j)*.05:Math.sin(j)*.5,D=p?0:Math.sin(j)*.6;if(g.current&&(R?(g.current.rotation.x=ba.lerp(g.current.rotation.x,-.8,.05),g.current.rotation.z=ba.lerp(g.current.rotation.z,.3,.05)):(g.current.rotation.x=ba.lerp(g.current.rotation.x,C,.1),g.current.rotation.z=ba.lerp(g.current.rotation.z,0,.1))),x.current)if(h){T.current+=E*12;const U=Math.sin(T.current)*.4;x.current.rotation.x=-2.2,x.current.rotation.z=-.8+U}else R?x.current.rotation.x=ba.lerp(x.current.rotation.x,-.3,.05):(x.current.rotation.x=ba.lerp(x.current.rotation.x,-C,.1),x.current.rotation.z=ba.lerp(x.current.rotation.z,0,.1),T.current=0);if(b.current&&(b.current.rotation.x=ba.lerp(b.current.rotation.x,-D,.1)),M.current&&(M.current.rotation.x=ba.lerp(M.current.rotation.x,D,.1)),S.current){const U=R?-.3:s,I=R?.2:0;S.current.rotation.y=ba.lerp(S.current.rotation.y,U,.1),S.current.rotation.x=ba.lerp(S.current.rotation.x,I,.1)}}),c.jsxs("group",{scale:[.85,.85,.85],children:[c.jsxs("group",{position:[0,1.15,0],children:[c.jsxs("mesh",{castShadow:!0,position:[0,.2,0],children:[c.jsx("boxGeometry",{args:[.48,.45,.24]}),c.jsx("meshStandardMaterial",{color:e,roughness:.8})]}),c.jsxs("mesh",{castShadow:!0,position:[-.28,.32,0],children:[c.jsx("sphereGeometry",{args:[.1,12,12]}),c.jsx("meshStandardMaterial",{color:e,roughness:.8})]}),c.jsxs("mesh",{castShadow:!0,position:[.28,.32,0],children:[c.jsx("sphereGeometry",{args:[.1,12,12]}),c.jsx("meshStandardMaterial",{color:e,roughness:.8})]}),c.jsxs("mesh",{castShadow:!0,position:[0,-.15,0],children:[c.jsx("boxGeometry",{args:[.42,.3,.22]}),c.jsx("meshStandardMaterial",{color:e,roughness:.8})]}),r&&c.jsxs(c.Fragment,{children:[c.jsxs("mesh",{castShadow:!0,position:[0,.15,.005],children:[c.jsx("boxGeometry",{args:[.5,.52,.25]}),c.jsx("meshStandardMaterial",{color:"#f97316",roughness:.6})]}),c.jsxs("mesh",{position:[0,.32,.13],children:[c.jsx("boxGeometry",{args:[.51,.035,.01]}),c.jsx("meshStandardMaterial",{color:"#e5e5e5",emissive:"#ffffff",emissiveIntensity:.4,metalness:.9,roughness:.1})]}),c.jsxs("mesh",{position:[0,.12,.13],children:[c.jsx("boxGeometry",{args:[.51,.035,.01]}),c.jsx("meshStandardMaterial",{color:"#e5e5e5",emissive:"#ffffff",emissiveIntensity:.4,metalness:.9,roughness:.1})]}),c.jsxs("mesh",{position:[0,-.08,.13],children:[c.jsx("boxGeometry",{args:[.51,.035,.01]}),c.jsx("meshStandardMaterial",{color:"#e5e5e5",emissive:"#ffffff",emissiveIntensity:.4,metalness:.9,roughness:.1})]})]}),c.jsxs("mesh",{castShadow:!0,position:[0,.48,.02],children:[c.jsx("boxGeometry",{args:[.2,.08,.15]}),c.jsx("meshStandardMaterial",{color:e,roughness:.7})]}),c.jsxs("mesh",{castShadow:!0,position:[0,.58,0],children:[c.jsx("cylinderGeometry",{args:[.075,.085,.12,16]}),c.jsx("meshStandardMaterial",{color:n,roughness:.6})]}),c.jsxs("group",{ref:S,position:[0,.82,0],children:[c.jsxs("mesh",{castShadow:!0,children:[c.jsx("sphereGeometry",{args:[.17,32,32]}),c.jsx("meshStandardMaterial",{color:n,roughness:.55})]}),c.jsxs("mesh",{castShadow:!0,position:[0,-.08,.05],children:[c.jsx("sphereGeometry",{args:[.1,16,16]}),c.jsx("meshStandardMaterial",{color:n,roughness:.55})]}),c.jsxs("mesh",{castShadow:!0,position:[0,-.02,.155],children:[c.jsx("coneGeometry",{args:[.025,.05,8]}),c.jsx("meshStandardMaterial",{color:n,roughness:.6})]}),c.jsxs("mesh",{castShadow:!0,position:[0,-.045,.16],children:[c.jsx("sphereGeometry",{args:[.022,8,8]}),c.jsx("meshStandardMaterial",{color:n,roughness:.6})]}),c.jsxs("mesh",{position:[-.055,.025,.135],children:[c.jsx("sphereGeometry",{args:[.028,16,16]}),c.jsx("meshStandardMaterial",{color:"#fefefe",roughness:.2})]}),c.jsxs("mesh",{position:[.055,.025,.135],children:[c.jsx("sphereGeometry",{args:[.028,16,16]}),c.jsx("meshStandardMaterial",{color:"#fefefe",roughness:.2})]}),c.jsxs("mesh",{position:[-.055,.025,.158],children:[c.jsx("sphereGeometry",{args:[.016,12,12]}),c.jsx("meshStandardMaterial",{color:"#4a3728",roughness:.3})]}),c.jsxs("mesh",{position:[.055,.025,.158],children:[c.jsx("sphereGeometry",{args:[.016,12,12]}),c.jsx("meshStandardMaterial",{color:"#4a3728",roughness:.3})]}),c.jsxs("mesh",{position:[-.055,.025,.168],children:[c.jsx("sphereGeometry",{args:[.008,8,8]}),c.jsx("meshStandardMaterial",{color:"#0a0a0a"})]}),c.jsxs("mesh",{position:[.055,.025,.168],children:[c.jsx("sphereGeometry",{args:[.008,8,8]}),c.jsx("meshStandardMaterial",{color:"#0a0a0a"})]}),c.jsxs("mesh",{position:[-.055,.07,.14],rotation:[.15,0,.12],children:[c.jsx("boxGeometry",{args:[.045,.012,.015]}),c.jsx("meshStandardMaterial",{color:"#2d1810",roughness:.9})]}),c.jsxs("mesh",{position:[.055,.07,.14],rotation:[.15,0,-.12],children:[c.jsx("boxGeometry",{args:[.045,.012,.015]}),c.jsx("meshStandardMaterial",{color:"#2d1810",roughness:.9})]}),c.jsxs("mesh",{position:[0,-.075,.14],children:[c.jsx("boxGeometry",{args:[.06,.015,.01]}),c.jsx("meshStandardMaterial",{color:"#a0524a",roughness:.7})]}),c.jsxs("mesh",{castShadow:!0,position:[-.165,0,0],rotation:[0,-.2,0],children:[c.jsx("sphereGeometry",{args:[.035,12,12]}),c.jsx("meshStandardMaterial",{color:n,roughness:.6})]}),c.jsxs("mesh",{castShadow:!0,position:[.165,0,0],rotation:[0,.2,0],children:[c.jsx("sphereGeometry",{args:[.035,12,12]}),c.jsx("meshStandardMaterial",{color:n,roughness:.6})]}),c.jsx(Cde,{style:l,color:o}),c.jsxs("group",{position:[0,.1,0],children:[c.jsxs("mesh",{castShadow:!0,children:[c.jsx("sphereGeometry",{args:[.19,24,24,0,Math.PI*2,0,Math.PI/2]}),c.jsx("meshStandardMaterial",{color:i,metalness:.35,roughness:.45})]}),c.jsxs("mesh",{castShadow:!0,position:[0,-.02,0],children:[c.jsx("cylinderGeometry",{args:[.21,.21,.025,32]}),c.jsx("meshStandardMaterial",{color:i,metalness:.35,roughness:.45})]}),c.jsxs("mesh",{castShadow:!0,position:[0,.08,0],rotation:[0,0,Math.PI/2],children:[c.jsx("capsuleGeometry",{args:[.015,.3,4,8]}),c.jsx("meshStandardMaterial",{color:i,metalness:.35,roughness:.45})]})]})]}),c.jsxs("group",{ref:g,position:[-.34,.22,0],children:[c.jsxs("mesh",{castShadow:!0,position:[0,-.15,0],children:[c.jsx("capsuleGeometry",{args:[.055,.22,8,16]}),c.jsx("meshStandardMaterial",{color:e,roughness:.8})]}),c.jsxs("mesh",{castShadow:!0,position:[0,-.3,0],children:[c.jsx("sphereGeometry",{args:[.055,12,12]}),c.jsx("meshStandardMaterial",{color:e,roughness:.8})]}),c.jsxs("mesh",{castShadow:!0,position:[0,-.45,0],children:[c.jsx("capsuleGeometry",{args:[.045,.2,8,16]}),c.jsx("meshStandardMaterial",{color:n,roughness:.6})]}),c.jsxs("group",{position:[0,-.62,0],children:[c.jsxs("mesh",{castShadow:!0,children:[c.jsx("boxGeometry",{args:[.06,.08,.03]}),c.jsx("meshStandardMaterial",{color:n,roughness:.6})]}),c.jsxs("mesh",{castShadow:!0,position:[0,-.055,0],children:[c.jsx("boxGeometry",{args:[.055,.04,.025]}),c.jsx("meshStandardMaterial",{color:n,roughness:.6})]}),c.jsx(Ede,{tool:u})]})]}),c.jsxs("group",{ref:x,position:[.34,.22,0],children:[c.jsxs("mesh",{castShadow:!0,position:[0,-.15,0],children:[c.jsx("capsuleGeometry",{args:[.055,.22,8,16]}),c.jsx("meshStandardMaterial",{color:e,roughness:.8})]}),c.jsxs("mesh",{castShadow:!0,position:[0,-.3,0],children:[c.jsx("sphereGeometry",{args:[.055,12,12]}),c.jsx("meshStandardMaterial",{color:e,roughness:.8})]}),c.jsxs("mesh",{castShadow:!0,position:[0,-.45,0],children:[c.jsx("capsuleGeometry",{args:[.045,.2,8,16]}),c.jsx("meshStandardMaterial",{color:n,roughness:.6})]}),c.jsxs("group",{position:[0,-.62,0],children:[c.jsxs("mesh",{castShadow:!0,children:[c.jsx("boxGeometry",{args:[.06,.08,.03]}),c.jsx("meshStandardMaterial",{color:n,roughness:.6})]}),c.jsxs("mesh",{castShadow:!0,position:[0,-.055,0],children:[c.jsx("boxGeometry",{args:[.055,.04,.025]}),c.jsx("meshStandardMaterial",{color:n,roughness:.6})]})]})]})]}),c.jsxs("mesh",{castShadow:!0,position:[0,.72,0],children:[c.jsx("boxGeometry",{args:[.38,.14,.2]}),c.jsx("meshStandardMaterial",{color:a,roughness:.8})]}),c.jsxs("mesh",{castShadow:!0,position:[0,.78,0],children:[c.jsx("boxGeometry",{args:[.4,.04,.22]}),c.jsx("meshStandardMaterial",{color:"#1a1a1a",roughness:.5,metalness:.3})]}),c.jsxs("mesh",{castShadow:!0,position:[0,.78,.115],children:[c.jsx("boxGeometry",{args:[.05,.035,.01]}),c.jsx("meshStandardMaterial",{color:"#c9a227",metalness:.8,roughness:.2})]}),c.jsxs("group",{ref:b,position:[-.1,.62,0],children:[c.jsxs("mesh",{castShadow:!0,position:[0,-.18,0],children:[c.jsx("capsuleGeometry",{args:[.075,.28,8,16]}),c.jsx("meshStandardMaterial",{color:a,roughness:.8})]}),c.jsxs("mesh",{castShadow:!0,position:[0,-.38,.02],children:[c.jsx("sphereGeometry",{args:[.065,12,12]}),c.jsx("meshStandardMaterial",{color:a,roughness:.8})]}),c.jsxs("mesh",{castShadow:!0,position:[0,-.58,0],children:[c.jsx("capsuleGeometry",{args:[.055,.28,8,16]}),c.jsx("meshStandardMaterial",{color:a,roughness:.8})]}),c.jsxs("group",{position:[0,-.78,.03],children:[c.jsxs("mesh",{castShadow:!0,children:[c.jsx("boxGeometry",{args:[.1,.1,.16]}),c.jsx("meshStandardMaterial",{color:"#1a1a1a",roughness:.6})]}),c.jsxs("mesh",{castShadow:!0,position:[0,-.05,0],children:[c.jsx("boxGeometry",{args:[.11,.02,.17]}),c.jsx("meshStandardMaterial",{color:"#0d0d0d",roughness:.9})]}),c.jsxs("mesh",{castShadow:!0,position:[0,-.02,.07],children:[c.jsx("boxGeometry",{args:[.09,.06,.04]}),c.jsx("meshStandardMaterial",{color:"#333333",roughness:.5,metalness:.2})]})]})]}),c.jsxs("group",{ref:M,position:[.1,.62,0],children:[c.jsxs("mesh",{castShadow:!0,position:[0,-.18,0],children:[c.jsx("capsuleGeometry",{args:[.075,.28,8,16]}),c.jsx("meshStandardMaterial",{color:a,roughness:.8})]}),c.jsxs("mesh",{castShadow:!0,position:[0,-.38,.02],children:[c.jsx("sphereGeometry",{args:[.065,12,12]}),c.jsx("meshStandardMaterial",{color:a,roughness:.8})]}),c.jsxs("mesh",{castShadow:!0,position:[0,-.58,0],children:[c.jsx("capsuleGeometry",{args:[.055,.28,8,16]}),c.jsx("meshStandardMaterial",{color:a,roughness:.8})]}),c.jsxs("group",{position:[0,-.78,.03],children:[c.jsxs("mesh",{castShadow:!0,children:[c.jsx("boxGeometry",{args:[.1,.1,.16]}),c.jsx("meshStandardMaterial",{color:"#1a1a1a",roughness:.6})]}),c.jsxs("mesh",{castShadow:!0,position:[0,-.05,0],children:[c.jsx("boxGeometry",{args:[.11,.02,.17]}),c.jsx("meshStandardMaterial",{color:"#0d0d0d",roughness:.9})]}),c.jsxs("mesh",{castShadow:!0,position:[0,-.02,.07],children:[c.jsx("boxGeometry",{args:[.09,.06,.04]}),c.jsx("meshStandardMaterial",{color:"#333333",roughness:.5,metalness:.2})]})]})]})]})},jde=({data:t,onSelect:e})=>{const n=z.useRef(null),[i,r]=z.useState(!1),a=z.useRef(0),[s,o]=z.useState(0),[l,u]=z.useState(!1),[h,p]=z.useState(!1),g=z.useRef(t.direction),x=z.useRef(t.position[0]),b=z.useRef(Math.random()*10+5),M=z.useRef(0),S=z.useRef(!1),T=z.useRef(!1),A=z.useRef(0),E=z.useRef(0),j=1.5,R=z.useRef(null),C=z.useRef(0),D=Fe(G=>G.recordWorkerEvasion);z.useEffect(()=>{S.current&&!T.current&&D(),!S.current&&T.current&&(u(!0),R.current&&clearTimeout(R.current),R.current=setTimeout(()=>u(!1),1500)),T.current=S.current},[D]),z.useEffect(()=>()=>{R.current&&clearTimeout(R.current)},[]);const U=z.useRef(!1);z.useEffect(()=>{n.current&&!U.current&&(n.current.position.set(...t.position),U.current=!0)},[t.position]);const I=z.useMemo(()=>Sde(t.role,t.color,t.id),[t.role,t.color,t.id]);It((G,H)=>{if(!n.current)return;const W=8,Y=3,k=4,$=Mf.getNearestForklift(n.current.position.x,n.current.position.z,W);if($){const te=$.x-n.current.position.x,ae=$.z-n.current.position.z,q=Math.atan2(te,ae),K=g.current>0?0:Math.PI;let ie=q-K;ie=Math.max(-Math.PI/2,Math.min(Math.PI/2,ie)),Math.abs(ie-s)>.05&&o(ie)}else Math.abs(s)>.05&&o(0);if($&&Mf.isForkliftApproaching(n.current.position.x,n.current.position.z,$)){if(!S.current){const q=n.current.position.x-$.x,K=n.current.position.z-$.z,ie=($.dirX||0)*K-($.dirZ||0)*q;A.current=ie>0?1:-1,S.current=!0}const ae=x.current+A.current*Y-n.current.position.x;Math.abs(ae)>.1&&(n.current.position.x+=Math.sign(ae)*k*H),a.current+=H*2}else{if(S.current&&(E.current=j,S.current=!1),E.current>0&&(E.current-=H),E.current<=0){const te=x.current-n.current.position.x;Math.abs(te)>.1&&(n.current.position.x+=Math.sign(te)*k*.5*H)}h?(M.current-=H,M.current<=0&&(p(!1),b.current=Math.random()*12+8),a.current+=H*.5):(b.current-=H,b.current<=0&&(p(!0),M.current=Math.random()*4+2),a.current+=H*5.5)}const ee=h?0:Math.abs(Math.sin(a.current))*.025;if(!h){n.current.position.z+=t.speed*H*g.current;const te=Math.floor(a.current/Math.PI);te!==C.current&&(C.current=te,wt.playFootstep(t.id))}n.current.position.y=ee,n.current.rotation.y=g.current>0?0:Math.PI,Mf.register(t.id,n.current.position.x,n.current.position.z,"worker"),(n.current.position.z>25||n.current.position.z<-25)&&(g.current*=-1)});const L=()=>{const G="w-6 h-6";switch(t.role){case"Supervisor":return c.jsx(LW,{className:G});case"Engineer":return c.jsx(_g,{className:G});case"Operator":return c.jsx(FW,{className:G});case"Safety Officer":return c.jsx(Qo,{className:G});case"Quality Control":return c.jsx(kW,{className:G});case"Maintenance":return c.jsx(_g,{className:G});default:return c.jsx(M1,{className:G})}},F=()=>{switch(t.status){case"working":return"#22c55e";case"responding":return"#f59e0b";case"break":return"#6b7280";default:return"#3b82f6"}};return c.jsxs("group",{ref:n,onPointerOver:G=>{G.stopPropagation(),r(!0),document.body.style.cursor="pointer"},onPointerOut:()=>{r(!1),document.body.style.cursor="auto"},onClick:G=>{G.stopPropagation(),wt.playClick(),e()},children:[c.jsx(Rde,{walkCycleRef:a,uniformColor:I.uniformColor,skinTone:I.skinTone,hatColor:I.hatColor,hasVest:I.hasVest,pantsColor:I.pantsColor,headRotation:s,hairColor:I.hairColor,hairStyle:I.hairStyle,tool:I.tool,isWaving:l,isIdle:h}),c.jsxs("group",{position:[0,2.15,0],children:[c.jsxs("mesh",{children:[c.jsx("sphereGeometry",{args:[.055]}),c.jsx("meshStandardMaterial",{color:F(),emissive:F(),emissiveIntensity:2.5,toneMapped:!1})]}),c.jsxs("mesh",{rotation:[Math.PI/2,0,0],children:[c.jsx("ringGeometry",{args:[.07,.085,20]}),c.jsx("meshStandardMaterial",{color:F(),emissive:F(),emissiveIntensity:1.5,transparent:!0,opacity:.6,toneMapped:!1})]})]}),i&&c.jsx(Ob,{position:[0,2.6,0],center:!0,distanceFactor:12,children:c.jsxs("div",{className:"bg-slate-900/95 backdrop-blur-xl border border-slate-500/50 px-4 py-3 rounded-xl shadow-2xl pointer-events-none min-w-[220px]",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[L(),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-white text-sm",children:t.name}),c.jsx("div",{className:"text-xs text-blue-400",children:t.role})]})]}),c.jsx("div",{className:"text-xs text-slate-400 border-t border-slate-700/50 pt-2 mt-2",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full animate-pulse",style:{backgroundColor:F()}}),c.jsx("span",{className:"text-slate-300",children:t.currentTask})]})}),c.jsxs("div",{className:"text-[10px] text-slate-500 mt-2 flex items-center gap-1.5",children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})}),"Click for details"]})]})}),c.jsx(mW,{position:[0,2.4,0],children:c.jsx(Sa,{fontSize:.14,color:"white",anchorX:"center",anchorY:"middle",outlineWidth:.012,outlineColor:"#000000",children:t.name.split(" ")[0]})}),c.jsxs("group",{position:[.12,1.28,.125],rotation:[0,0,0],children:[c.jsxs("mesh",{children:[c.jsx("planeGeometry",{args:[.09,.06]}),c.jsx("meshStandardMaterial",{color:"#ffffff"})]}),c.jsxs("mesh",{position:[0,.012,.001],children:[c.jsx("planeGeometry",{args:[.07,.015]}),c.jsx("meshStandardMaterial",{color:"#1e40af"})]}),c.jsxs("mesh",{position:[0,-.012,.001],children:[c.jsx("planeGeometry",{args:[.06,.008]}),c.jsx("meshStandardMaterial",{color:"#94a3b8"})]})]})]})},Nde=()=>z.useMemo(()=>{const e=document.createElement("canvas");e.width=512,e.height=512;const n=e.getContext("2d");n.fillStyle="#1e293b",n.fillRect(0,0,512,512);const i=n.getImageData(0,0,512,512);for(let a=0;a<i.data.length;a+=4){const s=(Math.random()-.5)*20;i.data[a]=Math.max(0,Math.min(255,i.data[a]+s)),i.data[a+1]=Math.max(0,Math.min(255,i.data[a+1]+s)),i.data[a+2]=Math.max(0,Math.min(255,i.data[a+2]+s))}n.putImageData(i,0,0),n.strokeStyle="rgba(20, 30, 40, 0.3)",n.lineWidth=1;for(let a=0;a<8;a++){n.beginPath(),n.moveTo(Math.random()*512,Math.random()*512);for(let s=0;s<5;s++)n.lineTo(n.canvas.width*Math.random(),n.canvas.height*Math.random());n.stroke()}for(let a=0;a<12;a++){const s=Math.random()*512,o=Math.random()*512,l=10+Math.random()*30,u=n.createRadialGradient(s,o,0,s,o,l);u.addColorStop(0,"rgba(40, 50, 60, 0.15)"),u.addColorStop(1,"rgba(40, 50, 60, 0)"),n.fillStyle=u,n.fillRect(s-l,o-l,l*2,l*2)}const r=new Ba(e);return r.wrapS=ar,r.wrapT=ar,r.repeat.set(8,8),r},[]),Ode=()=>z.useMemo(()=>{const e=document.createElement("canvas");e.width=256,e.height=256;const n=e.getContext("2d");n.fillStyle="#808080",n.fillRect(0,0,256,256);const i=n.getImageData(0,0,256,256);for(let a=0;a<i.data.length;a+=4){const s=(Math.random()-.5)*60,o=Math.max(0,Math.min(255,128+s));i.data[a]=o,i.data[a+1]=o,i.data[a+2]=o}n.putImageData(i,0,0);const r=new Ba(e);return r.wrapS=ar,r.wrapT=ar,r.repeat.set(8,8),r},[]),Dde=t=>z.useMemo(()=>{const n=document.createElement("canvas");n.width=256,n.height=256;const i=n.getContext("2d");i.clearRect(0,0,256,256);const r=32,a=t==="danger"?"#dc2626":"#eab308",s="#1e293b";i.save(),i.beginPath(),i.rect(0,0,256,r*1.5),i.clip();for(let l=-256;l<256*2;l+=r*2)i.fillStyle=a,i.beginPath(),i.moveTo(l,0),i.lineTo(l+r,0),i.lineTo(l+r+r*1.5,r*1.5),i.lineTo(l+r*1.5,r*1.5),i.fill(),i.fillStyle=s,i.beginPath(),i.moveTo(l+r,0),i.lineTo(l+r*2,0),i.lineTo(l+r*2+r*1.5,r*1.5),i.lineTo(l+r+r*1.5,r*1.5),i.fill();i.restore(),i.save(),i.beginPath(),i.rect(0,256-r*1.5,256,r*1.5),i.clip();for(let l=-256;l<256*2;l+=r*2)i.fillStyle=a,i.beginPath(),i.moveTo(l,256),i.lineTo(l+r,256),i.lineTo(l+r-r*1.5,256-r*1.5),i.lineTo(l-r*1.5,256-r*1.5),i.fill(),i.fillStyle=s,i.beginPath(),i.moveTo(l+r,256),i.lineTo(l+r*2,256),i.lineTo(l+r*2-r*1.5,256-r*1.5),i.lineTo(l+r-r*1.5,256-r*1.5),i.fill();i.restore(),t==="walkway"&&(i.strokeStyle="#94a3b8",i.lineWidth=3,i.setLineDash([20,15]),i.beginPath(),i.moveTo(0,256/2),i.lineTo(256,256/2),i.stroke());const o=new Ba(n);return o.wrapS=ar,o.wrapT=ar,o},[t]),Kx=({position:t,size:e,type:n,rotation:i=0})=>{const r=Dde(n),a=e[0]/4,s=e[1]/4,o=z.useMemo(()=>{const l=r.clone();return l.repeat.set(a,s),l.needsUpdate=!0,l},[r,a,s]);return c.jsxs("group",{position:t,rotation:[-Math.PI/2,0,i],children:[c.jsxs("mesh",{position:[0,0,.01],children:[c.jsx("planeGeometry",{args:e}),c.jsx("meshBasicMaterial",{map:o,transparent:!0,opacity:.85,depthWrite:!1})]}),c.jsxs("mesh",{position:[0,0,0],children:[c.jsx("planeGeometry",{args:[e[0]-.6,e[1]-.6]}),c.jsx("meshBasicMaterial",{color:n==="danger"?"#7f1d1d":"#422006",transparent:!0,opacity:.15,depthWrite:!1})]})]})},Lm=({position:t,size:e,seed:n})=>{const i=s=>Math.abs(Math.sin(s*12.9898+78.233)*43758.5453)%1,r=z.useMemo(()=>{const s=[];for(let l=0;l<12;l++){const u=l/12*Math.PI*2,h=.7+i(n+l)*.6,p=e[0]/2*h;s.push([Math.cos(u)*p,Math.sin(u)*p*(e[1]/e[0])])}return s},[e,n]),a=z.useMemo(()=>{const s=new Af;s.moveTo(r[0][0],r[0][1]);for(let o=1;o<r.length;o++){r[o-1];const l=r[o],u=r[(o+1)%r.length],h=l[0],p=l[1];s.quadraticCurveTo(h,p,(l[0]+u[0])/2,(l[1]+u[1])/2)}return s.closePath(),new _b(s)},[r]);return c.jsxs("group",{position:t,rotation:[-Math.PI/2,0,i(n)*Math.PI*2],children:[c.jsx("mesh",{position:[0,0,-.001],geometry:a,children:c.jsx("meshBasicMaterial",{color:"#0f172a",transparent:!0,opacity:.4,depthWrite:!1})}),c.jsx("mesh",{position:[0,0,.001],geometry:a,children:c.jsx("meshStandardMaterial",{color:"#1e3a5f",metalness:.9,roughness:.1,transparent:!0,opacity:.6,envMapIntensity:2})}),c.jsx("mesh",{position:[0,0,.002],geometry:a,children:c.jsx("meshBasicMaterial",{color:"#60a5fa",transparent:!0,opacity:.08,depthWrite:!1})})]})},aM=({start:t,end:e,width:n=.4})=>{const i=Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2)),r=[(t[0]+e[0])/2,(t[1]+e[1])/2,(t[2]+e[2])/2],a=new se(e[0]-t[0],e[1]-t[1],e[2]-t[2]).normalize(),s=z.useMemo(()=>{const o=new Jr;return o.setFromUnitVectors(new se(0,0,1),a),o},[a]);return c.jsxs("group",{position:r,quaternion:s,children:[c.jsxs("mesh",{position:[0,-.05,0],children:[c.jsx("boxGeometry",{args:[n,.02,i]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.7,roughness:.4})]}),c.jsxs("mesh",{position:[n/2,0,0],children:[c.jsx("boxGeometry",{args:[.02,.12,i]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.7,roughness:.4})]}),c.jsxs("mesh",{position:[-n/2,0,0],children:[c.jsx("boxGeometry",{args:[.02,.12,i]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.7,roughness:.4})]}),[-.12,0,.12].map((o,l)=>c.jsxs("mesh",{position:[o,-.02,0],children:[c.jsx("cylinderGeometry",{args:[.04,.04,i,8],rotation:[Math.PI/2,0,0]}),c.jsx("meshStandardMaterial",{color:["#3b82f6","#1e293b","#f97316"][l],roughness:.8})]},l))]})},c0=({start:t,end:e,radius:n=.05,color:i="#64748b"})=>{const r=Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2)),a=[(t[0]+e[0])/2,(t[1]+e[1])/2,(t[2]+e[2])/2],s=new se(e[0]-t[0],e[1]-t[1],e[2]-t[2]).normalize(),o=z.useMemo(()=>{const l=new Jr;return l.setFromUnitVectors(new se(0,1,0),s),l},[s]);return c.jsx("group",{position:a,quaternion:o,children:c.jsxs("mesh",{children:[c.jsx("cylinderGeometry",{args:[n,n,r,12]}),c.jsx("meshStandardMaterial",{color:i,metalness:.6,roughness:.4})]})})},Qx=({path:t,width:e=2})=>{const n=z.useMemo(()=>{const s=document.createElement("canvas");s.width=128,s.height=128;const o=s.getContext("2d");o.clearRect(0,0,128,128),o.fillStyle="rgba(50, 60, 70, 0.3)";for(let u=0;u<40;u++){const h=Math.random()*128,p=Math.random()*128,g=5+Math.random()*15,x=2+Math.random()*5;o.save(),o.translate(h,p),o.rotate(Math.random()*Math.PI),o.fillRect(-g/2,-x/2,g,x),o.restore()}o.fillStyle="rgba(30, 40, 50, 0.2)";for(let u=0;u<15;u++){const h=32+Math.random()*128/2,p=Math.random()*128;o.beginPath(),o.ellipse(h,p,8,12,Math.random()*.3-.15,0,Math.PI*2),o.fill()}const l=new Ba(s);return l.wrapS=ar,l.wrapT=ar,l},[]),i=z.useMemo(()=>{const a=[];for(let s=0;s<t.length-1;s++){const o=t[s],l=t[s+1],u=l[0]-o[0],h=l[2]-o[2],p=Math.sqrt(u*u+h*h),g=Math.atan2(u,h);a.push({position:[(o[0]+l[0])/2,.015,(o[2]+l[2])/2],rotation:g,length:p})}return a},[t]),r=z.useMemo(()=>{const a=n.clone();return a.repeat.set(1,4),a.needsUpdate=!0,a},[n]);return c.jsx("group",{children:i.map((a,s)=>c.jsxs("mesh",{position:a.position,rotation:[-Math.PI/2,0,a.rotation],children:[c.jsx("planeGeometry",{args:[e,a.length]}),c.jsx("meshBasicMaterial",{map:r,transparent:!0,opacity:.5,depthWrite:!1})]},s))})},Pde=({density:t=.015})=>{z.useRef(null);const e=Fe(i=>i.gameTime),n=z.useMemo(()=>e>=5&&e<8?t*1.5:e>=18&&e<21?t*1.3:e>=21||e<5?t*.8:t,[e,t]);return c.jsxs("group",{children:[c.jsxs("mesh",{position:[0,2,0],rotation:[-Math.PI/2,0,0],children:[c.jsx("planeGeometry",{args:[120,90]}),c.jsx("meshBasicMaterial",{color:"#94a3b8",transparent:!0,opacity:n*2,depthWrite:!1,side:ai})]}),[[-20,8,-10],[15,10,5],[-10,12,15],[25,7,-15]].map((i,r)=>c.jsxs("mesh",{position:i,children:[c.jsx("sphereGeometry",{args:[8+r*2,16,16]}),c.jsx("meshBasicMaterial",{color:"#cbd5e1",transparent:!0,opacity:n*.8,depthWrite:!1,side:Hr})]},r)),[-20,0,20].map((i,r)=>c.jsxs("mesh",{position:[i,15,0],children:[c.jsx("cylinderGeometry",{args:[4,6,20,16,1,!0]}),c.jsx("meshBasicMaterial",{color:"#fef3c7",transparent:!0,opacity:n*.5,depthWrite:!1,side:ai})]},r))]})},Dh=({position:t,layers:e=1,hasCrates:n=!1,rotation:i=0})=>c.jsxs("group",{position:t,rotation:[0,i,0],children:[Array.from({length:e}).map((r,a)=>c.jsxs("group",{position:[0,a*.15,0],children:[[-.4,0,.4].map((s,o)=>c.jsxs("mesh",{position:[0,.12,s],castShadow:!0,children:[c.jsx("boxGeometry",{args:[1.2,.025,.2]}),c.jsx("meshStandardMaterial",{color:"#8b5a2b",roughness:.9})]},`top-${o}`)),[-.5,0,.5].map((s,o)=>c.jsxs("mesh",{position:[s,.05,0],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.1,.1,1]}),c.jsx("meshStandardMaterial",{color:"#6b4423",roughness:.9})]},`stringer-${o}`)),[-.35,.35].map((s,o)=>c.jsxs("mesh",{position:[0,0,s],castShadow:!0,children:[c.jsx("boxGeometry",{args:[1.2,.02,.15]}),c.jsx("meshStandardMaterial",{color:"#7a4c2a",roughness:.9})]},`bottom-${o}`))]},a)),n&&c.jsxs("group",{position:[0,e*.15+.3,0],children:[c.jsxs("mesh",{castShadow:!0,children:[c.jsx("boxGeometry",{args:[.8,.5,.6]}),c.jsx("meshStandardMaterial",{color:"#d4a574",roughness:.8})]}),[-.2,.2].map((r,a)=>c.jsxs("mesh",{position:[0,0,r],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.82,.52,.02]}),c.jsx("meshStandardMaterial",{color:"#b8956e",roughness:.85})]},a))]})]}),CE=({position:t,count:e=3,rotation:n=0})=>{const i=z.useMemo(()=>{const r=[];let a=.15,s=e,o=Math.min(3,s);for(;s>0;){for(let l=0;l<o&&s>0;l++){const u=(l-(o-1)/2)*.45,h=(Math.random()-.5)*.1;r.push([u,a,0,h]),s--}a+=.25,o=Math.max(1,o-1)}return r},[e]);return c.jsx("group",{position:t,rotation:[0,n,0],children:i.map(([r,a,s,o],l)=>c.jsxs("mesh",{position:[r,a,s],rotation:[0,0,o],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.4,.25,.3]}),c.jsx("meshStandardMaterial",{color:"#e8dcc8",roughness:.95})]},l))})},u0=({position:t,rotation:e=[0,0,0],type:n})=>{const i={forklift:{bg:"#fbbf24",text:"#1e293b"},hardhat:{bg:"#fbbf24",text:"#1e293b"},danger:{bg:"#ef4444",text:"#ffffff"},exit:{bg:"#22c55e",text:"#ffffff"},electrical:{bg:"#fbbf24",text:"#1e293b"}},{bg:r,text:a}=i[n];return c.jsxs("group",{position:t,rotation:e,children:[c.jsxs("mesh",{castShadow:!0,children:[c.jsx("boxGeometry",{args:[.8,.6,.02]}),c.jsx("meshStandardMaterial",{color:r})]}),c.jsxs("mesh",{position:[0,0,.011],children:[c.jsx("planeGeometry",{args:[.72,.52]}),c.jsx("meshBasicMaterial",{color:a})]}),c.jsxs("mesh",{position:[0,0,.012],children:[c.jsx("planeGeometry",{args:[.68,.48]}),c.jsx("meshBasicMaterial",{color:r})]}),n==="forklift"&&c.jsxs("mesh",{position:[0,0,.015],children:[c.jsx("planeGeometry",{args:[.3,.2]}),c.jsx("meshBasicMaterial",{color:a})]}),n==="danger"&&c.jsxs("mesh",{position:[0,.05,.015],rotation:[0,0,Math.PI],children:[c.jsx("circleGeometry",{args:[.15,3]}),c.jsx("meshBasicMaterial",{color:"#ffffff"})]}),n==="exit"&&c.jsxs("mesh",{position:[.15,0,.015],children:[c.jsx("boxGeometry",{args:[.15,.25,.001]}),c.jsx("meshBasicMaterial",{color:"#ffffff"})]}),c.jsxs("mesh",{position:[0,-.8,0],castShadow:!0,children:[c.jsx("cylinderGeometry",{args:[.03,.03,1.3,8]}),c.jsx("meshStandardMaterial",{color:"#64748b",metalness:.7,roughness:.3})]})]})},Jx=({position:t,rotation:e=[0,0,0],text:n,color:i="#3b82f6"})=>c.jsxs("group",{position:t,rotation:e,children:[c.jsxs("mesh",{children:[c.jsx("boxGeometry",{args:[1.2,.4,.03]}),c.jsx("meshStandardMaterial",{color:i})]}),c.jsxs("mesh",{position:[0,0,.016],children:[c.jsx("planeGeometry",{args:[1.1,.3]}),c.jsx("meshBasicMaterial",{color:"#ffffff",transparent:!0,opacity:.9})]})]}),sM=({start:t,end:e,size:n=[1.2,.8]})=>{const i=Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2)),r=[(t[0]+e[0])/2,(t[1]+e[1])/2,(t[2]+e[2])/2],a=new se(e[0]-t[0],e[1]-t[1],e[2]-t[2]).normalize(),s=z.useMemo(()=>{const o=new Jr;return o.setFromUnitVectors(new se(0,0,1),a),o},[a]);return c.jsxs("group",{position:r,quaternion:s,children:[c.jsxs("mesh",{castShadow:!0,children:[c.jsx("boxGeometry",{args:[n[0],n[1],i]}),c.jsx("meshStandardMaterial",{color:"#94a3b8",metalness:.6,roughness:.4})]}),Array.from({length:Math.floor(i/3)}).map((o,l)=>c.jsxs("mesh",{position:[0,n[1]/2+.01,-i/2+(l+1)*3],children:[c.jsx("boxGeometry",{args:[n[0]+.02,.02,.1]}),c.jsx("meshStandardMaterial",{color:"#64748b",metalness:.7,roughness:.3})]},l))]})},Bm=({position:t,rotation:e=[0,0,0],size:n=[.6,.4]})=>c.jsxs("group",{position:t,rotation:e,children:[c.jsxs("mesh",{children:[c.jsx("boxGeometry",{args:[n[0]+.1,n[1]+.1,.05]}),c.jsx("meshStandardMaterial",{color:"#475569",metalness:.7,roughness:.3})]}),Array.from({length:6}).map((i,r)=>c.jsxs("mesh",{position:[0,-n[1]/2+.05+r*(n[1]/6),.03],rotation:[.3,0,0],children:[c.jsx("boxGeometry",{args:[n[0]-.05,.02,.04]}),c.jsx("meshStandardMaterial",{color:"#334155",metalness:.6,roughness:.4})]},r))]}),r6=({position:t})=>c.jsxs("group",{position:t,children:[c.jsxs("mesh",{position:[0,.02,0],rotation:[-Math.PI/2,0,0],receiveShadow:!0,children:[c.jsx("planeGeometry",{args:[6,5]}),c.jsx("meshStandardMaterial",{color:"#22c55e",transparent:!0,opacity:.15})]}),c.jsxs("mesh",{position:[0,3,0],castShadow:!0,receiveShadow:!0,children:[c.jsx("boxGeometry",{args:[6,.15,5]}),c.jsx("meshStandardMaterial",{color:"#334155",metalness:.5,roughness:.5})]}),[[-2.7,0,-2.2],[-2.7,0,2.2],[2.7,0,-2.2],[2.7,0,2.2]].map((e,n)=>c.jsxs("mesh",{position:[e[0],1.5,e[2]],castShadow:!0,children:[c.jsx("cylinderGeometry",{args:[.08,.08,3,12]}),c.jsx("meshStandardMaterial",{color:"#64748b",metalness:.8,roughness:.3})]},n)),c.jsxs("group",{position:[0,0,1.5],children:[c.jsxs("mesh",{position:[0,.4,0],castShadow:!0,children:[c.jsx("boxGeometry",{args:[4,.08,.5]}),c.jsx("meshStandardMaterial",{color:"#78350f",roughness:.8})]}),[[-1.5,0,0],[1.5,0,0]].map((e,n)=>c.jsxs("mesh",{position:[e[0],.2,e[2]],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.1,.4,.4]}),c.jsx("meshStandardMaterial",{color:"#64748b",metalness:.7,roughness:.3})]},n))]}),c.jsxs("group",{position:[0,0,-.5],children:[c.jsxs("mesh",{position:[0,.7,0],castShadow:!0,children:[c.jsx("boxGeometry",{args:[2.5,.06,1.2]}),c.jsx("meshStandardMaterial",{color:"#1e293b",roughness:.6})]}),[[-1,0,-.4],[-1,0,.4],[1,0,-.4],[1,0,.4]].map((e,n)=>c.jsxs("mesh",{position:[e[0],.35,e[2]],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.08,.7,.08]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.6,roughness:.4})]},n))]}),c.jsxs("group",{position:[2.2,0,-1.5],children:[c.jsxs("mesh",{position:[0,1,0],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.8,2,.6]}),c.jsx("meshStandardMaterial",{color:"#1e40af",roughness:.4})]}),c.jsxs("mesh",{position:[0,1.2,.31],children:[c.jsx("planeGeometry",{args:[.5,.4]}),c.jsx("meshStandardMaterial",{color:"#60a5fa",emissive:"#60a5fa",emissiveIntensity:.5})]}),[.6,.7,.8].map((e,n)=>c.jsxs("mesh",{position:[0,e,.31],children:[c.jsx("circleGeometry",{args:[.03,8]}),c.jsx("meshStandardMaterial",{color:"#22c55e",emissive:"#22c55e",emissiveIntensity:.3})]},n))]}),c.jsx("group",{position:[0,2.8,-2.3],children:c.jsxs("mesh",{children:[c.jsx("boxGeometry",{args:[1.5,.4,.05]}),c.jsx("meshStandardMaterial",{color:"#22c55e"})]})}),c.jsx(Ide,{position:[-2.5,2.2,-2.35]}),c.jsx(Ude,{position:[2.5,1.8,-2.35]}),c.jsx("pointLight",{position:[0,2.5,0],color:"#fef3c7",intensity:.5,distance:8})]}),Ide=({position:t})=>{const e=Fe(r=>r.gameTime),n=e/12*Math.PI*2-Math.PI/2,i=e%1*60/60*Math.PI*2-Math.PI/2;return c.jsxs("group",{position:t,children:[c.jsxs("mesh",{children:[c.jsx("cylinderGeometry",{args:[.35,.35,.05,32]}),c.jsx("meshStandardMaterial",{color:"#f5f5f5"})]}),c.jsxs("mesh",{position:[0,0,.03],children:[c.jsx("torusGeometry",{args:[.35,.03,8,32]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.8,roughness:.3})]}),Array.from({length:12}).map((r,a)=>{const s=a/12*Math.PI*2;return c.jsxs("mesh",{position:[Math.sin(s)*.28,Math.cos(s)*.28,.03],children:[c.jsx("boxGeometry",{args:[.02,a%3===0?.06:.03,.01]}),c.jsx("meshStandardMaterial",{color:"#1e293b"})]},a)}),c.jsxs("mesh",{position:[Math.cos(n)*.1,Math.sin(n)*.1,.04],rotation:[0,0,-n],children:[c.jsx("boxGeometry",{args:[.2,.025,.01]}),c.jsx("meshStandardMaterial",{color:"#1e293b"})]}),c.jsxs("mesh",{position:[Math.cos(i)*.12,Math.sin(i)*.12,.05],rotation:[0,0,-i],children:[c.jsx("boxGeometry",{args:[.25,.015,.01]}),c.jsx("meshStandardMaterial",{color:"#374151"})]}),c.jsxs("mesh",{position:[0,0,.06],children:[c.jsx("cylinderGeometry",{args:[.025,.025,.02,16]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.8})]})]})},Ude=({position:t})=>{const e=Fe(n=>n.safetyMetrics.daysSinceIncident);return c.jsxs("group",{position:t,children:[c.jsxs("mesh",{children:[c.jsx("boxGeometry",{args:[1.2,1,.08]}),c.jsx("meshStandardMaterial",{color:"#78350f",roughness:.8})]}),c.jsxs("mesh",{position:[0,0,.045],children:[c.jsx("planeGeometry",{args:[1.1,.9]}),c.jsx("meshStandardMaterial",{color:"#d4a574",roughness:.9})]}),c.jsxs("mesh",{position:[0,.35,.05],children:[c.jsx("planeGeometry",{args:[.9,.15]}),c.jsx("meshStandardMaterial",{color:"#22c55e"})]}),c.jsxs("group",{position:[0,0,.05],children:[c.jsxs("mesh",{position:[0,0,.01],children:[c.jsx("planeGeometry",{args:[.8,.35]}),c.jsx("meshStandardMaterial",{color:"#1e293b"})]}),c.jsxs("mesh",{position:[0,0,.02],children:[c.jsx("planeGeometry",{args:[.6,.25]}),c.jsx("meshStandardMaterial",{color:"#22c55e",emissive:"#22c55e",emissiveIntensity:e>100?1:.5})]})]}),c.jsxs("mesh",{position:[0,-.28,.05],children:[c.jsx("planeGeometry",{args:[.9,.12]}),c.jsx("meshStandardMaterial",{color:"#475569"})]}),[[-.48,.38],[.48,.38],[-.48,-.38],[.48,-.38]].map(([n,i],r)=>c.jsxs("mesh",{position:[n,i,.06],children:[c.jsx("sphereGeometry",{args:[.025,8,8]}),c.jsx("meshStandardMaterial",{color:["#ef4444","#eab308","#22c55e","#3b82f6"][r],metalness:.5})]},r))]})},Lde=({floorSize:t,showZones:e})=>{Nde(),Ode();const n=Fe(g=>g.graphics),i=n.quality,r=i==="low",a=n.enableFloorPuddles,s=n.enableWornPaths,o=n.enableCableConduits,l=n.enableVolumetricFog,u=n.enableWarehouseClutter,h=n.enableSignage,p=n.enableVentilationDucts;return c.jsxs("group",{children:[c.jsxs("mesh",{rotation:[-Math.PI/2,0,0],position:[0,0,0],receiveShadow:i==="high"||i==="ultra",children:[c.jsx("planeGeometry",{args:[t,t]}),r?c.jsx("meshBasicMaterial",{color:"#1e293b"}):i==="medium"?c.jsx("meshStandardMaterial",{color:"#1e293b",roughness:.85,metalness:.15}):c.jsx(yue,{blur:[100,50],resolution:1024,mixBlur:.5,mixStrength:4,roughness:.85,depthScale:1.2,minDepthThreshold:.4,maxDepthThreshold:1.4,color:"#1e293b",metalness:.15,mirror:0})]}),!r&&Array.from({length:15}).map((g,x)=>c.jsxs("group",{children:[c.jsxs("mesh",{rotation:[-Math.PI/2,0,0],position:[-35+x*5,.03,0],children:[c.jsx("planeGeometry",{args:[.05,t]}),c.jsx("meshBasicMaterial",{color:"#334155",transparent:!0,opacity:.5,depthWrite:!1})]}),c.jsxs("mesh",{rotation:[-Math.PI/2,0,0],position:[0,.03,-35+x*5],children:[c.jsx("planeGeometry",{args:[t,.05]}),c.jsx("meshBasicMaterial",{color:"#334155",transparent:!0,opacity:.5,depthWrite:!1})]})]},x)),e&&c.jsxs(c.Fragment,{children:[c.jsx(Kx,{position:[-10,.02,0],size:[3,t-10],type:"walkway"}),c.jsx(Kx,{position:[10,.02,0],size:[3,t-10],type:"walkway"}),c.jsx(Kx,{position:[0,.02,10],size:[t-20,2.5],type:"walkway",rotation:Math.PI/2}),c.jsx(Kx,{position:[0,.02,-10],size:[t-20,2.5],type:"walkway",rotation:Math.PI/2}),c.jsx(Kx,{position:[0,.02,-20],size:[50,8],type:"danger",rotation:Math.PI/2})]}),!r&&c.jsxs("group",{position:[0,6,0],children:[c.jsxs("mesh",{receiveShadow:!0,castShadow:!0,children:[c.jsx("boxGeometry",{args:[50,.15,3]}),c.jsx("meshStandardMaterial",{color:"#475569",metalness:.8,roughness:.3,transparent:!0,opacity:.95})]}),c.jsxs("mesh",{position:[0,.6,1.4],castShadow:!0,children:[c.jsx("boxGeometry",{args:[50,.05,.05]}),c.jsx("meshStandardMaterial",{color:"#94a3b8",metalness:.9,roughness:.2})]}),c.jsxs("mesh",{position:[0,.6,-1.4],castShadow:!0,children:[c.jsx("boxGeometry",{args:[50,.05,.05]}),c.jsx("meshStandardMaterial",{color:"#94a3b8",metalness:.9,roughness:.2})]}),c.jsxs("mesh",{position:[0,.3,1.4],castShadow:!0,children:[c.jsx("boxGeometry",{args:[50,.05,.05]}),c.jsx("meshStandardMaterial",{color:"#94a3b8",metalness:.9,roughness:.2})]}),c.jsxs("mesh",{position:[0,.3,-1.4],castShadow:!0,children:[c.jsx("boxGeometry",{args:[50,.05,.05]}),c.jsx("meshStandardMaterial",{color:"#94a3b8",metalness:.9,roughness:.2})]}),Array.from({length:20}).map((g,x)=>c.jsxs("group",{children:[c.jsxs("mesh",{position:[-24+x*2.5,.3,1.4],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.05,.6,.05]}),c.jsx("meshStandardMaterial",{color:"#94a3b8",metalness:.9,roughness:.2})]}),c.jsxs("mesh",{position:[-24+x*2.5,.3,-1.4],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.05,.6,.05]}),c.jsx("meshStandardMaterial",{color:"#94a3b8",metalness:.9,roughness:.2})]})]},x)),c.jsxs("mesh",{position:[0,.08,0],children:[c.jsx("planeGeometry",{args:[50,3]}),c.jsx("meshStandardMaterial",{color:"#334155",metalness:.7,roughness:.4,transparent:!0,opacity:.3})]})]}),!r&&[-20,-10,0,10,20].map((g,x)=>c.jsxs("mesh",{position:[g,3,0],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.3,6,.3]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.8,roughness:.3})]},x)),!r&&c.jsx("group",{position:[-45,0,0],rotation:[0,Math.PI/2,0],children:Array.from({length:12}).map((g,x)=>c.jsxs("mesh",{position:[0,.25+x*.5,-x*.4],castShadow:!0,children:[c.jsx("boxGeometry",{args:[1.5,.1,.4]}),c.jsx("meshStandardMaterial",{color:"#475569",metalness:.7,roughness:.3})]},x))}),!r&&c.jsxs(c.Fragment,{children:[c.jsx("group",{rotation:[0,-Math.PI/2,0],children:c.jsx(r6,{position:[0,0,-40]})}),c.jsx("group",{rotation:[0,Math.PI/2,0],children:c.jsx(r6,{position:[0,0,-40]})})]}),!r&&c.jsx(Bde,{position:[35,0,30]}),!r&&c.jsxs(c.Fragment,{children:[c.jsx(oM,{position:[0,0,25],type:"first-aid"}),c.jsx(oM,{position:[-20,0,-10],type:"eyewash"}),c.jsx(oM,{position:[20,0,-10],type:"fire"}),c.jsx(oM,{position:[0,0,-25],type:"emergency-stop"})]}),a&&c.jsxs(c.Fragment,{children:[c.jsx(Lm,{position:[-15,.01,5],size:[2.5,1.8],seed:1}),c.jsx(Lm,{position:[18,.01,-15],size:[1.8,2.2],seed:2}),c.jsx(Lm,{position:[-8,.01,-18],size:[3,2],seed:3}),c.jsx(Lm,{position:[5,.01,15],size:[2,1.5],seed:4}),c.jsx(Lm,{position:[-22,.01,12],size:[1.5,1.2],seed:5}),c.jsx(Lm,{position:[25,.01,8],size:[2.2,1.8],seed:6})]}),s&&c.jsxs(c.Fragment,{children:[c.jsx(Qx,{path:[[-10,0,-30],[-10,0,0],[-10,0,30]],width:2.5}),c.jsx(Qx,{path:[[10,0,-30],[10,0,0],[10,0,30]],width:2.5}),c.jsx(Qx,{path:[[-30,0,10],[0,0,10],[30,0,10]],width:1.8}),c.jsx(Qx,{path:[[10,0,0],[30,0,0],[40,0,0]],width:1.5}),c.jsx(Qx,{path:[[-10,0,0],[-30,0,0],[-40,0,0]],width:1.5})]}),o&&c.jsxs(c.Fragment,{children:[c.jsx(aM,{start:[-50,28,-5],end:[50,28,-5]}),c.jsx(aM,{start:[-50,28,5],end:[50,28,5]}),c.jsx(aM,{start:[-20,28,-30],end:[-20,28,30]}),c.jsx(aM,{start:[20,28,-30],end:[20,28,30]}),c.jsx(c0,{start:[-54,3,-30],end:[-54,3,30],radius:.06,color:"#64748b"}),c.jsx(c0,{start:[-54,5,-30],end:[-54,5,30],radius:.04,color:"#f97316"}),c.jsx(c0,{start:[54,3,-30],end:[54,3,30],radius:.06,color:"#64748b"}),c.jsx(c0,{start:[54,5,-30],end:[54,5,30],radius:.04,color:"#3b82f6"}),c.jsx(c0,{start:[-20,28,-20],end:[-20,12,-20],radius:.05}),c.jsx(c0,{start:[0,28,-20],end:[0,12,-20],radius:.05}),c.jsx(c0,{start:[20,28,-20],end:[20,12,-20],radius:.05})]}),l&&c.jsx(Pde,{density:.012}),u&&c.jsxs(c.Fragment,{children:[c.jsx(Dh,{position:[35,0,20],layers:2,hasCrates:!0,rotation:.1}),c.jsx(Dh,{position:[38,0,18],layers:1,hasCrates:!1,rotation:-.05}),c.jsx(Dh,{position:[32,0,22],layers:3,hasCrates:!0,rotation:.2}),c.jsx(Dh,{position:[15,0,25],layers:2,hasCrates:!1,rotation:Math.PI/2}),c.jsx(Dh,{position:[-15,0,25],layers:1,hasCrates:!0,rotation:Math.PI/2+.1}),c.jsx(CE,{position:[-5,0,-25],count:6,rotation:.15}),c.jsx(CE,{position:[5,0,-25],count:4,rotation:-.1}),c.jsx(CE,{position:[0,0,-28],count:8}),c.jsx(Dh,{position:[-35,0,5],layers:1,hasCrates:!1,rotation:.3}),c.jsx(Dh,{position:[-38,0,-8],layers:2,hasCrates:!0,rotation:-.15}),c.jsx(Dh,{position:[30,0,-5],layers:1,hasCrates:!1,rotation:Math.PI/4})]}),h&&c.jsxs(c.Fragment,{children:[c.jsx(u0,{position:[-10,1.5,25],type:"forklift",rotation:[0,Math.PI,0]}),c.jsx(u0,{position:[10,1.5,25],type:"forklift",rotation:[0,Math.PI,0]}),c.jsx(u0,{position:[30,1.5,35],type:"hardhat",rotation:[0,Math.PI,0]}),c.jsx(u0,{position:[-30,1.5,35],type:"hardhat",rotation:[0,Math.PI,0]}),c.jsx(u0,{position:[-25,1.5,-18],type:"danger"}),c.jsx(u0,{position:[25,1.5,-18],type:"danger"}),c.jsx(Jx,{position:[0,4,39.9],rotation:[0,Math.PI,0],text:"EXIT",color:"#22c55e"}),c.jsx(Jx,{position:[-54.9,4,0],rotation:[0,Math.PI/2,0],text:"EXIT",color:"#22c55e"}),c.jsx(Jx,{position:[0,4,-39.9],rotation:[0,0,0],text:"ZONE 1 - STORAGE",color:"#3b82f6"}),c.jsx(Jx,{position:[0,4,-10],rotation:[0,0,0],text:"ZONE 2 - MILLING",color:"#f97316"}),c.jsx(Jx,{position:[54.9,4,0],rotation:[0,-Math.PI/2,0],text:"ZONE 3 - PACKING",color:"#8b5cf6"}),c.jsx(u0,{position:[-35,1.5,-30],type:"electrical"})]}),p&&c.jsxs(c.Fragment,{children:[c.jsx(sM,{start:[-50,26,15],end:[50,26,15],size:[1.5,1]}),c.jsx(sM,{start:[-50,26,-15],end:[50,26,-15],size:[1.5,1]}),c.jsx(sM,{start:[-30,26,-15],end:[-30,26,15],size:[1,.8]}),c.jsx(sM,{start:[30,26,-15],end:[30,26,15],size:[1,.8]}),c.jsx(Bm,{position:[-54.9,8,-20],rotation:[0,Math.PI/2,0],size:[.8,.5]}),c.jsx(Bm,{position:[-54.9,8,0],rotation:[0,Math.PI/2,0],size:[.8,.5]}),c.jsx(Bm,{position:[-54.9,8,20],rotation:[0,Math.PI/2,0],size:[.8,.5]}),c.jsx(Bm,{position:[54.9,8,-20],rotation:[0,-Math.PI/2,0],size:[.8,.5]}),c.jsx(Bm,{position:[54.9,8,0],rotation:[0,-Math.PI/2,0],size:[.8,.5]}),c.jsx(Bm,{position:[54.9,8,20],rotation:[0,-Math.PI/2,0],size:[.8,.5]})]})]})},Bde=({position:t})=>c.jsxs("group",{position:t,children:[c.jsxs("mesh",{position:[0,.02,0],rotation:[-Math.PI/2,0,0],receiveShadow:!0,children:[c.jsx("planeGeometry",{args:[8,6]}),c.jsx("meshStandardMaterial",{color:"#374151",roughness:.8})]}),c.jsxs("mesh",{position:[0,1.5,-3],receiveShadow:!0,children:[c.jsx("boxGeometry",{args:[8,3,.1]}),c.jsx("meshStandardMaterial",{color:"#475569",roughness:.7})]}),[-3,-1.8,-.6,.6,1.8,3].map((e,n)=>c.jsxs("group",{position:[e,0,-2.5],children:[c.jsxs("mesh",{position:[0,1,0],castShadow:!0,children:[c.jsx("boxGeometry",{args:[1,2,.5]}),c.jsx("meshStandardMaterial",{color:["#3b82f6","#22c55e","#f97316","#8b5cf6","#ef4444","#06b6d4"][n],roughness:.4,metalness:.3})]}),c.jsxs("mesh",{position:[.35,1.2,.26],children:[c.jsx("boxGeometry",{args:[.05,.15,.05]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.8})]}),c.jsxs("mesh",{position:[0,.3,.26],children:[c.jsx("planeGeometry",{args:[.6,.15]}),c.jsx("meshStandardMaterial",{color:"#1e293b"})]}),c.jsxs("mesh",{position:[0,1.7,.26],children:[c.jsx("planeGeometry",{args:[.6,.15]}),c.jsx("meshStandardMaterial",{color:"#1e293b"})]})]},n)),c.jsxs("group",{position:[0,0,-.5],children:[c.jsxs("mesh",{position:[0,.35,0],castShadow:!0,children:[c.jsx("boxGeometry",{args:[6,.08,.4]}),c.jsx("meshStandardMaterial",{color:"#78350f",roughness:.8})]}),[[-2.5,0,0],[2.5,0,0]].map((e,n)=>c.jsxs("mesh",{position:[e[0],.175,e[2]],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.08,.35,.35]}),c.jsx("meshStandardMaterial",{color:"#64748b",metalness:.7})]},n))]}),c.jsx("group",{position:[-3.9,1.5,0],children:[0,.8,1.6,2.4].map((e,n)=>c.jsxs("mesh",{position:[0,0,e-1.2],children:[c.jsx("cylinderGeometry",{args:[.02,.02,.15,8],rotation:[0,0,Math.PI/2]}),c.jsx("meshStandardMaterial",{color:"#64748b",metalness:.8})]},n))}),c.jsx("pointLight",{position:[0,2.5,0],color:"#fef3c7",intensity:.4,distance:6})]}),oM=({position:t,type:e})=>{const i={"first-aid":"#22c55e",eyewash:"#3b82f6",fire:"#ef4444","emergency-stop":"#f97316"}[e];return c.jsxs("group",{position:t,children:[c.jsxs("mesh",{position:[0,.8,0],castShadow:!0,children:[c.jsx("cylinderGeometry",{args:[.15,.2,1.6,12]}),c.jsx("meshStandardMaterial",{color:"#475569",metalness:.6,roughness:.4})]}),c.jsxs("mesh",{position:[0,1.4,0],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.5,.5,.25]}),c.jsx("meshStandardMaterial",{color:i,roughness:.4})]}),e==="first-aid"&&c.jsxs("group",{position:[0,1.4,.13],children:[c.jsxs("mesh",{children:[c.jsx("boxGeometry",{args:[.25,.08,.02]}),c.jsx("meshStandardMaterial",{color:"#ffffff"})]}),c.jsxs("mesh",{children:[c.jsx("boxGeometry",{args:[.08,.25,.02]}),c.jsx("meshStandardMaterial",{color:"#ffffff"})]})]}),e==="fire"&&c.jsxs("mesh",{position:[0,.5,.15],castShadow:!0,children:[c.jsx("cylinderGeometry",{args:[.08,.1,.8,12]}),c.jsx("meshStandardMaterial",{color:"#dc2626",roughness:.4})]}),e==="emergency-stop"&&c.jsxs("mesh",{position:[0,1.4,.15],children:[c.jsx("cylinderGeometry",{args:[.12,.12,.08,16]}),c.jsx("meshStandardMaterial",{color:"#dc2626",emissive:"#dc2626",emissiveIntensity:.5})]}),c.jsxs("mesh",{position:[0,.01,0],rotation:[-Math.PI/2,0,0],children:[c.jsx("ringGeometry",{args:[.5,.7,16]}),c.jsx("meshStandardMaterial",{color:i,transparent:!0,opacity:.3})]}),c.jsx("pointLight",{position:[0,1.5,.3],color:i,intensity:.3,distance:3})]})},zde=({machines:t})=>{const e=z.useMemo(()=>{const i=[],r=t.filter(o=>o.type===Wn.SILO),a=t.filter(o=>o.type===Wn.ROLLER_MILL),s=t.filter(o=>o.type===Wn.PLANSIFTER);return a.forEach((o,l)=>{const u=r[l%r.length];u&&i.push({id:`spout-silo-mill-${l}`,x:(u.position[0]+o.position[0])/2,y:8,z:(u.position[2]+o.position[2])/2})}),s.forEach((o,l)=>{i.push({id:`spout-sifter-${l}`,x:o.position[0],y:o.position[1],z:o.position[2]})}),i},[t]);z.useEffect(()=>(e.forEach(i=>{wt.startSpoutingSound(i.id,i.x,i.y,i.z)}),()=>{e.forEach(i=>{wt.stopSpoutingSound(i.id)})}),[e]),It(()=>{e.forEach(i=>{wt.updateSpoutingSpatialVolume(i.id)})});const n=z.useMemo(()=>{const i=[],a=t.filter(h=>h.type===Wn.SILO),s=t.filter(h=>h.type===Wn.ROLLER_MILL),o=t.filter(h=>h.type===Wn.PLANSIFTER),l=t.filter(h=>h.type===Wn.PACKER),u=(h,p,g,x="#94a3b8")=>{const b=h.clone().lerp(p,.25);b.y=Math.max(h.y,p.y)+5;const M=h.clone().lerp(p,.75);M.y=Math.max(h.y,p.y)+5;const S=new ST([h,b,M,p]),T=new wb(S,32,.18,12,!1),A=new Ab({color:x,metalness:.85,roughness:.15});return c.jsx("mesh",{geometry:T,material:A,castShadow:!0},g)};return s.forEach((h,p)=>{const g=a[p%a.length];if(!g)return;const x=new se(g.position[0],3,g.position[2]),b=new se(h.position[0],h.position[1]+h.size[1]+1.5,h.position[2]);i.push(u(x,b,`pipe-s-m-${p}`,"#64748b"))}),s.forEach((h,p)=>{const g=o[p%o.length];if(!g)return;const x=new se(h.position[0],h.position[1]+h.size[1],h.position[2]),b=(p%3-1)*1.5,M=new se(g.position[0]+b,g.position[1]+g.size[1]/2,g.position[2]);i.push(u(x,M,`pipe-m-s-${p}`,"#cbd5e1"))}),l.forEach((h,p)=>{const g=o[p%o.length];if(!g)return;const x=new se(g.position[0],g.position[1]-2,g.position[2]),b=new se(h.position[0],h.position[1]+h.size[1]+1,h.position[2]);i.push(u(x,b,`pipe-s-p-${p}`,"#e2e8f0"))}),i},[t]);return c.jsxs("group",{children:[n,c.jsx(kde,{})]})},kde=()=>{const t=z.useMemo(()=>[[-15,10,-12],[0,10,-12],[15,10,-12],[-10,12,0],[10,12,0],[-8,10,10],[8,10,10]].map((n,i)=>c.jsxs("group",{position:n,children:[c.jsxs("mesh",{castShadow:!0,children:[c.jsx("cylinderGeometry",{args:[.1,.1,n[1]*2]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.8,roughness:.3})]}),c.jsxs("mesh",{position:[0,0,0],rotation:[0,0,Math.PI/2],castShadow:!0,children:[c.jsx("cylinderGeometry",{args:[.08,.08,3]}),c.jsx("meshStandardMaterial",{color:"#475569",metalness:.8,roughness:.3})]})]},i)),[]);return c.jsx("group",{children:t})},a6=[-20,0,20],Fde=0,s6=new se,o6=new un,l6=new se,Gde=new Jr,Vde=(t,e,n)=>{if(e<=5||e>=32)return 0;const r=3+(e-5)/27*3,a=r*r;for(let s=0;s<a6.length;s++){const o=a6[s],l=t-o,u=n-Fde,h=l*l+u*u;if(h<a)return 1-Math.sqrt(h)/r*.5}return 0};class Hde{constructor(e){this.maxCount=e,this.activeCount=0,this.particles=[];for(let n=0;n<e;n++)this.particles.push(this.createParticle(!1))}createParticle(e=!0){return{t:Math.random()*100,factor:20+Math.random()*80,speed:.005+Math.random()/300,xFactor:-40+Math.random()*80,yFactor:Math.random()*25,zFactor:-30+Math.random()*60,active:e,lifetime:0,maxLifetime:200+Math.random()*300}}activateParticle(e){if(e<this.maxCount&&!this.particles[e].active){const n=this.particles[e];n.active=!0,n.lifetime=0,n.t=Math.random()*100,n.factor=20+Math.random()*80,n.speed=.005+Math.random()/300,n.xFactor=-40+Math.random()*80,n.yFactor=Math.random()*25,n.zFactor=-30+Math.random()*60,n.maxLifetime=200+Math.random()*300,this.activeCount++}}deactivateParticle(e){e<this.maxCount&&this.particles[e].active&&(this.particles[e].active=!1,this.activeCount--)}setActiveCount(e){for(e=Math.min(e,this.maxCount);this.activeCount<e;)for(let n=0;n<this.maxCount;n++)if(!this.particles[n].active){this.activateParticle(n);break}for(;this.activeCount>e;)for(let n=this.maxCount-1;n>=0;n--)if(this.particles[n].active){this.deactivateParticle(n);break}}}const qde=({count:t})=>{const e=z.useRef(null),n=Fe(p=>p.gameTime),i=Fe(p=>p.graphics),r=Math.min(t,i.dustParticleCount),a=n>=7&&n<18,s=z.useMemo(()=>new Hde(t),[t]);z.useMemo(()=>{s.setActiveCount(r)},[s,r]);const o=z.useMemo(()=>new Float32Array(t*3).fill(0),[t]),l=z.useRef(null),u=z.useMemo(()=>{const p=new un;return p.makeScale(0,0,0),p},[]),h=i.enableDustParticles;return It(()=>{if(!e.current||!h)return;const p=s.particles;for(let g=0;g<t;g++){const x=p[g];if(!x.active){e.current.setMatrixAt(g,u);continue}x.lifetime++,x.lifetime>x.maxLifetime&&(x.t=Math.random()*100,x.xFactor=-40+Math.random()*80,x.yFactor=Math.random()*25,x.zFactor=-30+Math.random()*60,x.lifetime=0,x.maxLifetime=200+Math.random()*300);const{factor:b,speed:M,xFactor:S,yFactor:T,zFactor:A}=x;x.t+=M;const E=x.t,j=Math.max(.3,Math.cos(E)*.5+.5),R=S+Math.cos(E/10*b)*2;let C=T+Math.sin(E/10*b)*2+5;const D=A+Math.cos(E/10*b)*2;C<1&&(C=25),C>30&&(C=5);const U=a?Vde(R,C,D):0,I=1+U*1.5,L=j*.8*I;s6.set(R,C,D),l6.setScalar(L),o6.compose(s6,Gde,l6),e.current.setMatrixAt(g,o6);const F=.996,G=.953,H=.78;o[g*3]=F+U*.004,o[g*3+1]=G+U*.047,o[g*3+2]=H+U*.22}e.current.instanceMatrix.needsUpdate=!0,l.current&&(l.current.needsUpdate=!0)}),h?c.jsxs("instancedMesh",{ref:e,args:[void 0,void 0,t],frustumCulled:!1,children:[c.jsx("dodecahedronGeometry",{args:[.04,0],children:c.jsx("instancedBufferAttribute",{ref:l,attach:"attributes-color",args:[o,3]})}),c.jsx("meshBasicMaterial",{color:"#fef3c7",transparent:!0,opacity:.5,vertexColors:!0})]},`dust-particles-${t}`):null},Wde=()=>{const t=z.useRef(null),n=Fe(s=>s.graphics).enableGrainFlow,i=200,{positions:r,velocities:a}=z.useMemo(()=>{const s=new Float32Array(i*3),o=new Float32Array(i*3);for(let l=0;l<i;l++)s[l*3]=(Math.random()-.5)*30,s[l*3+1]=5+Math.random()*15,s[l*3+2]=-15+Math.random()*20,o[l*3]=0,o[l*3+1]=-.04-Math.random()*.02,o[l*3+2]=.015+Math.random()*.01;return{positions:s,velocities:o}},[]);return It(()=>{if(!t.current||!n)return;const s=t.current.geometry.attributes.position.array;for(let o=0;o<i;o++){const l=o*3;s[l]+=a[l],s[l+1]+=a[l+1],s[l+2]+=a[l+2],s[l+1]<2&&(s[l]=(Math.random()-.5)*30,s[l+1]=18+Math.random()*5,s[l+2]=-15)}t.current.geometry.attributes.position.needsUpdate=!0}),n?c.jsxs("points",{ref:t,children:[c.jsx("bufferGeometry",{children:c.jsx("bufferAttribute",{attach:"attributes-position",count:i,array:r,itemSize:3})}),c.jsx("pointsMaterial",{size:.12,color:"#fcd34d",transparent:!0,opacity:.8,sizeAttenuation:!0})]}):null},Xde=({position:t,type:e,intensity:n=1})=>{const i=z.useRef(null),r=e==="dust"?30:20,{positions:a,velocities:s,lifetimes:o}=z.useMemo(()=>{const p=new Float32Array(r*3),g=new Float32Array(r*3),x=new Float32Array(r);for(let b=0;b<r;b++)p[b*3]=(Math.random()-.5)*.5,p[b*3+1]=Math.random()*.5,p[b*3+2]=(Math.random()-.5)*.5,g[b*3]=(Math.random()-.5)*.3,g[b*3+1]=e==="steam"?.8+Math.random()*.5:.3+Math.random()*.3,g[b*3+2]=(Math.random()-.5)*.3,x[b]=Math.random();return{positions:p,velocities:g,lifetimes:x}},[r,e]);It((p,g)=>{if(!i.current)return;const x=i.current.geometry.attributes.position.array;for(let b=0;b<r;b++)o[b]+=g*(e==="steam"?1.5:1),o[b]>1&&(o[b]=0,x[b*3]=(Math.random()-.5)*.5,x[b*3+1]=Math.random()*.3,x[b*3+2]=(Math.random()-.5)*.5,s[b*3]=(Math.random()-.5)*.3,s[b*3+1]=e==="steam"?.8+Math.random()*.5:.3+Math.random()*.3,s[b*3+2]=(Math.random()-.5)*.3),x[b*3]+=s[b*3]*g,x[b*3+1]+=s[b*3+1]*g,x[b*3+2]+=s[b*3+2]*g,s[b*3]+=(Math.random()-.5)*g*.5,s[b*3+2]+=(Math.random()-.5)*g*.5,e==="steam"&&(s[b*3+1]*=.98);i.current.geometry.attributes.position.needsUpdate=!0});const l=e==="steam"?"#e2e8f0":e==="dust"?"#d4a574":"#9ca3af",u=e==="steam"?.3:.4,h=e==="steam"?.15:.08;return c.jsxs("points",{ref:i,position:t,children:[c.jsx("bufferGeometry",{children:c.jsx("bufferAttribute",{attach:"attributes-position",count:r,array:a,itemSize:3})}),c.jsx("pointsMaterial",{size:h*n,color:l,transparent:!0,opacity:u*n,sizeAttenuation:!0,depthWrite:!1})]},`steam-${r}-${e}`)},$de=()=>{const t=Fe(r=>r.graphics),e=t.quality!=="low",n=z.useMemo(()=>[{position:[-18,4,-6],type:"steam",intensity:.8},{position:[-10,4,-6],type:"steam",intensity:.7},{position:[-2,4,-6],type:"exhaust",intensity:.6},{position:[6,4,-6],type:"steam",intensity:.9},{position:[14,4,-6],type:"exhaust",intensity:.7},{position:[-12,12,6],type:"dust",intensity:1},{position:[0,12,6],type:"dust",intensity:.9},{position:[12,12,6],type:"dust",intensity:.8},{position:[-15,3,20],type:"dust",intensity:.7},{position:[0,3,20],type:"dust",intensity:.8},{position:[15,3,20],type:"dust",intensity:.6}],[]),i=t.quality==="medium"?n.filter((r,a)=>a%2===0):n;return e?c.jsx("group",{children:i.map((r,a)=>c.jsx(Xde,{position:r.position,type:r.type,intensity:r.intensity},a))}):null},Yde=({productionSpeed:t})=>{const e=z.useRef(null),n=z.useRef(null),i=z.useRef("arriving"),r=z.useRef("arriving");return z.useRef(""),z.useRef(""),z.useEffect(()=>(wt.startTruckEngine("truck-1",!0),wt.startTruckEngine("truck-2",!0),()=>{wt.stopTruckEngine("truck-1"),wt.stopTruckEngine("truck-2")}),[]),It(a=>{const s=a.clock.elapsedTime*(t*.5+.2);if(e.current){const o=s%25;let l,u;o<10?(l=ba.lerp(-80,-30,o/10),u="arriving"):o<18?(l=-30,u="docked"):(l=ba.lerp(-30,80,(o-18)/7),u="leaving"),e.current.position.z=l,u!==i.current&&(u==="docked"&&i.current==="arriving"?(wt.playDoorOpen(),wt.playTruckArrival(),wt.updateTruckEngine("truck-1",!1)):u==="leaving"&&i.current==="docked"?(wt.playDoorClose(),wt.playTruckDeparture(),wt.updateTruckEngine("truck-1",!0)):u==="arriving"&&wt.updateTruckEngine("truck-1",!0),i.current=u)}if(n.current){const o=(s+12)%25;let l,u;o<10?(l=ba.lerp(-80,-30,o/10),u="arriving"):o<18?(l=-30,u="docked"):(l=ba.lerp(-30,80,(o-18)/7),u="leaving"),n.current.position.z=l,u!==r.current&&(u==="docked"&&r.current==="arriving"?(wt.playDoorOpen(),wt.playTruckArrival(),wt.updateTruckEngine("truck-2",!1)):u==="leaving"&&r.current==="docked"?(wt.playDoorClose(),wt.playTruckDeparture(),wt.updateTruckEngine("truck-2",!0)):u==="arriving"&&wt.updateTruckEngine("truck-2",!0),r.current=u)}}),c.jsxs("group",{position:[35,0,0],children:[c.jsxs("mesh",{position:[0,1,-28],receiveShadow:!0,castShadow:!0,children:[c.jsx("boxGeometry",{args:[18,2,8]}),c.jsx("meshStandardMaterial",{color:"#475569",roughness:.8})]}),[-6,0,6].map((a,s)=>c.jsxs("mesh",{position:[a,1,-24],castShadow:!0,children:[c.jsx("boxGeometry",{args:[1,1.5,.5]}),c.jsx("meshStandardMaterial",{color:"#1f2937"})]},s)),c.jsxs("mesh",{position:[0,.05,-35],rotation:[-Math.PI/2,0,0],receiveShadow:!0,children:[c.jsx("planeGeometry",{args:[25,25]}),c.jsx("meshStandardMaterial",{color:"#334155",roughness:.9})]}),c.jsxs("mesh",{position:[-4,.06,-40],rotation:[-Math.PI/2,0,0],children:[c.jsx("planeGeometry",{args:[.2,20]}),c.jsx("meshBasicMaterial",{color:"#fef3c7"})]}),c.jsxs("mesh",{position:[4,.06,-40],rotation:[-Math.PI/2,0,0],children:[c.jsx("planeGeometry",{args:[.2,20]}),c.jsx("meshBasicMaterial",{color:"#fef3c7"})]}),c.jsx("group",{ref:e,position:[-4,0,-50],children:c.jsx(c6,{color:"#dc2626",company:"GRAIN CO"})}),c.jsx("group",{ref:n,position:[4,0,-50],children:c.jsx(c6,{color:"#2563eb",company:"FLOUR EXPRESS"})}),c.jsx(Sa,{position:[0,4,-24],fontSize:.8,color:"#ffffff",anchorX:"center",anchorY:"middle",outlineWidth:.05,outlineColor:"#000",children:"LOADING BAY A"})]})},c6=({color:t,company:e})=>c.jsxs("group",{children:[c.jsxs("mesh",{position:[0,1.8,2.5],castShadow:!0,children:[c.jsx("boxGeometry",{args:[3,2.8,2.5]}),c.jsx("meshStandardMaterial",{color:t,metalness:.4,roughness:.6})]}),c.jsxs("mesh",{position:[0,2.2,3.8],children:[c.jsx("boxGeometry",{args:[2.5,1.5,.1]}),c.jsx("meshStandardMaterial",{color:"#1e3a5f",metalness:.9,roughness:.1})]}),c.jsxs("mesh",{position:[0,2.5,-4],castShadow:!0,children:[c.jsx("boxGeometry",{args:[3.5,3.5,10]}),c.jsx("meshStandardMaterial",{color:"#e2e8f0",metalness:.5,roughness:.3})]}),e==="GRAIN CO"?c.jsxs(c.Fragment,{children:[c.jsxs("group",{position:[1.76,2.5,-4],rotation:[0,Math.PI/2,0],children:[c.jsxs("mesh",{position:[0,0,.01],children:[c.jsx("boxGeometry",{args:[8.5,2.8,.05]}),c.jsx("meshStandardMaterial",{color:"#991b1b",metalness:.35,roughness:.55})]}),c.jsx(Sa,{position:[0,.4,.06],fontSize:.7,color:"#fbbf24",anchorX:"center",anchorY:"middle",children:"GRAIN CO"}),c.jsx(Sa,{position:[0,-.35,.06],fontSize:.3,color:"#fef3c7",anchorX:"center",anchorY:"middle",children:"Premium Grain Transport"})]}),c.jsxs("group",{position:[-1.76,2.5,-4],rotation:[0,-Math.PI/2,0],children:[c.jsxs("mesh",{position:[0,0,.01],children:[c.jsx("boxGeometry",{args:[8.5,2.8,.05]}),c.jsx("meshStandardMaterial",{color:"#991b1b",metalness:.35,roughness:.55})]}),c.jsx(Sa,{position:[0,.4,.06],fontSize:.7,color:"#fbbf24",anchorX:"center",anchorY:"middle",children:"GRAIN CO"}),c.jsx(Sa,{position:[0,-.35,.06],fontSize:.3,color:"#fef3c7",anchorX:"center",anchorY:"middle",children:"Premium Grain Transport"})]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("group",{position:[1.76,2.5,-4],rotation:[0,Math.PI/2,0],children:[c.jsxs("mesh",{position:[0,0,.01],children:[c.jsx("boxGeometry",{args:[8.5,2.8,.05]}),c.jsx("meshStandardMaterial",{color:"#1e40af",metalness:.35,roughness:.55})]}),c.jsx(Sa,{position:[0,.4,.06],fontSize:.6,color:"#fef3c7",anchorX:"center",anchorY:"middle",children:"FLOUR EXPRESS"}),c.jsx(Sa,{position:[0,-.35,.06],fontSize:.25,color:"#93c5fd",anchorX:"center",anchorY:"middle",children:"Fast & Fresh Delivery"})]}),c.jsxs("group",{position:[-1.76,2.5,-4],rotation:[0,-Math.PI/2,0],children:[c.jsxs("mesh",{position:[0,0,.01],children:[c.jsx("boxGeometry",{args:[8.5,2.8,.05]}),c.jsx("meshStandardMaterial",{color:"#1e40af",metalness:.35,roughness:.55})]}),c.jsx(Sa,{position:[0,.4,.06],fontSize:.6,color:"#fef3c7",anchorX:"center",anchorY:"middle",children:"FLOUR EXPRESS"}),c.jsx(Sa,{position:[0,-.35,.06],fontSize:.25,color:"#93c5fd",anchorX:"center",anchorY:"middle",children:"Fast & Fresh Delivery"})]})]}),[-1.3,1.3].map((n,i)=>c.jsxs("mesh",{position:[n,.6,2.5],rotation:[0,0,Math.PI/2],castShadow:!0,children:[c.jsx("cylinderGeometry",{args:[.6,.6,.4,16]}),c.jsx("meshStandardMaterial",{color:"#1f2937",roughness:.8})]},`front-${i}`)),[-1.3,1.3].map((n,i)=>c.jsxs("group",{children:[c.jsxs("mesh",{position:[n,.6,-7],rotation:[0,0,Math.PI/2],castShadow:!0,children:[c.jsx("cylinderGeometry",{args:[.6,.6,.4,16]}),c.jsx("meshStandardMaterial",{color:"#1f2937",roughness:.8})]}),c.jsxs("mesh",{position:[n,.6,-8],rotation:[0,0,Math.PI/2],castShadow:!0,children:[c.jsx("cylinderGeometry",{args:[.6,.6,.4,16]}),c.jsx("meshStandardMaterial",{color:"#1f2937",roughness:.8})]})]},`rear-${i}`)),[-.8,.8].map((n,i)=>c.jsxs("mesh",{position:[n,1.2,3.8],children:[c.jsx("sphereGeometry",{args:[.2]}),c.jsx("meshStandardMaterial",{color:"#fef3c7",emissive:"#fef3c7",emissiveIntensity:.5})]},i))]}),Zde=({path:t,color:e})=>{const n=z.useMemo(()=>{const i=t.map(r=>new se(r[0],.05,r[2]));return i.push(i[0].clone()),i},[t]);return c.jsxs("group",{children:[c.jsx(mce,{points:n,color:e,lineWidth:2,dashed:!0,dashSize:.5,dashScale:2,gapSize:.3}),t.map((i,r)=>c.jsxs("group",{position:[i[0],.02,i[2]],children:[c.jsxs("mesh",{rotation:[-Math.PI/2,0,0],children:[c.jsx("ringGeometry",{args:[.3,.5,16]}),c.jsx("meshBasicMaterial",{color:e,transparent:!0,opacity:.6})]}),r<t.length&&c.jsxs("mesh",{rotation:[-Math.PI/2,0,Math.atan2(t[(r+1)%t.length][0]-i[0],t[(r+1)%t.length][2]-i[2])],position:[0,.01,0],children:[c.jsx("coneGeometry",{args:[.2,.4,3]}),c.jsx("meshBasicMaterial",{color:e,transparent:!0,opacity:.4})]})]},r))]})},Kde=({isStopped:t,isInCrossing:e})=>{const[n,i]=z.useState(!1);It(s=>{const o=t?15:e?10:5,l=Math.sin(s.clock.elapsedTime*o)>0;l!==n&&i(l)});const r=t?"#ef4444":e?"#3b82f6":"#f59e0b",a=t?"#ef4444":e?"#3b82f6":"#f59e0b";return c.jsxs("group",{position:[0,2.3,-.3],children:[c.jsxs("mesh",{children:[c.jsx("cylinderGeometry",{args:[.1,.1,.15,8]}),c.jsx("meshStandardMaterial",{color:r,emissive:r,emissiveIntensity:n?3:.5,toneMapped:!1})]}),(t||e)&&n&&c.jsx("pointLight",{color:a,intensity:2,distance:5})]})},u6=["#f59e0b","#3b82f6"],ZW=[{id:"main-conveyor",xMin:-28,xMax:28,zMin:17,zMax:21,type:"conveyor"},{id:"roller-conveyor",xMin:-16,xMax:16,zMin:14,zMax:18,type:"conveyor"}],f6=(t,e)=>{for(const n of ZW)if(t>=n.xMin&&t<=n.xMax&&e>=n.zMin&&e<=n.zMax)return n;return null},Qde=()=>c.jsx("group",{children:ZW.map(t=>c.jsxs("group",{children:[c.jsxs("mesh",{position:[(t.xMin+t.xMax)/2,.02,t.zMin],rotation:[-Math.PI/2,0,0],children:[c.jsx("planeGeometry",{args:[t.xMax-t.xMin,.3]}),c.jsx("meshBasicMaterial",{color:"#fbbf24",transparent:!0,opacity:.6})]}),c.jsxs("mesh",{position:[(t.xMin+t.xMax)/2,.02,t.zMax],rotation:[-Math.PI/2,0,0],children:[c.jsx("planeGeometry",{args:[t.xMax-t.xMin,.3]}),c.jsx("meshBasicMaterial",{color:"#fbbf24",transparent:!0,opacity:.6})]}),c.jsxs("mesh",{position:[t.xMin,.02,(t.zMin+t.zMax)/2],rotation:[-Math.PI/2,0,0],children:[c.jsx("planeGeometry",{args:[.3,t.zMax-t.zMin]}),c.jsx("meshBasicMaterial",{color:"#fbbf24",transparent:!0,opacity:.6})]}),c.jsxs("mesh",{position:[t.xMax,.02,(t.zMin+t.zMax)/2],rotation:[-Math.PI/2,0,0],children:[c.jsx("planeGeometry",{args:[.3,t.zMax-t.zMin]}),c.jsx("meshBasicMaterial",{color:"#fbbf24",transparent:!0,opacity:.6})]}),c.jsx(Sa,{position:[t.xMin+3,.03,(t.zMin+t.zMax)/2],rotation:[-Math.PI/2,0,0],fontSize:.5,color:"#fbbf24",anchorX:"center",anchorY:"middle",children:"YIELD"}),c.jsx(Sa,{position:[t.xMax-3,.03,(t.zMin+t.zMax)/2],rotation:[-Math.PI/2,0,0],fontSize:.5,color:"#fbbf24",anchorX:"center",anchorY:"middle",children:"YIELD"})]},t.id))}),Jde=()=>{const t=z.useMemo(()=>[{id:"forklift-1",position:[-25,0,-15],rotation:0,speed:3,path:[[-25,0,-15],[-25,0,10],[25,0,10],[25,0,-15]],pathIndex:0,cargo:"pallet",operatorName:"Tom"},{id:"forklift-2",position:[25,0,5],rotation:Math.PI,speed:2.5,path:[[25,0,5],[25,0,-20],[-20,0,-20],[-20,0,5]],pathIndex:0,cargo:"empty",operatorName:"Jake"}],[]);return c.jsxs("group",{children:[c.jsx(Qde,{}),t.map((e,n)=>c.jsx(Zde,{path:e.path,color:u6[n%u6.length]},`path-${e.id}`)),t.map(e=>c.jsx(e0e,{data:e},e.id))]})},e0e=({data:t})=>{const e=z.useRef(null),n=z.useRef(0),i=z.useRef(new se(...t.path[0])),[r,a]=z.useState(!1),[s,o]=z.useState(!1),[l,u]=z.useState(!1),h=z.useRef(new se),p=z.useRef(new se),g=z.useRef(new se(0,0,1)),x=z.useRef(!1),b=z.useRef(0),M=z.useRef(0),S=z.useRef([]),T=.15,A=1.5,E=3,j=Fe(C=>C.recordSafetyStop);z.useEffect(()=>{r&&!x.current&&(wt.playHorn(t.id),j()),x.current=r},[r,t.id,j]);const R=z.useRef(!1);return z.useEffect(()=>{e.current&&!R.current&&(e.current.position.set(...t.position),R.current=!0)},[t.position]),It((C,D)=>{if(!e.current)return;const U=e.current.position,I=i.current,L=h.current.subVectors(I,U),F=L.length(),G=2.5,H=4,W=5,Y=p.current.copy(L).normalize(),$=Y.dot(g.current)<-.5;$!==s&&o($),$&&!r&&wt.playBackupBeep(t.id),g.current.copy(Y);const ee=Mf.isPathClear(U.x,U.z,Y.x,Y.z,W,G,t.id),te=Mf.getWorkersNearby(U.x,U.z,G),ae=Mf.getForkliftsNearby(U.x,U.z,H,t.id),q=f6(U.x,U.z),K=U.x+Y.x*E,ie=U.z+Y.z*E,ue=f6(K,ie),me=q!==null||ue!==null;me!==l&&u(me);let fe=!0,de=1;ue&&!q?(M.current+=D,M.current<A&&(fe=!1),de=.5):(q&&(de=.6),M.current=0);const _e=ee&&te.length===0&&ae.length===0&&fe,Te=!_e;if(Mf.register(t.id,U.x,U.z,"forklift",Y.x,Y.z,Te),Te!==r?(b.current+=D,b.current>=T&&(a(Te),b.current=0)):b.current=0,F<.5)n.current=(n.current+1)%t.path.length,i.current.set(...t.path[n.current]);else if(_e){const Ie=t.speed*de;L.normalize(),U.add(L.multiplyScalar(Ie*D));const Re=Math.atan2(L.x,L.z);e.current.rotation.y=ba.lerp(e.current.rotation.y,Re,.1),S.current.length===0&&e.current.children.length>=12&&(S.current=e.current.children.slice(8,12));for(let ye=0;ye<S.current.length;ye++)S.current[ye].rotation.x+=D*5*de}}),c.jsxs("group",{ref:e,children:[c.jsxs("mesh",{castShadow:!0,position:[0,.6,0],children:[c.jsx("boxGeometry",{args:[1.5,1,2.5]}),c.jsx("meshStandardMaterial",{color:"#f59e0b",metalness:.3,roughness:.6})]}),c.jsxs("mesh",{castShadow:!0,position:[0,1.4,-.3],children:[c.jsx("boxGeometry",{args:[1.3,1.2,1.2]}),c.jsx("meshStandardMaterial",{color:"#1f2937"})]}),c.jsxs("mesh",{castShadow:!0,position:[0,2.1,-.3],children:[c.jsx("boxGeometry",{args:[1.4,.1,1.3]}),c.jsx("meshStandardMaterial",{color:"#f59e0b",metalness:.3,roughness:.6})]}),c.jsxs("mesh",{castShadow:!0,position:[0,1.2,1.3],children:[c.jsx("boxGeometry",{args:[.1,2,.1]}),c.jsx("meshStandardMaterial",{color:"#374151"})]}),c.jsxs("mesh",{castShadow:!0,position:[.5,1.2,1.3],children:[c.jsx("boxGeometry",{args:[.1,2,.1]}),c.jsx("meshStandardMaterial",{color:"#374151"})]}),c.jsxs("mesh",{castShadow:!0,position:[-.5,1.2,1.3],children:[c.jsx("boxGeometry",{args:[.1,2,.1]}),c.jsx("meshStandardMaterial",{color:"#374151"})]}),c.jsxs("mesh",{castShadow:!0,position:[-.3,.3,1.8],children:[c.jsx("boxGeometry",{args:[.1,.08,1.2]}),c.jsx("meshStandardMaterial",{color:"#6b7280",metalness:.8,roughness:.2})]}),c.jsxs("mesh",{castShadow:!0,position:[.3,.3,1.8],children:[c.jsx("boxGeometry",{args:[.1,.08,1.2]}),c.jsx("meshStandardMaterial",{color:"#6b7280",metalness:.8,roughness:.2})]}),c.jsxs("mesh",{castShadow:!0,position:[-.6,.25,.8],rotation:[0,0,Math.PI/2],children:[c.jsx("cylinderGeometry",{args:[.25,.25,.2,16]}),c.jsx("meshStandardMaterial",{color:"#1f2937"})]}),c.jsxs("mesh",{castShadow:!0,position:[.6,.25,.8],rotation:[0,0,Math.PI/2],children:[c.jsx("cylinderGeometry",{args:[.25,.25,.2,16]}),c.jsx("meshStandardMaterial",{color:"#1f2937"})]}),c.jsxs("mesh",{castShadow:!0,position:[-.6,.25,-.8],rotation:[0,0,Math.PI/2],children:[c.jsx("cylinderGeometry",{args:[.25,.25,.2,16]}),c.jsx("meshStandardMaterial",{color:"#1f2937"})]}),c.jsxs("mesh",{castShadow:!0,position:[.6,.25,-.8],rotation:[0,0,Math.PI/2],children:[c.jsx("cylinderGeometry",{args:[.25,.25,.2,16]}),c.jsx("meshStandardMaterial",{color:"#1f2937"})]}),t.cargo==="pallet"&&c.jsxs("group",{position:[0,.6,2],children:[c.jsxs("mesh",{castShadow:!0,children:[c.jsx("boxGeometry",{args:[1,.15,1]}),c.jsx("meshStandardMaterial",{color:"#a16207"})]}),c.jsxs("mesh",{castShadow:!0,position:[0,.4,0],children:[c.jsx("boxGeometry",{args:[.9,.6,.9]}),c.jsx("meshStandardMaterial",{color:"#fef3c7"})]})]}),c.jsx(Kde,{isStopped:r,isInCrossing:l}),c.jsx(Sa,{position:[0,2.6,0],fontSize:.25,color:"white",anchorX:"center",anchorY:"middle",outlineWidth:.02,outlineColor:"#000",children:t.operatorName})]})},t0e=({position:t,color:e="#fef3c7",intensity:n=1})=>{const i=z.useRef(null),r=Fe(h=>h.gameTime),a=z.useRef(new se),s=z.useRef(new se),o=z.useRef(new se),u=r>=8&&r<17?1:0;return It(({camera:h})=>{if(!i.current||u===0)return;const p=a.current.set(t[0],t[1],t[2]),g=s.current.subVectors(h.position,p).normalize(),x=o.current.set(0,0,-1).applyQuaternion(h.quaternion),b=g.dot(x),M=Math.max(0,-b);if(i.current.visible=M>.3,M>.3){const S=M*n*u;i.current.scale.setScalar(S),i.current.quaternion.copy(h.quaternion)}}),u===0?null:c.jsxs("group",{ref:i,position:t,children:[c.jsx("sprite",{scale:[4,4,1],children:c.jsx("spriteMaterial",{color:e,transparent:!0,opacity:.3,depthWrite:!1})}),c.jsx("sprite",{scale:[1.5,1.5,1],children:c.jsx("spriteMaterial",{color:"#ffffff",transparent:!0,opacity:.6,depthWrite:!1})}),c.jsx("sprite",{position:[1,.5,0],scale:[.8,.8,1],children:c.jsx("spriteMaterial",{color:"#87ceeb",transparent:!0,opacity:.2,depthWrite:!1})}),c.jsx("sprite",{position:[-.5,-.3,0],scale:[.5,.5,1],children:c.jsx("spriteMaterial",{color:"#fcd34d",transparent:!0,opacity:.25,depthWrite:!1})})]})},n0e=()=>z.useMemo(()=>{const e=document.createElement("canvas");e.width=512,e.height=512;const n=e.getContext("2d");n.fillStyle="#475569",n.fillRect(0,0,512,512);const i=n.getImageData(0,0,512,512);for(let a=0;a<i.data.length;a+=4){const s=(Math.random()-.5)*15;i.data[a]=Math.max(0,Math.min(255,i.data[a]+s)),i.data[a+1]=Math.max(0,Math.min(255,i.data[a+1]+s)),i.data[a+2]=Math.max(0,Math.min(255,i.data[a+2]+s))}n.putImageData(i,0,0),n.strokeStyle="rgba(30, 41, 59, 0.4)",n.lineWidth=2;for(let a=0;a<512;a+=64)n.beginPath(),n.moveTo(0,a),n.lineTo(512,a),n.stroke();n.strokeStyle="rgba(30, 41, 59, 0.3)",n.lineWidth=1;for(let a=0;a<512;a+=128)n.beginPath(),n.moveTo(a,0),n.lineTo(a,512),n.stroke();n.fillStyle="rgba(100, 116, 139, 0.6)";for(let a=32;a<512;a+=128)for(let s=32;s<512;s+=64)n.beginPath(),n.arc(a,s,3,0,Math.PI*2),n.fill();const r=new Ba(e);return r.wrapS=ar,r.wrapT=ar,r.repeat.set(4,2),r},[]),i0e=()=>z.useMemo(()=>{const e=document.createElement("canvas");e.width=256,e.height=256;const n=e.getContext("2d");n.fillStyle="#b0b0b0",n.fillRect(0,0,256,256);const i=n.getImageData(0,0,256,256);for(let a=0;a<i.data.length;a+=4){const s=(Math.random()-.5)*40,o=Math.max(100,Math.min(200,176+s));i.data[a]=o,i.data[a+1]=o,i.data[a+2]=o}n.putImageData(i,0,0);const r=new Ba(e);return r.wrapS=ar,r.wrapT=ar,r.repeat.set(4,2),r},[]),KW=t=>{if(t>=20||t<5)return{color:"#1e3a5f",intensity:.1,opacity:.2};if(t>=5&&t<7){const e=(t-5)/2;return{color:"#f97316",intensity:.2+e*.3,opacity:.3+e*.2}}if(t>=7&&t<10){const e=(t-7)/3;return{color:"#fbbf24",intensity:.5+e*.3,opacity:.5+e*.2}}if(t>=10&&t<16)return{color:"#7dd3fc",intensity:.8,opacity:.7};if(t>=16&&t<18){const e=(t-16)/2;return{color:"#fbbf24",intensity:.7-e*.2,opacity:.6-e*.1}}if(t>=18&&t<20){const e=(t-18)/2;return{color:"#f97316",intensity:.5-e*.3,opacity:.5-e*.2}}return{color:"#7dd3fc",intensity:.5,opacity:.5}},RE=({position:t,size:e})=>{const n=Fe(a=>a.gameTime),{color:i,intensity:r}=KW(n);return c.jsxs("group",{position:t,children:[c.jsxs("mesh",{position:[0,0,-.05],children:[c.jsx("planeGeometry",{args:[e[0]+.4,e[1]+.4]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.7,roughness:.3})]}),c.jsxs("mesh",{children:[c.jsx("planeGeometry",{args:e}),c.jsx("meshStandardMaterial",{color:"#a5d8ff",metalness:.1,roughness:.1,transparent:!0,opacity:.3})]}),c.jsxs("mesh",{position:[0,0,-.1],children:[c.jsx("planeGeometry",{args:[e[0]-.2,e[1]-.2]}),c.jsx("meshBasicMaterial",{color:i,transparent:!0,opacity:r*.6})]})]})},r0e=({position:t})=>{const e=Fe(r=>r.gameTime),n=Fe(r=>r.graphics),{intensity:i}=KW(e);return!n.enableLightShafts||i<.3?null:c.jsxs("mesh",{position:t,rotation:[0,0,0],children:[c.jsx("coneGeometry",{args:[6,28,8,1,!0]}),c.jsx("meshBasicMaterial",{color:"#fef3c7",transparent:!0,opacity:.02*i,side:ai,depthWrite:!1})]})},a0e=()=>{const t=Fe(i=>i.gameTime),e=z.useMemo(()=>t>=20||t<5?{top:"#0c1929",bottom:"#1e293b"}:t>=5&&t<7?{top:"#1e3a5a",bottom:"#f97316"}:t>=7&&t<10?{top:"#0ea5e9",bottom:"#fbbf24"}:t>=10&&t<16?{top:"#0369a1",bottom:"#7dd3fc"}:t>=16&&t<18?{top:"#0c4a6e",bottom:"#fbbf24"}:{top:"#1e293b",bottom:"#ea580c"},[t]),n=z.useMemo(()=>new di({uniforms:{topColor:{value:new zt(e.top)},bottomColor:{value:new zt(e.bottom)},offset:{value:20},exponent:{value:.6}},vertexShader:`
        varying vec3 vWorldPosition;
        void main() {
          vec4 worldPosition = modelMatrix * vec4(position, 1.0);
          vWorldPosition = worldPosition.xyz;
          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        }
      `,fragmentShader:`
        uniform vec3 topColor;
        uniform vec3 bottomColor;
        uniform float offset;
        uniform float exponent;
        varying vec3 vWorldPosition;
        void main() {
          float h = normalize(vWorldPosition + offset).y;
          gl_FragColor = vec4(mix(bottomColor, topColor, max(pow(max(h, 0.0), exponent), 0.0)), 1.0);
        }
      `,side:Hr}),[e]);return z.useMemo(()=>{n.uniforms.topColor.value.set(e.top),n.uniforms.bottomColor.value.set(e.bottom)},[e,n]),c.jsx("mesh",{material:n,children:c.jsx("sphereGeometry",{args:[200,32,32]})})},s0e=()=>{const t=Fe(i=>i.setGameTime),e=z.useRef(0),n=z.useRef(Fe.getState().gameTime);return It(i=>{const r=i.clock.elapsedTime;r-e.current>=.5&&(n.current=(n.current+.02)%24,t(n.current),e.current=r)}),null},Ys={intensity:1,isFlickering:!1,nextFlickerTime:0},o0e=()=>{const t=Fe(e=>e.weather);return It(e=>{const n=t==="storm",i=e.clock.elapsedTime;n?(i>Ys.nextFlickerTime&&(Math.random()<.02?(Ys.isFlickering=!0,Ys.nextFlickerTime=i+.1+Math.random()*.4,wt.playPowerFlicker()):Ys.nextFlickerTime=i+.5),Ys.isFlickering&&(Ys.intensity=.2+Math.random()*.5,i>Ys.nextFlickerTime&&(Ys.isFlickering=!1,Ys.intensity=1,Ys.nextFlickerTime=i+5+Math.random()*15))):(Ys.intensity=1,Ys.isFlickering=!1)}),null},l0e=()=>{const t=z.useRef([]),e=z.useRef([]),n=40;return It(()=>{const i=n*Ys.intensity,r=.5*Ys.intensity;t.current.forEach(a=>{a&&(a.intensity=i)}),e.current.forEach(a=>{a&&(a.emissiveIntensity=r)})}),c.jsx(c.Fragment,{children:[-20,0,20].map((i,r)=>c.jsxs("group",{children:[c.jsx("pointLight",{ref:a=>{a&&(t.current[r]=a)},position:[i,18,0],intensity:n,distance:35,decay:2,color:"#fef3c7"}),c.jsxs("mesh",{position:[i,19,0],children:[c.jsx("cylinderGeometry",{args:[.5,.8,.3,8]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.8,roughness:.2})]}),c.jsxs("mesh",{position:[i,18.7,0],children:[c.jsx("cylinderGeometry",{args:[.6,.6,.1,8]}),c.jsx("meshStandardMaterial",{ref:a=>{a&&(e.current[r]=a)},color:"#fef3c7",emissive:"#fef3c7",emissiveIntensity:.5})]})]},r))})},c0e=()=>{const t=Fe(r=>r.weather),e=z.useRef([]),n=z.useRef([]),i=[[-50,8,-30],[-50,8,0],[-50,8,30],[50,8,-30],[50,8,0],[50,8,30]];return It(()=>{const r=t==="storm",a=Ys.isFlickering,s=r&&a,o=s?8:.5,l=s?2:.1;e.current.forEach(u=>{u&&(u.intensity=o)}),n.current.forEach(u=>{u&&(u.emissiveIntensity=l)})}),c.jsx(c.Fragment,{children:i.map((r,a)=>c.jsxs("group",{position:r,children:[c.jsx("pointLight",{ref:s=>{s&&(e.current[a]=s)},intensity:.5,distance:15,color:"#ef4444"}),c.jsxs("mesh",{children:[c.jsx("boxGeometry",{args:[.3,.15,.15]}),c.jsx("meshStandardMaterial",{ref:s=>{s&&(n.current[a]=s)},color:"#991b1b",emissive:"#ef4444",emissiveIntensity:.1})]})]},a))})},u0e=()=>{const t=n0e(),e=i0e(),n=Fe(r=>r.graphics),i=n.enableHighResShadows?n.shadowMapSize:2048;return c.jsxs("group",{children:[c.jsx(s0e,{}),c.jsx(o0e,{}),c.jsx("ambientLight",{intensity:.15,color:"#b4c6e7"}),c.jsx("directionalLight",{position:[30,50,20],intensity:1.5,castShadow:!0,"shadow-mapSize":[i,i],"shadow-camera-far":100,"shadow-camera-left":-50,"shadow-camera-right":50,"shadow-camera-top":50,"shadow-camera-bottom":-50,"shadow-bias":-.001,color:"#fff5e6"}),c.jsx("directionalLight",{position:[-20,30,-10],intensity:.4,color:"#7dd3fc"}),c.jsx(l0e,{}),c.jsx(c0e,{}),c.jsx("pointLight",{position:[-30,5,-15],intensity:15,distance:20,color:"#3b82f6"}),c.jsx("pointLight",{position:[30,5,15],intensity:15,distance:20,color:"#f97316"}),c.jsx("spotLight",{position:[0,20,-20],angle:.3,penumbra:.5,intensity:100,distance:40,color:"#ffffff","target-position":[0,0,-20]}),n.enableContactShadows&&c.jsx(kue,{position:[0,.05,0],opacity:.35,scale:100,blur:2.5,far:40,color:"#000000"}),c.jsx(a0e,{}),c.jsxs("group",{position:[0,15,-40],children:[c.jsxs("mesh",{receiveShadow:!0,children:[c.jsx("planeGeometry",{args:[120,35]}),c.jsx("meshStandardMaterial",{map:t,roughnessMap:e,roughness:.7,metalness:.2})]}),[-40,-20,0,20,40].map((r,a)=>c.jsx(RE,{position:[r,5,.1],size:[8,12]},a)),[-50,-30,-10,10,30,50].map((r,a)=>c.jsxs("mesh",{position:[r,-5,.05],children:[c.jsx("planeGeometry",{args:[6,8]}),c.jsx("meshStandardMaterial",{color:"#64748b",metalness:.5,roughness:.5})]},a))]}),c.jsxs("group",{position:[0,15,40],rotation:[0,Math.PI,0],children:[c.jsxs("mesh",{receiveShadow:!0,children:[c.jsx("planeGeometry",{args:[120,35]}),c.jsx("meshStandardMaterial",{map:t,roughnessMap:e,roughness:.7,metalness:.2})]}),[-30,0,30].map((r,a)=>c.jsxs("mesh",{position:[r,-5,.1],children:[c.jsx("planeGeometry",{args:[15,20]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.6,roughness:.4})]},a)),[-30,0,30].map((r,a)=>c.jsxs("mesh",{position:[r,-14,.15],children:[c.jsx("planeGeometry",{args:[15,2]}),c.jsx("meshStandardMaterial",{color:"#eab308",emissive:"#eab308",emissiveIntensity:.2})]},a))]}),c.jsxs("group",{position:[-55,15,0],rotation:[0,Math.PI/2,0],children:[c.jsxs("mesh",{receiveShadow:!0,children:[c.jsx("planeGeometry",{args:[82,35]}),c.jsx("meshStandardMaterial",{map:t,roughnessMap:e,roughness:.7,metalness:.2})]}),[-25,0,25].map((r,a)=>c.jsx(RE,{position:[r,5,.1],size:[10,12]},a))]}),c.jsxs("group",{position:[55,15,0],rotation:[0,-Math.PI/2,0],children:[c.jsxs("mesh",{receiveShadow:!0,children:[c.jsx("planeGeometry",{args:[82,35]}),c.jsx("meshStandardMaterial",{map:t,roughnessMap:e,roughness:.7,metalness:.2})]}),[-25,0,25].map((r,a)=>c.jsx(RE,{position:[r,5,.1],size:[10,12]},a))]}),c.jsxs("mesh",{position:[0,32,0],rotation:[Math.PI/2,0,0],receiveShadow:!0,children:[c.jsx("planeGeometry",{args:[110,80]}),c.jsx("meshStandardMaterial",{color:"#1e293b"})]}),[-20,0,20].map((r,a)=>c.jsxs("group",{children:[c.jsxs("mesh",{position:[r,31.95,0],rotation:[Math.PI/2,0,0],children:[c.jsx("planeGeometry",{args:[11,16]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.7,roughness:.3})]}),c.jsxs("mesh",{position:[r,31.9,0],rotation:[Math.PI/2,0,0],children:[c.jsx("planeGeometry",{args:[10,15]}),c.jsx("meshStandardMaterial",{color:"#87ceeb",metalness:.1,roughness:.1,transparent:!0,opacity:.4})]}),c.jsx(r0e,{position:[r,18,0]}),n.quality!=="low"&&n.quality!=="medium"&&c.jsx(t0e,{position:[r,31.5,0],color:"#87ceeb",intensity:.8})]},a)),(n.quality==="low"?[-20,0,20]:[-40,-20,0,20,40]).map((r,a)=>c.jsxs("mesh",{position:[r,20,0],castShadow:n.quality!=="low",children:[c.jsx("boxGeometry",{args:[.5,25,.5]}),n.quality==="low"?c.jsx("meshBasicMaterial",{color:"#374151"}):c.jsx("meshStandardMaterial",{color:"#374151",metalness:.8,roughness:.3})]},a)),n.quality!=="low"&&[-30,-15,0,15,30].map((r,a)=>c.jsxs("mesh",{position:[0,28,r],children:[c.jsx("boxGeometry",{args:[110,.3,.3]}),c.jsx("meshStandardMaterial",{color:"#475569",metalness:.8,roughness:.3})]},a)),n.quality!=="low"&&c.jsx(f0e,{}),c.jsx(S0e,{}),c.jsx(d0e,{}),c.jsx(_0e,{})]})},uu=({position:t,rotation:e=0,size:n=1.5})=>{const i=z.useRef(null),[r,a]=z.useState(2+Math.random()*2);return z.useEffect(()=>{const s=`fan-${t.join("-")}`;wt.registerSoundPosition(s,t[0],t[1],t[2])},[t]),It((s,o)=>{i.current&&(i.current.rotation.z+=o*r*2)}),c.jsxs("group",{position:t,rotation:[Math.PI/2,0,e],children:[c.jsxs("mesh",{children:[c.jsx("cylinderGeometry",{args:[n+.2,n+.2,.3,32]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.7,roughness:.3})]}),c.jsxs("mesh",{position:[0,.2,0],children:[c.jsx("cylinderGeometry",{args:[n,n,.05,32]}),c.jsx("meshStandardMaterial",{color:"#1f2937",metalness:.6,roughness:.4,wireframe:!0})]}),c.jsxs("mesh",{position:[0,-.2,0],children:[c.jsx("cylinderGeometry",{args:[n,n,.05,32]}),c.jsx("meshStandardMaterial",{color:"#1f2937",metalness:.6,roughness:.4,wireframe:!0})]}),c.jsxs("group",{ref:i,children:[[0,1,2,3,4].map(s=>c.jsxs("mesh",{rotation:[0,0,s/5*Math.PI*2],children:[c.jsx("boxGeometry",{args:[.15,n*.8,.05]}),c.jsx("meshStandardMaterial",{color:"#64748b",metalness:.5,roughness:.5})]},s)),c.jsxs("mesh",{children:[c.jsx("cylinderGeometry",{args:[.2,.2,.15,16]}),c.jsx("meshStandardMaterial",{color:"#1f2937",metalness:.8,roughness:.2})]})]})]})},f0e=()=>{const t=z.useRef(!1);return z.useEffect(()=>(t.current||(t.current=!0,wt.startVentilationFanSound()),()=>{wt.stopVentilationFanSound()}),[]),c.jsxs("group",{children:[c.jsx(uu,{position:[-35,8,-39.5],size:2}),c.jsx(uu,{position:[35,8,-39.5],size:2}),c.jsx(uu,{position:[-54.5,12,-15],rotation:Math.PI/2,size:1.8}),c.jsx(uu,{position:[-54.5,12,15],rotation:Math.PI/2,size:1.8}),c.jsx(uu,{position:[54.5,12,-15],rotation:-Math.PI/2,size:1.8}),c.jsx(uu,{position:[54.5,12,15],rotation:-Math.PI/2,size:1.8}),c.jsx(uu,{position:[-30,31.5,-20],size:1.2}),c.jsx(uu,{position:[30,31.5,-20],size:1.2}),c.jsx(uu,{position:[-30,31.5,20],size:1.2}),c.jsx(uu,{position:[30,31.5,20],size:1.2})]})},h0e=({data:t})=>{const e=z.useRef(null),n=z.useRef(null),i=z.useRef(t.scale),r=z.useRef(t.opacity);return It((a,s)=>{if(i.current+=s*2,r.current-=s*.8,e.current&&n.current){const o=i.current;e.current.scale.set(o,o,1),n.current.opacity=Math.max(0,r.current*.4)}}),c.jsxs("mesh",{ref:e,position:[t.x,.03,t.z],rotation:[-Math.PI/2,0,0],children:[c.jsx("ringGeometry",{args:[.3,.35,32]}),c.jsx("meshBasicMaterial",{ref:n,color:"#7dd3fc",transparent:!0,opacity:t.opacity*.4})]})},d0e=()=>{const t=Fe(u=>u.weather),e=Fe(u=>u.graphics),n=z.useRef(null),[i,r]=z.useState([]),a=z.useRef(new Map),s=z.useRef(0),o=z.useMemo(()=>[{x:-15,z:-10,size:4,irregular:.3},{x:8,z:5,size:3.5,irregular:.4},{x:-5,z:18,size:5,irregular:.2},{x:20,z:-15,size:3,irregular:.5},{x:-25,z:12,size:4.5,irregular:.35},{x:12,z:-5,size:3.2,irregular:.45},{x:-8,z:-20,size:4,irregular:.3},{x:25,z:10,size:3.8,irregular:.25}],[]);if(It(()=>{if((t==="rain"||t==="storm")&&Math.random()<.1){const u=o[Math.floor(Math.random()*o.length)],h=(Math.random()-.5)*u.size*.8,p=(Math.random()-.5)*u.size*.8,g=s.current++;a.current.set(g,{x:u.x+h,z:u.z+p,scale:.1,opacity:.6}),r(x=>[...x.slice(-19),g])}a.current.forEach((u,h)=>{u.opacity<=0&&a.current.delete(h)})}),t==="clear"||t==="cloudy"||e.quality==="low")return null;const l=t==="storm"?1:.6;return c.jsxs("group",{ref:n,children:[o.map((u,h)=>c.jsxs("group",{position:[u.x,.02,u.z],children:[c.jsxs("mesh",{rotation:[-Math.PI/2,0,0],children:[c.jsx("circleGeometry",{args:[u.size,32]}),c.jsx("meshStandardMaterial",{color:"#1e3a5f",metalness:.9,roughness:.1+(1-l)*.2,transparent:!0,opacity:.7*l,envMapIntensity:1.5})]}),c.jsxs("mesh",{rotation:[-Math.PI/2,0,0],position:[0,-.005,0],children:[c.jsx("ringGeometry",{args:[u.size*.9,u.size*1.1,32]}),c.jsx("meshBasicMaterial",{color:"#0f172a",transparent:!0,opacity:.3*l})]})]},h)),i.map(u=>{const h=a.current.get(u);return h?c.jsx(h0e,{data:h},u):null}),c.jsx(m0e,{puddlePositions:o}),c.jsx(v0e,{puddlePositions:o}),c.jsx(b0e,{})]})},p0e=({position:t})=>{const e=z.useRef(null);return It(n=>{e.current&&(e.current.rotation.y=Math.sin(n.clock.elapsedTime*.5)*.05)}),c.jsxs("group",{ref:e,position:t,children:[c.jsxs("mesh",{position:[0,.02,0],children:[c.jsx("boxGeometry",{args:[.4,.04,.4]}),c.jsx("meshStandardMaterial",{color:"#1f2937",roughness:.8})]}),c.jsxs("mesh",{position:[0,.4,0],children:[c.jsx("cylinderGeometry",{args:[.03,.03,.8,8]}),c.jsx("meshStandardMaterial",{color:"#fbbf24",roughness:.6})]}),c.jsxs("group",{position:[0,.85,0],children:[c.jsxs("mesh",{rotation:[0,0,0],children:[c.jsx("coneGeometry",{args:[.25,.4,3]}),c.jsx("meshStandardMaterial",{color:"#fbbf24",roughness:.4})]}),c.jsxs("mesh",{rotation:[0,0,0],position:[0,.02,.01],children:[c.jsx("coneGeometry",{args:[.18,.3,3]}),c.jsx("meshStandardMaterial",{color:"#1f2937",roughness:.6})]}),c.jsxs("mesh",{position:[0,-.05,.12],children:[c.jsx("sphereGeometry",{args:[.03,8,8]}),c.jsx("meshStandardMaterial",{color:"#fbbf24",emissive:"#fbbf24",emissiveIntensity:.3})]}),c.jsxs("mesh",{position:[0,.05,.12],children:[c.jsx("boxGeometry",{args:[.03,.12,.02]}),c.jsx("meshStandardMaterial",{color:"#fbbf24",emissive:"#fbbf24",emissiveIntensity:.3})]})]})]})},m0e=({puddlePositions:t})=>{const e=Fe(i=>i.weather),n=z.useMemo(()=>t.filter(i=>i.size>=3.5).map(i=>({x:i.x+i.size*.8,z:i.z+i.size*.3})),[t]);return e!=="rain"&&e!=="storm"?null:c.jsx("group",{children:n.map((i,r)=>c.jsx(p0e,{position:[i.x,0,i.z]},r))})},g0e=({track:t,fadeRate:e})=>{const n=z.useRef(null),i=z.useRef(t.opacity);It((a,s)=>{i.current-=s*e,n.current&&(n.current.opacity=Math.max(0,i.current))});const r=Math.atan2(t.points[1][2]-t.points[0][2],t.points[1][0]-t.points[0][0]);return c.jsxs("mesh",{position:t.points[0],rotation:[-Math.PI/2,0,r],children:[c.jsx("planeGeometry",{args:[1.5,t.width]}),c.jsx("meshBasicMaterial",{ref:n,color:"#1e293b",transparent:!0,opacity:t.opacity,depthWrite:!1})]})},v0e=({puddlePositions:t})=>{const e=Fe(h=>h.weather),[n,i]=z.useState([]),r=z.useRef(new Map),a=z.useRef(0),s=z.useRef(new Map),o=z.useRef(!1),l=(h,p)=>{for(const g of t){const x=h-g.x,b=p-g.z;if(Math.sqrt(x*x+b*b)<g.size)return!0}return!1};if(o.current=e==="rain"||e==="storm",It(h=>{if(!o.current)return;[{id:"forklift-1",x:-28+Math.sin(h.clock.elapsedTime*.3)*30,z:-18+Math.cos(h.clock.elapsedTime*.2)*25},{id:"forklift-2",x:28+Math.sin(h.clock.elapsedTime*.25)*30,z:5+Math.cos(h.clock.elapsedTime*.3)*20}].forEach(g=>{if(l(g.x,g.z)){const x=h.clock.elapsedTime,b=s.current.get(g.id)||0;if(x-b>.3){s.current.set(g.id,x);const M=a.current++,S=Math.random()*Math.PI*2,T=Math.cos(S)*.3,A=Math.sin(S)*.3;r.current.set(M,{id:M,points:[[g.x-T,.015,g.z-A],[g.x+T,.015,g.z+A]],opacity:.4,width:.15+Math.random()*.1}),i(E=>[...E.slice(-29),M])}}})}),z.useEffect(()=>{const h=setInterval(()=>{i(p=>p.filter(g=>r.current.has(g)))},5e3);return()=>clearInterval(h)},[]),n.length===0)return null;const u=o.current?.08:.5;return c.jsx("group",{children:n.map(h=>{const p=r.current.get(h);return p?c.jsx(g0e,{track:p,fadeRate:u},h):null})})},x0e=({data:t,onImpact:e})=>{const n=z.useRef(null),i=z.useRef(null),r=z.useRef(null),a=z.useRef(null),s=z.useRef(null),o=z.useRef(31),l=z.useRef(0),u=z.useRef(.8),h=z.useRef(!1);return It((p,g)=>{if(!h.current){if(l.current-=25*g,o.current+=l.current*g,o.current<=.1&&!h.current){h.current=!0,e(t.x,t.z),n.current&&(n.current.visible=!1);return}o.current<1&&(u.current-=g*3),n.current&&(n.current.position.y=o.current),a.current&&(a.current.opacity=u.current*.6),r.current&&(r.current.visible=l.current<-5,r.current.position.y=.15),s.current&&(s.current.opacity=u.current*.3)}}),c.jsxs("group",{ref:n,position:[t.x,31,t.z],children:[c.jsxs("mesh",{ref:i,children:[c.jsx("sphereGeometry",{args:[.05,8,8]}),c.jsx("meshStandardMaterial",{ref:a,color:"#7dd3fc",transparent:!0,opacity:.48,metalness:.8,roughness:.1})]}),c.jsxs("mesh",{ref:r,visible:!1,children:[c.jsx("cylinderGeometry",{args:[.02,.04,.3,6]}),c.jsx("meshBasicMaterial",{ref:s,color:"#7dd3fc",transparent:!0,opacity:.24})]})]})},y0e=({data:t})=>{const e=z.useRef(null),n=z.useRef(null),i=z.useRef(null),r=z.useRef(null),a=z.useRef({x:t.x,y:t.y,z:t.z}),s=z.useRef({vx:t.vx,vy:t.vy,vz:t.vz}),o=z.useRef(t.life);return It((l,u)=>{if(s.current.vy-=15*u,a.current.x+=s.current.vx*u,a.current.y=Math.max(0,a.current.y+s.current.vy*u),a.current.z+=s.current.vz*u,o.current-=u*2.5,e.current&&e.current.position.set(a.current.x,a.current.y,a.current.z),i.current&&(i.current.opacity=Math.max(0,o.current*.5)),n.current&&r.current){n.current.visible=o.current>.7,n.current.position.set(a.current.x,.02,a.current.z);const h=(1-o.current)*.5;n.current.scale.set(h*10+1,h*10+1,1),r.current.opacity=Math.max(0,(o.current-.7)*2)}}),c.jsxs(c.Fragment,{children:[c.jsxs("mesh",{ref:e,position:[t.x,t.y,t.z],children:[c.jsx("sphereGeometry",{args:[.03,6,6]}),c.jsx("meshBasicMaterial",{ref:i,color:"#7dd3fc",transparent:!0,opacity:.5})]}),c.jsxs("mesh",{ref:n,position:[t.x,.02,t.z],rotation:[-Math.PI/2,0,0],visible:!1,children:[c.jsx("ringGeometry",{args:[.05,.1,16]}),c.jsx("meshBasicMaterial",{ref:r,color:"#7dd3fc",transparent:!0,opacity:.6})]})]})},b0e=()=>{const t=Fe(x=>x.weather),e=Fe(x=>x.graphics),[n,i]=z.useState([]),[r,a]=z.useState([]),s=z.useRef(new Map),o=z.useRef(new Map),l=z.useRef(0),u=z.useRef(0),h=z.useRef(0),p=z.useMemo(()=>[{x:-20,z:0},{x:0,z:0},{x:20,z:0},{x:-25,z:-15},{x:25,z:15},{x:-15,z:20},{x:15,z:-20}],[]),g=z.useCallback((x,b)=>{const M=e.quality==="medium"?4:6,S=[];for(let T=0;T<M;T++){const A=T/M*Math.PI*2+Math.random()*.5,E=1.5+Math.random()*2,j=u.current++;o.current.set(j,{id:j,x,y:.1,z:b,vx:Math.cos(A)*E,vy:2+Math.random()*2,vz:Math.sin(A)*E,life:1}),S.push(j)}a(T=>[...T.slice(-24),...S]),wt.playWaterDrip()},[e.quality]);return It(x=>{if(!(t==="rain"||t==="storm")||e.quality==="low")return;const M=x.clock.elapsedTime,S=t==="storm"?.3:.8;if(M-h.current>S){h.current=M;const T=p[Math.floor(Math.random()*p.length)],A=l.current++;s.current.set(A,{x:T.x+(Math.random()-.5)*2,z:T.z+(Math.random()-.5)*2}),i(E=>[...E.slice(-19),A])}}),n.length===0&&r.length===0?null:c.jsxs("group",{children:[n.map(x=>{const b=s.current.get(x);return b?c.jsx(x0e,{data:b,onImpact:g},x):null}),r.map(x=>{const b=o.current.get(x);return b?c.jsx(y0e,{data:b},x):null})]})},S0e=()=>{const t=Fe(x=>x.weather),e=Fe(x=>x.graphics),n=z.useRef(null),i=z.useRef(null),r=z.useRef(null),a=e.quality==="low"?150:e.quality==="medium"?300:500,s=e.quality==="low"?0:e.quality==="medium"?100:200,o=e.quality==="low"?0:50,l=z.useMemo(()=>{const x=new Float32Array(a*3);for(let b=0;b<a;b++)x[b*3]=(Math.random()-.5)*60,x[b*3+1]=32+Math.random()*15,x[b*3+2]=(Math.random()-.5)*50;return x},[a]),u=z.useMemo(()=>{const x=new Float32Array(s*3);for(let b=0;b<s;b++)x[b*3]=(Math.random()-.5)*60,x[b*3+1]=32+Math.random()*20,x[b*3+2]=(Math.random()-.5)*50;return x},[s]),h=z.useMemo(()=>{const x=new Float32Array(o*3),b=[-20,0,20];for(let M=0;M<o;M++){const S=b[M%3];x[M*3]=S+(Math.random()-.5)*10,x[M*3+1]=32+Math.random()*.5,x[M*3+2]=(Math.random()-.5)*14}return x},[o]),p=z.useRef(new Float32Array(o*3)),g=z.useRef(new Float32Array(o));return It((x,b)=>{if(n.current&&(t==="rain"||t==="storm")){const M=n.current.geometry.attributes.position.array,S=t==="storm"?1.2:.6,T=t==="storm"?.3:.1;for(let A=0;A<a;A++)M[A*3]+=(Math.random()-.5)*T*b,M[A*3+1]-=S,M[A*3+1]<30&&(M[A*3+1]=47,M[A*3]=(Math.random()-.5)*60,M[A*3+2]=(Math.random()-.5)*50);n.current.geometry.attributes.position.needsUpdate=!0}if(i.current&&t==="storm"&&s>0){const M=i.current.geometry.attributes.position.array,S=2.5;for(let T=0;T<s;T++)M[T*3]+=(Math.random()-.5)*.5*b,M[T*3+1]-=S,M[T*3+1]<30&&(M[T*3+1]=52,M[T*3]=(Math.random()-.5)*60,M[T*3+2]=(Math.random()-.5)*50);i.current.geometry.attributes.position.needsUpdate=!0}if(r.current&&(t==="rain"||t==="storm")&&o>0){const M=r.current.geometry.attributes.position.array,S=[-20,0,20];for(let T=0;T<o;T++)if(g.current[T]-=b*3,g.current[T]<=0){const A=S[Math.floor(Math.random()*3)];M[T*3]=A+(Math.random()-.5)*10,M[T*3+1]=32,M[T*3+2]=(Math.random()-.5)*14,p.current[T*3]=(Math.random()-.5)*2,p.current[T*3+1]=1+Math.random(),p.current[T*3+2]=(Math.random()-.5)*2,g.current[T]=.3+Math.random()*.3}else M[T*3]+=p.current[T*3]*b,M[T*3+1]+=p.current[T*3+1]*b,M[T*3+2]+=p.current[T*3+2]*b,p.current[T*3+1]-=8*b;r.current.geometry.attributes.position.needsUpdate=!0}}),t==="clear"?null:c.jsxs("group",{children:[(t==="cloudy"||t==="rain"||t==="storm")&&c.jsx("group",{position:[0,35,0],children:[[-15,0],[0,5],[15,-3],[-8,8],[10,10]].map(([x,b],M)=>c.jsxs("mesh",{position:[x,Math.random()*3,b],children:[c.jsx("sphereGeometry",{args:[4+Math.random()*3,16,16]}),c.jsx("meshBasicMaterial",{color:t==="storm"?"#374151":"#94a3b8",transparent:!0,opacity:.6})]},M))}),(t==="rain"||t==="storm")&&c.jsxs("points",{ref:n,children:[c.jsx("bufferGeometry",{children:c.jsx("bufferAttribute",{attach:"attributes-position",count:a,array:l,itemSize:3})}),c.jsx("pointsMaterial",{size:t==="storm"?.08:.05,color:t==="storm"?"#64748b":"#94a3b8",transparent:!0,opacity:.7,sizeAttenuation:!0})]},`rain-${a}`),t==="storm"&&s>0&&c.jsxs("points",{ref:i,children:[c.jsx("bufferGeometry",{children:c.jsx("bufferAttribute",{attach:"attributes-position",count:s,array:u,itemSize:3})}),c.jsx("pointsMaterial",{size:.15,color:"#94a3b8",transparent:!0,opacity:.4,sizeAttenuation:!0})]},`streaks-${s}`),(t==="rain"||t==="storm")&&o>0&&c.jsxs("points",{ref:r,children:[c.jsx("bufferGeometry",{children:c.jsx("bufferAttribute",{attach:"attributes-position",count:o,array:h,itemSize:3})}),c.jsx("pointsMaterial",{size:.1,color:"#b4c6e7",transparent:!0,opacity:.6,sizeAttenuation:!0})]},`splash-${o}`),t==="storm"&&c.jsx(M0e,{})]})},M0e=()=>{const t=z.useRef(null),[e,n]=z.useState(0),i=z.useRef(null);return z.useEffect(()=>{const r=()=>{t.current&&(t.current.intensity=300,n(.15),setTimeout(()=>{t.current&&(t.current.intensity=50,n(.03))},60),setTimeout(()=>{t.current&&(t.current.intensity=250,n(.12))},120),setTimeout(()=>{t.current&&(t.current.intensity=100,n(.05))},180),setTimeout(()=>{t.current&&(t.current.intensity=0,n(0))},250))};return wt.onThunder(r)},[]),c.jsxs("group",{children:[c.jsx("pointLight",{ref:t,position:[0,40,0],color:"#f0f9ff",intensity:0,distance:150}),e>0&&c.jsxs("mesh",{ref:i,position:[0,15,0],children:[c.jsx("sphereGeometry",{args:[80,8,8]}),c.jsx("meshBasicMaterial",{color:"#f0f9ff",transparent:!0,opacity:e,side:Hr,depthWrite:!1})]})]})},_0e=()=>{const t=Fe(n=>n.heatMapData);return!Fe(n=>n.showHeatMap)||t.length===0?null:c.jsx("group",{position:[0,.1,0],children:t.map((n,i)=>c.jsxs("mesh",{position:[n.x,0,n.z],rotation:[-Math.PI/2,0,0],children:[c.jsx("circleGeometry",{args:[1+n.intensity*.2,16]}),c.jsx("meshBasicMaterial",{color:n.intensity>5?"#ef4444":n.intensity>3?"#f97316":"#22c55e",transparent:!0,opacity:.2+n.intensity*.05,depthWrite:!1})]},i))})},T0e=()=>c.jsxs("group",{children:[c.jsx(ey,{position:[0,12,-25],title:"PRODUCTION STATUS",value:"OPTIMAL",color:"#22c55e",size:[12,4]}),c.jsx(ey,{position:[-20,8,-18],title:"ZONE 1: STORAGE",value:"5 Silos Active",subValue:"Capacity: 87%",color:"#3b82f6",size:[6,2.5]}),c.jsx(ey,{position:[0,8,-8],title:"ZONE 2: MILLING",value:"6 Mills Running",subValue:"Output: 1,240 T/hr",color:"#8b5cf6",size:[6,2.5]}),c.jsx(ey,{position:[20,10,5],title:"ZONE 3: SIFTING",value:"3 Plansifters",subValue:"Grade A: 99.2%",color:"#ec4899",size:[6,2.5]}),c.jsx(ey,{position:[0,8,22],title:"ZONE 4: PACKING",value:"42 bags/min",subValue:"Today: 24,120 bags",color:"#f59e0b",size:[6,2.5]}),c.jsx(w0e,{})]}),ey=({position:t,title:e,value:n,subValue:i,color:r,size:a})=>{const s=z.useRef(null),o=z.useRef(null),l=Fe(h=>h.graphics.quality),u=z.useRef(0);return It(h=>{l==="low"&&(u.current++,u.current%2!==0)||(s.current&&(s.current.position.y=t[1]+Math.sin(h.clock.elapsedTime*.5)*.1),o.current&&(o.current.material.opacity=.1+Math.sin(h.clock.elapsedTime*2)*.05))}),c.jsx("group",{ref:s,position:t,children:c.jsxs(mW,{children:[c.jsxs("mesh",{ref:o,position:[0,0,-.1],children:[c.jsx("planeGeometry",{args:[a[0]+1,a[1]+.5]}),c.jsx("meshBasicMaterial",{color:r,transparent:!0,opacity:.1})]}),c.jsx(Sue,{args:[a[0],a[1],.05],radius:.1,smoothness:4,children:c.jsx("meshStandardMaterial",{color:"#0f172a",transparent:!0,opacity:.9,metalness:.5,roughness:.5})}),c.jsxs("mesh",{position:[0,0,.03],children:[c.jsx("planeGeometry",{args:[a[0]-.1,a[1]-.1]}),c.jsx("meshBasicMaterial",{color:r,transparent:!0,opacity:.05})]}),c.jsxs("mesh",{position:[0,a[1]/2-.1,.03],children:[c.jsx("planeGeometry",{args:[a[0]-.2,.05]}),c.jsx("meshBasicMaterial",{color:r})]}),c.jsx(Sa,{position:[0,a[1]/2-.35,.04],fontSize:.2,color:"#94a3b8",anchorX:"center",anchorY:"middle",children:e}),c.jsx(Sa,{position:[0,i?.1:0,.04],fontSize:.5,color:r,anchorX:"center",anchorY:"middle",children:n}),i&&c.jsx(Sa,{position:[0,-.5,.04],fontSize:.25,color:"#64748b",anchorX:"center",anchorY:"middle",children:i}),[[-1,1],[1,1],[-1,-1],[1,-1]].map(([h,p],g)=>c.jsxs("mesh",{position:[h*(a[0]/2-.15),p*(a[1]/2-.15),.03],children:[c.jsx("circleGeometry",{args:[.05,16]}),c.jsx("meshBasicMaterial",{color:r})]},g))]})})},w0e=()=>{const t=z.useRef(null),e=Fe(a=>a.graphics.quality),n=z.useRef(0),i=e==="low"?50:100,r=De.useMemo(()=>{const a=new Float32Array(i*3);for(let s=0;s<i;s++)a[s*3]=(Math.random()-.5)*80,a[s*3+1]=Math.random()*20+5,a[s*3+2]=(Math.random()-.5)*60;return a},[i]);return It(()=>{if(e==="low"&&(n.current++,n.current%2!==0)||!t.current)return;const a=t.current.geometry.attributes.position.array,s=e==="low"?.04:.02;for(let o=0;o<i;o++)a[o*3+1]+=s,a[o*3+1]>25&&(a[o*3+1]=5);t.current.geometry.attributes.position.needsUpdate=!0}),c.jsxs("points",{ref:t,children:[c.jsx("bufferGeometry",{children:c.jsx("bufferAttribute",{attach:"attributes-position",count:i,array:r,itemSize:3})}),c.jsx("pointsMaterial",{size:.1,color:"#06b6d4",transparent:!0,opacity:.6,sizeAttenuation:!0})]},`data-particles-${i}`)},zm=({position:t,rotation:e=[0,0,0],scale:n=1})=>{const i=z.useRef(null),r=z.useMemo(()=>{const a=new An,s=[],o=[0,0,0],l=1.5*n,u=8,h=5;for(let p=0;p<u;p++){const g=p/u*Math.PI*2;s.push(o[0],o[1],o[2]),s.push(Math.cos(g)*l,Math.sin(g)*l*.3,Math.sin(g)*l)}for(let p=1;p<=h;p++){const g=p/h*l,x=p*.05;for(let b=0;b<u;b++){const M=b/u*Math.PI*2,S=(b+1)/u*Math.PI*2;s.push(Math.cos(M)*g,-x+Math.sin(M*2)*.02,Math.sin(M)*g),s.push(Math.cos(S)*g,-x+Math.sin(S*2)*.02,Math.sin(S)*g)}}return a.setAttribute("position",new Qt(s,3)),a},[n]);return It(a=>{i.current&&(i.current.rotation.z=Math.sin(a.clock.elapsedTime*.3)*.02)}),c.jsx("lineSegments",{ref:i,position:t,rotation:e,geometry:r,children:c.jsx("lineBasicMaterial",{color:"#94a3b8",transparent:!0,opacity:.3})})},ty=({position:t,rotation:e=[0,0,0],size:n=.5})=>{const i=z.useMemo(()=>{const r=document.createElement("canvas");r.width=128,r.height=128;const a=r.getContext("2d");a.clearRect(0,0,128,128);const s=a.createRadialGradient(64,64,0,64,64,60);s.addColorStop(0,"rgba(139, 69, 19, 0.6)"),s.addColorStop(.3,"rgba(160, 82, 45, 0.4)"),s.addColorStop(.6,"rgba(205, 133, 63, 0.2)"),s.addColorStop(1,"rgba(205, 133, 63, 0)"),a.fillStyle=s,a.beginPath();for(let l=0;l<12;l++){const u=l/12*Math.PI*2,h=40+Math.random()*20,p=64+Math.cos(u)*h,g=64+Math.sin(u)*h;l===0?a.moveTo(p,g):a.lineTo(p,g)}a.closePath(),a.fill();for(let l=0;l<3;l++){const u=50+Math.random()*28,h=70,p=20+Math.random()*30,g=a.createLinearGradient(u,h,u,h+p);g.addColorStop(0,"rgba(139, 69, 19, 0.4)"),g.addColorStop(1,"rgba(139, 69, 19, 0)"),a.strokeStyle=g,a.lineWidth=2+Math.random()*3,a.beginPath(),a.moveTo(u,h),a.lineTo(u+(Math.random()-.5)*10,h+p),a.stroke()}const o=new Ba(r);return o.needsUpdate=!0,o},[]);return c.jsxs("mesh",{position:t,rotation:e,children:[c.jsx("planeGeometry",{args:[n,n]}),c.jsx("meshBasicMaterial",{map:i,transparent:!0,depthWrite:!1,side:ai})]})},ny=({position:t,size:e=1})=>{const n=z.useRef(null);It(r=>{if(n.current){const a=n.current.material;a.emissiveIntensity=.1+Math.sin(r.clock.elapsedTime*.5)*.05}});const i=z.useMemo(()=>{const r=new An,a=[],s=[],o=[],l=16,u=e*.5;a.push(0,0,0),s.push(.5,.5);for(let h=0;h<l;h++){const p=h/l*Math.PI*2,g=u*(.7+Math.random()*.3);a.push(Math.cos(p)*g,0,Math.sin(p)*g),s.push(.5+Math.cos(p)*.5,.5+Math.sin(p)*.5)}for(let h=0;h<l;h++)o.push(0,h+1,(h+1)%l+1);return r.setAttribute("position",new Qt(a,3)),r.setAttribute("uv",new Qt(s,2)),r.setIndex(o),r.computeVertexNormals(),r},[e]);return c.jsx("mesh",{ref:n,position:t,rotation:[-Math.PI/2,0,Math.random()*Math.PI*2],geometry:i,children:c.jsx("meshStandardMaterial",{color:"#1a1a2e",metalness:.9,roughness:.1,transparent:!0,opacity:.7,emissive:"#3b82f6",emissiveIntensity:.1})})},km=({position:t,rotation:e=[0,0,0],type:n})=>{const i=z.useRef(null),[r,a]=z.useState(!0),o={exit:"#22c55e",caution:"#eab308",danger:"#ef4444",ppe:"#3b82f6"}[n];return It(l=>{if(n==="danger"&&i.current){const u=Math.sin(l.clock.elapsedTime*4)>0;i.current.intensity=u?.5:.1}}),c.jsxs("group",{position:t,rotation:e,children:[c.jsxs("mesh",{children:[c.jsx("boxGeometry",{args:[.6,.4,.03]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.3,roughness:.7})]}),c.jsxs("mesh",{position:[0,0,.02],children:[c.jsx("planeGeometry",{args:[.55,.35]}),c.jsx("meshStandardMaterial",{color:o,emissive:o,emissiveIntensity:.3})]}),[[-.22,.12],[.22,.12],[-.22,-.12],[.22,-.12]].map(([l,u],h)=>c.jsxs("mesh",{position:[l,u,.025],children:[c.jsx("sphereGeometry",{args:[.02,8,8]}),c.jsx("meshStandardMaterial",{color:"#ffffff",emissive:o,emissiveIntensity:n==="danger"?r?1:.2:.5})]},h)),c.jsx("pointLight",{ref:i,position:[0,0,.1],color:o,intensity:.3,distance:2})]})},h6=({position:t,rotation:e=[0,0,0]})=>{const n=Fe(s=>s.gameTime),i=z.useRef(null),r=n%12/12*Math.PI*2-Math.PI/2,a=n%1*60/60*Math.PI*2-Math.PI/2;return It(s=>{if(i.current){const l=s.clock.elapsedTime*10%60/60*Math.PI*2-Math.PI/2;i.current.rotation.z=-l}}),c.jsxs("group",{position:t,rotation:e,children:[c.jsxs("mesh",{children:[c.jsx("cylinderGeometry",{args:[.6,.6,.1,32]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.5,roughness:.4})]}),c.jsxs("mesh",{position:[0,0,.06],rotation:[Math.PI/2,0,0],children:[c.jsx("circleGeometry",{args:[.55,32]}),c.jsx("meshStandardMaterial",{color:"#f5f5f5"})]}),c.jsxs("mesh",{position:[0,0,.06],children:[c.jsx("torusGeometry",{args:[.55,.05,8,32]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.8,roughness:.2})]}),Array.from({length:12}).map((s,o)=>{const l=o/12*Math.PI*2,u=o%3===0;return c.jsxs("mesh",{position:[Math.sin(l)*.45,.065,Math.cos(l)*.45],rotation:[Math.PI/2,0,-l],children:[c.jsx("boxGeometry",{args:[.03,u?.1:.05,.02]}),c.jsx("meshStandardMaterial",{color:"#1e293b"})]},o)}),c.jsx("group",{position:[0,.07,0],rotation:[Math.PI/2,0,-r],children:c.jsxs("mesh",{position:[.12,0,0],children:[c.jsx("boxGeometry",{args:[.25,.04,.015]}),c.jsx("meshStandardMaterial",{color:"#1e293b"})]})}),c.jsx("group",{position:[0,.075,0],rotation:[Math.PI/2,0,-a],children:c.jsxs("mesh",{position:[.17,0,0],children:[c.jsx("boxGeometry",{args:[.35,.025,.012]}),c.jsx("meshStandardMaterial",{color:"#374151"})]})}),c.jsx("group",{ref:i,position:[0,.08,0],rotation:[Math.PI/2,0,0],children:c.jsxs("mesh",{position:[.18,0,0],children:[c.jsx("boxGeometry",{args:[.38,.012,.008]}),c.jsx("meshStandardMaterial",{color:"#ef4444"})]})}),c.jsxs("mesh",{position:[0,.085,0],children:[c.jsx("cylinderGeometry",{args:[.04,.04,.03,16]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.8})]}),c.jsx("pointLight",{position:[0,.2,0],color:"#fef3c7",intensity:.2,distance:2})]})},lM=({position:t})=>{const e=z.useRef(null);return It(n=>{e.current&&(e.current.rotation.z=Math.sin(n.clock.elapsedTime*1.5)*.1)}),c.jsxs("group",{position:t,children:[c.jsxs("mesh",{position:[0,1.2,-.1],children:[c.jsx("boxGeometry",{args:[.3,.15,.1]}),c.jsx("meshStandardMaterial",{color:"#ef4444"})]}),c.jsxs("mesh",{position:[0,.5,0],castShadow:!0,children:[c.jsx("cylinderGeometry",{args:[.1,.12,.9,16]}),c.jsx("meshStandardMaterial",{color:"#dc2626",roughness:.4})]}),c.jsxs("mesh",{position:[0,.98,0],children:[c.jsx("cylinderGeometry",{args:[.08,.1,.08,16]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.6})]}),c.jsxs("mesh",{position:[0,1.1,0],children:[c.jsx("boxGeometry",{args:[.15,.04,.03]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.7})]}),c.jsxs("mesh",{position:[.08,1,.08],rotation:[.5,.3,0],children:[c.jsx("cylinderGeometry",{args:[.015,.02,.15,8]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.6})]}),c.jsxs("mesh",{position:[.05,.85,.1],rotation:[.3,0,0],children:[c.jsx("torusGeometry",{args:[.08,.015,8,16,Math.PI]}),c.jsx("meshStandardMaterial",{color:"#1e293b"})]}),c.jsxs("mesh",{position:[0,.85,.12],children:[c.jsx("cylinderGeometry",{args:[.03,.03,.02,16],rotation:[Math.PI/2,0,0]}),c.jsx("meshStandardMaterial",{color:"#22c55e",emissive:"#22c55e",emissiveIntensity:.3})]}),c.jsxs("group",{position:[.12,.9,0],children:[c.jsxs("mesh",{ref:e,position:[.04,-.05,0],children:[c.jsx("planeGeometry",{args:[.06,.1]}),c.jsx("meshStandardMaterial",{color:"#f5f5f5",side:ai})]}),c.jsxs("mesh",{children:[c.jsx("cylinderGeometry",{args:[.002,.002,.08,4],rotation:[0,0,Math.PI/4]}),c.jsx("meshBasicMaterial",{color:"#94a3b8"})]})]}),c.jsxs("mesh",{position:[0,.01,0],rotation:[-Math.PI/2,0,0],children:[c.jsx("ringGeometry",{args:[.4,.5,16]}),c.jsx("meshStandardMaterial",{color:"#ef4444",transparent:!0,opacity:.4})]})]})},jE=({position:t,isOpen:e,onToggle:n})=>{const i=z.useRef(null),r=z.useRef(0),a=z.useRef(!1),[s,o]=z.useState(!1),l=e?1:0,u=6,h=8;return It((p,g)=>{const b=l-r.current;if(Math.abs(b)>.01){r.current+=b*.5*g*10,i.current&&i.current.children.forEach((S,T)=>{const A=u/h,E=r.current*u,j=(T+.5)*A,R=Math.min(j+E,u+.5);S.position.y=R,S.visible=R<=u+.3});const M=r.current>.1&&r.current<.9;M!==a.current&&(a.current=M,o(M))}}),c.jsxs("group",{position:t,children:[c.jsxs("mesh",{position:[0,u/2+.1,0],children:[c.jsx("boxGeometry",{args:[5.4,.2,.3]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.6,roughness:.4})]}),c.jsxs("mesh",{position:[-2.6,u/2,0],children:[c.jsx("boxGeometry",{args:[.2,u,.3]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.6,roughness:.4})]}),c.jsxs("mesh",{position:[2.6,u/2,0],children:[c.jsx("boxGeometry",{args:[.2,u,.3]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.6,roughness:.4})]}),c.jsx("group",{ref:i,children:Array.from({length:h}).map((p,g)=>{const x=u/h,b=(g+.5)*x;return c.jsxs("mesh",{position:[0,b,.05],children:[c.jsx("boxGeometry",{args:[5,x-.02,.1]}),c.jsx("meshStandardMaterial",{color:g%2===0?"#475569":"#64748b",metalness:.4,roughness:.6})]},g)})}),[-2.4,2.4].map((p,g)=>c.jsxs("mesh",{position:[p,u/2,.15],children:[c.jsx("boxGeometry",{args:[.05,u+1,.05]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.8})]},g)),c.jsx(d6,{position:[-2.3,u+.5,.2],isActive:s}),c.jsx(d6,{position:[2.3,u+.5,.2],isActive:s}),c.jsxs("mesh",{position:[0,.02,1.5],rotation:[-Math.PI/2,0,0],children:[c.jsx("planeGeometry",{args:[5,3]}),c.jsx("meshStandardMaterial",{color:"#eab308",transparent:!0,opacity:.3})]})]})},d6=({position:t,isActive:e})=>{const n=z.useRef(null);return It(i=>{n.current&&e?n.current.intensity=Math.abs(Math.sin(i.clock.elapsedTime*4))*2:n.current&&(n.current.intensity=0)}),c.jsxs("group",{position:t,children:[c.jsxs("mesh",{children:[c.jsx("cylinderGeometry",{args:[.1,.1,.15,16]}),c.jsx("meshStandardMaterial",{color:e?"#f97316":"#64748b",emissive:e?"#f97316":"#000000",emissiveIntensity:e?.5:0})]}),c.jsx("pointLight",{ref:n,color:"#f97316",intensity:0,distance:5})]})},Fm=({position:t,color:e="#22c55e",blinkPattern:n="steady"})=>{const i=z.useRef(null);return It(r=>{if(!i.current)return;const a=i.current.material,s=r.clock.elapsedTime;let o=1;switch(n){case"slow":o=Math.sin(s*1)>0?1:.1;break;case"fast":o=Math.sin(s*5)>0?1:.1;break;case"pulse":o=.3+Math.abs(Math.sin(s*2))*.7;break;default:o=.8}a.emissiveIntensity=o}),c.jsxs("mesh",{ref:i,position:t,children:[c.jsx("sphereGeometry",{args:[.03,8,8]}),c.jsx("meshStandardMaterial",{color:e,emissive:e,emissiveIntensity:.8})]})},cM=({position:t,rotation:e=[0,0,0]})=>c.jsxs("group",{position:t,rotation:e,children:[c.jsxs("mesh",{children:[c.jsx("boxGeometry",{args:[.8,.6,.15]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.5,roughness:.4})]}),c.jsxs("mesh",{position:[0,0,.08],children:[c.jsx("planeGeometry",{args:[.7,.5]}),c.jsx("meshStandardMaterial",{color:"#374151",roughness:.6})]}),c.jsx(Fm,{position:[-.25,.15,.09],color:"#22c55e",blinkPattern:"pulse"}),c.jsx(Fm,{position:[-.15,.15,.09],color:"#22c55e",blinkPattern:"steady"}),c.jsx(Fm,{position:[-.05,.15,.09],color:"#eab308",blinkPattern:"slow"}),c.jsx(Fm,{position:[.05,.15,.09],color:"#22c55e",blinkPattern:"steady"}),c.jsx(Fm,{position:[.15,.15,.09],color:"#3b82f6",blinkPattern:"fast"}),c.jsx(Fm,{position:[.25,.15,.09],color:"#22c55e",blinkPattern:"steady"}),[[-.2,-.05],[0,-.05],[.2,-.05]].map(([n,i],r)=>c.jsxs("mesh",{position:[n,i,.09],children:[c.jsx("cylinderGeometry",{args:[.04,.04,.03,16],rotation:[Math.PI/2,0,0]}),c.jsx("meshStandardMaterial",{color:["#22c55e","#eab308","#ef4444"][r],roughness:.3})]},r)),c.jsxs("mesh",{position:[0,-.15,.09],children:[c.jsx("planeGeometry",{args:[.4,.1]}),c.jsx("meshStandardMaterial",{color:"#0f172a",emissive:"#22c55e",emissiveIntensity:.2})]})]}),uM=({position:t})=>{const e=z.useRef(null),n=z.useRef(0),i=0,r=-3;return It((a,s)=>{let o=n.current-s*1.5;if(o<r&&(o=Math.random()>.98?i:r-.1),n.current=o,e.current){e.current.position.y=o;const l=1+Math.abs(o-i)*.1;e.current.scale.y=l,e.current.visible=o>r}}),c.jsxs("group",{position:t,children:[c.jsxs("mesh",{position:[0,.05,0],children:[c.jsx("sphereGeometry",{args:[.03,8,8,0,Math.PI*2,0,Math.PI/2]}),c.jsx("meshStandardMaterial",{color:"#60a5fa",transparent:!0,opacity:.6,metalness:.8,roughness:.1})]}),c.jsxs("mesh",{ref:e,position:[0,0,0],children:[c.jsx("sphereGeometry",{args:[.015,6,6]}),c.jsx("meshStandardMaterial",{color:"#60a5fa",transparent:!0,opacity:.7,metalness:.8,roughness:.1})]})]})},Gm=({position:t,count:e=3})=>c.jsxs("group",{position:t,children:[Array.from({length:e}).map((n,i)=>c.jsxs("group",{position:[0,i*.15,0],children:[c.jsxs("mesh",{position:[0,.05,0],castShadow:!0,children:[c.jsx("boxGeometry",{args:[1.2,.1,1]}),c.jsx("meshStandardMaterial",{color:"#78350f",roughness:.9})]}),[-.4,0,.4].map((r,a)=>c.jsxs("mesh",{position:[r,0,0],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.1,.1,1]}),c.jsx("meshStandardMaterial",{color:"#92400e",roughness:.9})]},a)),[-.35,.35].map((r,a)=>c.jsxs("mesh",{position:[0,0,r],children:[c.jsx("boxGeometry",{args:[1.2,.08,.08]}),c.jsx("meshStandardMaterial",{color:"#78350f",roughness:.9})]},a))]},i)),Math.random()>.3&&c.jsxs("group",{position:[0,e*.15+.2,0],children:[c.jsxs("mesh",{position:[-.2,.15,.1],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.4,.3,.35]}),c.jsx("meshStandardMaterial",{color:"#a3a3a3",roughness:.7})]}),c.jsxs("mesh",{position:[.25,.1,-.15],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.3,.2,.25]}),c.jsx("meshStandardMaterial",{color:"#78716c",roughness:.7})]})]})]}),NE=({position:t,rotation:e=[0,0,0]})=>c.jsxs("group",{position:t,rotation:e,children:[c.jsxs("mesh",{children:[c.jsx("boxGeometry",{args:[1.5,1,.05]}),c.jsx("meshStandardMaterial",{color:"#a3a3a3",roughness:.8})]}),c.jsxs("mesh",{position:[0,0,.03],children:[c.jsx("planeGeometry",{args:[1.4,.9]}),c.jsx("meshStandardMaterial",{color:"#737373",roughness:.9})]}),c.jsxs("group",{position:[-.5,.2,.08],children:[c.jsxs("mesh",{rotation:[0,0,Math.PI/6],children:[c.jsx("boxGeometry",{args:[.04,.3,.02]}),c.jsx("meshStandardMaterial",{color:"#71717a",metalness:.8,roughness:.3})]}),c.jsxs("mesh",{position:[.02,.12,0],rotation:[0,0,Math.PI/6],children:[c.jsx("boxGeometry",{args:[.08,.06,.02]}),c.jsx("meshStandardMaterial",{color:"#71717a",metalness:.8,roughness:.3})]})]}),c.jsxs("group",{position:[-.2,.15,.08],children:[c.jsxs("mesh",{children:[c.jsx("boxGeometry",{args:[.03,.25,.03]}),c.jsx("meshStandardMaterial",{color:"#78350f",roughness:.8})]}),c.jsxs("mesh",{position:[0,.15,0],children:[c.jsx("boxGeometry",{args:[.08,.06,.04]}),c.jsx("meshStandardMaterial",{color:"#52525b",metalness:.7,roughness:.4})]})]}),[.1,.2,.3].map((n,i)=>c.jsxs("group",{position:[n,.1,.08],children:[c.jsxs("mesh",{children:[c.jsx("cylinderGeometry",{args:[.015,.015,.15,8]}),c.jsx("meshStandardMaterial",{color:["#ef4444","#eab308","#22c55e"][i],roughness:.5})]}),c.jsxs("mesh",{position:[0,.1,0],children:[c.jsx("cylinderGeometry",{args:[.008,.008,.08,6]}),c.jsx("meshStandardMaterial",{color:"#71717a",metalness:.8})]})]},i)),c.jsxs("mesh",{position:[.5,.2,.08],children:[c.jsx("boxGeometry",{args:[.08,.08,.04]}),c.jsx("meshStandardMaterial",{color:"#eab308",roughness:.4})]}),c.jsxs("group",{position:[.5,-.1,.08],children:[c.jsxs("mesh",{rotation:[0,0,.3],children:[c.jsx("boxGeometry",{args:[.02,.12,.01]}),c.jsx("meshStandardMaterial",{color:"#ef4444",roughness:.5})]}),c.jsxs("mesh",{rotation:[0,0,-.3],children:[c.jsx("boxGeometry",{args:[.02,.12,.01]}),c.jsx("meshStandardMaterial",{color:"#ef4444",roughness:.5})]})]}),c.jsxs("mesh",{position:[0,.55,0],children:[c.jsx("cylinderGeometry",{args:[.02,.02,.1,8]}),c.jsx("meshStandardMaterial",{color:"#52525b",metalness:.7})]})]}),iy=({position:t,color:e="#eab308"})=>{const n=z.useRef(null);return It(i=>{n.current&&(n.current.rotation.z=Math.sin(i.clock.elapsedTime*.8)*.03)}),c.jsxs("group",{position:t,children:[c.jsxs("mesh",{position:[0,0,-.05],children:[c.jsx("boxGeometry",{args:[.1,.1,.05]}),c.jsx("meshStandardMaterial",{color:"#52525b",metalness:.6})]}),c.jsxs("mesh",{position:[0,-.05,.05],rotation:[.3,0,0],children:[c.jsx("torusGeometry",{args:[.04,.01,8,16,Math.PI]}),c.jsx("meshStandardMaterial",{color:"#52525b",metalness:.7})]}),c.jsxs("group",{ref:n,position:[0,-.15,.08],children:[c.jsxs("mesh",{children:[c.jsx("sphereGeometry",{args:[.12,16,8,0,Math.PI*2,0,Math.PI/2]}),c.jsx("meshStandardMaterial",{color:e,roughness:.4})]}),c.jsxs("mesh",{position:[0,-.01,0],children:[c.jsx("cylinderGeometry",{args:[.14,.14,.02,16]}),c.jsx("meshStandardMaterial",{color:e,roughness:.4})]})]})]})},p6=({position:t})=>{const e=z.useRef(null);return c.jsxs("group",{position:t,children:[c.jsxs("group",{position:[0,0,0],children:[c.jsxs("mesh",{position:[0,.2,0],castShadow:!0,children:[c.jsx("cylinderGeometry",{args:[.2,.25,.4,16]}),c.jsx("meshStandardMaterial",{color:"#3b82f6",roughness:.5})]}),c.jsxs("mesh",{position:[0,.3,0],children:[c.jsx("cylinderGeometry",{args:[.18,.18,.1,16]}),c.jsx("meshStandardMaterial",{color:"#60a5fa",transparent:!0,opacity:.6,metalness:.3})]}),c.jsxs("mesh",{position:[.15,.35,0],children:[c.jsx("boxGeometry",{args:[.15,.08,.02]}),c.jsx("meshStandardMaterial",{color:"#1e293b"})]}),[-.15,.15].map((n,i)=>c.jsxs("mesh",{position:[n,.03,.2],children:[c.jsx("cylinderGeometry",{args:[.03,.03,.02,12],rotation:[Math.PI/2,0,0]}),c.jsx("meshStandardMaterial",{color:"#1e293b"})]},i)),c.jsxs("mesh",{position:[0,.45,.15],children:[c.jsx("boxGeometry",{args:[.2,.1,.1]}),c.jsx("meshStandardMaterial",{color:"#fbbf24",roughness:.4})]})]}),c.jsxs("group",{position:[.4,0,0],rotation:[0,0,.15],children:[c.jsxs("mesh",{ref:e,position:[0,.6,0],children:[c.jsx("cylinderGeometry",{args:[.015,.015,1.2,8]}),c.jsx("meshStandardMaterial",{color:"#78350f",roughness:.8})]}),c.jsxs("mesh",{position:[0,.08,0],children:[c.jsx("boxGeometry",{args:[.15,.12,.04]}),c.jsx("meshStandardMaterial",{color:"#a16207",roughness:.9})]})]}),c.jsx("group",{position:[-.4,0,.3],children:c.jsxs("mesh",{position:[0,.25,0],rotation:[0,.3,0],children:[c.jsx("coneGeometry",{args:[.15,.5,4]}),c.jsx("meshStandardMaterial",{color:"#eab308",roughness:.4})]})})]})},fM=({position:t,length:e=10,rotation:n=[0,0,0]})=>{const i=z.useRef(null);return It(r=>{i.current&&i.current.children.forEach((a,s)=>{a.rotation.z=Math.sin(r.clock.elapsedTime*.5+s)*.02})}),c.jsxs("group",{position:t,rotation:n,children:[c.jsxs("mesh",{children:[c.jsx("boxGeometry",{args:[e,.05,.3]}),c.jsx("meshStandardMaterial",{color:"#52525b",metalness:.6,roughness:.4})]}),[-.12,.12].map((r,a)=>c.jsxs("mesh",{position:[0,.05,r],children:[c.jsx("boxGeometry",{args:[e,.1,.02]}),c.jsx("meshStandardMaterial",{color:"#52525b",metalness:.6,roughness:.4})]},a)),Array.from({length:Math.floor(e/2)}).map((r,a)=>c.jsxs("mesh",{position:[-e/2+1+a*2,.15,0],children:[c.jsx("boxGeometry",{args:[.05,.3,.35]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.5})]},a)),[{color:"#ef4444",offset:-.08},{color:"#3b82f6",offset:0},{color:"#22c55e",offset:.08}].map((r,a)=>c.jsxs("mesh",{position:[0,.02,r.offset],children:[c.jsx("cylinderGeometry",{args:[.02,.02,e,8],rotation:[0,0,Math.PI/2]}),c.jsx("meshStandardMaterial",{color:r.color,roughness:.6})]},a)),c.jsx("group",{ref:i,children:Array.from({length:3}).map((r,a)=>c.jsx("group",{position:[-e/3+a*(e/3),-.1,0],children:c.jsxs("mesh",{children:[c.jsx("cylinderGeometry",{args:[.008,.008,.5+Math.random()*.3,6]}),c.jsx("meshStandardMaterial",{color:["#ef4444","#eab308","#3b82f6"][a],roughness:.5})]})},a))})]})},OE=({position:t})=>{const e=z.useRef(null),n=30,i=z.useMemo(()=>{const r=new Float32Array(n*3),a=[];for(let s=0;s<n;s++)r[s*3]=(Math.random()-.5)*.2,r[s*3+1]=Math.random()*.5,r[s*3+2]=(Math.random()-.5)*.2,a.push(.01+Math.random()*.02);return{positions:r,velocities:a}},[]);return It(()=>{if(!e.current)return;const r=e.current.geometry.attributes.position.array;for(let a=0;a<n;a++)r[a*3+1]+=i.velocities[a],r[a*3]+=(Math.random()-.5)*.01,r[a*3+1]>1&&(r[a*3]=(Math.random()-.5)*.2,r[a*3+1]=0,r[a*3+2]=(Math.random()-.5)*.2);e.current.geometry.attributes.position.needsUpdate=!0}),c.jsxs("group",{position:t,children:[c.jsxs("mesh",{children:[c.jsx("cylinderGeometry",{args:[.1,.1,.3,12]}),c.jsx("meshStandardMaterial",{color:"#52525b",metalness:.6,roughness:.4})]}),c.jsxs("mesh",{position:[0,.2,0],children:[c.jsx("cylinderGeometry",{args:[.12,.08,.1,12]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.5})]}),c.jsxs("points",{ref:e,position:[0,.25,0],children:[c.jsx("bufferGeometry",{children:c.jsx("bufferAttribute",{attach:"attributes-position",count:n,array:i.positions,itemSize:3})}),c.jsx("pointsMaterial",{size:.08,color:"#e2e8f0",transparent:!0,opacity:.3,sizeAttenuation:!0,depthWrite:!1})]})]})},Vm=({position:t,size:e=.6})=>c.jsxs("group",{position:t,children:[c.jsxs("mesh",{position:[0,.01,0],rotation:[-Math.PI/2,0,0],children:[c.jsx("ringGeometry",{args:[e*.4,e*.5,4]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.7,roughness:.4})]}),Array.from({length:5}).map((n,i)=>c.jsxs("mesh",{position:[0,.015,(i-2)*e*.15],rotation:[-Math.PI/2,0,0],children:[c.jsx("boxGeometry",{args:[e*.8,.02,.03]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.8,roughness:.3})]},i)),c.jsxs("mesh",{position:[0,-.01,0],rotation:[-Math.PI/2,0,0],children:[c.jsx("circleGeometry",{args:[e*.4,8]}),c.jsx("meshBasicMaterial",{color:"#0a0a0a"})]})]}),DE=({position:t})=>{const e=z.useRef(null),n=z.useRef(null),i=z.useRef({nextFlicker:0,isFlickering:!1,flickerEnd:0});return It(r=>{if(!e.current||!n.current)return;const a=r.clock.elapsedTime,s=n.current.material;if(a>i.current.nextFlicker&&!i.current.isFlickering&&(Math.random()<.002&&(i.current.isFlickering=!0,i.current.flickerEnd=a+.5+Math.random()*1),i.current.nextFlicker=a+.1),i.current.isFlickering)if(a<i.current.flickerEnd){const o=Math.random()>.3?1:.1;e.current.intensity=o*2,s.emissiveIntensity=o*.8}else i.current.isFlickering=!1,e.current.intensity=2,s.emissiveIntensity=.8}),c.jsxs("group",{position:t,children:[c.jsxs("mesh",{position:[0,.05,0],children:[c.jsx("boxGeometry",{args:[1.2,.08,.15]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.5,roughness:.5})]}),c.jsxs("mesh",{ref:n,children:[c.jsx("cylinderGeometry",{args:[.02,.02,1,8],rotation:[0,0,Math.PI/2]}),c.jsx("meshStandardMaterial",{color:"#f5f5f5",emissive:"#f5f5f5",emissiveIntensity:.8})]}),c.jsx("pointLight",{ref:e,position:[0,-.1,0],color:"#f5f5f5",intensity:2,distance:8})]})},hM=({position:t,length:e=3})=>{const n=z.useRef(null),i=z.useRef(.5+Math.random()*.5),r=z.useRef(.05+Math.random()*.1);It(s=>{n.current&&(n.current.rotation.z=Math.sin(s.clock.elapsedTime*i.current)*r.current,n.current.rotation.x=Math.cos(s.clock.elapsedTime*i.current*.7)*r.current*.5)});const a=Math.floor(e/.15);return c.jsxs("group",{position:t,children:[c.jsxs("mesh",{children:[c.jsx("cylinderGeometry",{args:[.05,.05,.1,12]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.7})]}),c.jsxs("group",{ref:n,children:[Array.from({length:a}).map((s,o)=>c.jsxs("mesh",{position:[0,-.1-o*.12,0],rotation:[0,o%2===0?0:Math.PI/2,0],children:[c.jsx("torusGeometry",{args:[.03,.008,6,12]}),c.jsx("meshStandardMaterial",{color:"#52525b",metalness:.8,roughness:.3})]},o)),c.jsxs("group",{position:[0,-e+.2,0],children:[c.jsxs("mesh",{rotation:[0,0,Math.PI],children:[c.jsx("torusGeometry",{args:[.08,.015,8,16,Math.PI*1.5]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.7,roughness:.4})]}),c.jsxs("mesh",{position:[0,.08,0],children:[c.jsx("cylinderGeometry",{args:[.015,.015,.1,8]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.7})]})]})]})]})},dM=({position:t,rotation:e=[0,0,0]})=>{const n=z.useRef(null),i=z.useRef(2+Math.random()*2);return It(r=>{n.current&&(n.current.rotation.z=r.clock.elapsedTime*i.current)}),c.jsxs("group",{position:t,rotation:e,children:[c.jsxs("mesh",{children:[c.jsx("boxGeometry",{args:[.8,.8,.15]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.5,roughness:.5})]}),c.jsxs("mesh",{position:[0,0,.08],children:[c.jsx("planeGeometry",{args:[.7,.7]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.6,transparent:!0,opacity:.8})]}),c.jsxs("mesh",{ref:n,position:[0,0,.02],children:[c.jsx("cylinderGeometry",{args:[.3,.3,.02,4]}),c.jsx("meshStandardMaterial",{color:"#52525b",metalness:.6,roughness:.4,side:ai})]}),c.jsxs("mesh",{position:[0,0,.05],children:[c.jsx("cylinderGeometry",{args:[.05,.05,.05,12],rotation:[Math.PI/2,0,0]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.7})]})]})},PE=({position:t,rotation:e=[0,0,0]})=>{const n=z.useRef(null),i=z.useRef({nextSpark:5+Math.random()*30,sparking:!1,sparkEnd:0});return It(r=>{if(!n.current)return;const a=r.clock.elapsedTime;a>i.current.nextSpark&&!i.current.sparking&&(i.current.sparking=!0,i.current.sparkEnd=a+.1+Math.random()*.2,i.current.nextSpark=a+20+Math.random()*60),i.current.sparking&&(a<i.current.sparkEnd?n.current.intensity=Math.random()>.5?5:0:(i.current.sparking=!1,n.current.intensity=0))}),c.jsxs("group",{position:t,rotation:e,children:[c.jsxs("mesh",{castShadow:!0,children:[c.jsx("boxGeometry",{args:[.6,.8,.15]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.4,roughness:.6})]}),c.jsxs("mesh",{position:[0,0,.08],children:[c.jsx("boxGeometry",{args:[.55,.75,.02]}),c.jsx("meshStandardMaterial",{color:"#52525b",metalness:.5,roughness:.5})]}),c.jsxs("mesh",{position:[0,.2,.1],children:[c.jsx("planeGeometry",{args:[.3,.15]}),c.jsx("meshStandardMaterial",{color:"#eab308"})]}),c.jsxs("mesh",{position:[.2,0,.1],children:[c.jsx("boxGeometry",{args:[.04,.12,.03]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.6})]}),[-.15,.15].map((r,a)=>c.jsxs("mesh",{position:[r,.5,0],children:[c.jsx("cylinderGeometry",{args:[.03,.03,.3,8]}),c.jsx("meshStandardMaterial",{color:"#64748b",metalness:.6})]},a)),c.jsx("pointLight",{ref:n,position:[0,-.2,.2],color:"#60a5fa",intensity:0,distance:2})]})},ry=({position:t})=>{const e=z.useRef(null),n=z.useRef({behavior:"idle",nextBehavior:Math.random()*5,walkTarget:null});return It(i=>{if(!e.current)return;const r=i.clock.elapsedTime;if(r>n.current.nextBehavior){const a=["idle","pecking","looking"];n.current.behavior=a[Math.floor(Math.random()*a.length)],n.current.nextBehavior=r+2+Math.random()*5}switch(n.current.behavior){case"pecking":e.current.rotation.x=Math.sin(r*8)*.2;break;case"looking":e.current.rotation.y=Math.sin(r*2)*.5;break;default:e.current.rotation.x=0,e.current.rotation.y*=.95}}),c.jsx("group",{position:t,children:c.jsxs("group",{ref:e,children:[c.jsxs("mesh",{children:[c.jsx("sphereGeometry",{args:[.08,8,8]}),c.jsx("meshStandardMaterial",{color:"#64748b",roughness:.8})]}),c.jsxs("mesh",{position:[.08,.04,0],children:[c.jsx("sphereGeometry",{args:[.04,8,8]}),c.jsx("meshStandardMaterial",{color:"#64748b",roughness:.8})]}),c.jsxs("mesh",{position:[.13,.03,0],rotation:[0,0,-.3],children:[c.jsx("coneGeometry",{args:[.01,.03,4],rotation:[0,0,Math.PI/2]}),c.jsx("meshStandardMaterial",{color:"#f97316",roughness:.5})]}),c.jsxs("mesh",{position:[-.1,0,0],rotation:[0,0,.3],children:[c.jsx("boxGeometry",{args:[.08,.02,.04]}),c.jsx("meshStandardMaterial",{color:"#475569",roughness:.8})]}),[-.02,.02].map((i,r)=>c.jsxs("mesh",{position:[0,-.08,i],children:[c.jsx("cylinderGeometry",{args:[.005,.005,.04,4]}),c.jsx("meshStandardMaterial",{color:"#f97316",roughness:.6})]},r))]})})},IE=({position:t,pathLength:e=3})=>{const n=z.useRef(null),i=z.useRef({isMoving:!1,nextMove:5+Math.random()*20,moveEnd:0,direction:1,currentX:0});return It((r,a)=>{if(!n.current)return;const s=r.clock.elapsedTime;s>i.current.nextMove&&!i.current.isMoving&&(i.current.isMoving=!0,i.current.moveEnd=s+.5+Math.random()*1,i.current.direction=Math.random()>.5?1:-1,i.current.nextMove=s+10+Math.random()*30),i.current.isMoving&&(s<i.current.moveEnd?(i.current.currentX+=i.current.direction*a*3,i.current.currentX=Math.max(-e/2,Math.min(e/2,i.current.currentX)),n.current.position.x=i.current.currentX,n.current.rotation.y=i.current.direction>0?0:Math.PI,n.current.position.y=Math.abs(Math.sin(s*30))*.01):i.current.isMoving=!1)}),c.jsx("group",{position:t,children:c.jsxs("group",{ref:n,scale:.5,children:[c.jsxs("mesh",{children:[c.jsx("sphereGeometry",{args:[.06,8,6],scale:[1.5,1,1]}),c.jsx("meshStandardMaterial",{color:"#78716c",roughness:.9})]}),c.jsxs("mesh",{position:[.08,.01,0],children:[c.jsx("sphereGeometry",{args:[.03,8,6]}),c.jsx("meshStandardMaterial",{color:"#78716c",roughness:.9})]}),[-.015,.015].map((r,a)=>c.jsxs("mesh",{position:[.08,.04,r],children:[c.jsx("sphereGeometry",{args:[.015,6,6]}),c.jsx("meshStandardMaterial",{color:"#fca5a5",roughness:.7})]},a)),c.jsxs("mesh",{position:[-.1,.01,0],rotation:[0,0,.5],children:[c.jsx("cylinderGeometry",{args:[.005,.003,.12,6],rotation:[0,0,Math.PI/2]}),c.jsx("meshStandardMaterial",{color:"#d6d3d1",roughness:.7})]})]})})},UE=({position:t,rotation:e=[0,0,0]})=>{const n=z.useRef(null),i=100,r=z.useMemo(()=>{const a=new Float32Array(i*3),s=new Float32Array(i);for(let o=0;o<i;o++){const l=Math.random(),u=l*2;a[o*3]=(Math.random()-.5)*u,a[o*3+1]=-l*8,a[o*3+2]=(Math.random()-.5)*u,s[o]=.02+Math.random()*.03}return{positions:a,sizes:s}},[]);return It(a=>{if(!n.current)return;const s=n.current.geometry.attributes.position.array;for(let o=0;o<i;o++)if(s[o*3]+=Math.sin(a.clock.elapsedTime*.3+o)*.002,s[o*3+1]+=.005,s[o*3+2]+=Math.cos(a.clock.elapsedTime*.2+o)*.002,s[o*3+1]>0){const u=Math.random()*2;s[o*3]=(Math.random()-.5)*u,s[o*3+1]=-8,s[o*3+2]=(Math.random()-.5)*u}n.current.geometry.attributes.position.needsUpdate=!0}),c.jsxs("group",{position:t,rotation:e,children:[c.jsxs("mesh",{children:[c.jsx("coneGeometry",{args:[2,8,16,1,!0]}),c.jsx("meshBasicMaterial",{color:"#fef3c7",transparent:!0,opacity:.03,side:ai,depthWrite:!1})]}),c.jsxs("points",{ref:n,children:[c.jsx("bufferGeometry",{children:c.jsx("bufferAttribute",{attach:"attributes-position",count:i,array:r.positions,itemSize:3})}),c.jsx("pointsMaterial",{size:.05,color:"#fef3c7",transparent:!0,opacity:.4,sizeAttenuation:!0,depthWrite:!1})]})]})},pM=({position:t,rotation:e=[0,0,0],type:n="tag"})=>{const i=z.useMemo(()=>{const r=document.createElement("canvas");r.width=128,r.height=64;const a=r.getContext("2d");switch(a.clearRect(0,0,128,64),n){case"tag":{a.font="bold 24px Arial",a.fillStyle="rgba(50, 50, 50, 0.6)";const o=["JAKE WUZ HERE","B.M. 2019","MILL CREW","SHIFT 3"];a.fillText(o[Math.floor(Math.random()*o.length)],10,40);break}case"drawing":a.strokeStyle="rgba(60, 60, 60, 0.5)",a.lineWidth=2,a.beginPath(),a.arc(64,32,20,0,Math.PI*2),a.stroke(),a.beginPath(),a.arc(56,28,3,0,Math.PI*2),a.arc(72,28,3,0,Math.PI*2),a.fill(),a.beginPath(),a.arc(64,32,12,.2,Math.PI-.2),a.stroke();break;case"message":a.font="14px Arial",a.fillStyle="rgba(40, 40, 40, 0.5)",a.fillText("CALL MOM",10,25),a.fillText("555-0123",10,45);break}const s=new Ba(r);return s.needsUpdate=!0,s},[n]);return c.jsxs("mesh",{position:t,rotation:e,children:[c.jsx("planeGeometry",{args:[.8,.4]}),c.jsx("meshBasicMaterial",{map:i,transparent:!0,depthWrite:!1,side:ai})]})},m6=({position:t,rotation:e=[0,0,0]})=>{const n=z.useRef(null);return It(i=>{n.current&&n.current.children.forEach((r,a)=>{r.rotation.z=Math.sin(i.clock.elapsedTime*2+a*.5)*.02})}),c.jsxs("group",{position:t,rotation:e,children:[c.jsxs("mesh",{children:[c.jsx("boxGeometry",{args:[1.2,.9,.05]}),c.jsx("meshStandardMaterial",{color:"#b45309",roughness:.9})]}),[[-.6,0],[.6,0],[0,-.45],[0,.45]].map(([i,r],a)=>c.jsxs("mesh",{position:[i,r,.03],rotation:[0,0,a<2?0:Math.PI/2],children:[c.jsx("boxGeometry",{args:[.05,a<2?.95:1.25,.03]}),c.jsx("meshStandardMaterial",{color:"#78350f",roughness:.7})]},a)),c.jsxs("group",{ref:n,children:[c.jsxs("group",{position:[-.35,.2,.04],children:[c.jsxs("mesh",{children:[c.jsx("planeGeometry",{args:[.3,.4]}),c.jsx("meshStandardMaterial",{color:"#fef3c7",roughness:.8})]}),c.jsxs("mesh",{position:[0,.18,.01],children:[c.jsx("sphereGeometry",{args:[.02,8,8]}),c.jsx("meshStandardMaterial",{color:"#ef4444"})]})]}),c.jsxs("group",{position:[.1,.15,.04],children:[c.jsxs("mesh",{rotation:[0,0,.1],children:[c.jsx("planeGeometry",{args:[.35,.3]}),c.jsx("meshStandardMaterial",{color:"#f5f5f5",roughness:.8})]}),c.jsxs("mesh",{position:[.1,.1,.01],children:[c.jsx("sphereGeometry",{args:[.02,8,8]}),c.jsx("meshStandardMaterial",{color:"#3b82f6"})]})]}),c.jsxs("group",{position:[.35,-.1,.04],children:[c.jsxs("mesh",{rotation:[0,0,-.15],children:[c.jsx("planeGeometry",{args:[.25,.25]}),c.jsx("meshStandardMaterial",{color:"#fde047",roughness:.7})]}),c.jsxs("mesh",{position:[0,.1,.01],children:[c.jsx("sphereGeometry",{args:[.02,8,8]}),c.jsx("meshStandardMaterial",{color:"#22c55e"})]})]}),c.jsxs("group",{position:[-.3,-.2,.04],children:[c.jsxs("mesh",{rotation:[0,0,.05],children:[c.jsx("planeGeometry",{args:[.2,.15]}),c.jsx("meshStandardMaterial",{color:"#e2e8f0",roughness:.6})]}),c.jsxs("mesh",{position:[-.05,.06,.01],children:[c.jsx("sphereGeometry",{args:[.015,8,8]}),c.jsx("meshStandardMaterial",{color:"#ef4444"})]})]}),c.jsxs("group",{position:[0,-.25,.04],children:[c.jsxs("mesh",{rotation:[0,0,-.08],children:[c.jsx("planeGeometry",{args:[.28,.2]}),c.jsx("meshStandardMaterial",{color:"#bfdbfe",roughness:.7})]}),c.jsxs("mesh",{position:[0,.08,.01],children:[c.jsx("sphereGeometry",{args:[.02,8,8]}),c.jsx("meshStandardMaterial",{color:"#f97316"})]})]})]})]})},mM=({position:t,rotation:e=[0,0,0],size:n=.5})=>{const i=z.useMemo(()=>{const r=document.createElement("canvas");r.width=128,r.height=128;const a=r.getContext("2d");a.clearRect(0,0,128,128);const s=a.createRadialGradient(64,64,0,64,64,55);s.addColorStop(0,"rgba(20, 20, 20, 0.8)"),s.addColorStop(.3,"rgba(40, 30, 20, 0.6)"),s.addColorStop(.6,"rgba(60, 40, 20, 0.3)"),s.addColorStop(1,"rgba(80, 50, 30, 0)"),a.fillStyle=s,a.beginPath();for(let l=0;l<16;l++){const u=l/16*Math.PI*2,h=35+Math.random()*25,p=64+Math.cos(u)*h,g=64+Math.sin(u)*h;l===0?a.moveTo(p,g):a.lineTo(p,g)}a.closePath(),a.fill();for(let l=0;l<20;l++){const u=Math.random()*Math.PI*2,h=30+Math.random()*30;a.fillStyle=`rgba(30, 30, 30, ${.3+Math.random()*.3})`,a.beginPath(),a.arc(64+Math.cos(u)*h,64+Math.sin(u)*h,2+Math.random()*4,0,Math.PI*2),a.fill()}const o=new Ba(r);return o.needsUpdate=!0,o},[]);return c.jsxs("mesh",{position:t,rotation:e,children:[c.jsx("planeGeometry",{args:[n,n]}),c.jsx("meshBasicMaterial",{map:i,transparent:!0,depthWrite:!1,side:ai})]})},Hm=({position:t,color:e="#3b82f6",tipped:n=!1})=>c.jsxs("group",{position:t,rotation:n?[Math.PI/2-.3,0,Math.random()*Math.PI*2]:[0,Math.random()*Math.PI*2,0],children:[c.jsxs("mesh",{position:[0,n?0:.45,0],castShadow:!0,children:[c.jsx("cylinderGeometry",{args:[.28,.28,.9,16]}),c.jsx("meshStandardMaterial",{color:e,roughness:.5,metalness:.3})]}),c.jsxs("mesh",{position:[0,n?.45:.9,0],children:[c.jsx("torusGeometry",{args:[.28,.02,8,16]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.6})]}),c.jsxs("mesh",{position:[0,n?-.45:0,0],children:[c.jsx("torusGeometry",{args:[.28,.02,8,16]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.6})]}),c.jsxs("mesh",{position:[0,n?0:.45,0],children:[c.jsx("torusGeometry",{args:[.29,.015,8,16]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.5})]}),!n&&c.jsxs(c.Fragment,{children:[c.jsxs("mesh",{position:[-.1,.91,0],rotation:[Math.PI/2,0,0],children:[c.jsx("cylinderGeometry",{args:[.03,.03,.02,8]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.7})]}),c.jsxs("mesh",{position:[.1,.91,0],rotation:[Math.PI/2,0,0],children:[c.jsx("cylinderGeometry",{args:[.02,.02,.02,8]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.7})]})]})]}),gM=({position:t,color:e="#22c55e"})=>c.jsxs("group",{position:t,children:[c.jsxs("mesh",{position:[0,.6,0],castShadow:!0,children:[c.jsx("cylinderGeometry",{args:[.12,.12,1.2,16]}),c.jsx("meshStandardMaterial",{color:e,roughness:.4,metalness:.3})]}),c.jsxs("mesh",{position:[0,1.2,0],children:[c.jsx("sphereGeometry",{args:[.12,16,8,0,Math.PI*2,0,Math.PI/2]}),c.jsx("meshStandardMaterial",{color:e,roughness:.4,metalness:.3})]}),c.jsxs("mesh",{position:[0,.02,0],children:[c.jsx("cylinderGeometry",{args:[.13,.13,.04,16]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.6})]}),c.jsxs("mesh",{position:[0,1.35,0],children:[c.jsx("cylinderGeometry",{args:[.08,.1,.15,8]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.5})]}),c.jsxs("mesh",{position:[0,1.4,.05],children:[c.jsx("boxGeometry",{args:[.04,.06,.04]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.7})]}),c.jsxs("mesh",{position:[0,.8,.15],children:[c.jsx("torusGeometry",{args:[.02,.005,6,12]}),c.jsx("meshStandardMaterial",{color:"#71717a",metalness:.8})]}),c.jsxs("mesh",{position:[0,.8,.19],children:[c.jsx("torusGeometry",{args:[.02,.005,6,12],rotation:[0,Math.PI/2,0]}),c.jsx("meshStandardMaterial",{color:"#71717a",metalness:.8})]}),c.jsxs("mesh",{position:[0,.8,.25],children:[c.jsx("boxGeometry",{args:[.2,.1,.05]}),c.jsx("meshStandardMaterial",{color:"#52525b",metalness:.5})]})]}),LE=({position:t,isOpen:e=!1})=>c.jsxs("group",{position:t,children:[c.jsxs("mesh",{position:[0,.1,0],castShadow:!0,children:[c.jsx("boxGeometry",{args:[.5,.2,.25]}),c.jsx("meshStandardMaterial",{color:"#dc2626",roughness:.5,metalness:.3})]}),c.jsx("group",{position:[0,.2,e?.12:0],rotation:[e?-Math.PI/3:0,0,0],children:c.jsxs("mesh",{position:[0,.02,0],children:[c.jsx("boxGeometry",{args:[.5,.04,.25]}),c.jsx("meshStandardMaterial",{color:"#b91c1c",roughness:.5,metalness:.3})]})}),c.jsxs("mesh",{position:[0,.25,0],children:[c.jsx("boxGeometry",{args:[.2,.03,.03]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.6})]}),[-.18,.18].map((n,i)=>c.jsxs("mesh",{position:[n,.15,.13],children:[c.jsx("boxGeometry",{args:[.04,.06,.02]}),c.jsx("meshStandardMaterial",{color:"#fbbf24",metalness:.5})]},i)),e&&c.jsxs("group",{position:[0,.15,0],children:[c.jsxs("mesh",{position:[-.15,.05,0],rotation:[0,0,.2],children:[c.jsx("cylinderGeometry",{args:[.01,.01,.15,6]}),c.jsx("meshStandardMaterial",{color:"#71717a",metalness:.8})]}),c.jsxs("mesh",{position:[.1,.03,.05],children:[c.jsx("boxGeometry",{args:[.08,.02,.02]}),c.jsx("meshStandardMaterial",{color:"#52525b",metalness:.7})]})]})]}),BE=({position:t})=>c.jsxs("group",{position:t,children:[c.jsxs("mesh",{position:[0,.35,0],castShadow:!0,children:[c.jsx("cylinderGeometry",{args:[.25,.2,.7,12]}),c.jsx("meshStandardMaterial",{color:"#374151",roughness:.7})]}),c.jsxs("mesh",{position:[0,.7,0],children:[c.jsx("torusGeometry",{args:[.25,.02,8,16]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.4})]}),c.jsxs("mesh",{position:[-.05,.75,.1],children:[c.jsx("icosahedronGeometry",{args:[.08,0]}),c.jsx("meshStandardMaterial",{color:"#f5f5f5",roughness:.9})]}),c.jsxs("mesh",{position:[.1,.72,-.05],children:[c.jsx("icosahedronGeometry",{args:[.06,0]}),c.jsx("meshStandardMaterial",{color:"#fef3c7",roughness:.9})]}),c.jsxs("mesh",{position:[.15,.68,.08],rotation:[.5,.3,0],children:[c.jsx("cylinderGeometry",{args:[.025,.03,.08,8]}),c.jsx("meshStandardMaterial",{color:"#dc2626",metalness:.6})]}),c.jsxs("mesh",{position:[-.12,.73,-.08],rotation:[.3,.5,.2],children:[c.jsx("planeGeometry",{args:[.1,.08]}),c.jsx("meshStandardMaterial",{color:"#60a5fa",transparent:!0,opacity:.7,side:ai})]}),c.jsxs("mesh",{position:[0,.78,0],rotation:[.4,Math.random()*Math.PI,0],children:[c.jsx("torusGeometry",{args:[.04,.015,6,8,Math.PI]}),c.jsx("meshStandardMaterial",{color:"#eab308",roughness:.7})]})]}),ay=({position:t,type:e="cup"})=>c.jsxs("group",{position:t,children:[e==="cup"&&c.jsxs(c.Fragment,{children:[c.jsxs("mesh",{position:[0,.06,0],children:[c.jsx("cylinderGeometry",{args:[.035,.03,.12,12]}),c.jsx("meshStandardMaterial",{color:"#f5f5f5",roughness:.8})]}),c.jsxs("mesh",{position:[.06,.001,0],rotation:[-Math.PI/2,0,0],children:[c.jsx("ringGeometry",{args:[.025,.04,12]}),c.jsx("meshStandardMaterial",{color:"#78350f",transparent:!0,opacity:.3})]})]}),e==="thermos"&&c.jsxs(c.Fragment,{children:[c.jsxs("mesh",{position:[0,.12,0],children:[c.jsx("cylinderGeometry",{args:[.04,.04,.24,12]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.5,roughness:.3})]}),c.jsxs("mesh",{position:[0,.25,0],children:[c.jsx("cylinderGeometry",{args:[.035,.04,.03,12]}),c.jsx("meshStandardMaterial",{color:"#ef4444",roughness:.4})]})]}),e==="mug"&&c.jsxs(c.Fragment,{children:[c.jsxs("mesh",{position:[0,.05,0],children:[c.jsx("cylinderGeometry",{args:[.04,.035,.1,12]}),c.jsx("meshStandardMaterial",{color:"#f5f5f5",roughness:.6})]}),c.jsxs("mesh",{position:[.05,.05,0],rotation:[0,0,Math.PI/2],children:[c.jsx("torusGeometry",{args:[.025,.008,6,12,Math.PI]}),c.jsx("meshStandardMaterial",{color:"#f5f5f5",roughness:.6})]}),c.jsxs("mesh",{position:[0,.08,0],children:[c.jsx("cylinderGeometry",{args:[.035,.035,.02,12]}),c.jsx("meshStandardMaterial",{color:"#3f2305",roughness:.3})]})]})]}),zE=({position:t,rotation:e=[0,0,0]})=>c.jsxs("group",{position:t,rotation:e,children:[c.jsxs("mesh",{castShadow:!0,children:[c.jsx("boxGeometry",{args:[.35,.25,.1]}),c.jsx("meshStandardMaterial",{color:"#f5f5f5",roughness:.5})]}),c.jsxs("mesh",{position:[0,0,.051],children:[c.jsx("boxGeometry",{args:[.15,.05,.001]}),c.jsx("meshStandardMaterial",{color:"#dc2626"})]}),c.jsxs("mesh",{position:[0,0,.051],children:[c.jsx("boxGeometry",{args:[.05,.15,.001]}),c.jsx("meshStandardMaterial",{color:"#dc2626"})]}),c.jsxs("mesh",{position:[.12,0,.06],children:[c.jsx("boxGeometry",{args:[.03,.08,.02]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.5})]})]}),kE=({start:t,end:e,color:n="#f97316"})=>{const i=z.useMemo(()=>{const a=[];for(let o=0;o<=20;o++){const l=o/20,u=t[0]+(e[0]-t[0])*l,h=t[2]+(e[2]-t[2])*l,p=Math.sin(l*Math.PI*3)*.3,g=-(e[2]-t[2]),x=e[0]-t[0],b=Math.sqrt(g*g+x*x);a.push(new se(u+g/b*p,.01,h+x/b*p))}return a},[t,e]),r=z.useMemo(()=>new ST(i),[i]);return c.jsxs("group",{children:[c.jsxs("mesh",{children:[c.jsx("tubeGeometry",{args:[r,30,.015,8,!1]}),c.jsx("meshStandardMaterial",{color:n,roughness:.6})]}),c.jsxs("mesh",{position:t,rotation:[Math.PI/2,0,0],children:[c.jsx("boxGeometry",{args:[.04,.02,.06]}),c.jsx("meshStandardMaterial",{color:"#1e293b"})]}),c.jsxs("mesh",{position:[e[0],.02,e[2]],children:[c.jsx("boxGeometry",{args:[.06,.03,.04]}),c.jsx("meshStandardMaterial",{color:n,roughness:.5})]})]})},A0e=({position:t})=>{const e=z.useMemo(()=>{const n=document.createElement("canvas");n.width=128,n.height=256;const i=n.getContext("2d");i.clearRect(0,0,128,256),i.strokeStyle="rgba(255, 255, 255, 0.6)",i.lineWidth=3,i.setLineDash([8,4]),i.beginPath(),i.arc(64,30,20,0,Math.PI*2),i.stroke(),i.beginPath(),i.moveTo(64,50),i.lineTo(64,140),i.stroke(),i.beginPath(),i.moveTo(64,70),i.lineTo(20,110),i.moveTo(64,70),i.lineTo(108,110),i.stroke(),i.beginPath(),i.moveTo(64,140),i.lineTo(30,230),i.moveTo(64,140),i.lineTo(98,230),i.stroke();const r=new Ba(n);return r.needsUpdate=!0,r},[]);return c.jsxs("mesh",{position:t,rotation:[-Math.PI/2,0,0],children:[c.jsx("planeGeometry",{args:[1.2,2.4]}),c.jsx("meshBasicMaterial",{map:e,transparent:!0,depthWrite:!1})]})},g6=({position:t,rotation:e=[0,0,0],days:n=47})=>c.jsxs("group",{position:t,rotation:e,children:[c.jsxs("mesh",{children:[c.jsx("boxGeometry",{args:[1,.7,.05]}),c.jsx("meshStandardMaterial",{color:"#1e3a5f",roughness:.6})]}),c.jsxs("mesh",{position:[0,.22,.03],children:[c.jsx("planeGeometry",{args:[.9,.15]}),c.jsx("meshStandardMaterial",{color:"#ef4444"})]}),c.jsxs("mesh",{position:[0,-.05,.03],children:[c.jsx("planeGeometry",{args:[.5,.35]}),c.jsx("meshStandardMaterial",{color:"#0f172a"})]}),c.jsxs("mesh",{position:[0,-.05,.04],children:[c.jsx("planeGeometry",{args:[.45,.3]}),c.jsx("meshStandardMaterial",{color:"#22c55e",emissive:"#22c55e",emissiveIntensity:.5})]}),c.jsxs("mesh",{position:[0,0,.03],children:[c.jsx("boxGeometry",{args:[1.02,.72,.02]}),c.jsx("meshStandardMaterial",{color:"#fbbf24",metalness:.4})]}),c.jsxs("mesh",{position:[-.35,.22,.04],children:[c.jsx("circleGeometry",{args:[.04,16]}),c.jsx("meshStandardMaterial",{color:"#fbbf24"})]})]}),v6=({position:t,rotation:e=[0,0,0]})=>c.jsxs("group",{position:t,rotation:e,children:[c.jsxs("mesh",{children:[c.jsx("boxGeometry",{args:[.4,.5,.03]}),c.jsx("meshStandardMaterial",{color:"#78350f",roughness:.6})]}),c.jsxs("mesh",{position:[0,.05,.02],children:[c.jsx("planeGeometry",{args:[.28,.28]}),c.jsx("meshStandardMaterial",{color:"#94a3b8",roughness:.7})]}),c.jsxs("mesh",{position:[0,.08,.025],children:[c.jsx("circleGeometry",{args:[.06,16]}),c.jsx("meshStandardMaterial",{color:"#64748b"})]}),c.jsxs("mesh",{position:[0,-.02,.025],children:[c.jsx("planeGeometry",{args:[.15,.1]}),c.jsx("meshStandardMaterial",{color:"#64748b"})]}),c.jsxs("mesh",{position:[0,-.17,.02],children:[c.jsx("planeGeometry",{args:[.3,.08]}),c.jsx("meshStandardMaterial",{color:"#fbbf24",metalness:.5})]}),c.jsxs("mesh",{position:[0,.2,.025],children:[c.jsx("circleGeometry",{args:[.02,5]}),c.jsx("meshStandardMaterial",{color:"#fbbf24",emissive:"#fbbf24",emissiveIntensity:.3})]})]}),x6=({position:t})=>{const e=z.useRef(null),n=z.useRef(null);return It(i=>{e.current&&(e.current.scale.z=1+Math.sin(i.clock.elapsedTime*30)*.02),n.current&&(n.current.intensity=.2+Math.random()*.1)}),c.jsxs("group",{position:t,children:[c.jsxs("mesh",{castShadow:!0,children:[c.jsx("boxGeometry",{args:[.3,.2,.15]}),c.jsx("meshStandardMaterial",{color:"#78350f",roughness:.7})]}),c.jsxs("mesh",{ref:e,position:[.05,0,.08],children:[c.jsx("circleGeometry",{args:[.06,16]}),c.jsx("meshStandardMaterial",{color:"#1e293b",roughness:.8})]}),c.jsxs("mesh",{position:[-.08,.02,.08],children:[c.jsx("planeGeometry",{args:[.08,.04]}),c.jsx("meshStandardMaterial",{color:"#fef3c7",emissive:"#fef3c7",emissiveIntensity:.3})]}),c.jsx("pointLight",{ref:n,position:[-.08,.02,.1],color:"#fef3c7",intensity:.2,distance:.5}),[-.1,-.05].map((i,r)=>c.jsxs("mesh",{position:[i,-.06,.08],children:[c.jsx("cylinderGeometry",{args:[.015,.015,.02,12],rotation:[Math.PI/2,0,0]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.5})]},r)),c.jsxs("mesh",{position:[.12,.2,0],children:[c.jsx("cylinderGeometry",{args:[.003,.002,.3,6]}),c.jsx("meshStandardMaterial",{color:"#71717a",metalness:.8})]}),c.jsxs("mesh",{position:[0,.12,0],children:[c.jsx("boxGeometry",{args:[.15,.02,.02]}),c.jsx("meshStandardMaterial",{color:"#a16207",roughness:.6})]})]})},y6=({position:t})=>c.jsxs("group",{position:t,children:[c.jsxs("mesh",{position:[0,1.2,0],children:[c.jsx("cylinderGeometry",{args:[.04,.04,2.4,12]}),c.jsx("meshStandardMaterial",{color:"#22c55e",roughness:.4})]}),c.jsxs("mesh",{position:[0,2.3,0],children:[c.jsx("cylinderGeometry",{args:[.15,.12,.08,16]}),c.jsx("meshStandardMaterial",{color:"#22c55e",roughness:.4})]}),c.jsxs("mesh",{position:[0,2.26,0],rotation:[Math.PI,0,0],children:[c.jsx("circleGeometry",{args:[.12,16]}),c.jsx("meshStandardMaterial",{color:"#1e293b"})]}),c.jsxs("group",{position:[.15,1.5,0],children:[c.jsxs("mesh",{children:[c.jsx("cylinderGeometry",{args:[.02,.02,.4,8],rotation:[0,0,Math.PI/2]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.6})]}),c.jsxs("mesh",{position:[.25,0,0],children:[c.jsx("coneGeometry",{args:[.06,.15,3],rotation:[0,0,-Math.PI/2]}),c.jsx("meshStandardMaterial",{color:"#22c55e"})]})]}),c.jsxs("mesh",{position:[0,.02,0],rotation:[-Math.PI/2,0,0],children:[c.jsx("ringGeometry",{args:[.3,.5,16]}),c.jsx("meshStandardMaterial",{color:"#fbbf24"})]}),c.jsxs("mesh",{position:[0,2.6,.05],children:[c.jsx("planeGeometry",{args:[.4,.2]}),c.jsx("meshStandardMaterial",{color:"#22c55e"})]})]}),b6=({position:t,rotation:e=[0,0,0]})=>c.jsxs("group",{position:t,rotation:e,children:[c.jsxs("mesh",{position:[0,0,-.05],children:[c.jsx("boxGeometry",{args:[.5,.4,.08]}),c.jsx("meshStandardMaterial",{color:"#22c55e",roughness:.4})]}),c.jsxs("mesh",{position:[0,-.1,.1],children:[c.jsx("sphereGeometry",{args:[.15,16,8,0,Math.PI*2,0,Math.PI/2]}),c.jsx("meshStandardMaterial",{color:"#e2e8f0",metalness:.4,roughness:.3,side:ai})]}),[-.06,.06].map((n,i)=>c.jsx("group",{position:[n,.02,.08],children:c.jsxs("mesh",{children:[c.jsx("cylinderGeometry",{args:[.015,.02,.06,8]}),c.jsx("meshStandardMaterial",{color:"#71717a",metalness:.7})]})},i)),c.jsxs("mesh",{position:[0,.12,.15],children:[c.jsx("boxGeometry",{args:[.25,.04,.04]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.5})]}),c.jsxs("mesh",{position:[0,.05,.12],rotation:[-.3,0,0],children:[c.jsx("boxGeometry",{args:[.2,.01,.1]}),c.jsx("meshStandardMaterial",{color:"#22c55e",transparent:!0,opacity:.8})]}),c.jsxs("mesh",{position:[0,.25,0],children:[c.jsx("planeGeometry",{args:[.35,.12]}),c.jsx("meshStandardMaterial",{color:"#22c55e"})]})]}),FE=({position:t,rotation:e=[0,0,0]})=>c.jsxs("group",{position:t,rotation:e,children:[c.jsxs("mesh",{children:[c.jsx("boxGeometry",{args:[.15,.25,.1]}),c.jsx("meshStandardMaterial",{color:"#3b82f6",roughness:.5})]}),c.jsxs("mesh",{position:[0,0,.051],children:[c.jsx("planeGeometry",{args:[.12,.18]}),c.jsx("meshStandardMaterial",{color:"#93c5fd",transparent:!0,opacity:.4})]}),Array.from({length:6}).map((n,i)=>c.jsxs("mesh",{position:[(i%2-.5)*.04,(Math.floor(i/2)-1)*.05,.03],children:[c.jsx("sphereGeometry",{args:[.015,6,6]}),c.jsx("meshStandardMaterial",{color:i%2===0?"#f97316":"#eab308"})]},i)),c.jsxs("mesh",{position:[0,-.1,.051],children:[c.jsx("boxGeometry",{args:[.08,.03,.01]}),c.jsx("meshStandardMaterial",{color:"#1e293b"})]}),c.jsxs("mesh",{position:[0,.1,.052],children:[c.jsx("planeGeometry",{args:[.1,.04]}),c.jsx("meshStandardMaterial",{color:"#f5f5f5"})]})]}),S6=({position:t,rotation:e=[0,0,0]})=>c.jsxs("group",{position:t,rotation:e,children:[c.jsxs("mesh",{children:[c.jsx("boxGeometry",{args:[.5,.3,.03]}),c.jsx("meshStandardMaterial",{color:"#374151",roughness:.7})]}),[-.15,0,.15].map((n,i)=>c.jsxs("group",{position:[n,-.05,.03],children:[c.jsxs("mesh",{rotation:[.3,0,0],children:[c.jsx("cylinderGeometry",{args:[.008,.008,.08,6],rotation:[Math.PI/2,0,0]}),c.jsx("meshStandardMaterial",{color:"#71717a",metalness:.7})]}),i!==1&&c.jsxs("group",{position:[0,-.06,.04],children:[c.jsxs("mesh",{children:[c.jsx("torusGeometry",{args:[.04,.005,6,12],rotation:[Math.PI/2,0,0]}),c.jsx("meshStandardMaterial",{color:i===0?"#1e293b":"#3b82f6"})]}),c.jsxs("mesh",{position:[0,0,.02],children:[c.jsx("boxGeometry",{args:[.08,.03,.015]}),c.jsx("meshStandardMaterial",{color:"#0f172a",transparent:!0,opacity:.8})]})]})]},i)),c.jsxs("mesh",{position:[0,.1,.02],children:[c.jsx("planeGeometry",{args:[.3,.06]}),c.jsx("meshStandardMaterial",{color:"#3b82f6"})]})]}),GE=({position:t,count:e=5})=>{const n=z.useRef(null),i=z.useMemo(()=>Array.from({length:e}).map(()=>({offset:[Math.random()*2-1,Math.random()*.5,Math.random()*2-1],speed:2+Math.random()*3,radius:.3+Math.random()*.4,phase:Math.random()*Math.PI*2})),[e]);return It(r=>{if(!n.current)return;const a=r.clock.elapsedTime;n.current.children.forEach((s,o)=>{const l=i[o];s.position.x=Math.sin(a*l.speed+l.phase)*l.radius+l.offset[0],s.position.y=Math.sin(a*l.speed*1.5+l.phase)*.2+l.offset[1]+.3,s.position.z=Math.cos(a*l.speed+l.phase)*l.radius+l.offset[2]})}),c.jsx("group",{position:t,ref:n,children:i.map((r,a)=>c.jsxs("mesh",{children:[c.jsx("sphereGeometry",{args:[.008,4,4]}),c.jsx("meshBasicMaterial",{color:"#1e293b"})]},a))})},VE=({position:t})=>{const e=z.useRef(null);return It(n=>{e.current&&Math.random()<.002&&(e.current.position.x+=(Math.random()-.5)*.02,e.current.position.y+=(Math.random()-.5)*.01)}),c.jsxs("group",{position:t,ref:e,children:[c.jsxs("mesh",{children:[c.jsx("sphereGeometry",{args:[.015,6,6]}),c.jsx("meshStandardMaterial",{color:"#1e293b",roughness:.8})]}),c.jsxs("mesh",{position:[-.02,0,0],children:[c.jsx("sphereGeometry",{args:[.02,6,6]}),c.jsx("meshStandardMaterial",{color:"#1e293b",roughness:.8})]}),[-1,1].map(n=>[.3,.5,.7,.9].map((i,r)=>c.jsxs("mesh",{position:[0,0,n*.01],rotation:[n*i,0,.8],children:[c.jsx("cylinderGeometry",{args:[.002,.001,.04,4]}),c.jsx("meshBasicMaterial",{color:"#1e293b"})]},`${n}-${r}`)))]})},Ph=({position:t})=>{const e=z.useRef(null);return It(n=>{e.current&&(Math.random()<.001&&(e.current.position.x+=(Math.random()-.5)*.01,e.current.position.z+=(Math.random()-.5)*.01),e.current.rotation.y=Math.sin(n.clock.elapsedTime*.1)*.1)}),c.jsxs("mesh",{ref:e,position:t,children:[c.jsx("icosahedronGeometry",{args:[.03+Math.random()*.02,0]}),c.jsx("meshStandardMaterial",{color:"#9ca3af",roughness:1,transparent:!0,opacity:.7})]})},E0e=({position:t,rotation:e=[0,0,0]})=>{const n=z.useRef(null);return It(i=>{if(n.current){const r=n.current.material;r.emissiveIntensity=.3+Math.sin(i.clock.elapsedTime*2)*.1}}),c.jsxs("group",{position:t,rotation:e,children:[c.jsxs("mesh",{castShadow:!0,children:[c.jsx("boxGeometry",{args:[.8,1.8,.7]}),c.jsx("meshStandardMaterial",{color:"#dc2626",roughness:.5,metalness:.2})]}),c.jsxs("mesh",{ref:n,position:[0,.3,.36],children:[c.jsx("planeGeometry",{args:[.65,.9]}),c.jsx("meshStandardMaterial",{color:"#1e293b",emissive:"#60a5fa",emissiveIntensity:.3})]}),[-.2,0,.2,.4].map((i,r)=>c.jsx("group",{position:[0,i,.2],children:[-.2,0,.2].map((a,s)=>c.jsxs("mesh",{position:[a,0,0],children:[c.jsx("cylinderGeometry",{args:[.03,.03,.1,8]}),c.jsx("meshStandardMaterial",{color:["#ef4444","#3b82f6","#22c55e","#eab308"][r]})]},s))},r)),c.jsxs("mesh",{position:[.25,0,.36],children:[c.jsx("boxGeometry",{args:[.08,.15,.02]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.6})]}),c.jsxs("mesh",{position:[0,-.7,.36],children:[c.jsx("boxGeometry",{args:[.4,.2,.05]}),c.jsx("meshStandardMaterial",{color:"#1e293b"})]}),c.jsxs("mesh",{position:[0,.8,.36],children:[c.jsx("planeGeometry",{args:[.5,.15]}),c.jsx("meshStandardMaterial",{color:"#f5f5f5"})]})]})},M6=({position:t,rotation:e=[0,0,0]})=>{const n=z.useRef(null);return It(i=>{if(n.current){const r=n.current.material;r.emissiveIntensity=Math.floor(i.clock.elapsedTime*2)%2===0?.5:.3}}),c.jsxs("group",{position:t,rotation:e,children:[c.jsxs("mesh",{children:[c.jsx("boxGeometry",{args:[.3,.4,.12]}),c.jsx("meshStandardMaterial",{color:"#374151",roughness:.6,metalness:.3})]}),c.jsxs("mesh",{ref:n,position:[0,.08,.061],children:[c.jsx("planeGeometry",{args:[.2,.08]}),c.jsx("meshStandardMaterial",{color:"#0f172a",emissive:"#22c55e",emissiveIntensity:.5})]}),c.jsxs("mesh",{position:[0,-.08,.061],children:[c.jsx("boxGeometry",{args:[.15,.01,.02]}),c.jsx("meshStandardMaterial",{color:"#1e293b"})]}),Array.from({length:9}).map((i,r)=>c.jsxs("mesh",{position:[(r%3-1)*.04,-.02-Math.floor(r/3)*.035,.062],children:[c.jsx("boxGeometry",{args:[.03,.025,.01]}),c.jsx("meshStandardMaterial",{color:"#52525b",roughness:.5})]},r)),c.jsxs("mesh",{position:[.22,0,0],children:[c.jsx("boxGeometry",{args:[.12,.35,.08]}),c.jsx("meshStandardMaterial",{color:"#78350f",roughness:.8})]}),[-.1,-.05,0,.05,.1].map((i,r)=>c.jsxs("mesh",{position:[.22,i,.045],visible:Math.random()>.3,children:[c.jsx("boxGeometry",{args:[.08,.04,.002]}),c.jsx("meshStandardMaterial",{color:"#fef3c7"})]},r))]})},_6=({position:t,rotation:e=[0,0,0]})=>{const n=z.useRef(null);return It(i=>{n.current&&(n.current.rotation.x=Math.sin(i.clock.elapsedTime*.5)*.02)}),c.jsxs("group",{position:t,rotation:e,children:[c.jsxs("mesh",{children:[c.jsx("boxGeometry",{args:[.25,.35,.01]}),c.jsx("meshStandardMaterial",{color:"#78350f",roughness:.8})]}),c.jsxs("mesh",{position:[0,.08,.006],children:[c.jsx("planeGeometry",{args:[.22,.18]}),c.jsx("meshStandardMaterial",{color:"#94a3b8",roughness:.7})]}),c.jsxs("mesh",{ref:n,position:[0,-.1,.008],children:[c.jsx("planeGeometry",{args:[.22,.12]}),c.jsx("meshStandardMaterial",{color:"#f5f5f5",roughness:.8})]}),c.jsxs("mesh",{position:[0,.02,.007],children:[c.jsx("planeGeometry",{args:[.15,.03]}),c.jsx("meshStandardMaterial",{color:"#dc2626"})]}),c.jsxs("mesh",{position:[0,.17,0],children:[c.jsx("cylinderGeometry",{args:[.01,.01,.015,8],rotation:[Math.PI/2,0,0]}),c.jsx("meshStandardMaterial",{color:"#1e293b"})]})]})},C0e=({position:t})=>{const e=z.useRef(null),n=z.useRef(null);return It(i=>{e.current&&(e.current.rotation.z=Math.sin(i.clock.elapsedTime*.5)*.1,e.current.position.y=Math.sin(i.clock.elapsedTime*.3)*.02),n.current&&n.current.children.forEach((r,a)=>{r.rotation.z=Math.sin(i.clock.elapsedTime*.8+a)*.15})}),c.jsxs("group",{position:t,children:[c.jsxs("group",{ref:e,children:[c.jsxs("mesh",{position:[-.1,.3,0],children:[c.jsx("sphereGeometry",{args:[.08,12,8]}),c.jsx("meshStandardMaterial",{color:"#ef4444",roughness:.6})]}),c.jsxs("mesh",{position:[-.1,.2,0],children:[c.jsx("cylinderGeometry",{args:[.002,.002,.15,4]}),c.jsx("meshStandardMaterial",{color:"#f5f5f5"})]}),c.jsxs("mesh",{position:[.05,.25,.05],scale:[1,.7,1],children:[c.jsx("sphereGeometry",{args:[.06,12,8]}),c.jsx("meshStandardMaterial",{color:"#3b82f6",roughness:.6})]}),c.jsxs("mesh",{position:[.05,.17,.05],children:[c.jsx("cylinderGeometry",{args:[.002,.002,.12,4]}),c.jsx("meshStandardMaterial",{color:"#f5f5f5"})]})]}),c.jsx("group",{ref:n,children:[{color:"#ef4444",x:-.15},{color:"#eab308",x:0},{color:"#22c55e",x:.15}].map((i,r)=>c.jsxs("mesh",{position:[i.x,0,0],rotation:[0,0,.2*(r-1)],children:[c.jsx("planeGeometry",{args:[.02,.4]}),c.jsx("meshStandardMaterial",{color:i.color,side:ai,transparent:!0,opacity:.8})]},r))}),c.jsxs("mesh",{position:[0,.5,0],rotation:[0,0,.1],children:[c.jsx("planeGeometry",{args:[.4,.08]}),c.jsx("meshStandardMaterial",{color:"#fde047",transparent:!0,opacity:.5})]})]})},vM=({position:t,rotation:e=[0,0,0]})=>c.jsxs("group",{position:t,rotation:e,children:[c.jsxs("mesh",{position:[0,0,-.1],children:[c.jsx("boxGeometry",{args:[.1,.15,.05]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.5})]}),c.jsxs("mesh",{rotation:[0,0,Math.PI/2],children:[c.jsx("coneGeometry",{args:[.15,.3,12,1,!0]}),c.jsx("meshStandardMaterial",{color:"#d4d4d8",metalness:.4,roughness:.4,side:ai})]}),c.jsxs("mesh",{position:[-.15,0,0],children:[c.jsx("cylinderGeometry",{args:[.05,.05,.1,12],rotation:[0,0,Math.PI/2]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.5})]})]}),HE=({position:t})=>{const e=z.useRef(null),n=z.useRef(null);return It(i=>{const r=i.clock.elapsedTime;Math.floor(r)%30===0&&r%1<.5&&(e.current&&(e.current.rotation.z=Math.sin(r*40)*.05),n.current&&(n.current.rotation.z=Math.sin(r*40)*.3))}),c.jsxs("group",{position:t,children:[c.jsxs("mesh",{position:[0,0,-.02],children:[c.jsx("boxGeometry",{args:[.2,.2,.02]}),c.jsx("meshStandardMaterial",{color:"#dc2626",roughness:.5})]}),c.jsxs("mesh",{ref:e,children:[c.jsx("sphereGeometry",{args:[.08,16,12,0,Math.PI*2,0,Math.PI/2]}),c.jsx("meshStandardMaterial",{color:"#fbbf24",metalness:.7,roughness:.3})]}),c.jsxs("mesh",{ref:n,position:[.1,0,.02],children:[c.jsx("sphereGeometry",{args:[.02,8,8]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.6})]}),c.jsxs("mesh",{position:[.06,0,0],children:[c.jsx("boxGeometry",{args:[.06,.01,.01]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.6})]})]})},sy=({position:t,rotation:e=[0,0,0]})=>{const n=z.useRef(null);return It(i=>{n.current&&(n.current.rotation.z=-.5+Math.sin(i.clock.elapsedTime*.5)*.1)}),c.jsxs("group",{position:t,rotation:e,children:[c.jsxs("mesh",{children:[c.jsx("cylinderGeometry",{args:[.08,.08,.04,24],rotation:[Math.PI/2,0,0]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.5,roughness:.4})]}),c.jsxs("mesh",{position:[0,0,.021],children:[c.jsx("circleGeometry",{args:[.065,24]}),c.jsx("meshStandardMaterial",{color:"#f5f5f5"})]}),c.jsxs("mesh",{position:[0,.01,.022],children:[c.jsx("ringGeometry",{args:[.04,.055,24,1,-Math.PI*.7,Math.PI*1.4]}),c.jsx("meshBasicMaterial",{color:"#22c55e"})]}),c.jsxs("mesh",{position:[0,.01,.022],children:[c.jsx("ringGeometry",{args:[.04,.055,12,1,Math.PI*.5,Math.PI*.2]}),c.jsx("meshBasicMaterial",{color:"#ef4444"})]}),c.jsxs("mesh",{ref:n,position:[0,0,.025],rotation:[0,0,-.5],children:[c.jsx("boxGeometry",{args:[.05,.005,.002]}),c.jsx("meshStandardMaterial",{color:"#1e293b"})]}),c.jsxs("mesh",{position:[0,0,.025],children:[c.jsx("cylinderGeometry",{args:[.008,.008,.01,8],rotation:[Math.PI/2,0,0]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.7})]}),c.jsxs("mesh",{position:[0,-.06,0],children:[c.jsx("cylinderGeometry",{args:[.015,.015,.04,8]}),c.jsx("meshStandardMaterial",{color:"#71717a",metalness:.6})]})]})},f0=({position:t,rotation:e=[0,0,0],size:n=.15})=>c.jsxs("group",{position:t,rotation:e,children:[c.jsxs("mesh",{children:[c.jsx("torusGeometry",{args:[n,n*.1,8,24]}),c.jsx("meshStandardMaterial",{color:"#ef4444",roughness:.5})]}),[0,Math.PI/3,Math.PI*2/3,Math.PI,Math.PI*4/3,Math.PI*5/3].map((i,r)=>c.jsxs("mesh",{rotation:[0,0,i],children:[c.jsx("boxGeometry",{args:[n*2*.8,n*.15,n*.08]}),c.jsx("meshStandardMaterial",{color:"#ef4444",roughness:.5})]},r)),c.jsxs("mesh",{children:[c.jsx("cylinderGeometry",{args:[n*.25,n*.25,n*.2,12],rotation:[Math.PI/2,0,0]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.6})]}),c.jsxs("mesh",{position:[0,0,-n*.3],children:[c.jsx("cylinderGeometry",{args:[n*.1,n*.1,n*.4,8],rotation:[Math.PI/2,0,0]}),c.jsx("meshStandardMaterial",{color:"#71717a",metalness:.6})]})]}),oy=({position:t,baseColor:e="#22c55e",size:n=.1})=>{const i=z.useRef(null),r=z.useRef(null);return It(a=>{if(!i.current||!r.current)return;const s=.5+Math.sin(a.clock.elapsedTime*3)*.3+Math.sin(a.clock.elapsedTime*7)*.2,o=i.current.material;o.emissiveIntensity=s,r.current.intensity=s*.5,i.current.scale.setScalar(1+s*.1)}),c.jsxs("group",{position:t,children:[c.jsxs("mesh",{ref:i,children:[c.jsx("sphereGeometry",{args:[n,16,16]}),c.jsx("meshStandardMaterial",{color:e,emissive:e,emissiveIntensity:.5,transparent:!0,opacity:.9})]}),c.jsx("pointLight",{ref:r,color:e,intensity:.5,distance:3})]})},qE=({position:t,count:e=5})=>{const n=z.useMemo(()=>Array.from({length:e}).map(()=>({offset:[(Math.random()-.5)*.4,0,(Math.random()-.5)*.4],rotation:Math.random()*Math.PI*2,isLit:Math.random()<.1})),[e]);return c.jsxs("group",{position:t,children:[n.map((i,r)=>c.jsxs("group",{position:i.offset,rotation:[Math.PI/2,i.rotation,Math.random()*.3],children:[c.jsxs("mesh",{position:[0,0,0],children:[c.jsx("cylinderGeometry",{args:[.004,.004,.012,6]}),c.jsx("meshStandardMaterial",{color:"#f5d0a9",roughness:.9})]}),c.jsxs("mesh",{position:[0,.012,0],children:[c.jsx("cylinderGeometry",{args:[.003,.004,.015,6]}),c.jsx("meshStandardMaterial",{color:i.isLit?"#4a4a4a":"#e8e0d5",roughness:.95})]}),c.jsxs("mesh",{position:[0,.022,0],children:[c.jsx("cylinderGeometry",{args:[.002,.003,.005,6]}),c.jsx("meshStandardMaterial",{color:"#2d2d2d",roughness:1})]}),i.isLit&&c.jsx("pointLight",{position:[0,.022,0],color:"#ff4500",intensity:.1,distance:.2})]},r)),Array.from({length:8}).map((i,r)=>c.jsxs("mesh",{position:[(Math.random()-.5)*.5,.001,(Math.random()-.5)*.5],rotation:[-Math.PI/2,0,0],children:[c.jsx("circleGeometry",{args:[.01+Math.random()*.015,6]}),c.jsx("meshBasicMaterial",{color:"#4a4a4a",transparent:!0,opacity:.4})]},`ash-${r}`))]})},xM=({position:t,color:e="#f472b6"})=>c.jsxs("mesh",{position:t,children:[c.jsx("sphereGeometry",{args:[.015+Math.random()*.01,8,6],scale:[1,.4,1]}),c.jsx("meshStandardMaterial",{color:e,roughness:.3,metalness:.1})]}),ly=({position:t,rotation:e=[0,0,0],color:n="#fef08a",curled:i=!1})=>{const r=z.useRef(null);return It(a=>{r.current&&i&&(r.current.rotation.x=e[0]+Math.sin(a.clock.elapsedTime*2)*.02)}),c.jsxs("group",{position:t,rotation:e,children:[c.jsxs("mesh",{ref:r,children:[c.jsx("planeGeometry",{args:[.07,.07]}),c.jsx("meshStandardMaterial",{color:n,side:ai,roughness:.8})]}),i&&c.jsxs("mesh",{position:[.03,.03,.003],rotation:[.3,0,.3],children:[c.jsx("planeGeometry",{args:[.02,.02]}),c.jsx("meshStandardMaterial",{color:n,side:ai,roughness:.8})]})]})},WE=({position:t,count:e=3})=>{const n=z.useMemo(()=>Array.from({length:e}).map(()=>({offset:[(Math.random()-.5)*.3,.008,(Math.random()-.5)*.3],rotation:Math.random()*Math.PI,isPen:Math.random()>.4,color:["#1e3a8a","#dc2626","#000000","#16a34a"][Math.floor(Math.random()*4)]})),[e]);return c.jsx("group",{position:t,children:n.map((i,r)=>c.jsx("group",{position:i.offset,rotation:[Math.PI/2,0,i.rotation],children:i.isPen?c.jsxs(c.Fragment,{children:[c.jsxs("mesh",{children:[c.jsx("cylinderGeometry",{args:[.004,.004,.12,8]}),c.jsx("meshStandardMaterial",{color:i.color,roughness:.3})]}),c.jsxs("mesh",{position:[0,.065,0],children:[c.jsx("coneGeometry",{args:[.004,.015,8]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.6})]}),c.jsxs("mesh",{position:[0,-.055,0],children:[c.jsx("cylinderGeometry",{args:[.005,.004,.02,8]}),c.jsx("meshStandardMaterial",{color:i.color,roughness:.3})]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("mesh",{children:[c.jsx("cylinderGeometry",{args:[.003,.003,.15,6]}),c.jsx("meshStandardMaterial",{color:"#eab308",roughness:.7})]}),c.jsxs("mesh",{position:[0,.08,0],children:[c.jsx("coneGeometry",{args:[.003,.02,6]}),c.jsx("meshStandardMaterial",{color:"#f5deb3",roughness:.8})]}),c.jsxs("mesh",{position:[0,.088,0],children:[c.jsx("coneGeometry",{args:[.001,.008,6]}),c.jsx("meshStandardMaterial",{color:"#1e293b",roughness:.5})]}),c.jsxs("mesh",{position:[0,-.07,0],children:[c.jsx("cylinderGeometry",{args:[.004,.003,.015,6]}),c.jsx("meshStandardMaterial",{color:"#fca5a5",roughness:.5})]})]})},r))})},XE=({position:t,color:e="#1e3a8a"})=>{const n=z.useRef(null);return It(i=>{n.current&&(n.current.rotation.z=Math.sin(i.clock.elapsedTime*.5)*.02)}),c.jsxs("group",{position:t,children:[c.jsxs("mesh",{position:[0,0,-.03],children:[c.jsx("boxGeometry",{args:[.04,.04,.03]}),c.jsx("meshStandardMaterial",{color:"#52525b",metalness:.6})]}),c.jsxs("mesh",{position:[0,-.03,.02],rotation:[.5,0,0],children:[c.jsx("torusGeometry",{args:[.025,.006,6,12,Math.PI]}),c.jsx("meshStandardMaterial",{color:"#52525b",metalness:.7})]}),c.jsxs("group",{ref:n,position:[0,-.15,.02],children:[c.jsxs("mesh",{children:[c.jsx("boxGeometry",{args:[.25,.35,.08]}),c.jsx("meshStandardMaterial",{color:e,roughness:.8})]}),c.jsxs("mesh",{position:[0,.18,.02],children:[c.jsx("boxGeometry",{args:[.15,.05,.04]}),c.jsx("meshStandardMaterial",{color:e,roughness:.8})]}),c.jsxs("mesh",{position:[-.15,.05,0],rotation:[0,0,.3],children:[c.jsx("cylinderGeometry",{args:[.04,.035,.25,8]}),c.jsx("meshStandardMaterial",{color:e,roughness:.8})]}),c.jsxs("mesh",{position:[.15,.05,0],rotation:[0,0,-.3],children:[c.jsx("cylinderGeometry",{args:[.04,.035,.25,8]}),c.jsx("meshStandardMaterial",{color:e,roughness:.8})]})]})]})},$E=({position:t,color:e="#1e293b"})=>c.jsxs("group",{position:t,rotation:[.15,0,.1],children:[c.jsxs("mesh",{position:[0,.4,0],children:[c.jsx("cylinderGeometry",{args:[.008,.008,.8,8]}),c.jsx("meshStandardMaterial",{color:"#71717a",metalness:.6})]}),c.jsxs("mesh",{position:[.03,.02,0],rotation:[0,0,Math.PI/2],children:[c.jsx("torusGeometry",{args:[.04,.012,8,12,Math.PI]}),c.jsx("meshStandardMaterial",{color:e,roughness:.5})]}),c.jsxs("mesh",{position:[0,.82,0],children:[c.jsx("coneGeometry",{args:[.008,.03,8]}),c.jsx("meshStandardMaterial",{color:"#71717a",metalness:.7})]}),c.jsxs("mesh",{position:[0,.6,0],children:[c.jsx("cylinderGeometry",{args:[.025,.015,.35,8]}),c.jsx("meshStandardMaterial",{color:e,roughness:.7})]}),c.jsxs("mesh",{position:[0,.55,.02],children:[c.jsx("boxGeometry",{args:[.015,.03,.005]}),c.jsx("meshStandardMaterial",{color:"#374151"})]})]}),YE=({position:t,type:e="paper"})=>c.jsxs("group",{position:t,children:[e==="paper"&&c.jsxs(c.Fragment,{children:[c.jsxs("mesh",{position:[0,.1,0],children:[c.jsx("boxGeometry",{args:[.12,.2,.08]}),c.jsx("meshStandardMaterial",{color:"#d4a574",roughness:.95})]}),c.jsxs("mesh",{position:[0,.18,0],rotation:[.2,0,0],children:[c.jsx("boxGeometry",{args:[.12,.04,.02]}),c.jsx("meshStandardMaterial",{color:"#c49a6c",roughness:.95})]})]}),e==="cooler"&&c.jsxs(c.Fragment,{children:[c.jsxs("mesh",{position:[0,.1,0],children:[c.jsx("boxGeometry",{args:[.18,.15,.12]}),c.jsx("meshStandardMaterial",{color:"#60a5fa",roughness:.6})]}),c.jsxs("mesh",{position:[0,.18,0],children:[c.jsx("boxGeometry",{args:[.19,.02,.13]}),c.jsx("meshStandardMaterial",{color:"#3b82f6",roughness:.5})]}),c.jsxs("mesh",{position:[0,.22,0],children:[c.jsx("boxGeometry",{args:[.08,.015,.02]}),c.jsx("meshStandardMaterial",{color:"#1e293b"})]})]}),e==="box"&&c.jsxs(c.Fragment,{children:[c.jsxs("mesh",{position:[0,.06,0],children:[c.jsx("boxGeometry",{args:[.15,.1,.1]}),c.jsx("meshStandardMaterial",{color:"#ef4444",roughness:.5})]}),c.jsxs("mesh",{position:[0,.11,.05],children:[c.jsx("boxGeometry",{args:[.04,.02,.01]}),c.jsx("meshStandardMaterial",{color:"#1e293b"})]})]})]}),cy=({position:t,type:e="plastic"})=>c.jsxs("group",{position:t,children:[e==="plastic"&&c.jsxs(c.Fragment,{children:[c.jsxs("mesh",{position:[0,.1,0],children:[c.jsx("cylinderGeometry",{args:[.03,.035,.2,12]}),c.jsx("meshStandardMaterial",{color:"#93c5fd",transparent:!0,opacity:.7,roughness:.2})]}),c.jsxs("mesh",{position:[0,.06,0],children:[c.jsx("cylinderGeometry",{args:[.028,.033,.12,12]}),c.jsx("meshStandardMaterial",{color:"#60a5fa",transparent:!0,opacity:.5})]}),c.jsxs("mesh",{position:[0,.21,0],children:[c.jsx("cylinderGeometry",{args:[.02,.025,.025,12]}),c.jsx("meshStandardMaterial",{color:"#3b82f6",roughness:.4})]})]}),e==="metal"&&c.jsxs(c.Fragment,{children:[c.jsxs("mesh",{position:[0,.12,0],children:[c.jsx("cylinderGeometry",{args:[.035,.035,.24,16]}),c.jsx("meshStandardMaterial",{color:"#71717a",metalness:.8,roughness:.2})]}),c.jsxs("mesh",{position:[0,.25,0],children:[c.jsx("cylinderGeometry",{args:[.025,.03,.03,16]}),c.jsx("meshStandardMaterial",{color:"#52525b",metalness:.7})]})]}),e==="sports"&&c.jsxs(c.Fragment,{children:[c.jsxs("mesh",{position:[0,.1,0],children:[c.jsx("cylinderGeometry",{args:[.04,.035,.2,12]}),c.jsx("meshStandardMaterial",{color:"#22c55e",roughness:.5})]}),c.jsxs("mesh",{position:[0,.21,0],children:[c.jsx("cylinderGeometry",{args:[.015,.025,.03,12]}),c.jsx("meshStandardMaterial",{color:"#1e293b"})]}),c.jsxs("mesh",{position:[0,.24,.01],rotation:[.5,0,0],children:[c.jsx("cylinderGeometry",{args:[.008,.008,.02,8]}),c.jsx("meshStandardMaterial",{color:"#f5f5f5"})]})]})]}),T6=({position:t,rotation:e=[0,0,0]})=>c.jsxs("group",{position:t,rotation:e,children:[c.jsxs("mesh",{children:[c.jsx("boxGeometry",{args:[.25,.02,.18]}),c.jsx("meshStandardMaterial",{color:"#f5f5f4",roughness:.9})]}),c.jsxs("mesh",{position:[0,.011,0],rotation:[-Math.PI/2,0,0],children:[c.jsx("planeGeometry",{args:[.25,.005]}),c.jsx("meshBasicMaterial",{color:"#d4d4d4"})]}),[-.06,-.02,.02,.06].map((n,i)=>c.jsxs("mesh",{position:[-.05,.011,n],rotation:[-Math.PI/2,0,0],children:[c.jsx("planeGeometry",{args:[.12,.008]}),c.jsx("meshBasicMaterial",{color:"#a3a3a3",transparent:!0,opacity:.4})]},i))]}),ZE=({position:t,rotation:e=[0,0,0],hasTape:n=!0})=>{const i=z.useRef(null);return It(r=>{i.current&&(i.current.rotation.z=Math.sin(r.clock.elapsedTime*3)*.05)}),c.jsxs("group",{position:t,rotation:e,children:[c.jsxs("mesh",{position:[0,.7,0],children:[c.jsx("boxGeometry",{args:[.9,.06,.06]}),c.jsx("meshStandardMaterial",{color:"#f97316",roughness:.6})]}),[-.3,-.1,.1,.3].map((r,a)=>c.jsxs("mesh",{position:[r,.7,.031],rotation:[0,0,Math.PI/4],children:[c.jsx("planeGeometry",{args:[.08,.06]}),c.jsx("meshStandardMaterial",{color:"#1e293b"})]},a)),[[-.35,.35,-.25],[-.35,.35,.25],[.35,.35,-.25],[.35,.35,.25]].map((r,a)=>c.jsxs("mesh",{position:r,rotation:[a<2?.2:-.2,0,a%2===0?.15:-.15],children:[c.jsx("boxGeometry",{args:[.04,.75,.04]}),c.jsx("meshStandardMaterial",{color:"#a16207",roughness:.8})]},a)),c.jsxs("mesh",{position:[0,.35,0],children:[c.jsx("boxGeometry",{args:[.6,.04,.04]}),c.jsx("meshStandardMaterial",{color:"#a16207",roughness:.8})]}),n&&c.jsxs("mesh",{ref:i,position:[0,.75,.1],rotation:[.1,0,0],children:[c.jsx("planeGeometry",{args:[.8,.05]}),c.jsx("meshStandardMaterial",{color:"#eab308",side:ai})]})]})},w6=({position:t,rotation:e=[0,0,0]})=>c.jsxs("group",{position:t,rotation:e,children:[c.jsxs("mesh",{position:[0,.35,0],children:[c.jsx("boxGeometry",{args:[.6,.03,.4]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.5})]}),c.jsxs("mesh",{position:[0,.15,0],children:[c.jsx("boxGeometry",{args:[.55,.02,.35]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.5})]}),c.jsxs("mesh",{position:[0,.55,.18],children:[c.jsx("boxGeometry",{args:[.5,.02,.02]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.6})]}),c.jsxs("mesh",{position:[-.25,.45,.18],children:[c.jsx("boxGeometry",{args:[.02,.2,.02]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.6})]}),c.jsxs("mesh",{position:[.25,.45,.18],children:[c.jsx("boxGeometry",{args:[.02,.2,.02]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.6})]}),[[-.22,.05,.12],[.22,.05,.12],[-.22,.05,-.12],[.22,.05,-.12]].map((n,i)=>c.jsxs("mesh",{position:n,rotation:[Math.PI/2,0,0],children:[c.jsx("cylinderGeometry",{args:[.05,.05,.03,12]}),c.jsx("meshStandardMaterial",{color:"#1e293b",roughness:.8})]},i)),c.jsxs("mesh",{position:[-.15,.4,.05],children:[c.jsx("cylinderGeometry",{args:[.015,.015,.12,8],rotation:[Math.PI/2,0,.3]}),c.jsx("meshStandardMaterial",{color:"#71717a",metalness:.8})]}),c.jsxs("mesh",{position:[.1,.38,-.08],children:[c.jsx("boxGeometry",{args:[.08,.04,.06]}),c.jsx("meshStandardMaterial",{color:"#3b82f6"})]}),c.jsxs("mesh",{position:[.18,.4,.08],children:[c.jsx("boxGeometry",{args:[.06,.06,.04]}),c.jsx("meshStandardMaterial",{color:"#ef4444"})]}),c.jsxs("mesh",{position:[-.05,.37,.1],children:[c.jsx("boxGeometry",{args:[.1,.01,.08]}),c.jsx("meshStandardMaterial",{color:"#78716c",roughness:.95})]})]}),A6=({position:t,rotation:e=[0,0,0]})=>{const n=z.useRef(null);return It(i=>{n.current&&(n.current.rotation.z=Math.sin(i.clock.elapsedTime*.8)*.03)}),c.jsx("group",{position:t,rotation:e,children:c.jsxs("group",{ref:n,children:[c.jsxs("mesh",{children:[c.jsx("boxGeometry",{args:[.25,.18,.01]}),c.jsx("meshStandardMaterial",{color:"#ef4444",roughness:.6})]}),c.jsxs("mesh",{position:[0,0,.006],children:[c.jsx("planeGeometry",{args:[.22,.1]}),c.jsx("meshStandardMaterial",{color:"#fef2f2"})]}),c.jsxs("mesh",{position:[0,.12,0],children:[c.jsx("cylinderGeometry",{args:[.003,.003,.15,6]}),c.jsx("meshStandardMaterial",{color:"#a3a3a3"})]})]})})},E6=({position:t,rotation:e=[0,0,0]})=>c.jsxs("group",{position:t,rotation:e,children:[c.jsxs("mesh",{children:[c.jsx("boxGeometry",{args:[.5,.7,.02]}),c.jsx("meshStandardMaterial",{color:"#374151",metalness:.4})]}),c.jsxs("group",{position:[-.25,0,.01],rotation:[0,-1.2,0],children:[c.jsxs("mesh",{position:[.2,0,0],children:[c.jsx("boxGeometry",{args:[.4,.6,.015]}),c.jsx("meshStandardMaterial",{color:"#52525b",metalness:.5,roughness:.4})]}),c.jsxs("mesh",{position:[.35,0,.02],children:[c.jsx("boxGeometry",{args:[.03,.08,.015]}),c.jsx("meshStandardMaterial",{color:"#1e293b",metalness:.6})]})]}),c.jsxs("mesh",{position:[.05,.15,.03],children:[c.jsx("boxGeometry",{args:[.3,.15,.04]}),c.jsx("meshStandardMaterial",{color:"#22c55e",emissive:"#22c55e",emissiveIntensity:.2})]}),c.jsxs("mesh",{position:[-.1,-.1,.03],children:[c.jsx("boxGeometry",{args:[.15,.2,.03]}),c.jsx("meshStandardMaterial",{color:"#1e293b"})]}),[["#ef4444",-.05],["#3b82f6",.05],["#eab308",.15]].map(([n,i],r)=>c.jsxs("mesh",{position:[.1,i,.05],children:[c.jsx("cylinderGeometry",{args:[.004,.004,.2,6],rotation:[0,0,Math.PI/2]}),c.jsx("meshStandardMaterial",{color:n})]},r))]}),KE=({position:t,size:e=.8})=>{const n=z.useRef(null),i=z.useRef(null),[r,a]=z.useState(3);return It((s,o)=>{if(a(l=>{let u=l-o*4;return u<0?3+Math.random()*2:u}),n.current&&(n.current.position.y=r,n.current.visible=r>.1),i.current&&r<.5&&r>.1){const l=1+(.5-r)*3;i.current.scale.set(l,l,1);const u=i.current.material;u.opacity=.5*(r/.5)}}),c.jsxs("group",{position:t,children:[c.jsxs("mesh",{rotation:[-Math.PI/2,0,0],position:[0,.01,0],children:[c.jsx("circleGeometry",{args:[e*.5,24]}),c.jsx("meshStandardMaterial",{color:"#60a5fa",transparent:!0,opacity:.4,metalness:.9,roughness:.1})]}),c.jsxs("mesh",{ref:i,rotation:[-Math.PI/2,0,0],position:[0,.015,0],children:[c.jsx("ringGeometry",{args:[.02,.05,16]}),c.jsx("meshBasicMaterial",{color:"#93c5fd",transparent:!0,opacity:.3})]}),c.jsxs("mesh",{ref:n,position:[0,3,0],children:[c.jsx("sphereGeometry",{args:[.02,8,8]}),c.jsx("meshStandardMaterial",{color:"#60a5fa",transparent:!0,opacity:.7})]})]})},QE=({position:t,rotation:e=[0,0,0]})=>{const n=z.useMemo(()=>{const i=document.createElement("canvas");i.width=128,i.height=128;const r=i.getContext("2d");r.clearRect(0,0,128,128);const a=r.createRadialGradient(64,64,0,64,64,64);a.addColorStop(0,"rgba(200, 220, 240, 0.4)"),a.addColorStop(.5,"rgba(200, 220, 240, 0.2)"),a.addColorStop(1,"rgba(200, 220, 240, 0)"),r.fillStyle=a,r.fillRect(0,0,128,128);for(let o=0;o<50;o++){const l=Math.random()*128,u=Math.random()*128,h=1+Math.random()*3;r.fillStyle=`rgba(150, 200, 255, ${.3+Math.random()*.3})`,r.beginPath(),r.arc(l,u,h,0,Math.PI*2),r.fill()}for(let o=0;o<5;o++){const l=20+Math.random()*88;r.strokeStyle="rgba(150, 200, 255, 0.3)",r.lineWidth=1+Math.random()*2,r.beginPath(),r.moveTo(l,30+Math.random()*30),r.lineTo(l+(Math.random()-.5)*10,90+Math.random()*30),r.stroke()}const s=new Ba(i);return s.needsUpdate=!0,s},[]);return c.jsxs("mesh",{position:t,rotation:e,children:[c.jsx("planeGeometry",{args:[2,1.5]}),c.jsx("meshBasicMaterial",{map:n,transparent:!0,depthWrite:!1})]})},yM=({position:t,size:e=1.5})=>{const n=z.useMemo(()=>{const i=document.createElement("canvas");i.width=128,i.height=128;const r=i.getContext("2d");r.clearRect(0,0,128,128);const a=r.createRadialGradient(64,64,0,64,64,55);a.addColorStop(0,"rgba(139, 119, 101, 0.5)"),a.addColorStop(.4,"rgba(139, 119, 101, 0.3)"),a.addColorStop(.7,"rgba(180, 160, 140, 0.2)"),a.addColorStop(1,"rgba(180, 160, 140, 0)"),r.fillStyle=a,r.beginPath();for(let o=0;o<20;o++){const l=o/20*Math.PI*2,u=40+Math.random()*20,h=64+Math.cos(l)*u,p=64+Math.sin(l)*u;o===0?r.moveTo(h,p):r.lineTo(h,p)}r.closePath(),r.fill();for(let o=0;o<3;o++)r.strokeStyle=`rgba(100, 80, 60, ${.1+o*.05})`,r.lineWidth=1,r.beginPath(),r.arc(64,64,25+o*12,0,Math.PI*2),r.stroke();const s=new Ba(i);return s.needsUpdate=!0,s},[]);return c.jsxs("mesh",{position:t,rotation:[Math.PI/2,0,0],children:[c.jsx("planeGeometry",{args:[e,e]}),c.jsx("meshBasicMaterial",{map:n,transparent:!0,depthWrite:!1})]})},bM=({position:t,count:e=6})=>{const n=z.useRef(null),i=z.useMemo(()=>Array.from({length:e}).map(()=>({radius:.3+Math.random()*.5,speed:2+Math.random()*2,phase:Math.random()*Math.PI*2,yOffset:(Math.random()-.5)*.4,erratic:Math.random()*.5})),[e]);return It(r=>{if(!n.current)return;const a=r.clock.elapsedTime;n.current.children.forEach((s,o)=>{const l=i[o],u=a*l.speed+l.phase;s.position.x=Math.cos(u)*l.radius+Math.sin(a*7+o)*l.erratic,s.position.y=l.yOffset+Math.sin(a*3+o)*.1,s.position.z=Math.sin(u)*l.radius+Math.cos(a*5+o)*l.erratic,s.rotation.y=-u+Math.PI/2;const h=Math.sin(a*30+o*5)*.8;s.children[0].rotation.z=h,s.children[1].rotation.z=-h})}),c.jsx("group",{position:t,ref:n,children:i.map((r,a)=>c.jsxs("group",{children:[c.jsxs("mesh",{scale:[.008,.015,.008],children:[c.jsx("sphereGeometry",{args:[1,6,4]}),c.jsx("meshStandardMaterial",{color:"#a3a3a3",roughness:.9})]}),c.jsxs("mesh",{position:[-.01,0,0],rotation:[0,0,.3],children:[c.jsx("planeGeometry",{args:[.02,.015]}),c.jsx("meshStandardMaterial",{color:"#d4d4d4",side:ai,transparent:!0,opacity:.8})]}),c.jsxs("mesh",{position:[.01,0,0],rotation:[0,0,-.3],children:[c.jsx("planeGeometry",{args:[.02,.015]}),c.jsx("meshStandardMaterial",{color:"#d4d4d4",side:ai,transparent:!0,opacity:.8})]})]},a))})},JE=({position:t,pathLength:e=2})=>{const n=z.useRef(null),i=z.useRef({isMoving:!1,nextMove:10+Math.random()*30,moveEnd:0,direction:1,currentX:0,rotation:0});return It((r,a)=>{if(!n.current)return;const s=r.clock.elapsedTime;s>i.current.nextMove&&!i.current.isMoving&&(i.current.isMoving=!0,i.current.moveEnd=s+.3+Math.random()*.5,i.current.direction=Math.random()>.5?1:-1,i.current.rotation=(Math.random()-.5)*Math.PI,i.current.nextMove=s+15+Math.random()*45),i.current.isMoving&&(s<i.current.moveEnd?(i.current.currentX+=i.current.direction*a*5,i.current.currentX=Math.max(-e/2,Math.min(e/2,i.current.currentX)),n.current.position.x=i.current.currentX,n.current.rotation.y=i.current.rotation,n.current.position.y=Math.abs(Math.sin(s*60))*.003):i.current.isMoving=!1)}),c.jsx("group",{position:t,children:c.jsxs("group",{ref:n,scale:.4,children:[c.jsxs("mesh",{children:[c.jsx("capsuleGeometry",{args:[.02,.04,4,8],rotation:[Math.PI/2,0,0]}),c.jsx("meshStandardMaterial",{color:"#3d2817",roughness:.7})]}),c.jsxs("mesh",{position:[.035,.005,0],children:[c.jsx("sphereGeometry",{args:[.012,6,4]}),c.jsx("meshStandardMaterial",{color:"#2d1f12",roughness:.7})]}),[-.008,.008].map((r,a)=>c.jsxs("mesh",{position:[.04,.01,r],rotation:[0,0,-.5+a*.3],children:[c.jsx("cylinderGeometry",{args:[.001,5e-4,.03,4],rotation:[0,0,Math.PI/2]}),c.jsx("meshStandardMaterial",{color:"#1a1a1a"})]},a)),[-1,1].map(r=>[-.015,0,.015].map((a,s)=>c.jsxs("mesh",{position:[a,-.01,r*.015],rotation:[r*.5,0,0],children:[c.jsx("cylinderGeometry",{args:[.002,.001,.02,4]}),c.jsx("meshStandardMaterial",{color:"#2d1f12"})]},`${r}-${s}`)))]})})},R0e=()=>{const[t,e]=z.useState({"door-1":!1,"door-2":!1,"door-3":!1});return z.useEffect(()=>{const n=setInterval(()=>{const i=`door-${Math.floor(Math.random()*3)+1}`;e(r=>({...r,[i]:!r[i]})),wt.initialized&&(t[i]?wt.playDoorClose():wt.playDoorOpen())},15e3+Math.random()*3e4);return()=>clearInterval(n)},[t]),c.jsxs("group",{children:[c.jsx(zm,{position:[-50,28,-35],rotation:[.2,.5,0],scale:1.2}),c.jsx(zm,{position:[50,28,-35],rotation:[.2,-.5,0],scale:1}),c.jsx(zm,{position:[-50,28,35],rotation:[.2,-.3,0],scale:.8}),c.jsx(zm,{position:[50,28,35],rotation:[.2,.3,0],scale:1.1}),c.jsx(zm,{position:[-30,26,-38],rotation:[.1,.2,.1],scale:.7}),c.jsx(zm,{position:[20,27,-38],rotation:[.15,-.1,0],scale:.9}),c.jsx(ty,{position:[-52,8,-20],rotation:[0,Math.PI/2,0],size:1.5}),c.jsx(ty,{position:[52,6,10],rotation:[0,-Math.PI/2,0],size:1.2}),c.jsx(ty,{position:[-40,4,-38],rotation:[0,0,0],size:.8}),c.jsx(ty,{position:[30,5,-38],rotation:[0,0,0],size:1}),c.jsx(ty,{position:[-20,3,38],rotation:[0,Math.PI,0],size:.7}),c.jsx(ny,{position:[-15,.02,-5],size:1.2}),c.jsx(ny,{position:[8,.02,15],size:.8}),c.jsx(ny,{position:[-30,.02,10],size:1}),c.jsx(ny,{position:[25,.02,-15],size:.6}),c.jsx(ny,{position:[0,.02,25],size:1.1}),c.jsx(km,{position:[-50,8,0],rotation:[0,Math.PI/2,0],type:"exit"}),c.jsx(km,{position:[50,8,0],rotation:[0,-Math.PI/2,0],type:"exit"}),c.jsx(km,{position:[0,10,-38],rotation:[0,0,0],type:"caution"}),c.jsx(km,{position:[-20,8,-38],rotation:[0,0,0],type:"danger"}),c.jsx(km,{position:[20,8,-38],rotation:[0,0,0],type:"ppe"}),c.jsx(km,{position:[0,8,38],rotation:[0,Math.PI,0],type:"exit"}),c.jsx(h6,{position:[-52,12,0],rotation:[0,Math.PI/2,0]}),c.jsx(h6,{position:[52,12,0],rotation:[0,-Math.PI/2,0]}),c.jsx(lM,{position:[-40,0,-38]}),c.jsx(lM,{position:[40,0,-38]}),c.jsx(lM,{position:[-40,0,38]}),c.jsx(lM,{position:[40,0,38]}),c.jsx(jE,{position:[-30,0,39.5],isOpen:t["door-1"]}),c.jsx(jE,{position:[0,0,39.5],isOpen:t["door-2"]}),c.jsx(jE,{position:[30,0,39.5],isOpen:t["door-3"]}),c.jsx(cM,{position:[-35,5,-38],rotation:[0,0,0]}),c.jsx(cM,{position:[35,5,-38],rotation:[0,0,0]}),c.jsx(cM,{position:[-52,5,15],rotation:[0,Math.PI/2,0]}),c.jsx(cM,{position:[52,5,-15],rotation:[0,-Math.PI/2,0]}),c.jsx(uM,{position:[-15,18,-10]}),c.jsx(uM,{position:[10,16,5]}),c.jsx(uM,{position:[-5,17,15]}),c.jsx(uM,{position:[20,15,-5]}),c.jsx(oy,{position:[-20,4,-22],baseColor:"#22c55e"}),c.jsx(oy,{position:[0,4,-22],baseColor:"#3b82f6"}),c.jsx(oy,{position:[20,4,-22],baseColor:"#22c55e"}),c.jsx(oy,{position:[-15,12,6],baseColor:"#eab308",size:.08}),c.jsx(oy,{position:[15,12,6],baseColor:"#eab308",size:.08}),c.jsx(Gm,{position:[-45,0,-30],count:4}),c.jsx(Gm,{position:[45,0,-30],count:3}),c.jsx(Gm,{position:[-45,0,30],count:5}),c.jsx(Gm,{position:[45,0,30],count:2}),c.jsx(Gm,{position:[-35,0,25],count:3}),c.jsx(Gm,{position:[35,0,-25],count:4}),c.jsx(NE,{position:[-52,4,-25],rotation:[0,Math.PI/2,0]}),c.jsx(NE,{position:[52,4,25],rotation:[0,-Math.PI/2,0]}),c.jsx(NE,{position:[15,4,-38],rotation:[0,0,0]}),c.jsx(iy,{position:[-52,5,20],color:"#eab308"}),c.jsx(iy,{position:[-52,5,22],color:"#f97316"}),c.jsx(iy,{position:[-52,5,24],color:"#22c55e"}),c.jsx(iy,{position:[52,5,-20],color:"#eab308"}),c.jsx(iy,{position:[52,5,-22],color:"#3b82f6"}),c.jsx(p6,{position:[-38,0,0]}),c.jsx(p6,{position:[38,0,15]}),c.jsx(fM,{position:[-30,22,0],length:20}),c.jsx(fM,{position:[30,22,0],length:20}),c.jsx(fM,{position:[0,20,-15],length:30,rotation:[0,Math.PI/2,0]}),c.jsx(fM,{position:[0,20,15],length:30,rotation:[0,Math.PI/2,0]}),c.jsx(OE,{position:[-25,15,-15]}),c.jsx(OE,{position:[25,15,-15]}),c.jsx(OE,{position:[0,18,10]}),c.jsx(Vm,{position:[-20,0,0],size:.8}),c.jsx(Vm,{position:[20,0,0],size:.8}),c.jsx(Vm,{position:[0,0,-15],size:.6}),c.jsx(Vm,{position:[0,0,15],size:.6}),c.jsx(Vm,{position:[-10,0,25],size:.5}),c.jsx(Vm,{position:[10,0,25],size:.5}),c.jsx(DE,{position:[-30,18,-20]}),c.jsx(DE,{position:[30,18,20]}),c.jsx(DE,{position:[0,16,0]}),c.jsx(hM,{position:[-35,25,-10],length:4}),c.jsx(hM,{position:[35,25,10],length:3}),c.jsx(hM,{position:[-15,24,20],length:2.5}),c.jsx(hM,{position:[15,24,-20],length:3.5}),c.jsx(dM,{position:[-52,8,-30],rotation:[0,Math.PI/2,0]}),c.jsx(dM,{position:[52,8,30],rotation:[0,-Math.PI/2,0]}),c.jsx(dM,{position:[-30,30,-38],rotation:[Math.PI/2,0,0]}),c.jsx(dM,{position:[30,30,-38],rotation:[Math.PI/2,0,0]}),c.jsx(PE,{position:[-52,4,5],rotation:[0,Math.PI/2,0]}),c.jsx(PE,{position:[52,4,-5],rotation:[0,-Math.PI/2,0]}),c.jsx(PE,{position:[-25,4,-38],rotation:[0,0,0]}),c.jsx(ry,{position:[-40,27,-32]}),c.jsx(ry,{position:[-38,27,-31]}),c.jsx(ry,{position:[42,26,30]}),c.jsx(ry,{position:[20,28,-35]}),c.jsx(ry,{position:[-15,27,33]}),c.jsx(IE,{position:[-50,.02,-20],pathLength:4}),c.jsx(IE,{position:[50,.02,15],pathLength:3}),c.jsx(IE,{position:[-30,.02,36],pathLength:5}),c.jsx(UE,{position:[-20,30,-15],rotation:[.1,0,.05]}),c.jsx(UE,{position:[15,30,10],rotation:[-.05,0,-.1]}),c.jsx(UE,{position:[0,30,-25],rotation:[.08,0,0]}),c.jsx(pM,{position:[-51,2,-32],rotation:[0,Math.PI/2,0],type:"tag"}),c.jsx(pM,{position:[51,1.5,28],rotation:[0,-Math.PI/2,0],type:"drawing"}),c.jsx(pM,{position:[-42,2.5,-37.5],rotation:[0,0,0],type:"message"}),c.jsx(pM,{position:[35,3,-37.5],rotation:[0,0,0],type:"tag"}),c.jsx(m6,{position:[-52,5.5,-10],rotation:[0,Math.PI/2,0]}),c.jsx(m6,{position:[52,5.5,10],rotation:[0,-Math.PI/2,0]}),c.jsx(mM,{position:[-18,.02,-8],rotation:[-Math.PI/2,0,0],size:.8}),c.jsx(mM,{position:[22,.02,-4],rotation:[-Math.PI/2,0,0],size:.6}),c.jsx(mM,{position:[-52,3,8],rotation:[0,Math.PI/2,0],size:.5}),c.jsx(mM,{position:[10,.02,18],rotation:[-Math.PI/2,0,0],size:.7}),c.jsx(Hm,{position:[-42,0,-28],color:"#3b82f6"}),c.jsx(Hm,{position:[-40,0,-28],color:"#22c55e"}),c.jsx(Hm,{position:[-41,0,-26],color:"#ef4444"}),c.jsx(Hm,{position:[42,0,28],color:"#3b82f6"}),c.jsx(Hm,{position:[44,0,27],color:"#1e293b"}),c.jsx(Hm,{position:[-25,0,32],color:"#78350f",tipped:!0}),c.jsx(gM,{position:[-51.5,0,-15],color:"#22c55e"}),c.jsx(gM,{position:[-51.5,0,-13],color:"#ef4444"}),c.jsx(gM,{position:[51.5,0,20],color:"#3b82f6"}),c.jsx(gM,{position:[51.5,0,22],color:"#eab308"}),c.jsx(LE,{position:[-28,0,-10],isOpen:!0}),c.jsx(LE,{position:[32,0,8],isOpen:!1}),c.jsx(LE,{position:[-15,0,22],isOpen:!0}),c.jsx(BE,{position:[-45,0,5]}),c.jsx(BE,{position:[45,0,-8]}),c.jsx(BE,{position:[0,0,32]}),c.jsx(ay,{position:[-35,5.3,-37.8],type:"cup"}),c.jsx(ay,{position:[-34.5,5.3,-37.8],type:"thermos"}),c.jsx(ay,{position:[35,5.3,-37.8],type:"mug"}),c.jsx(ay,{position:[-51.8,4.3,-24.5],type:"cup"}),c.jsx(ay,{position:[51.8,4.3,25.5],type:"thermos"}),c.jsx(zE,{position:[-52,6,30],rotation:[0,Math.PI/2,0]}),c.jsx(zE,{position:[52,6,-25],rotation:[0,-Math.PI/2,0]}),c.jsx(zE,{position:[25,6,-38],rotation:[0,0,0]}),c.jsx(kE,{start:[-30,.01,-12],end:[-22,.01,-8],color:"#f97316"}),c.jsx(kE,{start:[25,.01,15],end:[32,.01,18],color:"#eab308"}),c.jsx(kE,{start:[-10,.01,25],end:[5,.01,28],color:"#f97316"}),c.jsx(A0e,{position:[-35,.02,15]}),c.jsx(g6,{position:[-52,8,-5],rotation:[0,Math.PI/2,0],days:47}),c.jsx(g6,{position:[52,8,5],rotation:[0,-Math.PI/2,0],days:47}),c.jsx(v6,{position:[-52,6,0],rotation:[0,Math.PI/2,0]}),c.jsx(v6,{position:[52,6,0],rotation:[0,-Math.PI/2,0]}),c.jsx(x6,{position:[-51.5,4.5,-25]}),c.jsx(x6,{position:[35.5,5.3,-37.5]}),c.jsx(y6,{position:[-48,0,-35]}),c.jsx(y6,{position:[48,0,35]}),c.jsx(b6,{position:[-52,4.5,-30],rotation:[0,Math.PI/2,0]}),c.jsx(b6,{position:[52,4.5,30],rotation:[0,-Math.PI/2,0]}),c.jsx(FE,{position:[-52,5,5],rotation:[0,Math.PI/2,0]}),c.jsx(FE,{position:[52,5,-5],rotation:[0,-Math.PI/2,0]}),c.jsx(FE,{position:[0,5,-38],rotation:[0,0,0]}),c.jsx(S6,{position:[-52,4.5,8],rotation:[0,Math.PI/2,0]}),c.jsx(S6,{position:[52,4.5,-8],rotation:[0,-Math.PI/2,0]}),c.jsx(GE,{position:[-45,.8,5],count:4}),c.jsx(GE,{position:[45,.8,-8],count:3}),c.jsx(GE,{position:[0,.8,32],count:5}),c.jsx(VE,{position:[-49.5,27.5,-34.5]}),c.jsx(VE,{position:[49.5,27.5,34.5]}),c.jsx(VE,{position:[-29,25.5,-37.5]}),c.jsx(Ph,{position:[-49,.02,-36]}),c.jsx(Ph,{position:[49,.02,36]}),c.jsx(Ph,{position:[-49,.02,36]}),c.jsx(Ph,{position:[49,.02,-36]}),c.jsx(Ph,{position:[-35,.02,-37]}),c.jsx(Ph,{position:[35,.02,37]}),c.jsx(Ph,{position:[-48,.02,0]}),c.jsx(Ph,{position:[48,.02,0]}),c.jsx(E0e,{position:[-48,.9,35],rotation:[0,Math.PI/4,0]}),c.jsx(M6,{position:[-52,5,35],rotation:[0,Math.PI/2,0]}),c.jsx(M6,{position:[52,5,-35],rotation:[0,-Math.PI/2,0]}),c.jsx(_6,{position:[-52,5.5,28],rotation:[0,Math.PI/2,0]}),c.jsx(_6,{position:[52,5.5,-28],rotation:[0,-Math.PI/2,0]}),c.jsx(C0e,{position:[-48,6,15]}),c.jsx(vM,{position:[-40,25,-38],rotation:[.3,0,0]}),c.jsx(vM,{position:[40,25,-38],rotation:[.3,0,0]}),c.jsx(vM,{position:[-40,25,38],rotation:[-.3,Math.PI,0]}),c.jsx(vM,{position:[40,25,38],rotation:[-.3,Math.PI,0]}),c.jsx(HE,{position:[-52,10,-20]}),c.jsx(HE,{position:[52,10,20]}),c.jsx(HE,{position:[0,12,-38]}),c.jsx(sy,{position:[-18,16,-12],rotation:[0,Math.PI/4,0]}),c.jsx(sy,{position:[18,16,-12],rotation:[0,-Math.PI/4,0]}),c.jsx(sy,{position:[0,18,8],rotation:[0,0,0]}),c.jsx(sy,{position:[-25,14,5],rotation:[0,Math.PI/2,0]}),c.jsx(sy,{position:[25,14,5],rotation:[0,-Math.PI/2,0]}),c.jsx(f0,{position:[-22,15,-10],rotation:[0,0,0],size:.12}),c.jsx(f0,{position:[22,15,-10],rotation:[0,0,0],size:.15}),c.jsx(f0,{position:[0,17,5],rotation:[Math.PI/2,0,0],size:.18}),c.jsx(f0,{position:[-30,13,8],rotation:[0,Math.PI/2,0],size:.1}),c.jsx(f0,{position:[30,13,8],rotation:[0,-Math.PI/2,0],size:.1}),c.jsx(f0,{position:[-15,16,12],rotation:[0,.3,0],size:.14}),c.jsx(f0,{position:[15,16,12],rotation:[0,-.3,0],size:.14}),c.jsx(qE,{position:[28,.01,38],count:7}),c.jsx(qE,{position:[-28,.01,38],count:5}),c.jsx(qE,{position:[-49,.01,-5],count:4}),c.jsx(xM,{position:[-35,4.95,-37.5],color:"#f472b6"}),c.jsx(xM,{position:[-34.8,4.95,-37.6],color:"#86efac"}),c.jsx(xM,{position:[35,4.95,-37.4],color:"#93c5fd"}),c.jsx(xM,{position:[-51.95,4.2,-24.8],color:"#fca5a5"}),c.jsx(ly,{position:[-35.2,5.4,-37.7],rotation:[0,0,.05],color:"#fef08a",curled:!0}),c.jsx(ly,{position:[35.3,5.35,-37.75],rotation:[0,0,-.08],color:"#fbcfe8"}),c.jsx(ly,{position:[-52,5.2,15.1],rotation:[0,Math.PI/2,.03],color:"#bfdbfe",curled:!0}),c.jsx(ly,{position:[52,5.25,-15.05],rotation:[0,-Math.PI/2,-.05],color:"#fef08a"}),c.jsx(ly,{position:[-25.1,4.15,-37.9],rotation:[0,0,.1],color:"#d9f99d",curled:!0}),c.jsx(WE,{position:[-35,5.32,-37.5],count:4}),c.jsx(WE,{position:[35,5.32,-37.6],count:3}),c.jsx(WE,{position:[-51.5,4.55,-24.5],count:2}),c.jsx(XE,{position:[-52,5.5,32],color:"#1e3a8a"}),c.jsx(XE,{position:[-52,5.5,33.5],color:"#166534"}),c.jsx(XE,{position:[52,5.5,-32],color:"#7c2d12"}),c.jsx($E,{position:[-49,0,36],color:"#1e293b"}),c.jsx($E,{position:[49,0,-36],color:"#1e40af"}),c.jsx($E,{position:[-49,0,-36],color:"#dc2626"}),c.jsx(YE,{position:[-47,0,34.5],type:"paper"}),c.jsx(YE,{position:[-46.5,0,34],type:"cooler"}),c.jsx(YE,{position:[-47.3,4.52,35],type:"box"}),c.jsx(cy,{position:[-35.3,5.32,-37.3],type:"plastic"}),c.jsx(cy,{position:[34.8,5.32,-37.7],type:"metal"}),c.jsx(cy,{position:[-51.5,4.55,-24.2],type:"sports"}),c.jsx(cy,{position:[-28,.7,-10],type:"plastic"}),c.jsx(cy,{position:[32.2,.55,8.2],type:"metal"}),c.jsx(T6,{position:[-35.2,5.35,-37.2],rotation:[0,.3,0]}),c.jsx(T6,{position:[-47,4.52,34.8],rotation:[0,-.5,0]}),c.jsx(ZE,{position:[-20,0,12],rotation:[0,.3,0],hasTape:!0}),c.jsx(ZE,{position:[-17,0,12.5],rotation:[0,-.2,0],hasTape:!0}),c.jsx(ZE,{position:[25,0,-18],rotation:[0,Math.PI/2,0],hasTape:!1}),c.jsx(w6,{position:[-22,0,10],rotation:[0,.5,0]}),c.jsx(w6,{position:[30,0,5],rotation:[0,-.3,0]}),c.jsx(A6,{position:[-18,4.5,-6.2],rotation:[0,0,0]}),c.jsx(A6,{position:[7.5,12,5.8],rotation:[0,0,0]}),c.jsx(E6,{position:[-52,4,12],rotation:[0,Math.PI/2,0]}),c.jsx(E6,{position:[52,4,-12],rotation:[0,-Math.PI/2,0]}),c.jsx(KE,{position:[-12,0,8],size:1}),c.jsx(KE,{position:[18,0,-12],size:.7}),c.jsx(KE,{position:[-35,0,22],size:.9}),c.jsx(QE,{position:[-52,8,-25],rotation:[0,Math.PI/2,0]}),c.jsx(QE,{position:[52,8,25],rotation:[0,-Math.PI/2,0]}),c.jsx(QE,{position:[-20,12,-38],rotation:[0,0,0]}),c.jsx(yM,{position:[-12,28,8],size:2}),c.jsx(yM,{position:[18,27,-12],size:1.5}),c.jsx(yM,{position:[-35,26,22],size:1.8}),c.jsx(yM,{position:[5,29,0],size:1.2}),c.jsx(bM,{position:[-30,17.5,-20],count:5}),c.jsx(bM,{position:[30,17.5,20],count:4}),c.jsx(bM,{position:[0,15.5,0],count:6}),c.jsx(bM,{position:[-15,24,20],count:3}),c.jsx(JE,{position:[-49,.01,-35],pathLength:3}),c.jsx(JE,{position:[49,.01,35],pathLength:2}),c.jsx(JE,{position:[-12,.01,9],pathLength:2.5})]})},j0e=({point:t})=>{const e=z.useRef(null),n=z.useRef(null),i=z.useRef(null),r=t.intensity/10,a=1+r*2,s=t.type==="emergency"?"#ef4444":t.type==="near_miss"?"#f97316":t.type==="stop"?"#eab308":"#3b82f6";return It(o=>{const l=Math.sin(o.clock.elapsedTime*2)*.3+.7;e.current&&(e.current.opacity=.3*l*r),n.current&&(n.current.opacity=.6*l),i.current&&(i.current.opacity=.2*l)}),c.jsxs("group",{position:[t.x,.1,t.z],children:[c.jsxs("mesh",{rotation:[-Math.PI/2,0,0],children:[c.jsx("circleGeometry",{args:[a,32]}),c.jsx("meshBasicMaterial",{ref:e,color:s,transparent:!0,opacity:.3*r})]}),c.jsxs("mesh",{rotation:[-Math.PI/2,0,0],children:[c.jsx("ringGeometry",{args:[a-.1,a,32]}),c.jsx("meshBasicMaterial",{ref:n,color:s,transparent:!0,opacity:.6})]}),r>.5&&c.jsxs("mesh",{position:[0,r*2,0],children:[c.jsx("cylinderGeometry",{args:[.3,.5,r*4,16]}),c.jsx("meshBasicMaterial",{ref:i,color:s,transparent:!0,opacity:.2})]}),t.intensity>=3&&c.jsxs(Sa,{position:[0,.5,0],fontSize:.4,color:s,anchorX:"center",anchorY:"middle",outlineWidth:.02,outlineColor:"#000",children:[t.intensity.toFixed(0),"x"]})]})},N0e=()=>{const t=Fe(n=>n.incidentHeatMap);return!Fe(n=>n.showIncidentHeatMap)||t.length===0?null:c.jsx("group",{children:t.map((n,i)=>c.jsx(j0e,{point:n},i))})},O0e=80,D0e=({productionSpeed:t,showZones:e,onSelectMachine:n,onSelectWorker:i})=>{const r=Fe(x=>x.setMachines),a=Fe(x=>x.machines),s=Fe(x=>x.updateMachineMetrics),o=Fe(x=>x.updateMachineStatus),l=z.useRef(0),u=z.useMemo(()=>{const x=[],b=["Alpha","Beta","Gamma","Delta","Epsilon"];for(let E=-2;E<=2;E++)x.push({id:`silo-${E}`,name:`Silo ${b[E+2]}`,type:Wn.SILO,position:[E*9,0,-22],size:[4.5,16,4.5],rotation:0,status:"running",metrics:{rpm:0,temperature:22+Math.random()*3,vibration:.1,load:75+Math.random()*20},lastMaintenance:"2024-01-15",nextMaintenance:"2024-04-15"});const M=["RM-101","RM-102","RM-103","RM-104","RM-105","RM-106"];let S=0;for(let E=-3;E<=3;E+=1.5)Math.abs(E)<.5||(x.push({id:`mill-${E}`,name:M[S],type:Wn.ROLLER_MILL,position:[E*5,0,-6],size:[3.5,5,3.5],rotation:0,status:Math.random()>.1?"running":"warning",metrics:{rpm:1400+Math.random()*100,temperature:55+Math.random()*15,vibration:2+Math.random(),load:80+Math.random()*15},lastMaintenance:"2024-02-01",nextMaintenance:"2024-05-01"}),S++);const T=["Sifter A","Sifter B","Sifter C"];for(let E=-1;E<=1;E++)x.push({id:`sifter-${E}`,name:T[E+1],type:Wn.PLANSIFTER,position:[E*14,9,6],size:[7,7,7],rotation:0,status:"running",metrics:{rpm:200+Math.random()*20,temperature:35+Math.random()*5,vibration:5+Math.random()*2,load:90+Math.random()*8},lastMaintenance:"2024-01-20",nextMaintenance:"2024-04-20"});const A=["Pack Line 1","Pack Line 2","Pack Line 3"];for(let E=-1;E<=1;E++)x.push({id:`packer-${E}`,name:A[E+1],type:Wn.PACKER,position:[E*8,0,20],size:[4,6,4],rotation:Math.PI,status:"running",metrics:{rpm:60,temperature:28+Math.random()*5,vibration:1+Math.random(),load:85+Math.random()*10},lastMaintenance:"2024-02-10",nextMaintenance:"2024-05-10"});return x},[]);z.useEffect(()=>{u.length>0&&a.length===0&&r(u)},[u,a.length,r]),It(x=>{const b=x.clock.elapsedTime;if(b-l.current<2||(l.current=b,a.length===0))return;const M=Math.floor(Math.random()*a.length),S=a[M],T=(Math.random()-.5)*2,A=(Math.random()-.5)*.3,E=(Math.random()-.5)*3,j=Math.max(20,Math.min(85,S.metrics.temperature+T)),R=Math.max(0,Math.min(10,S.metrics.vibration+A)),C=Math.max(50,Math.min(100,S.metrics.load+E));s(S.id,{temperature:j,vibration:R,load:C}),S.status==="running"?(j>70||R>5)&&Math.random()<.1&&o(S.id,"warning"):S.status==="warning"&&j<60&&R<4&&Math.random()<.2&&o(S.id,"running")});const h=a.length>0?a:u,p=Fe(x=>x.graphics.quality),g=p==="low";return c.jsxs("group",{children:[!g&&c.jsx(zue,{preset:"warehouse",background:!1,environmentIntensity:.4}),c.jsx(u0e,{}),c.jsx(Jue,{machines:h,onSelect:n}),!g&&c.jsx(zde,{machines:h}),c.jsx(Lde,{floorSize:O0e,showZones:e}),c.jsx(ofe,{productionSpeed:t}),c.jsx(bde,{onSelectWorker:i}),c.jsx(Jde,{showSpeedZones:e}),!g&&c.jsx(Yde,{productionSpeed:t}),c.jsx(N0e,{}),c.jsx(qde,{count:500}),c.jsx(Wde,{}),c.jsx($de,{}),!g&&c.jsx(T0e,{}),(p==="high"||p==="ultra")&&c.jsx(R0e,{})]})},kD=z.createContext({});function FD(t){const e=z.useRef(null);return e.current===null&&(e.current=t()),e.current}const zT=z.createContext(null),GD=z.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class P0e extends z.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function I0e({children:t,isPresent:e}){const n=z.useId(),i=z.useRef(null),r=z.useRef({width:0,height:0,top:0,left:0}),{nonce:a}=z.useContext(GD);return z.useInsertionEffect(()=>{const{width:s,height:o,top:l,left:u}=r.current;if(e||!i.current||!s||!o)return;i.current.dataset.motionPopId=n;const h=document.createElement("style");return a&&(h.nonce=a),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),c.jsx(P0e,{isPresent:e,childRef:i,sizeRef:r,children:z.cloneElement(t,{ref:i})})}const U0e=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:a,mode:s})=>{const o=FD(L0e),l=z.useId(),u=z.useCallback(p=>{o.set(p,!0);for(const g of o.values())if(!g)return;i&&i()},[o,i]),h=z.useMemo(()=>({id:l,initial:e,isPresent:n,custom:r,onExitComplete:u,register:p=>(o.set(p,!1),()=>o.delete(p))}),a?[Math.random(),u]:[n,u]);return z.useMemo(()=>{o.forEach((p,g)=>o.set(g,!1))},[n]),z.useEffect(()=>{!n&&!o.size&&i&&i()},[n]),s==="popLayout"&&(t=c.jsx(I0e,{isPresent:n,children:t})),c.jsx(zT.Provider,{value:h,children:t})};function L0e(){return new Map}function QW(t=!0){const e=z.useContext(zT);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,a=z.useId();z.useEffect(()=>{t&&r(a)},[t]);const s=z.useCallback(()=>t&&i&&i(a),[a,i,t]);return!n&&i?[!1,s]:[!0]}const SM=t=>t.key||"";function C6(t){const e=[];return z.Children.forEach(t,n=>{z.isValidElement(n)&&e.push(n)}),e}const VD=typeof window<"u",JW=VD?z.useLayoutEffect:z.useEffect,_a=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:a="sync",propagate:s=!1})=>{const[o,l]=QW(s),u=z.useMemo(()=>C6(t),[t]),h=s&&!o?[]:u.map(SM),p=z.useRef(!0),g=z.useRef(u),x=FD(()=>new Map),[b,M]=z.useState(u),[S,T]=z.useState(u);JW(()=>{p.current=!1,g.current=u;for(let j=0;j<S.length;j++){const R=SM(S[j]);h.includes(R)?x.delete(R):x.get(R)!==!0&&x.set(R,!1)}},[S,h.length,h.join("-")]);const A=[];if(u!==b){let j=[...u];for(let R=0;R<S.length;R++){const C=S[R],D=SM(C);h.includes(D)||(j.splice(R,0,C),A.push(C))}a==="wait"&&A.length&&(j=A),T(C6(j)),M(u);return}const{forceRender:E}=z.useContext(kD);return c.jsx(c.Fragment,{children:S.map(j=>{const R=SM(j),C=s&&!o?!1:u===S||h.includes(R),D=()=>{if(x.has(R))x.set(R,!0);else return;let U=!0;x.forEach(I=>{I||(U=!1)}),U&&(E==null||E(),T(g.current),s&&(l==null||l()),i&&i())};return c.jsx(U0e,{isPresent:C,initial:!p.current||n?void 0:!1,custom:C?void 0:e,presenceAffectsLayout:r,mode:a,onExitComplete:C?void 0:D,children:j},R)})})},Yo=t=>t;let eX=Yo;function HD(t){let e;return()=>(e===void 0&&(e=t()),e)}const Tg=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},Ef=t=>t*1e3,Cf=t=>t/1e3,B0e={useManualTiming:!1};function z0e(t){let e=new Set,n=new Set,i=!1,r=!1;const a=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1};function o(u){a.has(u)&&(l.schedule(u),t()),u(s)}const l={schedule:(u,h=!1,p=!1)=>{const x=p&&i?e:n;return h&&a.add(u),x.has(u)||x.add(u),u},cancel:u=>{n.delete(u),a.delete(u)},process:u=>{if(s=u,i){r=!0;return}i=!0,[e,n]=[n,e],e.forEach(o),e.clear(),i=!1,r&&(r=!1,l.process(u))}};return l}const MM=["read","resolveKeyframes","update","preRender","render","postRender"],k0e=40;function tX(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,s=MM.reduce((T,A)=>(T[A]=z0e(a),T),{}),{read:o,resolveKeyframes:l,update:u,preRender:h,render:p,postRender:g}=s,x=()=>{const T=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(T-r.timestamp,k0e),1),r.timestamp=T,r.isProcessing=!0,o.process(r),l.process(r),u.process(r),h.process(r),p.process(r),g.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(x))},b=()=>{n=!0,i=!0,r.isProcessing||t(x)};return{schedule:MM.reduce((T,A)=>{const E=s[A];return T[A]=(j,R=!1,C=!1)=>(n||b(),E.schedule(j,R,C)),T},{}),cancel:T=>{for(let A=0;A<MM.length;A++)s[MM[A]].cancel(T)},state:r,steps:s}}const{schedule:hr,cancel:Qh,state:rs,steps:e5}=tX(typeof requestAnimationFrame<"u"?requestAnimationFrame:Yo,!0),nX=z.createContext({strict:!1}),R6={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},wg={};for(const t in R6)wg[t]={isEnabled:e=>R6[t].some(n=>!!e[n])};function F0e(t){for(const e in t)wg[e]={...wg[e],...t[e]}}const G0e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function K_(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||G0e.has(t)}let iX=t=>!K_(t);function V0e(t){t&&(iX=e=>e.startsWith("on")?!K_(e):t(e))}try{V0e(require("@emotion/is-prop-valid").default)}catch{}function H0e(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(iX(r)||n===!0&&K_(r)||!e&&!K_(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function q0e(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}const kT=z.createContext({});function _1(t){return typeof t=="string"||Array.isArray(t)}function FT(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const qD=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],WD=["initial",...qD];function GT(t){return FT(t.animate)||WD.some(e=>_1(t[e]))}function rX(t){return!!(GT(t)||t.variants)}function W0e(t,e){if(GT(t)){const{initial:n,animate:i}=t;return{initial:n===!1||_1(n)?n:void 0,animate:_1(i)?i:void 0}}return t.inherit!==!1?e:{}}function X0e(t){const{initial:e,animate:n}=W0e(t,z.useContext(kT));return z.useMemo(()=>({initial:e,animate:n}),[j6(e),j6(n)])}function j6(t){return Array.isArray(t)?t.join(" "):t}const $0e=Symbol.for("motionComponentSymbol");function eg(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Y0e(t,e,n){return z.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):eg(n)&&(n.current=i))},[e])}const XD=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Z0e="framerAppearId",aX="data-"+XD(Z0e),{schedule:$D}=tX(queueMicrotask,!1),sX=z.createContext({});function K0e(t,e,n,i,r){var a,s;const{visualElement:o}=z.useContext(kT),l=z.useContext(nX),u=z.useContext(zT),h=z.useContext(GD).reducedMotion,p=z.useRef(null);i=i||l.renderer,!p.current&&i&&(p.current=i(t,{visualState:e,parent:o,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:h}));const g=p.current,x=z.useContext(sX);g&&!g.projection&&r&&(g.type==="html"||g.type==="svg")&&Q0e(p.current,n,r,x);const b=z.useRef(!1);z.useInsertionEffect(()=>{g&&b.current&&g.update(n,u)});const M=n[aX],S=z.useRef(!!M&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,M))&&((s=window.MotionHasOptimisedAnimation)===null||s===void 0?void 0:s.call(window,M)));return JW(()=>{g&&(b.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),$D.render(g.render),S.current&&g.animationState&&g.animationState.animateChanges())}),z.useEffect(()=>{g&&(!S.current&&g.animationState&&g.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{var T;(T=window.MotionHandoffMarkAsComplete)===null||T===void 0||T.call(window,M)}),S.current=!1))}),g}function Q0e(t,e,n,i){const{layoutId:r,layout:a,drag:s,dragConstraints:o,layoutScroll:l,layoutRoot:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:oX(t.parent)),t.projection.setOptions({layoutId:r,layout:a,alwaysMeasureLayout:!!s||o&&eg(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:u})}function oX(t){if(t)return t.options.allowProjection!==!1?t.projection:oX(t.parent)}function J0e({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){var a,s;t&&F0e(t);function o(u,h){let p;const g={...z.useContext(GD),...u,layoutId:epe(u)},{isStatic:x}=g,b=X0e(u),M=i(u,x);if(!x&&VD){tpe();const S=npe(g);p=S.MeasureLayout,b.visualElement=K0e(r,M,g,e,S.ProjectionNode)}return c.jsxs(kT.Provider,{value:b,children:[p&&b.visualElement?c.jsx(p,{visualElement:b.visualElement,...g}):null,n(r,u,Y0e(M,b.visualElement,h),M,x,b.visualElement)]})}o.displayName=`motion.${typeof r=="string"?r:`create(${(s=(a=r.displayName)!==null&&a!==void 0?a:r.name)!==null&&s!==void 0?s:""})`}`;const l=z.forwardRef(o);return l[$0e]=r,l}function epe({layoutId:t}){const e=z.useContext(kD).id;return e&&t!==void 0?e+"-"+t:t}function tpe(t,e){z.useContext(nX).strict}function npe(t){const{drag:e,layout:n}=wg;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const ipe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function YD(t){return typeof t!="string"||t.includes("-")?!1:!!(ipe.indexOf(t)>-1||/[A-Z]/u.test(t))}function N6(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function ZD(t,e,n,i){if(typeof e=="function"){const[r,a]=N6(i);e=e(n!==void 0?n:t.custom,r,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,a]=N6(i);e=e(n!==void 0?n:t.custom,r,a)}return e}const iN=t=>Array.isArray(t),rpe=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),ape=t=>iN(t)?t[t.length-1]||0:t,As=t=>!!(t&&t.getVelocity);function QM(t){const e=As(t)?t.get():t;return rpe(e)?e.toValue():e}function spe({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},i,r,a){const s={latestValues:ope(i,r,a,t),renderState:e()};return n&&(s.onMount=o=>n({props:i,current:o,...s}),s.onUpdate=o=>n(o)),s}const lX=t=>(e,n)=>{const i=z.useContext(kT),r=z.useContext(zT),a=()=>spe(t,e,i,r);return n?a():FD(a)};function ope(t,e,n,i){const r={},a=i(t,{});for(const g in a)r[g]=QM(a[g]);let{initial:s,animate:o}=t;const l=GT(t),u=rX(t);e&&u&&!l&&t.inherit!==!1&&(s===void 0&&(s=e.initial),o===void 0&&(o=e.animate));let h=n?n.initial===!1:!1;h=h||s===!1;const p=h?o:s;if(p&&typeof p!="boolean"&&!FT(p)){const g=Array.isArray(p)?p:[p];for(let x=0;x<g.length;x++){const b=ZD(t,g[x]);if(b){const{transitionEnd:M,transition:S,...T}=b;for(const A in T){let E=T[A];if(Array.isArray(E)){const j=h?E.length-1:0;E=E[j]}E!==null&&(r[A]=E)}for(const A in M)r[A]=M[A]}}}return r}const iv=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],lp=new Set(iv),cX=t=>e=>typeof e=="string"&&e.startsWith(t),uX=cX("--"),lpe=cX("var(--"),KD=t=>lpe(t)?cpe.test(t.split("/*")[0].trim()):!1,cpe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,fX=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Nf=(t,e,n)=>n>e?e:n<t?t:n,rv={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},T1={...rv,transform:t=>Nf(0,1,t)},_M={...rv,default:1},Pb=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Uh=Pb("deg"),xu=Pb("%"),Sn=Pb("px"),upe=Pb("vh"),fpe=Pb("vw"),O6={...xu,parse:t=>xu.parse(t)/100,transform:t=>xu.transform(t*100)},hpe={borderWidth:Sn,borderTopWidth:Sn,borderRightWidth:Sn,borderBottomWidth:Sn,borderLeftWidth:Sn,borderRadius:Sn,radius:Sn,borderTopLeftRadius:Sn,borderTopRightRadius:Sn,borderBottomRightRadius:Sn,borderBottomLeftRadius:Sn,width:Sn,maxWidth:Sn,height:Sn,maxHeight:Sn,top:Sn,right:Sn,bottom:Sn,left:Sn,padding:Sn,paddingTop:Sn,paddingRight:Sn,paddingBottom:Sn,paddingLeft:Sn,margin:Sn,marginTop:Sn,marginRight:Sn,marginBottom:Sn,marginLeft:Sn,backgroundPositionX:Sn,backgroundPositionY:Sn},dpe={rotate:Uh,rotateX:Uh,rotateY:Uh,rotateZ:Uh,scale:_M,scaleX:_M,scaleY:_M,scaleZ:_M,skew:Uh,skewX:Uh,skewY:Uh,distance:Sn,translateX:Sn,translateY:Sn,translateZ:Sn,x:Sn,y:Sn,z:Sn,perspective:Sn,transformPerspective:Sn,opacity:T1,originX:O6,originY:O6,originZ:Sn},D6={...rv,transform:Math.round},QD={...hpe,...dpe,zIndex:D6,size:Sn,fillOpacity:T1,strokeOpacity:T1,numOctaves:D6},ppe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},mpe=iv.length;function gpe(t,e,n){let i="",r=!0;for(let a=0;a<mpe;a++){const s=iv[a],o=t[s];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(s.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const u=fX(o,QD[s]);if(!l){r=!1;const h=ppe[s]||s;i+=`${h}(${u}) `}n&&(e[s]=u)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function JD(t,e,n){const{style:i,vars:r,transformOrigin:a}=t;let s=!1,o=!1;for(const l in e){const u=e[l];if(lp.has(l)){s=!0;continue}else if(uX(l)){r[l]=u;continue}else{const h=fX(u,QD[l]);l.startsWith("origin")?(o=!0,a[l]=h):i[l]=h}}if(e.transform||(s||n?i.transform=gpe(e,t.transform,n):i.transform&&(i.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:h=0}=a;i.transformOrigin=`${l} ${u} ${h}`}}const vpe={offset:"stroke-dashoffset",array:"stroke-dasharray"},xpe={offset:"strokeDashoffset",array:"strokeDasharray"};function ype(t,e,n=1,i=0,r=!0){t.pathLength=1;const a=r?vpe:xpe;t[a.offset]=Sn.transform(-i);const s=Sn.transform(e),o=Sn.transform(n);t[a.array]=`${s} ${o}`}function P6(t,e,n){return typeof t=="string"?t:Sn.transform(e+n*t)}function bpe(t,e,n){const i=P6(e,t.x,t.width),r=P6(n,t.y,t.height);return`${i} ${r}`}function eP(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:a,pathLength:s,pathSpacing:o=1,pathOffset:l=0,...u},h,p){if(JD(t,u,p),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:x,dimensions:b}=t;g.transform&&(b&&(x.transform=g.transform),delete g.transform),b&&(r!==void 0||a!==void 0||x.transform)&&(x.transformOrigin=bpe(b,r!==void 0?r:.5,a!==void 0?a:.5)),e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),i!==void 0&&(g.scale=i),s!==void 0&&ype(g,s,o,l,!1)}const tP=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),hX=()=>({...tP(),attrs:{}}),nP=t=>typeof t=="string"&&t.toLowerCase()==="svg";function dX(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const a in n)t.style.setProperty(a,n[a])}const pX=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function mX(t,e,n,i){dX(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(pX.has(r)?r:XD(r),e.attrs[r])}const Q_={};function Spe(t){Object.assign(Q_,t)}function gX(t,{layout:e,layoutId:n}){return lp.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Q_[t]||t==="opacity")}function iP(t,e,n){var i;const{style:r}=t,a={};for(const s in r)(As(r[s])||e.style&&As(e.style[s])||gX(s,t)||((i=n==null?void 0:n.getValue(s))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(a[s]=r[s]);return a}function vX(t,e,n){const i=iP(t,e,n);for(const r in t)if(As(t[r])||As(e[r])){const a=iv.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[a]=t[r]}return i}function Mpe(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const I6=["x","y","width","height","cx","cy","r"],_pe={useVisualState:lX({scrapeMotionValuesFromProps:vX,createRenderState:hX,onUpdate:({props:t,prevProps:e,current:n,renderState:i,latestValues:r})=>{if(!n)return;let a=!!t.drag;if(!a){for(const o in r)if(lp.has(o)){a=!0;break}}if(!a)return;let s=!e;if(e)for(let o=0;o<I6.length;o++){const l=I6[o];t[l]!==e[l]&&(s=!0)}s&&hr.read(()=>{Mpe(n,i),hr.render(()=>{eP(i,r,nP(n.tagName),t.transformTemplate),mX(n,i)})})}})},Tpe={useVisualState:lX({scrapeMotionValuesFromProps:iP,createRenderState:tP})};function xX(t,e,n){for(const i in e)!As(e[i])&&!gX(i,n)&&(t[i]=e[i])}function wpe({transformTemplate:t},e){return z.useMemo(()=>{const n=tP();return JD(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Ape(t,e){const n=t.style||{},i={};return xX(i,n,t),Object.assign(i,wpe(t,e)),i}function Epe(t,e){const n={},i=Ape(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}function Cpe(t,e,n,i){const r=z.useMemo(()=>{const a=hX();return eP(a,e,nP(i),t.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};xX(a,t.style,t),r.style={...a,...r.style}}return r}function Rpe(t=!1){return(n,i,r,{latestValues:a},s)=>{const l=(YD(n)?Cpe:Epe)(i,a,s,n),u=H0e(i,typeof n=="string",t),h=n!==z.Fragment?{...u,...l,ref:r}:{},{children:p}=i,g=z.useMemo(()=>As(p)?p.get():p,[p]);return z.createElement(n,{...h,children:g})}}function jpe(t,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const s={...YD(i)?_pe:Tpe,preloadedFeatures:t,useRender:Rpe(r),createVisualElement:e,Component:i};return J0e(s)}}function yX(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function VT(t,e,n){const i=t.getProps();return ZD(i,e,n!==void 0?n:i.custom,t)}const Npe=HD(()=>window.ScrollTimeline!==void 0);class Ope{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(r=>{if(Npe()&&r.attachTimeline)return r.attachTimeline(e);if(typeof n=="function")return n(r)});return()=>{i.forEach((r,a)=>{r&&r(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Dpe extends Ope{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function rP(t,e){return t?t[e]||t.default||t:void 0}const rN=2e4;function bX(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<rN;)e+=n,i=t.next(e);return e>=rN?1/0:e}function aP(t){return typeof t=="function"}function U6(t,e){t.timeline=e,t.onfinish=null}const sP=t=>Array.isArray(t)&&typeof t[0]=="number",Ppe={linearEasing:void 0};function Ipe(t,e){const n=HD(t);return()=>{var i;return(i=Ppe[e])!==null&&i!==void 0?i:n()}}const J_=Ipe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),SX=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let a=0;a<r;a++)i+=t(Tg(0,r-1,a))+", ";return`linear(${i.substring(0,i.length-2)})`};function MX(t){return!!(typeof t=="function"&&J_()||!t||typeof t=="string"&&(t in aN||J_())||sP(t)||Array.isArray(t)&&t.every(MX))}const wy=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,aN={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:wy([0,.65,.55,1]),circOut:wy([.55,0,1,.45]),backIn:wy([.31,.01,.66,-.59]),backOut:wy([.33,1.53,.69,.99])};function _X(t,e){if(t)return typeof t=="function"&&J_()?SX(t,e):sP(t)?wy(t):Array.isArray(t)?t.map(n=>_X(n,e)||aN.easeOut):aN[t]}const mc={x:!1,y:!1};function TX(){return mc.x||mc.y}function Upe(t,e,n){var i;if(t instanceof Element)return[t];if(typeof t=="string"){let r=document;const a=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}function wX(t,e){const n=Upe(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function L6(t){return e=>{e.pointerType==="touch"||TX()||t(e)}}function Lpe(t,e,n={}){const[i,r,a]=wX(t,n),s=L6(o=>{const{target:l}=o,u=e(o);if(typeof u!="function"||!l)return;const h=L6(p=>{u(p),l.removeEventListener("pointerleave",h)});l.addEventListener("pointerleave",h,r)});return i.forEach(o=>{o.addEventListener("pointerenter",s,r)}),a}const AX=(t,e)=>e?t===e?!0:AX(t,e.parentElement):!1,oP=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Bpe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function zpe(t){return Bpe.has(t.tagName)||t.tabIndex!==-1}const Ay=new WeakSet;function B6(t){return e=>{e.key==="Enter"&&t(e)}}function t5(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const kpe=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=B6(()=>{if(Ay.has(n))return;t5(n,"down");const r=B6(()=>{t5(n,"up")}),a=()=>t5(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function z6(t){return oP(t)&&!TX()}function Fpe(t,e,n={}){const[i,r,a]=wX(t,n),s=o=>{const l=o.currentTarget;if(!z6(o)||Ay.has(l))return;Ay.add(l);const u=e(o),h=(x,b)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",g),!(!z6(x)||!Ay.has(l))&&(Ay.delete(l),typeof u=="function"&&u(x,{success:b}))},p=x=>{h(x,n.useGlobalTarget||AX(l,x.target))},g=x=>{h(x,!1)};window.addEventListener("pointerup",p,r),window.addEventListener("pointercancel",g,r)};return i.forEach(o=>{!zpe(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,r),o.addEventListener("focus",u=>kpe(u,r),r)}),a}function Gpe(t){return t==="x"||t==="y"?mc[t]?null:(mc[t]=!0,()=>{mc[t]=!1}):mc.x||mc.y?null:(mc.x=mc.y=!0,()=>{mc.x=mc.y=!1})}const EX=new Set(["width","height","top","left","right","bottom",...iv]);let JM;function Vpe(){JM=void 0}const yu={now:()=>(JM===void 0&&yu.set(rs.isProcessing||B0e.useManualTiming?rs.timestamp:performance.now()),JM),set:t=>{JM=t,queueMicrotask(Vpe)}};function lP(t,e){t.indexOf(e)===-1&&t.push(e)}function cP(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class uP{constructor(){this.subscriptions=[]}add(e){return lP(this.subscriptions,e),()=>cP(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let a=0;a<r;a++){const s=this.subscriptions[a];s&&s(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function CX(t,e){return e?t*(1e3/e):0}const k6=30,Hpe=t=>!isNaN(parseFloat(t));class qpe{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const a=yu.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=yu.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Hpe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new uP);const i=this.events[e].add(n);return e==="change"?()=>{i(),hr.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=yu.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>k6)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,k6);return CX(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function w1(t,e){return new qpe(t,e)}function Wpe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,w1(n))}function Xpe(t,e){const n=VT(t,e);let{transitionEnd:i={},transition:r={},...a}=n||{};a={...a,...i};for(const s in a){const o=ape(a[s]);Wpe(t,s,o)}}function $pe(t){return!!(As(t)&&t.add)}function sN(t,e){const n=t.getValue("willChange");if($pe(n))return n.add(e)}function RX(t){return t.props[aX]}const jX=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Ype=1e-7,Zpe=12;function Kpe(t,e,n,i,r){let a,s,o=0;do s=e+(n-e)/2,a=jX(s,i,r)-t,a>0?n=s:e=s;while(Math.abs(a)>Ype&&++o<Zpe);return s}function Ib(t,e,n,i){if(t===e&&n===i)return Yo;const r=a=>Kpe(a,0,1,t,n);return a=>a===0||a===1?a:jX(r(a),e,i)}const NX=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,OX=t=>e=>1-t(1-e),DX=Ib(.33,1.53,.69,.99),fP=OX(DX),PX=NX(fP),IX=t=>(t*=2)<1?.5*fP(t):.5*(2-Math.pow(2,-10*(t-1))),hP=t=>1-Math.sin(Math.acos(t)),UX=OX(hP),LX=NX(hP),BX=t=>/^0[^.\s]+$/u.test(t);function Qpe(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||BX(t):!0}const Hy=t=>Math.round(t*1e5)/1e5,dP=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Jpe(t){return t==null}const eme=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,pP=(t,e)=>n=>!!(typeof n=="string"&&eme.test(n)&&n.startsWith(t)||e&&!Jpe(n)&&Object.prototype.hasOwnProperty.call(n,e)),zX=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,a,s,o]=i.match(dP);return{[t]:parseFloat(r),[e]:parseFloat(a),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},tme=t=>Nf(0,255,t),n5={...rv,transform:t=>Math.round(tme(t))},R0={test:pP("rgb","red"),parse:zX("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+n5.transform(t)+", "+n5.transform(e)+", "+n5.transform(n)+", "+Hy(T1.transform(i))+")"};function nme(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const oN={test:pP("#"),parse:nme,transform:R0.transform},tg={test:pP("hsl","hue"),parse:zX("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+xu.transform(Hy(e))+", "+xu.transform(Hy(n))+", "+Hy(T1.transform(i))+")"},_s={test:t=>R0.test(t)||oN.test(t)||tg.test(t),parse:t=>R0.test(t)?R0.parse(t):tg.test(t)?tg.parse(t):oN.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?R0.transform(t):tg.transform(t)},ime=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function rme(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(dP))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(ime))===null||n===void 0?void 0:n.length)||0)>0}const kX="number",FX="color",ame="var",sme="var(",F6="${}",ome=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function A1(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let a=0;const o=e.replace(ome,l=>(_s.test(l)?(i.color.push(a),r.push(FX),n.push(_s.parse(l))):l.startsWith(sme)?(i.var.push(a),r.push(ame),n.push(l)):(i.number.push(a),r.push(kX),n.push(parseFloat(l))),++a,F6)).split(F6);return{values:n,split:o,indexes:i,types:r}}function GX(t){return A1(t).values}function VX(t){const{split:e,types:n}=A1(t),i=e.length;return r=>{let a="";for(let s=0;s<i;s++)if(a+=e[s],r[s]!==void 0){const o=n[s];o===kX?a+=Hy(r[s]):o===FX?a+=_s.transform(r[s]):a+=r[s]}return a}}const lme=t=>typeof t=="number"?0:t;function cme(t){const e=GX(t);return VX(t)(e.map(lme))}const Jh={test:rme,parse:GX,createTransformer:VX,getAnimatableNone:cme},ume=new Set(["brightness","contrast","saturate","opacity"]);function fme(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(dP)||[];if(!i)return t;const r=n.replace(i,"");let a=ume.has(e)?1:0;return i!==n&&(a*=100),e+"("+a+r+")"}const hme=/\b([a-z-]*)\(.*?\)/gu,lN={...Jh,getAnimatableNone:t=>{const e=t.match(hme);return e?e.map(fme).join(" "):t}},dme={...QD,color:_s,backgroundColor:_s,outlineColor:_s,fill:_s,stroke:_s,borderColor:_s,borderTopColor:_s,borderRightColor:_s,borderBottomColor:_s,borderLeftColor:_s,filter:lN,WebkitFilter:lN},mP=t=>dme[t];function HX(t,e){let n=mP(t);return n!==lN&&(n=Jh),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const pme=new Set(["auto","none","0"]);function mme(t,e,n){let i=0,r;for(;i<t.length&&!r;){const a=t[i];typeof a=="string"&&!pme.has(a)&&A1(a).values.length&&(r=t[i]),i++}if(r&&n)for(const a of e)t[a]=HX(n,r)}const G6=t=>t===rv||t===Sn,V6=(t,e)=>parseFloat(t.split(", ")[e]),H6=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return V6(r[1],e);{const a=i.match(/^matrix\((.+)\)$/u);return a?V6(a[1],t):0}},gme=new Set(["x","y","z"]),vme=iv.filter(t=>!gme.has(t));function xme(t){const e=[];return vme.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const Ag={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:H6(4,13),y:H6(5,14)};Ag.translateX=Ag.x;Ag.translateY=Ag.y;const z0=new Set;let cN=!1,uN=!1;function qX(){if(uN){const t=Array.from(z0).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=xme(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([a,s])=>{var o;(o=i.getValue(a))===null||o===void 0||o.set(s)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}uN=!1,cN=!1,z0.forEach(t=>t.complete()),z0.clear()}function WX(){z0.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(uN=!0)})}function yme(){WX(),qX()}class gP{constructor(e,n,i,r,a,s=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=a,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(z0.add(this),cN||(cN=!0,hr.read(WX),hr.resolveKeyframes(qX))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const s=r==null?void 0:r.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(i&&n){const l=i.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),r&&s===void 0&&r.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),z0.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,z0.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const XX=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),bme=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Sme(t){const e=bme.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function $X(t,e,n=1){const[i,r]=Sme(t);if(!i)return;const a=window.getComputedStyle(e).getPropertyValue(i);if(a){const s=a.trim();return XX(s)?parseFloat(s):s}return KD(r)?$X(r,e,n+1):r}const YX=t=>e=>e.test(t),Mme={test:t=>t==="auto",parse:t=>t},ZX=[rv,Sn,xu,Uh,fpe,upe,Mme],q6=t=>ZX.find(YX(t));class KX extends gP{constructor(e,n,i,r,a){super(e,n,i,r,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),KD(u))){const h=$X(u,n.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!EX.has(i)||e.length!==2)return;const[r,a]=e,s=q6(r),o=q6(a);if(s!==o)if(G6(s)&&G6(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)Qpe(e[r])&&i.push(r);i.length&&mme(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ag[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const a=n.getValue(i);a&&a.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=Ag[i](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{n.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const W6=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Jh.test(t)||t==="0")&&!t.startsWith("url("));function _me(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Tme(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],s=W6(r,e),o=W6(a,e);return!s||!o?!1:_me(t)||(n==="spring"||aP(n))&&i}const wme=t=>t!==null;function HT(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(wme),a=e&&n!=="loop"&&e%2===1?0:r.length-1;return!a||i===void 0?r[a]:i}const Ame=40;class QX{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:a=0,repeatType:s="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=yu.now(),this.options={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:a,repeatType:s,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Ame?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&yme(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=yu.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:a,delay:s,onComplete:o,onUpdate:l,isGenerator:u}=this.options;if(!u&&!Tme(e,i,r,a))if(s)this.options.duration=0;else{l&&l(HT(e,this.options,n)),o&&o(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,n);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Or=(t,e,n)=>t+(e-t)*n;function i5(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Eme({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,a=0,s=0;if(!e)r=a=s=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;r=i5(l,o,t+1/3),a=i5(l,o,t),s=i5(l,o,t-1/3)}return{red:Math.round(r*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:i}}function e3(t,e){return n=>n>0?e:t}const r5=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},Cme=[oN,R0,tg],Rme=t=>Cme.find(e=>e.test(t));function X6(t){const e=Rme(t);if(!e)return!1;let n=e.parse(t);return e===tg&&(n=Eme(n)),n}const $6=(t,e)=>{const n=X6(t),i=X6(e);if(!n||!i)return e3(t,e);const r={...n};return a=>(r.red=r5(n.red,i.red,a),r.green=r5(n.green,i.green,a),r.blue=r5(n.blue,i.blue,a),r.alpha=Or(n.alpha,i.alpha,a),R0.transform(r))},jme=(t,e)=>n=>e(t(n)),Ub=(...t)=>t.reduce(jme),fN=new Set(["none","hidden"]);function Nme(t,e){return fN.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Ome(t,e){return n=>Or(t,e,n)}function vP(t){return typeof t=="number"?Ome:typeof t=="string"?KD(t)?e3:_s.test(t)?$6:Ime:Array.isArray(t)?JX:typeof t=="object"?_s.test(t)?$6:Dme:e3}function JX(t,e){const n=[...t],i=n.length,r=t.map((a,s)=>vP(a)(a,e[s]));return a=>{for(let s=0;s<i;s++)n[s]=r[s](a);return n}}function Dme(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=vP(t[r])(t[r],e[r]));return r=>{for(const a in i)n[a]=i[a](r);return n}}function Pme(t,e){var n;const i=[],r={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const s=e.types[a],o=t.indexes[s][r[s]],l=(n=t.values[o])!==null&&n!==void 0?n:0;i[a]=l,r[s]++}return i}const Ime=(t,e)=>{const n=Jh.createTransformer(e),i=A1(t),r=A1(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?fN.has(t)&&!r.values.length||fN.has(e)&&!i.values.length?Nme(t,e):Ub(JX(Pme(i,r),r.values),n):e3(t,e)};function e$(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Or(t,e,n):vP(t)(t,e)}const Ume=5;function t$(t,e,n){const i=Math.max(e-Ume,0);return CX(n-t(i),e-i)}const Gr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},a5=.001;function Lme({duration:t=Gr.duration,bounce:e=Gr.bounce,velocity:n=Gr.velocity,mass:i=Gr.mass}){let r,a,s=1-e;s=Nf(Gr.minDamping,Gr.maxDamping,s),t=Nf(Gr.minDuration,Gr.maxDuration,Cf(t)),s<1?(r=u=>{const h=u*s,p=h*t,g=h-n,x=hN(u,s),b=Math.exp(-p);return a5-g/x*b},a=u=>{const p=u*s*t,g=p*n+n,x=Math.pow(s,2)*Math.pow(u,2)*t,b=Math.exp(-p),M=hN(Math.pow(u,2),s);return(-r(u)+a5>0?-1:1)*((g-x)*b)/M}):(r=u=>{const h=Math.exp(-u*t),p=(u-n)*t+1;return-a5+h*p},a=u=>{const h=Math.exp(-u*t),p=(n-u)*(t*t);return h*p});const o=5/t,l=zme(r,a,o);if(t=Ef(t),isNaN(l))return{stiffness:Gr.stiffness,damping:Gr.damping,duration:t};{const u=Math.pow(l,2)*i;return{stiffness:u,damping:s*2*Math.sqrt(i*u),duration:t}}}const Bme=12;function zme(t,e,n){let i=n;for(let r=1;r<Bme;r++)i=i-t(i)/e(i);return i}function hN(t,e){return t*Math.sqrt(1-e*e)}const kme=["duration","bounce"],Fme=["stiffness","damping","mass"];function Y6(t,e){return e.some(n=>t[n]!==void 0)}function Gme(t){let e={velocity:Gr.velocity,stiffness:Gr.stiffness,damping:Gr.damping,mass:Gr.mass,isResolvedFromDuration:!1,...t};if(!Y6(t,Fme)&&Y6(t,kme))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,a=2*Nf(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:Gr.mass,stiffness:r,damping:a}}else{const n=Lme(t);e={...e,...n,mass:Gr.mass},e.isResolvedFromDuration=!0}return e}function n$(t=Gr.visualDuration,e=Gr.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const a=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:u,mass:h,duration:p,velocity:g,isResolvedFromDuration:x}=Gme({...n,velocity:-Cf(n.velocity||0)}),b=g||0,M=u/(2*Math.sqrt(l*h)),S=s-a,T=Cf(Math.sqrt(l/h)),A=Math.abs(S)<5;i||(i=A?Gr.restSpeed.granular:Gr.restSpeed.default),r||(r=A?Gr.restDelta.granular:Gr.restDelta.default);let E;if(M<1){const R=hN(T,M);E=C=>{const D=Math.exp(-M*T*C);return s-D*((b+M*T*S)/R*Math.sin(R*C)+S*Math.cos(R*C))}}else if(M===1)E=R=>s-Math.exp(-T*R)*(S+(b+T*S)*R);else{const R=T*Math.sqrt(M*M-1);E=C=>{const D=Math.exp(-M*T*C),U=Math.min(R*C,300);return s-D*((b+M*T*S)*Math.sinh(U)+R*S*Math.cosh(U))/R}}const j={calculatedDuration:x&&p||null,next:R=>{const C=E(R);if(x)o.done=R>=p;else{let D=0;M<1&&(D=R===0?Ef(b):t$(E,R,C));const U=Math.abs(D)<=i,I=Math.abs(s-C)<=r;o.done=U&&I}return o.value=o.done?s:C,o},toString:()=>{const R=Math.min(bX(j),rN),C=SX(D=>j.next(R*D).value,R,30);return R+"ms "+C}};return j}function Z6({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:l,restDelta:u=.5,restSpeed:h}){const p=t[0],g={done:!1,value:p},x=U=>o!==void 0&&U<o||l!==void 0&&U>l,b=U=>o===void 0?l:l===void 0||Math.abs(o-U)<Math.abs(l-U)?o:l;let M=n*e;const S=p+M,T=s===void 0?S:s(S);T!==S&&(M=T-p);const A=U=>-M*Math.exp(-U/i),E=U=>T+A(U),j=U=>{const I=A(U),L=E(U);g.done=Math.abs(I)<=u,g.value=g.done?T:L};let R,C;const D=U=>{x(g.value)&&(R=U,C=n$({keyframes:[g.value,b(g.value)],velocity:t$(E,U,g.value),damping:r,stiffness:a,restDelta:u,restSpeed:h}))};return D(0),{calculatedDuration:null,next:U=>{let I=!1;return!C&&R===void 0&&(I=!0,j(U),D(U)),R!==void 0&&U>=R?C.next(U-R):(!I&&j(U),g)}}}const Vme=Ib(.42,0,1,1),Hme=Ib(0,0,.58,1),i$=Ib(.42,0,.58,1),qme=t=>Array.isArray(t)&&typeof t[0]!="number",Wme={linear:Yo,easeIn:Vme,easeInOut:i$,easeOut:Hme,circIn:hP,circInOut:LX,circOut:UX,backIn:fP,backInOut:PX,backOut:DX,anticipate:IX},K6=t=>{if(sP(t)){eX(t.length===4);const[e,n,i,r]=t;return Ib(e,n,i,r)}else if(typeof t=="string")return Wme[t];return t};function Xme(t,e,n){const i=[],r=n||e$,a=t.length-1;for(let s=0;s<a;s++){let o=r(t[s],t[s+1]);if(e){const l=Array.isArray(e)?e[s]||Yo:e;o=Ub(l,o)}i.push(o)}return i}function $me(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const a=t.length;if(eX(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const s=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=Xme(e,i,r),l=o.length,u=h=>{if(s&&h<t[0])return e[0];let p=0;if(l>1)for(;p<t.length-2&&!(h<t[p+1]);p++);const g=Tg(t[p],t[p+1],h);return o[p](g)};return n?h=>u(Nf(t[0],t[a-1],h)):u}function Yme(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Tg(0,e,i);t.push(Or(n,1,r))}}function Zme(t){const e=[0];return Yme(e,t.length-1),e}function Kme(t,e){return t.map(n=>n*e)}function Qme(t,e){return t.map(()=>e||i$).splice(0,t.length-1)}function t3({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=qme(i)?i.map(K6):K6(i),a={done:!1,value:e[0]},s=Kme(n&&n.length===e.length?n:Zme(e),t),o=$me(s,e,{ease:Array.isArray(r)?r:Qme(e,r)});return{calculatedDuration:t,next:l=>(a.value=o(l),a.done=l>=t,a)}}const Jme=t=>{const e=({timestamp:n})=>t(n);return{start:()=>hr.update(e,!0),stop:()=>Qh(e),now:()=>rs.isProcessing?rs.timestamp:yu.now()}},ege={decay:Z6,inertia:Z6,tween:t3,keyframes:t3,spring:n$},tge=t=>t/100;class xP extends QX{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:i,element:r,keyframes:a}=this.options,s=(r==null?void 0:r.KeyframeResolver)||gP,o=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new s(a,o,n,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:a,velocity:s=0}=this.options,o=aP(n)?n:ege[n]||t3;let l,u;o!==t3&&typeof e[0]!="number"&&(l=Ub(tge,e$(e[0],e[1])),e=[0,100]);const h=o({...this.options,keyframes:e});a==="mirror"&&(u=o({...this.options,keyframes:[...e].reverse(),velocity:-s})),h.calculatedDuration===null&&(h.calculatedDuration=bX(h));const{calculatedDuration:p}=h,g=p+r,x=g*(i+1)-r;return{generator:h,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:p,resolvedDuration:g,totalDuration:x}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:U}=this.options;return{done:!0,value:U[U.length-1]}}const{finalKeyframe:r,generator:a,mirroredGenerator:s,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:u,totalDuration:h,resolvedDuration:p}=i;if(this.startTime===null)return a.next(0);const{delay:g,repeat:x,repeatType:b,repeatDelay:M,onUpdate:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const T=this.currentTime-g*(this.speed>=0?1:-1),A=this.speed>=0?T<0:T>h;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let E=this.currentTime,j=a;if(x){const U=Math.min(this.currentTime,h)/p;let I=Math.floor(U),L=U%1;!L&&U>=1&&(L=1),L===1&&I--,I=Math.min(I,x+1),!!(I%2)&&(b==="reverse"?(L=1-L,M&&(L-=M/p)):b==="mirror"&&(j=s)),E=Nf(0,1,L)*p}const R=A?{done:!1,value:l[0]}:j.next(E);o&&(R.value=o(R.value));let{done:C}=R;!A&&u!==null&&(C=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return D&&r!==void 0&&(R.value=HT(l,this.options,r)),S&&S(R.value),D&&this.finish(),R}get duration(){const{resolved:e}=this;return e?Cf(e.calculatedDuration):0}get time(){return Cf(this.currentTime)}set time(e){e=Ef(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Cf(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Jme,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const nge=new Set(["opacity","clipPath","filter","transform"]);function ige(t,e,n,{delay:i=0,duration:r=300,repeat:a=0,repeatType:s="loop",ease:o="easeInOut",times:l}={}){const u={[e]:n};l&&(u.offset=l);const h=_X(o,r);return Array.isArray(h)&&(u.easing=h),t.animate(u,{delay:i,duration:r,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"})}const rge=HD(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),n3=10,age=2e4;function sge(t){return aP(t.type)||t.type==="spring"||!MX(t.ease)}function oge(t,e){const n=new xP({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const r=[];let a=0;for(;!i.done&&a<age;)i=n.sample(a),r.push(i.value),a+=n3;return{times:void 0,keyframes:r,duration:a-n3,ease:"linear"}}const r$={anticipate:IX,backInOut:PX,circInOut:LX};function lge(t){return t in r$}class Q6 extends QX{constructor(e){super(e);const{name:n,motionValue:i,element:r,keyframes:a}=this.options;this.resolver=new KX(a,(s,o)=>this.onKeyframesResolved(s,o),n,i,r),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:i=300,times:r,ease:a,type:s,motionValue:o,name:l,startTime:u}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof a=="string"&&J_()&&lge(a)&&(a=r$[a]),sge(this.options)){const{onComplete:p,onUpdate:g,motionValue:x,element:b,...M}=this.options,S=oge(e,M);e=S.keyframes,e.length===1&&(e[1]=e[0]),i=S.duration,r=S.times,a=S.ease,s="keyframes"}const h=ige(o.owner.current,l,e,{...this.options,duration:i,times:r,ease:a});return h.startTime=u??this.calcStartTime(),this.pendingTimeline?(U6(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:p}=this.options;o.set(HT(e,this.options,n)),p&&p(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:i,times:r,type:s,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Cf(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Cf(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=Ef(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Yo;const{animation:i}=n;U6(i,e)}return Yo}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:r,type:a,ease:s,times:o}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:h,onComplete:p,element:g,...x}=this.options,b=new xP({...x,keyframes:i,duration:r,type:a,ease:s,times:o,isGenerator:!0}),M=Ef(this.time);u.setWithVelocity(b.sample(M-n3).value,b.sample(M).value,n3)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:r,repeatType:a,damping:s,type:o}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=n.owner.getProps();return rge()&&i&&nge.has(i)&&!l&&!u&&!r&&a!=="mirror"&&s!==0&&o!=="inertia"}}const cge={type:"spring",stiffness:500,damping:25,restSpeed:10},uge=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),fge={type:"keyframes",duration:.8},hge={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},dge=(t,{keyframes:e})=>e.length>2?fge:lp.has(t)?t.startsWith("scale")?uge(e[1]):cge:hge;function pge({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:a,repeatType:s,repeatDelay:o,from:l,elapsed:u,...h}){return!!Object.keys(h).length}const yP=(t,e,n,i={},r,a)=>s=>{const o=rP(i,t)||{},l=o.delay||i.delay||0;let{elapsed:u=0}=i;u=u-Ef(l);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:g=>{e.set(g),o.onUpdate&&o.onUpdate(g)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:a?void 0:r};pge(o)||(h={...h,...dge(t,h)}),h.duration&&(h.duration=Ef(h.duration)),h.repeatDelay&&(h.repeatDelay=Ef(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(p=!0)),p&&!a&&e.get()!==void 0){const g=HT(h.keyframes,o);if(g!==void 0)return hr.update(()=>{h.onUpdate(g),h.onComplete()}),new Dpe([])}return!a&&Q6.supports(h)?new Q6(h):new xP(h)};function mge({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function a$(t,e,{delay:n=0,transitionOverride:i,type:r}={}){var a;let{transition:s=t.getDefaultTransition(),transitionEnd:o,...l}=e;i&&(s=i);const u=[],h=r&&t.animationState&&t.animationState.getState()[r];for(const p in l){const g=t.getValue(p,(a=t.latestValues[p])!==null&&a!==void 0?a:null),x=l[p];if(x===void 0||h&&mge(h,p))continue;const b={delay:n,...rP(s||{},p)};let M=!1;if(window.MotionHandoffAnimation){const T=RX(t);if(T){const A=window.MotionHandoffAnimation(T,p,hr);A!==null&&(b.startTime=A,M=!0)}}sN(t,p),g.start(yP(p,g,x,t.shouldReduceMotion&&EX.has(p)?{type:!1}:b,t,M));const S=g.animation;S&&u.push(S)}return o&&Promise.all(u).then(()=>{hr.update(()=>{o&&Xpe(t,o)})}),u}function dN(t,e,n={}){var i;const r=VT(t,e,n.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(a=n.transitionOverride);const s=r?()=>Promise.all(a$(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:p,staggerDirection:g}=a;return gge(t,e,h+u,p,g,n)}:()=>Promise.resolve(),{when:l}=a;if(l){const[u,h]=l==="beforeChildren"?[s,o]:[o,s];return u().then(()=>h())}else return Promise.all([s(),o(n.delay)])}function gge(t,e,n=0,i=0,r=1,a){const s=[],o=(t.variantChildren.size-1)*i,l=r===1?(u=0)=>u*i:(u=0)=>o-u*i;return Array.from(t.variantChildren).sort(vge).forEach((u,h)=>{u.notify("AnimationStart",e),s.push(dN(u,e,{...a,delay:n+l(h)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(s)}function vge(t,e){return t.sortNodePosition(e)}function xge(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(a=>dN(t,a,n));i=Promise.all(r)}else if(typeof e=="string")i=dN(t,e,n);else{const r=typeof e=="function"?VT(t,e,n.custom):e;i=Promise.all(a$(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}const yge=WD.length;function s$(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?s$(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<yge;n++){const i=WD[n],r=t.props[i];(_1(r)||r===!1)&&(e[i]=r)}return e}const bge=[...qD].reverse(),Sge=qD.length;function Mge(t){return e=>Promise.all(e.map(({animation:n,options:i})=>xge(t,n,i)))}function _ge(t){let e=Mge(t),n=J6(),i=!0;const r=l=>(u,h)=>{var p;const g=VT(t,h,l==="exit"?(p=t.presenceContext)===null||p===void 0?void 0:p.custom:void 0);if(g){const{transition:x,transitionEnd:b,...M}=g;u={...u,...M,...b}}return u};function a(l){e=l(t)}function s(l){const{props:u}=t,h=s$(t.parent)||{},p=[],g=new Set;let x={},b=1/0;for(let S=0;S<Sge;S++){const T=bge[S],A=n[T],E=u[T]!==void 0?u[T]:h[T],j=_1(E),R=T===l?A.isActive:null;R===!1&&(b=S);let C=E===h[T]&&E!==u[T]&&j;if(C&&i&&t.manuallyAnimateOnMount&&(C=!1),A.protectedKeys={...x},!A.isActive&&R===null||!E&&!A.prevProp||FT(E)||typeof E=="boolean")continue;const D=Tge(A.prevProp,E);let U=D||T===l&&A.isActive&&!C&&j||S>b&&j,I=!1;const L=Array.isArray(E)?E:[E];let F=L.reduce(r(T),{});R===!1&&(F={});const{prevResolvedValues:G={}}=A,H={...G,...F},W=$=>{U=!0,g.has($)&&(I=!0,g.delete($)),A.needsAnimating[$]=!0;const ee=t.getValue($);ee&&(ee.liveStyle=!1)};for(const $ in H){const ee=F[$],te=G[$];if(x.hasOwnProperty($))continue;let ae=!1;iN(ee)&&iN(te)?ae=!yX(ee,te):ae=ee!==te,ae?ee!=null?W($):g.add($):ee!==void 0&&g.has($)?W($):A.protectedKeys[$]=!0}A.prevProp=E,A.prevResolvedValues=F,A.isActive&&(x={...x,...F}),i&&t.blockInitialAnimation&&(U=!1),U&&(!(C&&D)||I)&&p.push(...L.map($=>({animation:$,options:{type:T}})))}if(g.size){const S={};g.forEach(T=>{const A=t.getBaseTarget(T),E=t.getValue(T);E&&(E.liveStyle=!0),S[T]=A??null}),p.push({animation:S})}let M=!!p.length;return i&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(M=!1),i=!1,M?e(p):Promise.resolve()}function o(l,u){var h;if(n[l].isActive===u)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(g=>{var x;return(x=g.animationState)===null||x===void 0?void 0:x.setActive(l,u)}),n[l].isActive=u;const p=s(l);for(const g in n)n[g].protectedKeys={};return p}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=J6(),i=!0}}}function Tge(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!yX(e,t):!1}function h0(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function J6(){return{animate:h0(!0),whileInView:h0(),whileHover:h0(),whileTap:h0(),whileDrag:h0(),whileFocus:h0(),exit:h0()}}class id{constructor(e){this.isMounted=!1,this.node=e}update(){}}class wge extends id{constructor(e){super(e),e.animationState||(e.animationState=_ge(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();FT(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Age=0;class Ege extends id{constructor(){super(...arguments),this.id=Age++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Cge={animation:{Feature:wge},exit:{Feature:Ege}};function E1(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function Lb(t){return{point:{x:t.pageX,y:t.pageY}}}const Rge=t=>e=>oP(e)&&t(e,Lb(e));function qy(t,e,n,i){return E1(t,e,Rge(n),i)}const eB=(t,e)=>Math.abs(t-e);function jge(t,e){const n=eB(t.x,e.x),i=eB(t.y,e.y);return Math.sqrt(n**2+i**2)}class o${constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=o5(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,x=jge(p.offset,{x:0,y:0})>=3;if(!g&&!x)return;const{point:b}=p,{timestamp:M}=rs;this.history.push({...b,timestamp:M});const{onStart:S,onMove:T}=this.handlers;g||(S&&S(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,p)},this.handlePointerMove=(p,g)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=s5(g,this.transformPagePoint),hr.update(this.updatePoint,!0)},this.handlePointerUp=(p,g)=>{this.end();const{onEnd:x,onSessionEnd:b,resumeAnimation:M}=this.handlers;if(this.dragSnapToOrigin&&M&&M(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=o5(p.type==="pointercancel"?this.lastMoveEventInfo:s5(g,this.transformPagePoint),this.history);this.startEvent&&x&&x(p,S),b&&b(p,S)},!oP(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const s=Lb(e),o=s5(s,this.transformPagePoint),{point:l}=o,{timestamp:u}=rs;this.history=[{...l,timestamp:u}];const{onSessionStart:h}=n;h&&h(e,o5(o,this.history)),this.removeListeners=Ub(qy(this.contextWindow,"pointermove",this.handlePointerMove),qy(this.contextWindow,"pointerup",this.handlePointerUp),qy(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Qh(this.updatePoint)}}function s5(t,e){return e?{point:e(t.point)}:t}function tB(t,e){return{x:t.x-e.x,y:t.y-e.y}}function o5({point:t},e){return{point:t,delta:tB(t,l$(e)),offset:tB(t,Nge(e)),velocity:Oge(e,.1)}}function Nge(t){return t[0]}function l$(t){return t[t.length-1]}function Oge(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=l$(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>Ef(e)));)n--;if(!i)return{x:0,y:0};const a=Cf(r.timestamp-i.timestamp);if(a===0)return{x:0,y:0};const s={x:(r.x-i.x)/a,y:(r.y-i.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}const c$=1e-4,Dge=1-c$,Pge=1+c$,u$=.01,Ige=0-u$,Uge=0+u$;function Jo(t){return t.max-t.min}function Lge(t,e,n){return Math.abs(t-e)<=n}function nB(t,e,n,i=.5){t.origin=i,t.originPoint=Or(e.min,e.max,t.origin),t.scale=Jo(n)/Jo(e),t.translate=Or(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Dge&&t.scale<=Pge||isNaN(t.scale))&&(t.scale=1),(t.translate>=Ige&&t.translate<=Uge||isNaN(t.translate))&&(t.translate=0)}function Wy(t,e,n,i){nB(t.x,e.x,n.x,i?i.originX:void 0),nB(t.y,e.y,n.y,i?i.originY:void 0)}function iB(t,e,n){t.min=n.min+e.min,t.max=t.min+Jo(e)}function Bge(t,e,n){iB(t.x,e.x,n.x),iB(t.y,e.y,n.y)}function rB(t,e,n){t.min=e.min-n.min,t.max=t.min+Jo(e)}function Xy(t,e,n){rB(t.x,e.x,n.x),rB(t.y,e.y,n.y)}function zge(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?Or(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?Or(n,t,i.max):Math.min(t,n)),t}function aB(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function kge(t,{top:e,left:n,bottom:i,right:r}){return{x:aB(t.x,n,r),y:aB(t.y,e,i)}}function sB(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function Fge(t,e){return{x:sB(t.x,e.x),y:sB(t.y,e.y)}}function Gge(t,e){let n=.5;const i=Jo(t),r=Jo(e);return r>i?n=Tg(e.min,e.max-i,t.min):i>r&&(n=Tg(t.min,t.max-r,e.min)),Nf(0,1,n)}function Vge(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const pN=.35;function Hge(t=pN){return t===!1?t=0:t===!0&&(t=pN),{x:oB(t,"left","right"),y:oB(t,"top","bottom")}}function oB(t,e,n){return{min:lB(t,e),max:lB(t,n)}}function lB(t,e){return typeof t=="number"?t:t[e]||0}const cB=()=>({translate:0,scale:1,origin:0,originPoint:0}),ng=()=>({x:cB(),y:cB()}),uB=()=>({min:0,max:0}),Qr=()=>({x:uB(),y:uB()});function Cl(t){return[t("x"),t("y")]}function f$({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function qge({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Wge(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function l5(t){return t===void 0||t===1}function mN({scale:t,scaleX:e,scaleY:n}){return!l5(t)||!l5(e)||!l5(n)}function x0(t){return mN(t)||h$(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function h$(t){return fB(t.x)||fB(t.y)}function fB(t){return t&&t!=="0%"}function i3(t,e,n){const i=t-n,r=e*i;return n+r}function hB(t,e,n,i,r){return r!==void 0&&(t=i3(t,r,i)),i3(t,n,i)+e}function gN(t,e=0,n=1,i,r){t.min=hB(t.min,e,n,i,r),t.max=hB(t.max,e,n,i,r)}function d$(t,{x:e,y:n}){gN(t.x,e.translate,e.scale,e.originPoint),gN(t.y,n.translate,n.scale,n.originPoint)}const dB=.999999999999,pB=1.0000000000001;function Xge(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let a,s;for(let o=0;o<r;o++){a=n[o],s=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&a.options.layoutScroll&&a.scroll&&a!==a.root&&rg(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,d$(t,s)),i&&x0(a.latestValues)&&rg(t,a.latestValues))}e.x<pB&&e.x>dB&&(e.x=1),e.y<pB&&e.y>dB&&(e.y=1)}function ig(t,e){t.min=t.min+e,t.max=t.max+e}function mB(t,e,n,i,r=.5){const a=Or(t.min,t.max,r);gN(t,e,n,a,i)}function rg(t,e){mB(t.x,e.x,e.scaleX,e.scale,e.originX),mB(t.y,e.y,e.scaleY,e.scale,e.originY)}function p$(t,e){return f$(Wge(t.getBoundingClientRect(),e))}function $ge(t,e,n){const i=p$(t,n),{scroll:r}=e;return r&&(ig(i.x,r.offset.x),ig(i.y,r.offset.y)),i}const m$=({current:t})=>t?t.ownerDocument.defaultView:null,Yge=new WeakMap;class Zge{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Qr(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=h=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Lb(h).point)},a=(h,p)=>{const{drag:g,dragPropagation:x,onDragStart:b}=this.getProps();if(g&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Gpe(g),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Cl(S=>{let T=this.getAxisMotionValue(S).get()||0;if(xu.test(T)){const{projection:A}=this.visualElement;if(A&&A.layout){const E=A.layout.layoutBox[S];E&&(T=Jo(E)*(parseFloat(T)/100))}}this.originPoint[S]=T}),b&&hr.postRender(()=>b(h,p)),sN(this.visualElement,"transform");const{animationState:M}=this.visualElement;M&&M.setActive("whileDrag",!0)},s=(h,p)=>{const{dragPropagation:g,dragDirectionLock:x,onDirectionLock:b,onDrag:M}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:S}=p;if(x&&this.currentDirection===null){this.currentDirection=Kge(S),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",p.point,S),this.updateAxis("y",p.point,S),this.visualElement.render(),M&&M(h,p)},o=(h,p)=>this.stop(h,p),l=()=>Cl(h=>{var p;return this.getAnimationState(h)==="paused"&&((p=this.getAxisMotionValue(h).animation)===null||p===void 0?void 0:p.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new o$(e,{onSessionStart:r,onStart:a,onMove:s,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:m$(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:a}=this.getProps();a&&hr.postRender(()=>a(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!TM(e,r,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(s=zge(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;n&&eg(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=kge(r.layoutBox,n):this.constraints=!1,this.elastic=Hge(i),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Cl(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=Vge(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!eg(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const a=$ge(i,r.root,this.visualElement.getTransformPagePoint());let s=Fge(r.layout.layoutBox,a);if(n){const o=n(qge(s));this.hasMutatedConstraints=!!o,o&&(s=f$(o))}return s}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=Cl(h=>{if(!TM(h,n,this.currentDirection))return;let p=l&&l[h]||{};s&&(p={min:0,max:0});const g=r?200:1e6,x=r?40:1e7,b={type:"inertia",velocity:i?e[h]:0,bounceStiffness:g,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...a,...p};return this.startAxisValueAnimation(h,b)});return Promise.all(u).then(o)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return sN(this.visualElement,e),i.start(yP(e,i,0,n,this.visualElement,!1))}stopAnimation(){Cl(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Cl(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Cl(n=>{const{drag:i}=this.getProps();if(!TM(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,a=this.getAxisMotionValue(n);if(r&&r.layout){const{min:s,max:o}=r.layout.layoutBox[n];a.set(e[n]-Or(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!eg(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Cl(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const l=o.get();r[s]=Gge({min:l,max:l},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Cl(s=>{if(!TM(s,e,null))return;const o=this.getAxisMotionValue(s),{min:l,max:u}=this.constraints[s];o.set(Or(l,u,r[s]))})}addListeners(){if(!this.visualElement.current)return;Yge.set(this.visualElement,this);const e=this.visualElement.current,n=qy(e,"pointerdown",l=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();eg(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,a=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),hr.read(i);const s=E1(window,"resize",()=>this.scalePositionWithinConstraints()),o=r.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Cl(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=l[h].translate,p.set(p.get()+l[h].translate))}),this.visualElement.render())}));return()=>{s(),n(),a(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:a=!1,dragElastic:s=pN,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function TM(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Kge(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Qge extends id{constructor(e){super(e),this.removeGroupControls=Yo,this.removeListeners=Yo,this.controls=new Zge(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Yo}unmount(){this.removeGroupControls(),this.removeListeners()}}const gB=t=>(e,n)=>{t&&hr.postRender(()=>t(e,n))};class Jge extends id{constructor(){super(...arguments),this.removePointerDownListener=Yo}onPointerDown(e){this.session=new o$(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:m$(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:gB(e),onStart:gB(n),onMove:i,onEnd:(a,s)=>{delete this.session,r&&hr.postRender(()=>r(a,s))}}}mount(){this.removePointerDownListener=qy(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const e_={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function vB(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const uy={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Sn.test(t))t=parseFloat(t);else return t;const n=vB(t,e.target.x),i=vB(t,e.target.y);return`${n}% ${i}%`}},eve={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=Jh.parse(t);if(r.length>5)return i;const a=Jh.createTransformer(t),s=typeof r[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;r[0+s]/=o,r[1+s]/=l;const u=Or(o,l,.5);return typeof r[2+s]=="number"&&(r[2+s]/=u),typeof r[3+s]=="number"&&(r[3+s]/=u),a(r)}};class tve extends z.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:a}=e;Spe(nve),a&&(n.group&&n.group.add(a),i&&i.register&&r&&i.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),e_.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:a}=this.props,s=i.projection;return s&&(s.isPresent=a,r||e.layoutDependency!==n||n===void 0?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||hr.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),$D.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function g$(t){const[e,n]=QW(),i=z.useContext(kD);return c.jsx(tve,{...t,layoutGroup:i,switchLayoutGroup:z.useContext(sX),isPresent:e,safeToRemove:n})}const nve={borderRadius:{...uy,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:uy,borderTopRightRadius:uy,borderBottomLeftRadius:uy,borderBottomRightRadius:uy,boxShadow:eve};function ive(t,e,n){const i=As(t)?t:w1(t);return i.start(yP("",i,e,n)),i.animation}function rve(t){return t instanceof SVGElement&&t.tagName!=="svg"}const ave=(t,e)=>t.depth-e.depth;class sve{constructor(){this.children=[],this.isDirty=!1}add(e){lP(this.children,e),this.isDirty=!0}remove(e){cP(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(ave),this.isDirty=!1,this.children.forEach(e)}}function ove(t,e){const n=yu.now(),i=({timestamp:r})=>{const a=r-n;a>=e&&(Qh(i),t(a-e))};return hr.read(i,!0),()=>Qh(i)}const v$=["TopLeft","TopRight","BottomLeft","BottomRight"],lve=v$.length,xB=t=>typeof t=="string"?parseFloat(t):t,yB=t=>typeof t=="number"||Sn.test(t);function cve(t,e,n,i,r,a){r?(t.opacity=Or(0,n.opacity!==void 0?n.opacity:1,uve(i)),t.opacityExit=Or(e.opacity!==void 0?e.opacity:1,0,fve(i))):a&&(t.opacity=Or(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let s=0;s<lve;s++){const o=`border${v$[s]}Radius`;let l=bB(e,o),u=bB(n,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||yB(l)===yB(u)?(t[o]=Math.max(Or(xB(l),xB(u),i),0),(xu.test(u)||xu.test(l))&&(t[o]+="%")):t[o]=u}(e.rotate||n.rotate)&&(t.rotate=Or(e.rotate||0,n.rotate||0,i))}function bB(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const uve=x$(0,.5,UX),fve=x$(.5,.95,Yo);function x$(t,e,n){return i=>i<t?0:i>e?1:n(Tg(t,e,i))}function SB(t,e){t.min=e.min,t.max=e.max}function _l(t,e){SB(t.x,e.x),SB(t.y,e.y)}function MB(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function _B(t,e,n,i,r){return t-=e,t=i3(t,1/n,i),r!==void 0&&(t=i3(t,1/r,i)),t}function hve(t,e=0,n=1,i=.5,r,a=t,s=t){if(xu.test(e)&&(e=parseFloat(e),e=Or(s.min,s.max,e/100)-s.min),typeof e!="number")return;let o=Or(a.min,a.max,i);t===a&&(o-=e),t.min=_B(t.min,e,n,o,r),t.max=_B(t.max,e,n,o,r)}function TB(t,e,[n,i,r],a,s){hve(t,e[n],e[i],e[r],e.scale,a,s)}const dve=["x","scaleX","originX"],pve=["y","scaleY","originY"];function wB(t,e,n,i){TB(t.x,e,dve,n?n.x:void 0,i?i.x:void 0),TB(t.y,e,pve,n?n.y:void 0,i?i.y:void 0)}function AB(t){return t.translate===0&&t.scale===1}function y$(t){return AB(t.x)&&AB(t.y)}function EB(t,e){return t.min===e.min&&t.max===e.max}function mve(t,e){return EB(t.x,e.x)&&EB(t.y,e.y)}function CB(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function b$(t,e){return CB(t.x,e.x)&&CB(t.y,e.y)}function RB(t){return Jo(t.x)/Jo(t.y)}function jB(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class gve{constructor(){this.members=[]}add(e){lP(this.members,e),e.scheduleRender()}remove(e){if(cP(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const a=this.members[r];if(a.isPresent!==!1){i=a;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function vve(t,e,n){let i="";const r=t.x.translate/e.x,a=t.y.translate/e.y,s=(n==null?void 0:n.z)||0;if((r||a||s)&&(i=`translate3d(${r}px, ${a}px, ${s}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:h,rotateX:p,rotateY:g,skewX:x,skewY:b}=n;u&&(i=`perspective(${u}px) ${i}`),h&&(i+=`rotate(${h}deg) `),p&&(i+=`rotateX(${p}deg) `),g&&(i+=`rotateY(${g}deg) `),x&&(i+=`skewX(${x}deg) `),b&&(i+=`skewY(${b}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(i+=`scale(${o}, ${l})`),i||"none"}const y0={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Ey=typeof window<"u"&&window.MotionDebug!==void 0,c5=["","X","Y","Z"],xve={visibility:"hidden"},NB=1e3;let yve=0;function u5(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function S$(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=RX(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",hr,!(r||a))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&S$(i)}function M$({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(s={},o=e==null?void 0:e()){this.id=yve++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ey&&(y0.totalNodes=y0.resolvedTargetDeltas=y0.recalculatedProjection=0),this.nodes.forEach(Mve),this.nodes.forEach(Eve),this.nodes.forEach(Cve),this.nodes.forEach(_ve),Ey&&window.MotionDebug.record(y0)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new sve)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new uP),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const l=this.eventHandlers.get(s);l&&l.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=rve(s),this.instance=s;const{layoutId:l,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||l)&&(this.isLayoutDirty=!0),t){let p;const g=()=>this.root.updateBlockedByResize=!1;t(s,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=ove(g,250),e_.hasAnimatedSinceResize&&(e_.hasAnimatedSinceResize=!1,this.nodes.forEach(DB))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||u)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:g,hasRelativeTargetChanged:x,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const M=this.options.transition||h.getDefaultTransition()||Dve,{onLayoutAnimationStart:S,onLayoutAnimationComplete:T}=h.getProps(),A=!this.targetLayout||!b$(this.targetLayout,b)||x,E=!g&&x;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||E||g&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(p,E);const j={...rP(M,"layout"),onPlay:S,onComplete:T};(h.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j)}else g||DB(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Qh(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Rve),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&S$(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(OB);return}this.isUpdating||this.nodes.forEach(wve),this.isUpdating=!1,this.nodes.forEach(Ave),this.nodes.forEach(bve),this.nodes.forEach(Sve),this.clearAllSnapshots();const o=yu.now();rs.delta=Nf(0,1e3/60,o-rs.timestamp),rs.timestamp=o,rs.isProcessing=!0,e5.update.process(rs),e5.preRender.process(rs),e5.render.process(rs),rs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,$D.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Tve),this.sharedNodes.forEach(jve)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,hr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){hr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Qr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!y$(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;s&&(o||x0(this.latestValues)||h)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return s&&(l=this.removeTransform(l)),Pve(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var s;const{visualElement:o}=this.options;if(!o)return Qr();const l=o.measureViewportBox();if(!(((s=this.scroll)===null||s===void 0?void 0:s.wasRoot)||this.path.some(Ive))){const{scroll:h}=this.root;h&&(ig(l.x,h.offset.x),ig(l.y,h.offset.y))}return l}removeElementScroll(s){var o;const l=Qr();if(_l(l,s),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:p,options:g}=h;h!==this.root&&p&&g.layoutScroll&&(p.wasRoot&&_l(l,s),ig(l.x,p.offset.x),ig(l.y,p.offset.y))}return l}applyTransform(s,o=!1){const l=Qr();_l(l,s);for(let u=0;u<this.path.length;u++){const h=this.path[u];!o&&h.options.layoutScroll&&h.scroll&&h!==h.root&&rg(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),x0(h.latestValues)&&rg(l,h.latestValues)}return x0(this.latestValues)&&rg(l,this.latestValues),l}removeTransform(s){const o=Qr();_l(o,s);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!x0(u.latestValues))continue;mN(u.latestValues)&&u.updateSnapshot();const h=Qr(),p=u.measurePageBox();_l(h,p),wB(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return x0(this.latestValues)&&wB(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==rs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(s||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:g}=this.options;if(!(!this.layout||!(p||g))){if(this.resolvedRelativeTargetAt=rs.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Qr(),this.relativeTargetOrigin=Qr(),Xy(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),_l(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Qr(),this.targetWithTransforms=Qr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Bge(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):_l(this.target,this.layout.layoutBox),d$(this.target,this.targetDelta)):_l(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Qr(),this.relativeTargetOrigin=Qr(),Xy(this.relativeTargetOrigin,this.target,x.target),_l(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ey&&y0.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||mN(this.parent.latestValues)||h$(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===rs.timestamp&&(u=!1),u)return;const{layout:h,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||p))return;_l(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,x=this.treeScale.y;Xge(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Qr());const{target:b}=o;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(MB(this.prevProjectionDelta.x,this.projectionDelta.x),MB(this.prevProjectionDelta.y,this.projectionDelta.y)),Wy(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==x||!jB(this.projectionDelta.x,this.prevProjectionDelta.x)||!jB(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b)),Ey&&y0.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),s){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ng(),this.projectionDelta=ng(),this.projectionDeltaWithTransform=ng()}setAnimationOrigin(s,o=!1){const l=this.snapshot,u=l?l.latestValues:{},h={...this.latestValues},p=ng();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const g=Qr(),x=l?l.source:void 0,b=this.layout?this.layout.source:void 0,M=x!==b,S=this.getStack(),T=!S||S.members.length<=1,A=!!(M&&!T&&this.options.crossfade===!0&&!this.path.some(Ove));this.animationProgress=0;let E;this.mixTargetDelta=j=>{const R=j/1e3;PB(p.x,s.x,R),PB(p.y,s.y,R),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Xy(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Nve(this.relativeTarget,this.relativeTargetOrigin,g,R),E&&mve(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=Qr()),_l(E,this.relativeTarget)),M&&(this.animationValues=h,cve(h,u,this.latestValues,R,A,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Qh(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=hr.update(()=>{e_.hasAnimatedSinceResize=!0,this.currentAnimation=ive(0,NB,{...s,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(NB),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:h}=s;if(!(!o||!l||!u)){if(this!==s&&this.layout&&u&&_$(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Qr();const p=Jo(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+p;const g=Jo(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+g}_l(o,l),rg(o,h),Wy(this.projectionDeltaWithTransform,this.layoutCorrected,o,h)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new gve),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:o}=this.options;return o?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:o}=this.options;return o?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:l}=s;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&u5("z",s,u,this.animationValues);for(let h=0;h<c5.length;h++)u5(`rotate${c5[h]}`,s,u,this.animationValues),u5(`skew${c5[h]}`,s,u,this.animationValues);s.render();for(const h in u)s.setStaticValue(h,u[h]),this.animationValues&&(this.animationValues[h]=u[h]);s.scheduleRender()}getProjectionStyles(s){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return xve;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=QM(s==null?void 0:s.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const M={};return this.options.layoutId&&(M.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,M.pointerEvents=QM(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!x0(this.latestValues)&&(M.transform=h?h({},""):"none",this.hasProjected=!1),M}const g=p.animationValues||p.latestValues;this.applyTransformsToTarget(),u.transform=vve(this.projectionDeltaWithTransform,this.treeScale,g),h&&(u.transform=h(g,u.transform));const{x,y:b}=this.projectionDelta;u.transformOrigin=`${x.origin*100}% ${b.origin*100}% 0`,p.animationValues?u.opacity=p===this?(l=(o=g.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:u.opacity=p===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const M in Q_){if(g[M]===void 0)continue;const{correct:S,applyTo:T}=Q_[M],A=u.transform==="none"?g[M]:S(g[M],p);if(T){const E=T.length;for(let j=0;j<E;j++)u[T[j]]=A}else u[M]=A}return this.options.layoutId&&(u.pointerEvents=p===this?QM(s==null?void 0:s.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(OB),this.root.sharedNodes.clear()}}}function bve(t){t.updateLayout()}function Sve(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:a}=t.options,s=n.source!==t.layout.source;a==="size"?Cl(p=>{const g=s?n.measuredBox[p]:n.layoutBox[p],x=Jo(g);g.min=i[p].min,g.max=g.min+x}):_$(a,n.layoutBox,i)&&Cl(p=>{const g=s?n.measuredBox[p]:n.layoutBox[p],x=Jo(i[p]);g.max=g.min+x,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+x)});const o=ng();Wy(o,i,n.layoutBox);const l=ng();s?Wy(l,t.applyTransform(r,!0),n.measuredBox):Wy(l,i,n.layoutBox);const u=!y$(o);let h=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:g,layout:x}=p;if(g&&x){const b=Qr();Xy(b,n.layoutBox,g.layoutBox);const M=Qr();Xy(M,i,x.layoutBox),b$(b,M)||(h=!0),p.options.layoutRoot&&(t.relativeTarget=M,t.relativeTargetOrigin=b,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function Mve(t){Ey&&y0.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function _ve(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Tve(t){t.clearSnapshot()}function OB(t){t.clearMeasurements()}function wve(t){t.isLayoutDirty=!1}function Ave(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function DB(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Eve(t){t.resolveTargetDelta()}function Cve(t){t.calcProjection()}function Rve(t){t.resetSkewAndRotation()}function jve(t){t.removeLeadSnapshot()}function PB(t,e,n){t.translate=Or(e.translate,0,n),t.scale=Or(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function IB(t,e,n,i){t.min=Or(e.min,n.min,i),t.max=Or(e.max,n.max,i)}function Nve(t,e,n,i){IB(t.x,e.x,n.x,i),IB(t.y,e.y,n.y,i)}function Ove(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Dve={duration:.45,ease:[.4,0,.1,1]},UB=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),LB=UB("applewebkit/")&&!UB("chrome/")?Math.round:Yo;function BB(t){t.min=LB(t.min),t.max=LB(t.max)}function Pve(t){BB(t.x),BB(t.y)}function _$(t,e,n){return t==="position"||t==="preserve-aspect"&&!Lge(RB(e),RB(n),.2)}function Ive(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const Uve=M$({attachResizeListener:(t,e)=>E1(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),f5={current:void 0},T$=M$({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!f5.current){const t=new Uve({});t.mount(window),t.setOptions({layoutScroll:!0}),f5.current=t}return f5.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Lve={pan:{Feature:Jge},drag:{Feature:Qge,ProjectionNode:T$,MeasureLayout:g$}};function zB(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,a=i[r];a&&hr.postRender(()=>a(e,Lb(e)))}class Bve extends id{mount(){const{current:e}=this.node;e&&(this.unmount=Lpe(e,n=>(zB(this.node,n,"Start"),i=>zB(this.node,i,"End"))))}unmount(){}}class zve extends id{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ub(E1(this.node.current,"focus",()=>this.onFocus()),E1(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function kB(t,e,n){const{props:i}=t;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),a=i[r];a&&hr.postRender(()=>a(e,Lb(e)))}class kve extends id{mount(){const{current:e}=this.node;e&&(this.unmount=Fpe(e,n=>(kB(this.node,n,"Start"),(i,{success:r})=>kB(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const vN=new WeakMap,h5=new WeakMap,Fve=t=>{const e=vN.get(t.target);e&&e(t)},Gve=t=>{t.forEach(Fve)};function Vve({root:t,...e}){const n=t||document;h5.has(n)||h5.set(n,{});const i=h5.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(Gve,{root:t,...e})),i[r]}function Hve(t,e,n){const i=Vve(e);return vN.set(t,n),i.observe(t),()=>{vN.delete(t),i.unobserve(t)}}const qve={some:0,all:1};class Wve extends id{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:a}=e,s={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:qve[r]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),g=u?h:p;g&&g(l)};return Hve(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Xve(e,n))&&this.startObserver()}unmount(){}}function Xve({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const $ve={inView:{Feature:Wve},tap:{Feature:kve},focus:{Feature:zve},hover:{Feature:Bve}},Yve={layout:{ProjectionNode:T$,MeasureLayout:g$}},xN={current:null},w$={current:!1};function Zve(){if(w$.current=!0,!!VD)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>xN.current=t.matches;t.addListener(e),e()}else xN.current=!1}const Kve=[...ZX,_s,Jh],Qve=t=>Kve.find(YX(t)),FB=new WeakMap;function Jve(t,e,n){for(const i in e){const r=e[i],a=n[i];if(As(r))t.addValue(i,r);else if(As(a))t.addValue(i,w1(r,{owner:t}));else if(a!==r)if(t.hasValue(i)){const s=t.getValue(i);s.liveStyle===!0?s.jump(r):s.hasAnimated||s.set(r)}else{const s=t.getStaticValue(i);t.addValue(i,w1(s!==void 0?s:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const GB=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class exe{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:a,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=gP,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=yu.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,hr.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:h}=s;this.onUpdate=h,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=GT(n),this.isVariantNode=rX(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...g}=this.scrapeMotionValuesFromProps(n,{},this);for(const x in g){const b=g[x];l[x]!==void 0&&As(b)&&b.set(l[x],!1)}}mount(e){this.current=e,FB.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),w$.current||Zve(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:xN.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){FB.delete(this.current),this.projection&&this.projection.unmount(),Qh(this.notifyUpdate),Qh(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=lp.has(e),r=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&hr.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),a(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in wg){const n=wg[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Qr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<GB.length;i++){const r=GB[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const a="on"+r,s=e[a];s&&(this.propEventSubscriptions[r]=this.on(r,s))}this.prevMotionValues=Jve(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=w1(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(XX(r)||BX(r))?r=parseFloat(r):!Qve(r)&&Jh.test(n)&&(r=HX(e,n)),this.setBaseTarget(e,As(r)?r.get():r)),As(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const s=ZD(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);s&&(r=s[e])}if(i&&r!==void 0)return r;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!As(a)?a:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new uP),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class A$ extends exe{constructor(){super(...arguments),this.KeyframeResolver=KX}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;As(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function txe(t){return window.getComputedStyle(t)}class nxe extends A${constructor(){super(...arguments),this.type="html",this.renderInstance=dX}readValueFromInstance(e,n){if(lp.has(n)){const i=mP(n);return i&&i.default||0}else{const i=txe(e),r=(uX(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return p$(e,n)}build(e,n,i){JD(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return iP(e,n,i)}}class ixe extends A${constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Qr}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(lp.has(n)){const i=mP(n);return i&&i.default||0}return n=pX.has(n)?n:XD(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return vX(e,n,i)}build(e,n,i){eP(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,r){mX(e,n,i,r)}mount(e){this.isSVGTag=nP(e.tagName),super.mount(e)}}const rxe=(t,e)=>YD(t)?new ixe(e):new nxe(e,{allowProjection:t!==z.Fragment}),axe=jpe({...Cge,...$ve,...Lve,...Yve},rxe),Xn=q0e(axe);function E$(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=E$(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function vi(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=E$(t))&&(i&&(i+=" "),i+=e);return i}var d5,VB;function So(){if(VB)return d5;VB=1;var t=Array.isArray;return d5=t,d5}var p5,HB;function C$(){if(HB)return p5;HB=1;var t=typeof rS=="object"&&rS&&rS.Object===Object&&rS;return p5=t,p5}var m5,qB;function Ru(){if(qB)return m5;qB=1;var t=C$(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return m5=n,m5}var g5,WB;function Bb(){if(WB)return g5;WB=1;var t=Ru(),e=t.Symbol;return g5=e,g5}var v5,XB;function sxe(){if(XB)return v5;XB=1;var t=Bb(),e=Object.prototype,n=e.hasOwnProperty,i=e.toString,r=t?t.toStringTag:void 0;function a(s){var o=n.call(s,r),l=s[r];try{s[r]=void 0;var u=!0}catch{}var h=i.call(s);return u&&(o?s[r]=l:delete s[r]),h}return v5=a,v5}var x5,$B;function oxe(){if($B)return x5;$B=1;var t=Object.prototype,e=t.toString;function n(i){return e.call(i)}return x5=n,x5}var y5,YB;function Bf(){if(YB)return y5;YB=1;var t=Bb(),e=sxe(),n=oxe(),i="[object Null]",r="[object Undefined]",a=t?t.toStringTag:void 0;function s(o){return o==null?o===void 0?r:i:a&&a in Object(o)?e(o):n(o)}return y5=s,y5}var b5,ZB;function zf(){if(ZB)return b5;ZB=1;function t(e){return e!=null&&typeof e=="object"}return b5=t,b5}var S5,KB;function av(){if(KB)return S5;KB=1;var t=Bf(),e=zf(),n="[object Symbol]";function i(r){return typeof r=="symbol"||e(r)&&t(r)==n}return S5=i,S5}var M5,QB;function bP(){if(QB)return M5;QB=1;var t=So(),e=av(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function r(a,s){if(t(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||e(a)?!0:i.test(a)||!n.test(a)||s!=null&&a in Object(s)}return M5=r,M5}var _5,JB;function rd(){if(JB)return _5;JB=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return _5=t,_5}var T5,ez;function SP(){if(ez)return T5;ez=1;var t=Bf(),e=rd(),n="[object AsyncFunction]",i="[object Function]",r="[object GeneratorFunction]",a="[object Proxy]";function s(o){if(!e(o))return!1;var l=t(o);return l==i||l==r||l==n||l==a}return T5=s,T5}var w5,tz;function lxe(){if(tz)return w5;tz=1;var t=Ru(),e=t["__core-js_shared__"];return w5=e,w5}var A5,nz;function cxe(){if(nz)return A5;nz=1;var t=lxe(),e=(function(){var i=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""})();function n(i){return!!e&&e in i}return A5=n,A5}var E5,iz;function R$(){if(iz)return E5;iz=1;var t=Function.prototype,e=t.toString;function n(i){if(i!=null){try{return e.call(i)}catch{}try{return i+""}catch{}}return""}return E5=n,E5}var C5,rz;function uxe(){if(rz)return C5;rz=1;var t=SP(),e=cxe(),n=rd(),i=R$(),r=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,l=s.toString,u=o.hasOwnProperty,h=RegExp("^"+l.call(u).replace(r,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(g){if(!n(g)||e(g))return!1;var x=t(g)?h:a;return x.test(i(g))}return C5=p,C5}var R5,az;function fxe(){if(az)return R5;az=1;function t(e,n){return e==null?void 0:e[n]}return R5=t,R5}var j5,sz;function cp(){if(sz)return j5;sz=1;var t=uxe(),e=fxe();function n(i,r){var a=e(i,r);return t(a)?a:void 0}return j5=n,j5}var N5,oz;function qT(){if(oz)return N5;oz=1;var t=cp(),e=t(Object,"create");return N5=e,N5}var O5,lz;function hxe(){if(lz)return O5;lz=1;var t=qT();function e(){this.__data__=t?t(null):{},this.size=0}return O5=e,O5}var D5,cz;function dxe(){if(cz)return D5;cz=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return D5=t,D5}var P5,uz;function pxe(){if(uz)return P5;uz=1;var t=qT(),e="__lodash_hash_undefined__",n=Object.prototype,i=n.hasOwnProperty;function r(a){var s=this.__data__;if(t){var o=s[a];return o===e?void 0:o}return i.call(s,a)?s[a]:void 0}return P5=r,P5}var I5,fz;function mxe(){if(fz)return I5;fz=1;var t=qT(),e=Object.prototype,n=e.hasOwnProperty;function i(r){var a=this.__data__;return t?a[r]!==void 0:n.call(a,r)}return I5=i,I5}var U5,hz;function gxe(){if(hz)return U5;hz=1;var t=qT(),e="__lodash_hash_undefined__";function n(i,r){var a=this.__data__;return this.size+=this.has(i)?0:1,a[i]=t&&r===void 0?e:r,this}return U5=n,U5}var L5,dz;function vxe(){if(dz)return L5;dz=1;var t=hxe(),e=dxe(),n=pxe(),i=mxe(),r=gxe();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=i,a.prototype.set=r,L5=a,L5}var B5,pz;function xxe(){if(pz)return B5;pz=1;function t(){this.__data__=[],this.size=0}return B5=t,B5}var z5,mz;function MP(){if(mz)return z5;mz=1;function t(e,n){return e===n||e!==e&&n!==n}return z5=t,z5}var k5,gz;function WT(){if(gz)return k5;gz=1;var t=MP();function e(n,i){for(var r=n.length;r--;)if(t(n[r][0],i))return r;return-1}return k5=e,k5}var F5,vz;function yxe(){if(vz)return F5;vz=1;var t=WT(),e=Array.prototype,n=e.splice;function i(r){var a=this.__data__,s=t(a,r);if(s<0)return!1;var o=a.length-1;return s==o?a.pop():n.call(a,s,1),--this.size,!0}return F5=i,F5}var G5,xz;function bxe(){if(xz)return G5;xz=1;var t=WT();function e(n){var i=this.__data__,r=t(i,n);return r<0?void 0:i[r][1]}return G5=e,G5}var V5,yz;function Sxe(){if(yz)return V5;yz=1;var t=WT();function e(n){return t(this.__data__,n)>-1}return V5=e,V5}var H5,bz;function Mxe(){if(bz)return H5;bz=1;var t=WT();function e(n,i){var r=this.__data__,a=t(r,n);return a<0?(++this.size,r.push([n,i])):r[a][1]=i,this}return H5=e,H5}var q5,Sz;function XT(){if(Sz)return q5;Sz=1;var t=xxe(),e=yxe(),n=bxe(),i=Sxe(),r=Mxe();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=i,a.prototype.set=r,q5=a,q5}var W5,Mz;function _P(){if(Mz)return W5;Mz=1;var t=cp(),e=Ru(),n=t(e,"Map");return W5=n,W5}var X5,_z;function _xe(){if(_z)return X5;_z=1;var t=vxe(),e=XT(),n=_P();function i(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return X5=i,X5}var $5,Tz;function Txe(){if(Tz)return $5;Tz=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return $5=t,$5}var Y5,wz;function $T(){if(wz)return Y5;wz=1;var t=Txe();function e(n,i){var r=n.__data__;return t(i)?r[typeof i=="string"?"string":"hash"]:r.map}return Y5=e,Y5}var Z5,Az;function wxe(){if(Az)return Z5;Az=1;var t=$T();function e(n){var i=t(this,n).delete(n);return this.size-=i?1:0,i}return Z5=e,Z5}var K5,Ez;function Axe(){if(Ez)return K5;Ez=1;var t=$T();function e(n){return t(this,n).get(n)}return K5=e,K5}var Q5,Cz;function Exe(){if(Cz)return Q5;Cz=1;var t=$T();function e(n){return t(this,n).has(n)}return Q5=e,Q5}var J5,Rz;function Cxe(){if(Rz)return J5;Rz=1;var t=$T();function e(n,i){var r=t(this,n),a=r.size;return r.set(n,i),this.size+=r.size==a?0:1,this}return J5=e,J5}var eC,jz;function TP(){if(jz)return eC;jz=1;var t=_xe(),e=wxe(),n=Axe(),i=Exe(),r=Cxe();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=i,a.prototype.set=r,eC=a,eC}var tC,Nz;function j$(){if(Nz)return tC;Nz=1;var t=TP(),e="Expected a function";function n(i,r){if(typeof i!="function"||r!=null&&typeof r!="function")throw new TypeError(e);var a=function(){var s=arguments,o=r?r.apply(this,s):s[0],l=a.cache;if(l.has(o))return l.get(o);var u=i.apply(this,s);return a.cache=l.set(o,u)||l,u};return a.cache=new(n.Cache||t),a}return n.Cache=t,tC=n,tC}var nC,Oz;function Rxe(){if(Oz)return nC;Oz=1;var t=j$(),e=500;function n(i){var r=t(i,function(s){return a.size===e&&a.clear(),s}),a=r.cache;return r}return nC=n,nC}var iC,Dz;function jxe(){if(Dz)return iC;Dz=1;var t=Rxe(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,i=t(function(r){var a=[];return r.charCodeAt(0)===46&&a.push(""),r.replace(e,function(s,o,l,u){a.push(l?u.replace(n,"$1"):o||s)}),a});return iC=i,iC}var rC,Pz;function wP(){if(Pz)return rC;Pz=1;function t(e,n){for(var i=-1,r=e==null?0:e.length,a=Array(r);++i<r;)a[i]=n(e[i],i,e);return a}return rC=t,rC}var aC,Iz;function Nxe(){if(Iz)return aC;Iz=1;var t=Bb(),e=wP(),n=So(),i=av(),r=t?t.prototype:void 0,a=r?r.toString:void 0;function s(o){if(typeof o=="string")return o;if(n(o))return e(o,s)+"";if(i(o))return a?a.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}return aC=s,aC}var sC,Uz;function N$(){if(Uz)return sC;Uz=1;var t=Nxe();function e(n){return n==null?"":t(n)}return sC=e,sC}var oC,Lz;function O$(){if(Lz)return oC;Lz=1;var t=So(),e=bP(),n=jxe(),i=N$();function r(a,s){return t(a)?a:e(a,s)?[a]:n(i(a))}return oC=r,oC}var lC,Bz;function YT(){if(Bz)return lC;Bz=1;var t=av();function e(n){if(typeof n=="string"||t(n))return n;var i=n+"";return i=="0"&&1/n==-1/0?"-0":i}return lC=e,lC}var cC,zz;function AP(){if(zz)return cC;zz=1;var t=O$(),e=YT();function n(i,r){r=t(r,i);for(var a=0,s=r.length;i!=null&&a<s;)i=i[e(r[a++])];return a&&a==s?i:void 0}return cC=n,cC}var uC,kz;function D$(){if(kz)return uC;kz=1;var t=AP();function e(n,i,r){var a=n==null?void 0:t(n,i);return a===void 0?r:a}return uC=e,uC}var Oxe=D$();const Dl=ki(Oxe);var fC,Fz;function Dxe(){if(Fz)return fC;Fz=1;function t(e){return e==null}return fC=t,fC}var Pxe=Dxe();const si=ki(Pxe);var hC,Gz;function Ixe(){if(Gz)return hC;Gz=1;var t=Bf(),e=So(),n=zf(),i="[object String]";function r(a){return typeof a=="string"||!e(a)&&n(a)&&t(a)==i}return hC=r,hC}var Uxe=Ixe();const Q0=ki(Uxe);var Lxe=SP();const Zn=ki(Lxe);var Bxe=rd();const sv=ki(Bxe);var dC={exports:{}},Di={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vz;function zxe(){if(Vz)return Di;Vz=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),s=Symbol.for("react.context"),o=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),b;b=Symbol.for("react.module.reference");function M(S){if(typeof S=="object"&&S!==null){var T=S.$$typeof;switch(T){case t:switch(S=S.type,S){case n:case r:case i:case u:case h:return S;default:switch(S=S&&S.$$typeof,S){case o:case s:case l:case g:case p:case a:return S;default:return T}}case e:return T}}}return Di.ContextConsumer=s,Di.ContextProvider=a,Di.Element=t,Di.ForwardRef=l,Di.Fragment=n,Di.Lazy=g,Di.Memo=p,Di.Portal=e,Di.Profiler=r,Di.StrictMode=i,Di.Suspense=u,Di.SuspenseList=h,Di.isAsyncMode=function(){return!1},Di.isConcurrentMode=function(){return!1},Di.isContextConsumer=function(S){return M(S)===s},Di.isContextProvider=function(S){return M(S)===a},Di.isElement=function(S){return typeof S=="object"&&S!==null&&S.$$typeof===t},Di.isForwardRef=function(S){return M(S)===l},Di.isFragment=function(S){return M(S)===n},Di.isLazy=function(S){return M(S)===g},Di.isMemo=function(S){return M(S)===p},Di.isPortal=function(S){return M(S)===e},Di.isProfiler=function(S){return M(S)===r},Di.isStrictMode=function(S){return M(S)===i},Di.isSuspense=function(S){return M(S)===u},Di.isSuspenseList=function(S){return M(S)===h},Di.isValidElementType=function(S){return typeof S=="string"||typeof S=="function"||S===n||S===r||S===i||S===u||S===h||S===x||typeof S=="object"&&S!==null&&(S.$$typeof===g||S.$$typeof===p||S.$$typeof===a||S.$$typeof===s||S.$$typeof===l||S.$$typeof===b||S.getModuleId!==void 0)},Di.typeOf=M,Di}var Hz;function kxe(){return Hz||(Hz=1,dC.exports=zxe()),dC.exports}var Fxe=kxe(),pC,qz;function P$(){if(qz)return pC;qz=1;var t=Bf(),e=zf(),n="[object Number]";function i(r){return typeof r=="number"||e(r)&&t(r)==n}return pC=i,pC}var mC,Wz;function Gxe(){if(Wz)return mC;Wz=1;var t=P$();function e(n){return t(n)&&n!=+n}return mC=e,mC}var Vxe=Gxe();const ov=ki(Vxe);var Hxe=P$();const qxe=ki(Hxe);var _c=function(e){return e===0?0:e>0?1:-1},j0=function(e){return Q0(e)&&e.indexOf("%")===e.length-1},kt=function(e){return qxe(e)&&!ov(e)},Wxe=function(e){return si(e)},Ma=function(e){return kt(e)||Q0(e)},Xxe=0,zb=function(e){var n=++Xxe;return"".concat(e||"").concat(n)},J0=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!kt(e)&&!Q0(e))return i;var a;if(j0(e)){var s=e.indexOf("%");a=n*parseFloat(e.slice(0,s))/100}else a=+e;return ov(a)&&(a=i),r&&a>n&&(a=n),a},$m=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},$xe=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,i={},r=0;r<n;r++)if(!i[e[r]])i[e[r]]=!0;else return!0;return!1},Rl=function(e,n){return kt(e)&&kt(n)?function(i){return e+i*(n-e)}:function(){return n}};function r3(t,e,n){return!t||!t.length?null:t.find(function(i){return i&&(typeof e=="function"?e(i):Dl(i,e))===n})}var Yxe=function(e,n){return kt(e)&&kt(n)?e-n:Q0(e)&&Q0(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function ug(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var i in e)if({}.hasOwnProperty.call(e,i)&&!{}.hasOwnProperty.call(t,i))return!1;return!0}function yN(t){"@babel/helpers - typeof";return yN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yN(t)}var Zxe=["viewBox","children"],Kxe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Xz=["points","pathLength"],gC={svg:Zxe,polygon:Xz,polyline:Xz},EP=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],a3=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(z.isValidElement(e)&&(i=e.props),!sv(i))return null;var r={};return Object.keys(i).forEach(function(a){EP.includes(a)&&(r[a]=n||function(s){return i[a](i,s)})}),r},Qxe=function(e,n,i){return function(r){return e(n,i,r),null}},s3=function(e,n,i){if(!sv(e)||yN(e)!=="object")return null;var r=null;return Object.keys(e).forEach(function(a){var s=e[a];EP.includes(a)&&typeof s=="function"&&(r||(r={}),r[a]=Qxe(s,n,i))}),r},Jxe=["children"],eye=["children"];function $z(t,e){if(t==null)return{};var n=tye(t,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function tye(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function bN(t){"@babel/helpers - typeof";return bN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bN(t)}var Yz={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Rf=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},Zz=null,vC=null,CP=function t(e){if(e===Zz&&Array.isArray(vC))return vC;var n=[];return z.Children.forEach(e,function(i){si(i)||(Fxe.isFragment(i)?n=n.concat(t(i.props.children)):n.push(i))}),vC=n,Zz=e,n};function wc(t,e){var n=[],i=[];return Array.isArray(e)?i=e.map(function(r){return Rf(r)}):i=[Rf(e)],CP(t).forEach(function(r){var a=Dl(r,"type.displayName")||Dl(r,"type.name");i.indexOf(a)!==-1&&n.push(r)}),n}function Go(t,e){var n=wc(t,e);return n&&n[0]}var Kz=function(e){if(!e||!e.props)return!1;var n=e.props,i=n.width,r=n.height;return!(!kt(i)||i<=0||!kt(r)||r<=0)},nye=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],iye=function(e){return e&&e.type&&Q0(e.type)&&nye.indexOf(e.type)>=0},rye=function(e){return e&&bN(e)==="object"&&"clipDot"in e},aye=function(e,n,i,r){var a,s=(a=gC==null?void 0:gC[r])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!Zn(e)&&(r&&s.includes(n)||Kxe.includes(n))||i&&EP.includes(n)},ri=function(e,n,i){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(z.isValidElement(e)&&(r=e.props),!sv(r))return null;var a={};return Object.keys(r).forEach(function(s){var o;aye((o=r)===null||o===void 0?void 0:o[s],s,n,i)&&(a[s]=r[s])}),a},SN=function t(e,n){if(e===n)return!0;var i=z.Children.count(e);if(i!==z.Children.count(n))return!1;if(i===0)return!0;if(i===1)return Qz(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var r=0;r<i;r++){var a=e[r],s=n[r];if(Array.isArray(a)||Array.isArray(s)){if(!t(a,s))return!1}else if(!Qz(a,s))return!1}return!0},Qz=function(e,n){if(si(e)&&si(n))return!0;if(!si(e)&&!si(n)){var i=e.props||{},r=i.children,a=$z(i,Jxe),s=n.props||{},o=s.children,l=$z(s,eye);return r&&o?ug(a,l)&&SN(r,o):!r&&!o?ug(a,l):!1}return!1},Jz=function(e,n){var i=[],r={};return CP(e).forEach(function(a,s){if(iye(a))i.push(a);else if(a){var o=Rf(a.type),l=n[o]||{},u=l.handler,h=l.once;if(u&&(!h||!r[o])){var p=u(a,o,s);i.push(p),r[o]=!0}}}),i},sye=function(e){var n=e&&e.type;return n&&Yz[n]?Yz[n]:null},oye=function(e,n){return CP(n).indexOf(e)},lye=["children","width","height","viewBox","className","style","title","desc"];function MN(){return MN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},MN.apply(this,arguments)}function cye(t,e){if(t==null)return{};var n=uye(t,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function uye(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function _N(t){var e=t.children,n=t.width,i=t.height,r=t.viewBox,a=t.className,s=t.style,o=t.title,l=t.desc,u=cye(t,lye),h=r||{width:n,height:i,x:0,y:0},p=vi("recharts-surface",a);return De.createElement("svg",MN({},ri(u,!0,"svg"),{className:p,width:n,height:i,style:s,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height)}),De.createElement("title",null,o),De.createElement("desc",null,l),e)}var fye=["children","className"];function TN(){return TN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},TN.apply(this,arguments)}function hye(t,e){if(t==null)return{};var n=dye(t,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function dye(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}var Dr=De.forwardRef(function(t,e){var n=t.children,i=t.className,r=hye(t,fye),a=vi("recharts-layer",i);return De.createElement("g",TN({className:a},ri(r,!0),{ref:e}),n)}),k0=function(e,n){for(var i=arguments.length,r=new Array(i>2?i-2:0),a=2;a<i;a++)r[a-2]=arguments[a]},xC,ek;function pye(){if(ek)return xC;ek=1;function t(e,n,i){var r=-1,a=e.length;n<0&&(n=-n>a?0:a+n),i=i>a?a:i,i<0&&(i+=a),a=n>i?0:i-n>>>0,n>>>=0;for(var s=Array(a);++r<a;)s[r]=e[r+n];return s}return xC=t,xC}var yC,tk;function mye(){if(tk)return yC;tk=1;var t=pye();function e(n,i,r){var a=n.length;return r=r===void 0?a:r,!i&&r>=a?n:t(n,i,r)}return yC=e,yC}var bC,nk;function I$(){if(nk)return bC;nk=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",r=e+n+i,a="\\ufe0e\\ufe0f",s="\\u200d",o=RegExp("["+s+t+r+a+"]");function l(u){return o.test(u)}return bC=l,bC}var SC,ik;function gye(){if(ik)return SC;ik=1;function t(e){return e.split("")}return SC=t,SC}var MC,rk;function vye(){if(rk)return MC;rk=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",r=e+n+i,a="\\ufe0e\\ufe0f",s="["+t+"]",o="["+r+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+o+"|"+l+")",h="[^"+t+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",x="\\u200d",b=u+"?",M="["+a+"]?",S="(?:"+x+"(?:"+[h,p,g].join("|")+")"+M+b+")*",T=M+b+S,A="(?:"+[h+o+"?",o,p,g,s].join("|")+")",E=RegExp(l+"(?="+l+")|"+A+T,"g");function j(R){return R.match(E)||[]}return MC=j,MC}var _C,ak;function xye(){if(ak)return _C;ak=1;var t=gye(),e=I$(),n=vye();function i(r){return e(r)?n(r):t(r)}return _C=i,_C}var TC,sk;function yye(){if(sk)return TC;sk=1;var t=mye(),e=I$(),n=xye(),i=N$();function r(a){return function(s){s=i(s);var o=e(s)?n(s):void 0,l=o?o[0]:s.charAt(0),u=o?t(o,1).join(""):s.slice(1);return l[a]()+u}}return TC=r,TC}var wC,ok;function bye(){if(ok)return wC;ok=1;var t=yye(),e=t("toUpperCase");return wC=e,wC}var Sye=bye();const ZT=ki(Sye);function rr(t){return function(){return t}}const U$=Math.cos,o3=Math.sin,Rc=Math.sqrt,l3=Math.PI,KT=2*l3,wN=Math.PI,AN=2*wN,b0=1e-6,Mye=AN-b0;function L$(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function _ye(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return L$;const n=10**e;return function(i){this._+=i[0];for(let r=1,a=i.length;r<a;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}class Tye{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?L$:_ye(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,a,s){this._append`C${+e},${+n},${+i},${+r},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,i,r,a){if(e=+e,n=+n,i=+i,r=+r,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=i-e,u=r-n,h=s-e,p=o-n,g=h*h+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>b0)if(!(Math.abs(p*l-u*h)>b0)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let x=i-s,b=r-o,M=l*l+u*u,S=x*x+b*b,T=Math.sqrt(M),A=Math.sqrt(g),E=a*Math.tan((wN-Math.acos((M+g-S)/(2*T*A)))/2),j=E/A,R=E/T;Math.abs(j-1)>b0&&this._append`L${e+j*h},${n+j*p}`,this._append`A${a},${a},0,0,${+(p*x>h*b)},${this._x1=e+R*l},${this._y1=n+R*u}`}}arc(e,n,i,r,a,s){if(e=+e,n=+n,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let o=i*Math.cos(r),l=i*Math.sin(r),u=e+o,h=n+l,p=1^s,g=s?r-a:a-r;this._x1===null?this._append`M${u},${h}`:(Math.abs(this._x1-u)>b0||Math.abs(this._y1-h)>b0)&&this._append`L${u},${h}`,i&&(g<0&&(g=g%AN+AN),g>Mye?this._append`A${i},${i},0,1,${p},${e-o},${n-l}A${i},${i},0,1,${p},${this._x1=u},${this._y1=h}`:g>b0&&this._append`A${i},${i},0,${+(g>=wN)},${p},${this._x1=e+i*Math.cos(a)},${this._y1=n+i*Math.sin(a)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function RP(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new Tye(e)}function jP(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function B$(t){this._context=t}B$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function QT(t){return new B$(t)}function z$(t){return t[0]}function k$(t){return t[1]}function F$(t,e){var n=rr(!0),i=null,r=QT,a=null,s=RP(o);t=typeof t=="function"?t:t===void 0?z$:rr(t),e=typeof e=="function"?e:e===void 0?k$:rr(e);function o(l){var u,h=(l=jP(l)).length,p,g=!1,x;for(i==null&&(a=r(x=s())),u=0;u<=h;++u)!(u<h&&n(p=l[u],u,l))===g&&((g=!g)?a.lineStart():a.lineEnd()),g&&a.point(+t(p,u,l),+e(p,u,l));if(x)return a=null,x+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:rr(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:rr(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:rr(!!l),o):n},o.curve=function(l){return arguments.length?(r=l,i!=null&&(a=r(i)),o):r},o.context=function(l){return arguments.length?(l==null?i=a=null:a=r(i=l),o):i},o}function wM(t,e,n){var i=null,r=rr(!0),a=null,s=QT,o=null,l=RP(u);t=typeof t=="function"?t:t===void 0?z$:rr(+t),e=typeof e=="function"?e:rr(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?k$:rr(+n);function u(p){var g,x,b,M=(p=jP(p)).length,S,T=!1,A,E=new Array(M),j=new Array(M);for(a==null&&(o=s(A=l())),g=0;g<=M;++g){if(!(g<M&&r(S=p[g],g,p))===T)if(T=!T)x=g,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),b=g-1;b>=x;--b)o.point(E[b],j[b]);o.lineEnd(),o.areaEnd()}T&&(E[g]=+t(S,g,p),j[g]=+e(S,g,p),o.point(i?+i(S,g,p):E[g],n?+n(S,g,p):j[g]))}if(A)return o=null,A+""||null}function h(){return F$().defined(r).curve(s).context(a)}return u.x=function(p){return arguments.length?(t=typeof p=="function"?p:rr(+p),i=null,u):t},u.x0=function(p){return arguments.length?(t=typeof p=="function"?p:rr(+p),u):t},u.x1=function(p){return arguments.length?(i=p==null?null:typeof p=="function"?p:rr(+p),u):i},u.y=function(p){return arguments.length?(e=typeof p=="function"?p:rr(+p),n=null,u):e},u.y0=function(p){return arguments.length?(e=typeof p=="function"?p:rr(+p),u):e},u.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:rr(+p),u):n},u.lineX0=u.lineY0=function(){return h().x(t).y(e)},u.lineY1=function(){return h().x(t).y(n)},u.lineX1=function(){return h().x(i).y(e)},u.defined=function(p){return arguments.length?(r=typeof p=="function"?p:rr(!!p),u):r},u.curve=function(p){return arguments.length?(s=p,a!=null&&(o=s(a)),u):s},u.context=function(p){return arguments.length?(p==null?a=o=null:o=s(a=p),u):a},u}class G${constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function wye(t){return new G$(t,!0)}function Aye(t){return new G$(t,!1)}const NP={draw(t,e){const n=Rc(e/l3);t.moveTo(n,0),t.arc(0,0,n,0,KT)}},Eye={draw(t,e){const n=Rc(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},V$=Rc(1/3),Cye=V$*2,Rye={draw(t,e){const n=Rc(e/Cye),i=n*V$;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},jye={draw(t,e){const n=Rc(e),i=-n/2;t.rect(i,i,n,n)}},Nye=.8908130915292852,H$=o3(l3/10)/o3(7*l3/10),Oye=o3(KT/10)*H$,Dye=-U$(KT/10)*H$,Pye={draw(t,e){const n=Rc(e*Nye),i=Oye*n,r=Dye*n;t.moveTo(0,-n),t.lineTo(i,r);for(let a=1;a<5;++a){const s=KT*a/5,o=U$(s),l=o3(s);t.lineTo(l*n,-o*n),t.lineTo(o*i-l*r,l*i+o*r)}t.closePath()}},AC=Rc(3),Iye={draw(t,e){const n=-Rc(e/(AC*3));t.moveTo(0,n*2),t.lineTo(-AC*n,-n),t.lineTo(AC*n,-n),t.closePath()}},Tl=-.5,wl=Rc(3)/2,EN=1/Rc(12),Uye=(EN/2+1)*3,Lye={draw(t,e){const n=Rc(e/Uye),i=n/2,r=n*EN,a=i,s=n*EN+n,o=-a,l=s;t.moveTo(i,r),t.lineTo(a,s),t.lineTo(o,l),t.lineTo(Tl*i-wl*r,wl*i+Tl*r),t.lineTo(Tl*a-wl*s,wl*a+Tl*s),t.lineTo(Tl*o-wl*l,wl*o+Tl*l),t.lineTo(Tl*i+wl*r,Tl*r-wl*i),t.lineTo(Tl*a+wl*s,Tl*s-wl*a),t.lineTo(Tl*o+wl*l,Tl*l-wl*o),t.closePath()}};function Bye(t,e){let n=null,i=RP(r);t=typeof t=="function"?t:rr(t||NP),e=typeof e=="function"?e:rr(e===void 0?64:+e);function r(){let a;if(n||(n=a=i()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return r.type=function(a){return arguments.length?(t=typeof a=="function"?a:rr(a),r):t},r.size=function(a){return arguments.length?(e=typeof a=="function"?a:rr(+a),r):e},r.context=function(a){return arguments.length?(n=a??null,r):n},r}function c3(){}function u3(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function q$(t){this._context=t}q$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:u3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:u3(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function zye(t){return new q$(t)}function W$(t){this._context=t}W$.prototype={areaStart:c3,areaEnd:c3,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:u3(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function kye(t){return new W$(t)}function X$(t){this._context=t}X$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:u3(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Fye(t){return new X$(t)}function $$(t){this._context=t}$$.prototype={areaStart:c3,areaEnd:c3,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Gye(t){return new $$(t)}function lk(t){return t<0?-1:1}function ck(t,e,n){var i=t._x1-t._x0,r=e-t._x1,a=(t._y1-t._y0)/(i||r<0&&-0),s=(n-t._y1)/(r||i<0&&-0),o=(a*r+s*i)/(i+r);return(lk(a)+lk(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function uk(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function EC(t,e,n){var i=t._x0,r=t._y0,a=t._x1,s=t._y1,o=(a-i)/3;t._context.bezierCurveTo(i+o,r+o*e,a-o,s-o*n,a,s)}function f3(t){this._context=t}f3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:EC(this,this._t0,uk(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,EC(this,uk(this,n=ck(this,t,e)),n);break;default:EC(this,this._t0,n=ck(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Y$(t){this._context=new Z$(t)}(Y$.prototype=Object.create(f3.prototype)).point=function(t,e){f3.prototype.point.call(this,e,t)};function Z$(t){this._context=t}Z$.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,a){this._context.bezierCurveTo(e,t,i,n,a,r)}};function Vye(t){return new f3(t)}function Hye(t){return new Y$(t)}function K$(t){this._context=t}K$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=fk(t),r=fk(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function fk(t){var e,n=t.length-1,i,r=new Array(n),a=new Array(n),s=new Array(n);for(r[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)r[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(r[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=r[e]/a[e-1],a[e]-=i,s[e]-=i*s[e-1];for(r[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)r[e]=(s[e]-r[e+1])/a[e];for(a[n-1]=(t[n]+r[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-r[e+1];return[r,a]}function qye(t){return new K$(t)}function JT(t,e){this._context=t,this._t=e}JT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Wye(t){return new JT(t,.5)}function Xye(t){return new JT(t,0)}function $ye(t){return new JT(t,1)}function Eg(t,e){if((s=t.length)>1)for(var n=1,i,r,a=t[e[0]],s,o=a.length;n<s;++n)for(r=a,a=t[e[n]],i=0;i<o;++i)a[i][1]+=a[i][0]=isNaN(r[i][1])?r[i][0]:r[i][1]}function CN(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Yye(t,e){return t[e]}function Zye(t){const e=[];return e.key=t,e}function Kye(){var t=rr([]),e=CN,n=Eg,i=Yye;function r(a){var s=Array.from(t.apply(this,arguments),Zye),o,l=s.length,u=-1,h;for(const p of a)for(o=0,++u;o<l;++o)(s[o][u]=[0,+i(p,s[o].key,u,a)]).data=p;for(o=0,h=jP(e(s));o<l;++o)s[h[o]].index=o;return n(s,h),s}return r.keys=function(a){return arguments.length?(t=typeof a=="function"?a:rr(Array.from(a)),r):t},r.value=function(a){return arguments.length?(i=typeof a=="function"?a:rr(+a),r):i},r.order=function(a){return arguments.length?(e=a==null?CN:typeof a=="function"?a:rr(Array.from(a)),r):e},r.offset=function(a){return arguments.length?(n=a??Eg,r):n},r}function Qye(t,e){if((i=t.length)>0){for(var n,i,r=0,a=t[0].length,s;r<a;++r){for(s=n=0;n<i;++n)s+=t[n][r][1]||0;if(s)for(n=0;n<i;++n)t[n][r][1]/=s}Eg(t,e)}}function Jye(t,e){if((r=t.length)>0){for(var n=0,i=t[e[0]],r,a=i.length;n<a;++n){for(var s=0,o=0;s<r;++s)o+=t[s][n][1]||0;i[n][1]+=i[n][0]=-o/2}Eg(t,e)}}function e1e(t,e){if(!(!((s=t.length)>0)||!((a=(r=t[e[0]]).length)>0))){for(var n=0,i=1,r,a,s;i<a;++i){for(var o=0,l=0,u=0;o<s;++o){for(var h=t[e[o]],p=h[i][1]||0,g=h[i-1][1]||0,x=(p-g)/2,b=0;b<o;++b){var M=t[e[b]],S=M[i][1]||0,T=M[i-1][1]||0;x+=S-T}l+=p,u+=x*p}r[i-1][1]+=r[i-1][0]=n,l&&(n-=u/l)}r[i-1][1]+=r[i-1][0]=n,Eg(t,e)}}function C1(t){"@babel/helpers - typeof";return C1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C1(t)}var t1e=["type","size","sizeType"];function RN(){return RN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},RN.apply(this,arguments)}function hk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function dk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hk(Object(n),!0).forEach(function(i){n1e(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hk(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function n1e(t,e,n){return e=i1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i1e(t){var e=r1e(t,"string");return C1(e)=="symbol"?e:e+""}function r1e(t,e){if(C1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(C1(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function a1e(t,e){if(t==null)return{};var n=s1e(t,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function s1e(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}var Q$={symbolCircle:NP,symbolCross:Eye,symbolDiamond:Rye,symbolSquare:jye,symbolStar:Pye,symbolTriangle:Iye,symbolWye:Lye},o1e=Math.PI/180,l1e=function(e){var n="symbol".concat(ZT(e));return Q$[n]||NP},c1e=function(e,n,i){if(n==="area")return e;switch(i){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*o1e;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.pow(Math.tan(r),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},u1e=function(e,n){Q$["symbol".concat(ZT(e))]=n},OP=function(e){var n=e.type,i=n===void 0?"circle":n,r=e.size,a=r===void 0?64:r,s=e.sizeType,o=s===void 0?"area":s,l=a1e(e,t1e),u=dk(dk({},l),{},{type:i,size:a,sizeType:o}),h=function(){var S=l1e(i),T=Bye().type(S).size(c1e(a,o,i));return T()},p=u.className,g=u.cx,x=u.cy,b=ri(u,!0);return g===+g&&x===+x&&a===+a?De.createElement("path",RN({},b,{className:vi("recharts-symbols",p),transform:"translate(".concat(g,", ").concat(x,")"),d:h()})):null};OP.registerSymbol=u1e;function Cg(t){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cg(t)}function jN(){return jN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},jN.apply(this,arguments)}function pk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function f1e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pk(Object(n),!0).forEach(function(i){R1(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pk(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function h1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d1e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,eY(i.key),i)}}function p1e(t,e,n){return e&&d1e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function m1e(t,e,n){return e=h3(e),g1e(t,J$()?Reflect.construct(e,n||[],h3(t).constructor):e.apply(t,n))}function g1e(t,e){if(e&&(Cg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v1e(t)}function v1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function J$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(J$=function(){return!!t})()}function h3(t){return h3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},h3(t)}function x1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NN(t,e)}function NN(t,e){return NN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},NN(t,e)}function R1(t,e,n){return e=eY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eY(t){var e=y1e(t,"string");return Cg(e)=="symbol"?e:e+""}function y1e(t,e){if(Cg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Cg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Al=32,DP=(function(t){function e(){return h1e(this,e),m1e(this,e,arguments)}return x1e(e,t),p1e(e,[{key:"renderIcon",value:function(i){var r=this.props.inactiveColor,a=Al/2,s=Al/6,o=Al/3,l=i.inactive?r:i.color;if(i.type==="plainline")return De.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:i.payload.strokeDasharray,x1:0,y1:a,x2:Al,y2:a,className:"recharts-legend-icon"});if(i.type==="line")return De.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(Al,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(i.type==="rect")return De.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Al/8,"h").concat(Al,"v").concat(Al*3/4,"h").concat(-Al,"z"),className:"recharts-legend-icon"});if(De.isValidElement(i.legendIcon)){var u=f1e({},i);return delete u.legendIcon,De.cloneElement(i.legendIcon,u)}return De.createElement(OP,{fill:l,cx:a,cy:a,size:Al,sizeType:"diameter",type:i.type})}},{key:"renderItems",value:function(){var i=this,r=this.props,a=r.payload,s=r.iconSize,o=r.layout,l=r.formatter,u=r.inactiveColor,h={x:0,y:0,width:Al,height:Al},p={display:o==="horizontal"?"inline-block":"block",marginRight:10},g={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(x,b){var M=x.formatter||l,S=vi(R1(R1({"recharts-legend-item":!0},"legend-item-".concat(b),!0),"inactive",x.inactive));if(x.type==="none")return null;var T=Zn(x.value)?null:x.value;k0(!Zn(x.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var A=x.inactive?u:x.color;return De.createElement("li",jN({className:S,style:p,key:"legend-item-".concat(b)},s3(i.props,x,b)),De.createElement(_N,{width:s,height:s,viewBox:h,style:g},i.renderIcon(x)),De.createElement("span",{className:"recharts-legend-item-text",style:{color:A}},M?M(T,x,b):T))})}},{key:"render",value:function(){var i=this.props,r=i.payload,a=i.layout,s=i.align;if(!r||!r.length)return null;var o={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return De.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])})(z.PureComponent);R1(DP,"displayName","Legend");R1(DP,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var CC,mk;function b1e(){if(mk)return CC;mk=1;var t=XT();function e(){this.__data__=new t,this.size=0}return CC=e,CC}var RC,gk;function S1e(){if(gk)return RC;gk=1;function t(e){var n=this.__data__,i=n.delete(e);return this.size=n.size,i}return RC=t,RC}var jC,vk;function M1e(){if(vk)return jC;vk=1;function t(e){return this.__data__.get(e)}return jC=t,jC}var NC,xk;function _1e(){if(xk)return NC;xk=1;function t(e){return this.__data__.has(e)}return NC=t,NC}var OC,yk;function T1e(){if(yk)return OC;yk=1;var t=XT(),e=_P(),n=TP(),i=200;function r(a,s){var o=this.__data__;if(o instanceof t){var l=o.__data__;if(!e||l.length<i-1)return l.push([a,s]),this.size=++o.size,this;o=this.__data__=new n(l)}return o.set(a,s),this.size=o.size,this}return OC=r,OC}var DC,bk;function tY(){if(bk)return DC;bk=1;var t=XT(),e=b1e(),n=S1e(),i=M1e(),r=_1e(),a=T1e();function s(o){var l=this.__data__=new t(o);this.size=l.size}return s.prototype.clear=e,s.prototype.delete=n,s.prototype.get=i,s.prototype.has=r,s.prototype.set=a,DC=s,DC}var PC,Sk;function w1e(){if(Sk)return PC;Sk=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return PC=e,PC}var IC,Mk;function A1e(){if(Mk)return IC;Mk=1;function t(e){return this.__data__.has(e)}return IC=t,IC}var UC,_k;function nY(){if(_k)return UC;_k=1;var t=TP(),e=w1e(),n=A1e();function i(r){var a=-1,s=r==null?0:r.length;for(this.__data__=new t;++a<s;)this.add(r[a])}return i.prototype.add=i.prototype.push=e,i.prototype.has=n,UC=i,UC}var LC,Tk;function iY(){if(Tk)return LC;Tk=1;function t(e,n){for(var i=-1,r=e==null?0:e.length;++i<r;)if(n(e[i],i,e))return!0;return!1}return LC=t,LC}var BC,wk;function rY(){if(wk)return BC;wk=1;function t(e,n){return e.has(n)}return BC=t,BC}var zC,Ak;function aY(){if(Ak)return zC;Ak=1;var t=nY(),e=iY(),n=rY(),i=1,r=2;function a(s,o,l,u,h,p){var g=l&i,x=s.length,b=o.length;if(x!=b&&!(g&&b>x))return!1;var M=p.get(s),S=p.get(o);if(M&&S)return M==o&&S==s;var T=-1,A=!0,E=l&r?new t:void 0;for(p.set(s,o),p.set(o,s);++T<x;){var j=s[T],R=o[T];if(u)var C=g?u(R,j,T,o,s,p):u(j,R,T,s,o,p);if(C!==void 0){if(C)continue;A=!1;break}if(E){if(!e(o,function(D,U){if(!n(E,U)&&(j===D||h(j,D,l,u,p)))return E.push(U)})){A=!1;break}}else if(!(j===R||h(j,R,l,u,p))){A=!1;break}}return p.delete(s),p.delete(o),A}return zC=a,zC}var kC,Ek;function E1e(){if(Ek)return kC;Ek=1;var t=Ru(),e=t.Uint8Array;return kC=e,kC}var FC,Ck;function C1e(){if(Ck)return FC;Ck=1;function t(e){var n=-1,i=Array(e.size);return e.forEach(function(r,a){i[++n]=[a,r]}),i}return FC=t,FC}var GC,Rk;function PP(){if(Rk)return GC;Rk=1;function t(e){var n=-1,i=Array(e.size);return e.forEach(function(r){i[++n]=r}),i}return GC=t,GC}var VC,jk;function R1e(){if(jk)return VC;jk=1;var t=Bb(),e=E1e(),n=MP(),i=aY(),r=C1e(),a=PP(),s=1,o=2,l="[object Boolean]",u="[object Date]",h="[object Error]",p="[object Map]",g="[object Number]",x="[object RegExp]",b="[object Set]",M="[object String]",S="[object Symbol]",T="[object ArrayBuffer]",A="[object DataView]",E=t?t.prototype:void 0,j=E?E.valueOf:void 0;function R(C,D,U,I,L,F,G){switch(U){case A:if(C.byteLength!=D.byteLength||C.byteOffset!=D.byteOffset)return!1;C=C.buffer,D=D.buffer;case T:return!(C.byteLength!=D.byteLength||!F(new e(C),new e(D)));case l:case u:case g:return n(+C,+D);case h:return C.name==D.name&&C.message==D.message;case x:case M:return C==D+"";case p:var H=r;case b:var W=I&s;if(H||(H=a),C.size!=D.size&&!W)return!1;var Y=G.get(C);if(Y)return Y==D;I|=o,G.set(C,D);var k=i(H(C),H(D),I,L,F,G);return G.delete(C),k;case S:if(j)return j.call(C)==j.call(D)}return!1}return VC=R,VC}var HC,Nk;function sY(){if(Nk)return HC;Nk=1;function t(e,n){for(var i=-1,r=n.length,a=e.length;++i<r;)e[a+i]=n[i];return e}return HC=t,HC}var qC,Ok;function j1e(){if(Ok)return qC;Ok=1;var t=sY(),e=So();function n(i,r,a){var s=r(i);return e(i)?s:t(s,a(i))}return qC=n,qC}var WC,Dk;function N1e(){if(Dk)return WC;Dk=1;function t(e,n){for(var i=-1,r=e==null?0:e.length,a=0,s=[];++i<r;){var o=e[i];n(o,i,e)&&(s[a++]=o)}return s}return WC=t,WC}var XC,Pk;function O1e(){if(Pk)return XC;Pk=1;function t(){return[]}return XC=t,XC}var $C,Ik;function D1e(){if(Ik)return $C;Ik=1;var t=N1e(),e=O1e(),n=Object.prototype,i=n.propertyIsEnumerable,r=Object.getOwnPropertySymbols,a=r?function(s){return s==null?[]:(s=Object(s),t(r(s),function(o){return i.call(s,o)}))}:e;return $C=a,$C}var YC,Uk;function P1e(){if(Uk)return YC;Uk=1;function t(e,n){for(var i=-1,r=Array(e);++i<e;)r[i]=n(i);return r}return YC=t,YC}var ZC,Lk;function I1e(){if(Lk)return ZC;Lk=1;var t=Bf(),e=zf(),n="[object Arguments]";function i(r){return e(r)&&t(r)==n}return ZC=i,ZC}var KC,Bk;function IP(){if(Bk)return KC;Bk=1;var t=I1e(),e=zf(),n=Object.prototype,i=n.hasOwnProperty,r=n.propertyIsEnumerable,a=t((function(){return arguments})())?t:function(s){return e(s)&&i.call(s,"callee")&&!r.call(s,"callee")};return KC=a,KC}var Cy={exports:{}},QC,zk;function U1e(){if(zk)return QC;zk=1;function t(){return!1}return QC=t,QC}Cy.exports;var kk;function oY(){return kk||(kk=1,(function(t,e){var n=Ru(),i=U1e(),r=e&&!e.nodeType&&e,a=r&&!0&&t&&!t.nodeType&&t,s=a&&a.exports===r,o=s?n.Buffer:void 0,l=o?o.isBuffer:void 0,u=l||i;t.exports=u})(Cy,Cy.exports)),Cy.exports}var JC,Fk;function UP(){if(Fk)return JC;Fk=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(i,r){var a=typeof i;return r=r??t,!!r&&(a=="number"||a!="symbol"&&e.test(i))&&i>-1&&i%1==0&&i<r}return JC=n,JC}var eR,Gk;function LP(){if(Gk)return eR;Gk=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return eR=e,eR}var tR,Vk;function L1e(){if(Vk)return tR;Vk=1;var t=Bf(),e=LP(),n=zf(),i="[object Arguments]",r="[object Array]",a="[object Boolean]",s="[object Date]",o="[object Error]",l="[object Function]",u="[object Map]",h="[object Number]",p="[object Object]",g="[object RegExp]",x="[object Set]",b="[object String]",M="[object WeakMap]",S="[object ArrayBuffer]",T="[object DataView]",A="[object Float32Array]",E="[object Float64Array]",j="[object Int8Array]",R="[object Int16Array]",C="[object Int32Array]",D="[object Uint8Array]",U="[object Uint8ClampedArray]",I="[object Uint16Array]",L="[object Uint32Array]",F={};F[A]=F[E]=F[j]=F[R]=F[C]=F[D]=F[U]=F[I]=F[L]=!0,F[i]=F[r]=F[S]=F[a]=F[T]=F[s]=F[o]=F[l]=F[u]=F[h]=F[p]=F[g]=F[x]=F[b]=F[M]=!1;function G(H){return n(H)&&e(H.length)&&!!F[t(H)]}return tR=G,tR}var nR,Hk;function lY(){if(Hk)return nR;Hk=1;function t(e){return function(n){return e(n)}}return nR=t,nR}var Ry={exports:{}};Ry.exports;var qk;function B1e(){return qk||(qk=1,(function(t,e){var n=C$(),i=e&&!e.nodeType&&e,r=i&&!0&&t&&!t.nodeType&&t,a=r&&r.exports===i,s=a&&n.process,o=(function(){try{var l=r&&r.require&&r.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}})();t.exports=o})(Ry,Ry.exports)),Ry.exports}var iR,Wk;function cY(){if(Wk)return iR;Wk=1;var t=L1e(),e=lY(),n=B1e(),i=n&&n.isTypedArray,r=i?e(i):t;return iR=r,iR}var rR,Xk;function z1e(){if(Xk)return rR;Xk=1;var t=P1e(),e=IP(),n=So(),i=oY(),r=UP(),a=cY(),s=Object.prototype,o=s.hasOwnProperty;function l(u,h){var p=n(u),g=!p&&e(u),x=!p&&!g&&i(u),b=!p&&!g&&!x&&a(u),M=p||g||x||b,S=M?t(u.length,String):[],T=S.length;for(var A in u)(h||o.call(u,A))&&!(M&&(A=="length"||x&&(A=="offset"||A=="parent")||b&&(A=="buffer"||A=="byteLength"||A=="byteOffset")||r(A,T)))&&S.push(A);return S}return rR=l,rR}var aR,$k;function k1e(){if($k)return aR;$k=1;var t=Object.prototype;function e(n){var i=n&&n.constructor,r=typeof i=="function"&&i.prototype||t;return n===r}return aR=e,aR}var sR,Yk;function uY(){if(Yk)return sR;Yk=1;function t(e,n){return function(i){return e(n(i))}}return sR=t,sR}var oR,Zk;function F1e(){if(Zk)return oR;Zk=1;var t=uY(),e=t(Object.keys,Object);return oR=e,oR}var lR,Kk;function G1e(){if(Kk)return lR;Kk=1;var t=k1e(),e=F1e(),n=Object.prototype,i=n.hasOwnProperty;function r(a){if(!t(a))return e(a);var s=[];for(var o in Object(a))i.call(a,o)&&o!="constructor"&&s.push(o);return s}return lR=r,lR}var cR,Qk;function kb(){if(Qk)return cR;Qk=1;var t=SP(),e=LP();function n(i){return i!=null&&e(i.length)&&!t(i)}return cR=n,cR}var uR,Jk;function ew(){if(Jk)return uR;Jk=1;var t=z1e(),e=G1e(),n=kb();function i(r){return n(r)?t(r):e(r)}return uR=i,uR}var fR,eF;function V1e(){if(eF)return fR;eF=1;var t=j1e(),e=D1e(),n=ew();function i(r){return t(r,n,e)}return fR=i,fR}var hR,tF;function H1e(){if(tF)return hR;tF=1;var t=V1e(),e=1,n=Object.prototype,i=n.hasOwnProperty;function r(a,s,o,l,u,h){var p=o&e,g=t(a),x=g.length,b=t(s),M=b.length;if(x!=M&&!p)return!1;for(var S=x;S--;){var T=g[S];if(!(p?T in s:i.call(s,T)))return!1}var A=h.get(a),E=h.get(s);if(A&&E)return A==s&&E==a;var j=!0;h.set(a,s),h.set(s,a);for(var R=p;++S<x;){T=g[S];var C=a[T],D=s[T];if(l)var U=p?l(D,C,T,s,a,h):l(C,D,T,a,s,h);if(!(U===void 0?C===D||u(C,D,o,l,h):U)){j=!1;break}R||(R=T=="constructor")}if(j&&!R){var I=a.constructor,L=s.constructor;I!=L&&"constructor"in a&&"constructor"in s&&!(typeof I=="function"&&I instanceof I&&typeof L=="function"&&L instanceof L)&&(j=!1)}return h.delete(a),h.delete(s),j}return hR=r,hR}var dR,nF;function q1e(){if(nF)return dR;nF=1;var t=cp(),e=Ru(),n=t(e,"DataView");return dR=n,dR}var pR,iF;function W1e(){if(iF)return pR;iF=1;var t=cp(),e=Ru(),n=t(e,"Promise");return pR=n,pR}var mR,rF;function fY(){if(rF)return mR;rF=1;var t=cp(),e=Ru(),n=t(e,"Set");return mR=n,mR}var gR,aF;function X1e(){if(aF)return gR;aF=1;var t=cp(),e=Ru(),n=t(e,"WeakMap");return gR=n,gR}var vR,sF;function $1e(){if(sF)return vR;sF=1;var t=q1e(),e=_P(),n=W1e(),i=fY(),r=X1e(),a=Bf(),s=R$(),o="[object Map]",l="[object Object]",u="[object Promise]",h="[object Set]",p="[object WeakMap]",g="[object DataView]",x=s(t),b=s(e),M=s(n),S=s(i),T=s(r),A=a;return(t&&A(new t(new ArrayBuffer(1)))!=g||e&&A(new e)!=o||n&&A(n.resolve())!=u||i&&A(new i)!=h||r&&A(new r)!=p)&&(A=function(E){var j=a(E),R=j==l?E.constructor:void 0,C=R?s(R):"";if(C)switch(C){case x:return g;case b:return o;case M:return u;case S:return h;case T:return p}return j}),vR=A,vR}var xR,oF;function Y1e(){if(oF)return xR;oF=1;var t=tY(),e=aY(),n=R1e(),i=H1e(),r=$1e(),a=So(),s=oY(),o=cY(),l=1,u="[object Arguments]",h="[object Array]",p="[object Object]",g=Object.prototype,x=g.hasOwnProperty;function b(M,S,T,A,E,j){var R=a(M),C=a(S),D=R?h:r(M),U=C?h:r(S);D=D==u?p:D,U=U==u?p:U;var I=D==p,L=U==p,F=D==U;if(F&&s(M)){if(!s(S))return!1;R=!0,I=!1}if(F&&!I)return j||(j=new t),R||o(M)?e(M,S,T,A,E,j):n(M,S,D,T,A,E,j);if(!(T&l)){var G=I&&x.call(M,"__wrapped__"),H=L&&x.call(S,"__wrapped__");if(G||H){var W=G?M.value():M,Y=H?S.value():S;return j||(j=new t),E(W,Y,T,A,j)}}return F?(j||(j=new t),i(M,S,T,A,E,j)):!1}return xR=b,xR}var yR,lF;function BP(){if(lF)return yR;lF=1;var t=Y1e(),e=zf();function n(i,r,a,s,o){return i===r?!0:i==null||r==null||!e(i)&&!e(r)?i!==i&&r!==r:t(i,r,a,s,n,o)}return yR=n,yR}var bR,cF;function Z1e(){if(cF)return bR;cF=1;var t=tY(),e=BP(),n=1,i=2;function r(a,s,o,l){var u=o.length,h=u,p=!l;if(a==null)return!h;for(a=Object(a);u--;){var g=o[u];if(p&&g[2]?g[1]!==a[g[0]]:!(g[0]in a))return!1}for(;++u<h;){g=o[u];var x=g[0],b=a[x],M=g[1];if(p&&g[2]){if(b===void 0&&!(x in a))return!1}else{var S=new t;if(l)var T=l(b,M,x,a,s,S);if(!(T===void 0?e(M,b,n|i,l,S):T))return!1}}return!0}return bR=r,bR}var SR,uF;function hY(){if(uF)return SR;uF=1;var t=rd();function e(n){return n===n&&!t(n)}return SR=e,SR}var MR,fF;function K1e(){if(fF)return MR;fF=1;var t=hY(),e=ew();function n(i){for(var r=e(i),a=r.length;a--;){var s=r[a],o=i[s];r[a]=[s,o,t(o)]}return r}return MR=n,MR}var _R,hF;function dY(){if(hF)return _R;hF=1;function t(e,n){return function(i){return i==null?!1:i[e]===n&&(n!==void 0||e in Object(i))}}return _R=t,_R}var TR,dF;function Q1e(){if(dF)return TR;dF=1;var t=Z1e(),e=K1e(),n=dY();function i(r){var a=e(r);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(s){return s===r||t(s,r,a)}}return TR=i,TR}var wR,pF;function J1e(){if(pF)return wR;pF=1;function t(e,n){return e!=null&&n in Object(e)}return wR=t,wR}var AR,mF;function ebe(){if(mF)return AR;mF=1;var t=O$(),e=IP(),n=So(),i=UP(),r=LP(),a=YT();function s(o,l,u){l=t(l,o);for(var h=-1,p=l.length,g=!1;++h<p;){var x=a(l[h]);if(!(g=o!=null&&u(o,x)))break;o=o[x]}return g||++h!=p?g:(p=o==null?0:o.length,!!p&&r(p)&&i(x,p)&&(n(o)||e(o)))}return AR=s,AR}var ER,gF;function tbe(){if(gF)return ER;gF=1;var t=J1e(),e=ebe();function n(i,r){return i!=null&&e(i,r,t)}return ER=n,ER}var CR,vF;function nbe(){if(vF)return CR;vF=1;var t=BP(),e=D$(),n=tbe(),i=bP(),r=hY(),a=dY(),s=YT(),o=1,l=2;function u(h,p){return i(h)&&r(p)?a(s(h),p):function(g){var x=e(g,h);return x===void 0&&x===p?n(g,h):t(p,x,o|l)}}return CR=u,CR}var RR,xF;function lv(){if(xF)return RR;xF=1;function t(e){return e}return RR=t,RR}var jR,yF;function ibe(){if(yF)return jR;yF=1;function t(e){return function(n){return n==null?void 0:n[e]}}return jR=t,jR}var NR,bF;function rbe(){if(bF)return NR;bF=1;var t=AP();function e(n){return function(i){return t(i,n)}}return NR=e,NR}var OR,SF;function abe(){if(SF)return OR;SF=1;var t=ibe(),e=rbe(),n=bP(),i=YT();function r(a){return n(a)?t(i(a)):e(a)}return OR=r,OR}var DR,MF;function ad(){if(MF)return DR;MF=1;var t=Q1e(),e=nbe(),n=lv(),i=So(),r=abe();function a(s){return typeof s=="function"?s:s==null?n:typeof s=="object"?i(s)?e(s[0],s[1]):t(s):r(s)}return DR=a,DR}var PR,_F;function pY(){if(_F)return PR;_F=1;function t(e,n,i,r){for(var a=e.length,s=i+(r?1:-1);r?s--:++s<a;)if(n(e[s],s,e))return s;return-1}return PR=t,PR}var IR,TF;function sbe(){if(TF)return IR;TF=1;function t(e){return e!==e}return IR=t,IR}var UR,wF;function obe(){if(wF)return UR;wF=1;function t(e,n,i){for(var r=i-1,a=e.length;++r<a;)if(e[r]===n)return r;return-1}return UR=t,UR}var LR,AF;function lbe(){if(AF)return LR;AF=1;var t=pY(),e=sbe(),n=obe();function i(r,a,s){return a===a?n(r,a,s):t(r,e,s)}return LR=i,LR}var BR,EF;function cbe(){if(EF)return BR;EF=1;var t=lbe();function e(n,i){var r=n==null?0:n.length;return!!r&&t(n,i,0)>-1}return BR=e,BR}var zR,CF;function ube(){if(CF)return zR;CF=1;function t(e,n,i){for(var r=-1,a=e==null?0:e.length;++r<a;)if(i(n,e[r]))return!0;return!1}return zR=t,zR}var kR,RF;function fbe(){if(RF)return kR;RF=1;function t(){}return kR=t,kR}var FR,jF;function hbe(){if(jF)return FR;jF=1;var t=fY(),e=fbe(),n=PP(),i=1/0,r=t&&1/n(new t([,-0]))[1]==i?function(a){return new t(a)}:e;return FR=r,FR}var GR,NF;function dbe(){if(NF)return GR;NF=1;var t=nY(),e=cbe(),n=ube(),i=rY(),r=hbe(),a=PP(),s=200;function o(l,u,h){var p=-1,g=e,x=l.length,b=!0,M=[],S=M;if(h)b=!1,g=n;else if(x>=s){var T=u?null:r(l);if(T)return a(T);b=!1,g=i,S=new t}else S=u?[]:M;e:for(;++p<x;){var A=l[p],E=u?u(A):A;if(A=h||A!==0?A:0,b&&E===E){for(var j=S.length;j--;)if(S[j]===E)continue e;u&&S.push(E),M.push(A)}else g(S,E,h)||(S!==M&&S.push(E),M.push(A))}return M}return GR=o,GR}var VR,OF;function pbe(){if(OF)return VR;OF=1;var t=ad(),e=dbe();function n(i,r){return i&&i.length?e(i,t(r,2)):[]}return VR=n,VR}var mbe=pbe();const DF=ki(mbe);function mY(t,e,n){return e===!0?DF(t,n):Zn(e)?DF(t,e):t}function Rg(t){"@babel/helpers - typeof";return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rg(t)}var gbe=["ref"];function PF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function yf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PF(Object(n),!0).forEach(function(i){tw(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PF(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function vbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IF(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,vY(i.key),i)}}function xbe(t,e,n){return e&&IF(t.prototype,e),n&&IF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ybe(t,e,n){return e=d3(e),bbe(t,gY()?Reflect.construct(e,n||[],d3(t).constructor):e.apply(t,n))}function bbe(t,e){if(e&&(Rg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sbe(t)}function Sbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gY=function(){return!!t})()}function d3(t){return d3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},d3(t)}function Mbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ON(t,e)}function ON(t,e){return ON=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},ON(t,e)}function tw(t,e,n){return e=vY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vY(t){var e=_be(t,"string");return Rg(e)=="symbol"?e:e+""}function _be(t,e){if(Rg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Rg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Tbe(t,e){if(t==null)return{};var n=wbe(t,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function wbe(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function Abe(t){return t.value}function Ebe(t,e){if(De.isValidElement(t))return De.cloneElement(t,e);if(typeof t=="function")return De.createElement(t,e);e.ref;var n=Tbe(e,gbe);return De.createElement(DP,n)}var UF=1,fg=(function(t){function e(){var n;vbe(this,e);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return n=ybe(this,e,[].concat(r)),tw(n,"lastBoundingBox",{width:-1,height:-1}),n}return Mbe(e,t),xbe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var i=this.wrapperNode.getBoundingClientRect();return i.height=this.wrapperNode.offsetHeight,i.width=this.wrapperNode.offsetWidth,i}return null}},{key:"updateBBox",value:function(){var i=this.props.onBBoxUpdate,r=this.getBBox();r?(Math.abs(r.width-this.lastBoundingBox.width)>UF||Math.abs(r.height-this.lastBoundingBox.height)>UF)&&(this.lastBoundingBox.width=r.width,this.lastBoundingBox.height=r.height,i&&i(r)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,i&&i(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?yf({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(i){var r=this.props,a=r.layout,s=r.align,o=r.verticalAlign,l=r.margin,u=r.chartWidth,h=r.chartHeight,p,g;if(!i||(i.left===void 0||i.left===null)&&(i.right===void 0||i.right===null))if(s==="center"&&a==="vertical"){var x=this.getBBoxSnapshot();p={left:((u||0)-x.width)/2}}else p=s==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!i||(i.top===void 0||i.top===null)&&(i.bottom===void 0||i.bottom===null))if(o==="middle"){var b=this.getBBoxSnapshot();g={top:((h||0)-b.height)/2}}else g=o==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return yf(yf({},p),g)}},{key:"render",value:function(){var i=this,r=this.props,a=r.content,s=r.width,o=r.height,l=r.wrapperStyle,u=r.payloadUniqBy,h=r.payload,p=yf(yf({position:"absolute",width:s||"auto",height:o||"auto"},this.getDefaultPosition(l)),l);return De.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:function(x){i.wrapperNode=x}},Ebe(a,yf(yf({},this.props),{},{payload:mY(h,u,Abe)})))}}],[{key:"getWithHeight",value:function(i,r){var a=yf(yf({},this.defaultProps),i.props),s=a.layout;return s==="vertical"&&kt(i.props.height)?{height:i.props.height}:s==="horizontal"?{width:i.props.width||r}:null}}])})(z.PureComponent);tw(fg,"displayName","Legend");tw(fg,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var HR,LF;function Cbe(){if(LF)return HR;LF=1;var t=Bb(),e=IP(),n=So(),i=t?t.isConcatSpreadable:void 0;function r(a){return n(a)||e(a)||!!(i&&a&&a[i])}return HR=r,HR}var qR,BF;function xY(){if(BF)return qR;BF=1;var t=sY(),e=Cbe();function n(i,r,a,s,o){var l=-1,u=i.length;for(a||(a=e),o||(o=[]);++l<u;){var h=i[l];r>0&&a(h)?r>1?n(h,r-1,a,s,o):t(o,h):s||(o[o.length]=h)}return o}return qR=n,qR}var WR,zF;function Rbe(){if(zF)return WR;zF=1;function t(e){return function(n,i,r){for(var a=-1,s=Object(n),o=r(n),l=o.length;l--;){var u=o[e?l:++a];if(i(s[u],u,s)===!1)break}return n}}return WR=t,WR}var XR,kF;function jbe(){if(kF)return XR;kF=1;var t=Rbe(),e=t();return XR=e,XR}var $R,FF;function yY(){if(FF)return $R;FF=1;var t=jbe(),e=ew();function n(i,r){return i&&t(i,r,e)}return $R=n,$R}var YR,GF;function Nbe(){if(GF)return YR;GF=1;var t=kb();function e(n,i){return function(r,a){if(r==null)return r;if(!t(r))return n(r,a);for(var s=r.length,o=i?s:-1,l=Object(r);(i?o--:++o<s)&&a(l[o],o,l)!==!1;);return r}}return YR=e,YR}var ZR,VF;function zP(){if(VF)return ZR;VF=1;var t=yY(),e=Nbe(),n=e(t);return ZR=n,ZR}var KR,HF;function bY(){if(HF)return KR;HF=1;var t=zP(),e=kb();function n(i,r){var a=-1,s=e(i)?Array(i.length):[];return t(i,function(o,l,u){s[++a]=r(o,l,u)}),s}return KR=n,KR}var QR,qF;function Obe(){if(qF)return QR;qF=1;function t(e,n){var i=e.length;for(e.sort(n);i--;)e[i]=e[i].value;return e}return QR=t,QR}var JR,WF;function Dbe(){if(WF)return JR;WF=1;var t=av();function e(n,i){if(n!==i){var r=n!==void 0,a=n===null,s=n===n,o=t(n),l=i!==void 0,u=i===null,h=i===i,p=t(i);if(!u&&!p&&!o&&n>i||o&&l&&h&&!u&&!p||a&&l&&h||!r&&h||!s)return 1;if(!a&&!o&&!p&&n<i||p&&r&&s&&!a&&!o||u&&r&&s||!l&&s||!h)return-1}return 0}return JR=e,JR}var e4,XF;function Pbe(){if(XF)return e4;XF=1;var t=Dbe();function e(n,i,r){for(var a=-1,s=n.criteria,o=i.criteria,l=s.length,u=r.length;++a<l;){var h=t(s[a],o[a]);if(h){if(a>=u)return h;var p=r[a];return h*(p=="desc"?-1:1)}}return n.index-i.index}return e4=e,e4}var t4,$F;function Ibe(){if($F)return t4;$F=1;var t=wP(),e=AP(),n=ad(),i=bY(),r=Obe(),a=lY(),s=Pbe(),o=lv(),l=So();function u(h,p,g){p.length?p=t(p,function(M){return l(M)?function(S){return e(S,M.length===1?M[0]:M)}:M}):p=[o];var x=-1;p=t(p,a(n));var b=i(h,function(M,S,T){var A=t(p,function(E){return E(M)});return{criteria:A,index:++x,value:M}});return r(b,function(M,S){return s(M,S,g)})}return t4=u,t4}var n4,YF;function Ube(){if(YF)return n4;YF=1;function t(e,n,i){switch(i.length){case 0:return e.call(n);case 1:return e.call(n,i[0]);case 2:return e.call(n,i[0],i[1]);case 3:return e.call(n,i[0],i[1],i[2])}return e.apply(n,i)}return n4=t,n4}var i4,ZF;function Lbe(){if(ZF)return i4;ZF=1;var t=Ube(),e=Math.max;function n(i,r,a){return r=e(r===void 0?i.length-1:r,0),function(){for(var s=arguments,o=-1,l=e(s.length-r,0),u=Array(l);++o<l;)u[o]=s[r+o];o=-1;for(var h=Array(r+1);++o<r;)h[o]=s[o];return h[r]=a(u),t(i,this,h)}}return i4=n,i4}var r4,KF;function Bbe(){if(KF)return r4;KF=1;function t(e){return function(){return e}}return r4=t,r4}var a4,QF;function SY(){if(QF)return a4;QF=1;var t=cp(),e=(function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}})();return a4=e,a4}var s4,JF;function zbe(){if(JF)return s4;JF=1;var t=Bbe(),e=SY(),n=lv(),i=e?function(r,a){return e(r,"toString",{configurable:!0,enumerable:!1,value:t(a),writable:!0})}:n;return s4=i,s4}var o4,eG;function kbe(){if(eG)return o4;eG=1;var t=800,e=16,n=Date.now;function i(r){var a=0,s=0;return function(){var o=n(),l=e-(o-s);if(s=o,l>0){if(++a>=t)return arguments[0]}else a=0;return r.apply(void 0,arguments)}}return o4=i,o4}var l4,tG;function Fbe(){if(tG)return l4;tG=1;var t=zbe(),e=kbe(),n=e(t);return l4=n,l4}var c4,nG;function Gbe(){if(nG)return c4;nG=1;var t=lv(),e=Lbe(),n=Fbe();function i(r,a){return n(e(r,a,t),r+"")}return c4=i,c4}var u4,iG;function nw(){if(iG)return u4;iG=1;var t=MP(),e=kb(),n=UP(),i=rd();function r(a,s,o){if(!i(o))return!1;var l=typeof s;return(l=="number"?e(o)&&n(s,o.length):l=="string"&&s in o)?t(o[s],a):!1}return u4=r,u4}var f4,rG;function Vbe(){if(rG)return f4;rG=1;var t=xY(),e=Ibe(),n=Gbe(),i=nw(),r=n(function(a,s){if(a==null)return[];var o=s.length;return o>1&&i(a,s[0],s[1])?s=[]:o>2&&i(s[0],s[1],s[2])&&(s=[s[0]]),e(a,t(s,1),[])});return f4=r,f4}var Hbe=Vbe();const kP=ki(Hbe);function j1(t){"@babel/helpers - typeof";return j1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j1(t)}function DN(){return DN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},DN.apply(this,arguments)}function qbe(t,e){return Ybe(t)||$be(t,e)||Xbe(t,e)||Wbe()}function Wbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xbe(t,e){if(t){if(typeof t=="string")return aG(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aG(t,e)}}function aG(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function $be(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,r,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(i=a.call(n)).done)&&(o.push(i.value),o.length!==e);l=!0);}catch(h){u=!0,r=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}function Ybe(t){if(Array.isArray(t))return t}function sG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function h4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sG(Object(n),!0).forEach(function(i){Zbe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sG(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Zbe(t,e,n){return e=Kbe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kbe(t){var e=Qbe(t,"string");return j1(e)=="symbol"?e:e+""}function Qbe(t,e){if(j1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(j1(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jbe(t){return Array.isArray(t)&&Ma(t[0])&&Ma(t[1])?t.join(" ~ "):t}var e2e=function(e){var n=e.separator,i=n===void 0?" : ":n,r=e.contentStyle,a=r===void 0?{}:r,s=e.itemStyle,o=s===void 0?{}:s,l=e.labelStyle,u=l===void 0?{}:l,h=e.payload,p=e.formatter,g=e.itemSorter,x=e.wrapperClassName,b=e.labelClassName,M=e.label,S=e.labelFormatter,T=e.accessibilityLayer,A=T===void 0?!1:T,E=function(){if(h&&h.length){var G={padding:0,margin:0},H=(g?kP(h,g):h).map(function(W,Y){if(W.type==="none")return null;var k=h4({display:"block",paddingTop:4,paddingBottom:4,color:W.color||"#000"},o),$=W.formatter||p||Jbe,ee=W.value,te=W.name,ae=ee,q=te;if($&&ae!=null&&q!=null){var K=$(ee,te,W,Y,h);if(Array.isArray(K)){var ie=qbe(K,2);ae=ie[0],q=ie[1]}else ae=K}return De.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Y),style:k},Ma(q)?De.createElement("span",{className:"recharts-tooltip-item-name"},q):null,Ma(q)?De.createElement("span",{className:"recharts-tooltip-item-separator"},i):null,De.createElement("span",{className:"recharts-tooltip-item-value"},ae),De.createElement("span",{className:"recharts-tooltip-item-unit"},W.unit||""))});return De.createElement("ul",{className:"recharts-tooltip-item-list",style:G},H)}return null},j=h4({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),R=h4({margin:0},u),C=!si(M),D=C?M:"",U=vi("recharts-default-tooltip",x),I=vi("recharts-tooltip-label",b);C&&S&&h!==void 0&&h!==null&&(D=S(M,h));var L=A?{role:"status","aria-live":"assertive"}:{};return De.createElement("div",DN({className:U,style:j},L),De.createElement("p",{className:I,style:R},De.isValidElement(D)?D:"".concat(D)),E())};function N1(t){"@babel/helpers - typeof";return N1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N1(t)}function AM(t,e,n){return e=t2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t2e(t){var e=n2e(t,"string");return N1(e)=="symbol"?e:e+""}function n2e(t,e){if(N1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(N1(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fy="recharts-tooltip-wrapper",i2e={visibility:"hidden"};function r2e(t){var e=t.coordinate,n=t.translateX,i=t.translateY;return vi(fy,AM(AM(AM(AM({},"".concat(fy,"-right"),kt(n)&&e&&kt(e.x)&&n>=e.x),"".concat(fy,"-left"),kt(n)&&e&&kt(e.x)&&n<e.x),"".concat(fy,"-bottom"),kt(i)&&e&&kt(e.y)&&i>=e.y),"".concat(fy,"-top"),kt(i)&&e&&kt(e.y)&&i<e.y))}function oG(t){var e=t.allowEscapeViewBox,n=t.coordinate,i=t.key,r=t.offsetTopLeft,a=t.position,s=t.reverseDirection,o=t.tooltipDimension,l=t.viewBox,u=t.viewBoxDimension;if(a&&kt(a[i]))return a[i];var h=n[i]-o-r,p=n[i]+r;if(e[i])return s[i]?h:p;if(s[i]){var g=h,x=l[i];return g<x?Math.max(p,l[i]):Math.max(h,l[i])}var b=p+o,M=l[i]+u;return b>M?Math.max(h,l[i]):Math.max(p,l[i])}function a2e(t){var e=t.translateX,n=t.translateY,i=t.useTranslate3d;return{transform:i?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function s2e(t){var e=t.allowEscapeViewBox,n=t.coordinate,i=t.offsetTopLeft,r=t.position,a=t.reverseDirection,s=t.tooltipBox,o=t.useTranslate3d,l=t.viewBox,u,h,p;return s.height>0&&s.width>0&&n?(h=oG({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:i,position:r,reverseDirection:a,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),p=oG({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:i,position:r,reverseDirection:a,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),u=a2e({translateX:h,translateY:p,useTranslate3d:o})):u=i2e,{cssProperties:u,cssClasses:r2e({translateX:h,translateY:p,coordinate:n})}}function jg(t){"@babel/helpers - typeof";return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jg(t)}function lG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function cG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lG(Object(n),!0).forEach(function(i){IN(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lG(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function o2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l2e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_Y(i.key),i)}}function c2e(t,e,n){return e&&l2e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function u2e(t,e,n){return e=p3(e),f2e(t,MY()?Reflect.construct(e,n||[],p3(t).constructor):e.apply(t,n))}function f2e(t,e){if(e&&(jg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h2e(t)}function h2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function MY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MY=function(){return!!t})()}function p3(t){return p3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},p3(t)}function d2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PN(t,e)}function PN(t,e){return PN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},PN(t,e)}function IN(t,e,n){return e=_Y(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Y(t){var e=p2e(t,"string");return jg(e)=="symbol"?e:e+""}function p2e(t,e){if(jg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(jg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var uG=1,m2e=(function(t){function e(){var n;o2e(this,e);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return n=u2e(this,e,[].concat(r)),IN(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),IN(n,"handleKeyDown",function(s){if(s.key==="Escape"){var o,l,u,h;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&o!==void 0?o:0,y:(u=(h=n.props.coordinate)===null||h===void 0?void 0:h.y)!==null&&u!==void 0?u:0}})}}),n}return d2e(e,t),c2e(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var i=this.wrapperNode.getBoundingClientRect();(Math.abs(i.width-this.state.lastBoundingBox.width)>uG||Math.abs(i.height-this.state.lastBoundingBox.height)>uG)&&this.setState({lastBoundingBox:{width:i.width,height:i.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var i,r;this.props.active&&this.updateBBox(),this.state.dismissed&&(((i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var i=this,r=this.props,a=r.active,s=r.allowEscapeViewBox,o=r.animationDuration,l=r.animationEasing,u=r.children,h=r.coordinate,p=r.hasPayload,g=r.isAnimationActive,x=r.offset,b=r.position,M=r.reverseDirection,S=r.useTranslate3d,T=r.viewBox,A=r.wrapperStyle,E=s2e({allowEscapeViewBox:s,coordinate:h,offsetTopLeft:x,position:b,reverseDirection:M,tooltipBox:this.state.lastBoundingBox,useTranslate3d:S,viewBox:T}),j=E.cssClasses,R=E.cssProperties,C=cG(cG({transition:g&&a?"transform ".concat(o,"ms ").concat(l):void 0},R),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&p?"visible":"hidden",position:"absolute",top:0,left:0},A);return De.createElement("div",{tabIndex:-1,className:j,style:C,ref:function(U){i.wrapperNode=U}},u)}}])})(z.PureComponent),g2e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},cv={isSsr:g2e()};function Ng(t){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ng(t)}function fG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function hG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fG(Object(n),!0).forEach(function(i){FP(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fG(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function v2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x2e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,wY(i.key),i)}}function y2e(t,e,n){return e&&x2e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function b2e(t,e,n){return e=m3(e),S2e(t,TY()?Reflect.construct(e,n||[],m3(t).constructor):e.apply(t,n))}function S2e(t,e){if(e&&(Ng(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M2e(t)}function M2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TY=function(){return!!t})()}function m3(t){return m3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},m3(t)}function _2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UN(t,e)}function UN(t,e){return UN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},UN(t,e)}function FP(t,e,n){return e=wY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wY(t){var e=T2e(t,"string");return Ng(e)=="symbol"?e:e+""}function T2e(t,e){if(Ng(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Ng(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function w2e(t){return t.dataKey}function A2e(t,e){return De.isValidElement(t)?De.cloneElement(t,e):typeof t=="function"?De.createElement(t,e):De.createElement(e2e,e)}var bf=(function(t){function e(){return v2e(this,e),b2e(this,e,arguments)}return _2e(e,t),y2e(e,[{key:"render",value:function(){var i=this,r=this.props,a=r.active,s=r.allowEscapeViewBox,o=r.animationDuration,l=r.animationEasing,u=r.content,h=r.coordinate,p=r.filterNull,g=r.isAnimationActive,x=r.offset,b=r.payload,M=r.payloadUniqBy,S=r.position,T=r.reverseDirection,A=r.useTranslate3d,E=r.viewBox,j=r.wrapperStyle,R=b??[];p&&R.length&&(R=mY(b.filter(function(D){return D.value!=null&&(D.hide!==!0||i.props.includeHidden)}),M,w2e));var C=R.length>0;return De.createElement(m2e,{allowEscapeViewBox:s,animationDuration:o,animationEasing:l,isAnimationActive:g,active:a,coordinate:h,hasPayload:C,offset:x,position:S,reverseDirection:T,useTranslate3d:A,viewBox:E,wrapperStyle:j},A2e(u,hG(hG({},this.props),{},{payload:R})))}}])})(z.PureComponent);FP(bf,"displayName","Tooltip");FP(bf,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!cv.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var d4,dG;function E2e(){if(dG)return d4;dG=1;var t=Ru(),e=function(){return t.Date.now()};return d4=e,d4}var p4,pG;function C2e(){if(pG)return p4;pG=1;var t=/\s/;function e(n){for(var i=n.length;i--&&t.test(n.charAt(i)););return i}return p4=e,p4}var m4,mG;function R2e(){if(mG)return m4;mG=1;var t=C2e(),e=/^\s+/;function n(i){return i&&i.slice(0,t(i)+1).replace(e,"")}return m4=n,m4}var g4,gG;function AY(){if(gG)return g4;gG=1;var t=R2e(),e=rd(),n=av(),i=NaN,r=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function l(u){if(typeof u=="number")return u;if(n(u))return i;if(e(u)){var h=typeof u.valueOf=="function"?u.valueOf():u;u=e(h)?h+"":h}if(typeof u!="string")return u===0?u:+u;u=t(u);var p=a.test(u);return p||s.test(u)?o(u.slice(2),p?2:8):r.test(u)?i:+u}return g4=l,g4}var v4,vG;function j2e(){if(vG)return v4;vG=1;var t=rd(),e=E2e(),n=AY(),i="Expected a function",r=Math.max,a=Math.min;function s(o,l,u){var h,p,g,x,b,M,S=0,T=!1,A=!1,E=!0;if(typeof o!="function")throw new TypeError(i);l=n(l)||0,t(u)&&(T=!!u.leading,A="maxWait"in u,g=A?r(n(u.maxWait)||0,l):g,E="trailing"in u?!!u.trailing:E);function j(H){var W=h,Y=p;return h=p=void 0,S=H,x=o.apply(Y,W),x}function R(H){return S=H,b=setTimeout(U,l),T?j(H):x}function C(H){var W=H-M,Y=H-S,k=l-W;return A?a(k,g-Y):k}function D(H){var W=H-M,Y=H-S;return M===void 0||W>=l||W<0||A&&Y>=g}function U(){var H=e();if(D(H))return I(H);b=setTimeout(U,C(H))}function I(H){return b=void 0,E&&h?j(H):(h=p=void 0,x)}function L(){b!==void 0&&clearTimeout(b),S=0,h=M=p=b=void 0}function F(){return b===void 0?x:I(e())}function G(){var H=e(),W=D(H);if(h=arguments,p=this,M=H,W){if(b===void 0)return R(M);if(A)return clearTimeout(b),b=setTimeout(U,l),j(M)}return b===void 0&&(b=setTimeout(U,l)),x}return G.cancel=L,G.flush=F,G}return v4=s,v4}var x4,xG;function N2e(){if(xG)return x4;xG=1;var t=j2e(),e=rd(),n="Expected a function";function i(r,a,s){var o=!0,l=!0;if(typeof r!="function")throw new TypeError(n);return e(s)&&(o="leading"in s?!!s.leading:o,l="trailing"in s?!!s.trailing:l),t(r,a,{leading:o,maxWait:a,trailing:l})}return x4=i,x4}var O2e=N2e();const EY=ki(O2e);function O1(t){"@babel/helpers - typeof";return O1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O1(t)}function yG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function EM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yG(Object(n),!0).forEach(function(i){D2e(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yG(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function D2e(t,e,n){return e=P2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function P2e(t){var e=I2e(t,"string");return O1(e)=="symbol"?e:e+""}function I2e(t,e){if(O1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(O1(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function U2e(t,e){return k2e(t)||z2e(t,e)||B2e(t,e)||L2e()}function L2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B2e(t,e){if(t){if(typeof t=="string")return bG(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bG(t,e)}}function bG(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function z2e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,r,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(i=a.call(n)).done)&&(o.push(i.value),o.length!==e);l=!0);}catch(h){u=!0,r=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}function k2e(t){if(Array.isArray(t))return t}var F2e=z.forwardRef(function(t,e){var n=t.aspect,i=t.initialDimension,r=i===void 0?{width:-1,height:-1}:i,a=t.width,s=a===void 0?"100%":a,o=t.height,l=o===void 0?"100%":o,u=t.minWidth,h=u===void 0?0:u,p=t.minHeight,g=t.maxHeight,x=t.children,b=t.debounce,M=b===void 0?0:b,S=t.id,T=t.className,A=t.onResize,E=t.style,j=E===void 0?{}:E,R=z.useRef(null),C=z.useRef();C.current=A,z.useImperativeHandle(e,function(){return Object.defineProperty(R.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),R.current},configurable:!0})});var D=z.useState({containerWidth:r.width,containerHeight:r.height}),U=U2e(D,2),I=U[0],L=U[1],F=z.useCallback(function(H,W){L(function(Y){var k=Math.round(H),$=Math.round(W);return Y.containerWidth===k&&Y.containerHeight===$?Y:{containerWidth:k,containerHeight:$}})},[]);z.useEffect(function(){var H=function(te){var ae,q=te[0].contentRect,K=q.width,ie=q.height;F(K,ie),(ae=C.current)===null||ae===void 0||ae.call(C,K,ie)};M>0&&(H=EY(H,M,{trailing:!0,leading:!1}));var W=new ResizeObserver(H),Y=R.current.getBoundingClientRect(),k=Y.width,$=Y.height;return F(k,$),W.observe(R.current),function(){W.disconnect()}},[F,M]);var G=z.useMemo(function(){var H=I.containerWidth,W=I.containerHeight;if(H<0||W<0)return null;k0(j0(s)||j0(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,l),k0(!n||n>0,"The aspect(%s) must be greater than zero.",n);var Y=j0(s)?H:s,k=j0(l)?W:l;n&&n>0&&(Y?k=Y/n:k&&(Y=k*n),g&&k>g&&(k=g)),k0(Y>0||k>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Y,k,s,l,h,p,n);var $=!Array.isArray(x)&&Rf(x.type).endsWith("Chart");return De.Children.map(x,function(ee){return De.isValidElement(ee)?z.cloneElement(ee,EM({width:Y,height:k},$?{style:EM({height:"100%",width:"100%",maxHeight:k,maxWidth:Y},ee.props.style)}:{})):ee})},[n,x,l,g,p,h,I,s]);return De.createElement("div",{id:S?"".concat(S):void 0,className:vi("recharts-responsive-container",T),style:EM(EM({},j),{},{width:s,height:l,minWidth:h,minHeight:p,maxHeight:g}),ref:R},G)}),CY=function(e){return null};CY.displayName="Cell";function D1(t){"@babel/helpers - typeof";return D1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D1(t)}function SG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function LN(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SG(Object(n),!0).forEach(function(i){G2e(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SG(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function G2e(t,e,n){return e=V2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V2e(t){var e=H2e(t,"string");return D1(e)=="symbol"?e:e+""}function H2e(t,e){if(D1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(D1(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qm={widthCache:{},cacheCount:0},q2e=2e3,W2e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},MG="recharts_measurement_span";function X2e(t){var e=LN({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var $y=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||cv.isSsr)return{width:0,height:0};var i=X2e(n),r=JSON.stringify({text:e,copyStyle:i});if(qm.widthCache[r])return qm.widthCache[r];try{var a=document.getElementById(MG);a||(a=document.createElement("span"),a.setAttribute("id",MG),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=LN(LN({},W2e),i);Object.assign(a.style,s),a.textContent="".concat(e);var o=a.getBoundingClientRect(),l={width:o.width,height:o.height};return qm.widthCache[r]=l,++qm.cacheCount>q2e&&(qm.cacheCount=0,qm.widthCache={}),l}catch{return{width:0,height:0}}},$2e=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function P1(t){"@babel/helpers - typeof";return P1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P1(t)}function g3(t,e){return Q2e(t)||K2e(t,e)||Z2e(t,e)||Y2e()}function Y2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z2e(t,e){if(t){if(typeof t=="string")return _G(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _G(t,e)}}function _G(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function K2e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,r,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=a.call(n)).done)&&(o.push(i.value),o.length!==e);l=!0);}catch(h){u=!0,r=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}function Q2e(t){if(Array.isArray(t))return t}function J2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function TG(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,tSe(i.key),i)}}function eSe(t,e,n){return e&&TG(t.prototype,e),n&&TG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function tSe(t){var e=nSe(t,"string");return P1(e)=="symbol"?e:e+""}function nSe(t,e){if(P1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(P1(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var wG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,AG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,iSe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,rSe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,RY={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},aSe=Object.keys(RY),ag="NaN";function sSe(t,e){return t*RY[e]}var CM=(function(){function t(e,n){J2e(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!iSe.test(n)&&(this.num=NaN,this.unit=""),aSe.includes(n)&&(this.num=sSe(e,n),this.unit="px")}return eSe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var i,r=(i=rSe.exec(n))!==null&&i!==void 0?i:[],a=g3(r,3),s=a[1],o=a[2];return new t(parseFloat(s),o??"")}}])})();function jY(t){if(t.includes(ag))return ag;for(var e=t;e.includes("*")||e.includes("/");){var n,i=(n=wG.exec(e))!==null&&n!==void 0?n:[],r=g3(i,4),a=r[1],s=r[2],o=r[3],l=CM.parse(a??""),u=CM.parse(o??""),h=s==="*"?l.multiply(u):l.divide(u);if(h.isNaN())return ag;e=e.replace(wG,h.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var p,g=(p=AG.exec(e))!==null&&p!==void 0?p:[],x=g3(g,4),b=x[1],M=x[2],S=x[3],T=CM.parse(b??""),A=CM.parse(S??""),E=M==="+"?T.add(A):T.subtract(A);if(E.isNaN())return ag;e=e.replace(AG,E.toString())}return e}var EG=/\(([^()]*)\)/;function oSe(t){for(var e=t;e.includes("(");){var n=EG.exec(e),i=g3(n,2),r=i[1];e=e.replace(EG,jY(r))}return e}function lSe(t){var e=t.replace(/\s+/g,"");return e=oSe(e),e=jY(e),e}function cSe(t){try{return lSe(t)}catch{return ag}}function y4(t){var e=cSe(t.slice(5,-1));return e===ag?"":e}var uSe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],fSe=["dx","dy","angle","className","breakAll"];function BN(){return BN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},BN.apply(this,arguments)}function CG(t,e){if(t==null)return{};var n=hSe(t,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function hSe(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function RG(t,e){return gSe(t)||mSe(t,e)||pSe(t,e)||dSe()}function dSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pSe(t,e){if(t){if(typeof t=="string")return jG(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jG(t,e)}}function jG(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function mSe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,r,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=a.call(n)).done)&&(o.push(i.value),o.length!==e);l=!0);}catch(h){u=!0,r=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}function gSe(t){if(Array.isArray(t))return t}var NY=/[ \f\n\r\t\v\u2028\u2029]+/,OY=function(e){var n=e.children,i=e.breakAll,r=e.style;try{var a=[];si(n)||(i?a=n.toString().split(""):a=n.toString().split(NY));var s=a.map(function(l){return{word:l,width:$y(l,r).width}}),o=i?0:$y("",r).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},vSe=function(e,n,i,r,a){var s=e.maxLines,o=e.children,l=e.style,u=e.breakAll,h=kt(s),p=o,g=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Y.reduce(function(k,$){var ee=$.word,te=$.width,ae=k[k.length-1];if(ae&&(r==null||a||ae.width+te+i<Number(r)))ae.words.push(ee),ae.width+=te+i;else{var q={words:[ee],width:te};k.push(q)}return k},[])},x=g(n),b=function(Y){return Y.reduce(function(k,$){return k.width>$.width?k:$})};if(!h)return x;for(var M="",S=function(Y){var k=p.slice(0,Y),$=OY({breakAll:u,style:l,children:k+M}).wordsWithComputedWidth,ee=g($),te=ee.length>s||b(ee).width>Number(r);return[te,ee]},T=0,A=p.length-1,E=0,j;T<=A&&E<=p.length-1;){var R=Math.floor((T+A)/2),C=R-1,D=S(C),U=RG(D,2),I=U[0],L=U[1],F=S(R),G=RG(F,1),H=G[0];if(!I&&!H&&(T=R+1),I&&H&&(A=R-1),!I&&H){j=L;break}E++}return j||x},NG=function(e){var n=si(e)?[]:e.toString().split(NY);return[{words:n}]},xSe=function(e){var n=e.width,i=e.scaleToFit,r=e.children,a=e.style,s=e.breakAll,o=e.maxLines;if((n||i)&&!cv.isSsr){var l,u,h=OY({breakAll:s,children:r,style:a});if(h){var p=h.wordsWithComputedWidth,g=h.spaceWidth;l=p,u=g}else return NG(r);return vSe({breakAll:s,children:r,maxLines:o,style:a},l,u,n,i)}return NG(r)},OG="#808080",v3=function(e){var n=e.x,i=n===void 0?0:n,r=e.y,a=r===void 0?0:r,s=e.lineHeight,o=s===void 0?"1em":s,l=e.capHeight,u=l===void 0?"0.71em":l,h=e.scaleToFit,p=h===void 0?!1:h,g=e.textAnchor,x=g===void 0?"start":g,b=e.verticalAnchor,M=b===void 0?"end":b,S=e.fill,T=S===void 0?OG:S,A=CG(e,uSe),E=z.useMemo(function(){return xSe({breakAll:A.breakAll,children:A.children,maxLines:A.maxLines,scaleToFit:p,style:A.style,width:A.width})},[A.breakAll,A.children,A.maxLines,p,A.style,A.width]),j=A.dx,R=A.dy,C=A.angle,D=A.className,U=A.breakAll,I=CG(A,fSe);if(!Ma(i)||!Ma(a))return null;var L=i+(kt(j)?j:0),F=a+(kt(R)?R:0),G;switch(M){case"start":G=y4("calc(".concat(u,")"));break;case"middle":G=y4("calc(".concat((E.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:G=y4("calc(".concat(E.length-1," * -").concat(o,")"));break}var H=[];if(p){var W=E[0].width,Y=A.width;H.push("scale(".concat((kt(Y)?Y/W:1)/W,")"))}return C&&H.push("rotate(".concat(C,", ").concat(L,", ").concat(F,")")),H.length&&(I.transform=H.join(" ")),De.createElement("text",BN({},ri(I,!0),{x:L,y:F,className:vi("recharts-text",D),textAnchor:x,fill:T.includes("url")?OG:T}),E.map(function(k,$){var ee=k.words.join(U?"":" ");return De.createElement("tspan",{x:L,dy:$===0?G:o,key:"".concat(ee,"-").concat($)},ee)}))};function qh(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ySe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function GP(t){let e,n,i;t.length!==2?(e=qh,n=(o,l)=>qh(t(o),l),i=(o,l)=>t(o)-l):(e=t===qh||t===ySe?t:bSe,n=t,i=t);function r(o,l,u=0,h=o.length){if(u<h){if(e(l,l)!==0)return h;do{const p=u+h>>>1;n(o[p],l)<0?u=p+1:h=p}while(u<h)}return u}function a(o,l,u=0,h=o.length){if(u<h){if(e(l,l)!==0)return h;do{const p=u+h>>>1;n(o[p],l)<=0?u=p+1:h=p}while(u<h)}return u}function s(o,l,u=0,h=o.length){const p=r(o,l,u,h-1);return p>u&&i(o[p-1],l)>-i(o[p],l)?p-1:p}return{left:r,center:s,right:a}}function bSe(){return 0}function DY(t){return t===null?NaN:+t}function*SSe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const MSe=GP(qh),Fb=MSe.right;GP(DY).center;class DG extends Map{constructor(e,n=wSe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(PG(this,e))}has(e){return super.has(PG(this,e))}set(e,n){return super.set(_Se(this,e),n)}delete(e){return super.delete(TSe(this,e))}}function PG({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function _Se({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function TSe({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function wSe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function ASe(t=qh){if(t===qh)return PY;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function PY(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const ESe=Math.sqrt(50),CSe=Math.sqrt(10),RSe=Math.sqrt(2);function x3(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),a=i/Math.pow(10,r),s=a>=ESe?10:a>=CSe?5:a>=RSe?2:1;let o,l,u;return r<0?(u=Math.pow(10,-r)/s,o=Math.round(t*u),l=Math.round(e*u),o/u<t&&++o,l/u>e&&--l,u=-u):(u=Math.pow(10,r)*s,o=Math.round(t/u),l=Math.round(e/u),o*u<t&&++o,l*u>e&&--l),l<o&&.5<=n&&n<2?x3(t,e,n*2):[o,l,u]}function zN(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,a,s]=i?x3(e,t,n):x3(t,e,n);if(!(a>=r))return[];const o=a-r+1,l=new Array(o);if(i)if(s<0)for(let u=0;u<o;++u)l[u]=(a-u)/-s;else for(let u=0;u<o;++u)l[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)l[u]=(r+u)/-s;else for(let u=0;u<o;++u)l[u]=(r+u)*s;return l}function kN(t,e,n){return e=+e,t=+t,n=+n,x3(t,e,n)[2]}function FN(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?kN(e,t,n):kN(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function IG(t,e){let n;for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);return n}function UG(t,e){let n;for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);return n}function IY(t,e,n=0,i=1/0,r){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(r=r===void 0?PY:ASe(r);i>n;){if(i-n>600){const l=i-n+1,u=e-n+1,h=Math.log(l),p=.5*Math.exp(2*h/3),g=.5*Math.sqrt(h*p*(l-p)/l)*(u-l/2<0?-1:1),x=Math.max(n,Math.floor(e-u*p/l+g)),b=Math.min(i,Math.floor(e+(l-u)*p/l+g));IY(t,e,x,b,r)}const a=t[e];let s=n,o=i;for(hy(t,n,e),r(t[i],a)>0&&hy(t,n,i);s<o;){for(hy(t,s,o),++s,--o;r(t[s],a)<0;)++s;for(;r(t[o],a)>0;)--o}r(t[n],a)===0?hy(t,n,o):(++o,hy(t,o,i)),o<=e&&(n=o+1),e<=o&&(i=o-1)}return t}function hy(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function jSe(t,e,n){if(t=Float64Array.from(SSe(t)),!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return UG(t);if(e>=1)return IG(t);var i,r=(i-1)*e,a=Math.floor(r),s=IG(IY(t,a).subarray(0,a+1)),o=UG(t.subarray(a+1));return s+(o-s)*(r-a)}}function NSe(t,e,n=DY){if(!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,a=Math.floor(r),s=+n(t[a],a,t),o=+n(t[a+1],a+1,t);return s+(o-s)*(r-a)}}function OSe(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(r);++i<r;)a[i]=t+i*n;return a}function Bl(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function kf(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const GN=Symbol("implicit");function VP(){var t=new DG,e=[],n=[],i=GN;function r(a){let s=t.get(a);if(s===void 0){if(i!==GN)return i;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return r.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new DG;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return r},r.range=function(a){return arguments.length?(n=Array.from(a),r):n.slice()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return VP(e,n).unknown(i)},Bl.apply(r,arguments),r}function I1(){var t=VP().unknown(void 0),e=t.domain,n=t.range,i=0,r=1,a,s,o=!1,l=0,u=0,h=.5;delete t.unknown;function p(){var g=e().length,x=r<i,b=x?r:i,M=x?i:r;a=(M-b)/Math.max(1,g-l+u*2),o&&(a=Math.floor(a)),b+=(M-b-a*(g-l))*h,s=a*(1-l),o&&(b=Math.round(b),s=Math.round(s));var S=OSe(g).map(function(T){return b+a*T});return n(x?S.reverse():S)}return t.domain=function(g){return arguments.length?(e(g),p()):e()},t.range=function(g){return arguments.length?([i,r]=g,i=+i,r=+r,p()):[i,r]},t.rangeRound=function(g){return[i,r]=g,i=+i,r=+r,o=!0,p()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(g){return arguments.length?(o=!!g,p()):o},t.padding=function(g){return arguments.length?(l=Math.min(1,u=+g),p()):l},t.paddingInner=function(g){return arguments.length?(l=Math.min(1,g),p()):l},t.paddingOuter=function(g){return arguments.length?(u=+g,p()):u},t.align=function(g){return arguments.length?(h=Math.max(0,Math.min(1,g)),p()):h},t.copy=function(){return I1(e(),[i,r]).round(o).paddingInner(l).paddingOuter(u).align(h)},Bl.apply(p(),arguments)}function UY(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return UY(e())},t}function Yy(){return UY(I1.apply(null,arguments).paddingInner(1))}function HP(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function LY(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Gb(){}var U1=.7,y3=1/U1,hg="\\s*([+-]?\\d+)\\s*",L1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",bu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",DSe=/^#([0-9a-f]{3,8})$/,PSe=new RegExp(`^rgb\\(${hg},${hg},${hg}\\)$`),ISe=new RegExp(`^rgb\\(${bu},${bu},${bu}\\)$`),USe=new RegExp(`^rgba\\(${hg},${hg},${hg},${L1}\\)$`),LSe=new RegExp(`^rgba\\(${bu},${bu},${bu},${L1}\\)$`),BSe=new RegExp(`^hsl\\(${L1},${bu},${bu}\\)$`),zSe=new RegExp(`^hsla\\(${L1},${bu},${bu},${L1}\\)$`),LG={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};HP(Gb,B1,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:BG,formatHex:BG,formatHex8:kSe,formatHsl:FSe,formatRgb:zG,toString:zG});function BG(){return this.rgb().formatHex()}function kSe(){return this.rgb().formatHex8()}function FSe(){return BY(this).formatHsl()}function zG(){return this.rgb().formatRgb()}function B1(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=DSe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?kG(e):n===3?new yo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?RM(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?RM(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=PSe.exec(t))?new yo(e[1],e[2],e[3],1):(e=ISe.exec(t))?new yo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=USe.exec(t))?RM(e[1],e[2],e[3],e[4]):(e=LSe.exec(t))?RM(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=BSe.exec(t))?VG(e[1],e[2]/100,e[3]/100,1):(e=zSe.exec(t))?VG(e[1],e[2]/100,e[3]/100,e[4]):LG.hasOwnProperty(t)?kG(LG[t]):t==="transparent"?new yo(NaN,NaN,NaN,0):null}function kG(t){return new yo(t>>16&255,t>>8&255,t&255,1)}function RM(t,e,n,i){return i<=0&&(t=e=n=NaN),new yo(t,e,n,i)}function GSe(t){return t instanceof Gb||(t=B1(t)),t?(t=t.rgb(),new yo(t.r,t.g,t.b,t.opacity)):new yo}function VN(t,e,n,i){return arguments.length===1?GSe(t):new yo(t,e,n,i??1)}function yo(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}HP(yo,VN,LY(Gb,{brighter(t){return t=t==null?y3:Math.pow(y3,t),new yo(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?U1:Math.pow(U1,t),new yo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new yo(F0(this.r),F0(this.g),F0(this.b),b3(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:FG,formatHex:FG,formatHex8:VSe,formatRgb:GG,toString:GG}));function FG(){return`#${N0(this.r)}${N0(this.g)}${N0(this.b)}`}function VSe(){return`#${N0(this.r)}${N0(this.g)}${N0(this.b)}${N0((isNaN(this.opacity)?1:this.opacity)*255)}`}function GG(){const t=b3(this.opacity);return`${t===1?"rgb(":"rgba("}${F0(this.r)}, ${F0(this.g)}, ${F0(this.b)}${t===1?")":`, ${t})`}`}function b3(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function F0(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function N0(t){return t=F0(t),(t<16?"0":"")+t.toString(16)}function VG(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new bc(t,e,n,i)}function BY(t){if(t instanceof bc)return new bc(t.h,t.s,t.l,t.opacity);if(t instanceof Gb||(t=B1(t)),!t)return new bc;if(t instanceof bc)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),a=Math.max(e,n,i),s=NaN,o=a-r,l=(a+r)/2;return o?(e===a?s=(n-i)/o+(n<i)*6:n===a?s=(i-e)/o+2:s=(e-n)/o+4,o/=l<.5?a+r:2-a-r,s*=60):o=l>0&&l<1?0:s,new bc(s,o,l,t.opacity)}function HSe(t,e,n,i){return arguments.length===1?BY(t):new bc(t,e,n,i??1)}function bc(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}HP(bc,HSe,LY(Gb,{brighter(t){return t=t==null?y3:Math.pow(y3,t),new bc(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?U1:Math.pow(U1,t),new bc(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new yo(b4(t>=240?t-240:t+120,r,i),b4(t,r,i),b4(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new bc(HG(this.h),jM(this.s),jM(this.l),b3(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=b3(this.opacity);return`${t===1?"hsl(":"hsla("}${HG(this.h)}, ${jM(this.s)*100}%, ${jM(this.l)*100}%${t===1?")":`, ${t})`}`}}));function HG(t){return t=(t||0)%360,t<0?t+360:t}function jM(t){return Math.max(0,Math.min(1,t||0))}function b4(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const qP=t=>()=>t;function qSe(t,e){return function(n){return t+n*e}}function WSe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function XSe(t){return(t=+t)==1?zY:function(e,n){return n-e?WSe(e,n,t):qP(isNaN(e)?n:e)}}function zY(t,e){var n=e-t;return n?qSe(t,n):qP(isNaN(t)?e:t)}const qG=(function t(e){var n=XSe(e);function i(r,a){var s=n((r=VN(r)).r,(a=VN(a)).r),o=n(r.g,a.g),l=n(r.b,a.b),u=zY(r.opacity,a.opacity);return function(h){return r.r=s(h),r.g=o(h),r.b=l(h),r.opacity=u(h),r+""}}return i.gamma=t,i})(1);function $Se(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(a){for(r=0;r<n;++r)i[r]=t[r]*(1-a)+e[r]*a;return i}}function YSe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ZSe(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),a=new Array(n),s;for(s=0;s<i;++s)r[s]=uv(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<i;++s)a[s]=r[s](o);return a}}function KSe(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function S3(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function QSe(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=uv(t[r],e[r]):i[r]=e[r];return function(a){for(r in n)i[r]=n[r](a);return i}}var HN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,S4=new RegExp(HN.source,"g");function JSe(t){return function(){return t}}function eMe(t){return function(e){return t(e)+""}}function tMe(t,e){var n=HN.lastIndex=S4.lastIndex=0,i,r,a,s=-1,o=[],l=[];for(t=t+"",e=e+"";(i=HN.exec(t))&&(r=S4.exec(e));)(a=r.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(i=i[0])===(r=r[0])?o[s]?o[s]+=r:o[++s]=r:(o[++s]=null,l.push({i:s,x:S3(i,r)})),n=S4.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?eMe(l[0].x):JSe(e):(e=l.length,function(u){for(var h=0,p;h<e;++h)o[(p=l[h]).i]=p.x(u);return o.join("")})}function uv(t,e){var n=typeof e,i;return e==null||n==="boolean"?qP(e):(n==="number"?S3:n==="string"?(i=B1(e))?(e=i,qG):tMe:e instanceof B1?qG:e instanceof Date?KSe:YSe(e)?$Se:Array.isArray(e)?ZSe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?QSe:S3)(t,e)}function WP(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function nMe(t,e){e===void 0&&(e=t,t=uv);for(var n=0,i=e.length-1,r=e[0],a=new Array(i<0?0:i);n<i;)a[n]=t(r,r=e[++n]);return function(s){var o=Math.max(0,Math.min(i-1,Math.floor(s*=i)));return a[o](s-o)}}function iMe(t){return function(){return t}}function M3(t){return+t}var WG=[0,1];function Qs(t){return t}function qN(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:iMe(isNaN(e)?NaN:.5)}function rMe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function aMe(t,e,n){var i=t[0],r=t[1],a=e[0],s=e[1];return r<i?(i=qN(r,i),a=n(s,a)):(i=qN(i,r),a=n(a,s)),function(o){return a(i(o))}}function sMe(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),a=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)r[s]=qN(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var l=Fb(t,o,1,i)-1;return a[l](r[l](o))}}function Vb(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function iw(){var t=WG,e=WG,n=uv,i,r,a,s=Qs,o,l,u;function h(){var g=Math.min(t.length,e.length);return s!==Qs&&(s=rMe(t[0],t[g-1])),o=g>2?sMe:aMe,l=u=null,p}function p(g){return g==null||isNaN(g=+g)?a:(l||(l=o(t.map(i),e,n)))(i(s(g)))}return p.invert=function(g){return s(r((u||(u=o(e,t.map(i),S3)))(g)))},p.domain=function(g){return arguments.length?(t=Array.from(g,M3),h()):t.slice()},p.range=function(g){return arguments.length?(e=Array.from(g),h()):e.slice()},p.rangeRound=function(g){return e=Array.from(g),n=WP,h()},p.clamp=function(g){return arguments.length?(s=g?!0:Qs,h()):s!==Qs},p.interpolate=function(g){return arguments.length?(n=g,h()):n},p.unknown=function(g){return arguments.length?(a=g,p):a},function(g,x){return i=g,r=x,h()}}function XP(){return iw()(Qs,Qs)}function oMe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function _3(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Og(t){return t=_3(Math.abs(t)),t?t[1]:NaN}function lMe(t,e){return function(n,i){for(var r=n.length,a=[],s=0,o=t[0],l=0;r>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),a.push(n.substring(r-=o,r+o)),!((l+=o+1)>i));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function cMe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var uMe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function z1(t){if(!(e=uMe.exec(t)))throw new Error("invalid format: "+t);var e;return new $P({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}z1.prototype=$P.prototype;function $P(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}$P.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function fMe(t){e:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break e;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var kY;function hMe(t,e){var n=_3(t,e);if(!n)return t+"";var i=n[0],r=n[1],a=r-(kY=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+_3(t,Math.max(0,e+a-1))[0]}function XG(t,e){var n=_3(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const $G={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:oMe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>XG(t*100,e),r:XG,s:hMe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function YG(t){return t}var ZG=Array.prototype.map,KG=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function dMe(t){var e=t.grouping===void 0||t.thousands===void 0?YG:lMe(ZG.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?YG:cMe(ZG.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(p){p=z1(p);var g=p.fill,x=p.align,b=p.sign,M=p.symbol,S=p.zero,T=p.width,A=p.comma,E=p.precision,j=p.trim,R=p.type;R==="n"?(A=!0,R="g"):$G[R]||(E===void 0&&(E=12),j=!0,R="g"),(S||g==="0"&&x==="=")&&(S=!0,g="0",x="=");var C=M==="$"?n:M==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",D=M==="$"?i:/[%p]/.test(R)?s:"",U=$G[R],I=/[defgprs%]/.test(R);E=E===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function L(F){var G=C,H=D,W,Y,k;if(R==="c")H=U(F)+H,F="";else{F=+F;var $=F<0||1/F<0;if(F=isNaN(F)?l:U(Math.abs(F),E),j&&(F=fMe(F)),$&&+F==0&&b!=="+"&&($=!1),G=($?b==="("?b:o:b==="-"||b==="("?"":b)+G,H=(R==="s"?KG[8+kY/3]:"")+H+($&&b==="("?")":""),I){for(W=-1,Y=F.length;++W<Y;)if(k=F.charCodeAt(W),48>k||k>57){H=(k===46?r+F.slice(W+1):F.slice(W))+H,F=F.slice(0,W);break}}}A&&!S&&(F=e(F,1/0));var ee=G.length+F.length+H.length,te=ee<T?new Array(T-ee+1).join(g):"";switch(A&&S&&(F=e(te+F,te.length?T-H.length:1/0),te=""),x){case"<":F=G+F+H+te;break;case"=":F=G+te+F+H;break;case"^":F=te.slice(0,ee=te.length>>1)+G+F+H+te.slice(ee);break;default:F=te+G+F+H;break}return a(F)}return L.toString=function(){return p+""},L}function h(p,g){var x=u((p=z1(p),p.type="f",p)),b=Math.max(-8,Math.min(8,Math.floor(Og(g)/3)))*3,M=Math.pow(10,-b),S=KG[8+b/3];return function(T){return x(M*T)+S}}return{format:u,formatPrefix:h}}var NM,YP,FY;pMe({thousands:",",grouping:[3],currency:["$",""]});function pMe(t){return NM=dMe(t),YP=NM.format,FY=NM.formatPrefix,NM}function mMe(t){return Math.max(0,-Og(Math.abs(t)))}function gMe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Og(e)/3)))*3-Og(Math.abs(t)))}function vMe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Og(e)-Og(t))+1}function GY(t,e,n,i){var r=FN(t,e,n),a;switch(i=z1(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(a=gMe(r,s))&&(i.precision=a),FY(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=vMe(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=mMe(r))&&(i.precision=a-(i.type==="%")*2);break}}return YP(i)}function sd(t){var e=t.domain;return t.ticks=function(n){var i=e();return zN(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return GY(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,a=i.length-1,s=i[r],o=i[a],l,u,h=10;for(o<s&&(u=s,s=o,o=u,u=r,r=a,a=u);h-- >0;){if(u=kN(s,o,n),u===l)return i[r]=s,i[a]=o,e(i);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;l=u}return t},t}function T3(){var t=XP();return t.copy=function(){return Vb(t,T3())},Bl.apply(t,arguments),sd(t)}function VY(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,M3),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return VY(t).unknown(e)},t=arguments.length?Array.from(t,M3):[0,1],sd(n)}function HY(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],a=t[i],s;return a<r&&(s=n,n=i,i=s,s=r,r=a,a=s),t[n]=e.floor(r),t[i]=e.ceil(a),t}function QG(t){return Math.log(t)}function JG(t){return Math.exp(t)}function xMe(t){return-Math.log(-t)}function yMe(t){return-Math.exp(-t)}function bMe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function SMe(t){return t===10?bMe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function MMe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function e9(t){return(e,n)=>-t(-e,n)}function ZP(t){const e=t(QG,JG),n=e.domain;let i=10,r,a;function s(){return r=MMe(i),a=SMe(i),n()[0]<0?(r=e9(r),a=e9(a),t(xMe,yMe)):t(QG,JG),e}return e.base=function(o){return arguments.length?(i=+o,s()):i},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=o=>{const l=n();let u=l[0],h=l[l.length-1];const p=h<u;p&&([u,h]=[h,u]);let g=r(u),x=r(h),b,M;const S=o==null?10:+o;let T=[];if(!(i%1)&&x-g<S){if(g=Math.floor(g),x=Math.ceil(x),u>0){for(;g<=x;++g)for(b=1;b<i;++b)if(M=g<0?b/a(-g):b*a(g),!(M<u)){if(M>h)break;T.push(M)}}else for(;g<=x;++g)for(b=i-1;b>=1;--b)if(M=g>0?b/a(-g):b*a(g),!(M<u)){if(M>h)break;T.push(M)}T.length*2<S&&(T=zN(u,h,S))}else T=zN(g,x,Math.min(x-g,S)).map(a);return p?T.reverse():T},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=z1(l)).precision==null&&(l.trim=!0),l=YP(l)),o===1/0)return l;const u=Math.max(1,i*o/e.ticks().length);return h=>{let p=h/a(Math.round(r(h)));return p*i<i-.5&&(p*=i),p<=u?l(h):""}},e.nice=()=>n(HY(n(),{floor:o=>a(Math.floor(r(o))),ceil:o=>a(Math.ceil(r(o)))})),e}function qY(){const t=ZP(iw()).domain([1,10]);return t.copy=()=>Vb(t,qY()).base(t.base()),Bl.apply(t,arguments),t}function t9(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function n9(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function KP(t){var e=1,n=t(t9(e),n9(e));return n.constant=function(i){return arguments.length?t(t9(e=+i),n9(e)):e},sd(n)}function WY(){var t=KP(iw());return t.copy=function(){return Vb(t,WY()).constant(t.constant())},Bl.apply(t,arguments)}function i9(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function _Me(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function TMe(t){return t<0?-t*t:t*t}function QP(t){var e=t(Qs,Qs),n=1;function i(){return n===1?t(Qs,Qs):n===.5?t(_Me,TMe):t(i9(n),i9(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},sd(e)}function JP(){var t=QP(iw());return t.copy=function(){return Vb(t,JP()).exponent(t.exponent())},Bl.apply(t,arguments),t}function wMe(){return JP.apply(null,arguments).exponent(.5)}function r9(t){return Math.sign(t)*t*t}function AMe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function XY(){var t=XP(),e=[0,1],n=!1,i;function r(a){var s=AMe(t(a));return isNaN(s)?i:n?Math.round(s):s}return r.invert=function(a){return t.invert(r9(a))},r.domain=function(a){return arguments.length?(t.domain(a),r):t.domain()},r.range=function(a){return arguments.length?(t.range((e=Array.from(a,M3)).map(r9)),r):e.slice()},r.rangeRound=function(a){return r.range(a).round(!0)},r.round=function(a){return arguments.length?(n=!!a,r):n},r.clamp=function(a){return arguments.length?(t.clamp(a),r):t.clamp()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return XY(t.domain(),e).round(n).clamp(t.clamp()).unknown(i)},Bl.apply(r,arguments),sd(r)}function $Y(){var t=[],e=[],n=[],i;function r(){var s=0,o=Math.max(1,e.length);for(n=new Array(o-1);++s<o;)n[s-1]=NSe(t,s/o);return a}function a(s){return s==null||isNaN(s=+s)?i:e[Fb(n,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let o of s)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(qh),r()},a.range=function(s){return arguments.length?(e=Array.from(s),r()):e.slice()},a.unknown=function(s){return arguments.length?(i=s,a):i},a.quantiles=function(){return n.slice()},a.copy=function(){return $Y().domain(t).range(e).unknown(i)},Bl.apply(a,arguments)}function YY(){var t=0,e=1,n=1,i=[.5],r=[0,1],a;function s(l){return l!=null&&l<=l?r[Fb(i,l,0,n)]:a}function o(){var l=-1;for(i=new Array(n);++l<n;)i[l]=((l+1)*e-(l-n)*t)/(n+1);return s}return s.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,o()):[t,e]},s.range=function(l){return arguments.length?(n=(r=Array.from(l)).length-1,o()):r.slice()},s.invertExtent=function(l){var u=r.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,i[0]]:u>=n?[i[n-1],e]:[i[u-1],i[u]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return i.slice()},s.copy=function(){return YY().domain([t,e]).range(r).unknown(a)},Bl.apply(sd(s),arguments)}function ZY(){var t=[.5],e=[0,1],n,i=1;function r(a){return a!=null&&a<=a?e[Fb(t,a,0,i)]:n}return r.domain=function(a){return arguments.length?(t=Array.from(a),i=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(a){return arguments.length?(e=Array.from(a),i=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},r.unknown=function(a){return arguments.length?(n=a,r):n},r.copy=function(){return ZY().domain(t).range(e).unknown(n)},Bl.apply(r,arguments)}const M4=new Date,_4=new Date;function Aa(t,e,n,i){function r(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return r.floor=a=>(t(a=new Date(+a)),a),r.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),r.round=a=>{const s=r(a),o=r.ceil(a);return a-s<o-a?s:o},r.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),r.range=(a,s,o)=>{const l=[];if(a=r.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return l;let u;do l.push(u=new Date(+a)),e(a,o),t(a);while(u<a&&a<s);return l},r.filter=a=>Aa(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),n&&(r.count=(a,s)=>(M4.setTime(+a),_4.setTime(+s),t(M4),t(_4),Math.floor(n(M4,_4))),r.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?r.filter(i?s=>i(s)%a===0:s=>r.count(0,s)%a===0):r)),r}const w3=Aa(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);w3.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Aa(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):w3);w3.range;const _f=1e3,Nl=_f*60,Tf=Nl*60,Of=Tf*24,eI=Of*7,a9=Of*30,T4=Of*365,O0=Aa(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*_f)},(t,e)=>(e-t)/_f,t=>t.getUTCSeconds());O0.range;const tI=Aa(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*_f)},(t,e)=>{t.setTime(+t+e*Nl)},(t,e)=>(e-t)/Nl,t=>t.getMinutes());tI.range;const nI=Aa(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Nl)},(t,e)=>(e-t)/Nl,t=>t.getUTCMinutes());nI.range;const iI=Aa(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*_f-t.getMinutes()*Nl)},(t,e)=>{t.setTime(+t+e*Tf)},(t,e)=>(e-t)/Tf,t=>t.getHours());iI.range;const rI=Aa(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Tf)},(t,e)=>(e-t)/Tf,t=>t.getUTCHours());rI.range;const Hb=Aa(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Nl)/Of,t=>t.getDate()-1);Hb.range;const rw=Aa(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Of,t=>t.getUTCDate()-1);rw.range;const KY=Aa(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Of,t=>Math.floor(t/Of));KY.range;function up(t){return Aa(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Nl)/eI)}const aw=up(0),A3=up(1),EMe=up(2),CMe=up(3),Dg=up(4),RMe=up(5),jMe=up(6);aw.range;A3.range;EMe.range;CMe.range;Dg.range;RMe.range;jMe.range;function fp(t){return Aa(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/eI)}const sw=fp(0),E3=fp(1),NMe=fp(2),OMe=fp(3),Pg=fp(4),DMe=fp(5),PMe=fp(6);sw.range;E3.range;NMe.range;OMe.range;Pg.range;DMe.range;PMe.range;const aI=Aa(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());aI.range;const sI=Aa(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());sI.range;const Df=Aa(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Df.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Aa(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Df.range;const Pf=Aa(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Pf.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Aa(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Pf.range;function QY(t,e,n,i,r,a){const s=[[O0,1,_f],[O0,5,5*_f],[O0,15,15*_f],[O0,30,30*_f],[a,1,Nl],[a,5,5*Nl],[a,15,15*Nl],[a,30,30*Nl],[r,1,Tf],[r,3,3*Tf],[r,6,6*Tf],[r,12,12*Tf],[i,1,Of],[i,2,2*Of],[n,1,eI],[e,1,a9],[e,3,3*a9],[t,1,T4]];function o(u,h,p){const g=h<u;g&&([u,h]=[h,u]);const x=p&&typeof p.range=="function"?p:l(u,h,p),b=x?x.range(u,+h+1):[];return g?b.reverse():b}function l(u,h,p){const g=Math.abs(h-u)/p,x=GP(([,,S])=>S).right(s,g);if(x===s.length)return t.every(FN(u/T4,h/T4,p));if(x===0)return w3.every(Math.max(FN(u,h,p),1));const[b,M]=s[g/s[x-1][2]<s[x][2]/g?x-1:x];return b.every(M)}return[o,l]}const[IMe,UMe]=QY(Pf,sI,sw,KY,rI,nI),[LMe,BMe]=QY(Df,aI,aw,Hb,iI,tI);function w4(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function A4(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function dy(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function zMe(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,a=t.days,s=t.shortDays,o=t.months,l=t.shortMonths,u=py(r),h=my(r),p=py(a),g=my(a),x=py(s),b=my(s),M=py(o),S=my(o),T=py(l),A=my(l),E={a:$,A:ee,b:te,B:ae,c:null,d:f9,e:f9,f:l_e,g:x_e,G:b_e,H:a_e,I:s_e,j:o_e,L:JY,m:c_e,M:u_e,p:q,q:K,Q:p9,s:m9,S:f_e,u:h_e,U:d_e,V:p_e,w:m_e,W:g_e,x:null,X:null,y:v_e,Y:y_e,Z:S_e,"%":d9},j={a:ie,A:ue,b:me,B:fe,c:null,d:h9,e:h9,f:w_e,g:I_e,G:L_e,H:M_e,I:__e,j:T_e,L:tZ,m:A_e,M:E_e,p:de,q:_e,Q:p9,s:m9,S:C_e,u:R_e,U:j_e,V:N_e,w:O_e,W:D_e,x:null,X:null,y:P_e,Y:U_e,Z:B_e,"%":d9},R={a:L,A:F,b:G,B:H,c:W,d:c9,e:c9,f:t_e,g:l9,G:o9,H:u9,I:u9,j:KMe,L:e_e,m:ZMe,M:QMe,p:I,q:YMe,Q:i_e,s:r_e,S:JMe,u:HMe,U:qMe,V:WMe,w:VMe,W:XMe,x:Y,X:k,y:l9,Y:o9,Z:$Me,"%":n_e};E.x=C(n,E),E.X=C(i,E),E.c=C(e,E),j.x=C(n,j),j.X=C(i,j),j.c=C(e,j);function C(Te,Ie){return function(Re){var ye=[],ct=-1,Ce=0,re=Te.length,Le,He,Ue;for(Re instanceof Date||(Re=new Date(+Re));++ct<re;)Te.charCodeAt(ct)===37&&(ye.push(Te.slice(Ce,ct)),(He=s9[Le=Te.charAt(++ct)])!=null?Le=Te.charAt(++ct):He=Le==="e"?" ":"0",(Ue=Ie[Le])&&(Le=Ue(Re,He)),ye.push(Le),Ce=ct+1);return ye.push(Te.slice(Ce,ct)),ye.join("")}}function D(Te,Ie){return function(Re){var ye=dy(1900,void 0,1),ct=U(ye,Te,Re+="",0),Ce,re;if(ct!=Re.length)return null;if("Q"in ye)return new Date(ye.Q);if("s"in ye)return new Date(ye.s*1e3+("L"in ye?ye.L:0));if(Ie&&!("Z"in ye)&&(ye.Z=0),"p"in ye&&(ye.H=ye.H%12+ye.p*12),ye.m===void 0&&(ye.m="q"in ye?ye.q:0),"V"in ye){if(ye.V<1||ye.V>53)return null;"w"in ye||(ye.w=1),"Z"in ye?(Ce=A4(dy(ye.y,0,1)),re=Ce.getUTCDay(),Ce=re>4||re===0?E3.ceil(Ce):E3(Ce),Ce=rw.offset(Ce,(ye.V-1)*7),ye.y=Ce.getUTCFullYear(),ye.m=Ce.getUTCMonth(),ye.d=Ce.getUTCDate()+(ye.w+6)%7):(Ce=w4(dy(ye.y,0,1)),re=Ce.getDay(),Ce=re>4||re===0?A3.ceil(Ce):A3(Ce),Ce=Hb.offset(Ce,(ye.V-1)*7),ye.y=Ce.getFullYear(),ye.m=Ce.getMonth(),ye.d=Ce.getDate()+(ye.w+6)%7)}else("W"in ye||"U"in ye)&&("w"in ye||(ye.w="u"in ye?ye.u%7:"W"in ye?1:0),re="Z"in ye?A4(dy(ye.y,0,1)).getUTCDay():w4(dy(ye.y,0,1)).getDay(),ye.m=0,ye.d="W"in ye?(ye.w+6)%7+ye.W*7-(re+5)%7:ye.w+ye.U*7-(re+6)%7);return"Z"in ye?(ye.H+=ye.Z/100|0,ye.M+=ye.Z%100,A4(ye)):w4(ye)}}function U(Te,Ie,Re,ye){for(var ct=0,Ce=Ie.length,re=Re.length,Le,He;ct<Ce;){if(ye>=re)return-1;if(Le=Ie.charCodeAt(ct++),Le===37){if(Le=Ie.charAt(ct++),He=R[Le in s9?Ie.charAt(ct++):Le],!He||(ye=He(Te,Re,ye))<0)return-1}else if(Le!=Re.charCodeAt(ye++))return-1}return ye}function I(Te,Ie,Re){var ye=u.exec(Ie.slice(Re));return ye?(Te.p=h.get(ye[0].toLowerCase()),Re+ye[0].length):-1}function L(Te,Ie,Re){var ye=x.exec(Ie.slice(Re));return ye?(Te.w=b.get(ye[0].toLowerCase()),Re+ye[0].length):-1}function F(Te,Ie,Re){var ye=p.exec(Ie.slice(Re));return ye?(Te.w=g.get(ye[0].toLowerCase()),Re+ye[0].length):-1}function G(Te,Ie,Re){var ye=T.exec(Ie.slice(Re));return ye?(Te.m=A.get(ye[0].toLowerCase()),Re+ye[0].length):-1}function H(Te,Ie,Re){var ye=M.exec(Ie.slice(Re));return ye?(Te.m=S.get(ye[0].toLowerCase()),Re+ye[0].length):-1}function W(Te,Ie,Re){return U(Te,e,Ie,Re)}function Y(Te,Ie,Re){return U(Te,n,Ie,Re)}function k(Te,Ie,Re){return U(Te,i,Ie,Re)}function $(Te){return s[Te.getDay()]}function ee(Te){return a[Te.getDay()]}function te(Te){return l[Te.getMonth()]}function ae(Te){return o[Te.getMonth()]}function q(Te){return r[+(Te.getHours()>=12)]}function K(Te){return 1+~~(Te.getMonth()/3)}function ie(Te){return s[Te.getUTCDay()]}function ue(Te){return a[Te.getUTCDay()]}function me(Te){return l[Te.getUTCMonth()]}function fe(Te){return o[Te.getUTCMonth()]}function de(Te){return r[+(Te.getUTCHours()>=12)]}function _e(Te){return 1+~~(Te.getUTCMonth()/3)}return{format:function(Te){var Ie=C(Te+="",E);return Ie.toString=function(){return Te},Ie},parse:function(Te){var Ie=D(Te+="",!1);return Ie.toString=function(){return Te},Ie},utcFormat:function(Te){var Ie=C(Te+="",j);return Ie.toString=function(){return Te},Ie},utcParse:function(Te){var Ie=D(Te+="",!0);return Ie.toString=function(){return Te},Ie}}}var s9={"-":"",_:" ",0:"0"},ka=/^\s*\d+/,kMe=/^%/,FMe=/[\\^$*+?|[\]().{}]/g;function Ci(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(e)+r:r)}function GMe(t){return t.replace(FMe,"\\$&")}function py(t){return new RegExp("^(?:"+t.map(GMe).join("|")+")","i")}function my(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function VMe(t,e,n){var i=ka.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function HMe(t,e,n){var i=ka.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function qMe(t,e,n){var i=ka.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function WMe(t,e,n){var i=ka.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function XMe(t,e,n){var i=ka.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function o9(t,e,n){var i=ka.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function l9(t,e,n){var i=ka.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function $Me(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function YMe(t,e,n){var i=ka.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function ZMe(t,e,n){var i=ka.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function c9(t,e,n){var i=ka.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function KMe(t,e,n){var i=ka.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function u9(t,e,n){var i=ka.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function QMe(t,e,n){var i=ka.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function JMe(t,e,n){var i=ka.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function e_e(t,e,n){var i=ka.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function t_e(t,e,n){var i=ka.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function n_e(t,e,n){var i=kMe.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function i_e(t,e,n){var i=ka.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function r_e(t,e,n){var i=ka.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function f9(t,e){return Ci(t.getDate(),e,2)}function a_e(t,e){return Ci(t.getHours(),e,2)}function s_e(t,e){return Ci(t.getHours()%12||12,e,2)}function o_e(t,e){return Ci(1+Hb.count(Df(t),t),e,3)}function JY(t,e){return Ci(t.getMilliseconds(),e,3)}function l_e(t,e){return JY(t,e)+"000"}function c_e(t,e){return Ci(t.getMonth()+1,e,2)}function u_e(t,e){return Ci(t.getMinutes(),e,2)}function f_e(t,e){return Ci(t.getSeconds(),e,2)}function h_e(t){var e=t.getDay();return e===0?7:e}function d_e(t,e){return Ci(aw.count(Df(t)-1,t),e,2)}function eZ(t){var e=t.getDay();return e>=4||e===0?Dg(t):Dg.ceil(t)}function p_e(t,e){return t=eZ(t),Ci(Dg.count(Df(t),t)+(Df(t).getDay()===4),e,2)}function m_e(t){return t.getDay()}function g_e(t,e){return Ci(A3.count(Df(t)-1,t),e,2)}function v_e(t,e){return Ci(t.getFullYear()%100,e,2)}function x_e(t,e){return t=eZ(t),Ci(t.getFullYear()%100,e,2)}function y_e(t,e){return Ci(t.getFullYear()%1e4,e,4)}function b_e(t,e){var n=t.getDay();return t=n>=4||n===0?Dg(t):Dg.ceil(t),Ci(t.getFullYear()%1e4,e,4)}function S_e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ci(e/60|0,"0",2)+Ci(e%60,"0",2)}function h9(t,e){return Ci(t.getUTCDate(),e,2)}function M_e(t,e){return Ci(t.getUTCHours(),e,2)}function __e(t,e){return Ci(t.getUTCHours()%12||12,e,2)}function T_e(t,e){return Ci(1+rw.count(Pf(t),t),e,3)}function tZ(t,e){return Ci(t.getUTCMilliseconds(),e,3)}function w_e(t,e){return tZ(t,e)+"000"}function A_e(t,e){return Ci(t.getUTCMonth()+1,e,2)}function E_e(t,e){return Ci(t.getUTCMinutes(),e,2)}function C_e(t,e){return Ci(t.getUTCSeconds(),e,2)}function R_e(t){var e=t.getUTCDay();return e===0?7:e}function j_e(t,e){return Ci(sw.count(Pf(t)-1,t),e,2)}function nZ(t){var e=t.getUTCDay();return e>=4||e===0?Pg(t):Pg.ceil(t)}function N_e(t,e){return t=nZ(t),Ci(Pg.count(Pf(t),t)+(Pf(t).getUTCDay()===4),e,2)}function O_e(t){return t.getUTCDay()}function D_e(t,e){return Ci(E3.count(Pf(t)-1,t),e,2)}function P_e(t,e){return Ci(t.getUTCFullYear()%100,e,2)}function I_e(t,e){return t=nZ(t),Ci(t.getUTCFullYear()%100,e,2)}function U_e(t,e){return Ci(t.getUTCFullYear()%1e4,e,4)}function L_e(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Pg(t):Pg.ceil(t),Ci(t.getUTCFullYear()%1e4,e,4)}function B_e(){return"+0000"}function d9(){return"%"}function p9(t){return+t}function m9(t){return Math.floor(+t/1e3)}var Wm,iZ,rZ;z_e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function z_e(t){return Wm=zMe(t),iZ=Wm.format,Wm.parse,rZ=Wm.utcFormat,Wm.utcParse,Wm}function k_e(t){return new Date(t)}function F_e(t){return t instanceof Date?+t:+new Date(+t)}function oI(t,e,n,i,r,a,s,o,l,u){var h=XP(),p=h.invert,g=h.domain,x=u(".%L"),b=u(":%S"),M=u("%I:%M"),S=u("%I %p"),T=u("%a %d"),A=u("%b %d"),E=u("%B"),j=u("%Y");function R(C){return(l(C)<C?x:o(C)<C?b:s(C)<C?M:a(C)<C?S:i(C)<C?r(C)<C?T:A:n(C)<C?E:j)(C)}return h.invert=function(C){return new Date(p(C))},h.domain=function(C){return arguments.length?g(Array.from(C,F_e)):g().map(k_e)},h.ticks=function(C){var D=g();return t(D[0],D[D.length-1],C??10)},h.tickFormat=function(C,D){return D==null?R:u(D)},h.nice=function(C){var D=g();return(!C||typeof C.range!="function")&&(C=e(D[0],D[D.length-1],C??10)),C?g(HY(D,C)):h},h.copy=function(){return Vb(h,oI(t,e,n,i,r,a,s,o,l,u))},h}function G_e(){return Bl.apply(oI(LMe,BMe,Df,aI,aw,Hb,iI,tI,O0,iZ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function V_e(){return Bl.apply(oI(IMe,UMe,Pf,sI,sw,rw,rI,nI,O0,rZ).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ow(){var t=0,e=1,n,i,r,a,s=Qs,o=!1,l;function u(p){return p==null||isNaN(p=+p)?l:s(r===0?.5:(p=(a(p)-n)*r,o?Math.max(0,Math.min(1,p)):p))}u.domain=function(p){return arguments.length?([t,e]=p,n=a(t=+t),i=a(e=+e),r=n===i?0:1/(i-n),u):[t,e]},u.clamp=function(p){return arguments.length?(o=!!p,u):o},u.interpolator=function(p){return arguments.length?(s=p,u):s};function h(p){return function(g){var x,b;return arguments.length?([x,b]=g,s=p(x,b),u):[s(0),s(1)]}}return u.range=h(uv),u.rangeRound=h(WP),u.unknown=function(p){return arguments.length?(l=p,u):l},function(p){return a=p,n=p(t),i=p(e),r=n===i?0:1/(i-n),u}}function od(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function aZ(){var t=sd(ow()(Qs));return t.copy=function(){return od(t,aZ())},kf.apply(t,arguments)}function sZ(){var t=ZP(ow()).domain([1,10]);return t.copy=function(){return od(t,sZ()).base(t.base())},kf.apply(t,arguments)}function oZ(){var t=KP(ow());return t.copy=function(){return od(t,oZ()).constant(t.constant())},kf.apply(t,arguments)}function lI(){var t=QP(ow());return t.copy=function(){return od(t,lI()).exponent(t.exponent())},kf.apply(t,arguments)}function H_e(){return lI.apply(null,arguments).exponent(.5)}function lZ(){var t=[],e=Qs;function n(i){if(i!=null&&!isNaN(i=+i))return e((Fb(t,i,1)-1)/(t.length-1))}return n.domain=function(i){if(!arguments.length)return t.slice();t=[];for(let r of i)r!=null&&!isNaN(r=+r)&&t.push(r);return t.sort(qh),n},n.interpolator=function(i){return arguments.length?(e=i,n):e},n.range=function(){return t.map((i,r)=>e(r/(t.length-1)))},n.quantiles=function(i){return Array.from({length:i+1},(r,a)=>jSe(t,a/i))},n.copy=function(){return lZ(e).domain(t)},kf.apply(n,arguments)}function lw(){var t=0,e=.5,n=1,i=1,r,a,s,o,l,u=Qs,h,p=!1,g;function x(M){return isNaN(M=+M)?g:(M=.5+((M=+h(M))-a)*(i*M<i*a?o:l),u(p?Math.max(0,Math.min(1,M)):M))}x.domain=function(M){return arguments.length?([t,e,n]=M,r=h(t=+t),a=h(e=+e),s=h(n=+n),o=r===a?0:.5/(a-r),l=a===s?0:.5/(s-a),i=a<r?-1:1,x):[t,e,n]},x.clamp=function(M){return arguments.length?(p=!!M,x):p},x.interpolator=function(M){return arguments.length?(u=M,x):u};function b(M){return function(S){var T,A,E;return arguments.length?([T,A,E]=S,u=nMe(M,[T,A,E]),x):[u(0),u(.5),u(1)]}}return x.range=b(uv),x.rangeRound=b(WP),x.unknown=function(M){return arguments.length?(g=M,x):g},function(M){return h=M,r=M(t),a=M(e),s=M(n),o=r===a?0:.5/(a-r),l=a===s?0:.5/(s-a),i=a<r?-1:1,x}}function cZ(){var t=sd(lw()(Qs));return t.copy=function(){return od(t,cZ())},kf.apply(t,arguments)}function uZ(){var t=ZP(lw()).domain([.1,1,10]);return t.copy=function(){return od(t,uZ()).base(t.base())},kf.apply(t,arguments)}function fZ(){var t=KP(lw());return t.copy=function(){return od(t,fZ()).constant(t.constant())},kf.apply(t,arguments)}function cI(){var t=QP(lw());return t.copy=function(){return od(t,cI()).exponent(t.exponent())},kf.apply(t,arguments)}function q_e(){return cI.apply(null,arguments).exponent(.5)}const g9=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:I1,scaleDiverging:cZ,scaleDivergingLog:uZ,scaleDivergingPow:cI,scaleDivergingSqrt:q_e,scaleDivergingSymlog:fZ,scaleIdentity:VY,scaleImplicit:GN,scaleLinear:T3,scaleLog:qY,scaleOrdinal:VP,scalePoint:Yy,scalePow:JP,scaleQuantile:$Y,scaleQuantize:YY,scaleRadial:XY,scaleSequential:aZ,scaleSequentialLog:sZ,scaleSequentialPow:lI,scaleSequentialQuantile:lZ,scaleSequentialSqrt:H_e,scaleSequentialSymlog:oZ,scaleSqrt:wMe,scaleSymlog:WY,scaleThreshold:ZY,scaleTime:G_e,scaleUtc:V_e,tickFormat:GY},Symbol.toStringTag,{value:"Module"}));var E4,v9;function hZ(){if(v9)return E4;v9=1;var t=av();function e(n,i,r){for(var a=-1,s=n.length;++a<s;){var o=n[a],l=i(o);if(l!=null&&(u===void 0?l===l&&!t(l):r(l,u)))var u=l,h=o}return h}return E4=e,E4}var C4,x9;function W_e(){if(x9)return C4;x9=1;function t(e,n){return e>n}return C4=t,C4}var R4,y9;function X_e(){if(y9)return R4;y9=1;var t=hZ(),e=W_e(),n=lv();function i(r){return r&&r.length?t(r,n,e):void 0}return R4=i,R4}var $_e=X_e();const Vh=ki($_e);var j4,b9;function Y_e(){if(b9)return j4;b9=1;function t(e,n){return e<n}return j4=t,j4}var N4,S9;function Z_e(){if(S9)return N4;S9=1;var t=hZ(),e=Y_e(),n=lv();function i(r){return r&&r.length?t(r,n,e):void 0}return N4=i,N4}var K_e=Z_e();const cw=ki(K_e);var O4,M9;function Q_e(){if(M9)return O4;M9=1;var t=wP(),e=ad(),n=bY(),i=So();function r(a,s){var o=i(a)?t:n;return o(a,e(s,3))}return O4=r,O4}var D4,_9;function J_e(){if(_9)return D4;_9=1;var t=xY(),e=Q_e();function n(i,r){return t(e(i,r),1)}return D4=n,D4}var e3e=J_e();const t3e=ki(e3e);var P4,T9;function n3e(){if(T9)return P4;T9=1;var t=BP();function e(n,i){return t(n,i)}return P4=e,P4}var i3e=n3e();const k1=ki(i3e);var fv=1e9,r3e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},fI,Mr=!0,Pl="[DecimalError] ",G0=Pl+"Invalid argument: ",uI=Pl+"Exponent out of range: ",hv=Math.floor,S0=Math.pow,a3e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Vo,La=1e7,cr=7,dZ=9007199254740991,C3=hv(dZ/cr),tn={};tn.absoluteValue=tn.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};tn.comparedTo=tn.cmp=function(t){var e,n,i,r,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(i=a.d.length,r=t.d.length,e=0,n=i<r?i:r;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return i===r?0:i>r^a.s<0?1:-1};tn.decimalPlaces=tn.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*cr;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};tn.dividedBy=tn.div=function(t){return jf(this,new this.constructor(t))};tn.dividedToIntegerBy=tn.idiv=function(t){var e=this,n=e.constructor;return er(jf(e,new n(t),0,1),n.precision)};tn.equals=tn.eq=function(t){return!this.cmp(t)};tn.exponent=function(){return ca(this)};tn.greaterThan=tn.gt=function(t){return this.cmp(t)>0};tn.greaterThanOrEqualTo=tn.gte=function(t){return this.cmp(t)>=0};tn.isInteger=tn.isint=function(){return this.e>this.d.length-2};tn.isNegative=tn.isneg=function(){return this.s<0};tn.isPositive=tn.ispos=function(){return this.s>0};tn.isZero=function(){return this.s===0};tn.lessThan=tn.lt=function(t){return this.cmp(t)<0};tn.lessThanOrEqualTo=tn.lte=function(t){return this.cmp(t)<1};tn.logarithm=tn.log=function(t){var e,n=this,i=n.constructor,r=i.precision,a=r+5;if(t===void 0)t=new i(10);else if(t=new i(t),t.s<1||t.eq(Vo))throw Error(Pl+"NaN");if(n.s<1)throw Error(Pl+(n.s?"NaN":"-Infinity"));return n.eq(Vo)?new i(0):(Mr=!1,e=jf(F1(n,a),F1(t,a),a),Mr=!0,er(e,r))};tn.minus=tn.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?gZ(e,t):pZ(e,(t.s=-t.s,t))};tn.modulo=tn.mod=function(t){var e,n=this,i=n.constructor,r=i.precision;if(t=new i(t),!t.s)throw Error(Pl+"NaN");return n.s?(Mr=!1,e=jf(n,t,0,1).times(t),Mr=!0,n.minus(e)):er(new i(n),r)};tn.naturalExponential=tn.exp=function(){return mZ(this)};tn.naturalLogarithm=tn.ln=function(){return F1(this)};tn.negated=tn.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};tn.plus=tn.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?pZ(e,t):gZ(e,(t.s=-t.s,t))};tn.precision=tn.sd=function(t){var e,n,i,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(G0+t);if(e=ca(r)+1,i=r.d.length-1,n=i*cr+1,i=r.d[i],i){for(;i%10==0;i/=10)n--;for(i=r.d[0];i>=10;i/=10)n++}return t&&e>n?e:n};tn.squareRoot=tn.sqrt=function(){var t,e,n,i,r,a,s,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(Pl+"NaN")}for(t=ca(o),Mr=!1,r=Math.sqrt(+o),r==0||r==1/0?(e=gu(o.d),(e.length+t)%2==0&&(e+="0"),r=Math.sqrt(e),t=hv((t+1)/2)-(t<0||t%2),r==1/0?e="5e"+t:(e=r.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),i=new l(e)):i=new l(r.toString()),n=l.precision,r=s=n+3;;)if(a=i,i=a.plus(jf(o,a,s+2)).times(.5),gu(a.d).slice(0,s)===(e=gu(i.d)).slice(0,s)){if(e=e.slice(s-3,s+1),r==s&&e=="4999"){if(er(a,n+1,0),a.times(a).eq(o)){i=a;break}}else if(e!="9999")break;s+=4}return Mr=!0,er(i,n)};tn.times=tn.mul=function(t){var e,n,i,r,a,s,o,l,u,h=this,p=h.constructor,g=h.d,x=(t=new p(t)).d;if(!h.s||!t.s)return new p(0);for(t.s*=h.s,n=h.e+t.e,l=g.length,u=x.length,l<u&&(a=g,g=x,x=a,s=l,l=u,u=s),a=[],s=l+u,i=s;i--;)a.push(0);for(i=u;--i>=0;){for(e=0,r=l+i;r>i;)o=a[r]+x[i]*g[r-i-1]+e,a[r--]=o%La|0,e=o/La|0;a[r]=(a[r]+e)%La|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,Mr?er(t,p.precision):t};tn.toDecimalPlaces=tn.todp=function(t,e){var n=this,i=n.constructor;return n=new i(n),t===void 0?n:(wu(t,0,fv),e===void 0?e=i.rounding:wu(e,0,8),er(n,t+ca(n)+1,e))};tn.toExponential=function(t,e){var n,i=this,r=i.constructor;return t===void 0?n=ep(i,!0):(wu(t,0,fv),e===void 0?e=r.rounding:wu(e,0,8),i=er(new r(i),t+1,e),n=ep(i,!0,t+1)),n};tn.toFixed=function(t,e){var n,i,r=this,a=r.constructor;return t===void 0?ep(r):(wu(t,0,fv),e===void 0?e=a.rounding:wu(e,0,8),i=er(new a(r),t+ca(r)+1,e),n=ep(i.abs(),!1,t+ca(i)+1),r.isneg()&&!r.isZero()?"-"+n:n)};tn.toInteger=tn.toint=function(){var t=this,e=t.constructor;return er(new e(t),ca(t)+1,e.rounding)};tn.toNumber=function(){return+this};tn.toPower=tn.pow=function(t){var e,n,i,r,a,s,o=this,l=o.constructor,u=12,h=+(t=new l(t));if(!t.s)return new l(Vo);if(o=new l(o),!o.s){if(t.s<1)throw Error(Pl+"Infinity");return o}if(o.eq(Vo))return o;if(i=l.precision,t.eq(Vo))return er(o,i);if(e=t.e,n=t.d.length-1,s=e>=n,a=o.s,s){if((n=h<0?-h:h)<=dZ){for(r=new l(Vo),e=Math.ceil(i/cr+4),Mr=!1;n%2&&(r=r.times(o),A9(r.d,e)),n=hv(n/2),n!==0;)o=o.times(o),A9(o.d,e);return Mr=!0,t.s<0?new l(Vo).div(r):er(r,i)}}else if(a<0)throw Error(Pl+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,Mr=!1,r=t.times(F1(o,i+u)),Mr=!0,r=mZ(r),r.s=a,r};tn.toPrecision=function(t,e){var n,i,r=this,a=r.constructor;return t===void 0?(n=ca(r),i=ep(r,n<=a.toExpNeg||n>=a.toExpPos)):(wu(t,1,fv),e===void 0?e=a.rounding:wu(e,0,8),r=er(new a(r),t,e),n=ca(r),i=ep(r,t<=n||n<=a.toExpNeg,t)),i};tn.toSignificantDigits=tn.tosd=function(t,e){var n=this,i=n.constructor;return t===void 0?(t=i.precision,e=i.rounding):(wu(t,1,fv),e===void 0?e=i.rounding:wu(e,0,8)),er(new i(n),t,e)};tn.toString=tn.valueOf=tn.val=tn.toJSON=tn[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=ca(t),n=t.constructor;return ep(t,e<=n.toExpNeg||e>=n.toExpPos)};function pZ(t,e){var n,i,r,a,s,o,l,u,h=t.constructor,p=h.precision;if(!t.s||!e.s)return e.s||(e=new h(t)),Mr?er(e,p):e;if(l=t.d,u=e.d,s=t.e,r=e.e,l=l.slice(),a=s-r,a){for(a<0?(i=l,a=-a,o=u.length):(i=u,r=s,o=l.length),s=Math.ceil(p/cr),o=s>o?s+1:o+1,a>o&&(a=o,i.length=1),i.reverse();a--;)i.push(0);i.reverse()}for(o=l.length,a=u.length,o-a<0&&(a=o,i=u,u=l,l=i),n=0;a;)n=(l[--a]=l[a]+u[a]+n)/La|0,l[a]%=La;for(n&&(l.unshift(n),++r),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=r,Mr?er(e,p):e}function wu(t,e,n){if(t!==~~t||t<e||t>n)throw Error(G0+t)}function gu(t){var e,n,i,r=t.length-1,a="",s=t[0];if(r>0){for(a+=s,e=1;e<r;e++)i=t[e]+"",n=cr-i.length,n&&(a+=Bh(n)),a+=i;s=t[e],i=s+"",n=cr-i.length,n&&(a+=Bh(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var jf=(function(){function t(i,r){var a,s=0,o=i.length;for(i=i.slice();o--;)a=i[o]*r+s,i[o]=a%La|0,s=a/La|0;return s&&i.unshift(s),i}function e(i,r,a,s){var o,l;if(a!=s)l=a>s?1:-1;else for(o=l=0;o<a;o++)if(i[o]!=r[o]){l=i[o]>r[o]?1:-1;break}return l}function n(i,r,a){for(var s=0;a--;)i[a]-=s,s=i[a]<r[a]?1:0,i[a]=s*La+i[a]-r[a];for(;!i[0]&&i.length>1;)i.shift()}return function(i,r,a,s){var o,l,u,h,p,g,x,b,M,S,T,A,E,j,R,C,D,U,I=i.constructor,L=i.s==r.s?1:-1,F=i.d,G=r.d;if(!i.s)return new I(i);if(!r.s)throw Error(Pl+"Division by zero");for(l=i.e-r.e,D=G.length,R=F.length,x=new I(L),b=x.d=[],u=0;G[u]==(F[u]||0);)++u;if(G[u]>(F[u]||0)&&--l,a==null?A=a=I.precision:s?A=a+(ca(i)-ca(r))+1:A=a,A<0)return new I(0);if(A=A/cr+2|0,u=0,D==1)for(h=0,G=G[0],A++;(u<R||h)&&A--;u++)E=h*La+(F[u]||0),b[u]=E/G|0,h=E%G|0;else{for(h=La/(G[0]+1)|0,h>1&&(G=t(G,h),F=t(F,h),D=G.length,R=F.length),j=D,M=F.slice(0,D),S=M.length;S<D;)M[S++]=0;U=G.slice(),U.unshift(0),C=G[0],G[1]>=La/2&&++C;do h=0,o=e(G,M,D,S),o<0?(T=M[0],D!=S&&(T=T*La+(M[1]||0)),h=T/C|0,h>1?(h>=La&&(h=La-1),p=t(G,h),g=p.length,S=M.length,o=e(p,M,g,S),o==1&&(h--,n(p,D<g?U:G,g))):(h==0&&(o=h=1),p=G.slice()),g=p.length,g<S&&p.unshift(0),n(M,p,S),o==-1&&(S=M.length,o=e(G,M,D,S),o<1&&(h++,n(M,D<S?U:G,S))),S=M.length):o===0&&(h++,M=[0]),b[u++]=h,o&&M[0]?M[S++]=F[j]||0:(M=[F[j]],S=1);while((j++<R||M[0]!==void 0)&&A--)}return b[0]||b.shift(),x.e=l,er(x,s?a+ca(x)+1:a)}})();function mZ(t,e){var n,i,r,a,s,o,l=0,u=0,h=t.constructor,p=h.precision;if(ca(t)>16)throw Error(uI+ca(t));if(!t.s)return new h(Vo);for(Mr=!1,o=p,s=new h(.03125);t.abs().gte(.1);)t=t.times(s),u+=5;for(i=Math.log(S0(2,u))/Math.LN10*2+5|0,o+=i,n=r=a=new h(Vo),h.precision=o;;){if(r=er(r.times(t),o),n=n.times(++l),s=a.plus(jf(r,n,o)),gu(s.d).slice(0,o)===gu(a.d).slice(0,o)){for(;u--;)a=er(a.times(a),o);return h.precision=p,e==null?(Mr=!0,er(a,p)):a}a=s}}function ca(t){for(var e=t.e*cr,n=t.d[0];n>=10;n/=10)e++;return e}function I4(t,e,n){if(e>t.LN10.sd())throw Mr=!0,n&&(t.precision=n),Error(Pl+"LN10 precision limit exceeded");return er(new t(t.LN10),e)}function Bh(t){for(var e="";t--;)e+="0";return e}function F1(t,e){var n,i,r,a,s,o,l,u,h,p=1,g=10,x=t,b=x.d,M=x.constructor,S=M.precision;if(x.s<1)throw Error(Pl+(x.s?"NaN":"-Infinity"));if(x.eq(Vo))return new M(0);if(e==null?(Mr=!1,u=S):u=e,x.eq(10))return e==null&&(Mr=!0),I4(M,u);if(u+=g,M.precision=u,n=gu(b),i=n.charAt(0),a=ca(x),Math.abs(a)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)x=x.times(t),n=gu(x.d),i=n.charAt(0),p++;a=ca(x),i>1?(x=new M("0."+n),a++):x=new M(i+"."+n.slice(1))}else return l=I4(M,u+2,S).times(a+""),x=F1(new M(i+"."+n.slice(1)),u-g).plus(l),M.precision=S,e==null?(Mr=!0,er(x,S)):x;for(o=s=x=jf(x.minus(Vo),x.plus(Vo),u),h=er(x.times(x),u),r=3;;){if(s=er(s.times(h),u),l=o.plus(jf(s,new M(r),u)),gu(l.d).slice(0,u)===gu(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(I4(M,u+2,S).times(a+""))),o=jf(o,new M(p),u),M.precision=S,e==null?(Mr=!0,er(o,S)):o;o=l,r+=2}}function w9(t,e){var n,i,r;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;e.charCodeAt(i)===48;)++i;for(r=e.length;e.charCodeAt(r-1)===48;)--r;if(e=e.slice(i,r),e){if(r-=i,n=n-i-1,t.e=hv(n/cr),t.d=[],i=(n+1)%cr,n<0&&(i+=cr),i<r){for(i&&t.d.push(+e.slice(0,i)),r-=cr;i<r;)t.d.push(+e.slice(i,i+=cr));e=e.slice(i),i=cr-e.length}else i-=r;for(;i--;)e+="0";if(t.d.push(+e),Mr&&(t.e>C3||t.e<-C3))throw Error(uI+n)}else t.s=0,t.e=0,t.d=[0];return t}function er(t,e,n){var i,r,a,s,o,l,u,h,p=t.d;for(s=1,a=p[0];a>=10;a/=10)s++;if(i=e-s,i<0)i+=cr,r=e,u=p[h=0];else{if(h=Math.ceil((i+1)/cr),a=p.length,h>=a)return t;for(u=a=p[h],s=1;a>=10;a/=10)s++;i%=cr,r=i-cr+s}if(n!==void 0&&(a=S0(10,s-r-1),o=u/a%10|0,l=e<0||p[h+1]!==void 0||u%a,l=n<4?(o||l)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||l||n==6&&(i>0?r>0?u/S0(10,s-r):0:p[h-1])%10&1||n==(t.s<0?8:7))),e<1||!p[0])return l?(a=ca(t),p.length=1,e=e-a-1,p[0]=S0(10,(cr-e%cr)%cr),t.e=hv(-e/cr)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(i==0?(p.length=h,a=1,h--):(p.length=h+1,a=S0(10,cr-i),p[h]=r>0?(u/S0(10,s-r)%S0(10,r)|0)*a:0),l)for(;;)if(h==0){(p[0]+=a)==La&&(p[0]=1,++t.e);break}else{if(p[h]+=a,p[h]!=La)break;p[h--]=0,a=1}for(i=p.length;p[--i]===0;)p.pop();if(Mr&&(t.e>C3||t.e<-C3))throw Error(uI+ca(t));return t}function gZ(t,e){var n,i,r,a,s,o,l,u,h,p,g=t.constructor,x=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),Mr?er(e,x):e;if(l=t.d,p=e.d,i=e.e,u=t.e,l=l.slice(),s=u-i,s){for(h=s<0,h?(n=l,s=-s,o=p.length):(n=p,i=u,o=l.length),r=Math.max(Math.ceil(x/cr),o)+2,s>r&&(s=r,n.length=1),n.reverse(),r=s;r--;)n.push(0);n.reverse()}else{for(r=l.length,o=p.length,h=r<o,h&&(o=r),r=0;r<o;r++)if(l[r]!=p[r]){h=l[r]<p[r];break}s=0}for(h&&(n=l,l=p,p=n,e.s=-e.s),o=l.length,r=p.length-o;r>0;--r)l[o++]=0;for(r=p.length;r>s;){if(l[--r]<p[r]){for(a=r;a&&l[--a]===0;)l[a]=La-1;--l[a],l[r]+=La}l[r]-=p[r]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--i;return l[0]?(e.d=l,e.e=i,Mr?er(e,x):e):new g(0)}function ep(t,e,n){var i,r=ca(t),a=gu(t.d),s=a.length;return e?(n&&(i=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+Bh(i):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(r<0?"e":"e+")+r):r<0?(a="0."+Bh(-r-1)+a,n&&(i=n-s)>0&&(a+=Bh(i))):r>=s?(a+=Bh(r+1-s),n&&(i=n-r-1)>0&&(a=a+"."+Bh(i))):((i=r+1)<s&&(a=a.slice(0,i)+"."+a.slice(i)),n&&(i=n-s)>0&&(r+1===s&&(a+="."),a+=Bh(i))),t.s<0?"-"+a:a}function A9(t,e){if(t.length>e)return t.length=e,!0}function vZ(t){var e,n,i;function r(a){var s=this;if(!(s instanceof r))return new r(a);if(s.constructor=r,a instanceof r){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(G0+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return w9(s,a.toString())}else if(typeof a!="string")throw Error(G0+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,a3e.test(a))w9(s,a);else throw Error(G0+a)}if(r.prototype=tn,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.clone=vZ,r.config=r.set=s3e,t===void 0&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<i.length;)t.hasOwnProperty(n=i[e++])||(t[n]=this[n]);return r.config(t),r}function s3e(t){if(!t||typeof t!="object")throw Error(Pl+"Object expected");var e,n,i,r=["precision",1,fv,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<r.length;e+=3)if((i=t[n=r[e]])!==void 0)if(hv(i)===i&&i>=r[e+1]&&i<=r[e+2])this[n]=i;else throw Error(G0+n+": "+i);if((i=t[n="LN10"])!==void 0)if(i==Math.LN10)this[n]=new this(i);else throw Error(G0+n+": "+i);return this}var fI=vZ(r3e);Vo=new fI(1);const Wi=fI;function o3e(t){return f3e(t)||u3e(t)||c3e(t)||l3e()}function l3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c3e(t,e){if(t){if(typeof t=="string")return WN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WN(t,e)}}function u3e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function f3e(t){if(Array.isArray(t))return WN(t)}function WN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var h3e=function(e){return e},xZ={},yZ=function(e){return e===xZ},E9=function(e){return function n(){return arguments.length===0||arguments.length===1&&yZ(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},d3e=function t(e,n){return e===1?n:E9(function(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];var s=r.filter(function(o){return o!==xZ}).length;return s>=e?n.apply(void 0,r):t(e-s,E9(function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];var h=r.map(function(p){return yZ(p)?l.shift():p});return n.apply(void 0,o3e(h).concat(l))}))})},uw=function(e){return d3e(e.length,e)},XN=function(e,n){for(var i=[],r=e;r<n;++r)i[r-e]=r;return i},p3e=uw(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),m3e=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(!n.length)return h3e;var r=n.reverse(),a=r[0],s=r.slice(1);return function(){return s.reduce(function(o,l){return l(o)},a.apply(void 0,arguments))}},$N=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},bZ=function(e){var n=null,i=null;return function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n&&a.every(function(o,l){return o===n[l]})||(n=a,i=e.apply(void 0,a)),i}};function g3e(t){var e;return t===0?e=1:e=Math.floor(new Wi(t).abs().log(10).toNumber())+1,e}function v3e(t,e,n){for(var i=new Wi(t),r=0,a=[];i.lt(e)&&r<1e5;)a.push(i.toNumber()),i=i.add(n),r++;return a}var x3e=uw(function(t,e,n){var i=+t,r=+e;return i+n*(r-i)}),y3e=uw(function(t,e,n){var i=e-+t;return i=i||1/0,(n-t)/i}),b3e=uw(function(t,e,n){var i=e-+t;return i=i||1/0,Math.max(0,Math.min(1,(n-t)/i))});const fw={rangeStep:v3e,getDigitCount:g3e,interpolateNumber:x3e,uninterpolateNumber:y3e,uninterpolateTruncation:b3e};function YN(t){return _3e(t)||M3e(t)||SZ(t)||S3e()}function S3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M3e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function _3e(t){if(Array.isArray(t))return ZN(t)}function G1(t,e){return A3e(t)||w3e(t,e)||SZ(t,e)||T3e()}function T3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SZ(t,e){if(t){if(typeof t=="string")return ZN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZN(t,e)}}function ZN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function w3e(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],i=!0,r=!1,a=void 0;try{for(var s=t[Symbol.iterator](),o;!(i=(o=s.next()).done)&&(n.push(o.value),!(e&&n.length===e));i=!0);}catch(l){r=!0,a=l}finally{try{!i&&s.return!=null&&s.return()}finally{if(r)throw a}}return n}}function A3e(t){if(Array.isArray(t))return t}function MZ(t){var e=G1(t,2),n=e[0],i=e[1],r=n,a=i;return n>i&&(r=i,a=n),[r,a]}function _Z(t,e,n){if(t.lte(0))return new Wi(0);var i=fw.getDigitCount(t.toNumber()),r=new Wi(10).pow(i),a=t.div(r),s=i!==1?.05:.1,o=new Wi(Math.ceil(a.div(s).toNumber())).add(n).mul(s),l=o.mul(r);return e?l:new Wi(Math.ceil(l))}function E3e(t,e,n){var i=1,r=new Wi(t);if(!r.isint()&&n){var a=Math.abs(t);a<1?(i=new Wi(10).pow(fw.getDigitCount(t)-1),r=new Wi(Math.floor(r.div(i).toNumber())).mul(i)):a>1&&(r=new Wi(Math.floor(t)))}else t===0?r=new Wi(Math.floor((e-1)/2)):n||(r=new Wi(Math.floor(t)));var s=Math.floor((e-1)/2),o=m3e(p3e(function(l){return r.add(new Wi(l-s).mul(i)).toNumber()}),XN);return o(0,e)}function TZ(t,e,n,i){var r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new Wi(0),tickMin:new Wi(0),tickMax:new Wi(0)};var a=_Z(new Wi(e).sub(t).div(n-1),i,r),s;t<=0&&e>=0?s=new Wi(0):(s=new Wi(t).add(e).div(2),s=s.sub(new Wi(s).mod(a)));var o=Math.ceil(s.sub(t).div(a).toNumber()),l=Math.ceil(new Wi(e).sub(s).div(a).toNumber()),u=o+l+1;return u>n?TZ(t,e,n,i,r+1):(u<n&&(l=e>0?l+(n-u):l,o=e>0?o:o+(n-u)),{step:a,tickMin:s.sub(new Wi(o).mul(a)),tickMax:s.add(new Wi(l).mul(a))})}function C3e(t){var e=G1(t,2),n=e[0],i=e[1],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(r,2),o=MZ([n,i]),l=G1(o,2),u=l[0],h=l[1];if(u===-1/0||h===1/0){var p=h===1/0?[u].concat(YN(XN(0,r-1).map(function(){return 1/0}))):[].concat(YN(XN(0,r-1).map(function(){return-1/0})),[h]);return n>i?$N(p):p}if(u===h)return E3e(u,r,a);var g=TZ(u,h,s,a),x=g.step,b=g.tickMin,M=g.tickMax,S=fw.rangeStep(b,M.add(new Wi(.1).mul(x)),x);return n>i?$N(S):S}function R3e(t,e){var n=G1(t,2),i=n[0],r=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=MZ([i,r]),o=G1(s,2),l=o[0],u=o[1];if(l===-1/0||u===1/0)return[i,r];if(l===u)return[l];var h=Math.max(e,2),p=_Z(new Wi(u).sub(l).div(h-1),a,0),g=[].concat(YN(fw.rangeStep(new Wi(l),new Wi(u).sub(new Wi(.99).mul(p)),p)),[u]);return i>r?$N(g):g}var j3e=bZ(C3e),N3e=bZ(R3e),O3e="Invariant failed";function tp(t,e){throw new Error(O3e)}var D3e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Ig(t){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ig(t)}function R3(){return R3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},R3.apply(this,arguments)}function P3e(t,e){return B3e(t)||L3e(t,e)||U3e(t,e)||I3e()}function I3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U3e(t,e){if(t){if(typeof t=="string")return C9(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C9(t,e)}}function C9(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function L3e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,r,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(i=a.call(n)).done)&&(o.push(i.value),o.length!==e);l=!0);}catch(h){u=!0,r=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}function B3e(t){if(Array.isArray(t))return t}function z3e(t,e){if(t==null)return{};var n=k3e(t,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function k3e(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function F3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function G3e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,EZ(i.key),i)}}function V3e(t,e,n){return e&&G3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function H3e(t,e,n){return e=j3(e),q3e(t,wZ()?Reflect.construct(e,n||[],j3(t).constructor):e.apply(t,n))}function q3e(t,e){if(e&&(Ig(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return W3e(t)}function W3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wZ=function(){return!!t})()}function j3(t){return j3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},j3(t)}function X3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KN(t,e)}function KN(t,e){return KN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},KN(t,e)}function AZ(t,e,n){return e=EZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EZ(t){var e=$3e(t,"string");return Ig(e)=="symbol"?e:e+""}function $3e(t,e){if(Ig(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Ig(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var hw=(function(t){function e(){return F3e(this,e),H3e(this,e,arguments)}return X3e(e,t),V3e(e,[{key:"render",value:function(){var i=this.props,r=i.offset,a=i.layout,s=i.width,o=i.dataKey,l=i.data,u=i.dataPointFormatter,h=i.xAxis,p=i.yAxis,g=z3e(i,D3e),x=ri(g,!1);this.props.direction==="x"&&h.type!=="number"&&tp();var b=l.map(function(M){var S=u(M,o),T=S.x,A=S.y,E=S.value,j=S.errorVal;if(!j)return null;var R=[],C,D;if(Array.isArray(j)){var U=P3e(j,2);C=U[0],D=U[1]}else C=D=j;if(a==="vertical"){var I=h.scale,L=A+r,F=L+s,G=L-s,H=I(E-C),W=I(E+D);R.push({x1:W,y1:F,x2:W,y2:G}),R.push({x1:H,y1:L,x2:W,y2:L}),R.push({x1:H,y1:F,x2:H,y2:G})}else if(a==="horizontal"){var Y=p.scale,k=T+r,$=k-s,ee=k+s,te=Y(E-C),ae=Y(E+D);R.push({x1:$,y1:ae,x2:ee,y2:ae}),R.push({x1:k,y1:te,x2:k,y2:ae}),R.push({x1:$,y1:te,x2:ee,y2:te})}return De.createElement(Dr,R3({className:"recharts-errorBar",key:"bar-".concat(R.map(function(q){return"".concat(q.x1,"-").concat(q.x2,"-").concat(q.y1,"-").concat(q.y2)}))},x),R.map(function(q){return De.createElement("line",R3({},q,{key:"line-".concat(q.x1,"-").concat(q.x2,"-").concat(q.y1,"-").concat(q.y2)}))}))});return De.createElement(Dr,{className:"recharts-errorBars"},b)}}])})(De.Component);AZ(hw,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});AZ(hw,"displayName","ErrorBar");function V1(t){"@babel/helpers - typeof";return V1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V1(t)}function R9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function d0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R9(Object(n),!0).forEach(function(i){Y3e(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R9(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Y3e(t,e,n){return e=Z3e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z3e(t){var e=K3e(t,"string");return V1(e)=="symbol"?e:e+""}function K3e(t,e){if(V1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(V1(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CZ=function(e){var n=e.children,i=e.formattedGraphicalItems,r=e.legendWidth,a=e.legendContent,s=Go(n,fg);if(!s)return null;var o=fg.defaultProps,l=o!==void 0?d0(d0({},o),s.props):{},u;return s.props&&s.props.payload?u=s.props&&s.props.payload:a==="children"?u=(i||[]).reduce(function(h,p){var g=p.item,x=p.props,b=x.sectors||x.data||[];return h.concat(b.map(function(M){return{type:s.props.iconType||g.props.legendType,value:M.name,color:M.fill,payload:M}}))},[]):u=(i||[]).map(function(h){var p=h.item,g=p.type.defaultProps,x=g!==void 0?d0(d0({},g),p.props):{},b=x.dataKey,M=x.name,S=x.legendType,T=x.hide;return{inactive:T,dataKey:b,type:l.iconType||S||"square",color:hI(p),value:M||b,payload:x}}),d0(d0(d0({},l),fg.getWithHeight(s,r)),{},{payload:u,item:s})};function H1(t){"@babel/helpers - typeof";return H1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H1(t)}function j9(t){return tTe(t)||eTe(t)||J3e(t)||Q3e()}function Q3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J3e(t,e){if(t){if(typeof t=="string")return QN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QN(t,e)}}function eTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function tTe(t){if(Array.isArray(t))return QN(t)}function QN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function N9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Vr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N9(Object(n),!0).forEach(function(i){dg(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N9(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function dg(t,e,n){return e=nTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nTe(t){var e=iTe(t,"string");return H1(e)=="symbol"?e:e+""}function iTe(t,e){if(H1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(H1(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function el(t,e,n){return si(t)||si(e)?n:Ma(e)?Dl(t,e,n):Zn(e)?e(t):n}function Zy(t,e,n,i){var r=t3e(t,function(o){return el(o,e)});if(n==="number"){var a=r.filter(function(o){return kt(o)||parseFloat(o)});return a.length?[cw(a),Vh(a)]:[1/0,-1/0]}var s=i?r.filter(function(o){return!si(o)}):r;return s.map(function(o){return Ma(o)||o instanceof Date?o:""})}var rTe=function(e){var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,o=(n=i==null?void 0:i.length)!==null&&n!==void 0?n:0;if(o<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var l=a.range,u=0;u<o;u++){var h=u>0?r[u-1].coordinate:r[o-1].coordinate,p=r[u].coordinate,g=u>=o-1?r[0].coordinate:r[u+1].coordinate,x=void 0;if(_c(p-h)!==_c(g-p)){var b=[];if(_c(g-p)===_c(l[1]-l[0])){x=g;var M=p+l[1]-l[0];b[0]=Math.min(M,(M+h)/2),b[1]=Math.max(M,(M+h)/2)}else{x=h;var S=g+l[1]-l[0];b[0]=Math.min(p,(S+p)/2),b[1]=Math.max(p,(S+p)/2)}var T=[Math.min(p,(x+p)/2),Math.max(p,(x+p)/2)];if(e>T[0]&&e<=T[1]||e>=b[0]&&e<=b[1]){s=r[u].index;break}}else{var A=Math.min(h,g),E=Math.max(h,g);if(e>(A+p)/2&&e<=(E+p)/2){s=r[u].index;break}}}else for(var j=0;j<o;j++)if(j===0&&e<=(i[j].coordinate+i[j+1].coordinate)/2||j>0&&j<o-1&&e>(i[j].coordinate+i[j-1].coordinate)/2&&e<=(i[j].coordinate+i[j+1].coordinate)/2||j===o-1&&e>(i[j].coordinate+i[j-1].coordinate)/2){s=i[j].index;break}return s},hI=function(e){var n,i=e,r=i.type.displayName,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Vr(Vr({},e.type.defaultProps),e.props):e.props,s=a.stroke,o=a.fill,l;switch(r){case"Line":l=s;break;case"Area":case"Radar":l=s&&s!=="none"?s:o;break;default:l=o;break}return l},aTe=function(e){var n=e.barSize,i=e.totalSize,r=e.stackGroups,a=r===void 0?{}:r;if(!a)return{};for(var s={},o=Object.keys(a),l=0,u=o.length;l<u;l++)for(var h=a[o[l]].stackGroups,p=Object.keys(h),g=0,x=p.length;g<x;g++){var b=h[p[g]],M=b.items,S=b.cateAxisId,T=M.filter(function(D){return Rf(D.type).indexOf("Bar")>=0});if(T&&T.length){var A=T[0].type.defaultProps,E=A!==void 0?Vr(Vr({},A),T[0].props):T[0].props,j=E.barSize,R=E[S];s[R]||(s[R]=[]);var C=si(j)?n:j;s[R].push({item:T[0],stackList:T.slice(1),barSize:si(C)?void 0:J0(C,i,0)})}}return s},sTe=function(e){var n=e.barGap,i=e.barCategoryGap,r=e.bandSize,a=e.sizeList,s=a===void 0?[]:a,o=e.maxBarSize,l=s.length;if(l<1)return null;var u=J0(n,r,0,!0),h,p=[];if(s[0].barSize===+s[0].barSize){var g=!1,x=r/l,b=s.reduce(function(j,R){return j+R.barSize||0},0);b+=(l-1)*u,b>=r&&(b-=(l-1)*u,u=0),b>=r&&x>0&&(g=!0,x*=.9,b=l*x);var M=(r-b)/2>>0,S={offset:M-u,size:0};h=s.reduce(function(j,R){var C={item:R.item,position:{offset:S.offset+S.size+u,size:g?x:R.barSize}},D=[].concat(j9(j),[C]);return S=D[D.length-1].position,R.stackList&&R.stackList.length&&R.stackList.forEach(function(U){D.push({item:U,position:S})}),D},p)}else{var T=J0(i,r,0,!0);r-2*T-(l-1)*u<=0&&(u=0);var A=(r-2*T-(l-1)*u)/l;A>1&&(A>>=0);var E=o===+o?Math.min(A,o):A;h=s.reduce(function(j,R,C){var D=[].concat(j9(j),[{item:R.item,position:{offset:T+(A+u)*C+(A-E)/2,size:E}}]);return R.stackList&&R.stackList.length&&R.stackList.forEach(function(U){D.push({item:U,position:D[D.length-1].position})}),D},p)}return h},oTe=function(e,n,i,r){var a=i.children,s=i.width,o=i.margin,l=s-(o.left||0)-(o.right||0),u=CZ({children:a,legendWidth:l});if(u){var h=r||{},p=h.width,g=h.height,x=u.align,b=u.verticalAlign,M=u.layout;if((M==="vertical"||M==="horizontal"&&b==="middle")&&x!=="center"&&kt(e[x]))return Vr(Vr({},e),{},dg({},x,e[x]+(p||0)));if((M==="horizontal"||M==="vertical"&&x==="center")&&b!=="middle"&&kt(e[b]))return Vr(Vr({},e),{},dg({},b,e[b]+(g||0)))}return e},lTe=function(e,n,i){return si(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||i==="x"?n==="xAxis":i==="y"?n==="yAxis":!0},RZ=function(e,n,i,r,a){var s=n.props.children,o=wc(s,hw).filter(function(u){return lTe(r,a,u.props.direction)});if(o&&o.length){var l=o.map(function(u){return u.props.dataKey});return e.reduce(function(u,h){var p=el(h,i);if(si(p))return u;var g=Array.isArray(p)?[cw(p),Vh(p)]:[p,p],x=l.reduce(function(b,M){var S=el(h,M,0),T=g[0]-Math.abs(Array.isArray(S)?S[0]:S),A=g[1]+Math.abs(Array.isArray(S)?S[1]:S);return[Math.min(T,b[0]),Math.max(A,b[1])]},[1/0,-1/0]);return[Math.min(x[0],u[0]),Math.max(x[1],u[1])]},[1/0,-1/0])}return null},cTe=function(e,n,i,r,a){var s=n.map(function(o){return RZ(e,o,i,a,r)}).filter(function(o){return!si(o)});return s&&s.length?s.reduce(function(o,l){return[Math.min(o[0],l[0]),Math.max(o[1],l[1])]},[1/0,-1/0]):null},jZ=function(e,n,i,r,a){var s=n.map(function(l){var u=l.props.dataKey;return i==="number"&&u&&RZ(e,l,u,r)||Zy(e,u,i,a)});if(i==="number")return s.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var o={};return s.reduce(function(l,u){for(var h=0,p=u.length;h<p;h++)o[u[h]]||(o[u[h]]=!0,l.push(u[h]));return l},[])},NZ=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},D0=function(e,n,i){if(!e)return null;var r=e.scale,a=e.duplicateDomain,s=e.type,o=e.range,l=e.realScaleType==="scaleBand"?r.bandwidth()/2:2,u=(n||i)&&s==="category"&&r.bandwidth?r.bandwidth()/l:0;if(u=e.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?_c(o[0]-o[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var h=(e.ticks||e.niceTicks).map(function(p){var g=a?a.indexOf(p):p;return{coordinate:r(g)+u,value:p,offset:u}});return h.filter(function(p){return!ov(p.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(p,g){return{coordinate:r(p)+u,value:p,index:g,offset:u}}):r.ticks&&!i?r.ticks(e.tickCount).map(function(p){return{coordinate:r(p)+u,value:p,offset:u}}):r.domain().map(function(p,g){return{coordinate:r(p)+u,value:a?a[p]:p,index:g,offset:u}})},U4=new WeakMap,OM=function(e,n){if(typeof n!="function")return e;U4.has(e)||U4.set(e,new WeakMap);var i=U4.get(e);if(i.has(n))return i.get(n);var r=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return i.set(n,r),r},uTe=function(e,n,i){var r=e.scale,a=e.type,s=e.layout,o=e.axisType;if(r==="auto")return s==="radial"&&o==="radiusAxis"?{scale:I1(),realScaleType:"band"}:s==="radial"&&o==="angleAxis"?{scale:T3(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!i)?{scale:Yy(),realScaleType:"point"}:a==="category"?{scale:I1(),realScaleType:"band"}:{scale:T3(),realScaleType:"linear"};if(Q0(r)){var l="scale".concat(ZT(r));return{scale:(g9[l]||Yy)(),realScaleType:g9[l]?l:"point"}}return Zn(r)?{scale:r}:{scale:Yy(),realScaleType:"point"}},O9=1e-4,fTe=function(e){var n=e.domain();if(!(!n||n.length<=2)){var i=n.length,r=e.range(),a=Math.min(r[0],r[1])-O9,s=Math.max(r[0],r[1])+O9,o=e(n[0]),l=e(n[i-1]);(o<a||o>s||l<a||l>s)&&e.domain([n[0],n[i-1]])}},hTe=function(e,n){if(!e)return null;for(var i=0,r=e.length;i<r;i++)if(e[i].item===n)return e[i].position;return null},dTe=function(e,n){if(!n||n.length!==2||!kt(n[0])||!kt(n[1]))return e;var i=Math.min(n[0],n[1]),r=Math.max(n[0],n[1]),a=[e[0],e[1]];return(!kt(e[0])||e[0]<i)&&(a[0]=i),(!kt(e[1])||e[1]>r)&&(a[1]=r),a[0]>r&&(a[0]=r),a[1]<i&&(a[1]=i),a},pTe=function(e){var n=e.length;if(!(n<=0))for(var i=0,r=e[0].length;i<r;++i)for(var a=0,s=0,o=0;o<n;++o){var l=ov(e[o][i][1])?e[o][i][0]:e[o][i][1];l>=0?(e[o][i][0]=a,e[o][i][1]=a+l,a=e[o][i][1]):(e[o][i][0]=s,e[o][i][1]=s+l,s=e[o][i][1])}},mTe=function(e){var n=e.length;if(!(n<=0))for(var i=0,r=e[0].length;i<r;++i)for(var a=0,s=0;s<n;++s){var o=ov(e[s][i][1])?e[s][i][0]:e[s][i][1];o>=0?(e[s][i][0]=a,e[s][i][1]=a+o,a=e[s][i][1]):(e[s][i][0]=0,e[s][i][1]=0)}},gTe={sign:pTe,expand:Qye,none:Eg,silhouette:Jye,wiggle:e1e,positive:mTe},vTe=function(e,n,i){var r=n.map(function(o){return o.props.dataKey}),a=gTe[i],s=Kye().keys(r).value(function(o,l){return+el(o,l,0)}).order(CN).offset(a);return s(e)},xTe=function(e,n,i,r,a,s){if(!e)return null;var o=s?n.reverse():n,l={},u=o.reduce(function(p,g){var x,b=(x=g.type)!==null&&x!==void 0&&x.defaultProps?Vr(Vr({},g.type.defaultProps),g.props):g.props,M=b.stackId,S=b.hide;if(S)return p;var T=b[i],A=p[T]||{hasStack:!1,stackGroups:{}};if(Ma(M)){var E=A.stackGroups[M]||{numericAxisId:i,cateAxisId:r,items:[]};E.items.push(g),A.hasStack=!0,A.stackGroups[M]=E}else A.stackGroups[zb("_stackId_")]={numericAxisId:i,cateAxisId:r,items:[g]};return Vr(Vr({},p),{},dg({},T,A))},l),h={};return Object.keys(u).reduce(function(p,g){var x=u[g];if(x.hasStack){var b={};x.stackGroups=Object.keys(x.stackGroups).reduce(function(M,S){var T=x.stackGroups[S];return Vr(Vr({},M),{},dg({},S,{numericAxisId:i,cateAxisId:r,items:T.items,stackedData:vTe(e,T.items,a)}))},b)}return Vr(Vr({},p),{},dg({},g,x))},h)},yTe=function(e,n){var i=n.realScaleType,r=n.type,a=n.tickCount,s=n.originalDomain,o=n.allowDecimals,l=i||n.scale;if(l!=="auto"&&l!=="linear")return null;if(a&&r==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var u=e.domain();if(!u.length)return null;var h=j3e(u,a,o);return e.domain([cw(h),Vh(h)]),{niceTicks:h}}if(a&&r==="number"){var p=e.domain(),g=N3e(p,a,o);return{niceTicks:g}}return null};function D9(t){var e=t.axis,n=t.ticks,i=t.bandSize,r=t.entry,a=t.index,s=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!si(r[e.dataKey])){var o=r3(n,"value",r[e.dataKey]);if(o)return o.coordinate+i/2}return n[a]?n[a].coordinate+i/2:null}var l=el(r,si(s)?e.dataKey:s);return si(l)?null:e.scale(l)}var P9=function(e){var n=e.axis,i=e.ticks,r=e.offset,a=e.bandSize,s=e.entry,o=e.index;if(n.type==="category")return i[o]?i[o].coordinate+r:null;var l=el(s,n.dataKey,n.domain[o]);return si(l)?null:n.scale(l)-a/2+r},bTe=function(e){var n=e.numericAxis,i=n.scale.domain();if(n.type==="number"){var r=Math.min(i[0],i[1]),a=Math.max(i[0],i[1]);return r<=0&&a>=0?0:a<0?a:r}return i[0]},STe=function(e,n){var i,r=(i=e.type)!==null&&i!==void 0&&i.defaultProps?Vr(Vr({},e.type.defaultProps),e.props):e.props,a=r.stackId;if(Ma(a)){var s=n[a];if(s){var o=s.items.indexOf(e);return o>=0?s.stackedData[o]:null}}return null},MTe=function(e){return e.reduce(function(n,i){return[cw(i.concat([n[0]]).filter(kt)),Vh(i.concat([n[1]]).filter(kt))]},[1/0,-1/0])},OZ=function(e,n,i){return Object.keys(e).reduce(function(r,a){var s=e[a],o=s.stackedData,l=o.reduce(function(u,h){var p=MTe(h.slice(n,i+1));return[Math.min(u[0],p[0]),Math.max(u[1],p[1])]},[1/0,-1/0]);return[Math.min(l[0],r[0]),Math.max(l[1],r[1])]},[1/0,-1/0]).map(function(r){return r===1/0||r===-1/0?0:r})},I9=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,U9=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,JN=function(e,n,i){if(Zn(e))return e(n,i);if(!Array.isArray(e))return n;var r=[];if(kt(e[0]))r[0]=i?e[0]:Math.min(e[0],n[0]);else if(I9.test(e[0])){var a=+I9.exec(e[0])[1];r[0]=n[0]-a}else Zn(e[0])?r[0]=e[0](n[0]):r[0]=n[0];if(kt(e[1]))r[1]=i?e[1]:Math.max(e[1],n[1]);else if(U9.test(e[1])){var s=+U9.exec(e[1])[1];r[1]=n[1]+s}else Zn(e[1])?r[1]=e[1](n[1]):r[1]=n[1];return r},N3=function(e,n,i){if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!i||r>0)return r}if(e&&n&&n.length>=2){for(var a=kP(n,function(p){return p.coordinate}),s=1/0,o=1,l=a.length;o<l;o++){var u=a[o],h=a[o-1];s=Math.min((u.coordinate||0)-(h.coordinate||0),s)}return s===1/0?0:s}return i?void 0:0},L9=function(e,n,i){return!e||!e.length||k1(e,Dl(i,"type.defaultProps.domain"))?n:e},DZ=function(e,n){var i=e.type.defaultProps?Vr(Vr({},e.type.defaultProps),e.props):e.props,r=i.dataKey,a=i.name,s=i.unit,o=i.formatter,l=i.tooltipType,u=i.chartType,h=i.hide;return Vr(Vr({},ri(e,!1)),{},{dataKey:r,unit:s,formatter:o,name:a||r,color:hI(e),value:el(n,r),type:l,payload:n,chartType:u,hide:h})};function q1(t){"@babel/helpers - typeof";return q1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q1(t)}function B9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function z9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B9(Object(n),!0).forEach(function(i){_Te(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B9(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _Te(t,e,n){return e=TTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TTe(t){var e=wTe(t,"string");return q1(e)=="symbol"?e:e+""}function wTe(t,e){if(q1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(q1(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var O3=Math.PI/180,ATe=function(e){return e*180/Math.PI},as=function(e,n,i,r){return{x:e+Math.cos(-O3*r)*i,y:n+Math.sin(-O3*r)*i}},ETe=function(e,n){var i=e.x,r=e.y,a=n.x,s=n.y;return Math.sqrt(Math.pow(i-a,2)+Math.pow(r-s,2))},CTe=function(e,n){var i=e.x,r=e.y,a=n.cx,s=n.cy,o=ETe({x:i,y:r},{x:a,y:s});if(o<=0)return{radius:o};var l=(i-a)/o,u=Math.acos(l);return r>s&&(u=2*Math.PI-u),{radius:o,angle:ATe(u),angleInRadian:u}},RTe=function(e){var n=e.startAngle,i=e.endAngle,r=Math.floor(n/360),a=Math.floor(i/360),s=Math.min(r,a);return{startAngle:n-s*360,endAngle:i-s*360}},jTe=function(e,n){var i=n.startAngle,r=n.endAngle,a=Math.floor(i/360),s=Math.floor(r/360),o=Math.min(a,s);return e+o*360},k9=function(e,n){var i=e.x,r=e.y,a=CTe({x:i,y:r},n),s=a.radius,o=a.angle,l=n.innerRadius,u=n.outerRadius;if(s<l||s>u)return!1;if(s===0)return!0;var h=RTe(n),p=h.startAngle,g=h.endAngle,x=o,b;if(p<=g){for(;x>g;)x-=360;for(;x<p;)x+=360;b=x>=p&&x<=g}else{for(;x>p;)x-=360;for(;x<g;)x+=360;b=x>=g&&x<=p}return b?z9(z9({},n),{},{radius:s,angle:jTe(x,n)}):null};function W1(t){"@babel/helpers - typeof";return W1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W1(t)}var NTe=["offset"];function OTe(t){return UTe(t)||ITe(t)||PTe(t)||DTe()}function DTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PTe(t,e){if(t){if(typeof t=="string")return eO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eO(t,e)}}function ITe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function UTe(t){if(Array.isArray(t))return eO(t)}function eO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function LTe(t,e){if(t==null)return{};var n=BTe(t,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function BTe(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function F9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ya(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F9(Object(n),!0).forEach(function(i){zTe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F9(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function zTe(t,e,n){return e=kTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kTe(t){var e=FTe(t,"string");return W1(e)=="symbol"?e:e+""}function FTe(t,e){if(W1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(W1(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function X1(){return X1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},X1.apply(this,arguments)}var GTe=function(e){var n=e.value,i=e.formatter,r=si(e.children)?n:e.children;return Zn(i)?i(r):r},VTe=function(e,n){var i=_c(n-e),r=Math.min(Math.abs(n-e),360);return i*r},HTe=function(e,n,i){var r=e.position,a=e.viewBox,s=e.offset,o=e.className,l=a,u=l.cx,h=l.cy,p=l.innerRadius,g=l.outerRadius,x=l.startAngle,b=l.endAngle,M=l.clockWise,S=(p+g)/2,T=VTe(x,b),A=T>=0?1:-1,E,j;r==="insideStart"?(E=x+A*s,j=M):r==="insideEnd"?(E=b-A*s,j=!M):r==="end"&&(E=b+A*s,j=M),j=T<=0?j:!j;var R=as(u,h,S,E),C=as(u,h,S,E+(j?1:-1)*359),D="M".concat(R.x,",").concat(R.y,`
    A`).concat(S,",").concat(S,",0,1,").concat(j?0:1,`,
    `).concat(C.x,",").concat(C.y),U=si(e.id)?zb("recharts-radial-line-"):e.id;return De.createElement("text",X1({},i,{dominantBaseline:"central",className:vi("recharts-radial-bar-label",o)}),De.createElement("defs",null,De.createElement("path",{id:U,d:D})),De.createElement("textPath",{xlinkHref:"#".concat(U)},n))},qTe=function(e){var n=e.viewBox,i=e.offset,r=e.position,a=n,s=a.cx,o=a.cy,l=a.innerRadius,u=a.outerRadius,h=a.startAngle,p=a.endAngle,g=(h+p)/2;if(r==="outside"){var x=as(s,o,u+i,g),b=x.x,M=x.y;return{x:b,y:M,textAnchor:b>=s?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"end"};var S=(l+u)/2,T=as(s,o,S,g),A=T.x,E=T.y;return{x:A,y:E,textAnchor:"middle",verticalAnchor:"middle"}},WTe=function(e){var n=e.viewBox,i=e.parentViewBox,r=e.offset,a=e.position,s=n,o=s.x,l=s.y,u=s.width,h=s.height,p=h>=0?1:-1,g=p*r,x=p>0?"end":"start",b=p>0?"start":"end",M=u>=0?1:-1,S=M*r,T=M>0?"end":"start",A=M>0?"start":"end";if(a==="top"){var E={x:o+u/2,y:l-p*r,textAnchor:"middle",verticalAnchor:x};return ya(ya({},E),i?{height:Math.max(l-i.y,0),width:u}:{})}if(a==="bottom"){var j={x:o+u/2,y:l+h+g,textAnchor:"middle",verticalAnchor:b};return ya(ya({},j),i?{height:Math.max(i.y+i.height-(l+h),0),width:u}:{})}if(a==="left"){var R={x:o-S,y:l+h/2,textAnchor:T,verticalAnchor:"middle"};return ya(ya({},R),i?{width:Math.max(R.x-i.x,0),height:h}:{})}if(a==="right"){var C={x:o+u+S,y:l+h/2,textAnchor:A,verticalAnchor:"middle"};return ya(ya({},C),i?{width:Math.max(i.x+i.width-C.x,0),height:h}:{})}var D=i?{width:u,height:h}:{};return a==="insideLeft"?ya({x:o+S,y:l+h/2,textAnchor:A,verticalAnchor:"middle"},D):a==="insideRight"?ya({x:o+u-S,y:l+h/2,textAnchor:T,verticalAnchor:"middle"},D):a==="insideTop"?ya({x:o+u/2,y:l+g,textAnchor:"middle",verticalAnchor:b},D):a==="insideBottom"?ya({x:o+u/2,y:l+h-g,textAnchor:"middle",verticalAnchor:x},D):a==="insideTopLeft"?ya({x:o+S,y:l+g,textAnchor:A,verticalAnchor:b},D):a==="insideTopRight"?ya({x:o+u-S,y:l+g,textAnchor:T,verticalAnchor:b},D):a==="insideBottomLeft"?ya({x:o+S,y:l+h-g,textAnchor:A,verticalAnchor:x},D):a==="insideBottomRight"?ya({x:o+u-S,y:l+h-g,textAnchor:T,verticalAnchor:x},D):sv(a)&&(kt(a.x)||j0(a.x))&&(kt(a.y)||j0(a.y))?ya({x:o+J0(a.x,u),y:l+J0(a.y,h),textAnchor:"end",verticalAnchor:"end"},D):ya({x:o+u/2,y:l+h/2,textAnchor:"middle",verticalAnchor:"middle"},D)},XTe=function(e){return"cx"in e&&kt(e.cx)};function ws(t){var e=t.offset,n=e===void 0?5:e,i=LTe(t,NTe),r=ya({offset:n},i),a=r.viewBox,s=r.position,o=r.value,l=r.children,u=r.content,h=r.className,p=h===void 0?"":h,g=r.textBreakAll;if(!a||si(o)&&si(l)&&!z.isValidElement(u)&&!Zn(u))return null;if(z.isValidElement(u))return z.cloneElement(u,r);var x;if(Zn(u)){if(x=z.createElement(u,r),z.isValidElement(x))return x}else x=GTe(r);var b=XTe(a),M=ri(r,!0);if(b&&(s==="insideStart"||s==="insideEnd"||s==="end"))return HTe(r,x,M);var S=b?qTe(r):WTe(r);return De.createElement(v3,X1({className:vi("recharts-label",p)},M,S,{breakAll:g}),x)}ws.displayName="Label";var PZ=function(e){var n=e.cx,i=e.cy,r=e.angle,a=e.startAngle,s=e.endAngle,o=e.r,l=e.radius,u=e.innerRadius,h=e.outerRadius,p=e.x,g=e.y,x=e.top,b=e.left,M=e.width,S=e.height,T=e.clockWise,A=e.labelViewBox;if(A)return A;if(kt(M)&&kt(S)){if(kt(p)&&kt(g))return{x:p,y:g,width:M,height:S};if(kt(x)&&kt(b))return{x,y:b,width:M,height:S}}return kt(p)&&kt(g)?{x:p,y:g,width:0,height:0}:kt(n)&&kt(i)?{cx:n,cy:i,startAngle:a||r||0,endAngle:s||r||0,innerRadius:u||0,outerRadius:h||l||o||0,clockWise:T}:e.viewBox?e.viewBox:{}},$Te=function(e,n){return e?e===!0?De.createElement(ws,{key:"label-implicit",viewBox:n}):Ma(e)?De.createElement(ws,{key:"label-implicit",viewBox:n,value:e}):z.isValidElement(e)?e.type===ws?z.cloneElement(e,{key:"label-implicit",viewBox:n}):De.createElement(ws,{key:"label-implicit",content:e,viewBox:n}):Zn(e)?De.createElement(ws,{key:"label-implicit",content:e,viewBox:n}):sv(e)?De.createElement(ws,X1({viewBox:n},e,{key:"label-implicit"})):null:null},YTe=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&i&&!e.label)return null;var r=e.children,a=PZ(e),s=wc(r,ws).map(function(l,u){return z.cloneElement(l,{viewBox:n||a,key:"label-".concat(u)})});if(!i)return s;var o=$Te(e.label,n||a);return[o].concat(OTe(s))};ws.parseViewBox=PZ;ws.renderCallByParent=YTe;var L4,G9;function ZTe(){if(G9)return L4;G9=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return L4=t,L4}var KTe=ZTe();const QTe=ki(KTe);function $1(t){"@babel/helpers - typeof";return $1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$1(t)}var JTe=["valueAccessor"],ewe=["data","dataKey","clockWise","id","textBreakAll"];function twe(t){return awe(t)||rwe(t)||iwe(t)||nwe()}function nwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iwe(t,e){if(t){if(typeof t=="string")return tO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tO(t,e)}}function rwe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function awe(t){if(Array.isArray(t))return tO(t)}function tO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function D3(){return D3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},D3.apply(this,arguments)}function V9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function H9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V9(Object(n),!0).forEach(function(i){swe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V9(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function swe(t,e,n){return e=owe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function owe(t){var e=lwe(t,"string");return $1(e)=="symbol"?e:e+""}function lwe(t,e){if($1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if($1(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function q9(t,e){if(t==null)return{};var n=cwe(t,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function cwe(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}var uwe=function(e){return Array.isArray(e.value)?QTe(e.value):e.value};function Wh(t){var e=t.valueAccessor,n=e===void 0?uwe:e,i=q9(t,JTe),r=i.data,a=i.dataKey,s=i.clockWise,o=i.id,l=i.textBreakAll,u=q9(i,ewe);return!r||!r.length?null:De.createElement(Dr,{className:"recharts-label-list"},r.map(function(h,p){var g=si(a)?n(h,p):el(h&&h.payload,a),x=si(o)?{}:{id:"".concat(o,"-").concat(p)};return De.createElement(ws,D3({},ri(h,!0),u,x,{parentViewBox:h.parentViewBox,value:g,textBreakAll:l,viewBox:ws.parseViewBox(si(s)?h:H9(H9({},h),{},{clockWise:s})),key:"label-".concat(p),index:p}))}))}Wh.displayName="LabelList";function fwe(t,e){return t?t===!0?De.createElement(Wh,{key:"labelList-implicit",data:e}):De.isValidElement(t)||Zn(t)?De.createElement(Wh,{key:"labelList-implicit",data:e,content:t}):sv(t)?De.createElement(Wh,D3({data:e},t,{key:"labelList-implicit"})):null:null}function hwe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var i=t.children,r=wc(i,Wh).map(function(s,o){return z.cloneElement(s,{data:e,key:"labelList-".concat(o)})});if(!n)return r;var a=fwe(t.label,e);return[a].concat(twe(r))}Wh.renderCallByParent=hwe;function Y1(t){"@babel/helpers - typeof";return Y1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y1(t)}function nO(){return nO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},nO.apply(this,arguments)}function W9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function X9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W9(Object(n),!0).forEach(function(i){dwe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W9(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function dwe(t,e,n){return e=pwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pwe(t){var e=mwe(t,"string");return Y1(e)=="symbol"?e:e+""}function mwe(t,e){if(Y1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Y1(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gwe=function(e,n){var i=_c(n-e),r=Math.min(Math.abs(n-e),359.999);return i*r},DM=function(e){var n=e.cx,i=e.cy,r=e.radius,a=e.angle,s=e.sign,o=e.isExternal,l=e.cornerRadius,u=e.cornerIsExternal,h=l*(o?1:-1)+r,p=Math.asin(l/h)/O3,g=u?a:a+s*p,x=as(n,i,h,g),b=as(n,i,r,g),M=u?a-s*p:a,S=as(n,i,h*Math.cos(p*O3),M);return{center:x,circleTangency:b,lineTangency:S,theta:p}},IZ=function(e){var n=e.cx,i=e.cy,r=e.innerRadius,a=e.outerRadius,s=e.startAngle,o=e.endAngle,l=gwe(s,o),u=s+l,h=as(n,i,a,s),p=as(n,i,a,u),g="M ".concat(h.x,",").concat(h.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>u),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(r>0){var x=as(n,i,r,s),b=as(n,i,r,u);g+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=u),`,
            `).concat(x.x,",").concat(x.y," Z")}else g+="L ".concat(n,",").concat(i," Z");return g},vwe=function(e){var n=e.cx,i=e.cy,r=e.innerRadius,a=e.outerRadius,s=e.cornerRadius,o=e.forceCornerRadius,l=e.cornerIsExternal,u=e.startAngle,h=e.endAngle,p=_c(h-u),g=DM({cx:n,cy:i,radius:a,angle:u,sign:p,cornerRadius:s,cornerIsExternal:l}),x=g.circleTangency,b=g.lineTangency,M=g.theta,S=DM({cx:n,cy:i,radius:a,angle:h,sign:-p,cornerRadius:s,cornerIsExternal:l}),T=S.circleTangency,A=S.lineTangency,E=S.theta,j=l?Math.abs(u-h):Math.abs(u-h)-M-E;if(j<0)return o?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):IZ({cx:n,cy:i,innerRadius:r,outerRadius:a,startAngle:u,endAngle:h});var R="M ".concat(b.x,",").concat(b.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(j>180),",").concat(+(p<0),",").concat(T.x,",").concat(T.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(A.x,",").concat(A.y,`
  `);if(r>0){var C=DM({cx:n,cy:i,radius:r,angle:u,sign:p,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),D=C.circleTangency,U=C.lineTangency,I=C.theta,L=DM({cx:n,cy:i,radius:r,angle:h,sign:-p,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),F=L.circleTangency,G=L.lineTangency,H=L.theta,W=l?Math.abs(u-h):Math.abs(u-h)-I-H;if(W<0&&s===0)return"".concat(R,"L").concat(n,",").concat(i,"Z");R+="L".concat(G.x,",").concat(G.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(F.x,",").concat(F.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(W>180),",").concat(+(p>0),",").concat(D.x,",").concat(D.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(U.x,",").concat(U.y,"Z")}else R+="L".concat(n,",").concat(i,"Z");return R},xwe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},UZ=function(e){var n=X9(X9({},xwe),e),i=n.cx,r=n.cy,a=n.innerRadius,s=n.outerRadius,o=n.cornerRadius,l=n.forceCornerRadius,u=n.cornerIsExternal,h=n.startAngle,p=n.endAngle,g=n.className;if(s<a||h===p)return null;var x=vi("recharts-sector",g),b=s-a,M=J0(o,b,0,!0),S;return M>0&&Math.abs(h-p)<360?S=vwe({cx:i,cy:r,innerRadius:a,outerRadius:s,cornerRadius:Math.min(M,b/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:h,endAngle:p}):S=IZ({cx:i,cy:r,innerRadius:a,outerRadius:s,startAngle:h,endAngle:p}),De.createElement("path",nO({},ri(n,!0),{className:x,d:S,role:"img"}))};function Z1(t){"@babel/helpers - typeof";return Z1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z1(t)}function iO(){return iO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},iO.apply(this,arguments)}function $9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Y9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$9(Object(n),!0).forEach(function(i){ywe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$9(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function ywe(t,e,n){return e=bwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bwe(t){var e=Swe(t,"string");return Z1(e)=="symbol"?e:e+""}function Swe(t,e){if(Z1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Z1(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Z9={curveBasisClosed:kye,curveBasisOpen:Fye,curveBasis:zye,curveBumpX:wye,curveBumpY:Aye,curveLinearClosed:Gye,curveLinear:QT,curveMonotoneX:Vye,curveMonotoneY:Hye,curveNatural:qye,curveStep:Wye,curveStepAfter:$ye,curveStepBefore:Xye},PM=function(e){return e.x===+e.x&&e.y===+e.y},gy=function(e){return e.x},vy=function(e){return e.y},Mwe=function(e,n){if(Zn(e))return e;var i="curve".concat(ZT(e));return(i==="curveMonotone"||i==="curveBump")&&n?Z9["".concat(i).concat(n==="vertical"?"Y":"X")]:Z9[i]||QT},_we=function(e){var n=e.type,i=n===void 0?"linear":n,r=e.points,a=r===void 0?[]:r,s=e.baseLine,o=e.layout,l=e.connectNulls,u=l===void 0?!1:l,h=Mwe(i,o),p=u?a.filter(function(M){return PM(M)}):a,g;if(Array.isArray(s)){var x=u?s.filter(function(M){return PM(M)}):s,b=p.map(function(M,S){return Y9(Y9({},M),{},{base:x[S]})});return o==="vertical"?g=wM().y(vy).x1(gy).x0(function(M){return M.base.x}):g=wM().x(gy).y1(vy).y0(function(M){return M.base.y}),g.defined(PM).curve(h),g(b)}return o==="vertical"&&kt(s)?g=wM().y(vy).x1(gy).x0(s):kt(s)?g=wM().x(gy).y1(vy).y0(s):g=F$().x(gy).y(vy),g.defined(PM).curve(h),g(p)},Ky=function(e){var n=e.className,i=e.points,r=e.path,a=e.pathRef;if((!i||!i.length)&&!r)return null;var s=i&&i.length?_we(e):r;return z.createElement("path",iO({},ri(e,!1),a3(e),{className:vi("recharts-curve",n),d:s,ref:a}))},B4={exports:{}},z4,K9;function Twe(){if(K9)return z4;K9=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return z4=t,z4}var k4,Q9;function wwe(){if(Q9)return k4;Q9=1;var t=Twe();function e(){}function n(){}return n.resetWarningCache=e,k4=function(){function i(s,o,l,u,h,p){if(p!==t){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}i.isRequired=i;function r(){return i}var a={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:n,resetWarningCache:e};return a.PropTypes=a,a},k4}var J9;function Awe(){return J9||(J9=1,B4.exports=wwe()()),B4.exports}var Ewe=Awe();const Pi=ki(Ewe);var Cwe=Object.getOwnPropertyNames,Rwe=Object.getOwnPropertySymbols,jwe=Object.prototype.hasOwnProperty;function e7(t,e){return function(i,r,a){return t(i,r,a)&&e(i,r,a)}}function IM(t){return function(n,i,r){if(!n||!i||typeof n!="object"||typeof i!="object")return t(n,i,r);var a=r.cache,s=a.get(n),o=a.get(i);if(s&&o)return s===i&&o===n;a.set(n,i),a.set(i,n);var l=t(n,i,r);return a.delete(n),a.delete(i),l}}function Nwe(t){return t!=null?t[Symbol.toStringTag]:void 0}function t7(t){return Cwe(t).concat(Rwe(t))}var Owe=Object.hasOwn||(function(t,e){return jwe.call(t,e)});function hp(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var Dwe="__v",Pwe="__o",Iwe="_owner",n7=Object.getOwnPropertyDescriptor,i7=Object.keys;function Uwe(t,e,n){var i=t.length;if(e.length!==i)return!1;for(;i-- >0;)if(!n.equals(t[i],e[i],i,i,t,e,n))return!1;return!0}function Lwe(t,e){return hp(t.getTime(),e.getTime())}function Bwe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function zwe(t,e){return t===e}function r7(t,e,n){var i=t.size;if(i!==e.size)return!1;if(!i)return!0;for(var r=new Array(i),a=t.entries(),s,o,l=0;(s=a.next())&&!s.done;){for(var u=e.entries(),h=!1,p=0;(o=u.next())&&!o.done;){if(r[p]){p++;continue}var g=s.value,x=o.value;if(n.equals(g[0],x[0],l,p,t,e,n)&&n.equals(g[1],x[1],g[0],x[0],t,e,n)){h=r[p]=!0;break}p++}if(!h)return!1;l++}return!0}var kwe=hp;function Fwe(t,e,n){var i=i7(t),r=i.length;if(i7(e).length!==r)return!1;for(;r-- >0;)if(!LZ(t,e,n,i[r]))return!1;return!0}function xy(t,e,n){var i=t7(t),r=i.length;if(t7(e).length!==r)return!1;for(var a,s,o;r-- >0;)if(a=i[r],!LZ(t,e,n,a)||(s=n7(t,a),o=n7(e,a),(s||o)&&(!s||!o||s.configurable!==o.configurable||s.enumerable!==o.enumerable||s.writable!==o.writable)))return!1;return!0}function Gwe(t,e){return hp(t.valueOf(),e.valueOf())}function Vwe(t,e){return t.source===e.source&&t.flags===e.flags}function a7(t,e,n){var i=t.size;if(i!==e.size)return!1;if(!i)return!0;for(var r=new Array(i),a=t.values(),s,o;(s=a.next())&&!s.done;){for(var l=e.values(),u=!1,h=0;(o=l.next())&&!o.done;){if(!r[h]&&n.equals(s.value,o.value,s.value,o.value,t,e,n)){u=r[h]=!0;break}h++}if(!u)return!1}return!0}function Hwe(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function qwe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function LZ(t,e,n,i){return(i===Iwe||i===Pwe||i===Dwe)&&(t.$$typeof||e.$$typeof)?!0:Owe(e,i)&&n.equals(t[i],e[i],i,i,t,e,n)}var Wwe="[object Arguments]",Xwe="[object Boolean]",$we="[object Date]",Ywe="[object Error]",Zwe="[object Map]",Kwe="[object Number]",Qwe="[object Object]",Jwe="[object RegExp]",eAe="[object Set]",tAe="[object String]",nAe="[object URL]",iAe=Array.isArray,s7=typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView:null,o7=Object.assign,rAe=Object.prototype.toString.call.bind(Object.prototype.toString);function aAe(t){var e=t.areArraysEqual,n=t.areDatesEqual,i=t.areErrorsEqual,r=t.areFunctionsEqual,a=t.areMapsEqual,s=t.areNumbersEqual,o=t.areObjectsEqual,l=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,h=t.areSetsEqual,p=t.areTypedArraysEqual,g=t.areUrlsEqual,x=t.unknownTagComparators;return function(M,S,T){if(M===S)return!0;if(M==null||S==null)return!1;var A=typeof M;if(A!==typeof S)return!1;if(A!=="object")return A==="number"?s(M,S,T):A==="function"?r(M,S,T):!1;var E=M.constructor;if(E!==S.constructor)return!1;if(E===Object)return o(M,S,T);if(iAe(M))return e(M,S,T);if(s7!=null&&s7(M))return p(M,S,T);if(E===Date)return n(M,S,T);if(E===RegExp)return u(M,S,T);if(E===Map)return a(M,S,T);if(E===Set)return h(M,S,T);var j=rAe(M);if(j===$we)return n(M,S,T);if(j===Jwe)return u(M,S,T);if(j===Zwe)return a(M,S,T);if(j===eAe)return h(M,S,T);if(j===Qwe)return typeof M.then!="function"&&typeof S.then!="function"&&o(M,S,T);if(j===nAe)return g(M,S,T);if(j===Ywe)return i(M,S,T);if(j===Wwe)return o(M,S,T);if(j===Xwe||j===Kwe||j===tAe)return l(M,S,T);if(x){var R=x[j];if(!R){var C=Nwe(M);C&&(R=x[C])}if(R)return R(M,S,T)}return!1}}function sAe(t){var e=t.circular,n=t.createCustomConfig,i=t.strict,r={areArraysEqual:i?xy:Uwe,areDatesEqual:Lwe,areErrorsEqual:Bwe,areFunctionsEqual:zwe,areMapsEqual:i?e7(r7,xy):r7,areNumbersEqual:kwe,areObjectsEqual:i?xy:Fwe,arePrimitiveWrappersEqual:Gwe,areRegExpsEqual:Vwe,areSetsEqual:i?e7(a7,xy):a7,areTypedArraysEqual:i?xy:Hwe,areUrlsEqual:qwe,unknownTagComparators:void 0};if(n&&(r=o7({},r,n(r))),e){var a=IM(r.areArraysEqual),s=IM(r.areMapsEqual),o=IM(r.areObjectsEqual),l=IM(r.areSetsEqual);r=o7({},r,{areArraysEqual:a,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:l})}return r}function oAe(t){return function(e,n,i,r,a,s,o){return t(e,n,o)}}function lAe(t){var e=t.circular,n=t.comparator,i=t.createState,r=t.equals,a=t.strict;if(i)return function(l,u){var h=i(),p=h.cache,g=p===void 0?e?new WeakMap:void 0:p,x=h.meta;return n(l,u,{cache:g,equals:r,meta:x,strict:a})};if(e)return function(l,u){return n(l,u,{cache:new WeakMap,equals:r,meta:void 0,strict:a})};var s={cache:void 0,equals:r,meta:void 0,strict:a};return function(l,u){return n(l,u,s)}}var cAe=ld();ld({strict:!0});ld({circular:!0});ld({circular:!0,strict:!0});ld({createInternalComparator:function(){return hp}});ld({strict:!0,createInternalComparator:function(){return hp}});ld({circular:!0,createInternalComparator:function(){return hp}});ld({circular:!0,createInternalComparator:function(){return hp},strict:!0});function ld(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,i=t.createInternalComparator,r=t.createState,a=t.strict,s=a===void 0?!1:a,o=sAe(t),l=aAe(o),u=i?i(l):oAe(l);return lAe({circular:n,comparator:l,createState:r,equals:u,strict:s})}function uAe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function l7(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,i=function r(a){n<0&&(n=a),a-n>e?(t(a),n=-1):uAe(r)};requestAnimationFrame(i)}function rO(t){"@babel/helpers - typeof";return rO=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rO(t)}function fAe(t){return mAe(t)||pAe(t)||dAe(t)||hAe()}function hAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dAe(t,e){if(t){if(typeof t=="string")return c7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c7(t,e)}}function c7(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function pAe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mAe(t){if(Array.isArray(t))return t}function gAe(){var t={},e=function(){return null},n=!1,i=function r(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var s=a,o=fAe(s),l=o[0],u=o.slice(1);if(typeof l=="number"){l7(r.bind(null,u),l);return}r(l),l7(r.bind(null,u));return}rO(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,i(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function K1(t){"@babel/helpers - typeof";return K1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K1(t)}function u7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function f7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u7(Object(n),!0).forEach(function(i){BZ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u7(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function BZ(t,e,n){return e=vAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vAe(t){var e=xAe(t,"string");return K1(e)==="symbol"?e:String(e)}function xAe(t,e){if(K1(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(K1(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yAe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(i,r){return i.filter(function(a){return r.includes(a)})})},bAe=function(e){return e},SAe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Qy=function(e,n){return Object.keys(n).reduce(function(i,r){return f7(f7({},i),{},BZ({},r,e(r,n[r])))},{})},h7=function(e,n,i){return e.map(function(r){return"".concat(SAe(r)," ").concat(n,"ms ").concat(i)}).join(",")};function MAe(t,e){return wAe(t)||TAe(t,e)||zZ(t,e)||_Ae()}function _Ae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TAe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,r,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(i=a.call(n)).done)&&(o.push(i.value),o.length!==e);l=!0);}catch(h){u=!0,r=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}function wAe(t){if(Array.isArray(t))return t}function AAe(t){return RAe(t)||CAe(t)||zZ(t)||EAe()}function EAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zZ(t,e){if(t){if(typeof t=="string")return aO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aO(t,e)}}function CAe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function RAe(t){if(Array.isArray(t))return aO(t)}function aO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var P3=1e-4,kZ=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},FZ=function(e,n){return e.map(function(i,r){return i*Math.pow(n,r)}).reduce(function(i,r){return i+r})},d7=function(e,n){return function(i){var r=kZ(e,n);return FZ(r,i)}},jAe=function(e,n){return function(i){var r=kZ(e,n),a=[].concat(AAe(r.map(function(s,o){return s*o}).slice(1)),[0]);return FZ(a,i)}},p7=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=n[0],a=n[1],s=n[2],o=n[3];if(n.length===1)switch(n[0]){case"linear":r=0,a=0,s=1,o=1;break;case"ease":r=.25,a=.1,s=.25,o=1;break;case"ease-in":r=.42,a=0,s=1,o=1;break;case"ease-out":r=.42,a=0,s=.58,o=1;break;case"ease-in-out":r=0,a=0,s=.58,o=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(S){return parseFloat(S)}),h=MAe(u,4);r=h[0],a=h[1],s=h[2],o=h[3]}}}var p=d7(r,s),g=d7(a,o),x=jAe(r,s),b=function(T){return T>1?1:T<0?0:T},M=function(T){for(var A=T>1?1:T,E=A,j=0;j<8;++j){var R=p(E)-A,C=x(E);if(Math.abs(R-A)<P3||C<P3)return g(E);E=b(E-R/C)}return g(E)};return M.isStepper=!1,M},NAe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,i=n===void 0?100:n,r=e.damping,a=r===void 0?8:r,s=e.dt,o=s===void 0?17:s,l=function(h,p,g){var x=-(h-p)*i,b=g*a,M=g+(x-b)*o/1e3,S=g*o/1e3+h;return Math.abs(S-p)<P3&&Math.abs(M)<P3?[p,0]:[S,M]};return l.isStepper=!0,l.dt=o,l},OAe=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=n[0];if(typeof r=="string")switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return p7(r);case"spring":return NAe();default:if(r.split("(")[0]==="cubic-bezier")return p7(r)}return typeof r=="function"?r:null};function Q1(t){"@babel/helpers - typeof";return Q1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q1(t)}function m7(t){return IAe(t)||PAe(t)||GZ(t)||DAe()}function DAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PAe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function IAe(t){if(Array.isArray(t))return oO(t)}function g7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function ts(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g7(Object(n),!0).forEach(function(i){sO(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g7(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function sO(t,e,n){return e=UAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UAe(t){var e=LAe(t,"string");return Q1(e)==="symbol"?e:String(e)}function LAe(t,e){if(Q1(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Q1(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BAe(t,e){return FAe(t)||kAe(t,e)||GZ(t,e)||zAe()}function zAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GZ(t,e){if(t){if(typeof t=="string")return oO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oO(t,e)}}function oO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function kAe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,r,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(i=a.call(n)).done)&&(o.push(i.value),o.length!==e);l=!0);}catch(h){u=!0,r=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}function FAe(t){if(Array.isArray(t))return t}var I3=function(e,n,i){return e+(n-e)*i},lO=function(e){var n=e.from,i=e.to;return n!==i},GAe=function t(e,n,i){var r=Qy(function(a,s){if(lO(s)){var o=e(s.from,s.to,s.velocity),l=BAe(o,2),u=l[0],h=l[1];return ts(ts({},s),{},{from:u,velocity:h})}return s},n);return i<1?Qy(function(a,s){return lO(s)?ts(ts({},s),{},{velocity:I3(s.velocity,r[a].velocity,i),from:I3(s.from,r[a].from,i)}):s},n):t(e,r,i-1)};const VAe=(function(t,e,n,i,r){var a=yAe(t,e),s=a.reduce(function(S,T){return ts(ts({},S),{},sO({},T,[t[T],e[T]]))},{}),o=a.reduce(function(S,T){return ts(ts({},S),{},sO({},T,{from:t[T],velocity:0,to:e[T]}))},{}),l=-1,u,h,p=function(){return null},g=function(){return Qy(function(T,A){return A.from},o)},x=function(){return!Object.values(o).filter(lO).length},b=function(T){u||(u=T);var A=T-u,E=A/n.dt;o=GAe(n,o,E),r(ts(ts(ts({},t),e),g())),u=T,x()||(l=requestAnimationFrame(p))},M=function(T){h||(h=T);var A=(T-h)/i,E=Qy(function(R,C){return I3.apply(void 0,m7(C).concat([n(A)]))},s);if(r(ts(ts(ts({},t),e),E)),A<1)l=requestAnimationFrame(p);else{var j=Qy(function(R,C){return I3.apply(void 0,m7(C).concat([n(1)]))},s);r(ts(ts(ts({},t),e),j))}};return p=n.isStepper?b:M,function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(l)}}});function Ug(t){"@babel/helpers - typeof";return Ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ug(t)}var HAe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function qAe(t,e){if(t==null)return{};var n=WAe(t,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function WAe(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,a;for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function F4(t){return ZAe(t)||YAe(t)||$Ae(t)||XAe()}function XAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Ae(t,e){if(t){if(typeof t=="string")return cO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cO(t,e)}}function YAe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ZAe(t){if(Array.isArray(t))return cO(t)}function cO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function v7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function pc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v7(Object(n),!0).forEach(function(i){jy(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v7(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function jy(t,e,n){return e=VZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QAe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,VZ(i.key),i)}}function JAe(t,e,n){return e&&QAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function VZ(t){var e=eEe(t,"string");return Ug(e)==="symbol"?e:String(e)}function eEe(t,e){if(Ug(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Ug(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uO(t,e)}function uO(t,e){return uO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},uO(t,e)}function nEe(t){var e=iEe();return function(){var i=U3(t),r;if(e){var a=U3(this).constructor;r=Reflect.construct(i,arguments,a)}else r=i.apply(this,arguments);return fO(this,r)}}function fO(t,e){if(e&&(Ug(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hO(t)}function hO(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iEe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function U3(t){return U3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},U3(t)}var If=(function(t){tEe(n,t);var e=nEe(n);function n(i,r){var a;KAe(this,n),a=e.call(this,i,r);var s=a.props,o=s.isActive,l=s.attributeName,u=s.from,h=s.to,p=s.steps,g=s.children,x=s.duration;if(a.handleStyleChange=a.handleStyleChange.bind(hO(a)),a.changeStyle=a.changeStyle.bind(hO(a)),!o||x<=0)return a.state={style:{}},typeof g=="function"&&(a.state={style:h}),fO(a);if(p&&p.length)a.state={style:p[0].style};else if(u){if(typeof g=="function")return a.state={style:u},fO(a);a.state={style:l?jy({},l,u):u}}else a.state={style:{}};return a}return JAe(n,[{key:"componentDidMount",value:function(){var r=this.props,a=r.isActive,s=r.canBegin;this.mounted=!0,!(!a||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(r){var a=this.props,s=a.isActive,o=a.canBegin,l=a.attributeName,u=a.shouldReAnimate,h=a.to,p=a.from,g=this.state.style;if(o){if(!s){var x={style:l?jy({},l,h):h};this.state&&g&&(l&&g[l]!==h||!l&&g!==h)&&this.setState(x);return}if(!(cAe(r.to,h)&&r.canBegin&&r.isActive)){var b=!r.canBegin||!r.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var M=b||u?p:r.to;if(this.state&&g){var S={style:l?jy({},l,M):M};(l&&g[l]!==M||!l&&g!==M)&&this.setState(S)}this.runAnimation(pc(pc({},this.props),{},{from:M,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var r=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),r&&r()}},{key:"handleStyleChange",value:function(r){this.changeStyle(r)}},{key:"changeStyle",value:function(r){this.mounted&&this.setState({style:r})}},{key:"runJSAnimation",value:function(r){var a=this,s=r.from,o=r.to,l=r.duration,u=r.easing,h=r.begin,p=r.onAnimationEnd,g=r.onAnimationStart,x=VAe(s,o,OAe(u),l,this.changeStyle),b=function(){a.stopJSAnimation=x()};this.manager.start([g,h,b,l,p])}},{key:"runStepAnimation",value:function(r){var a=this,s=r.steps,o=r.begin,l=r.onAnimationStart,u=s[0],h=u.style,p=u.duration,g=p===void 0?0:p,x=function(M,S,T){if(T===0)return M;var A=S.duration,E=S.easing,j=E===void 0?"ease":E,R=S.style,C=S.properties,D=S.onAnimationEnd,U=T>0?s[T-1]:S,I=C||Object.keys(R);if(typeof j=="function"||j==="spring")return[].concat(F4(M),[a.runJSAnimation.bind(a,{from:U.style,to:R,duration:A,easing:j}),A]);var L=h7(I,A,j),F=pc(pc(pc({},U.style),R),{},{transition:L});return[].concat(F4(M),[F,A,D]).filter(bAe)};return this.manager.start([l].concat(F4(s.reduce(x,[h,Math.max(g,o)])),[r.onAnimationEnd]))}},{key:"runAnimation",value:function(r){this.manager||(this.manager=gAe());var a=r.begin,s=r.duration,o=r.attributeName,l=r.to,u=r.easing,h=r.onAnimationStart,p=r.onAnimationEnd,g=r.steps,x=r.children,b=this.manager;if(this.unSubscribe=b.subscribe(this.handleStyleChange),typeof u=="function"||typeof x=="function"||u==="spring"){this.runJSAnimation(r);return}if(g.length>1){this.runStepAnimation(r);return}var M=o?jy({},o,l):l,S=h7(Object.keys(M),s,u);b.start([h,a,pc(pc({},M),{},{transition:S}),s,p])}},{key:"render",value:function(){var r=this.props,a=r.children;r.begin;var s=r.duration;r.attributeName,r.easing;var o=r.isActive;r.steps,r.from,r.to,r.canBegin,r.onAnimationEnd,r.shouldReAnimate,r.onAnimationReStart;var l=qAe(r,HAe),u=z.Children.count(a),h=this.state.style;if(typeof a=="function")return a(h);if(!o||u===0||s<=0)return a;var p=function(x){var b=x.props,M=b.style,S=M===void 0?{}:M,T=b.className,A=z.cloneElement(x,pc(pc({},l),{},{style:pc(pc({},S),h),className:T}));return A};return u===1?p(z.Children.only(a)):De.createElement("div",null,z.Children.map(a,function(g){return p(g)}))}}]),n})(z.PureComponent);If.displayName="Animate";If.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};If.propTypes={from:Pi.oneOfType([Pi.object,Pi.string]),to:Pi.oneOfType([Pi.object,Pi.string]),attributeName:Pi.string,duration:Pi.number,begin:Pi.number,easing:Pi.oneOfType([Pi.string,Pi.func]),steps:Pi.arrayOf(Pi.shape({duration:Pi.number.isRequired,style:Pi.object.isRequired,easing:Pi.oneOfType([Pi.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Pi.func]),properties:Pi.arrayOf("string"),onAnimationEnd:Pi.func})),children:Pi.oneOfType([Pi.node,Pi.func]),isActive:Pi.bool,canBegin:Pi.bool,onAnimationEnd:Pi.func,shouldReAnimate:Pi.bool,onAnimationStart:Pi.func,onAnimationReStart:Pi.func};function J1(t){"@babel/helpers - typeof";return J1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J1(t)}function L3(){return L3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},L3.apply(this,arguments)}function rEe(t,e){return lEe(t)||oEe(t,e)||sEe(t,e)||aEe()}function aEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sEe(t,e){if(t){if(typeof t=="string")return x7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x7(t,e)}}function x7(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function oEe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,r,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(i=a.call(n)).done)&&(o.push(i.value),o.length!==e);l=!0);}catch(h){u=!0,r=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}function lEe(t){if(Array.isArray(t))return t}function y7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function b7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y7(Object(n),!0).forEach(function(i){cEe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y7(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function cEe(t,e,n){return e=uEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uEe(t){var e=fEe(t,"string");return J1(e)=="symbol"?e:e+""}function fEe(t,e){if(J1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(J1(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var S7=function(e,n,i,r,a){var s=Math.min(Math.abs(i)/2,Math.abs(r)/2),o=r>=0?1:-1,l=i>=0?1:-1,u=r>=0&&i>=0||r<0&&i<0?1:0,h;if(s>0&&a instanceof Array){for(var p=[0,0,0,0],g=0,x=4;g<x;g++)p[g]=a[g]>s?s:a[g];h="M".concat(e,",").concat(n+o*p[0]),p[0]>0&&(h+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(u,",").concat(e+l*p[0],",").concat(n)),h+="L ".concat(e+i-l*p[1],",").concat(n),p[1]>0&&(h+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(u,`,
        `).concat(e+i,",").concat(n+o*p[1])),h+="L ".concat(e+i,",").concat(n+r-o*p[2]),p[2]>0&&(h+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(u,`,
        `).concat(e+i-l*p[2],",").concat(n+r)),h+="L ".concat(e+l*p[3],",").concat(n+r),p[3]>0&&(h+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+r-o*p[3])),h+="Z"}else if(s>0&&a===+a&&a>0){var b=Math.min(s,a);h="M ".concat(e,",").concat(n+o*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e+l*b,",").concat(n,`
            L `).concat(e+i-l*b,",").concat(n,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e+i,",").concat(n+o*b,`
            L `).concat(e+i,",").concat(n+r-o*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e+i-l*b,",").concat(n+r,`
            L `).concat(e+l*b,",").concat(n+r,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e,",").concat(n+r-o*b," Z")}else h="M ".concat(e,",").concat(n," h ").concat(i," v ").concat(r," h ").concat(-i," Z");return h},hEe=function(e,n){if(!e||!n)return!1;var i=e.x,r=e.y,a=n.x,s=n.y,o=n.width,l=n.height;if(Math.abs(o)>0&&Math.abs(l)>0){var u=Math.min(a,a+o),h=Math.max(a,a+o),p=Math.min(s,s+l),g=Math.max(s,s+l);return i>=u&&i<=h&&r>=p&&r<=g}return!1},dEe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},dI=function(e){var n=b7(b7({},dEe),e),i=z.useRef(),r=z.useState(-1),a=rEe(r,2),s=a[0],o=a[1];z.useEffect(function(){if(i.current&&i.current.getTotalLength)try{var j=i.current.getTotalLength();j&&o(j)}catch{}},[]);var l=n.x,u=n.y,h=n.width,p=n.height,g=n.radius,x=n.className,b=n.animationEasing,M=n.animationDuration,S=n.animationBegin,T=n.isAnimationActive,A=n.isUpdateAnimationActive;if(l!==+l||u!==+u||h!==+h||p!==+p||h===0||p===0)return null;var E=vi("recharts-rectangle",x);return A?De.createElement(If,{canBegin:s>0,from:{width:h,height:p,x:l,y:u},to:{width:h,height:p,x:l,y:u},duration:M,animationEasing:b,isActive:A},function(j){var R=j.width,C=j.height,D=j.x,U=j.y;return De.createElement(If,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:S,duration:M,isActive:T,easing:b},De.createElement("path",L3({},ri(n,!0),{className:E,d:S7(D,U,R,C,g),ref:i})))}):De.createElement("path",L3({},ri(n,!0),{className:E,d:S7(l,u,h,p,g)}))};function dO(){return dO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},dO.apply(this,arguments)}var pI=function(e){var n=e.cx,i=e.cy,r=e.r,a=e.className,s=vi("recharts-dot",a);return n===+n&&i===+i&&r===+r?z.createElement("circle",dO({},ri(e,!1),a3(e),{className:s,cx:n,cy:i,r})):null};function eb(t){"@babel/helpers - typeof";return eb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eb(t)}var pEe=["x","y","top","left","width","height","className"];function pO(){return pO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},pO.apply(this,arguments)}function M7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function mEe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M7(Object(n),!0).forEach(function(i){gEe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M7(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function gEe(t,e,n){return e=vEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vEe(t){var e=xEe(t,"string");return eb(e)=="symbol"?e:e+""}function xEe(t,e){if(eb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(eb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yEe(t,e){if(t==null)return{};var n=bEe(t,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function bEe(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}var SEe=function(e,n,i,r,a,s){return"M".concat(e,",").concat(a,"v").concat(r,"M").concat(s,",").concat(n,"h").concat(i)},MEe=function(e){var n=e.x,i=n===void 0?0:n,r=e.y,a=r===void 0?0:r,s=e.top,o=s===void 0?0:s,l=e.left,u=l===void 0?0:l,h=e.width,p=h===void 0?0:h,g=e.height,x=g===void 0?0:g,b=e.className,M=yEe(e,pEe),S=mEe({x:i,y:a,top:o,left:u,width:p,height:x},M);return!kt(i)||!kt(a)||!kt(p)||!kt(x)||!kt(o)||!kt(u)?null:De.createElement("path",pO({},ri(S,!0),{className:vi("recharts-cross",b),d:SEe(i,a,p,x,o,u)}))},G4,_7;function _Ee(){if(_7)return G4;_7=1;var t=uY(),e=t(Object.getPrototypeOf,Object);return G4=e,G4}var V4,T7;function TEe(){if(T7)return V4;T7=1;var t=Bf(),e=_Ee(),n=zf(),i="[object Object]",r=Function.prototype,a=Object.prototype,s=r.toString,o=a.hasOwnProperty,l=s.call(Object);function u(h){if(!n(h)||t(h)!=i)return!1;var p=e(h);if(p===null)return!0;var g=o.call(p,"constructor")&&p.constructor;return typeof g=="function"&&g instanceof g&&s.call(g)==l}return V4=u,V4}var wEe=TEe();const AEe=ki(wEe);var H4,w7;function EEe(){if(w7)return H4;w7=1;var t=Bf(),e=zf(),n="[object Boolean]";function i(r){return r===!0||r===!1||e(r)&&t(r)==n}return H4=i,H4}var CEe=EEe();const REe=ki(CEe);function tb(t){"@babel/helpers - typeof";return tb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tb(t)}function B3(){return B3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},B3.apply(this,arguments)}function jEe(t,e){return PEe(t)||DEe(t,e)||OEe(t,e)||NEe()}function NEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OEe(t,e){if(t){if(typeof t=="string")return A7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A7(t,e)}}function A7(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function DEe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,r,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(i=a.call(n)).done)&&(o.push(i.value),o.length!==e);l=!0);}catch(h){u=!0,r=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}function PEe(t){if(Array.isArray(t))return t}function E7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function C7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E7(Object(n),!0).forEach(function(i){IEe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E7(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function IEe(t,e,n){return e=UEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UEe(t){var e=LEe(t,"string");return tb(e)=="symbol"?e:e+""}function LEe(t,e){if(tb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(tb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var R7=function(e,n,i,r,a){var s=i-r,o;return o="M ".concat(e,",").concat(n),o+="L ".concat(e+i,",").concat(n),o+="L ".concat(e+i-s/2,",").concat(n+a),o+="L ".concat(e+i-s/2-r,",").concat(n+a),o+="L ".concat(e,",").concat(n," Z"),o},BEe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},zEe=function(e){var n=C7(C7({},BEe),e),i=z.useRef(),r=z.useState(-1),a=jEe(r,2),s=a[0],o=a[1];z.useEffect(function(){if(i.current&&i.current.getTotalLength)try{var E=i.current.getTotalLength();E&&o(E)}catch{}},[]);var l=n.x,u=n.y,h=n.upperWidth,p=n.lowerWidth,g=n.height,x=n.className,b=n.animationEasing,M=n.animationDuration,S=n.animationBegin,T=n.isUpdateAnimationActive;if(l!==+l||u!==+u||h!==+h||p!==+p||g!==+g||h===0&&p===0||g===0)return null;var A=vi("recharts-trapezoid",x);return T?De.createElement(If,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:g,x:l,y:u},to:{upperWidth:h,lowerWidth:p,height:g,x:l,y:u},duration:M,animationEasing:b,isActive:T},function(E){var j=E.upperWidth,R=E.lowerWidth,C=E.height,D=E.x,U=E.y;return De.createElement(If,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:S,duration:M,easing:b},De.createElement("path",B3({},ri(n,!0),{className:A,d:R7(D,U,j,R,C),ref:i})))}):De.createElement("g",null,De.createElement("path",B3({},ri(n,!0),{className:A,d:R7(l,u,h,p,g)})))},kEe=["option","shapeType","propTransformer","activeClassName","isActive"];function nb(t){"@babel/helpers - typeof";return nb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nb(t)}function FEe(t,e){if(t==null)return{};var n=GEe(t,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function GEe(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function j7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function z3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j7(Object(n),!0).forEach(function(i){VEe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j7(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function VEe(t,e,n){return e=HEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HEe(t){var e=qEe(t,"string");return nb(e)=="symbol"?e:e+""}function qEe(t,e){if(nb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(nb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WEe(t,e){return z3(z3({},e),t)}function XEe(t,e){return t==="symbols"}function N7(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return De.createElement(dI,n);case"trapezoid":return De.createElement(zEe,n);case"sector":return De.createElement(UZ,n);case"symbols":if(XEe(e))return De.createElement(OP,n);break;default:return null}}function $Ee(t){return z.isValidElement(t)?t.props:t}function YEe(t){var e=t.option,n=t.shapeType,i=t.propTransformer,r=i===void 0?WEe:i,a=t.activeClassName,s=a===void 0?"recharts-active-shape":a,o=t.isActive,l=FEe(t,kEe),u;if(z.isValidElement(e))u=z.cloneElement(e,z3(z3({},l),$Ee(e)));else if(Zn(e))u=e(l);else if(AEe(e)&&!REe(e)){var h=r(e,l);u=De.createElement(N7,{shapeType:n,elementProps:h})}else{var p=l;u=De.createElement(N7,{shapeType:n,elementProps:p})}return o?De.createElement(Dr,{className:s},u):u}function dw(t,e){return e!=null&&"trapezoids"in t.props}function pw(t,e){return e!=null&&"sectors"in t.props}function ib(t,e){return e!=null&&"points"in t.props}function ZEe(t,e){var n,i,r=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,a=t.y===(e==null||(i=e.labelViewBox)===null||i===void 0?void 0:i.y)||t.y===e.y;return r&&a}function KEe(t,e){var n=t.endAngle===e.endAngle,i=t.startAngle===e.startAngle;return n&&i}function QEe(t,e){var n=t.x===e.x,i=t.y===e.y,r=t.z===e.z;return n&&i&&r}function JEe(t,e){var n;return dw(t,e)?n=ZEe:pw(t,e)?n=KEe:ib(t,e)&&(n=QEe),n}function e5e(t,e){var n;return dw(t,e)?n="trapezoids":pw(t,e)?n="sectors":ib(t,e)&&(n="points"),n}function t5e(t,e){if(dw(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(pw(t,e)){var i;return(i=e.tooltipPayload)===null||i===void 0||(i=i[0])===null||i===void 0||(i=i.payload)===null||i===void 0?void 0:i.payload}return ib(t,e)?e.payload:{}}function n5e(t){var e=t.activeTooltipItem,n=t.graphicalItem,i=t.itemData,r=e5e(n,e),a=t5e(n,e),s=i.filter(function(l,u){var h=k1(a,l),p=n.props[r].filter(function(b){var M=JEe(n,e);return M(b,e)}),g=n.props[r].indexOf(p[p.length-1]),x=u===g;return h&&x}),o=i.indexOf(s[s.length-1]);return o}var q4,O7;function i5e(){if(O7)return q4;O7=1;var t=Math.ceil,e=Math.max;function n(i,r,a,s){for(var o=-1,l=e(t((r-i)/(a||1)),0),u=Array(l);l--;)u[s?l:++o]=i,i+=a;return u}return q4=n,q4}var W4,D7;function HZ(){if(D7)return W4;D7=1;var t=AY(),e=1/0,n=17976931348623157e292;function i(r){if(!r)return r===0?r:0;if(r=t(r),r===e||r===-e){var a=r<0?-1:1;return a*n}return r===r?r:0}return W4=i,W4}var X4,P7;function r5e(){if(P7)return X4;P7=1;var t=i5e(),e=nw(),n=HZ();function i(r){return function(a,s,o){return o&&typeof o!="number"&&e(a,s,o)&&(s=o=void 0),a=n(a),s===void 0?(s=a,a=0):s=n(s),o=o===void 0?a<s?1:-1:n(o),t(a,s,o,r)}}return X4=i,X4}var $4,I7;function a5e(){if(I7)return $4;I7=1;var t=r5e(),e=t();return $4=e,$4}var s5e=a5e();const k3=ki(s5e);function rb(t){"@babel/helpers - typeof";return rb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rb(t)}function U7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function L7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U7(Object(n),!0).forEach(function(i){qZ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U7(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function qZ(t,e,n){return e=o5e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o5e(t){var e=l5e(t,"string");return rb(e)=="symbol"?e:e+""}function l5e(t,e){if(rb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(rb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var c5e=["Webkit","Moz","O","ms"],u5e=function(e,n){var i=e.replace(/(\w)/,function(a){return a.toUpperCase()}),r=c5e.reduce(function(a,s){return L7(L7({},a),{},qZ({},s+i,n))},{});return r[e]=n,r};function Lg(t){"@babel/helpers - typeof";return Lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lg(t)}function F3(){return F3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},F3.apply(this,arguments)}function B7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Y4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B7(Object(n),!0).forEach(function(i){Fo(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B7(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function f5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function z7(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,XZ(i.key),i)}}function h5e(t,e,n){return e&&z7(t.prototype,e),n&&z7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function d5e(t,e,n){return e=G3(e),p5e(t,WZ()?Reflect.construct(e,n||[],G3(t).constructor):e.apply(t,n))}function p5e(t,e){if(e&&(Lg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m5e(t)}function m5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WZ=function(){return!!t})()}function G3(t){return G3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},G3(t)}function g5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mO(t,e)}function mO(t,e){return mO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},mO(t,e)}function Fo(t,e,n){return e=XZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XZ(t){var e=v5e(t,"string");return Lg(e)=="symbol"?e:e+""}function v5e(t,e){if(Lg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Lg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var x5e=function(e){var n=e.data,i=e.startIndex,r=e.endIndex,a=e.x,s=e.width,o=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,u=Yy().domain(k3(0,l)).range([a,a+s-o]),h=u.domain().map(function(p){return u(p)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(i),endX:u(r),scale:u,scaleValues:h}},k7=function(e){return e.changedTouches&&!!e.changedTouches.length},Bg=(function(t){function e(n){var i;return f5e(this,e),i=d5e(this,e,[n]),Fo(i,"handleDrag",function(r){i.leaveTimer&&(clearTimeout(i.leaveTimer),i.leaveTimer=null),i.state.isTravellerMoving?i.handleTravellerMove(r):i.state.isSlideMoving&&i.handleSlideDrag(r)}),Fo(i,"handleTouchMove",function(r){r.changedTouches!=null&&r.changedTouches.length>0&&i.handleDrag(r.changedTouches[0])}),Fo(i,"handleDragEnd",function(){i.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var r=i.props,a=r.endIndex,s=r.onDragEnd,o=r.startIndex;s==null||s({endIndex:a,startIndex:o})}),i.detachDragEndListener()}),Fo(i,"handleLeaveWrapper",function(){(i.state.isTravellerMoving||i.state.isSlideMoving)&&(i.leaveTimer=window.setTimeout(i.handleDragEnd,i.props.leaveTimeOut))}),Fo(i,"handleEnterSlideOrTraveller",function(){i.setState({isTextActive:!0})}),Fo(i,"handleLeaveSlideOrTraveller",function(){i.setState({isTextActive:!1})}),Fo(i,"handleSlideDragStart",function(r){var a=k7(r)?r.changedTouches[0]:r;i.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),i.attachDragEndListener()}),i.travellerDragStartHandlers={startX:i.handleTravellerDragStart.bind(i,"startX"),endX:i.handleTravellerDragStart.bind(i,"endX")},i.state={},i}return g5e(e,t),h5e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(i){var r=i.startX,a=i.endX,s=this.state.scaleValues,o=this.props,l=o.gap,u=o.data,h=u.length-1,p=Math.min(r,a),g=Math.max(r,a),x=e.getIndexInRange(s,p),b=e.getIndexInRange(s,g);return{startIndex:x-x%l,endIndex:b===h?h:b-b%l}}},{key:"getTextOfTick",value:function(i){var r=this.props,a=r.data,s=r.tickFormatter,o=r.dataKey,l=el(a[i],o,i);return Zn(s)?s(l,i):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(i){var r=this.state,a=r.slideMoveStartX,s=r.startX,o=r.endX,l=this.props,u=l.x,h=l.width,p=l.travellerWidth,g=l.startIndex,x=l.endIndex,b=l.onChange,M=i.pageX-a;M>0?M=Math.min(M,u+h-p-o,u+h-p-s):M<0&&(M=Math.max(M,u-s,u-o));var S=this.getIndex({startX:s+M,endX:o+M});(S.startIndex!==g||S.endIndex!==x)&&b&&b(S),this.setState({startX:s+M,endX:o+M,slideMoveStartX:i.pageX})}},{key:"handleTravellerDragStart",value:function(i,r){var a=k7(r)?r.changedTouches[0]:r;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:i,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(i){var r=this.state,a=r.brushMoveStartX,s=r.movingTravellerId,o=r.endX,l=r.startX,u=this.state[s],h=this.props,p=h.x,g=h.width,x=h.travellerWidth,b=h.onChange,M=h.gap,S=h.data,T={startX:this.state.startX,endX:this.state.endX},A=i.pageX-a;A>0?A=Math.min(A,p+g-x-u):A<0&&(A=Math.max(A,p-u)),T[s]=u+A;var E=this.getIndex(T),j=E.startIndex,R=E.endIndex,C=function(){var U=S.length-1;return s==="startX"&&(o>l?j%M===0:R%M===0)||o<l&&R===U||s==="endX"&&(o>l?R%M===0:j%M===0)||o>l&&R===U};this.setState(Fo(Fo({},s,u+A),"brushMoveStartX",i.pageX),function(){b&&C()&&b(E)})}},{key:"handleTravellerMoveKeyboard",value:function(i,r){var a=this,s=this.state,o=s.scaleValues,l=s.startX,u=s.endX,h=this.state[r],p=o.indexOf(h);if(p!==-1){var g=p+i;if(!(g===-1||g>=o.length)){var x=o[g];r==="startX"&&x>=u||r==="endX"&&x<=l||this.setState(Fo({},r,x),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var i=this.props,r=i.x,a=i.y,s=i.width,o=i.height,l=i.fill,u=i.stroke;return De.createElement("rect",{stroke:u,fill:l,x:r,y:a,width:s,height:o})}},{key:"renderPanorama",value:function(){var i=this.props,r=i.x,a=i.y,s=i.width,o=i.height,l=i.data,u=i.children,h=i.padding,p=z.Children.only(u);return p?De.cloneElement(p,{x:r,y:a,width:s,height:o,margin:h,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(i,r){var a,s,o=this,l=this.props,u=l.y,h=l.travellerWidth,p=l.height,g=l.traveller,x=l.ariaLabel,b=l.data,M=l.startIndex,S=l.endIndex,T=Math.max(i,this.props.x),A=Y4(Y4({},ri(this.props,!1)),{},{x:T,y:u,width:h,height:p}),E=x||"Min value: ".concat((a=b[M])===null||a===void 0?void 0:a.name,", Max value: ").concat((s=b[S])===null||s===void 0?void 0:s.name);return De.createElement(Dr,{tabIndex:0,role:"slider","aria-label":E,"aria-valuenow":i,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[r],onTouchStart:this.travellerDragStartHandlers[r],onKeyDown:function(R){["ArrowLeft","ArrowRight"].includes(R.key)&&(R.preventDefault(),R.stopPropagation(),o.handleTravellerMoveKeyboard(R.key==="ArrowRight"?1:-1,r))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(g,A))}},{key:"renderSlide",value:function(i,r){var a=this.props,s=a.y,o=a.height,l=a.stroke,u=a.travellerWidth,h=Math.min(i,r)+u,p=Math.max(Math.abs(r-i)-u,0);return De.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:h,y:s,width:p,height:o})}},{key:"renderText",value:function(){var i=this.props,r=i.startIndex,a=i.endIndex,s=i.y,o=i.height,l=i.travellerWidth,u=i.stroke,h=this.state,p=h.startX,g=h.endX,x=5,b={pointerEvents:"none",fill:u};return De.createElement(Dr,{className:"recharts-brush-texts"},De.createElement(v3,F3({textAnchor:"end",verticalAnchor:"middle",x:Math.min(p,g)-x,y:s+o/2},b),this.getTextOfTick(r)),De.createElement(v3,F3({textAnchor:"start",verticalAnchor:"middle",x:Math.max(p,g)+l+x,y:s+o/2},b),this.getTextOfTick(a)))}},{key:"render",value:function(){var i=this.props,r=i.data,a=i.className,s=i.children,o=i.x,l=i.y,u=i.width,h=i.height,p=i.alwaysShowText,g=this.state,x=g.startX,b=g.endX,M=g.isTextActive,S=g.isSlideMoving,T=g.isTravellerMoving,A=g.isTravellerFocused;if(!r||!r.length||!kt(o)||!kt(l)||!kt(u)||!kt(h)||u<=0||h<=0)return null;var E=vi("recharts-brush",a),j=De.Children.count(s)===1,R=u5e("userSelect","none");return De.createElement(Dr,{className:E,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:R},this.renderBackground(),j&&this.renderPanorama(),this.renderSlide(x,b),this.renderTravellerLayer(x,"startX"),this.renderTravellerLayer(b,"endX"),(M||S||T||A||p)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(i){var r=i.x,a=i.y,s=i.width,o=i.height,l=i.stroke,u=Math.floor(a+o/2)-1;return De.createElement(De.Fragment,null,De.createElement("rect",{x:r,y:a,width:s,height:o,fill:l,stroke:"none"}),De.createElement("line",{x1:r+1,y1:u,x2:r+s-1,y2:u,fill:"none",stroke:"#fff"}),De.createElement("line",{x1:r+1,y1:u+2,x2:r+s-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(i,r){var a;return De.isValidElement(i)?a=De.cloneElement(i,r):Zn(i)?a=i(r):a=e.renderDefaultTraveller(r),a}},{key:"getDerivedStateFromProps",value:function(i,r){var a=i.data,s=i.width,o=i.x,l=i.travellerWidth,u=i.updateId,h=i.startIndex,p=i.endIndex;if(a!==r.prevData||u!==r.prevUpdateId)return Y4({prevData:a,prevTravellerWidth:l,prevUpdateId:u,prevX:o,prevWidth:s},a&&a.length?x5e({data:a,width:s,x:o,travellerWidth:l,startIndex:h,endIndex:p}):{scale:null,scaleValues:null});if(r.scale&&(s!==r.prevWidth||o!==r.prevX||l!==r.prevTravellerWidth)){r.scale.range([o,o+s-l]);var g=r.scale.domain().map(function(x){return r.scale(x)});return{prevData:a,prevTravellerWidth:l,prevUpdateId:u,prevX:o,prevWidth:s,startX:r.scale(i.startIndex),endX:r.scale(i.endIndex),scaleValues:g}}return null}},{key:"getIndexInRange",value:function(i,r){for(var a=i.length,s=0,o=a-1;o-s>1;){var l=Math.floor((s+o)/2);i[l]>r?o=l:s=l}return r>=i[o]?o:s}}])})(z.PureComponent);Fo(Bg,"displayName","Brush");Fo(Bg,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Z4,F7;function y5e(){if(F7)return Z4;F7=1;var t=zP();function e(n,i){var r;return t(n,function(a,s,o){return r=i(a,s,o),!r}),!!r}return Z4=e,Z4}var K4,G7;function b5e(){if(G7)return K4;G7=1;var t=iY(),e=ad(),n=y5e(),i=So(),r=nw();function a(s,o,l){var u=i(s)?t:n;return l&&r(s,o,l)&&(o=void 0),u(s,e(o,3))}return K4=a,K4}var S5e=b5e();const M5e=ki(S5e);var Su=function(e,n){var i=e.alwaysShow,r=e.ifOverflow;return i&&(r="extendDomain"),r===n},Q4,V7;function _5e(){if(V7)return Q4;V7=1;var t=SY();function e(n,i,r){i=="__proto__"&&t?t(n,i,{configurable:!0,enumerable:!0,value:r,writable:!0}):n[i]=r}return Q4=e,Q4}var J4,H7;function T5e(){if(H7)return J4;H7=1;var t=_5e(),e=yY(),n=ad();function i(r,a){var s={};return a=n(a,3),e(r,function(o,l,u){t(s,l,a(o,l,u))}),s}return J4=i,J4}var w5e=T5e();const A5e=ki(w5e);var ej,q7;function E5e(){if(q7)return ej;q7=1;function t(e,n){for(var i=-1,r=e==null?0:e.length;++i<r;)if(!n(e[i],i,e))return!1;return!0}return ej=t,ej}var tj,W7;function C5e(){if(W7)return tj;W7=1;var t=zP();function e(n,i){var r=!0;return t(n,function(a,s,o){return r=!!i(a,s,o),r}),r}return tj=e,tj}var nj,X7;function R5e(){if(X7)return nj;X7=1;var t=E5e(),e=C5e(),n=ad(),i=So(),r=nw();function a(s,o,l){var u=i(s)?t:e;return l&&r(s,o,l)&&(o=void 0),u(s,n(o,3))}return nj=a,nj}var j5e=R5e();const N5e=ki(j5e);var O5e=["x","y"];function ab(t){"@babel/helpers - typeof";return ab=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ab(t)}function gO(){return gO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},gO.apply(this,arguments)}function $7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function yy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$7(Object(n),!0).forEach(function(i){D5e(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$7(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function D5e(t,e,n){return e=P5e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function P5e(t){var e=I5e(t,"string");return ab(e)=="symbol"?e:e+""}function I5e(t,e){if(ab(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(ab(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function U5e(t,e){if(t==null)return{};var n=L5e(t,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function L5e(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function B5e(t,e){var n=t.x,i=t.y,r=U5e(t,O5e),a="".concat(n),s=parseInt(a,10),o="".concat(i),l=parseInt(o,10),u="".concat(e.height||r.height),h=parseInt(u,10),p="".concat(e.width||r.width),g=parseInt(p,10);return yy(yy(yy(yy(yy({},e),r),s?{x:s}:{}),l?{y:l}:{}),{},{height:h,width:g,name:e.name,radius:e.radius})}function Y7(t){return De.createElement(YEe,gO({shapeType:"rectangle",propTransformer:B5e,activeClassName:"recharts-active-bar"},t))}var z5e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(i,r){if(typeof e=="number")return e;var a=kt(i)||Wxe(i);return a?e(i,r):(a||tp(),n)}},k5e=["value","background"],$Z;function zg(t){"@babel/helpers - typeof";return zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zg(t)}function F5e(t,e){if(t==null)return{};var n=G5e(t,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function G5e(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function V3(){return V3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},V3.apply(this,arguments)}function Z7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function oa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z7(Object(n),!0).forEach(function(i){Hh(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z7(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function V5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function K7(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,ZZ(i.key),i)}}function H5e(t,e,n){return e&&K7(t.prototype,e),n&&K7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function q5e(t,e,n){return e=H3(e),W5e(t,YZ()?Reflect.construct(e,n||[],H3(t).constructor):e.apply(t,n))}function W5e(t,e){if(e&&(zg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return X5e(t)}function X5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function YZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YZ=function(){return!!t})()}function H3(t){return H3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},H3(t)}function $5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vO(t,e)}function vO(t,e){return vO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},vO(t,e)}function Hh(t,e,n){return e=ZZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZZ(t){var e=Y5e(t,"string");return zg(e)=="symbol"?e:e+""}function Y5e(t,e){if(zg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(zg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var qb=(function(t){function e(){var n;V5e(this,e);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return n=q5e(this,e,[].concat(r)),Hh(n,"state",{isAnimationFinished:!1}),Hh(n,"id",zb("recharts-bar-")),Hh(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),s&&s()}),Hh(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),s&&s()}),n}return $5e(e,t),H5e(e,[{key:"renderRectanglesStatically",value:function(i){var r=this,a=this.props,s=a.shape,o=a.dataKey,l=a.activeIndex,u=a.activeBar,h=ri(this.props,!1);return i&&i.map(function(p,g){var x=g===l,b=x?u:s,M=oa(oa(oa({},h),p),{},{isActive:x,option:b,index:g,dataKey:o,onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd});return De.createElement(Dr,V3({className:"recharts-bar-rectangle"},s3(r.props,p,g),{key:"rectangle-".concat(p==null?void 0:p.x,"-").concat(p==null?void 0:p.y,"-").concat(p==null?void 0:p.value,"-").concat(g)}),De.createElement(Y7,M))})}},{key:"renderRectanglesWithAnimation",value:function(){var i=this,r=this.props,a=r.data,s=r.layout,o=r.isAnimationActive,l=r.animationBegin,u=r.animationDuration,h=r.animationEasing,p=r.animationId,g=this.state.prevData;return De.createElement(If,{begin:l,duration:u,isActive:o,easing:h,from:{t:0},to:{t:1},key:"bar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var b=x.t,M=a.map(function(S,T){var A=g&&g[T];if(A){var E=Rl(A.x,S.x),j=Rl(A.y,S.y),R=Rl(A.width,S.width),C=Rl(A.height,S.height);return oa(oa({},S),{},{x:E(b),y:j(b),width:R(b),height:C(b)})}if(s==="horizontal"){var D=Rl(0,S.height),U=D(b);return oa(oa({},S),{},{y:S.y+S.height-U,height:U})}var I=Rl(0,S.width),L=I(b);return oa(oa({},S),{},{width:L})});return De.createElement(Dr,null,i.renderRectanglesStatically(M))})}},{key:"renderRectangles",value:function(){var i=this.props,r=i.data,a=i.isAnimationActive,s=this.state.prevData;return a&&r&&r.length&&(!s||!k1(s,r))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(r)}},{key:"renderBackground",value:function(){var i=this,r=this.props,a=r.data,s=r.dataKey,o=r.activeIndex,l=ri(this.props.background,!1);return a.map(function(u,h){u.value;var p=u.background,g=F5e(u,k5e);if(!p)return null;var x=oa(oa(oa(oa(oa({},g),{},{fill:"#eee"},p),l),s3(i.props,u,h)),{},{onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd,dataKey:s,index:h,className:"recharts-bar-background-rectangle"});return De.createElement(Y7,V3({key:"background-bar-".concat(h),option:i.props.background,isActive:h===o},x))})}},{key:"renderErrorBar",value:function(i,r){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.data,o=a.xAxis,l=a.yAxis,u=a.layout,h=a.children,p=wc(h,hw);if(!p)return null;var g=u==="vertical"?s[0].height/2:s[0].width/2,x=function(S,T){var A=Array.isArray(S.value)?S.value[1]:S.value;return{x:S.x,y:S.y,value:A,errorVal:el(S,T)}},b={clipPath:i?"url(#clipPath-".concat(r,")"):null};return De.createElement(Dr,b,p.map(function(M){return De.cloneElement(M,{key:"error-bar-".concat(r,"-").concat(M.props.dataKey),data:s,xAxis:o,yAxis:l,layout:u,offset:g,dataPointFormatter:x})}))}},{key:"render",value:function(){var i=this.props,r=i.hide,a=i.data,s=i.className,o=i.xAxis,l=i.yAxis,u=i.left,h=i.top,p=i.width,g=i.height,x=i.isAnimationActive,b=i.background,M=i.id;if(r||!a||!a.length)return null;var S=this.state.isAnimationFinished,T=vi("recharts-bar",s),A=o&&o.allowDataOverflow,E=l&&l.allowDataOverflow,j=A||E,R=si(M)?this.id:M;return De.createElement(Dr,{className:T},A||E?De.createElement("defs",null,De.createElement("clipPath",{id:"clipPath-".concat(R)},De.createElement("rect",{x:A?u:u-p/2,y:E?h:h-g/2,width:A?p:p*2,height:E?g:g*2}))):null,De.createElement(Dr,{className:"recharts-bar-rectangles",clipPath:j?"url(#clipPath-".concat(R,")"):null},b?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(j,R),(!x||S)&&Wh.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(i,r){return i.animationId!==r.prevAnimationId?{prevAnimationId:i.animationId,curData:i.data,prevData:r.curData}:i.data!==r.curData?{curData:i.data}:null}}])})(z.PureComponent);$Z=qb;Hh(qb,"displayName","Bar");Hh(qb,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!cv.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Hh(qb,"getComposedData",function(t){var e=t.props,n=t.item,i=t.barPosition,r=t.bandSize,a=t.xAxis,s=t.yAxis,o=t.xAxisTicks,l=t.yAxisTicks,u=t.stackedData,h=t.dataStartIndex,p=t.displayedData,g=t.offset,x=hTe(i,n);if(!x)return null;var b=e.layout,M=n.type.defaultProps,S=M!==void 0?oa(oa({},M),n.props):n.props,T=S.dataKey,A=S.children,E=S.minPointSize,j=b==="horizontal"?s:a,R=u?j.scale.domain():null,C=bTe({numericAxis:j}),D=wc(A,CY),U=p.map(function(I,L){var F,G,H,W,Y,k;u?F=dTe(u[h+L],R):(F=el(I,T),Array.isArray(F)||(F=[C,F]));var $=z5e(E,$Z.defaultProps.minPointSize)(F[1],L);if(b==="horizontal"){var ee,te=[s.scale(F[0]),s.scale(F[1])],ae=te[0],q=te[1];G=P9({axis:a,ticks:o,bandSize:r,offset:x.offset,entry:I,index:L}),H=(ee=q??ae)!==null&&ee!==void 0?ee:void 0,W=x.size;var K=ae-q;if(Y=Number.isNaN(K)?0:K,k={x:G,y:s.y,width:W,height:s.height},Math.abs($)>0&&Math.abs(Y)<Math.abs($)){var ie=_c(Y||$)*(Math.abs($)-Math.abs(Y));H-=ie,Y+=ie}}else{var ue=[a.scale(F[0]),a.scale(F[1])],me=ue[0],fe=ue[1];if(G=me,H=P9({axis:s,ticks:l,bandSize:r,offset:x.offset,entry:I,index:L}),W=fe-me,Y=x.size,k={x:a.x,y:H,width:a.width,height:Y},Math.abs($)>0&&Math.abs(W)<Math.abs($)){var de=_c(W||$)*(Math.abs($)-Math.abs(W));W+=de}}return oa(oa(oa({},I),{},{x:G,y:H,width:W,height:Y,value:u?F:F[1],payload:I,background:k},D&&D[L]&&D[L].props),{},{tooltipPayload:[DZ(n,I)],tooltipPosition:{x:G+W/2,y:H+Y/2}})});return oa({data:U,layout:b},g)});function sb(t){"@babel/helpers - typeof";return sb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sb(t)}function Z5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q7(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,KZ(i.key),i)}}function K5e(t,e,n){return e&&Q7(t.prototype,e),n&&Q7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function J7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function vc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?J7(Object(n),!0).forEach(function(i){mw(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J7(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function mw(t,e,n){return e=KZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KZ(t){var e=Q5e(t,"string");return sb(e)=="symbol"?e:e+""}function Q5e(t,e){if(sb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(sb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var J5e=function(e,n,i,r,a){var s=e.width,o=e.height,l=e.layout,u=e.children,h=Object.keys(n),p={left:i.left,leftMirror:i.left,right:s-i.right,rightMirror:s-i.right,top:i.top,topMirror:i.top,bottom:o-i.bottom,bottomMirror:o-i.bottom},g=!!Go(u,qb);return h.reduce(function(x,b){var M=n[b],S=M.orientation,T=M.domain,A=M.padding,E=A===void 0?{}:A,j=M.mirror,R=M.reversed,C="".concat(S).concat(j?"Mirror":""),D,U,I,L,F;if(M.type==="number"&&(M.padding==="gap"||M.padding==="no-gap")){var G=T[1]-T[0],H=1/0,W=M.categoricalDomain.sort(Yxe);if(W.forEach(function(ue,me){me>0&&(H=Math.min((ue||0)-(W[me-1]||0),H))}),Number.isFinite(H)){var Y=H/G,k=M.layout==="vertical"?i.height:i.width;if(M.padding==="gap"&&(D=Y*k/2),M.padding==="no-gap"){var $=J0(e.barCategoryGap,Y*k),ee=Y*k/2;D=ee-$-(ee-$)/k*$}}}r==="xAxis"?U=[i.left+(E.left||0)+(D||0),i.left+i.width-(E.right||0)-(D||0)]:r==="yAxis"?U=l==="horizontal"?[i.top+i.height-(E.bottom||0),i.top+(E.top||0)]:[i.top+(E.top||0)+(D||0),i.top+i.height-(E.bottom||0)-(D||0)]:U=M.range,R&&(U=[U[1],U[0]]);var te=uTe(M,a,g),ae=te.scale,q=te.realScaleType;ae.domain(T).range(U),fTe(ae);var K=yTe(ae,vc(vc({},M),{},{realScaleType:q}));r==="xAxis"?(F=S==="top"&&!j||S==="bottom"&&j,I=i.left,L=p[C]-F*M.height):r==="yAxis"&&(F=S==="left"&&!j||S==="right"&&j,I=p[C]-F*M.width,L=i.top);var ie=vc(vc(vc({},M),K),{},{realScaleType:q,x:I,y:L,scale:ae,width:r==="xAxis"?i.width:M.width,height:r==="yAxis"?i.height:M.height});return ie.bandSize=N3(ie,K),!M.hide&&r==="xAxis"?p[C]+=(F?-1:1)*ie.height:M.hide||(p[C]+=(F?-1:1)*ie.width),vc(vc({},x),{},mw({},b,ie))},{})},QZ=function(e,n){var i=e.x,r=e.y,a=n.x,s=n.y;return{x:Math.min(i,a),y:Math.min(r,s),width:Math.abs(a-i),height:Math.abs(s-r)}},eCe=function(e){var n=e.x1,i=e.y1,r=e.x2,a=e.y2;return QZ({x:n,y:i},{x:r,y:a})},JZ=(function(){function t(e){Z5e(this,t),this.scale=e}return K5e(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=i.bandAware,a=i.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+s}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(n)+o}default:return this.scale(n)}if(r){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var i=this.range(),r=i[0],a=i[i.length-1];return r<=a?n>=r&&n<=a:n>=a&&n<=r}}],[{key:"create",value:function(n){return new t(n)}}])})();mw(JZ,"EPS",1e-4);var mI=function(e){var n=Object.keys(e).reduce(function(i,r){return vc(vc({},i),{},mw({},r,JZ.create(e[r])))},{});return vc(vc({},n),{},{apply:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,o=a.position;return A5e(r,function(l,u){return n[u].apply(l,{bandAware:s,position:o})})},isInRange:function(r){return N5e(r,function(a,s){return n[s].isInRange(a)})}})};function tCe(t){return(t%180+180)%180}var nCe=function(e){var n=e.width,i=e.height,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=tCe(r),s=a*Math.PI/180,o=Math.atan(i/n),l=s>o&&s<Math.PI-o?i/Math.sin(s):n/Math.cos(s);return Math.abs(l)},ij,eV;function iCe(){if(eV)return ij;eV=1;var t=ad(),e=kb(),n=ew();function i(r){return function(a,s,o){var l=Object(a);if(!e(a)){var u=t(s,3);a=n(a),s=function(p){return u(l[p],p,l)}}var h=r(a,s,o);return h>-1?l[u?a[h]:h]:void 0}}return ij=i,ij}var rj,tV;function rCe(){if(tV)return rj;tV=1;var t=HZ();function e(n){var i=t(n),r=i%1;return i===i?r?i-r:i:0}return rj=e,rj}var aj,nV;function aCe(){if(nV)return aj;nV=1;var t=pY(),e=ad(),n=rCe(),i=Math.max;function r(a,s,o){var l=a==null?0:a.length;if(!l)return-1;var u=o==null?0:n(o);return u<0&&(u=i(l+u,0)),t(a,e(s,3),u)}return aj=r,aj}var sj,iV;function sCe(){if(iV)return sj;iV=1;var t=iCe(),e=aCe(),n=t(e);return sj=n,sj}sCe();var oCe=j$();const lCe=ki(oCe);var cCe=lCe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),eK=z.createContext(void 0),tK=z.createContext(void 0),nK=z.createContext(void 0),uCe=z.createContext({}),iK=z.createContext(void 0),rK=z.createContext(0),aK=z.createContext(0),rV=function(e){var n=e.state,i=n.xAxisMap,r=n.yAxisMap,a=n.offset,s=e.clipPathId,o=e.children,l=e.width,u=e.height,h=cCe(a);return De.createElement(eK.Provider,{value:i},De.createElement(tK.Provider,{value:r},De.createElement(uCe.Provider,{value:a},De.createElement(nK.Provider,{value:h},De.createElement(iK.Provider,{value:s},De.createElement(rK.Provider,{value:u},De.createElement(aK.Provider,{value:l},o)))))))},fCe=function(){return z.useContext(iK)},sK=function(e){var n=z.useContext(eK);n==null&&tp();var i=n[e];return i==null&&tp(),i},oK=function(e){var n=z.useContext(tK);n==null&&tp();var i=n[e];return i==null&&tp(),i},hCe=function(){var e=z.useContext(nK);return e},lK=function(){return z.useContext(aK)},cK=function(){return z.useContext(rK)};function kg(t){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kg(t)}function dCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pCe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,fK(i.key),i)}}function mCe(t,e,n){return e&&pCe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function gCe(t,e,n){return e=q3(e),vCe(t,uK()?Reflect.construct(e,n||[],q3(t).constructor):e.apply(t,n))}function vCe(t,e){if(e&&(kg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xCe(t)}function xCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uK=function(){return!!t})()}function q3(t){return q3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},q3(t)}function yCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xO(t,e)}function xO(t,e){return xO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},xO(t,e)}function aV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function sV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aV(Object(n),!0).forEach(function(i){gI(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aV(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function gI(t,e,n){return e=fK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fK(t){var e=bCe(t,"string");return kg(e)=="symbol"?e:e+""}function bCe(t,e){if(kg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(kg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function SCe(t,e){return wCe(t)||TCe(t,e)||_Ce(t,e)||MCe()}function MCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Ce(t,e){if(t){if(typeof t=="string")return oV(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oV(t,e)}}function oV(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function TCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,r,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(i=a.call(n)).done)&&(o.push(i.value),o.length!==e);l=!0);}catch(h){u=!0,r=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}function wCe(t){if(Array.isArray(t))return t}function yO(){return yO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},yO.apply(this,arguments)}var ACe=function(e,n){var i;return De.isValidElement(e)?i=De.cloneElement(e,n):Zn(e)?i=e(n):i=De.createElement("line",yO({},n,{className:"recharts-reference-line-line"})),i},ECe=function(e,n,i,r,a,s,o,l,u){var h=a.x,p=a.y,g=a.width,x=a.height;if(i){var b=u.y,M=e.y.apply(b,{position:s});if(Su(u,"discard")&&!e.y.isInRange(M))return null;var S=[{x:h+g,y:M},{x:h,y:M}];return l==="left"?S.reverse():S}if(n){var T=u.x,A=e.x.apply(T,{position:s});if(Su(u,"discard")&&!e.x.isInRange(A))return null;var E=[{x:A,y:p+x},{x:A,y:p}];return o==="top"?E.reverse():E}if(r){var j=u.segment,R=j.map(function(C){return e.apply(C,{position:s})});return Su(u,"discard")&&M5e(R,function(C){return!e.isInRange(C)})?null:R}return null};function CCe(t){var e=t.x,n=t.y,i=t.segment,r=t.xAxisId,a=t.yAxisId,s=t.shape,o=t.className,l=t.alwaysShow,u=fCe(),h=sK(r),p=oK(a),g=hCe();if(!u||!g)return null;k0(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var x=mI({x:h.scale,y:p.scale}),b=Ma(e),M=Ma(n),S=i&&i.length===2,T=ECe(x,b,M,S,g,t.position,h.orientation,p.orientation,t);if(!T)return null;var A=SCe(T,2),E=A[0],j=E.x,R=E.y,C=A[1],D=C.x,U=C.y,I=Su(t,"hidden")?"url(#".concat(u,")"):void 0,L=sV(sV({clipPath:I},ri(t,!0)),{},{x1:j,y1:R,x2:D,y2:U});return De.createElement(Dr,{className:vi("recharts-reference-line",o)},ACe(s,L),ws.renderCallByParent(t,eCe({x1:j,y1:R,x2:D,y2:U})))}var vI=(function(t){function e(){return dCe(this,e),gCe(this,e,arguments)}return yCe(e,t),mCe(e,[{key:"render",value:function(){return De.createElement(CCe,this.props)}}])})(De.Component);gI(vI,"displayName","ReferenceLine");gI(vI,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function bO(){return bO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},bO.apply(this,arguments)}function Fg(t){"@babel/helpers - typeof";return Fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fg(t)}function lV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function cV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lV(Object(n),!0).forEach(function(i){gw(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lV(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function RCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jCe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,dK(i.key),i)}}function NCe(t,e,n){return e&&jCe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function OCe(t,e,n){return e=W3(e),DCe(t,hK()?Reflect.construct(e,n||[],W3(t).constructor):e.apply(t,n))}function DCe(t,e){if(e&&(Fg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PCe(t)}function PCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hK=function(){return!!t})()}function W3(t){return W3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},W3(t)}function ICe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SO(t,e)}function SO(t,e){return SO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},SO(t,e)}function gw(t,e,n){return e=dK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dK(t){var e=UCe(t,"string");return Fg(e)=="symbol"?e:e+""}function UCe(t,e){if(Fg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Fg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var LCe=function(e){var n=e.x,i=e.y,r=e.xAxis,a=e.yAxis,s=mI({x:r.scale,y:a.scale}),o=s.apply({x:n,y:i},{bandAware:!0});return Su(e,"discard")&&!s.isInRange(o)?null:o},vw=(function(t){function e(){return RCe(this,e),OCe(this,e,arguments)}return ICe(e,t),NCe(e,[{key:"render",value:function(){var i=this.props,r=i.x,a=i.y,s=i.r,o=i.alwaysShow,l=i.clipPathId,u=Ma(r),h=Ma(a);if(k0(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!h)return null;var p=LCe(this.props);if(!p)return null;var g=p.x,x=p.y,b=this.props,M=b.shape,S=b.className,T=Su(this.props,"hidden")?"url(#".concat(l,")"):void 0,A=cV(cV({clipPath:T},ri(this.props,!0)),{},{cx:g,cy:x});return De.createElement(Dr,{className:vi("recharts-reference-dot",S)},e.renderDot(M,A),ws.renderCallByParent(this.props,{x:g-s,y:x-s,width:2*s,height:2*s}))}}])})(De.Component);gw(vw,"displayName","ReferenceDot");gw(vw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});gw(vw,"renderDot",function(t,e){var n;return De.isValidElement(t)?n=De.cloneElement(t,e):Zn(t)?n=t(e):n=De.createElement(pI,bO({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function MO(){return MO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},MO.apply(this,arguments)}function Gg(t){"@babel/helpers - typeof";return Gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gg(t)}function uV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function fV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uV(Object(n),!0).forEach(function(i){xw(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uV(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function BCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zCe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,mK(i.key),i)}}function kCe(t,e,n){return e&&zCe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function FCe(t,e,n){return e=X3(e),GCe(t,pK()?Reflect.construct(e,n||[],X3(t).constructor):e.apply(t,n))}function GCe(t,e){if(e&&(Gg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return VCe(t)}function VCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pK=function(){return!!t})()}function X3(t){return X3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},X3(t)}function HCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_O(t,e)}function _O(t,e){return _O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},_O(t,e)}function xw(t,e,n){return e=mK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mK(t){var e=qCe(t,"string");return Gg(e)=="symbol"?e:e+""}function qCe(t,e){if(Gg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Gg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var WCe=function(e,n,i,r,a){var s=a.x1,o=a.x2,l=a.y1,u=a.y2,h=a.xAxis,p=a.yAxis;if(!h||!p)return null;var g=mI({x:h.scale,y:p.scale}),x={x:e?g.x.apply(s,{position:"start"}):g.x.rangeMin,y:i?g.y.apply(l,{position:"start"}):g.y.rangeMin},b={x:n?g.x.apply(o,{position:"end"}):g.x.rangeMax,y:r?g.y.apply(u,{position:"end"}):g.y.rangeMax};return Su(a,"discard")&&(!g.isInRange(x)||!g.isInRange(b))?null:QZ(x,b)},yw=(function(t){function e(){return BCe(this,e),FCe(this,e,arguments)}return HCe(e,t),kCe(e,[{key:"render",value:function(){var i=this.props,r=i.x1,a=i.x2,s=i.y1,o=i.y2,l=i.className,u=i.alwaysShow,h=i.clipPathId;k0(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=Ma(r),g=Ma(a),x=Ma(s),b=Ma(o),M=this.props.shape;if(!p&&!g&&!x&&!b&&!M)return null;var S=WCe(p,g,x,b,this.props);if(!S&&!M)return null;var T=Su(this.props,"hidden")?"url(#".concat(h,")"):void 0;return De.createElement(Dr,{className:vi("recharts-reference-area",l)},e.renderRect(M,fV(fV({clipPath:T},ri(this.props,!0)),S)),ws.renderCallByParent(this.props,S))}}])})(De.Component);xw(yw,"displayName","ReferenceArea");xw(yw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});xw(yw,"renderRect",function(t,e){var n;return De.isValidElement(t)?n=De.cloneElement(t,e):Zn(t)?n=t(e):n=De.createElement(dI,MO({},e,{className:"recharts-reference-area-rect"})),n});function gK(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var i=[],r=0;r<t.length;r+=e)i.push(t[r]);return i}function XCe(t,e,n){var i={width:t.width+e.width,height:t.height+e.height};return nCe(i,n)}function $Ce(t,e,n){var i=n==="width",r=t.x,a=t.y,s=t.width,o=t.height;return e===1?{start:i?r:a,end:i?r+s:a+o}:{start:i?r+s:a+o,end:i?r:a}}function $3(t,e,n,i,r){if(t*e<t*i||t*e>t*r)return!1;var a=n();return t*(e-t*a/2-i)>=0&&t*(e+t*a/2-r)<=0}function YCe(t,e){return gK(t,e+1)}function ZCe(t,e,n,i,r){for(var a=(i||[]).slice(),s=e.start,o=e.end,l=0,u=1,h=s,p=function(){var b=i==null?void 0:i[l];if(b===void 0)return{v:gK(i,u)};var M=l,S,T=function(){return S===void 0&&(S=n(b,M)),S},A=b.coordinate,E=l===0||$3(t,A,T,h,o);E||(l=0,h=s,u+=1),E&&(h=A+t*(T()/2+r),l+=u)},g;u<=a.length;)if(g=p(),g)return g.v;return[]}function ob(t){"@babel/helpers - typeof";return ob=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ob(t)}function hV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Ts(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hV(Object(n),!0).forEach(function(i){KCe(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hV(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function KCe(t,e,n){return e=QCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QCe(t){var e=JCe(t,"string");return ob(e)=="symbol"?e:e+""}function JCe(t,e){if(ob(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(ob(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eRe(t,e,n,i,r){for(var a=(i||[]).slice(),s=a.length,o=e.start,l=e.end,u=function(g){var x=a[g],b,M=function(){return b===void 0&&(b=n(x,g)),b};if(g===s-1){var S=t*(x.coordinate+t*M()/2-l);a[g]=x=Ts(Ts({},x),{},{tickCoord:S>0?x.coordinate-S*t:x.coordinate})}else a[g]=x=Ts(Ts({},x),{},{tickCoord:x.coordinate});var T=$3(t,x.tickCoord,M,o,l);T&&(l=x.tickCoord-t*(M()/2+r),a[g]=Ts(Ts({},x),{},{isShow:!0}))},h=s-1;h>=0;h--)u(h);return a}function tRe(t,e,n,i,r,a){var s=(i||[]).slice(),o=s.length,l=e.start,u=e.end;if(a){var h=i[o-1],p=n(h,o-1),g=t*(h.coordinate+t*p/2-u);s[o-1]=h=Ts(Ts({},h),{},{tickCoord:g>0?h.coordinate-g*t:h.coordinate});var x=$3(t,h.tickCoord,function(){return p},l,u);x&&(u=h.tickCoord-t*(p/2+r),s[o-1]=Ts(Ts({},h),{},{isShow:!0}))}for(var b=a?o-1:o,M=function(A){var E=s[A],j,R=function(){return j===void 0&&(j=n(E,A)),j};if(A===0){var C=t*(E.coordinate-t*R()/2-l);s[A]=E=Ts(Ts({},E),{},{tickCoord:C<0?E.coordinate-C*t:E.coordinate})}else s[A]=E=Ts(Ts({},E),{},{tickCoord:E.coordinate});var D=$3(t,E.tickCoord,R,l,u);D&&(l=E.tickCoord+t*(R()/2+r),s[A]=Ts(Ts({},E),{},{isShow:!0}))},S=0;S<b;S++)M(S);return s}function nRe(t,e,n){var i=t.tick,r=t.ticks,a=t.viewBox,s=t.minTickGap,o=t.orientation,l=t.interval,u=t.tickFormatter,h=t.unit,p=t.angle;if(!r||!r.length||!i)return[];if(kt(l)||cv.isSsr)return YCe(r,typeof l=="number"&&kt(l)?l:0);var g=[],x=o==="top"||o==="bottom"?"width":"height",b=h&&x==="width"?$y(h,{fontSize:e,letterSpacing:n}):{width:0,height:0},M=function(E,j){var R=Zn(u)?u(E.value,j):E.value;return x==="width"?XCe($y(R,{fontSize:e,letterSpacing:n}),b,p):$y(R,{fontSize:e,letterSpacing:n})[x]},S=r.length>=2?_c(r[1].coordinate-r[0].coordinate):1,T=$Ce(a,S,x);return l==="equidistantPreserveStart"?ZCe(S,T,M,r,s):(l==="preserveStart"||l==="preserveStartEnd"?g=tRe(S,T,M,r,s,l==="preserveStartEnd"):g=eRe(S,T,M,r,s),g.filter(function(A){return A.isShow}))}var iRe=["viewBox"],rRe=["viewBox"],aRe=["ticks"];function Vg(t){"@babel/helpers - typeof";return Vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vg(t)}function sg(){return sg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},sg.apply(this,arguments)}function dV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function xa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dV(Object(n),!0).forEach(function(i){xI(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dV(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function oj(t,e){if(t==null)return{};var n=sRe(t,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function sRe(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function oRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pV(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,xK(i.key),i)}}function lRe(t,e,n){return e&&pV(t.prototype,e),n&&pV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function cRe(t,e,n){return e=Y3(e),uRe(t,vK()?Reflect.construct(e,n||[],Y3(t).constructor):e.apply(t,n))}function uRe(t,e){if(e&&(Vg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fRe(t)}function fRe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vK=function(){return!!t})()}function Y3(t){return Y3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Y3(t)}function hRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TO(t,e)}function TO(t,e){return TO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},TO(t,e)}function xI(t,e,n){return e=xK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xK(t){var e=dRe(t,"string");return Vg(e)=="symbol"?e:e+""}function dRe(t,e){if(Vg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Vg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var bw=(function(t){function e(n){var i;return oRe(this,e),i=cRe(this,e,[n]),i.state={fontSize:"",letterSpacing:""},i}return hRe(e,t),lRe(e,[{key:"shouldComponentUpdate",value:function(i,r){var a=i.viewBox,s=oj(i,iRe),o=this.props,l=o.viewBox,u=oj(o,rRe);return!ug(a,l)||!ug(s,u)||!ug(r,this.state)}},{key:"componentDidMount",value:function(){var i=this.layerReference;if(i){var r=i.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];r&&this.setState({fontSize:window.getComputedStyle(r).fontSize,letterSpacing:window.getComputedStyle(r).letterSpacing})}}},{key:"getTickLineCoord",value:function(i){var r=this.props,a=r.x,s=r.y,o=r.width,l=r.height,u=r.orientation,h=r.tickSize,p=r.mirror,g=r.tickMargin,x,b,M,S,T,A,E=p?-1:1,j=i.tickSize||h,R=kt(i.tickCoord)?i.tickCoord:i.coordinate;switch(u){case"top":x=b=i.coordinate,S=s+ +!p*l,M=S-E*j,A=M-E*g,T=R;break;case"left":M=S=i.coordinate,b=a+ +!p*o,x=b-E*j,T=x-E*g,A=R;break;case"right":M=S=i.coordinate,b=a+ +p*o,x=b+E*j,T=x+E*g,A=R;break;default:x=b=i.coordinate,S=s+ +p*l,M=S+E*j,A=M+E*g,T=R;break}return{line:{x1:x,y1:M,x2:b,y2:S},tick:{x:T,y:A}}}},{key:"getTickTextAnchor",value:function(){var i=this.props,r=i.orientation,a=i.mirror,s;switch(r){case"left":s=a?"start":"end";break;case"right":s=a?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var i=this.props,r=i.orientation,a=i.mirror,s="end";switch(r){case"left":case"right":s="middle";break;case"top":s=a?"start":"end";break;default:s=a?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var i=this.props,r=i.x,a=i.y,s=i.width,o=i.height,l=i.orientation,u=i.mirror,h=i.axisLine,p=xa(xa(xa({},ri(this.props,!1)),ri(h,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var g=+(l==="top"&&!u||l==="bottom"&&u);p=xa(xa({},p),{},{x1:r,y1:a+g*o,x2:r+s,y2:a+g*o})}else{var x=+(l==="left"&&!u||l==="right"&&u);p=xa(xa({},p),{},{x1:r+x*s,y1:a,x2:r+x*s,y2:a+o})}return De.createElement("line",sg({},p,{className:vi("recharts-cartesian-axis-line",Dl(h,"className"))}))}},{key:"renderTicks",value:function(i,r,a){var s=this,o=this.props,l=o.tickLine,u=o.stroke,h=o.tick,p=o.tickFormatter,g=o.unit,x=nRe(xa(xa({},this.props),{},{ticks:i}),r,a),b=this.getTickTextAnchor(),M=this.getTickVerticalAnchor(),S=ri(this.props,!1),T=ri(h,!1),A=xa(xa({},S),{},{fill:"none"},ri(l,!1)),E=x.map(function(j,R){var C=s.getTickLineCoord(j),D=C.line,U=C.tick,I=xa(xa(xa(xa({textAnchor:b,verticalAnchor:M},S),{},{stroke:"none",fill:u},T),U),{},{index:R,payload:j,visibleTicksCount:x.length,tickFormatter:p});return De.createElement(Dr,sg({className:"recharts-cartesian-axis-tick",key:"tick-".concat(j.value,"-").concat(j.coordinate,"-").concat(j.tickCoord)},s3(s.props,j,R)),l&&De.createElement("line",sg({},A,D,{className:vi("recharts-cartesian-axis-tick-line",Dl(l,"className"))})),h&&e.renderTickItem(h,I,"".concat(Zn(p)?p(j.value,R):j.value).concat(g||"")))});return De.createElement("g",{className:"recharts-cartesian-axis-ticks"},E)}},{key:"render",value:function(){var i=this,r=this.props,a=r.axisLine,s=r.width,o=r.height,l=r.ticksGenerator,u=r.className,h=r.hide;if(h)return null;var p=this.props,g=p.ticks,x=oj(p,aRe),b=g;return Zn(l)&&(b=g&&g.length>0?l(this.props):l(x)),s<=0||o<=0||!b||!b.length?null:De.createElement(Dr,{className:vi("recharts-cartesian-axis",u),ref:function(S){i.layerReference=S}},a&&this.renderAxisLine(),this.renderTicks(b,this.state.fontSize,this.state.letterSpacing),ws.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(i,r,a){var s,o=vi(r.className,"recharts-cartesian-axis-tick-value");return De.isValidElement(i)?s=De.cloneElement(i,xa(xa({},r),{},{className:o})):Zn(i)?s=i(xa(xa({},r),{},{className:o})):s=De.createElement(v3,sg({},r,{className:"recharts-cartesian-axis-tick-value"}),a),s}}])})(z.Component);xI(bw,"displayName","CartesianAxis");xI(bw,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var pRe=["layout","type","stroke","connectNulls","isRange","ref"],mRe=["key"],yK;function Hg(t){"@babel/helpers - typeof";return Hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hg(t)}function bK(t,e){if(t==null)return{};var n=gRe(t,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function gRe(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function P0(){return P0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},P0.apply(this,arguments)}function mV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Lh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mV(Object(n),!0).forEach(function(i){vu(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mV(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function vRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gV(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,MK(i.key),i)}}function xRe(t,e,n){return e&&gV(t.prototype,e),n&&gV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function yRe(t,e,n){return e=Z3(e),bRe(t,SK()?Reflect.construct(e,n||[],Z3(t).constructor):e.apply(t,n))}function bRe(t,e){if(e&&(Hg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SRe(t)}function SRe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function SK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SK=function(){return!!t})()}function Z3(t){return Z3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Z3(t)}function MRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wO(t,e)}function wO(t,e){return wO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},wO(t,e)}function vu(t,e,n){return e=MK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MK(t){var e=_Re(t,"string");return Hg(e)=="symbol"?e:e+""}function _Re(t,e){if(Hg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Hg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var cd=(function(t){function e(){var n;vRe(this,e);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return n=yRe(this,e,[].concat(r)),vu(n,"state",{isAnimationFinished:!0}),vu(n,"id",zb("recharts-area-")),vu(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Zn(s)&&s()}),vu(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Zn(s)&&s()}),n}return MRe(e,t),xRe(e,[{key:"renderDots",value:function(i,r,a){var s=this.props.isAnimationActive,o=this.state.isAnimationFinished;if(s&&!o)return null;var l=this.props,u=l.dot,h=l.points,p=l.dataKey,g=ri(this.props,!1),x=ri(u,!0),b=h.map(function(S,T){var A=Lh(Lh(Lh({key:"dot-".concat(T),r:3},g),x),{},{index:T,cx:S.x,cy:S.y,dataKey:p,value:S.value,payload:S.payload,points:h});return e.renderDotItem(u,A)}),M={clipPath:i?"url(#clipPath-".concat(r?"":"dots-").concat(a,")"):null};return De.createElement(Dr,P0({className:"recharts-area-dots"},M),b)}},{key:"renderHorizontalRect",value:function(i){var r=this.props,a=r.baseLine,s=r.points,o=r.strokeWidth,l=s[0].x,u=s[s.length-1].x,h=i*Math.abs(l-u),p=Vh(s.map(function(g){return g.y||0}));return kt(a)&&typeof a=="number"?p=Math.max(a,p):a&&Array.isArray(a)&&a.length&&(p=Math.max(Vh(a.map(function(g){return g.y||0})),p)),kt(p)?De.createElement("rect",{x:l<u?l:l-h,y:0,width:h,height:Math.floor(p+(o?parseInt("".concat(o),10):1))}):null}},{key:"renderVerticalRect",value:function(i){var r=this.props,a=r.baseLine,s=r.points,o=r.strokeWidth,l=s[0].y,u=s[s.length-1].y,h=i*Math.abs(l-u),p=Vh(s.map(function(g){return g.x||0}));return kt(a)&&typeof a=="number"?p=Math.max(a,p):a&&Array.isArray(a)&&a.length&&(p=Math.max(Vh(a.map(function(g){return g.x||0})),p)),kt(p)?De.createElement("rect",{x:0,y:l<u?l:l-h,width:p+(o?parseInt("".concat(o),10):1),height:Math.floor(h)}):null}},{key:"renderClipRect",value:function(i){var r=this.props.layout;return r==="vertical"?this.renderVerticalRect(i):this.renderHorizontalRect(i)}},{key:"renderAreaStatically",value:function(i,r,a,s){var o=this.props,l=o.layout,u=o.type,h=o.stroke,p=o.connectNulls,g=o.isRange;o.ref;var x=bK(o,pRe);return De.createElement(Dr,{clipPath:a?"url(#clipPath-".concat(s,")"):null},De.createElement(Ky,P0({},ri(x,!0),{points:i,connectNulls:p,type:u,baseLine:r,layout:l,stroke:"none",className:"recharts-area-area"})),h!=="none"&&De.createElement(Ky,P0({},ri(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:p,fill:"none",points:i})),h!=="none"&&g&&De.createElement(Ky,P0({},ri(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:p,fill:"none",points:r})))}},{key:"renderAreaWithAnimation",value:function(i,r){var a=this,s=this.props,o=s.points,l=s.baseLine,u=s.isAnimationActive,h=s.animationBegin,p=s.animationDuration,g=s.animationEasing,x=s.animationId,b=this.state,M=b.prevPoints,S=b.prevBaseLine;return De.createElement(If,{begin:h,duration:p,isActive:u,easing:g,from:{t:0},to:{t:1},key:"area-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(T){var A=T.t;if(M){var E=M.length/o.length,j=o.map(function(U,I){var L=Math.floor(I*E);if(M[L]){var F=M[L],G=Rl(F.x,U.x),H=Rl(F.y,U.y);return Lh(Lh({},U),{},{x:G(A),y:H(A)})}return U}),R;if(kt(l)&&typeof l=="number"){var C=Rl(S,l);R=C(A)}else if(si(l)||ov(l)){var D=Rl(S,0);R=D(A)}else R=l.map(function(U,I){var L=Math.floor(I*E);if(S[L]){var F=S[L],G=Rl(F.x,U.x),H=Rl(F.y,U.y);return Lh(Lh({},U),{},{x:G(A),y:H(A)})}return U});return a.renderAreaStatically(j,R,i,r)}return De.createElement(Dr,null,De.createElement("defs",null,De.createElement("clipPath",{id:"animationClipPath-".concat(r)},a.renderClipRect(A))),De.createElement(Dr,{clipPath:"url(#animationClipPath-".concat(r,")")},a.renderAreaStatically(o,l,i,r)))})}},{key:"renderArea",value:function(i,r){var a=this.props,s=a.points,o=a.baseLine,l=a.isAnimationActive,u=this.state,h=u.prevPoints,p=u.prevBaseLine,g=u.totalLength;return l&&s&&s.length&&(!h&&g>0||!k1(h,s)||!k1(p,o))?this.renderAreaWithAnimation(i,r):this.renderAreaStatically(s,o,i,r)}},{key:"render",value:function(){var i,r=this.props,a=r.hide,s=r.dot,o=r.points,l=r.className,u=r.top,h=r.left,p=r.xAxis,g=r.yAxis,x=r.width,b=r.height,M=r.isAnimationActive,S=r.id;if(a||!o||!o.length)return null;var T=this.state.isAnimationFinished,A=o.length===1,E=vi("recharts-area",l),j=p&&p.allowDataOverflow,R=g&&g.allowDataOverflow,C=j||R,D=si(S)?this.id:S,U=(i=ri(s,!1))!==null&&i!==void 0?i:{r:3,strokeWidth:2},I=U.r,L=I===void 0?3:I,F=U.strokeWidth,G=F===void 0?2:F,H=rye(s)?s:{},W=H.clipDot,Y=W===void 0?!0:W,k=L*2+G;return De.createElement(Dr,{className:E},j||R?De.createElement("defs",null,De.createElement("clipPath",{id:"clipPath-".concat(D)},De.createElement("rect",{x:j?h:h-x/2,y:R?u:u-b/2,width:j?x:x*2,height:R?b:b*2})),!Y&&De.createElement("clipPath",{id:"clipPath-dots-".concat(D)},De.createElement("rect",{x:h-k/2,y:u-k/2,width:x+k,height:b+k}))):null,A?null:this.renderArea(C,D),(s||A)&&this.renderDots(C,Y,D),(!M||T)&&Wh.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(i,r){return i.animationId!==r.prevAnimationId?{prevAnimationId:i.animationId,curPoints:i.points,curBaseLine:i.baseLine,prevPoints:r.curPoints,prevBaseLine:r.curBaseLine}:i.points!==r.curPoints||i.baseLine!==r.curBaseLine?{curPoints:i.points,curBaseLine:i.baseLine}:null}}])})(z.PureComponent);yK=cd;vu(cd,"displayName","Area");vu(cd,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!cv.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});vu(cd,"getBaseValue",function(t,e,n,i){var r=t.layout,a=t.baseValue,s=e.props.baseValue,o=s??a;if(kt(o)&&typeof o=="number")return o;var l=r==="horizontal"?i:n,u=l.scale.domain();if(l.type==="number"){var h=Math.max(u[0],u[1]),p=Math.min(u[0],u[1]);return o==="dataMin"?p:o==="dataMax"||h<0?h:Math.max(Math.min(u[0],u[1]),0)}return o==="dataMin"?u[0]:o==="dataMax"?u[1]:u[0]});vu(cd,"getComposedData",function(t){var e=t.props,n=t.item,i=t.xAxis,r=t.yAxis,a=t.xAxisTicks,s=t.yAxisTicks,o=t.bandSize,l=t.dataKey,u=t.stackedData,h=t.dataStartIndex,p=t.displayedData,g=t.offset,x=e.layout,b=u&&u.length,M=yK.getBaseValue(e,n,i,r),S=x==="horizontal",T=!1,A=p.map(function(j,R){var C;b?C=u[h+R]:(C=el(j,l),Array.isArray(C)?T=!0:C=[M,C]);var D=C[1]==null||b&&el(j,l)==null;return S?{x:D9({axis:i,ticks:a,bandSize:o,entry:j,index:R}),y:D?null:r.scale(C[1]),value:C,payload:j}:{x:D?null:i.scale(C[1]),y:D9({axis:r,ticks:s,bandSize:o,entry:j,index:R}),value:C,payload:j}}),E;return b||T?E=A.map(function(j){var R=Array.isArray(j.value)?j.value[0]:null;return S?{x:j.x,y:R!=null&&j.y!=null?r.scale(R):null}:{x:R!=null?i.scale(R):null,y:j.y}}):E=S?r.scale(M):i.scale(M),Lh({points:A,baseLine:E,layout:x,isRange:T},g)});vu(cd,"renderDotItem",function(t,e){var n;if(De.isValidElement(t))n=De.cloneElement(t,e);else if(Zn(t))n=t(e);else{var i=vi("recharts-area-dot",typeof t!="boolean"?t.className:""),r=e.key,a=bK(e,mRe);n=De.createElement(pI,P0({},a,{key:r,className:i}))}return n});function qg(t){"@babel/helpers - typeof";return qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qg(t)}function TRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wRe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,wK(i.key),i)}}function ARe(t,e,n){return e&&wRe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ERe(t,e,n){return e=K3(e),CRe(t,_K()?Reflect.construct(e,n||[],K3(t).constructor):e.apply(t,n))}function CRe(t,e){if(e&&(qg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RRe(t)}function RRe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _K(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_K=function(){return!!t})()}function K3(t){return K3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},K3(t)}function jRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AO(t,e)}function AO(t,e){return AO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},AO(t,e)}function TK(t,e,n){return e=wK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wK(t){var e=NRe(t,"string");return qg(e)=="symbol"?e:e+""}function NRe(t,e){if(qg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(qg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function EO(){return EO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},EO.apply(this,arguments)}function ORe(t){var e=t.xAxisId,n=lK(),i=cK(),r=sK(e);return r==null?null:z.createElement(bw,EO({},r,{className:vi("recharts-".concat(r.axisType," ").concat(r.axisType),r.className),viewBox:{x:0,y:0,width:n,height:i},ticksGenerator:function(s){return D0(s,!0)}}))}var yI=(function(t){function e(){return TRe(this,e),ERe(this,e,arguments)}return jRe(e,t),ARe(e,[{key:"render",value:function(){return z.createElement(ORe,this.props)}}])})(z.Component);TK(yI,"displayName","XAxis");TK(yI,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Wg(t){"@babel/helpers - typeof";return Wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wg(t)}function DRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PRe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,CK(i.key),i)}}function IRe(t,e,n){return e&&PRe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function URe(t,e,n){return e=Q3(e),LRe(t,AK()?Reflect.construct(e,n||[],Q3(t).constructor):e.apply(t,n))}function LRe(t,e){if(e&&(Wg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BRe(t)}function BRe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AK=function(){return!!t})()}function Q3(t){return Q3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Q3(t)}function zRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CO(t,e)}function CO(t,e){return CO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},CO(t,e)}function EK(t,e,n){return e=CK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CK(t){var e=kRe(t,"string");return Wg(e)=="symbol"?e:e+""}function kRe(t,e){if(Wg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Wg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function RO(){return RO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},RO.apply(this,arguments)}var FRe=function(e){var n=e.yAxisId,i=lK(),r=cK(),a=oK(n);return a==null?null:z.createElement(bw,RO({},a,{className:vi("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:i,height:r},ticksGenerator:function(o){return D0(o,!0)}}))},bI=(function(t){function e(){return DRe(this,e),URe(this,e,arguments)}return zRe(e,t),IRe(e,[{key:"render",value:function(){return z.createElement(FRe,this.props)}}])})(z.Component);EK(bI,"displayName","YAxis");EK(bI,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function vV(t){return qRe(t)||HRe(t)||VRe(t)||GRe()}function GRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VRe(t,e){if(t){if(typeof t=="string")return jO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jO(t,e)}}function HRe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function qRe(t){if(Array.isArray(t))return jO(t)}function jO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var NO=function(e,n,i,r,a){var s=wc(e,vI),o=wc(e,vw),l=[].concat(vV(s),vV(o)),u=wc(e,yw),h="".concat(r,"Id"),p=r[0],g=n;if(l.length&&(g=l.reduce(function(M,S){if(S.props[h]===i&&Su(S.props,"extendDomain")&&kt(S.props[p])){var T=S.props[p];return[Math.min(M[0],T),Math.max(M[1],T)]}return M},g)),u.length){var x="".concat(p,"1"),b="".concat(p,"2");g=u.reduce(function(M,S){if(S.props[h]===i&&Su(S.props,"extendDomain")&&kt(S.props[x])&&kt(S.props[b])){var T=S.props[x],A=S.props[b];return[Math.min(M[0],T,A),Math.max(M[1],T,A)]}return M},g)}return a&&a.length&&(g=a.reduce(function(M,S){return kt(S)?[Math.min(M[0],S),Math.max(M[1],S)]:M},g)),g},lj={exports:{}},xV;function WRe(){return xV||(xV=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function r(l,u,h){this.fn=l,this.context=u,this.once=h||!1}function a(l,u,h,p,g){if(typeof h!="function")throw new TypeError("The listener must be a function");var x=new r(h,p||l,g),b=n?n+u:u;return l._events[b]?l._events[b].fn?l._events[b]=[l._events[b],x]:l._events[b].push(x):(l._events[b]=x,l._eventsCount++),l}function s(l,u){--l._eventsCount===0?l._events=new i:delete l._events[u]}function o(){this._events=new i,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],h,p;if(this._eventsCount===0)return u;for(p in h=this._events)e.call(h,p)&&u.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},o.prototype.listeners=function(u){var h=n?n+u:u,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,x=p.length,b=new Array(x);g<x;g++)b[g]=p[g].fn;return b},o.prototype.listenerCount=function(u){var h=n?n+u:u,p=this._events[h];return p?p.fn?1:p.length:0},o.prototype.emit=function(u,h,p,g,x,b){var M=n?n+u:u;if(!this._events[M])return!1;var S=this._events[M],T=arguments.length,A,E;if(S.fn){switch(S.once&&this.removeListener(u,S.fn,void 0,!0),T){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,h),!0;case 3:return S.fn.call(S.context,h,p),!0;case 4:return S.fn.call(S.context,h,p,g),!0;case 5:return S.fn.call(S.context,h,p,g,x),!0;case 6:return S.fn.call(S.context,h,p,g,x,b),!0}for(E=1,A=new Array(T-1);E<T;E++)A[E-1]=arguments[E];S.fn.apply(S.context,A)}else{var j=S.length,R;for(E=0;E<j;E++)switch(S[E].once&&this.removeListener(u,S[E].fn,void 0,!0),T){case 1:S[E].fn.call(S[E].context);break;case 2:S[E].fn.call(S[E].context,h);break;case 3:S[E].fn.call(S[E].context,h,p);break;case 4:S[E].fn.call(S[E].context,h,p,g);break;default:if(!A)for(R=1,A=new Array(T-1);R<T;R++)A[R-1]=arguments[R];S[E].fn.apply(S[E].context,A)}}return!0},o.prototype.on=function(u,h,p){return a(this,u,h,p,!1)},o.prototype.once=function(u,h,p){return a(this,u,h,p,!0)},o.prototype.removeListener=function(u,h,p,g){var x=n?n+u:u;if(!this._events[x])return this;if(!h)return s(this,x),this;var b=this._events[x];if(b.fn)b.fn===h&&(!g||b.once)&&(!p||b.context===p)&&s(this,x);else{for(var M=0,S=[],T=b.length;M<T;M++)(b[M].fn!==h||g&&!b[M].once||p&&b[M].context!==p)&&S.push(b[M]);S.length?this._events[x]=S.length===1?S[0]:S:s(this,x)}return this},o.prototype.removeAllListeners=function(u){var h;return u?(h=n?n+u:u,this._events[h]&&s(this,h)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(lj)),lj.exports}var XRe=WRe();const $Re=ki(XRe);var cj=new $Re,uj="recharts.syncMouseEvents";function lb(t){"@babel/helpers - typeof";return lb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lb(t)}function YRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZRe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,RK(i.key),i)}}function KRe(t,e,n){return e&&ZRe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function fj(t,e,n){return e=RK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RK(t){var e=QRe(t,"string");return lb(e)=="symbol"?e:e+""}function QRe(t,e){if(lb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(lb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var JRe=(function(){function t(){YRe(this,t),fj(this,"activeIndex",0),fj(this,"coordinateList",[]),fj(this,"layout","horizontal")}return KRe(t,[{key:"setDetails",value:function(n){var i,r=n.coordinateList,a=r===void 0?null:r,s=n.container,o=s===void 0?null:s,l=n.layout,u=l===void 0?null:l,h=n.offset,p=h===void 0?null:h,g=n.mouseHandlerCallback,x=g===void 0?null:g;this.coordinateList=(i=a??this.coordinateList)!==null&&i!==void 0?i:[],this.container=o??this.container,this.layout=u??this.layout,this.offset=p??this.offset,this.mouseHandlerCallback=x??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,i;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var r=this.container.getBoundingClientRect(),a=r.x,s=r.y,o=r.height,l=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,h=((i=window)===null||i===void 0?void 0:i.scrollY)||0,p=a+l+u,g=s+this.offset.top+o/2+h;this.mouseHandlerCallback({pageX:p,pageY:g})}}}])})();function e4e(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var i=t==null?void 0:t[0],r=t==null?void 0:t[1];if(i&&r&&kt(i)&&kt(r))return!0}return!1}function t4e(t,e,n,i){var r=i/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-r:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-r,width:t==="horizontal"?i:n.width-1,height:t==="horizontal"?n.height-1:i}}function jK(t){var e=t.cx,n=t.cy,i=t.radius,r=t.startAngle,a=t.endAngle,s=as(e,n,i,r),o=as(e,n,i,a);return{points:[s,o],cx:e,cy:n,radius:i,startAngle:r,endAngle:a}}function n4e(t,e,n){var i,r,a,s;if(t==="horizontal")i=e.x,a=i,r=n.top,s=n.top+n.height;else if(t==="vertical")r=e.y,s=r,i=n.left,a=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var o=e.cx,l=e.cy,u=e.innerRadius,h=e.outerRadius,p=e.angle,g=as(o,l,u,p),x=as(o,l,h,p);i=g.x,r=g.y,a=x.x,s=x.y}else return jK(e);return[{x:i,y:r},{x:a,y:s}]}function cb(t){"@babel/helpers - typeof";return cb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cb(t)}function yV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function UM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yV(Object(n),!0).forEach(function(i){i4e(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yV(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function i4e(t,e,n){return e=r4e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r4e(t){var e=a4e(t,"string");return cb(e)=="symbol"?e:e+""}function a4e(t,e){if(cb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(cb(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function s4e(t){var e,n,i=t.element,r=t.tooltipEventType,a=t.isActive,s=t.activeCoordinate,o=t.activePayload,l=t.offset,u=t.activeTooltipIndex,h=t.tooltipAxisBandSize,p=t.layout,g=t.chartName,x=(e=i.props.cursor)!==null&&e!==void 0?e:(n=i.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!i||!x||!a||!s||g!=="ScatterChart"&&r!=="axis")return null;var b,M=Ky;if(g==="ScatterChart")b=s,M=MEe;else if(g==="BarChart")b=t4e(p,s,l,h),M=dI;else if(p==="radial"){var S=jK(s),T=S.cx,A=S.cy,E=S.radius,j=S.startAngle,R=S.endAngle;b={cx:T,cy:A,startAngle:j,endAngle:R,innerRadius:E,outerRadius:E},M=UZ}else b={points:n4e(p,s,l)},M=Ky;var C=UM(UM(UM(UM({stroke:"#ccc",pointerEvents:"none"},l),b),ri(x,!1)),{},{payload:o,payloadIndex:u,className:vi("recharts-tooltip-cursor",x.className)});return z.isValidElement(x)?z.cloneElement(x,C):z.createElement(M,C)}var o4e=["item"],l4e=["children","className","width","height","style","compact","title","desc"];function Xg(t){"@babel/helpers - typeof";return Xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xg(t)}function og(){return og=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},og.apply(this,arguments)}function bV(t,e){return f4e(t)||u4e(t,e)||OK(t,e)||c4e()}function c4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u4e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,r,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(i=a.call(n)).done)&&(o.push(i.value),o.length!==e);l=!0);}catch(h){u=!0,r=h}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw r}}return o}}function f4e(t){if(Array.isArray(t))return t}function SV(t,e){if(t==null)return{};var n=h4e(t,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function h4e(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function d4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p4e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,DK(i.key),i)}}function m4e(t,e,n){return e&&p4e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function g4e(t,e,n){return e=J3(e),v4e(t,NK()?Reflect.construct(e,n||[],J3(t).constructor):e.apply(t,n))}function v4e(t,e){if(e&&(Xg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x4e(t)}function x4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NK=function(){return!!t})()}function J3(t){return J3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},J3(t)}function y4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OO(t,e)}function OO(t,e){return OO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},OO(t,e)}function $g(t){return M4e(t)||S4e(t)||OK(t)||b4e()}function b4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OK(t,e){if(t){if(typeof t=="string")return DO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DO(t,e)}}function S4e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function M4e(t){if(Array.isArray(t))return DO(t)}function DO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function MV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function mt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MV(Object(n),!0).forEach(function(i){bn(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MV(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function bn(t,e,n){return e=DK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DK(t){var e=_4e(t,"string");return Xg(e)=="symbol"?e:e+""}function _4e(t,e){if(Xg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(Xg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var T4e={xAxis:["bottom","top"],yAxis:["left","right"]},w4e={width:"100%",height:"100%"},PK={x:0,y:0};function LM(t){return t}var A4e=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},E4e=function(e,n,i,r){var a=n.find(function(h){return h&&h.index===i});if(a){if(e==="horizontal")return{x:a.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,o=r.radius;return mt(mt(mt({},r),as(r.cx,r.cy,o,s)),{},{angle:s,radius:o})}var l=a.coordinate,u=r.angle;return mt(mt(mt({},r),as(r.cx,r.cy,l,u)),{},{angle:u,radius:l})}return PK},Sw=function(e,n){var i=n.graphicalItems,r=n.dataStartIndex,a=n.dataEndIndex,s=(i??[]).reduce(function(o,l){var u=l.props.data;return u&&u.length?[].concat($g(o),$g(u)):o},[]);return s.length>0?s:e&&e.length&&kt(r)&&kt(a)?e.slice(r,a+1):[]};function IK(t){return t==="number"?[0,"auto"]:void 0}var PO=function(e,n,i,r){var a=e.graphicalItems,s=e.tooltipAxis,o=Sw(n,e);return i<0||!a||!a.length||i>=o.length?null:a.reduce(function(l,u){var h,p=(h=u.props.data)!==null&&h!==void 0?h:n;p&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=i&&(p=p.slice(e.dataStartIndex,e.dataEndIndex+1));var g;if(s.dataKey&&!s.allowDuplicatedCategory){var x=p===void 0?o:p;g=r3(x,s.dataKey,r)}else g=p&&p[i]||o[i];return g?[].concat($g(l),[DZ(u,g)]):l},[])},_V=function(e,n,i,r){var a=r||{x:e.chartX,y:e.chartY},s=A4e(a,i),o=e.orderedTooltipTicks,l=e.tooltipAxis,u=e.tooltipTicks,h=rTe(s,o,u,l);if(h>=0&&u){var p=u[h]&&u[h].value,g=PO(e,n,h,p),x=E4e(i,o,h,a);return{activeTooltipIndex:h,activeLabel:p,activePayload:g,activeCoordinate:x}}return null},C4e=function(e,n){var i=n.axes,r=n.graphicalItems,a=n.axisType,s=n.axisIdKey,o=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,h=e.layout,p=e.children,g=e.stackOffset,x=NZ(h,a);return i.reduce(function(b,M){var S,T=M.type.defaultProps!==void 0?mt(mt({},M.type.defaultProps),M.props):M.props,A=T.type,E=T.dataKey,j=T.allowDataOverflow,R=T.allowDuplicatedCategory,C=T.scale,D=T.ticks,U=T.includeHidden,I=T[s];if(b[I])return b;var L=Sw(e.data,{graphicalItems:r.filter(function(K){var ie,ue=s in K.props?K.props[s]:(ie=K.type.defaultProps)===null||ie===void 0?void 0:ie[s];return ue===I}),dataStartIndex:l,dataEndIndex:u}),F=L.length,G,H,W;e4e(T.domain,j,A)&&(G=JN(T.domain,null,j),x&&(A==="number"||C!=="auto")&&(W=Zy(L,E,"category")));var Y=IK(A);if(!G||G.length===0){var k,$=(k=T.domain)!==null&&k!==void 0?k:Y;if(E){if(G=Zy(L,E,A),A==="category"&&x){var ee=$xe(G);R&&ee?(H=G,G=k3(0,F)):R||(G=L9($,G,M).reduce(function(K,ie){return K.indexOf(ie)>=0?K:[].concat($g(K),[ie])},[]))}else if(A==="category")R?G=G.filter(function(K){return K!==""&&!si(K)}):G=L9($,G,M).reduce(function(K,ie){return K.indexOf(ie)>=0||ie===""||si(ie)?K:[].concat($g(K),[ie])},[]);else if(A==="number"){var te=cTe(L,r.filter(function(K){var ie,ue,me=s in K.props?K.props[s]:(ie=K.type.defaultProps)===null||ie===void 0?void 0:ie[s],fe="hide"in K.props?K.props.hide:(ue=K.type.defaultProps)===null||ue===void 0?void 0:ue.hide;return me===I&&(U||!fe)}),E,a,h);te&&(G=te)}x&&(A==="number"||C!=="auto")&&(W=Zy(L,E,"category"))}else x?G=k3(0,F):o&&o[I]&&o[I].hasStack&&A==="number"?G=g==="expand"?[0,1]:OZ(o[I].stackGroups,l,u):G=jZ(L,r.filter(function(K){var ie=s in K.props?K.props[s]:K.type.defaultProps[s],ue="hide"in K.props?K.props.hide:K.type.defaultProps.hide;return ie===I&&(U||!ue)}),A,h,!0);if(A==="number")G=NO(p,G,I,a,D),$&&(G=JN($,G,j));else if(A==="category"&&$){var ae=$,q=G.every(function(K){return ae.indexOf(K)>=0});q&&(G=ae)}}return mt(mt({},b),{},bn({},I,mt(mt({},T),{},{axisType:a,domain:G,categoricalDomain:W,duplicateDomain:H,originalDomain:(S=T.domain)!==null&&S!==void 0?S:Y,isCategorical:x,layout:h})))},{})},R4e=function(e,n){var i=n.graphicalItems,r=n.Axis,a=n.axisType,s=n.axisIdKey,o=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,h=e.layout,p=e.children,g=Sw(e.data,{graphicalItems:i,dataStartIndex:l,dataEndIndex:u}),x=g.length,b=NZ(h,a),M=-1;return i.reduce(function(S,T){var A=T.type.defaultProps!==void 0?mt(mt({},T.type.defaultProps),T.props):T.props,E=A[s],j=IK("number");if(!S[E]){M++;var R;return b?R=k3(0,x):o&&o[E]&&o[E].hasStack?(R=OZ(o[E].stackGroups,l,u),R=NO(p,R,E,a)):(R=JN(j,jZ(g,i.filter(function(C){var D,U,I=s in C.props?C.props[s]:(D=C.type.defaultProps)===null||D===void 0?void 0:D[s],L="hide"in C.props?C.props.hide:(U=C.type.defaultProps)===null||U===void 0?void 0:U.hide;return I===E&&!L}),"number",h),r.defaultProps.allowDataOverflow),R=NO(p,R,E,a)),mt(mt({},S),{},bn({},E,mt(mt({axisType:a},r.defaultProps),{},{hide:!0,orientation:Dl(T4e,"".concat(a,".").concat(M%2),null),domain:R,originalDomain:j,isCategorical:b,layout:h})))}return S},{})},j4e=function(e,n){var i=n.axisType,r=i===void 0?"xAxis":i,a=n.AxisComp,s=n.graphicalItems,o=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,h=e.children,p="".concat(r,"Id"),g=wc(h,a),x={};return g&&g.length?x=C4e(e,{axes:g,graphicalItems:s,axisType:r,axisIdKey:p,stackGroups:o,dataStartIndex:l,dataEndIndex:u}):s&&s.length&&(x=R4e(e,{Axis:a,graphicalItems:s,axisType:r,axisIdKey:p,stackGroups:o,dataStartIndex:l,dataEndIndex:u})),x},N4e=function(e){var n=$m(e),i=D0(n,!1,!0);return{tooltipTicks:i,orderedTooltipTicks:kP(i,function(r){return r.coordinate}),tooltipAxis:n,tooltipAxisBandSize:N3(n,i)}},TV=function(e){var n=e.children,i=e.defaultShowTooltip,r=Go(n,Bg),a=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),r&&r.props&&(r.props.startIndex>=0&&(a=r.props.startIndex),r.props.endIndex>=0&&(s=r.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!i}},O4e=function(e){return!e||!e.length?!1:e.some(function(n){var i=Rf(n&&n.type);return i&&i.indexOf("Bar")>=0})},wV=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},D4e=function(e,n){var i=e.props,r=e.graphicalItems,a=e.xAxisMap,s=a===void 0?{}:a,o=e.yAxisMap,l=o===void 0?{}:o,u=i.width,h=i.height,p=i.children,g=i.margin||{},x=Go(p,Bg),b=Go(p,fg),M=Object.keys(l).reduce(function(R,C){var D=l[C],U=D.orientation;return!D.mirror&&!D.hide?mt(mt({},R),{},bn({},U,R[U]+D.width)):R},{left:g.left||0,right:g.right||0}),S=Object.keys(s).reduce(function(R,C){var D=s[C],U=D.orientation;return!D.mirror&&!D.hide?mt(mt({},R),{},bn({},U,Dl(R,"".concat(U))+D.height)):R},{top:g.top||0,bottom:g.bottom||0}),T=mt(mt({},S),M),A=T.bottom;x&&(T.bottom+=x.props.height||Bg.defaultProps.height),b&&n&&(T=oTe(T,r,i,n));var E=u-T.left-T.right,j=h-T.top-T.bottom;return mt(mt({brushBottom:A},T),{},{width:Math.max(E,0),height:Math.max(j,0)})},P4e=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},I4e=function(e){var n=e.chartName,i=e.GraphicalChild,r=e.defaultTooltipEventType,a=r===void 0?"axis":r,s=e.validateTooltipEventTypes,o=s===void 0?["axis"]:s,l=e.axisComponents,u=e.legendContent,h=e.formatAxisMap,p=e.defaultProps,g=function(T,A){var E=A.graphicalItems,j=A.stackGroups,R=A.offset,C=A.updateId,D=A.dataStartIndex,U=A.dataEndIndex,I=T.barSize,L=T.layout,F=T.barGap,G=T.barCategoryGap,H=T.maxBarSize,W=wV(L),Y=W.numericAxisName,k=W.cateAxisName,$=O4e(E),ee=[];return E.forEach(function(te,ae){var q=Sw(T.data,{graphicalItems:[te],dataStartIndex:D,dataEndIndex:U}),K=te.type.defaultProps!==void 0?mt(mt({},te.type.defaultProps),te.props):te.props,ie=K.dataKey,ue=K.maxBarSize,me=K["".concat(Y,"Id")],fe=K["".concat(k,"Id")],de={},_e=l.reduce(function(Ae,at){var ne=A["".concat(at.axisType,"Map")],Z=K["".concat(at.axisType,"Id")];ne&&ne[Z]||at.axisType==="zAxis"||tp();var xe=ne[Z];return mt(mt({},Ae),{},bn(bn({},at.axisType,xe),"".concat(at.axisType,"Ticks"),D0(xe)))},de),Te=_e[k],Ie=_e["".concat(k,"Ticks")],Re=j&&j[me]&&j[me].hasStack&&STe(te,j[me].stackGroups),ye=Rf(te.type).indexOf("Bar")>=0,ct=N3(Te,Ie),Ce=[],re=$&&aTe({barSize:I,stackGroups:j,totalSize:P4e(_e,k)});if(ye){var Le,He,Ue=si(ue)?H:ue,Ge=(Le=(He=N3(Te,Ie,!0))!==null&&He!==void 0?He:Ue)!==null&&Le!==void 0?Le:0;Ce=sTe({barGap:F,barCategoryGap:G,bandSize:Ge!==ct?Ge:ct,sizeList:re[fe],maxBarSize:Ue}),Ge!==ct&&(Ce=Ce.map(function(Ae){return mt(mt({},Ae),{},{position:mt(mt({},Ae.position),{},{offset:Ae.position.offset-Ge/2})})}))}var nt=te&&te.type&&te.type.getComposedData;nt&&ee.push({props:mt(mt({},nt(mt(mt({},_e),{},{displayedData:q,props:T,dataKey:ie,item:te,bandSize:ct,barPosition:Ce,offset:R,stackedData:Re,layout:L,dataStartIndex:D,dataEndIndex:U}))),{},bn(bn(bn({key:te.key||"item-".concat(ae)},Y,_e[Y]),k,_e[k]),"animationId",C)),childIndex:oye(te,T.children),item:te})}),ee},x=function(T,A){var E=T.props,j=T.dataStartIndex,R=T.dataEndIndex,C=T.updateId;if(!Kz({props:E}))return null;var D=E.children,U=E.layout,I=E.stackOffset,L=E.data,F=E.reverseStackOrder,G=wV(U),H=G.numericAxisName,W=G.cateAxisName,Y=wc(D,i),k=xTe(L,Y,"".concat(H,"Id"),"".concat(W,"Id"),I,F),$=l.reduce(function(K,ie){var ue="".concat(ie.axisType,"Map");return mt(mt({},K),{},bn({},ue,j4e(E,mt(mt({},ie),{},{graphicalItems:Y,stackGroups:ie.axisType===H&&k,dataStartIndex:j,dataEndIndex:R}))))},{}),ee=D4e(mt(mt({},$),{},{props:E,graphicalItems:Y}),A==null?void 0:A.legendBBox);Object.keys($).forEach(function(K){$[K]=h(E,$[K],ee,K.replace("Map",""),n)});var te=$["".concat(W,"Map")],ae=N4e(te),q=g(E,mt(mt({},$),{},{dataStartIndex:j,dataEndIndex:R,updateId:C,graphicalItems:Y,stackGroups:k,offset:ee}));return mt(mt({formattedGraphicalItems:q,graphicalItems:Y,offset:ee,stackGroups:k},ae),$)},b=(function(S){function T(A){var E,j,R;return d4e(this,T),R=g4e(this,T,[A]),bn(R,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),bn(R,"accessibilityManager",new JRe),bn(R,"handleLegendBBoxUpdate",function(C){if(C){var D=R.state,U=D.dataStartIndex,I=D.dataEndIndex,L=D.updateId;R.setState(mt({legendBBox:C},x({props:R.props,dataStartIndex:U,dataEndIndex:I,updateId:L},mt(mt({},R.state),{},{legendBBox:C}))))}}),bn(R,"handleReceiveSyncEvent",function(C,D,U){if(R.props.syncId===C){if(U===R.eventEmitterSymbol&&typeof R.props.syncMethod!="function")return;R.applySyncEvent(D)}}),bn(R,"handleBrushChange",function(C){var D=C.startIndex,U=C.endIndex;if(D!==R.state.dataStartIndex||U!==R.state.dataEndIndex){var I=R.state.updateId;R.setState(function(){return mt({dataStartIndex:D,dataEndIndex:U},x({props:R.props,dataStartIndex:D,dataEndIndex:U,updateId:I},R.state))}),R.triggerSyncEvent({dataStartIndex:D,dataEndIndex:U})}}),bn(R,"handleMouseEnter",function(C){var D=R.getMouseInfo(C);if(D){var U=mt(mt({},D),{},{isTooltipActive:!0});R.setState(U),R.triggerSyncEvent(U);var I=R.props.onMouseEnter;Zn(I)&&I(U,C)}}),bn(R,"triggeredAfterMouseMove",function(C){var D=R.getMouseInfo(C),U=D?mt(mt({},D),{},{isTooltipActive:!0}):{isTooltipActive:!1};R.setState(U),R.triggerSyncEvent(U);var I=R.props.onMouseMove;Zn(I)&&I(U,C)}),bn(R,"handleItemMouseEnter",function(C){R.setState(function(){return{isTooltipActive:!0,activeItem:C,activePayload:C.tooltipPayload,activeCoordinate:C.tooltipPosition||{x:C.cx,y:C.cy}}})}),bn(R,"handleItemMouseLeave",function(){R.setState(function(){return{isTooltipActive:!1}})}),bn(R,"handleMouseMove",function(C){C.persist(),R.throttleTriggeredAfterMouseMove(C)}),bn(R,"handleMouseLeave",function(C){R.throttleTriggeredAfterMouseMove.cancel();var D={isTooltipActive:!1};R.setState(D),R.triggerSyncEvent(D);var U=R.props.onMouseLeave;Zn(U)&&U(D,C)}),bn(R,"handleOuterEvent",function(C){var D=sye(C),U=Dl(R.props,"".concat(D));if(D&&Zn(U)){var I,L;/.*touch.*/i.test(D)?L=R.getMouseInfo(C.changedTouches[0]):L=R.getMouseInfo(C),U((I=L)!==null&&I!==void 0?I:{},C)}}),bn(R,"handleClick",function(C){var D=R.getMouseInfo(C);if(D){var U=mt(mt({},D),{},{isTooltipActive:!0});R.setState(U),R.triggerSyncEvent(U);var I=R.props.onClick;Zn(I)&&I(U,C)}}),bn(R,"handleMouseDown",function(C){var D=R.props.onMouseDown;if(Zn(D)){var U=R.getMouseInfo(C);D(U,C)}}),bn(R,"handleMouseUp",function(C){var D=R.props.onMouseUp;if(Zn(D)){var U=R.getMouseInfo(C);D(U,C)}}),bn(R,"handleTouchMove",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&R.throttleTriggeredAfterMouseMove(C.changedTouches[0])}),bn(R,"handleTouchStart",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&R.handleMouseDown(C.changedTouches[0])}),bn(R,"handleTouchEnd",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&R.handleMouseUp(C.changedTouches[0])}),bn(R,"handleDoubleClick",function(C){var D=R.props.onDoubleClick;if(Zn(D)){var U=R.getMouseInfo(C);D(U,C)}}),bn(R,"handleContextMenu",function(C){var D=R.props.onContextMenu;if(Zn(D)){var U=R.getMouseInfo(C);D(U,C)}}),bn(R,"triggerSyncEvent",function(C){R.props.syncId!==void 0&&cj.emit(uj,R.props.syncId,C,R.eventEmitterSymbol)}),bn(R,"applySyncEvent",function(C){var D=R.props,U=D.layout,I=D.syncMethod,L=R.state.updateId,F=C.dataStartIndex,G=C.dataEndIndex;if(C.dataStartIndex!==void 0||C.dataEndIndex!==void 0)R.setState(mt({dataStartIndex:F,dataEndIndex:G},x({props:R.props,dataStartIndex:F,dataEndIndex:G,updateId:L},R.state)));else if(C.activeTooltipIndex!==void 0){var H=C.chartX,W=C.chartY,Y=C.activeTooltipIndex,k=R.state,$=k.offset,ee=k.tooltipTicks;if(!$)return;if(typeof I=="function")Y=I(ee,C);else if(I==="value"){Y=-1;for(var te=0;te<ee.length;te++)if(ee[te].value===C.activeLabel){Y=te;break}}var ae=mt(mt({},$),{},{x:$.left,y:$.top}),q=Math.min(H,ae.x+ae.width),K=Math.min(W,ae.y+ae.height),ie=ee[Y]&&ee[Y].value,ue=PO(R.state,R.props.data,Y),me=ee[Y]?{x:U==="horizontal"?ee[Y].coordinate:q,y:U==="horizontal"?K:ee[Y].coordinate}:PK;R.setState(mt(mt({},C),{},{activeLabel:ie,activeCoordinate:me,activePayload:ue,activeTooltipIndex:Y}))}else R.setState(C)}),bn(R,"renderCursor",function(C){var D,U=R.state,I=U.isTooltipActive,L=U.activeCoordinate,F=U.activePayload,G=U.offset,H=U.activeTooltipIndex,W=U.tooltipAxisBandSize,Y=R.getTooltipEventType(),k=(D=C.props.active)!==null&&D!==void 0?D:I,$=R.props.layout,ee=C.key||"_recharts-cursor";return De.createElement(s4e,{key:ee,activeCoordinate:L,activePayload:F,activeTooltipIndex:H,chartName:n,element:C,isActive:k,layout:$,offset:G,tooltipAxisBandSize:W,tooltipEventType:Y})}),bn(R,"renderPolarAxis",function(C,D,U){var I=Dl(C,"type.axisType"),L=Dl(R.state,"".concat(I,"Map")),F=C.type.defaultProps,G=F!==void 0?mt(mt({},F),C.props):C.props,H=L&&L[G["".concat(I,"Id")]];return z.cloneElement(C,mt(mt({},H),{},{className:vi(I,H.className),key:C.key||"".concat(D,"-").concat(U),ticks:D0(H,!0)}))}),bn(R,"renderPolarGrid",function(C){var D=C.props,U=D.radialLines,I=D.polarAngles,L=D.polarRadius,F=R.state,G=F.radiusAxisMap,H=F.angleAxisMap,W=$m(G),Y=$m(H),k=Y.cx,$=Y.cy,ee=Y.innerRadius,te=Y.outerRadius;return z.cloneElement(C,{polarAngles:Array.isArray(I)?I:D0(Y,!0).map(function(ae){return ae.coordinate}),polarRadius:Array.isArray(L)?L:D0(W,!0).map(function(ae){return ae.coordinate}),cx:k,cy:$,innerRadius:ee,outerRadius:te,key:C.key||"polar-grid",radialLines:U})}),bn(R,"renderLegend",function(){var C=R.state.formattedGraphicalItems,D=R.props,U=D.children,I=D.width,L=D.height,F=R.props.margin||{},G=I-(F.left||0)-(F.right||0),H=CZ({children:U,formattedGraphicalItems:C,legendWidth:G,legendContent:u});if(!H)return null;var W=H.item,Y=SV(H,o4e);return z.cloneElement(W,mt(mt({},Y),{},{chartWidth:I,chartHeight:L,margin:F,onBBoxUpdate:R.handleLegendBBoxUpdate}))}),bn(R,"renderTooltip",function(){var C,D=R.props,U=D.children,I=D.accessibilityLayer,L=Go(U,bf);if(!L)return null;var F=R.state,G=F.isTooltipActive,H=F.activeCoordinate,W=F.activePayload,Y=F.activeLabel,k=F.offset,$=(C=L.props.active)!==null&&C!==void 0?C:G;return z.cloneElement(L,{viewBox:mt(mt({},k),{},{x:k.left,y:k.top}),active:$,label:Y,payload:$?W:[],coordinate:H,accessibilityLayer:I})}),bn(R,"renderBrush",function(C){var D=R.props,U=D.margin,I=D.data,L=R.state,F=L.offset,G=L.dataStartIndex,H=L.dataEndIndex,W=L.updateId;return z.cloneElement(C,{key:C.key||"_recharts-brush",onChange:OM(R.handleBrushChange,C.props.onChange),data:I,x:kt(C.props.x)?C.props.x:F.left,y:kt(C.props.y)?C.props.y:F.top+F.height+F.brushBottom-(U.bottom||0),width:kt(C.props.width)?C.props.width:F.width,startIndex:G,endIndex:H,updateId:"brush-".concat(W)})}),bn(R,"renderReferenceElement",function(C,D,U){if(!C)return null;var I=R,L=I.clipPathId,F=R.state,G=F.xAxisMap,H=F.yAxisMap,W=F.offset,Y=C.type.defaultProps||{},k=C.props,$=k.xAxisId,ee=$===void 0?Y.xAxisId:$,te=k.yAxisId,ae=te===void 0?Y.yAxisId:te;return z.cloneElement(C,{key:C.key||"".concat(D,"-").concat(U),xAxis:G[ee],yAxis:H[ae],viewBox:{x:W.left,y:W.top,width:W.width,height:W.height},clipPathId:L})}),bn(R,"renderActivePoints",function(C){var D=C.item,U=C.activePoint,I=C.basePoint,L=C.childIndex,F=C.isRange,G=[],H=D.props.key,W=D.item.type.defaultProps!==void 0?mt(mt({},D.item.type.defaultProps),D.item.props):D.item.props,Y=W.activeDot,k=W.dataKey,$=mt(mt({index:L,dataKey:k,cx:U.x,cy:U.y,r:4,fill:hI(D.item),strokeWidth:2,stroke:"#fff",payload:U.payload,value:U.value},ri(Y,!1)),a3(Y));return G.push(T.renderActiveDot(Y,$,"".concat(H,"-activePoint-").concat(L))),I?G.push(T.renderActiveDot(Y,mt(mt({},$),{},{cx:I.x,cy:I.y}),"".concat(H,"-basePoint-").concat(L))):F&&G.push(null),G}),bn(R,"renderGraphicChild",function(C,D,U){var I=R.filterFormatItem(C,D,U);if(!I)return null;var L=R.getTooltipEventType(),F=R.state,G=F.isTooltipActive,H=F.tooltipAxis,W=F.activeTooltipIndex,Y=F.activeLabel,k=R.props.children,$=Go(k,bf),ee=I.props,te=ee.points,ae=ee.isRange,q=ee.baseLine,K=I.item.type.defaultProps!==void 0?mt(mt({},I.item.type.defaultProps),I.item.props):I.item.props,ie=K.activeDot,ue=K.hide,me=K.activeBar,fe=K.activeShape,de=!!(!ue&&G&&$&&(ie||me||fe)),_e={};L!=="axis"&&$&&$.props.trigger==="click"?_e={onClick:OM(R.handleItemMouseEnter,C.props.onClick)}:L!=="axis"&&(_e={onMouseLeave:OM(R.handleItemMouseLeave,C.props.onMouseLeave),onMouseEnter:OM(R.handleItemMouseEnter,C.props.onMouseEnter)});var Te=z.cloneElement(C,mt(mt({},I.props),_e));function Ie(at){return typeof H.dataKey=="function"?H.dataKey(at.payload):null}if(de)if(W>=0){var Re,ye;if(H.dataKey&&!H.allowDuplicatedCategory){var ct=typeof H.dataKey=="function"?Ie:"payload.".concat(H.dataKey.toString());Re=r3(te,ct,Y),ye=ae&&q&&r3(q,ct,Y)}else Re=te==null?void 0:te[W],ye=ae&&q&&q[W];if(fe||me){var Ce=C.props.activeIndex!==void 0?C.props.activeIndex:W;return[z.cloneElement(C,mt(mt(mt({},I.props),_e),{},{activeIndex:Ce})),null,null]}if(!si(Re))return[Te].concat($g(R.renderActivePoints({item:I,activePoint:Re,basePoint:ye,childIndex:W,isRange:ae})))}else{var re,Le=(re=R.getItemByXY(R.state.activeCoordinate))!==null&&re!==void 0?re:{graphicalItem:Te},He=Le.graphicalItem,Ue=He.item,Ge=Ue===void 0?C:Ue,nt=He.childIndex,Ae=mt(mt(mt({},I.props),_e),{},{activeIndex:nt});return[z.cloneElement(Ge,Ae),null,null]}return ae?[Te,null,null]:[Te,null]}),bn(R,"renderCustomized",function(C,D,U){return z.cloneElement(C,mt(mt({key:"recharts-customized-".concat(U)},R.props),R.state))}),bn(R,"renderMap",{CartesianGrid:{handler:LM,once:!0},ReferenceArea:{handler:R.renderReferenceElement},ReferenceLine:{handler:LM},ReferenceDot:{handler:R.renderReferenceElement},XAxis:{handler:LM},YAxis:{handler:LM},Brush:{handler:R.renderBrush,once:!0},Bar:{handler:R.renderGraphicChild},Line:{handler:R.renderGraphicChild},Area:{handler:R.renderGraphicChild},Radar:{handler:R.renderGraphicChild},RadialBar:{handler:R.renderGraphicChild},Scatter:{handler:R.renderGraphicChild},Pie:{handler:R.renderGraphicChild},Funnel:{handler:R.renderGraphicChild},Tooltip:{handler:R.renderCursor,once:!0},PolarGrid:{handler:R.renderPolarGrid,once:!0},PolarAngleAxis:{handler:R.renderPolarAxis},PolarRadiusAxis:{handler:R.renderPolarAxis},Customized:{handler:R.renderCustomized}}),R.clipPathId="".concat((E=A.id)!==null&&E!==void 0?E:zb("recharts"),"-clip"),R.throttleTriggeredAfterMouseMove=EY(R.triggeredAfterMouseMove,(j=A.throttleDelay)!==null&&j!==void 0?j:1e3/60),R.state={},R}return y4e(T,S),m4e(T,[{key:"componentDidMount",value:function(){var E,j;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(E=this.props.margin.left)!==null&&E!==void 0?E:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var E=this.props,j=E.children,R=E.data,C=E.height,D=E.layout,U=Go(j,bf);if(U){var I=U.props.defaultIndex;if(!(typeof I!="number"||I<0||I>this.state.tooltipTicks.length-1)){var L=this.state.tooltipTicks[I]&&this.state.tooltipTicks[I].value,F=PO(this.state,R,I,L),G=this.state.tooltipTicks[I].coordinate,H=(this.state.offset.top+C)/2,W=D==="horizontal",Y=W?{x:G,y:H}:{y:G,x:H},k=this.state.formattedGraphicalItems.find(function(ee){var te=ee.item;return te.type.name==="Scatter"});k&&(Y=mt(mt({},Y),k.props.points[I].tooltipPosition),F=k.props.points[I].tooltipPayload);var $={activeTooltipIndex:I,isTooltipActive:!0,activeLabel:L,activePayload:F,activeCoordinate:Y};this.setState($),this.renderCursor(U),this.accessibilityManager.setIndex(I)}}}},{key:"getSnapshotBeforeUpdate",value:function(E,j){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==j.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==E.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==E.margin){var R,C;this.accessibilityManager.setDetails({offset:{left:(R=this.props.margin.left)!==null&&R!==void 0?R:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0}})}return null}},{key:"componentDidUpdate",value:function(E){SN([Go(E.children,bf)],[Go(this.props.children,bf)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var E=Go(this.props.children,bf);if(E&&typeof E.props.shared=="boolean"){var j=E.props.shared?"axis":"item";return o.indexOf(j)>=0?j:a}return a}},{key:"getMouseInfo",value:function(E){if(!this.container)return null;var j=this.container,R=j.getBoundingClientRect(),C=$2e(R),D={chartX:Math.round(E.pageX-C.left),chartY:Math.round(E.pageY-C.top)},U=R.width/j.offsetWidth||1,I=this.inRange(D.chartX,D.chartY,U);if(!I)return null;var L=this.state,F=L.xAxisMap,G=L.yAxisMap,H=this.getTooltipEventType(),W=_V(this.state,this.props.data,this.props.layout,I);if(H!=="axis"&&F&&G){var Y=$m(F).scale,k=$m(G).scale,$=Y&&Y.invert?Y.invert(D.chartX):null,ee=k&&k.invert?k.invert(D.chartY):null;return mt(mt({},D),{},{xValue:$,yValue:ee},W)}return W?mt(mt({},D),W):null}},{key:"inRange",value:function(E,j){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,C=this.props.layout,D=E/R,U=j/R;if(C==="horizontal"||C==="vertical"){var I=this.state.offset,L=D>=I.left&&D<=I.left+I.width&&U>=I.top&&U<=I.top+I.height;return L?{x:D,y:U}:null}var F=this.state,G=F.angleAxisMap,H=F.radiusAxisMap;if(G&&H){var W=$m(G);return k9({x:D,y:U},W)}return null}},{key:"parseEventsOfWrapper",value:function(){var E=this.props.children,j=this.getTooltipEventType(),R=Go(E,bf),C={};R&&j==="axis"&&(R.props.trigger==="click"?C={onClick:this.handleClick}:C={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var D=a3(this.props,this.handleOuterEvent);return mt(mt({},D),C)}},{key:"addListener",value:function(){cj.on(uj,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){cj.removeListener(uj,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(E,j,R){for(var C=this.state.formattedGraphicalItems,D=0,U=C.length;D<U;D++){var I=C[D];if(I.item===E||I.props.key===E.key||j===Rf(I.item.type)&&R===I.childIndex)return I}return null}},{key:"renderClipPath",value:function(){var E=this.clipPathId,j=this.state.offset,R=j.left,C=j.top,D=j.height,U=j.width;return De.createElement("defs",null,De.createElement("clipPath",{id:E},De.createElement("rect",{x:R,y:C,height:D,width:U})))}},{key:"getXScales",value:function(){var E=this.state.xAxisMap;return E?Object.entries(E).reduce(function(j,R){var C=bV(R,2),D=C[0],U=C[1];return mt(mt({},j),{},bn({},D,U.scale))},{}):null}},{key:"getYScales",value:function(){var E=this.state.yAxisMap;return E?Object.entries(E).reduce(function(j,R){var C=bV(R,2),D=C[0],U=C[1];return mt(mt({},j),{},bn({},D,U.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(E){var j;return(j=this.state.xAxisMap)===null||j===void 0||(j=j[E])===null||j===void 0?void 0:j.scale}},{key:"getYScaleByAxisId",value:function(E){var j;return(j=this.state.yAxisMap)===null||j===void 0||(j=j[E])===null||j===void 0?void 0:j.scale}},{key:"getItemByXY",value:function(E){var j=this.state,R=j.formattedGraphicalItems,C=j.activeItem;if(R&&R.length)for(var D=0,U=R.length;D<U;D++){var I=R[D],L=I.props,F=I.item,G=F.type.defaultProps!==void 0?mt(mt({},F.type.defaultProps),F.props):F.props,H=Rf(F.type);if(H==="Bar"){var W=(L.data||[]).find(function(ee){return hEe(E,ee)});if(W)return{graphicalItem:I,payload:W}}else if(H==="RadialBar"){var Y=(L.data||[]).find(function(ee){return k9(E,ee)});if(Y)return{graphicalItem:I,payload:Y}}else if(dw(I,C)||pw(I,C)||ib(I,C)){var k=n5e({graphicalItem:I,activeTooltipItem:C,itemData:G.data}),$=G.activeIndex===void 0?k:G.activeIndex;return{graphicalItem:mt(mt({},I),{},{childIndex:$}),payload:ib(I,C)?G.data[k]:I.props.data[k]}}}return null}},{key:"render",value:function(){var E=this;if(!Kz(this))return null;var j=this.props,R=j.children,C=j.className,D=j.width,U=j.height,I=j.style,L=j.compact,F=j.title,G=j.desc,H=SV(j,l4e),W=ri(H,!1);if(L)return De.createElement(rV,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},De.createElement(_N,og({},W,{width:D,height:U,title:F,desc:G}),this.renderClipPath(),Jz(R,this.renderMap)));if(this.props.accessibilityLayer){var Y,k;W.tabIndex=(Y=this.props.tabIndex)!==null&&Y!==void 0?Y:0,W.role=(k=this.props.role)!==null&&k!==void 0?k:"application",W.onKeyDown=function(ee){E.accessibilityManager.keyboardEvent(ee)},W.onFocus=function(){E.accessibilityManager.focus()}}var $=this.parseEventsOfWrapper();return De.createElement(rV,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},De.createElement("div",og({className:vi("recharts-wrapper",C),style:mt({position:"relative",cursor:"default",width:D,height:U},I)},$,{ref:function(te){E.container=te}}),De.createElement(_N,og({},W,{width:D,height:U,title:F,desc:G,style:w4e}),this.renderClipPath(),Jz(R,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(z.Component);bn(b,"displayName",n),bn(b,"defaultProps",mt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},p)),bn(b,"getDerivedStateFromProps",function(S,T){var A=S.dataKey,E=S.data,j=S.children,R=S.width,C=S.height,D=S.layout,U=S.stackOffset,I=S.margin,L=T.dataStartIndex,F=T.dataEndIndex;if(T.updateId===void 0){var G=TV(S);return mt(mt(mt({},G),{},{updateId:0},x(mt(mt({props:S},G),{},{updateId:0}),T)),{},{prevDataKey:A,prevData:E,prevWidth:R,prevHeight:C,prevLayout:D,prevStackOffset:U,prevMargin:I,prevChildren:j})}if(A!==T.prevDataKey||E!==T.prevData||R!==T.prevWidth||C!==T.prevHeight||D!==T.prevLayout||U!==T.prevStackOffset||!ug(I,T.prevMargin)){var H=TV(S),W={chartX:T.chartX,chartY:T.chartY,isTooltipActive:T.isTooltipActive},Y=mt(mt({},_V(T,E,D)),{},{updateId:T.updateId+1}),k=mt(mt(mt({},H),W),Y);return mt(mt(mt({},k),x(mt({props:S},k),T)),{},{prevDataKey:A,prevData:E,prevWidth:R,prevHeight:C,prevLayout:D,prevStackOffset:U,prevMargin:I,prevChildren:j})}if(!SN(j,T.prevChildren)){var $,ee,te,ae,q=Go(j,Bg),K=q&&($=(ee=q.props)===null||ee===void 0?void 0:ee.startIndex)!==null&&$!==void 0?$:L,ie=q&&(te=(ae=q.props)===null||ae===void 0?void 0:ae.endIndex)!==null&&te!==void 0?te:F,ue=K!==L||ie!==F,me=!si(E),fe=me&&!ue?T.updateId:T.updateId+1;return mt(mt({updateId:fe},x(mt(mt({props:S},T),{},{updateId:fe,dataStartIndex:K,dataEndIndex:ie}),T)),{},{prevChildren:j,dataStartIndex:K,dataEndIndex:ie})}return null}),bn(b,"renderActiveDot",function(S,T,A){var E;return z.isValidElement(S)?E=z.cloneElement(S,T):Zn(S)?E=S(T):E=De.createElement(pI,T),De.createElement(Dr,{className:"recharts-active-dot",key:A},E)});var M=z.forwardRef(function(T,A){return De.createElement(b,og({},T,{ref:A}))});return M.displayName=b.displayName,M},U4e=I4e({chartName:"AreaChart",GraphicalChild:cd,axisComponents:[{axisType:"xAxis",AxisComp:yI},{axisType:"yAxis",AxisComp:bI}],formatAxisMap:J5e});const L4e=()=>{const[t,e]=z.useState([]),[n,i]=z.useState({throughput:1240,efficiency:98.2,quality:99.9,uptime:99.7,bagsPerMinute:42,energyUsage:847}),r=Fe(s=>s.safetyMetrics),a=()=>{if(!r.lastIncidentTime)return"No incidents";const s=Date.now()-r.lastIncidentTime,o=Math.floor(s/1e3),l=Math.floor(o/60),u=Math.floor(l/60);return u>0?`${u}h ${l%60}m`:l>0?`${l}m ${o%60}s`:`${o}s`};return z.useEffect(()=>{const s=[],o=new Date;for(let l=30;l>=0;l--){const u=new Date(o.getTime()-l*6e4);s.push({time:u.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),throughput:1200+Math.random()*100,efficiency:96+Math.random()*4,quality:99+Math.random()*1})}e(s)},[]),z.useEffect(()=>{const s=setInterval(()=>{const l={time:new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),throughput:1200+Math.random()*100,efficiency:96+Math.random()*4,quality:99+Math.random()*1};e(u=>[...u.slice(-29),l]),i(u=>({throughput:Math.round(1200+Math.random()*100),efficiency:+(96+Math.random()*4).toFixed(1),quality:+(99+Math.random()*1).toFixed(1),uptime:+(99.5+Math.random()*.5).toFixed(1),bagsPerMinute:Math.round(40+Math.random()*5),energyUsage:Math.round(830+Math.random()*40)}))},2e3);return()=>clearInterval(s)},[]),c.jsxs("div",{className:"space-y-1.5",children:[c.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[c.jsxs("div",{className:"bg-slate-800/50 rounded p-1.5 border border-slate-700/50",children:[c.jsx("div",{className:"text-[8px] text-slate-500 uppercase",children:"Throughput"}),c.jsx("div",{className:"text-base font-bold text-white font-mono leading-tight",children:n.throughput}),c.jsx("div",{className:"text-[8px] text-slate-500",children:"t/hr"})]}),c.jsxs("div",{className:"bg-slate-800/50 rounded p-1.5 border border-slate-700/50",children:[c.jsx("div",{className:"text-[8px] text-slate-500 uppercase",children:"Efficiency"}),c.jsxs("div",{className:"text-base font-bold text-green-400 font-mono leading-tight",children:[n.efficiency,"%"]}),c.jsx("div",{className:"text-[8px] text-green-500/50",children:"+2.1%"})]}),c.jsxs("div",{className:"bg-slate-800/50 rounded p-1.5 border border-slate-700/50",children:[c.jsx("div",{className:"text-[8px] text-slate-500 uppercase",children:"Quality"}),c.jsxs("div",{className:"text-base font-bold text-purple-400 font-mono leading-tight",children:[n.quality,"%"]}),c.jsx("div",{className:"text-[8px] text-purple-500/50",children:"Grade A"})]})]}),c.jsxs("div",{className:"bg-slate-800/30 rounded p-1.5 border border-slate-700/30",children:[c.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[c.jsx("span",{className:"text-[9px] text-slate-400",children:"Production (30m)"}),c.jsxs("span",{className:"text-[8px] text-cyan-400 flex items-center gap-0.5",children:[c.jsx("span",{className:"w-1 h-1 bg-cyan-400 rounded-full animate-pulse"}),"Live"]})]}),c.jsx("div",{className:"h-10",children:c.jsx(F2e,{width:"100%",height:"100%",children:c.jsxs(U4e,{data:t,children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:"throughputGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:"#06b6d4",stopOpacity:.4}),c.jsx("stop",{offset:"100%",stopColor:"#06b6d4",stopOpacity:0})]})}),c.jsx(cd,{type:"monotone",dataKey:"throughput",stroke:"#06b6d4",strokeWidth:2,fill:"url(#throughputGradient)"})]})})})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-1 text-center",children:[c.jsxs("div",{className:"bg-slate-800/30 rounded p-1",children:[c.jsx("div",{className:"text-sm font-bold text-orange-400 font-mono leading-tight",children:n.bagsPerMinute}),c.jsx("div",{className:"text-[7px] text-slate-500",children:"bags/min"})]}),c.jsxs("div",{className:"bg-slate-800/30 rounded p-1",children:[c.jsxs("div",{className:"text-sm font-bold text-blue-400 font-mono leading-tight",children:[n.uptime,"%"]}),c.jsx("div",{className:"text-[7px] text-slate-500",children:"uptime"})]}),c.jsxs("div",{className:"bg-slate-800/30 rounded p-1",children:[c.jsx("div",{className:"text-sm font-bold text-yellow-400 font-mono leading-tight",children:n.energyUsage}),c.jsx("div",{className:"text-[7px] text-slate-500",children:"kWh"})]})]}),c.jsxs("div",{className:"bg-gradient-to-r from-green-900/30 to-emerald-900/30 rounded p-1.5 border border-green-700/30",children:[c.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[c.jsx("svg",{className:"w-2.5 h-2.5 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),c.jsx("span",{className:"text-[9px] font-medium text-green-400",children:"Safety"})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-1 text-center",children:[c.jsxs("div",{className:"bg-slate-900/50 rounded p-1",children:[c.jsx("div",{className:"text-sm font-bold text-green-400 font-mono leading-tight",children:r.safetyStops}),c.jsx("div",{className:"text-[7px] text-slate-500",children:"stops"})]}),c.jsxs("div",{className:"bg-slate-900/50 rounded p-1",children:[c.jsx("div",{className:"text-sm font-bold text-emerald-400 font-mono leading-tight",children:r.workerEvasions}),c.jsx("div",{className:"text-[7px] text-slate-500",children:"evasions"})]}),c.jsxs("div",{className:"bg-slate-900/50 rounded p-1 min-w-[60px]",children:[c.jsx("div",{className:"text-[10px] font-bold text-teal-400 font-mono leading-tight whitespace-nowrap h-4 flex items-center justify-center",children:a()}),c.jsx("div",{className:"text-[7px] text-slate-500",children:"elapsed"})]})]}),r.safetyStops===0&&c.jsx("div",{className:"mt-1 text-center",children:c.jsxs("span",{className:"text-[8px] text-green-500/70 flex items-center justify-center gap-0.5",children:[c.jsx("span",{className:"w-1 h-1 bg-green-500 rounded-full animate-pulse"}),"All safe"]})})]})]})},p0=[],SI=60,is=CD(t=>({fps:60,avgFps:60,minFps:60,maxFps:60,frameTime:16.67,memoryUsage:0,triangles:0,drawCalls:0,geometries:0,textures:0,programs:0,profilingEnabled:!1,profileData:{render:0,scripts:0,physics:0,other:0},qualitySuggestionsEnabled:!0,pendingSuggestion:null,suggestionDismissedAt:0,lowFpsStartTime:0,highFpsStartTime:0,setFPS:(e,n)=>{p0.push(e),p0.length>SI&&p0.shift();const i=p0.reduce((o,l)=>o+l,0)/p0.length,r=Math.min(...p0),a=Math.max(...p0);let s=0;performance.memory&&(s=performance.memory.usedJSHeapSize/(1024*1024)),t({fps:e,avgFps:i,minFps:r,maxFps:a,frameTime:n,memoryUsage:s})},setRendererStats:e=>t({triangles:e.triangles,drawCalls:e.drawCalls,geometries:e.geometries,textures:e.textures,programs:e.programs}),setProfilingEnabled:e=>t({profilingEnabled:e}),setQualitySuggestionsEnabled:e=>t({qualitySuggestionsEnabled:e}),setPendingSuggestion:e=>t({pendingSuggestion:e}),setSuggestionDismissedAt:e=>t({suggestionDismissedAt:e}),setProfileData:e=>t({profileData:e}),setLowFpsStartTime:e=>t({lowFpsStartTime:e}),setHighFpsStartTime:e=>t({highFpsStartTime:e})})),BM=["ultra","high","medium","low"],B4e=()=>{const t=z.useRef(performance.now()),e=z.useRef(0),{gl:n}=hi(),i=is(T=>T.setFPS),r=is(T=>T.setRendererStats),a=is(T=>T.setProfileData),s=is(T=>T.profilingEnabled),o=is(T=>T.qualitySuggestionsEnabled),l=is(T=>T.pendingSuggestion),u=is(T=>T.suggestionDismissedAt),h=is(T=>T.lowFpsStartTime),p=is(T=>T.highFpsStartTime),g=is(T=>T.setPendingSuggestion),x=is(T=>T.setLowFpsStartTime),b=is(T=>T.setHighFpsStartTime),M=Fe(T=>T.graphics.quality),S=z.useRef([]);return It(()=>{var j;const T=performance.now();e.current++;const A=performance.now(),E=A-t.current;if(E>=100){const R=Math.round(e.current*1e3/E),C=E/e.current;i(R,C);const D=n.info;if(r({triangles:D.render.triangles,drawCalls:D.render.calls,geometries:D.memory.geometries,textures:D.memory.textures,programs:((j=D.programs)==null?void 0:j.length)||0}),s&&S.current.length>0){const U=S.current.reduce((H,W)=>H+W,0)/S.current.length,I=U*.6,L=U*.25,F=U*.05,G=U*.1;a({render:I,scripts:L,physics:F,other:G}),S.current=[]}if(o&&!l){const U=Date.now(),I=U-u,L=BM.indexOf(M);I>3e4&&(R<25&&L<BM.length-1?h===0?x(U):U-h>3e3&&(g({type:"lower",targetQuality:BM[L+1]}),x(0)):x(0),R>55&&L>0?p===0?b(U):U-p>1e4&&(g({type:"raise",targetQuality:BM[L-1]}),b(0)):b(0))}e.current=0,t.current=A}if(s){const R=performance.now();S.current.push(R-T),S.current.length>60&&S.current.shift()}}),null},z4e=({history:t})=>{const e=z.useRef(null);return z.useEffect(()=>{const n=e.current;if(!n)return;const i=n.getContext("2d");if(!i)return;const r=n.width,a=n.height;if(i.clearRect(0,0,r,a),i.fillStyle="rgba(15, 23, 42, 0.5)",i.fillRect(0,0,r,a),i.strokeStyle="rgba(74, 222, 128, 0.3)",i.setLineDash([2,2]),i.beginPath(),i.moveTo(0,a-60/120*a),i.lineTo(r,a-60/120*a),i.stroke(),i.strokeStyle="rgba(251, 191, 36, 0.3)",i.beginPath(),i.moveTo(0,a-30/120*a),i.lineTo(r,a-30/120*a),i.stroke(),i.setLineDash([]),t.length>1){i.beginPath(),i.moveTo(0,a-Math.min(t[0],120)/120*a);for(let o=1;o<t.length;o++){const l=o/(SI-1)*r,u=a-Math.min(t[o],120)/120*a;i.lineTo(l,u)}const s=t.reduce((o,l)=>o+l,0)/t.length;s>=55?i.strokeStyle="#4ade80":s>=30?i.strokeStyle="#fbbf24":i.strokeStyle="#f87171",i.lineWidth=1.5,i.stroke()}},[t]),c.jsx("canvas",{ref:e,width:80,height:30,className:"rounded"})},zM=({label:t,value:e,max:n,color:i})=>{const r=Math.min(e/n*100,100);return c.jsxs("div",{className:"flex items-center gap-2 text-[10px]",children:[c.jsx("span",{className:"text-slate-500 w-12",children:t}),c.jsx("div",{className:"flex-1 h-2 bg-slate-800 rounded-full overflow-hidden",children:c.jsx("div",{className:`h-full ${i} transition-all duration-200`,style:{width:`${r}%`}})}),c.jsxs("span",{className:"text-slate-400 font-mono w-12 text-right",children:[e.toFixed(1),"ms"]})]})},k4e=()=>{const t=is(l=>l.pendingSuggestion),e=is(l=>l.setPendingSuggestion),n=is(l=>l.setSuggestionDismissedAt),i=Fe(l=>l.setGraphicsQuality),r=is(l=>l.fps);if(!t)return null;const a=()=>{i(t.targetQuality),e(null)},s=()=>{e(null),n(Date.now())},o=t.type==="lower";return c.jsx("div",{className:`mt-2 p-2 rounded-lg border ${o?"bg-red-900/30 border-red-500/50":"bg-green-900/30 border-green-500/50"}`,children:c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx("div",{className:`mt-0.5 ${o?"text-red-400":"text-green-400"}`,children:o?c.jsx(Cc,{className:"w-4 h-4"}):c.jsx(Cu,{className:"w-4 h-4"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:`text-[10px] font-bold ${o?"text-red-300":"text-green-300"}`,children:o?"Performance Issue Detected":"Room for Better Quality"}),c.jsx("div",{className:"text-[9px] text-slate-400 mt-0.5",children:o?`FPS is ${r}. Switch to ${t.targetQuality.toUpperCase()} for better performance?`:`FPS is stable at ${r}. Try ${t.targetQuality.toUpperCase()} for better visuals?`}),c.jsxs("div",{className:"flex gap-1.5 mt-2",children:[c.jsxs("button",{onClick:a,className:`flex-1 py-1 px-2 rounded text-[9px] font-bold transition-all ${o?"bg-red-600 hover:bg-red-500 text-white":"bg-green-600 hover:bg-green-500 text-white"}`,children:["Switch to ",t.targetQuality.toUpperCase()]}),c.jsx("button",{onClick:s,className:"py-1 px-2 rounded text-[9px] font-bold bg-slate-700 hover:bg-slate-600 text-slate-300 transition-all",children:c.jsx(op,{className:"w-3 h-3"})})]})]})]})})},F4e=({showDetailed:t=!1})=>{const{fps:e,avgFps:n,minFps:i,maxFps:r,frameTime:a,triangles:s,drawCalls:o,geometries:l,textures:u,programs:h,memoryUsage:p,profilingEnabled:g,profileData:x,qualitySuggestionsEnabled:b,setProfilingEnabled:M,setQualitySuggestionsEnabled:S}=is(),[T,A]=z.useState([]),E=Fe(C=>C.graphics.quality);z.useEffect(()=>{A(C=>{const D=[...C,e];return D.length>SI&&D.shift(),D})},[e]);const j=e>=55?"text-green-400":e>=30?"text-yellow-400":"text-red-400",R=e>=55?"bg-green-500/20":e>=30?"bg-yellow-500/20":"bg-red-500/20";return t?c.jsxs("div",{className:"bg-slate-900/80 rounded-lg p-2 border border-slate-700/50 space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`text-2xl font-mono font-bold ${j}`,children:e}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"text-[9px] text-slate-500 uppercase tracking-wider",children:"Frames/sec"}),c.jsx(z4e,{history:T})]})]}),c.jsxs("div",{className:"flex items-center justify-between text-[10px] border-t border-slate-700/50 pt-2",children:[c.jsx("span",{className:"text-slate-400",children:"Quality Hints"}),c.jsx("button",{onClick:()=>S(!b),className:`px-2 py-0.5 rounded text-[9px] font-bold transition-all ${b?"bg-cyan-600 text-white":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:b?"ON":"OFF"})]}),c.jsxs("div",{className:"text-[9px] text-slate-500",children:["Currently: ",c.jsx("span",{className:"font-bold uppercase text-slate-300",children:E})]}),b&&c.jsx(k4e,{}),c.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-[10px] border-t border-slate-700/50 pt-2",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-slate-500",children:"Avg:"}),c.jsx("span",{className:"text-slate-300 font-mono",children:n.toFixed(0)})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-slate-500",children:"Frame:"}),c.jsxs("span",{className:"text-slate-300 font-mono",children:[a.toFixed(1),"ms"]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-slate-500",children:"Min:"}),c.jsx("span",{className:"text-red-400 font-mono",children:i})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-slate-500",children:"Max:"}),c.jsx("span",{className:"text-green-400 font-mono",children:r})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-slate-500",children:"Tris:"}),c.jsxs("span",{className:"text-cyan-400 font-mono",children:[(s/1e3).toFixed(1),"k"]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-slate-500",children:"Draws:"}),c.jsx("span",{className:"text-purple-400 font-mono",children:o})]})]}),c.jsxs("div",{className:"flex items-center justify-between text-[10px] border-t border-slate-700/50 pt-2",children:[c.jsx("span",{className:"text-slate-400",children:"Profiler"}),c.jsx("button",{onClick:()=>M(!g),className:`px-2 py-0.5 rounded text-[9px] font-bold transition-all ${g?"bg-orange-600 text-white":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:g?"ON":"OFF"})]}),g&&c.jsxs("div",{className:"space-y-1.5 border-t border-slate-700/50 pt-2",children:[c.jsx("div",{className:"text-[9px] text-slate-500 uppercase tracking-wider mb-1",children:"Frame Breakdown"}),c.jsx(zM,{label:"Render",value:x.render,max:a,color:"bg-cyan-500"}),c.jsx(zM,{label:"Scripts",value:x.scripts,max:a,color:"bg-purple-500"}),c.jsx(zM,{label:"Physics",value:x.physics,max:a,color:"bg-green-500"}),c.jsx(zM,{label:"Other",value:x.other,max:a,color:"bg-orange-500"}),c.jsxs("div",{className:"grid grid-cols-3 gap-1 text-[9px] mt-2 pt-2 border-t border-slate-800",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-slate-500",children:"Geoms"}),c.jsx("div",{className:"text-cyan-400 font-mono",children:l})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-slate-500",children:"Textures"}),c.jsx("div",{className:"text-purple-400 font-mono",children:u})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-slate-500",children:"Shaders"}),c.jsx("div",{className:"text-green-400 font-mono",children:h})]})]}),p>0&&c.jsxs("div",{className:"flex justify-between text-[10px] pt-1",children:[c.jsx("span",{className:"text-slate-500",children:"Memory:"}),c.jsxs("span",{className:"text-orange-400 font-mono",children:[p.toFixed(0)," MB"]})]})]})]}):c.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-1 rounded ${R}`,children:[c.jsx("span",{className:`text-xs font-mono font-bold ${j}`,children:e}),c.jsx("span",{className:"text-[9px] text-slate-500",children:"FPS"})]})},G4e=()=>{const t=Fe(h=>h.safetyIncidents),e=Fe(h=>h.safetyMetrics),n=t.filter(h=>Date.now()-h.timestamp<1440*60*1e3),i={emergency:15,near_miss:8,stop:3,evasion:2},r=n.reduce((h,p)=>h+(i[p.type]||5),0),a=Math.min(20,e.daysSinceIncident*.5),s=Math.max(0,Math.min(100,100-r+a));let o,l,u;return s>=90?(o="A",l="text-green-400",u="Excellent"):s>=80?(o="B",l="text-cyan-400",u="Good"):s>=70?(o="C",l="text-yellow-400",u="Fair"):s>=60?(o="D",l="text-orange-400",u="Poor"):(o="F",l="text-red-400",u="Critical"),{score:s,rating:o,color:l,label:u,recentIncidents:n.length}},V4e=({compact:t=!1})=>{const{score:e,rating:n,color:i,label:r,recentIncidents:a}=G4e();return t?c.jsxs("div",{className:`flex items-center gap-1 ${i}`,children:[c.jsx(Qo,{className:"w-3.5 h-3.5"}),c.jsx("span",{className:"font-bold text-sm",children:n})]}):c.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-2 border border-slate-800",children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(Qo,{className:`w-4 h-4 ${i}`}),c.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Safety Score"})]}),c.jsx("div",{className:`text-2xl font-bold ${i}`,children:n})]}),c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"h-1.5 bg-slate-800 rounded-full overflow-hidden",children:c.jsx(Xn.div,{initial:{width:0},animate:{width:`${e}%`},transition:{duration:.5,ease:"easeOut"},className:`h-full rounded-full ${e>=90?"bg-green-500":e>=80?"bg-cyan-500":e>=70?"bg-yellow-500":e>=60?"bg-orange-500":"bg-red-500"}`})}),c.jsxs("div",{className:"flex justify-between mt-0.5",children:[c.jsx("span",{className:`text-[9px] font-medium ${i}`,children:r}),c.jsxs("span",{className:"text-[9px] text-slate-500",children:[e.toFixed(0),"%"]})]})]})}),a>0&&c.jsxs("div",{className:"mt-1 text-[9px] text-slate-500",children:[a," incident",a!==1?"s":""," in last 24h"]})]})},H4e=()=>{const t=Fe(a=>a.forkliftEmergencyStop),e=Fe(a=>a.emergencyActive),[n,i]=z.useState(!0),r=t||e;return z.useEffect(()=>{if(!r)return;const a=setInterval(()=>{i(s=>!s)},300);return()=>clearInterval(a)},[r]),c.jsx(_a,{children:r&&c.jsxs(c.Fragment,{children:[c.jsx(Xn.div,{initial:{opacity:0},animate:{opacity:n?1:.3},exit:{opacity:0},className:"fixed inset-0 z-40 pointer-events-none",style:{boxShadow:"inset 0 0 0 4px rgba(239, 68, 68, 0.8), inset 0 0 60px rgba(239, 68, 68, 0.3)"}}),c.jsx(Xn.div,{initial:{opacity:0,scale:.8},animate:{opacity:n?1:.5,scale:1},exit:{opacity:0,scale:.8},className:"fixed top-4 left-1/2 -translate-x-1/2 z-50 pointer-events-none",children:c.jsxs("div",{className:"flex items-center gap-2 bg-red-600/90 backdrop-blur-sm px-4 py-2 rounded-lg border border-red-400 shadow-lg shadow-red-500/50",children:[c.jsx(eN,{className:"w-5 h-5 text-white animate-pulse"}),c.jsx("span",{className:"text-white font-bold text-sm uppercase tracking-wider",children:"Emergency Stop Active"}),c.jsx(eN,{className:"w-5 h-5 text-white animate-pulse"})]})}),c.jsx(Xn.div,{initial:{opacity:0,y:10},animate:{opacity:.8,y:0},exit:{opacity:0,y:10},className:"fixed bottom-20 left-1/2 -translate-x-1/2 z-50 pointer-events-none",children:c.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-sm px-3 py-1.5 rounded-lg border border-slate-700 text-slate-300 text-xs",children:["Press ",c.jsx("kbd",{className:"bg-slate-700 px-1.5 py-0.5 rounded font-mono mx-1",children:"SPACE"})," to release"]})})]})})};z.createContext(null);const AV=["Shift change in 5 minutes. Please complete current tasks.","Day shift ending. Evening crew, please report to stations.","Break time. Workers may proceed to break areas.","Production target reached! Great work, team.","Safety reminder: Wear PPE in all production zones.","Maintenance crew to Roller Mill RM-103.","Quality check required at Packer Line 2."],q4e=()=>{const t=Fe(e=>e.addAnnouncement);z.useEffect(()=>{const e=()=>{const i=45e3+Math.random()*45e3;return setTimeout(()=>{const r=AV[Math.floor(Math.random()*AV.length)],a=["shift_change","safety","production","general"];t({type:a[Math.floor(Math.random()*a.length)],message:r,duration:8,priority:Math.random()>.8?"high":"medium"}),n=e()},i)};let n=e();return()=>clearTimeout(n)},[t])},W4e=()=>{const t=Fe(o=>o.announcements),e=Fe(o=>o.dismissAnnouncement),n=Fe(o=>o.clearOldAnnouncements),i=z.useRef(""),r=z.useRef(0);if(q4e(),z.useEffect(()=>{const o=setInterval(n,1e3);return()=>clearInterval(o)},[n]),z.useEffect(()=>{if(t.length===0)return;const o=t[0],l=Date.now();o.message!==i.current&&l-r.current>1e4&&!wt.isSpeaking()&&(i.current=o.message,r.current=l,wt.speakAnnouncement(o.message))},[t]),t.length===0)return null;const a=o=>{switch(o){case"critical":return"bg-red-600/95 border-red-400 text-white animate-pulse";case"high":return"bg-amber-600/95 border-amber-400 text-white";case"medium":return"bg-blue-600/95 border-blue-400 text-white";default:return"bg-slate-800/95 border-slate-600 text-white"}},s=o=>{switch(o){case"shift_change":return c.jsx($_,{className:"w-5 h-5"});case"safety":return c.jsx(Qo,{className:"w-5 h-5"});case"emergency":return c.jsx(S1,{className:"w-5 h-5"});case"production":return c.jsx(HW,{className:"w-5 h-5"});default:return c.jsx(YW,{className:"w-5 h-5"})}};return c.jsx("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 z-[60] space-y-2 pointer-events-auto max-w-[90vw]",children:c.jsx(_a,{children:t.slice(0,3).map(o=>c.jsxs(Xn.div,{initial:{opacity:0,y:-50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.9},className:`flex items-center gap-3 px-4 py-3 rounded-xl border-2 backdrop-blur-xl shadow-2xl min-w-[300px] max-w-[500px] ${a(o.priority)}`,children:[c.jsx("div",{className:"flex-shrink-0",children:s(o.type)}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"font-medium text-sm",children:o.message}),c.jsx("p",{className:"text-xs opacity-70",children:"PA System"})]}),c.jsx("button",{onClick:()=>e(o.id),className:"flex-shrink-0 w-6 h-6 rounded-full bg-white/20 hover:bg-white/30 flex items-center justify-center transition-colors",children:c.jsx(op,{className:"w-4 h-4"})})]},o.id))})})},X4e=()=>{const[t,e]=z.useState(!1),n=Fe(o=>o.productionTarget),i=Fe(o=>o.totalBagsProduced);if(!n)return null;const r=n.producedBags/n.targetBags*100,a=r>=100,s=r>=50;return c.jsxs(Xn.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},className:"bg-slate-900/95 backdrop-blur-xl rounded-xl border border-slate-700/50 overflow-hidden",children:[c.jsxs("button",{onClick:()=>e(!t),className:"w-full flex items-center justify-between p-3 hover:bg-slate-800/50 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx($W,{className:`w-5 h-5 ${a?"text-green-400":"text-cyan-400"}`}),c.jsx("span",{className:"text-white font-medium text-sm",children:"Daily Target"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:`text-sm font-bold ${a?"text-green-400":"text-cyan-400"}`,children:[r.toFixed(0),"%"]}),t?c.jsx(Cu,{className:"w-4 h-4 text-slate-400"}):c.jsx(Cc,{className:"w-4 h-4 text-slate-400"})]})]}),c.jsx("div",{className:"px-3 pb-2",children:c.jsx("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden",children:c.jsx(Xn.div,{initial:{width:0},animate:{width:`${Math.min(100,r)}%`},transition:{duration:.5},className:`h-full rounded-full ${a?"bg-green-500":s?"bg-cyan-500":"bg-amber-500"}`})})}),c.jsx(_a,{children:t&&c.jsx(Xn.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:c.jsxs("div",{className:"px-3 pb-3 space-y-2 border-t border-slate-800 pt-2",children:[c.jsxs("div",{className:"flex justify-between text-xs",children:[c.jsx("span",{className:"text-slate-400",children:"Bags Produced"}),c.jsxs("span",{className:"text-white font-mono",children:[n.producedBags.toLocaleString()," / ",n.targetBags.toLocaleString()]})]}),c.jsxs("div",{className:"flex justify-between text-xs",children:[c.jsx("span",{className:"text-slate-400",children:"Total Ever"}),c.jsx("span",{className:"text-cyan-400 font-mono",children:i.toLocaleString()})]}),c.jsxs("div",{className:"flex justify-between text-xs",children:[c.jsx("span",{className:"text-slate-400",children:"Status"}),c.jsx("span",{className:`font-medium ${a?"text-green-400":s?"text-cyan-400":"text-amber-400"}`,children:a?"Completed!":s?"On Track":"Behind Schedule"})]})]})})})]})},$4e=({onClose:t})=>{const e=Fe(r=>r.achievements),n=r=>{switch(r){case"safety":return"text-green-400 bg-green-500/20";case"production":return"text-blue-400 bg-blue-500/20";case"quality":return"text-purple-400 bg-purple-500/20";case"teamwork":return"text-amber-400 bg-amber-500/20";default:return"text-slate-400 bg-slate-500/20"}},i=r=>{switch(r){case"Shield":return Qo;case"Package":return HW;case"Award":return UW;case"Users":return Z_;case"TrendingUp":return K0;default:return tN}};return c.jsxs(Xn.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"fixed inset-4 md:inset-auto md:right-4 md:top-20 md:w-96 bg-slate-900/98 backdrop-blur-xl rounded-2xl border border-slate-700/50 shadow-2xl z-50 flex flex-col max-h-[80vh] pointer-events-auto",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-800",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(tN,{className:"w-5 h-5 text-yellow-400"}),c.jsx("h2",{className:"text-lg font-bold text-white",children:"Achievements"})]}),c.jsx("button",{onClick:t,className:"w-8 h-8 rounded-lg bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white flex items-center justify-center transition-colors",children:c.jsx(op,{className:"w-4 h-4"})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:e.map(r=>{const a=i(r.icon),s=!!r.unlockedAt,o=r.progress??r.currentValue/r.requirement*100;return c.jsx("div",{className:`p-3 rounded-xl border ${s?"border-yellow-500/50 bg-yellow-500/10":"border-slate-700 bg-slate-800/50"}`,children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${n(r.category)}`,children:c.jsx(a,{className:"w-5 h-5"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h3",{className:"text-white font-medium text-sm",children:r.name}),s&&c.jsx(XW,{className:"w-4 h-4 text-yellow-400 fill-yellow-400"})]}),c.jsx("p",{className:"text-slate-400 text-xs mt-0.5",children:r.description}),c.jsxs("div",{className:"mt-2",children:[c.jsxs("div",{className:"flex justify-between text-[10px] mb-1",children:[c.jsx("span",{className:"text-slate-500",children:"Progress"}),c.jsxs("span",{className:"text-slate-400",children:[r.currentValue," / ",r.requirement]})]}),c.jsx("div",{className:"h-1.5 bg-slate-700 rounded-full overflow-hidden",children:c.jsx("div",{className:`h-full rounded-full transition-all ${s?"bg-yellow-500":"bg-cyan-500"}`,style:{width:`${Math.min(100,o)}%`}})})]})]})]})},r.id)})})]})},Y4e=({onClose:t})=>{const e=Fe(a=>a.workerLeaderboard),n=Fe(a=>a.updateWorkerScore);z.useEffect(()=>{e.length===0&&[{id:"w1",name:"Marcus Chen",score:1250,tasks:47},{id:"w2",name:"Sarah Mitchell",score:1180,tasks:42},{id:"w3",name:"James Rodriguez",score:1095,tasks:38},{id:"w4",name:"Elena Kowalski",score:980,tasks:35},{id:"w5",name:"David Park",score:920,tasks:33},{id:"w6",name:"Lisa Thompson",score:875,tasks:31},{id:"w7",name:"Mike Johnson",score:810,tasks:28},{id:"w8",name:"Anna Schmidt",score:750,tasks:26}].forEach(s=>n(s.id,s.name,s.score,s.tasks))},[e.length,n]);const i=a=>{switch(a){case 1:return"bg-yellow-500/20 text-yellow-400 border-yellow-500/50";case 2:return"bg-slate-400/20 text-slate-300 border-slate-400/50";case 3:return"bg-amber-600/20 text-amber-500 border-amber-600/50";default:return"bg-slate-800/50 text-slate-400 border-slate-700"}},r=a=>a<=3?c.jsx(xhe,{className:`w-4 h-4 ${a===1?"text-yellow-400":a===2?"text-slate-300":"text-amber-500"}`}):c.jsx("span",{className:"text-xs font-mono",children:a});return c.jsxs(Xn.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"fixed inset-4 md:inset-auto md:right-4 md:top-20 md:w-80 bg-slate-900/98 backdrop-blur-xl rounded-2xl border border-slate-700/50 shadow-2xl z-50 flex flex-col max-h-[60vh] pointer-events-auto",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-800",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(K0,{className:"w-5 h-5 text-cyan-400"}),c.jsx("h2",{className:"text-lg font-bold text-white",children:"Leaderboard"})]}),c.jsx("button",{onClick:t,className:"w-8 h-8 rounded-lg bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white flex items-center justify-center transition-colors",children:c.jsx(op,{className:"w-4 h-4"})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:e.length===0?c.jsx("div",{className:"text-center text-slate-500 py-8 text-sm",children:"No leaderboard data yet"}):e.map((a,s)=>c.jsxs("div",{className:`flex items-center gap-3 p-2 rounded-lg border ${i(s+1)}`,children:[c.jsx("div",{className:"w-6 h-6 rounded-full bg-slate-700 flex items-center justify-center",children:r(s+1)}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-white text-sm font-medium truncate",children:a.name}),c.jsxs("div",{className:"text-[10px] text-slate-500",children:[a.tasksCompleted," tasks"]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-cyan-400 font-mono font-bold text-sm",children:a.score}),c.jsx("div",{className:"text-[10px] text-slate-500",children:"pts"})]})]},a.workerId))})]})},Z4e=()=>{const t=Fe(l=>l.showMiniMap),[e,n]=z.useState({workers:[],forklifts:[]});if(z.useEffect(()=>{if(!t)return;const l=setInterval(()=>{n({workers:Mf.getAllWorkers(),forklifts:Mf.getAllForklifts()})},100);return()=>clearInterval(l)},[t]),!t)return null;const i=3,r=180,a=140,s=r/2,o=a/2;return c.jsx(Xn.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"fixed bottom-4 right-4 z-40 pointer-events-auto",children:c.jsxs("div",{className:"bg-slate-900/95 backdrop-blur-xl rounded-xl border border-cyan-500/30 overflow-hidden shadow-xl",children:[c.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border-b border-slate-800 bg-slate-800/50",children:[c.jsx(VW,{className:"w-4 h-4 text-cyan-400"}),c.jsx("span",{className:"text-xs font-medium text-white",children:"GPS Tracking"})]}),c.jsxs("div",{className:"relative bg-slate-950",style:{width:r,height:a},children:[c.jsx("div",{className:"absolute inset-0 opacity-20",children:[0,1,2,3].map(l=>c.jsxs(De.Fragment,{children:[c.jsx("div",{className:"absolute w-px bg-slate-600",style:{left:`${(l+1)*25}%`,top:0,bottom:0}}),c.jsx("div",{className:"absolute h-px bg-slate-600",style:{top:`${(l+1)*25}%`,left:0,right:0}})]},l))}),c.jsx("div",{className:"absolute left-2 top-2 text-[8px] text-slate-500",children:"Silos"}),c.jsx("div",{className:"absolute left-2 top-1/4 text-[8px] text-slate-500",children:"Mills"}),c.jsx("div",{className:"absolute left-2 bottom-1/4 text-[8px] text-slate-500",children:"Sifters"}),c.jsx("div",{className:"absolute left-2 bottom-2 text-[8px] text-slate-500",children:"Packers"}),e.workers.map(l=>c.jsx("div",{className:"absolute w-2 h-2 rounded-full bg-green-500 border border-green-300",style:{left:s+l.x*i/2,top:o-l.z*i/2,transform:"translate(-50%, -50%)"},title:l.id},l.id)),e.forklifts.map(l=>c.jsxs("div",{className:"absolute",style:{left:s+l.x*i/2,top:o-l.z*i/2,transform:"translate(-50%, -50%)"},children:[c.jsx("div",{className:"w-3 h-3 bg-amber-500 rounded-sm border border-amber-300"}),l.dirX!==void 0&&c.jsx("div",{className:"absolute w-0.5 h-2 bg-amber-300",style:{left:"50%",top:"50%",transformOrigin:"center top",transform:`translateX(-50%) rotate(${Math.atan2(l.dirX,-l.dirZ)*(180/Math.PI)}deg)`}})]},l.id))]}),c.jsxs("div",{className:"flex items-center justify-center gap-4 px-3 py-1.5 border-t border-slate-800 bg-slate-800/30",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),c.jsx("span",{className:"text-[9px] text-slate-400",children:"Workers"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-sm"}),c.jsx("span",{className:"text-[9px] text-slate-400",children:"Forklifts"})]})]})]})})},K4e=()=>{const[t,e]=z.useState(!1),n=async()=>{e(!0);try{const r=document.querySelector("canvas");if(!r){console.error("No canvas found");return}const a=document.createElement("a");a.download=`millos-screenshot-${new Date().toISOString().split("T")[0]}.png`,a.href=r.toDataURL("image/png"),a.click()}catch(r){console.error("Screenshot failed:",r)}finally{e(!1)}},i=()=>{const r=Fe.getState(),a={timestamp:new Date().toISOString(),metrics:r.metrics,safetyMetrics:r.safetyMetrics,productionTarget:r.productionTarget,totalBagsProduced:r.totalBagsProduced,achievements:r.achievements.filter(l=>l.unlockedAt),safetyIncidents:r.safetyIncidents.slice(0,20)},s=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),o=document.createElement("a");o.download=`millos-report-${new Date().toISOString().split("T")[0]}.json`,o.href=URL.createObjectURL(s),o.click()};return c.jsxs("div",{className:"flex gap-1",children:[c.jsxs("button",{onClick:n,disabled:t,className:"flex items-center gap-1.5 px-2 py-1.5 bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-lg text-xs transition-colors disabled:opacity-50",title:"Take Screenshot",children:[c.jsx(che,{className:"w-3.5 h-3.5"}),c.jsx("span",{className:"hidden sm:inline",children:"Screenshot"})]}),c.jsxs("button",{onClick:i,className:"flex items-center gap-1.5 px-2 py-1.5 bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-lg text-xs transition-colors",title:"Export Report",children:[c.jsx(zW,{className:"w-3.5 h-3.5"}),c.jsx("span",{className:"hidden sm:inline",children:"Export"})]})]})},Q4e=()=>{const t=Fe(l=>l.replayMode),e=Fe(l=>l.replayFrames),n=Fe(l=>l.currentReplayIndex),i=Fe(l=>l.setReplayMode),r=Fe(l=>l.setReplayIndex),a=Fe(l=>l.clearReplayFrames),[s,o]=z.useState(!1);return z.useEffect(()=>{if(!s||!t)return;const l=setInterval(()=>{r((n+1)%e.length)},1e3);return()=>clearInterval(l)},[s,t,n,e.length,r]),t?c.jsx(Xn.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-50 pointer-events-auto",children:c.jsx("div",{className:"bg-slate-900/95 backdrop-blur-xl rounded-xl border border-red-500/30 px-4 py-3 shadow-2xl",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),c.jsx("span",{className:"text-red-400 font-medium text-sm",children:"Replay Mode"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>r(Math.max(0,n-10)),className:"w-8 h-8 rounded-lg bg-slate-800 hover:bg-slate-700 text-white flex items-center justify-center",children:c.jsx(qW,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>o(!s),className:"w-10 h-10 rounded-lg bg-red-600 hover:bg-red-500 text-white flex items-center justify-center",children:s?c.jsx(Ihe,{className:"w-5 h-5"}):c.jsx(Lhe,{className:"w-5 h-5"})}),c.jsx("button",{onClick:()=>r(Math.min(e.length-1,n+10)),className:"w-8 h-8 rounded-lg bg-slate-800 hover:bg-slate-700 text-white flex items-center justify-center",children:c.jsx(WW,{className:"w-4 h-4"})})]}),c.jsxs("div",{className:"flex-1 min-w-[150px]",children:[c.jsx("input",{type:"range",min:0,max:e.length-1,value:n,onChange:l=>r(parseInt(l.target.value)),className:"w-full h-2 bg-slate-800 rounded-lg appearance-none cursor-pointer accent-red-500"}),c.jsxs("div",{className:"flex justify-between text-[10px] text-slate-500 mt-0.5",children:[c.jsxs("span",{children:["Frame ",n+1]}),c.jsxs("span",{children:[e.length," total"]})]})]}),c.jsx("button",{onClick:()=>{i(!1),a()},className:"px-3 py-1.5 bg-slate-800 hover:bg-slate-700 text-white rounded-lg text-xs font-medium",children:"Exit Replay"})]})})}):null},Jy=[{id:"cam-1",name:"Silo Area",position:[-15,12,-22],lookAt:[0,0,-22]},{id:"cam-2",name:"Milling Floor",position:[20,10,-6],lookAt:[0,2,-6]},{id:"cam-3",name:"Sifter Platform",position:[-18,15,6],lookAt:[0,9,6]},{id:"cam-4",name:"Packing Line",position:[15,8,20],lookAt:[0,1,19]},{id:"cam-5",name:"Loading Dock",position:[-20,6,25],lookAt:[0,0,25]},{id:"cam-6",name:"Overview",position:[25,20,0],lookAt:[0,5,0]}],J4e=({className:t=""})=>{const[e,n]=z.useState(new Date().toLocaleTimeString("en-US",{hour12:!1}));return z.useEffect(()=>{const i=setInterval(()=>{n(new Date().toLocaleTimeString("en-US",{hour12:!1}))},1e3);return()=>clearInterval(i)},[]),c.jsx("span",{className:t,children:e})},EV=({camId:t,camName:e,isActive:n,onClick:i,size:r})=>{const a=z.useRef(null),s=Fe(u=>u.registerCameraContainer),o=Fe(u=>u.unregisterCameraContainer);z.useEffect(()=>(a.current&&s(t,a.current),()=>{o(t)}),[t,s,o]);const l=r==="small";return c.jsxs("button",{onClick:i,className:`relative rounded overflow-hidden group ${n?"ring-2 ring-cyan-500":""} ${l?"w-full h-full":"w-full"}`,style:l?void 0:{height:120},children:[c.jsx("div",{ref:a,className:"absolute inset-0 bg-slate-950","data-camera-id":t}),c.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-white/5 to-transparent opacity-30",style:{backgroundSize:"100% 4px"}}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"}),c.jsxs("div",{className:`absolute ${l?"top-1 right-1":"top-2 right-2"} flex items-center gap-1 ${l?"":"bg-black/50 px-1.5 py-0.5 rounded"}`,children:[c.jsx("span",{className:`${l?"w-1.5 h-1.5":"w-2 h-2"} bg-red-500 rounded-full animate-pulse`}),c.jsx("span",{className:`${l?"text-[8px]":"text-[10px]"} text-red-400 font-mono`,children:l?"REC":"LIVE"})]}),c.jsx("div",{className:`absolute ${l?"top-1 left-1":"bottom-2 left-2 bg-black/50 px-1.5 py-0.5 rounded"}`,children:c.jsx(J4e,{className:`${l?"text-[8px]":"text-[10px]"} text-green-400 font-mono`})}),c.jsx("div",{className:`absolute ${l?"bottom-1 left-1 right-1":"bottom-2 right-2 bg-black/50 px-1.5 py-0.5 rounded"}`,children:c.jsx("span",{className:`${l?"text-[9px]":"text-[10px]"} text-white font-medium ${l?"truncate block":"font-mono"}`,children:l?e:t.toUpperCase()})})]})]})},eje=()=>{var s;const t=Fe(o=>o.showSecurityCameras),e=Fe(o=>o.setShowSecurityCameras),n=Fe(o=>o.activeCameraId),i=Fe(o=>o.setActiveCameraId),[r,a]=z.useState(!0);return t?c.jsx(Xn.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"fixed bottom-4 left-4 z-50 pointer-events-auto",children:c.jsxs("div",{className:"bg-slate-900/95 backdrop-blur-xl rounded-xl border border-slate-700/50 shadow-2xl overflow-hidden",children:[c.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-slate-800 bg-slate-800/50",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Qj,{className:"w-4 h-4 text-red-400"}),c.jsx("span",{className:"text-sm font-medium text-white",children:"Security Cameras"}),c.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:()=>a(!r),className:`w-6 h-6 rounded flex items-center justify-center text-xs ${r?"bg-cyan-600 text-white":"bg-slate-700 text-slate-400"}`,title:"Grid view",children:c.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),c.jsx("button",{onClick:()=>e(!1),className:"w-6 h-6 rounded bg-slate-700 hover:bg-slate-600 text-slate-400 hover:text-white flex items-center justify-center",children:c.jsx(op,{className:"w-3.5 h-3.5"})})]})]}),r?c.jsx("div",{className:"grid grid-cols-3 gap-1 p-2",style:{width:360,height:240},children:Jy.slice(0,6).map(o=>c.jsx(EV,{camId:o.id,camName:o.name,isActive:n===o.id,onClick:()=>i(n===o.id?null:o.id),size:"small"},o.id))}):c.jsx("div",{className:"p-2 space-y-1 max-h-60 overflow-y-auto",style:{width:200},children:Jy.map(o=>c.jsxs("button",{onClick:()=>i(n===o.id?null:o.id),className:`w-full flex items-center gap-2 px-2 py-1.5 rounded transition-colors ${n===o.id?"bg-cyan-600 text-white":"bg-slate-800 text-slate-300 hover:bg-slate-700"}`,children:[c.jsx(Qj,{className:"w-3.5 h-3.5"}),c.jsx("span",{className:"text-xs flex-1 text-left truncate",children:o.name}),c.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"})]},o.id))}),n&&c.jsx("div",{className:"border-t border-slate-800 p-2",children:c.jsx(EV,{camId:`${n}-pip`,camName:((s=Jy.find(o=>o.id===n))==null?void 0:s.name)||"",isActive:!1,onClick:()=>{},size:"large"})})]})}):null},tje=()=>{const[t,e]=z.useState(!1),[n,i]=z.useState(!1),r=Fe(g=>g.showMiniMap),a=Fe(g=>g.setShowMiniMap),s=Fe(g=>g.showSecurityCameras),o=Fe(g=>g.setShowSecurityCameras),l=Fe(g=>g.showGamificationBar),u=Fe(g=>g.setShowGamificationBar),p=Fe(g=>g.achievements).filter(g=>g.unlockedAt).length;return l?c.jsxs(c.Fragment,{children:[c.jsx(Xn.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},className:"fixed right-4 top-1/2 -translate-y-1/2 z-30 pointer-events-auto",children:c.jsxs("div",{className:"flex flex-col gap-2 bg-slate-900/90 backdrop-blur-xl rounded-xl border border-slate-700/50 p-2",children:[c.jsx("button",{onClick:()=>u(!1),className:"w-10 h-10 rounded-lg flex items-center justify-center transition-colors bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-white",title:"Close Quick Actions",children:c.jsx(op,{className:"w-4 h-4"})}),c.jsx("div",{className:"border-t border-slate-700 my-1"}),c.jsxs("button",{onClick:()=>e(!t),className:`w-10 h-10 rounded-lg flex items-center justify-center transition-colors relative ${t?"bg-yellow-600 text-white":"bg-slate-800 text-yellow-400 hover:bg-slate-700"}`,title:"Achievements",children:[c.jsx(tN,{className:"w-5 h-5"}),p>0&&c.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-yellow-500 text-black text-[10px] font-bold rounded-full flex items-center justify-center",children:p})]}),c.jsx("button",{onClick:()=>i(!n),className:`w-10 h-10 rounded-lg flex items-center justify-center transition-colors ${n?"bg-cyan-600 text-white":"bg-slate-800 text-cyan-400 hover:bg-slate-700"}`,title:"Leaderboard",children:c.jsx(K0,{className:"w-5 h-5"})}),c.jsx("button",{onClick:()=>a(!r),className:`w-10 h-10 rounded-lg flex items-center justify-center transition-colors ${r?"bg-green-600 text-white":"bg-slate-800 text-green-400 hover:bg-slate-700"}`,title:"GPS Map",children:c.jsx(VW,{className:"w-5 h-5"})}),c.jsxs("button",{onClick:()=>o(!s),className:`w-10 h-10 rounded-lg flex items-center justify-center transition-colors relative ${s?"bg-red-600 text-white":"bg-slate-800 text-red-400 hover:bg-slate-700"}`,title:"Security Cameras",children:[c.jsx(Qj,{className:"w-5 h-5"}),s&&c.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-400 rounded-full animate-pulse"})]}),c.jsx("div",{className:"pt-2 border-t border-slate-700",children:c.jsx(K4e,{})})]})}),c.jsxs(_a,{children:[t&&c.jsx($4e,{onClose:()=>e(!1)}),n&&c.jsx(Y4e,{onClose:()=>i(!1)})]}),c.jsx(eje,{})]}):c.jsx(Xn.button,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},onClick:()=>u(!0),className:"fixed right-4 top-1/2 -translate-y-1/2 z-30 pointer-events-auto w-10 h-10 bg-slate-900/90 backdrop-blur-xl rounded-xl border border-slate-700/50 flex items-center justify-center text-slate-400 hover:text-white hover:bg-slate-800 transition-colors",title:"Show Quick Actions",children:c.jsx(nN,{className:"w-5 h-5"})})},hj=[{value:0,label:"Paused",display:"II"},{value:1,label:"1x",display:"1x"},{value:60,label:"60x",display:"60x"},{value:300,label:"300x",display:"5m/s"}],nje=De.memo(({theme:t})=>{const[e,n]=z.useState(()=>{const g=new Date;return g.setHours(6,0,0,0),g}),[i,r]=z.useState(2),a=hj[i].value;z.useEffect(()=>{if(a===0)return;const g=setInterval(()=>{n(x=>{const b=new Date(x);return b.setSeconds(b.getSeconds()+a),b})},1e3);return()=>clearInterval(g)},[a]);const s=e.getHours(),o=z.useMemo(()=>s>=6&&s<14?{name:"Day Shift",color:"text-yellow-400",Icon:zD}:s>=14&&s<22?{name:"Evening Shift",color:"text-orange-400",Icon:ide}:{name:"Night Shift",color:"text-blue-400",Icon:whe},[s]),l=e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>r(g=>g===0?2:0),h=()=>r(g=>{const x=g+1;return x>=hj.length?1:x}),p=hj[i].label;return c.jsxs("div",{className:`flex items-center justify-between rounded-lg px-2 py-1.5 mb-2 border ${t==="light"?"bg-slate-100 border-slate-200":"bg-slate-900/50 border-slate-800"}`,children:[c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(o.Icon,{className:`w-5 h-5 ${o.color}`}),c.jsxs("div",{children:[c.jsx("div",{className:`text-lg font-mono font-bold tracking-wider leading-tight ${a===0?t==="light"?"text-slate-400":"text-slate-500":t==="light"?"text-slate-800":"text-white"}`,children:l}),c.jsx("div",{className:`text-[9px] font-medium uppercase tracking-wider ${o.color}`,children:o.name})]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:u,className:`w-6 h-6 rounded flex items-center justify-center transition-all ${a===0?"bg-cyan-500/20 text-cyan-400":t==="light"?"bg-slate-200 text-slate-500 hover:bg-slate-300 hover:text-slate-700":"bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-white"}`,title:a===0?"Resume":"Pause",children:a===0?c.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M8 5v14l11-7z"})}):c.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M6 4h4v16H6zm8 0h4v16h-4z"})})}),c.jsx("button",{onClick:h,className:`px-1.5 h-6 rounded text-[9px] font-mono font-bold transition-all min-w-[36px] ${t==="light"?"bg-slate-200 text-slate-500 hover:bg-slate-300 hover:text-slate-700":"bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-white"}`,title:"Cycle speed",children:p})]})]})});function ije(){const[,t]=z.useState({});return z.useEffect(()=>wt.subscribe(()=>t({})),[]),{muted:wt.muted,volume:wt.volume,setMuted:e=>{wt.muted=e},setVolume:e=>{wt.volume=e},musicEnabled:wt.musicEnabled,musicVolume:wt.musicVolume,currentTrack:wt.currentTrack,setMusicEnabled:e=>{wt.musicEnabled=e},setMusicVolume:e=>{wt.musicVolume=e},nextTrack:()=>wt.nextTrack(),prevTrack:()=>wt.prevTrack(),startMusic:()=>wt.startMusic(),ttsEnabled:wt.ttsEnabled,setTTSEnabled:e=>{wt.ttsEnabled=e}}}const rje=()=>{const t=Fe(h=>h.safetyMetrics),e=Fe(h=>h.theme),[n,i]=z.useState(t),[r,a]=z.useState(!1),[s,o]=z.useState(!1);z.useEffect(()=>{t.safetyStops>n.safetyStops&&(a(!0),setTimeout(()=>a(!1),500)),t.workerEvasions>n.workerEvasions&&(o(!0),setTimeout(()=>o(!1),500)),i(t)},[t,n]);const l=z.useMemo(()=>{if(!t.lastIncidentTime)return"No incidents";const h=Math.floor((Date.now()-t.lastIncidentTime)/1e3);if(h<60)return`${h}s ago`;const p=Math.floor(h/60);return p<60?`${p}m ago`:`${Math.floor(p/60)}h ago`},[t.lastIncidentTime]),u=e==="light"?"bg-slate-100":"bg-slate-800/50";return c.jsxs("div",{className:`rounded-lg p-2 mb-2 border ${e==="light"?"bg-slate-50 border-slate-200":"bg-slate-900/50 border-slate-800"}`,children:[c.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[c.jsx(Jm,{className:"w-3.5 h-3.5 text-green-500"}),c.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider ${e==="light"?"text-slate-500":"text-slate-400"}`,children:"Safety Stats"})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[c.jsxs("div",{className:`text-center p-1.5 rounded transition-all ${r?"bg-red-500/30 scale-105":u}`,children:[c.jsx("div",{className:"flex items-center justify-center gap-1 mb-0.5",children:c.jsx(S1,{className:"w-3 h-3 text-amber-500"})}),c.jsx("div",{className:"text-lg font-bold text-amber-500 font-mono",children:t.safetyStops}),c.jsx("div",{className:`text-[8px] uppercase ${e==="light"?"text-slate-400":"text-slate-500"}`,children:"Stops"})]}),c.jsxs("div",{className:`text-center p-1.5 rounded transition-all ${s?"bg-blue-500/30 scale-105":u}`,children:[c.jsx("div",{className:"flex items-center justify-center gap-1 mb-0.5",children:c.jsx(Z_,{className:"w-3 h-3 text-blue-500"})}),c.jsx("div",{className:"text-lg font-bold text-blue-500 font-mono",children:t.workerEvasions}),c.jsx("div",{className:`text-[8px] uppercase ${e==="light"?"text-slate-400":"text-slate-500"}`,children:"Evasions"})]}),c.jsxs("div",{className:`text-center p-1.5 rounded ${u}`,children:[c.jsx("div",{className:"flex items-center justify-center gap-1 mb-0.5",children:c.jsx(Qo,{className:"w-3 h-3 text-green-500"})}),c.jsx("div",{className:"text-[10px] font-bold text-green-500 leading-tight",children:l}),c.jsx("div",{className:`text-[8px] uppercase ${e==="light"?"text-slate-400":"text-slate-500"}`,children:"Last Event"})]})]})]})},aje=()=>{const[t,e]=z.useState(!1),n=Fe(M=>M.emergencyActive),i=Fe(M=>M.emergencyDrillMode),r=Fe(M=>M.startEmergencyDrill),a=Fe(M=>M.endEmergencyDrill),s=Fe(M=>M.shiftChangeActive),o=Fe(M=>M.currentShift),l=Fe(M=>M.triggerShiftChange),u=Fe(M=>M.weather),h=Fe(M=>M.setWeather),p=Fe(M=>M.showHeatMap),g=Fe(M=>M.setShowHeatMap),x=Fe(M=>M.clearHeatMap),b=[{value:"clear",label:"Clear",icon:"sun"},{value:"cloudy",label:"Cloudy",icon:"cloud"},{value:"rain",label:"Rain",icon:"rain"},{value:"storm",label:"Storm",icon:"bolt"}];return c.jsxs("div",{className:"border-t border-slate-700/50 pt-2 mt-2",children:[c.jsxs("button",{onClick:()=>e(!t),className:"w-full flex items-center justify-between text-xs font-medium text-slate-300 hover:text-white transition-colors py-1",children:[c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(Qo,{className:"w-4 h-4 text-orange-400"}),"Emergency & Environment"]}),t?c.jsx(Cu,{className:"w-4 h-4"}):c.jsx(Cc,{className:"w-4 h-4"})]}),c.jsx(_a,{children:t&&c.jsxs(Xn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3 pt-2 overflow-hidden",children:[c.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-2",children:[c.jsx("div",{className:"text-[10px] text-slate-400 uppercase tracking-wider mb-2",children:"Emergency Drill"}),c.jsx("button",{onClick:()=>i?a():r(),className:`w-full py-2 px-3 rounded-lg font-bold text-sm transition-all ${i?"bg-red-600 hover:bg-red-700 text-white animate-pulse":n?"bg-orange-600 text-white cursor-not-allowed":"bg-orange-500 hover:bg-orange-600 text-white"}`,disabled:n&&!i,children:i?"END DRILL":n?"EMERGENCY ACTIVE":"START DRILL"}),c.jsx("p",{className:"text-[9px] text-slate-500 mt-1",children:i?"Workers responding to drill...":"Test emergency response procedures"})]}),c.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-2",children:[c.jsxs("div",{className:"text-[10px] text-slate-400 uppercase tracking-wider mb-2",children:["Shift Change",c.jsxs("span",{className:"ml-2 text-blue-400 capitalize",children:["(",o,")"]})]}),c.jsx("button",{onClick:()=>l(),className:`w-full py-2 px-3 rounded-lg font-bold text-sm transition-all ${s?"bg-blue-600 text-white animate-pulse cursor-not-allowed":n?"bg-slate-600 text-slate-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white"}`,disabled:s||n,children:s?"SHIFT CHANGE IN PROGRESS...":"TRIGGER SHIFT CHANGE"}),c.jsx("p",{className:"text-[9px] text-slate-500 mt-1",children:s?"Workers leaving and new shift arriving...":"Workers will leave and return refreshed"})]}),c.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-2",children:[c.jsx("div",{className:"text-[10px] text-slate-400 uppercase tracking-wider mb-2",children:"Weather"}),c.jsx("div",{className:"grid grid-cols-4 gap-1",children:b.map(M=>c.jsx("button",{onClick:()=>h(M.value),className:`py-1.5 px-2 rounded text-[10px] font-medium transition-all ${u===M.value?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:M.label},M.value))})]}),c.jsx("div",{className:"bg-slate-800/50 rounded-lg p-2",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-[10px] text-slate-400 uppercase tracking-wider",children:"Worker Heat Map"}),c.jsx("p",{className:"text-[9px] text-slate-500",children:"Shows high-traffic areas"})]}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:()=>g(!p),className:`py-1 px-3 rounded text-[10px] font-medium transition-all ${p?"bg-green-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:p?"ON":"OFF"}),c.jsx("button",{onClick:()=>x(),className:"py-1 px-2 rounded text-[10px] font-medium bg-slate-700 text-slate-300 hover:bg-slate-600",children:"Clear"})]})]})})]})})]})},sje=()=>{const[t,e]=z.useState(!1),n=Fe(u=>u.graphics),i=Fe(u=>u.setGraphicsQuality),r=Fe(u=>u.setGraphicsSetting),a=Fe(u=>u.theme),s={low:"text-slate-400",medium:"text-yellow-400",high:"text-cyan-400",ultra:"text-purple-400"},o=[{key:"enableSSAO",label:"Ambient Occlusion",icon:c.jsx(Y_,{className:"w-3 h-3"}),category:"Post-Processing"},{key:"enableBloom",label:"Bloom Glow",icon:c.jsx(Qhe,{className:"w-3 h-3"}),category:"Post-Processing"},{key:"enableVignette",label:"Vignette",icon:c.jsx(Mhe,{className:"w-3 h-3"}),category:"Post-Processing"},{key:"enableChromaticAberration",label:"Chromatic Aberration",icon:c.jsx(KM,{className:"w-3 h-3"}),category:"Post-Processing"},{key:"enableFilmGrain",label:"Film Grain",icon:c.jsx(Um,{className:"w-3 h-3"}),category:"Post-Processing"},{key:"enableDustParticles",label:"Dust Particles",icon:c.jsx(Um,{className:"w-3 h-3"}),category:"Particles"},{key:"enableGrainFlow",label:"Grain Flow",icon:c.jsx(Um,{className:"w-3 h-3"}),category:"Particles"},{key:"enableAtmosphericHaze",label:"Atmospheric Haze",icon:c.jsx(Um,{className:"w-3 h-3"}),category:"Particles"},{key:"enableMachineVibration",label:"Machine Vibration",icon:c.jsx(Jm,{className:"w-3 h-3"}),category:"Machines"},{key:"enableProceduralTextures",label:"Detailed Textures",icon:c.jsx(KM,{className:"w-3 h-3"}),category:"Machines"},{key:"enableWeathering",label:"Weathering Effects",icon:c.jsx(Um,{className:"w-3 h-3"}),category:"Machines"},{key:"enableLightShafts",label:"Light Shafts",icon:c.jsx(zD,{className:"w-3 h-3"}),category:"Lighting"},{key:"enableContactShadows",label:"Contact Shadows",icon:c.jsx(KM,{className:"w-3 h-3"}),category:"Lighting"},{key:"enableHighResShadows",label:"High-Res Shadows",icon:c.jsx(Y_,{className:"w-3 h-3"}),category:"Lighting"}],l=["Post-Processing","Particles","Machines","Lighting"];return c.jsxs("div",{className:`border-t pt-2 mt-2 ${a==="light"?"border-slate-200":"border-slate-700/50"}`,children:[c.jsxs("button",{onClick:()=>e(!t),className:`w-full flex items-center justify-between text-xs font-medium transition-colors py-1 ${a==="light"?"text-slate-600 hover:text-slate-800":"text-slate-300 hover:text-white"}`,children:[c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(Vhe,{className:"w-4 h-4 text-purple-400"}),"Graphics Quality",c.jsx("span",{className:`text-[10px] font-bold uppercase ${s[n.quality]}`,children:n.quality})]}),t?c.jsx(Cu,{className:"w-4 h-4"}):c.jsx(Cc,{className:"w-4 h-4"})]}),c.jsx(_a,{children:t&&c.jsxs(Xn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3 pt-2 overflow-hidden",children:[c.jsx("div",{className:"flex gap-1",children:["low","medium","high","ultra"].map(u=>c.jsx("button",{onClick:()=>i(u),className:`flex-1 py-1.5 rounded text-[10px] font-bold uppercase tracking-wider transition-all ${n.quality===u?u==="low"?"bg-slate-600 text-white":u==="medium"?"bg-yellow-600 text-white":u==="high"?"bg-cyan-600 text-white":"bg-purple-600 text-white":a==="light"?"bg-slate-100 text-slate-500 hover:bg-slate-200":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:u},u))}),c.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2 pr-1",children:l.map(u=>c.jsxs("div",{children:[c.jsx("div",{className:`text-[9px] uppercase tracking-wider mb-1 ${a==="light"?"text-slate-400":"text-slate-500"}`,children:u}),c.jsx("div",{className:"space-y-0.5",children:o.filter(h=>h.category===u).map(({key:h,label:p,icon:g})=>c.jsxs("button",{onClick:()=>r(h,!n[h]),className:`w-full flex items-center gap-2 px-2 py-1 rounded text-xs transition-all ${n[h]?a==="light"?"bg-slate-200 text-slate-800":"bg-slate-700/50 text-white":a==="light"?"bg-slate-100 text-slate-500 hover:bg-slate-200":"bg-slate-800/30 text-slate-500 hover:bg-slate-800/50"}`,children:[c.jsx("span",{className:n[h]?"text-green-500":a==="light"?"text-slate-400":"text-slate-600",children:g}),c.jsx("span",{className:"flex-1 text-left",children:p}),c.jsx("span",{className:`w-2 h-2 rounded-full ${n[h]?"bg-green-500":a==="light"?"bg-slate-300":"bg-slate-600"}`})]},h))})]},u))}),c.jsxs("div",{className:`border-t pt-2 ${a==="light"?"border-slate-200":"border-slate-800"}`,children:[c.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[c.jsxs("span",{className:`flex items-center gap-1 ${a==="light"?"text-slate-500":"text-slate-400"}`,children:[c.jsx(Um,{className:"w-3 h-3"}),"Particle Count"]}),c.jsx("span",{className:"text-cyan-500 font-mono font-bold",children:n.dustParticleCount})]}),c.jsx("input",{type:"range",min:"0",max:"500",step:"25",value:n.dustParticleCount,onChange:u=>r("dustParticleCount",parseInt(u.target.value)),disabled:!n.enableDustParticles,className:`w-full h-2 rounded-lg appearance-none cursor-pointer accent-cyan-500 ${a==="light"?"bg-slate-200":"bg-slate-800"} ${n.enableDustParticles?"":"opacity-50"}`}),c.jsxs("div",{className:`flex justify-between text-[9px] mt-0.5 ${a==="light"?"text-slate-400":"text-slate-600"}`,children:[c.jsx("span",{children:"0"}),c.jsx("span",{children:"250"}),c.jsx("span",{children:"500"})]})]}),c.jsxs("div",{className:`border-t pt-2 ${a==="light"?"border-slate-200":"border-slate-800"}`,children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(Jj,{className:"w-3.5 h-3.5 text-green-500"}),c.jsx("span",{className:`text-[9px] uppercase tracking-wider ${a==="light"?"text-slate-400":"text-slate-500"}`,children:"Performance"})]}),c.jsx(F4e,{showDetailed:!0})]}),c.jsxs("div",{className:`border-t pt-2 ${a==="light"?"border-slate-200":"border-slate-800"}`,children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(GW,{className:"w-3.5 h-3.5 text-blue-500"}),c.jsx("span",{className:`text-[9px] uppercase tracking-wider ${a==="light"?"text-slate-400":"text-slate-500"}`,children:"Shortcuts"})]}),c.jsx("div",{className:`text-[8px] uppercase tracking-wider mb-1 ${a==="light"?"text-slate-400":"text-slate-600"}`,children:"Quality"}),c.jsxs("div",{className:"grid grid-cols-4 gap-1 text-[10px] mb-2",children:[c.jsx("div",{className:`flex items-center justify-center rounded px-1 py-1 ${a==="light"?"bg-slate-100":"bg-slate-800/50"}`,children:c.jsx("kbd",{className:`px-1 py-0.5 rounded font-mono text-[9px] ${a==="light"?"bg-slate-200 text-slate-600":"bg-slate-700 text-slate-300"}`,children:"F1"})}),c.jsx("div",{className:`flex items-center justify-center rounded px-1 py-1 ${a==="light"?"bg-slate-100":"bg-slate-800/50"}`,children:c.jsx("kbd",{className:`px-1 py-0.5 rounded font-mono text-[9px] ${a==="light"?"bg-yellow-100 text-yellow-700":"bg-yellow-900/50 text-yellow-300"}`,children:"F2"})}),c.jsx("div",{className:`flex items-center justify-center rounded px-1 py-1 ${a==="light"?"bg-slate-100":"bg-slate-800/50"}`,children:c.jsx("kbd",{className:`px-1 py-0.5 rounded font-mono text-[9px] ${a==="light"?"bg-cyan-100 text-cyan-700":"bg-cyan-900/50 text-cyan-300"}`,children:"F3"})}),c.jsx("div",{className:`flex items-center justify-center rounded px-1 py-1 ${a==="light"?"bg-slate-100":"bg-slate-800/50"}`,children:c.jsx("kbd",{className:`px-1 py-0.5 rounded font-mono text-[9px] ${a==="light"?"bg-purple-100 text-purple-700":"bg-purple-900/50 text-purple-300"}`,children:"F4"})})]}),c.jsx("div",{className:`text-[8px] uppercase tracking-wider mb-1 ${a==="light"?"text-slate-400":"text-slate-600"}`,children:"Controls"}),c.jsxs("div",{className:"grid grid-cols-2 gap-1 text-[10px]",children:[c.jsxs("div",{className:`flex items-center gap-1.5 rounded px-1.5 py-1 ${a==="light"?"bg-slate-100":"bg-slate-800/50"}`,children:[c.jsx("kbd",{className:`px-1.5 py-0.5 rounded font-mono ${a==="light"?"bg-slate-200 text-slate-600":"bg-slate-700 text-slate-300"}`,children:"P"}),c.jsx("span",{className:a==="light"?"text-slate-500":"text-slate-400",children:"Pause"})]}),c.jsxs("div",{className:`flex items-center gap-1.5 rounded px-1.5 py-1 ${a==="light"?"bg-slate-100":"bg-slate-800/50"}`,children:[c.jsx("kbd",{className:`px-1.5 py-0.5 rounded font-mono ${a==="light"?"bg-slate-200 text-slate-600":"bg-slate-700 text-slate-300"}`,children:"A"}),c.jsx("span",{className:a==="light"?"text-slate-500":"text-slate-400",children:"AI Panel"})]}),c.jsxs("div",{className:`flex items-center gap-1.5 rounded px-1.5 py-1 ${a==="light"?"bg-slate-100":"bg-slate-800/50"}`,children:[c.jsx("kbd",{className:`px-1.5 py-0.5 rounded font-mono ${a==="light"?"bg-slate-200 text-slate-600":"bg-slate-700 text-slate-300"}`,children:"Z"}),c.jsx("span",{className:a==="light"?"text-slate-500":"text-slate-400",children:"Zones"})]}),c.jsxs("div",{className:`flex items-center gap-1.5 rounded px-1.5 py-1 ${a==="light"?"bg-slate-100":"bg-slate-800/50"}`,children:[c.jsx("kbd",{className:`px-1.5 py-0.5 rounded font-mono ${a==="light"?"bg-slate-200 text-slate-600":"bg-slate-700 text-slate-300"}`,children:"H"}),c.jsx("span",{className:a==="light"?"text-slate-500":"text-slate-400",children:"Heatmap"})]}),c.jsxs("div",{className:`flex items-center gap-1.5 rounded px-1.5 py-1 ${a==="light"?"bg-slate-100":"bg-slate-800/50"}`,children:[c.jsx("kbd",{className:`px-1.5 py-0.5 rounded font-mono ${a==="light"?"bg-slate-200 text-slate-600":"bg-slate-700 text-slate-300"}`,children:"+/-"}),c.jsx("span",{className:a==="light"?"text-slate-500":"text-slate-400",children:"Speed"})]}),c.jsxs("div",{className:`flex items-center gap-1.5 rounded px-1.5 py-1 ${a==="light"?"bg-slate-100":"bg-slate-800/50"}`,children:[c.jsx("kbd",{className:`px-1.5 py-0.5 rounded font-mono ${a==="light"?"bg-slate-200 text-slate-600":"bg-slate-700 text-slate-300"}`,children:"ESC"}),c.jsx("span",{className:a==="light"?"text-slate-500":"text-slate-400",children:"Close"})]})]})]}),c.jsxs("div",{className:`text-[9px] pt-1 border-t ${a==="light"?"border-slate-200 text-slate-400":"border-slate-800 text-slate-500"}`,children:[c.jsxs("p",{children:[c.jsx("span",{className:a==="light"?"text-slate-500":"text-slate-400",children:"Low:"})," Best for older devices"]}),c.jsxs("p",{children:[c.jsx("span",{className:"text-yellow-500",children:"Medium:"})," Balanced performance"]}),c.jsxs("p",{children:[c.jsx("span",{className:"text-cyan-500",children:"High:"})," Enhanced visuals"]}),c.jsxs("p",{children:[c.jsx("span",{className:"text-purple-500",children:"Ultra:"})," Maximum quality"]})]}),c.jsxs("button",{onClick:()=>{localStorage.removeItem("millos-settings"),i("medium"),window.location.reload()},className:`w-full mt-2 py-1.5 rounded text-[10px] font-medium transition-all flex items-center justify-center gap-1 ${a==="light"?"bg-red-100 text-red-600 hover:bg-red-200":"bg-red-900/50 text-red-300 hover:bg-red-800/50"}`,children:[c.jsx(Fhe,{className:"w-3 h-3"}),"Reset All Settings"]})]})})]})},oje=()=>{const t=Fe(r=>r.forkliftEmergencyStop),e=Fe(r=>r.setForkliftEmergencyStop),n=Fe(r=>r.addSafetyIncident),i=()=>{const r=!t;e(r),r&&(wt.playEmergencyStop(),n({type:"emergency",description:"Emergency stop activated - all forklifts halted"}))};return c.jsxs("button",{onClick:i,className:`w-full py-2.5 rounded-lg font-bold text-sm transition-all flex items-center justify-center gap-2 ${t?"bg-red-600 hover:bg-red-500 text-white shadow-lg shadow-red-500/30 animate-pulse":"bg-slate-800 text-red-400 hover:bg-red-900/50 border border-red-800"}`,children:[c.jsx(eN,{className:"w-5 h-5"}),t?"RELEASE E-STOP":"EMERGENCY STOP"]})},lje=()=>{const[t,e]=z.useState(!1),n=Fe(o=>o.safetyIncidents),i=Fe(o=>o.clearSafetyIncidents),r=Fe(o=>o.theme),a=o=>new Date(o).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),s=o=>{if(r==="light")switch(o){case"emergency":return"text-red-600 bg-red-100";case"stop":return"text-amber-600 bg-amber-100";case"evasion":return"text-blue-600 bg-blue-100";case"near_miss":return"text-orange-600 bg-orange-100";default:return"text-slate-600 bg-slate-100"}switch(o){case"emergency":return"text-red-400 bg-red-500/20";case"stop":return"text-amber-400 bg-amber-500/20";case"evasion":return"text-blue-400 bg-blue-500/20";case"near_miss":return"text-orange-400 bg-orange-500/20";default:return"text-slate-400 bg-slate-500/20"}};return c.jsxs("div",{className:`border-t pt-2 mt-2 ${r==="light"?"border-slate-200":"border-slate-700/50"}`,children:[c.jsxs("button",{onClick:()=>e(!t),className:`w-full flex items-center justify-between text-xs font-medium transition-colors py-1 ${r==="light"?"text-slate-600 hover:text-slate-800":"text-slate-300 hover:text-white"}`,children:[c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(ohe,{className:"w-4 h-4 text-blue-500"}),"Incident Log (",n.length,")"]}),t?c.jsx(Cu,{className:"w-4 h-4"}):c.jsx(Cc,{className:"w-4 h-4"})]}),c.jsx(_a,{children:t&&c.jsx(Xn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-1 pt-2 overflow-hidden",children:n.length===0?c.jsx("div",{className:`text-center text-xs py-2 ${r==="light"?"text-slate-400":"text-slate-500"}`,children:"No incidents recorded"}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1",children:n.slice(0,20).map(o=>c.jsxs("div",{className:`flex items-start gap-2 p-1.5 rounded text-[10px] ${s(o.type)}`,children:[c.jsx($_,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"font-medium",children:a(o.timestamp)}),c.jsx("div",{className:`truncate ${r==="light"?"text-slate-600":"text-slate-300"}`,children:o.description})]})]},o.id))}),n.length>0&&c.jsx("button",{onClick:i,className:`w-full text-[10px] transition-colors py-1 ${r==="light"?"text-slate-400 hover:text-red-500":"text-slate-500 hover:text-red-400"}`,children:"Clear history"})]})})})]})},cje=()=>{const[t,e]=z.useState(!1),n=Fe(A=>A.safetyIncidents),i=Fe(A=>A.forkliftMetrics),r=Fe(A=>A.incidentHeatMap),a=Fe(A=>A.showIncidentHeatMap),s=Fe(A=>A.setShowIncidentHeatMap),o=Fe(A=>A.clearIncidentHeatMap),l=Fe(A=>A.resetForkliftMetrics),u=Fe(A=>A.theme),h=new Date;h.setHours(0,0,0,0);const p=h.getTime(),g=p-10080*60*1e3,x=n.filter(A=>A.timestamp>=p),b=n.filter(A=>A.timestamp>=g),S=Object.keys(i).map(A=>{const E=i[A],j=E.totalMovingTime+E.totalStoppedTime,R=j>0?E.totalMovingTime/j*100:100;return{id:A,efficiency:R,movingTime:E.totalMovingTime,stoppedTime:E.totalStoppedTime}}),T=()=>{const A={generatedAt:new Date().toISOString(),period:{start:new Date(g).toISOString(),end:new Date().toISOString()},summary:{totalIncidents:b.length,byType:{emergency:b.filter(C=>C.type==="emergency").length,nearMiss:b.filter(C=>C.type==="near_miss").length,stop:b.filter(C=>C.type==="stop").length,evasion:b.filter(C=>C.type==="evasion").length}},forkliftEfficiency:S,incidents:b.map(C=>({timestamp:new Date(C.timestamp).toISOString(),type:C.type,description:C.description,location:C.location})),hotspots:r.slice(0,10).map(C=>({location:{x:C.x,z:C.z},intensity:C.intensity,type:C.type}))},E=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),j=URL.createObjectURL(E),R=document.createElement("a");R.href=j,R.download=`safety-report-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(R),R.click(),document.body.removeChild(R),URL.revokeObjectURL(j)};return c.jsxs("div",{className:`border-t pt-2 mt-2 ${u==="light"?"border-slate-200":"border-slate-700/50"}`,children:[c.jsxs("button",{onClick:()=>e(!t),className:`w-full flex items-center justify-between text-xs font-medium transition-colors py-1 ${u==="light"?"text-slate-600 hover:text-slate-800":"text-slate-300 hover:text-white"}`,children:[c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(K0,{className:"w-4 h-4 text-cyan-500"}),"Safety Analytics"]}),t?c.jsx(Cu,{className:"w-4 h-4"}):c.jsx(Cc,{className:"w-4 h-4"})]}),c.jsx(_a,{children:t&&c.jsxs(Xn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3 pt-2 overflow-hidden",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("div",{className:`rounded-lg p-2 ${u==="light"?"bg-slate-100":"bg-slate-800/50"}`,children:[c.jsx("div",{className:`text-[10px] uppercase tracking-wider ${u==="light"?"text-slate-500":"text-slate-400"}`,children:"Today"}),c.jsx("div",{className:"text-xl font-bold text-cyan-500",children:x.length}),c.jsx("div",{className:`text-[9px] ${u==="light"?"text-slate-400":"text-slate-500"}`,children:"incidents"})]}),c.jsxs("div",{className:`rounded-lg p-2 ${u==="light"?"bg-slate-100":"bg-slate-800/50"}`,children:[c.jsx("div",{className:`text-[10px] uppercase tracking-wider ${u==="light"?"text-slate-500":"text-slate-400"}`,children:"This Week"}),c.jsx("div",{className:"text-xl font-bold text-blue-500",children:b.length}),c.jsx("div",{className:`text-[9px] ${u==="light"?"text-slate-400":"text-slate-500"}`,children:"incidents"})]})]}),c.jsx("div",{className:`rounded-lg p-2 ${u==="light"?"bg-slate-100":"bg-slate-800/50"}`,children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:`text-[10px] uppercase tracking-wider ${u==="light"?"text-slate-500":"text-slate-400"}`,children:"Incident Heat Map"}),c.jsxs("p",{className:`text-[9px] ${u==="light"?"text-slate-400":"text-slate-500"}`,children:[r.length," hotspots recorded"]})]}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:()=>s(!a),className:`py-1 px-3 rounded text-[10px] font-medium transition-all ${a?"bg-red-600 text-white":u==="light"?"bg-slate-200 text-slate-600 hover:bg-slate-300":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:a?"ON":"OFF"}),c.jsx("button",{onClick:o,className:`py-1 px-2 rounded text-[10px] font-medium ${u==="light"?"bg-slate-200 text-slate-600 hover:bg-slate-300":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"Clear"})]})]})}),c.jsxs("div",{className:`rounded-lg p-2 ${u==="light"?"bg-slate-100":"bg-slate-800/50"}`,children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(fde,{className:"w-3.5 h-3.5 text-amber-500"}),c.jsx("span",{className:`text-[10px] uppercase tracking-wider ${u==="light"?"text-slate-500":"text-slate-400"}`,children:"Forklift Efficiency"})]}),c.jsx("button",{onClick:l,className:`text-[9px] transition-colors ${u==="light"?"text-slate-400 hover:text-red-500":"text-slate-500 hover:text-red-400"}`,children:"Reset"})]}),S.length===0?c.jsx("div",{className:`text-[10px] text-center py-2 ${u==="light"?"text-slate-400":"text-slate-500"}`,children:"No data yet"}):c.jsx("div",{className:"space-y-1.5",children:S.map(({id:A,efficiency:E,movingTime:j,stoppedTime:R})=>c.jsxs("div",{className:"space-y-0.5",children:[c.jsxs("div",{className:"flex items-center justify-between text-[10px]",children:[c.jsx("span",{className:u==="light"?"text-slate-500":"text-slate-400",children:A.replace("forklift-","Forklift ")}),c.jsxs("span",{className:`font-bold ${E>=80?"text-green-500":E>=60?"text-yellow-500":"text-red-500"}`,children:[E.toFixed(1),"%"]})]}),c.jsx("div",{className:`h-1.5 rounded-full overflow-hidden ${u==="light"?"bg-slate-200":"bg-slate-700"}`,children:c.jsx("div",{className:`h-full rounded-full transition-all ${E>=80?"bg-green-500":E>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${E}%`}})}),c.jsxs("div",{className:`flex justify-between text-[8px] ${u==="light"?"text-slate-400":"text-slate-500"}`,children:[c.jsxs("span",{children:["Moving: ",j.toFixed(0),"s"]}),c.jsxs("span",{children:["Stopped: ",R.toFixed(0),"s"]})]})]},A))})]}),c.jsxs("button",{onClick:T,className:"w-full py-2 rounded-lg font-medium text-xs bg-gradient-to-r from-cyan-600 to-blue-600 text-white hover:from-cyan-500 hover:to-blue-500 transition-all flex items-center justify-center gap-2",children:[c.jsx(Qfe,{className:"w-4 h-4"}),"Download Safety Report",c.jsx(zW,{className:"w-3.5 h-3.5"})]})]})})]})},uje=()=>{const[t,e]=z.useState(!1),[n,i]=z.useState(!1),[r,a]=z.useState({name:"",x:0,z:0,radius:4}),s=Fe(p=>p.speedZones),o=Fe(p=>p.addSpeedZone),l=Fe(p=>p.removeSpeedZone),u=Fe(p=>p.theme),h=()=>{r.name.trim()&&(o(r),a({name:"",x:0,z:0,radius:4}),i(!1))};return c.jsxs("div",{className:`border-t pt-2 mt-2 ${u==="light"?"border-slate-200":"border-slate-700/50"}`,children:[c.jsxs("button",{onClick:()=>e(!t),className:`w-full flex items-center justify-between text-xs font-medium transition-colors py-1 ${u==="light"?"text-slate-600 hover:text-slate-800":"text-slate-300 hover:text-white"}`,children:[c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(mhe,{className:"w-4 h-4 text-amber-500"}),"Speed Zones (",s.length,")"]}),t?c.jsx(Cu,{className:"w-4 h-4"}):c.jsx(Cc,{className:"w-4 h-4"})]}),c.jsx(_a,{children:t&&c.jsxs(Xn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2 pt-2 overflow-hidden",children:[c.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:s.map(p=>c.jsxs("div",{className:`flex items-center justify-between rounded px-2 py-1 text-xs group ${u==="light"?"bg-slate-100":"bg-slate-800/50"}`,children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:`truncate ${u==="light"?"text-slate-600":"text-slate-300"}`,children:p.name}),c.jsxs("div",{className:`text-[9px] ${u==="light"?"text-slate-400":"text-slate-500"}`,children:["(",p.x,", ",p.z,") r=",p.radius,"m"]})]}),c.jsx("button",{onClick:()=>l(p.id),className:`opacity-0 group-hover:opacity-100 p-1 transition-all ${u==="light"?"text-red-500 hover:text-red-600":"text-red-400 hover:text-red-300"}`,title:"Remove zone",children:c.jsx(sde,{className:"w-3 h-3"})})]},p.id))}),n?c.jsxs("div",{className:`rounded p-2 space-y-2 ${u==="light"?"bg-slate-100":"bg-slate-800/50"}`,children:[c.jsx("input",{type:"text",placeholder:"Zone name",value:r.name,onChange:p=>a({...r,name:p.target.value}),className:`w-full rounded px-2 py-1 text-xs border outline-none ${u==="light"?"bg-white text-slate-700 placeholder-slate-400 border-slate-300 focus:border-amber-500":"bg-slate-900 text-white placeholder-slate-500 border-slate-700 focus:border-amber-500"}`}),c.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[c.jsxs("div",{children:[c.jsx("label",{className:`text-[9px] ${u==="light"?"text-slate-400":"text-slate-500"}`,children:"X"}),c.jsx("input",{type:"number",value:r.x,onChange:p=>a({...r,x:parseFloat(p.target.value)||0}),className:`w-full rounded px-1.5 py-0.5 text-xs border outline-none ${u==="light"?"bg-white text-slate-700 border-slate-300 focus:border-amber-500":"bg-slate-900 text-white border-slate-700 focus:border-amber-500"}`})]}),c.jsxs("div",{children:[c.jsx("label",{className:`text-[9px] ${u==="light"?"text-slate-400":"text-slate-500"}`,children:"Z"}),c.jsx("input",{type:"number",value:r.z,onChange:p=>a({...r,z:parseFloat(p.target.value)||0}),className:`w-full rounded px-1.5 py-0.5 text-xs border outline-none ${u==="light"?"bg-white text-slate-700 border-slate-300 focus:border-amber-500":"bg-slate-900 text-white border-slate-700 focus:border-amber-500"}`})]}),c.jsxs("div",{children:[c.jsx("label",{className:`text-[9px] ${u==="light"?"text-slate-400":"text-slate-500"}`,children:"Radius"}),c.jsx("input",{type:"number",value:r.radius,onChange:p=>a({...r,radius:parseFloat(p.target.value)||4}),className:`w-full rounded px-1.5 py-0.5 text-xs border outline-none ${u==="light"?"bg-white text-slate-700 border-slate-300 focus:border-amber-500":"bg-slate-900 text-white border-slate-700 focus:border-amber-500"}`})]})]}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:h,className:"flex-1 bg-amber-600 hover:bg-amber-500 text-white py-1 rounded text-xs font-medium transition-colors",children:"Add Zone"}),c.jsx("button",{onClick:()=>i(!1),className:`px-2 py-1 rounded text-xs transition-colors ${u==="light"?"bg-slate-200 hover:bg-slate-300 text-slate-700":"bg-slate-700 hover:bg-slate-600 text-white"}`,children:"Cancel"})]})]}):c.jsxs("button",{onClick:()=>i(!0),className:`w-full flex items-center justify-center gap-1 py-1.5 rounded text-xs transition-colors ${u==="light"?"bg-slate-100 hover:bg-slate-200 text-slate-600":"bg-slate-800 hover:bg-slate-700 text-slate-300"}`,children:[c.jsx(zhe,{className:"w-3 h-3"}),"Add Speed Zone"]})]})})]})},fje=()=>{const[t,e]=z.useState(!1),n=Fe(a=>a.safetyConfig),i=Fe(a=>a.setSafetyConfig),r=Fe(a=>a.theme);return c.jsxs("div",{className:`border-t pt-2 mt-2 ${r==="light"?"border-slate-200":"border-slate-700/50"}`,children:[c.jsxs("button",{onClick:()=>e(!t),className:`w-full flex items-center justify-between text-xs font-medium transition-colors py-1 ${r==="light"?"text-slate-600 hover:text-slate-800":"text-slate-300 hover:text-white"}`,children:[c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(Qo,{className:"w-4 h-4 text-green-500"}),"Safety Configuration"]}),t?c.jsx(Cu,{className:"w-4 h-4"}):c.jsx(Cc,{className:"w-4 h-4"})]}),t&&c.jsxs(Xn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-3 pt-2",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[c.jsx("span",{className:r==="light"?"text-slate-500":"text-slate-400",children:"Worker Detection"}),c.jsxs("span",{className:"text-green-500 font-mono font-bold",children:[n.workerDetectionRadius.toFixed(1),"m"]})]}),c.jsx("input",{type:"range",min:"1",max:"5",step:"0.5",value:n.workerDetectionRadius,onChange:a=>i({workerDetectionRadius:parseFloat(a.target.value)}),className:`w-full h-2 rounded-lg appearance-none cursor-pointer accent-green-500 ${r==="light"?"bg-slate-200":"bg-slate-800"}`})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[c.jsx("span",{className:r==="light"?"text-slate-500":"text-slate-400",children:"Forklift Spacing"}),c.jsxs("span",{className:"text-blue-500 font-mono font-bold",children:[n.forkliftSafetyRadius.toFixed(1),"m"]})]}),c.jsx("input",{type:"range",min:"2",max:"8",step:"0.5",value:n.forkliftSafetyRadius,onChange:a=>i({forkliftSafetyRadius:parseFloat(a.target.value)}),className:`w-full h-2 rounded-lg appearance-none cursor-pointer accent-blue-500 ${r==="light"?"bg-slate-200":"bg-slate-800"}`})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[c.jsx("span",{className:r==="light"?"text-slate-500":"text-slate-400",children:"Look-ahead Distance"}),c.jsxs("span",{className:"text-purple-500 font-mono font-bold",children:[n.pathCheckDistance.toFixed(1),"m"]})]}),c.jsx("input",{type:"range",min:"2",max:"10",step:"0.5",value:n.pathCheckDistance,onChange:a=>i({pathCheckDistance:parseFloat(a.target.value)}),className:`w-full h-2 rounded-lg appearance-none cursor-pointer accent-purple-500 ${r==="light"?"bg-slate-200":"bg-slate-800"}`})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[c.jsx("span",{className:r==="light"?"text-slate-500":"text-slate-400",children:"Speed Zone Rate"}),c.jsxs("span",{className:"text-amber-500 font-mono font-bold",children:[(n.speedZoneSlowdown*100).toFixed(0),"%"]})]}),c.jsx("input",{type:"range",min:"0.2",max:"0.8",step:"0.1",value:n.speedZoneSlowdown,onChange:a=>i({speedZoneSlowdown:parseFloat(a.target.value)}),className:`w-full h-2 rounded-lg appearance-none cursor-pointer accent-amber-500 ${r==="light"?"bg-slate-200":"bg-slate-800"}`})]}),c.jsxs("div",{className:`text-[9px] space-y-1 pt-1 border-t ${r==="light"?"text-slate-400 border-slate-200":"text-slate-500 border-slate-800"}`,children:[c.jsxs("p",{children:[c.jsx("span",{className:"text-green-500",children:"Worker Detection:"})," How close workers can be"]}),c.jsxs("p",{children:[c.jsx("span",{className:"text-blue-500",children:"Forklift Spacing:"})," Min distance between forklifts"]}),c.jsxs("p",{children:[c.jsx("span",{className:"text-purple-500",children:"Look-ahead:"})," How far ahead to check path"]}),c.jsxs("p",{children:[c.jsx("span",{className:"text-amber-500",children:"Speed Zone:"})," Speed % in slow zones"]})]})]})]})},hje=({isOpen:t,onClose:e})=>{const n=Fe(r=>r.theme);if(!t)return null;const i=[{category:"Camera Movement",items:[{key:"W / ",description:"Move forward"},{key:"S / ",description:"Move backward"},{key:"A / ",description:"Strafe left"},{key:"D / ",description:"Strafe right"},{key:"Q",description:"Move down"},{key:"E",description:"Move up"},{key:"Drag",description:"Rotate camera"},{key:"Scroll",description:"Zoom in/out"},{key:"1-5",description:"Camera presets"},{key:"0",description:"Reset camera view"},{key:"R",description:"Toggle auto-rotation"}]},{category:"Controls",items:[{key:"P",description:"Pause/Resume simulation"},{key:"I",description:"Toggle AI Command Center"},{key:"Z",description:"Toggle safety zones"},{key:"H",description:"Toggle heat map"},{key:"M",description:"Minimize/Expand panel"},{key:"T",description:"Toggle theme (dark/light)"},{key:"F",description:"Toggle fullscreen"},{key:"G",description:"Toggle GPS mini-map"},{key:"C",description:"Toggle security cameras"},{key:"+/-",description:"Adjust production speed"},{key:"ESC",description:"Close panels"},{key:"Click",description:"Select machine/worker"}]},{category:"Graphics Quality",items:[{key:"F1",description:"Low quality"},{key:"F2",description:"Medium quality"},{key:"F3",description:"High quality"},{key:"F4",description:"Ultra quality"}]},{category:"Safety",items:[{key:"SPACE",description:"Emergency Stop (toggle)"}]}];return c.jsxs(Xn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center pointer-events-auto",onClick:e,children:[c.jsx("div",{className:`absolute inset-0 backdrop-blur-sm ${n==="light"?"bg-black/40":"bg-black/60"}`}),c.jsxs(Xn.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:`relative backdrop-blur-xl rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden ${n==="light"?"bg-white/95 border border-slate-200":"bg-slate-900/95 border border-slate-700/50"}`,onClick:r=>r.stopPropagation(),children:[c.jsxs("div",{className:`flex items-center justify-between p-4 border-b ${n==="light"?"border-slate-200":"border-slate-700/50"}`,children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(GW,{className:"w-5 h-5 text-cyan-500"}),c.jsx("h2",{className:`text-lg font-bold ${n==="light"?"text-slate-800":"text-white"}`,children:"Keyboard Shortcuts"})]}),c.jsx("button",{onClick:e,className:`w-8 h-8 rounded-lg flex items-center justify-center transition-colors ${n==="light"?"bg-slate-100 hover:bg-slate-200 text-slate-500 hover:text-slate-700":"bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white"}`,children:c.jsx(op,{className:"w-4 h-4"})})]}),c.jsx("div",{className:"p-4 max-h-[60vh] overflow-y-auto space-y-4",children:i.map(r=>c.jsxs("div",{children:[c.jsx("h3",{className:`text-[10px] font-bold uppercase tracking-wider mb-2 ${n==="light"?"text-slate-400":"text-slate-500"}`,children:r.category}),c.jsx("div",{className:"space-y-1",children:r.items.map(a=>c.jsxs("div",{className:`flex items-center justify-between py-1.5 px-2 rounded-lg ${n==="light"?"bg-slate-100":"bg-slate-800/50"}`,children:[c.jsx("span",{className:`text-xs ${n==="light"?"text-slate-600":"text-slate-300"}`,children:a.description}),c.jsx("kbd",{className:`px-2 py-0.5 text-[10px] font-mono font-bold rounded border ${n==="light"?"bg-white text-slate-700 border-slate-300":"bg-slate-700 text-slate-200 border-slate-600"}`,children:a.key})]},a.key))})]},r.category))}),c.jsx("div",{className:`p-3 border-t text-center ${n==="light"?"border-slate-200":"border-slate-700/50"}`,children:c.jsxs("p",{className:`text-[10px] ${n==="light"?"text-slate-400":"text-slate-500"}`,children:["Press ",c.jsx("kbd",{className:`px-1.5 py-0.5 rounded text-[9px] font-mono ${n==="light"?"bg-slate-200 text-slate-600":"bg-slate-700 text-slate-300"}`,children:"?"})," to toggle this panel"]})})]})]})},dje=()=>{const[t,e]=z.useState(!0),[n,i]=z.useState(!1),r=Fe(g=>g.legendPosition),a=Fe(g=>g.setLegendPosition);Fe(g=>g.resetLegendPosition);const s=Fe(g=>g.theme);r.x;const o=z.useRef(null),l=z.useRef({x:0,y:0}),u=z.useRef({x:0,y:0}),h=z.useCallback(g=>{var b;g.preventDefault(),i(!0),l.current={x:g.clientX,y:g.clientY};const x=(b=o.current)==null?void 0:b.getBoundingClientRect();x&&(u.current={x:r.x===-1?window.innerWidth-x.right+x.width:r.x,y:r.y===-1?x.top:r.y})},[r]);z.useEffect(()=>{if(!n)return;const g=b=>{const M=b.clientX-l.current.x,S=b.clientY-l.current.y,T=u.current.x-M,A=u.current.y+S,E=window.innerWidth-50,j=window.innerHeight-50;a({x:Math.max(0,Math.min(E,T)),y:Math.max(0,Math.min(j,A))})},x=()=>{i(!1)};return window.addEventListener("mousemove",g),window.addEventListener("mouseup",x),()=>{window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",x)}},[n,a]);const p=r.x===-1?{top:"12rem",right:"1rem"}:{top:r.y,right:r.x};return c.jsxs(Xn.div,{ref:o,initial:{opacity:0,x:50},animate:{opacity:1,x:0},style:p,className:`hidden md:block fixed backdrop-blur-xl rounded-xl pointer-events-auto border shadow-xl overflow-hidden ${n?"cursor-grabbing":""} ${s==="light"?"bg-white/95 border-slate-200 text-slate-800":"bg-slate-950/90 border-slate-700/50 text-white"}`,children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{onMouseDown:h,className:`px-1.5 py-2.5 cursor-grab transition-colors flex items-center ${s==="light"?"hover:bg-slate-100":"hover:bg-slate-800/50"}`,title:"Drag to move",children:c.jsx(nhe,{className:`w-3.5 h-3.5 ${s==="light"?"text-slate-400":"text-slate-500"}`})}),c.jsxs("button",{onClick:()=>e(!t),className:`flex-1 flex items-center justify-between p-2.5 pl-1 transition-colors ${s==="light"?"hover:bg-slate-100":"hover:bg-slate-800/50"}`,children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(KM,{className:"w-3.5 h-3.5 text-cyan-500"}),c.jsx("span",{className:`font-medium text-xs ${s==="light"?"text-slate-600":"text-slate-300"}`,children:"Legend"})]}),t?c.jsx(Cu,{className:`w-3.5 h-3.5 ${s==="light"?"text-slate-400":"text-slate-500"}`}):c.jsx(Cc,{className:`w-3.5 h-3.5 ${s==="light"?"text-slate-400":"text-slate-500"}`})]})]}),c.jsx(_a,{children:t&&c.jsx(Xn.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:c.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[c.jsxs("div",{children:[c.jsx("h3",{className:`font-bold uppercase text-[9px] tracking-wider mb-1.5 ${s==="light"?"text-slate-400":"text-slate-500"}`,children:"Equipment"}),c.jsxs("ul",{className:"space-y-1 text-xs",children:[c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded bg-gradient-to-br from-slate-300 to-slate-400"}),c.jsx("span",{className:s==="light"?"text-slate-500":"text-slate-400",children:"Silos"})]}),c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded bg-gradient-to-br from-blue-400 to-blue-600"}),c.jsx("span",{className:s==="light"?"text-slate-500":"text-slate-400",children:"Roller Mills"})]}),c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded bg-gradient-to-br from-slate-200 to-slate-300 border border-slate-300"}),c.jsx("span",{className:s==="light"?"text-slate-500":"text-slate-400",children:"Plansifters"})]}),c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded bg-gradient-to-br from-orange-400 to-orange-600"}),c.jsx("span",{className:s==="light"?"text-slate-500":"text-slate-400",children:"Packers"})]})]})]}),c.jsxs("div",{className:`border-t pt-2 ${s==="light"?"border-slate-200":"border-slate-700/50"}`,children:[c.jsx("h3",{className:`font-bold uppercase text-[9px] tracking-wider mb-1 ${s==="light"?"text-slate-400":"text-slate-500"}`,children:"Controls"}),c.jsxs("ul",{className:`space-y-0.5 text-[10px] ${s==="light"?"text-slate-400":"text-slate-500"}`,children:[c.jsx("li",{children:"Click machines to inspect"}),c.jsx("li",{children:"Click workers for profiles"}),c.jsx("li",{children:"Drag to rotate view"})]})]})]})})})]})},pje=({productionSpeed:t,setProductionSpeed:e,showZones:n,setShowZones:i,showAIPanel:r,setShowAIPanel:a,selectedMachine:s,onCloseSelection:o})=>{const{muted:l,volume:u,setMuted:h,setVolume:p,musicEnabled:g,musicVolume:x,currentTrack:b,setMusicEnabled:M,setMusicVolume:S,nextTrack:T,prevTrack:A,startMusic:E,ttsEnabled:j,setTTSEnabled:R}=ije(),C=De.useRef(null),[D,U]=z.useState(!1),I=Fe(Y=>Y.panelMinimized),L=Fe(Y=>Y.setPanelMinimized),F=Fe(Y=>Y.theme),G=Fe(Y=>Y.toggleTheme),H=Fe(Y=>Y.showShortcuts),W=Fe(Y=>Y.setShowShortcuts);return De.useEffect(()=>{const Y=()=>{const ee=C.current;if(ee){const te=ee.scrollHeight>ee.clientHeight,ae=ee.scrollTop+ee.clientHeight<ee.scrollHeight-10;U(te&&ae)}};Y();const k=C.current;k&&(k.addEventListener("scroll",Y),window.addEventListener("resize",Y));const $=new MutationObserver(Y);return k&&$.observe(k,{childList:!0,subtree:!0,attributes:!0}),()=>{k&&k.removeEventListener("scroll",Y),window.removeEventListener("resize",Y),$.disconnect()}},[]),c.jsxs("div",{className:`absolute top-0 left-0 z-10 w-full h-full pointer-events-none ${F==="light"?"light-theme":""}`,children:[c.jsx(_a,{children:H&&c.jsx(hje,{isOpen:H,onClose:()=>W(!1)})}),c.jsx("div",{className:"p-4 flex justify-between items-start",children:c.jsxs(Xn.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0,width:I?"auto":300},className:`relative backdrop-blur-xl rounded-2xl text-white pointer-events-auto border shadow-2xl ${F==="light"?"bg-white/95 border-slate-300/50 shadow-slate-300/20":"bg-slate-950/95 border-cyan-500/20 shadow-cyan-500/10"}`,children:[I?c.jsxs("div",{className:"p-2 flex flex-col gap-1",children:[c.jsx("div",{className:"w-9 h-9 rounded-lg bg-gradient-to-br from-slate-700 to-slate-900 flex items-center justify-center text-xl border border-slate-600 mb-1",children:""}),c.jsx("button",{onClick:()=>L(!1),className:`w-9 h-9 rounded-lg flex items-center justify-center transition-all ${F==="light"?"bg-slate-100 text-slate-600 hover:bg-slate-200":"bg-slate-800 text-slate-300 hover:bg-slate-700"}`,title:"Expand panel",children:c.jsx(Dhe,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>a(!r),className:`w-9 h-9 rounded-lg flex items-center justify-center transition-all ${r?"bg-cyan-600 text-white":F==="light"?"bg-slate-100 text-slate-600 hover:bg-slate-200":"bg-slate-800 text-slate-300 hover:bg-slate-700"}`,title:"AI Command Center",children:c.jsx(Zj,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>i(!n),className:`w-9 h-9 rounded-lg flex items-center justify-center transition-all ${n?"bg-orange-600 text-white":F==="light"?"bg-slate-100 text-slate-600 hover:bg-slate-200":"bg-slate-800 text-slate-300 hover:bg-slate-700"}`,title:"Safety Zones",children:c.jsx(Qo,{className:"w-4 h-4"})}),c.jsx("button",{onClick:G,className:`w-9 h-9 rounded-lg flex items-center justify-center transition-all ${F==="light"?"bg-slate-100 text-amber-500 hover:bg-slate-200":"bg-slate-800 text-blue-400 hover:bg-slate-700"}`,title:"Toggle theme",children:F==="light"?c.jsx(i6,{className:"w-4 h-4"}):c.jsx(n6,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>W(!0),className:`w-9 h-9 rounded-lg flex items-center justify-center transition-all ${F==="light"?"bg-slate-100 text-slate-600 hover:bg-slate-200":"bg-slate-800 text-slate-300 hover:bg-slate-700"}`,title:"Keyboard shortcuts",children:c.jsx(e6,{className:"w-4 h-4"})})]}):c.jsxs("div",{ref:C,className:"p-3 max-h-[calc(100vh-100px)] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"w-9 h-9 rounded-lg bg-gradient-to-br from-slate-700 to-slate-900 flex items-center justify-center text-xl border border-slate-600",children:""}),c.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 bg-green-500 rounded-full border-2 border-slate-950 animate-pulse"})]}),c.jsxs("div",{children:[c.jsxs("h1",{className:`text-lg font-bold tracking-tight leading-tight ${F==="light"?"text-slate-800":""}`,children:["Mill",c.jsx("span",{className:"text-orange-500",children:"OS"}),c.jsx("span",{className:`text-[10px] ml-1 ${F==="light"?"text-slate-400":"text-slate-500"}`,children:"v0.10"})]}),c.jsx("p",{className:`text-[9px] uppercase tracking-widest leading-tight ${F==="light"?"text-slate-400":"text-slate-500"}`,children:"Digital Twin Operations"})]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:G,className:`w-7 h-7 rounded-lg flex items-center justify-center transition-all ${F==="light"?"bg-amber-100 text-amber-600 hover:bg-amber-200":"bg-slate-800 text-blue-400 hover:bg-slate-700"}`,title:F==="light"?"Switch to dark mode":"Switch to light mode",children:F==="light"?c.jsx(i6,{className:"w-3.5 h-3.5"}):c.jsx(n6,{className:"w-3.5 h-3.5"})}),c.jsx("button",{onClick:()=>W(!0),className:`w-7 h-7 rounded-lg flex items-center justify-center transition-all ${F==="light"?"bg-slate-100 text-slate-600 hover:bg-slate-200":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,title:"Keyboard shortcuts (?)",children:c.jsx(e6,{className:"w-3.5 h-3.5"})}),c.jsx("button",{onClick:()=>L(!0),className:`w-7 h-7 rounded-lg flex items-center justify-center transition-all ${F==="light"?"bg-slate-100 text-slate-600 hover:bg-slate-200":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,title:"Minimize panel (M)",children:c.jsx(Nhe,{className:"w-3.5 h-3.5"})})]})]}),c.jsxs("p",{className:`text-[9px] italic flex items-center gap-2 leading-tight mb-2 ${F==="light"?"text-cyan-600":"text-cyan-400/70"}`,children:["Nell Watson",c.jsxs("a",{href:"https://github.com/NellWatson/MillOS",target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-1 transition-colors not-italic ${F==="light"?"text-slate-400 hover:text-cyan-600":"text-slate-500 hover:text-cyan-400"}`,children:[c.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),"Source"]})]}),c.jsx(nje,{theme:F}),c.jsx(L4e,{}),c.jsxs("div",{className:"space-y-2 border-t border-slate-700/50 pt-2 mt-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-xs font-medium text-slate-300",children:"Safety Zones"}),c.jsx("button",{onClick:()=>i(!n),className:`px-4 py-1.5 rounded-lg text-xs font-bold tracking-wider transition-all ${n?"bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-lg shadow-orange-500/30":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:n?"VISIBLE":"HIDDEN"})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[c.jsx("span",{className:"text-slate-400",children:"Production Speed"}),c.jsxs("span",{className:"text-orange-400 font-mono font-bold",children:[(t*100).toFixed(0),"%"]})]}),c.jsx("input",{type:"range",min:"0",max:"2",step:"0.05",value:t,onChange:Y=>e(parseFloat(Y.target.value)),className:"w-full h-2 bg-slate-800 rounded-lg appearance-none cursor-pointer accent-orange-500"})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-xs mb-1",children:[c.jsx("span",{className:"text-slate-400",children:"Sound"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-cyan-400 font-mono font-bold",children:l?"OFF":`${(u*100).toFixed(0)}%`}),c.jsx("button",{onClick:()=>h(!l),className:`w-7 h-7 rounded-lg flex items-center justify-center transition-all ${l?"bg-red-500/20 text-red-400 hover:bg-red-500/30":"bg-slate-800 text-slate-300 hover:bg-slate-700"}`,title:l?"Unmute":"Mute",children:l?c.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"})]}):c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"})})})]})]}),c.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:u,onChange:Y=>p(parseFloat(Y.target.value)),disabled:l,className:`w-full h-2 bg-slate-800 rounded-lg appearance-none cursor-pointer accent-cyan-500 ${l?"opacity-50":""}`})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-xs mb-1",children:[c.jsxs("span",{className:"text-slate-400 flex items-center gap-1.5",children:[c.jsx(Ehe,{className:"w-3.5 h-3.5"}),"Music"]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-emerald-400 font-mono font-bold",children:g?`${(x*100).toFixed(0)}%`:"OFF"}),c.jsx("button",{onClick:()=>{M(!g),g||E()},className:`w-7 h-7 rounded-lg flex items-center justify-center transition-all ${g?"bg-emerald-500/20 text-emerald-400 hover:bg-emerald-500/30":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,title:g?"Disable Music":"Enable Music",children:g?c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})}):c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"})})})]})]}),c.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:x,onChange:Y=>S(parseFloat(Y.target.value)),disabled:!g,className:`w-full h-2 bg-slate-800 rounded-lg appearance-none cursor-pointer accent-emerald-500 ${g?"":"opacity-50"}`}),g&&c.jsxs("div",{className:"flex items-center justify-between mt-2 pt-2 border-t border-slate-700/30",children:[c.jsx("button",{onClick:A,className:"w-6 h-6 rounded flex items-center justify-center bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-emerald-400 transition-all",title:"Previous Track",children:c.jsx(qW,{className:"w-3.5 h-3.5"})}),c.jsx("span",{className:"text-xs text-emerald-400 font-medium truncate px-2",children:b.name}),c.jsx("button",{onClick:T,className:"w-6 h-6 rounded flex items-center justify-center bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-emerald-400 transition-all",title:"Next Track",children:c.jsx(WW,{className:"w-3.5 h-3.5"})})]})]}),c.jsxs("div",{className:"flex items-center justify-between py-2 px-1",children:[c.jsxs("span",{className:"text-xs text-slate-400 flex items-center gap-1.5",children:[c.jsx(YW,{className:"w-3.5 h-3.5"}),"PA Voice"]}),c.jsx("button",{onClick:()=>R(!j),className:`px-2.5 py-1 rounded-md text-xs font-bold transition-all ${j?"bg-purple-500/20 text-purple-400 hover:bg-purple-500/30":"bg-slate-800 text-slate-500 hover:bg-slate-700"}`,title:j?"Disable PA voice announcements":"Enable PA voice announcements",children:j?"ON":"OFF"})]}),c.jsxs("button",{onClick:()=>a(!r),className:`w-full py-2 px-3 rounded-lg font-bold text-sm transition-all flex items-center justify-between ${r?"bg-gradient-to-r from-cyan-500 to-blue-600 text-white shadow-lg shadow-cyan-500/30":"bg-slate-800 text-slate-300 hover:bg-slate-700"}`,children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Zj,{className:"w-5 h-5"}),c.jsx("span",{children:"AI Command Center"})]}),r&&c.jsx("span",{className:"text-xs opacity-70",children:"ESC to close"})]})]}),c.jsx(rje,{}),c.jsx(V4e,{}),c.jsx(aje,{}),c.jsx(sje,{}),c.jsx(fje,{}),c.jsx(cje,{}),c.jsx(uje,{}),c.jsx(lje,{}),c.jsx("div",{className:"pt-2 mt-2 border-t border-slate-700/50",children:c.jsx(oje,{})})]}),!I&&c.jsx(_a,{children:D&&c.jsx(Xn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`absolute bottom-0 left-0 right-0 h-8 pointer-events-none rounded-b-2xl flex items-end justify-center pb-1 ${F==="light"?"bg-gradient-to-t from-white to-transparent":"bg-gradient-to-t from-slate-950 to-transparent"}`,children:c.jsx(Cc,{className:`w-4 h-4 animate-bounce ${F==="light"?"text-slate-400":"text-slate-500"}`})})})]})}),c.jsx(dje,{}),s&&c.jsx(mje,{machine:s,onClose:o}),c.jsx(W4e,{}),c.jsx("div",{className:"fixed bottom-24 left-4 z-30 pointer-events-auto w-64",children:c.jsx(X4e,{})}),c.jsx(tje,{}),c.jsx(Z4e,{}),c.jsx(Q4e,{})]})},mje=({machine:t,onClose:e})=>{const[n,i]=De.useState(t.metrics);return De.useEffect(()=>{const r=setInterval(()=>{i({rpm:t.metrics.rpm+(Math.random()-.5)*10,temperature:t.metrics.temperature+(Math.random()-.5)*2,vibration:t.metrics.vibration+(Math.random()-.5)*.5,load:Math.min(100,Math.max(0,t.metrics.load+(Math.random()-.5)*3))})},500);return()=>clearInterval(r)},[t]),t.status==="running"||t.status,c.jsx(Xn.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},exit:{opacity:0,y:30},className:"fixed bottom-4 left-1/2 -translate-x-1/2 w-[95vw] sm:w-[420px] max-w-[480px] pointer-events-auto z-20",children:c.jsxs("div",{className:"bg-slate-950/98 backdrop-blur-xl border border-slate-600/50 rounded-xl shadow-2xl overflow-hidden",children:[c.jsx("div",{className:"h-0.5 bg-gradient-to-r from-cyan-500 via-blue-500 to-purple-500"}),c.jsxs("div",{className:"p-3 sm:p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[c.jsx("div",{className:`w-2 h-2 sm:w-2.5 sm:h-2.5 rounded-full ${t.status==="running"?"bg-green-500 animate-pulse":t.status==="warning"?"bg-yellow-500":"bg-red-500"}`}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-sm sm:text-base font-bold text-white leading-tight",children:t.name}),c.jsxs("p",{className:"text-cyan-400 text-[10px] sm:text-xs",children:[t.type.replace("_"," ")," ",c.jsxs("span",{className:"text-slate-500",children:["#",t.id]})]})]})]}),c.jsx("button",{onClick:e,className:"text-slate-500 hover:text-white w-6 h-6 flex items-center justify-center rounded hover:bg-slate-800 transition-colors",children:""})]}),c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-1.5 sm:gap-2 mb-2 sm:mb-3",children:[c.jsx(kM,{label:"RPM",value:n.rpm.toFixed(0),unit:"",color:"blue"}),c.jsx(kM,{label:"Temp",value:n.temperature.toFixed(1),unit:"C",color:"orange"}),c.jsx(kM,{label:"Vibration",value:n.vibration.toFixed(2),unit:"mm/s",color:"purple"}),c.jsx(kM,{label:"Load",value:n.load.toFixed(1),unit:"%",color:"green"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-3 pt-2 border-t border-slate-700/50",children:[c.jsxs("div",{className:"text-[9px] sm:text-[10px] text-slate-500 flex sm:block gap-3 sm:gap-0 sm:space-y-0.5",children:[c.jsxs("div",{children:["Last: ",c.jsx("span",{className:"text-slate-400",children:t.lastMaintenance})]}),c.jsxs("div",{children:["Next: ",c.jsx("span",{className:"text-cyan-400",children:t.nextMaintenance})]})]}),c.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[c.jsx("button",{className:"flex-1 sm:flex-none bg-cyan-600 hover:bg-cyan-500 text-white px-3 py-1.5 rounded-lg font-medium text-[11px] sm:text-xs transition-colors",children:"View Logs"}),c.jsx("button",{className:"flex-1 sm:flex-none bg-slate-800 hover:bg-slate-700 text-white px-3 py-1.5 rounded-lg font-medium text-[11px] sm:text-xs transition-colors",children:"Schedule"})]})]})]})]})})},kM=({label:t,value:e,unit:n,color:i})=>{const r={blue:"text-blue-400",orange:"text-orange-400",purple:"text-purple-400",green:"text-green-400",cyan:"text-cyan-400"};return c.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-2 border border-slate-800",children:[c.jsx("div",{className:"text-[9px] text-slate-500 uppercase tracking-wider leading-tight",children:t}),c.jsxs("div",{className:`text-sm font-bold font-mono ${r[i]} leading-tight`,children:[e,n&&c.jsx("span",{className:"text-[10px] text-slate-500 ml-0.5",children:n})]})]})},St={recentDecisionsByMachine:new Map,recentDecisionsByWorker:new Map,decisionCooldowns:new Map,pendingChains:new Map,lastAnalysisTime:{},metricHistory:new Map,predictedEvents:[],congestionHotspots:[],shiftTransitionActive:!1,lastShift:null,drillPhase:"none",drillStartTime:null,decisionOutcomes:[],confidenceAdjustments:new Map([["assignment",0],["optimization",0],["prediction",0],["maintenance",0],["safety",0]]),anomalyHistory:[],crossMachinePatterns:[],impactStats:{totalDecisions:0,successfulDecisions:0,preventedShutdowns:0,estimatedSavings:0,shiftStart:Date.now(),byType:{assignment:{count:0,successRate:0},optimization:{count:0,successRate:0},prediction:{count:0,successRate:0},maintenance:{count:0,successRate:0},safety:{count:0,successRate:0}}},productionTargets:{shift:9600,current:0},lowProductionHours:[6,7,14,15,22,23]};function MI(t){const e=St.decisionCooldowns.get(t);return e?Date.now()>e?(St.decisionCooldowns.delete(t),!1):!0:!1}function ub(t,e){St.decisionCooldowns.set(t,Date.now()+e)}function tr(t){if(t.machineId){const e=St.recentDecisionsByMachine.get(t.machineId)||[];St.recentDecisionsByMachine.set(t.machineId,[t,...e].slice(0,10))}if(t.workerId){const e=St.recentDecisionsByWorker.get(t.workerId)||[];St.recentDecisionsByWorker.set(t.workerId,[t,...e].slice(0,10))}}function fb(t,e,n=6e4){const i=St.recentDecisionsByMachine.get(t)||[],r=St.recentDecisionsByWorker.get(t)||[];return[...i,...r].some(s=>s.type===e&&Date.now()-s.timestamp.getTime()<n&&(s.status==="pending"||s.status==="in_progress"))}function gje(t){const e=Date.now(),n=[{key:"temperature",value:t.metrics.temperature},{key:"vibration",value:t.metrics.vibration},{key:"load",value:t.metrics.load}];for(const{key:i,value:r}of n){const a=`${t.id}-${i}`;let s=St.metricHistory.get(a);s||(s={machineId:t.id,metric:i,history:[],trend:"stable",rateOfChange:0}),s.history.push({timestamp:e,value:r});const o=e-300*1e3;if(s.history=s.history.filter(l=>l.timestamp>o),s.history.length>=3){const l=s.history[0],u=s.history[s.history.length-1],h=(u.timestamp-l.timestamp)/6e4;h>0&&(s.rateOfChange=(u.value-l.value)/h,s.rateOfChange>.5?s.trend="rising":s.rateOfChange<-.5?s.trend="falling":s.trend="stable")}St.metricHistory.set(a,s)}}function IO(t,e){return St.metricHistory.get(`${t}-${e}`)||null}function vje(t){const e=Date.now();if(e-(St.lastAnalysisTime.trends||0)<6e4)return null;St.lastAnalysisTime.trends=e;for(const n of t.machines)gje(n);for(const n of t.machines){const i=IO(n.id,"temperature"),r=IO(n.id,"vibration");if(i&&i.trend==="rising"&&i.rateOfChange>1){if(fb(n.id,"prediction",12e4))continue;const a=(70-n.metrics.temperature)/i.rateOfChange;if(a>0&&a<30){const s={id:`ai-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,type:"prediction",action:`TREND ALERT: ${n.name} temperature rising ${i.rateOfChange.toFixed(1)}C/min`,reasoning:`Current: ${n.metrics.temperature.toFixed(1)}C, projected critical in ${Math.round(a)} minutes`,confidence:ss("prediction",t,"high"),impact:`Preemptive action prevents thermal shutdown in ~${Math.round(a)} min`,machineId:n.id,status:"pending",triggeredBy:"prediction",priority:a<10?"high":"medium",uncertainty:"Trend based on 5-minute rolling window"};return tr(s),s}}if(r&&r.trend==="rising"&&r.rateOfChange>.1){if(fb(n.id,"prediction",18e4))continue;const a={id:`ai-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,type:"prediction",action:`Vibration trending upward on ${n.name} - bearing analysis recommended`,reasoning:`Vibration increasing ${(r.rateOfChange*60).toFixed(2)}mm/s per hour - early wear indicator`,confidence:ss("prediction",t,"medium"),impact:"Early intervention extends component life 20-40%",machineId:n.id,status:"pending",triggeredBy:"prediction",priority:"low",uncertainty:"Requires physical inspection to confirm wear pattern"};return tr(a),a}}return null}function xje(t){const e=Date.now();if(e-(St.lastAnalysisTime.correlation||0)<45e3)return null;St.lastAnalysisTime.correlation=e;const{machines:n}=t;if(n.length<3)return null;const i=n.reduce((s,o)=>(s[o.type]||(s[o.type]=[]),s[o.type].push(o),s),{}),r=n.filter(s=>s.metrics.temperature>55);if(r.length>=3){const s=r.reduce((l,u)=>l+u.metrics.temperature,0)/r.length;if(!St.crossMachinePatterns.find(l=>l.pattern==="temperature_cluster"&&e-l.timestamp<18e4)){const l={pattern:"temperature_cluster",affectedMachines:r.map(h=>h.id),severity:s>65?"high":s>58?"medium":"low",possibleCause:"Ambient temperature, grain moisture content, or HVAC issue",timestamp:e};St.crossMachinePatterns.push(l),St.crossMachinePatterns=St.crossMachinePatterns.filter(h=>e-h.timestamp<6e5);const u={id:`ai-${e}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,type:"prediction",action:`Cross-system temperature anomaly detected - ${r.length} machines running warm`,reasoning:`Average temperature ${s.toFixed(1)}C across ${r.map(h=>h.name).join(", ")}. Pattern suggests systemic issue rather than individual machine failure.`,confidence:ss("prediction",t,"high"),impact:"Identifying root cause prevents multiple machine interventions",status:"pending",triggeredBy:"metric",priority:l.severity==="high"?"high":"medium",alternatives:[{action:"Check ambient temperature sensors",tradeoff:"May be environmental"},{action:"Review grain moisture levels",tradeoff:"Affects grinding friction"},{action:"Inspect HVAC system",tradeoff:"Cooling capacity may be insufficient"}]};return tr(u),u}}const a=n.filter(s=>s.type===Wn.ROLLER_MILL&&s.metrics.vibration>3);if(a.length>=2&&!St.crossMachinePatterns.find(o=>o.pattern==="vibration_cluster"&&e-o.timestamp<3e5)){St.crossMachinePatterns.push({pattern:"vibration_cluster",affectedMachines:a.map(l=>l.id),severity:"medium",possibleCause:"Common maintenance batch or supply chain issue",timestamp:e});const o={id:`ai-${e}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,type:"prediction",action:`Correlated vibration pattern on ${a.length} roller mills`,reasoning:`Mills ${a.map(l=>l.name).join(", ")} showing similar vibration increase. May indicate common bearing batch or lubrication issue.`,confidence:ss("prediction",t,"medium"),impact:"Batch inspection more efficient than individual checks",status:"pending",triggeredBy:"prediction",priority:"medium",uncertainty:"Correlation does not imply causation - physical inspection needed"};return tr(o),o}for(const[s,o]of Object.entries(i)){if(o.length<2)continue;const l=o.map(p=>p.metrics.load),u=l.reduce((p,g)=>p+g,0)/l.length,h=Math.max(...l)-Math.min(...l);if(h>40&&u>60){const p=o.filter(x=>x.metrics.load>u+15),g=o.filter(x=>x.metrics.load<u-15);if(p.length>0&&g.length>0&&!St.crossMachinePatterns.find(b=>b.pattern==="load_imbalance"&&e-b.timestamp<12e4)){St.crossMachinePatterns.push({pattern:"load_imbalance",affectedMachines:[...p,...g].map(M=>M.id),severity:h>50?"high":"medium",possibleCause:"Suboptimal routing or scheduling",timestamp:e});const b={id:`ai-${e}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,type:"optimization",action:`Load imbalance detected - rebalancing ${s} workload`,reasoning:`${p.map(M=>M.name).join(", ")} overloaded while ${g.map(M=>M.name).join(", ")} underutilized. ${h.toFixed(0)}% load differential.`,confidence:ss("optimization",t),impact:`Balancing extends equipment life and improves throughput by ~${Math.round(h/4)}%`,status:"pending",triggeredBy:"metric",priority:"medium"};return tr(b),b}}}return null}function yje(t){const e=Date.now();if(e-(St.lastAnalysisTime.anomaly||0)<3e4)return null;St.lastAnalysisTime.anomaly=e;const{machines:n}=t;for(const i of n){const r=[{key:"temperature",value:i.metrics.temperature},{key:"vibration",value:i.metrics.vibration},{key:"load",value:i.metrics.load}];for(const{key:a,value:s}of r){const o=`${i.id}-${a}`,l=St.metricHistory.get(o);if(!l||l.history.length<10)continue;const u=l.history.map(b=>b.value),h=u.reduce((b,M)=>b+M,0)/u.length,p=u.reduce((b,M)=>b+Math.pow(M-h,2),0)/u.length,g=Math.sqrt(p);if(g===0)continue;const x=Math.abs((s-h)/g);if(x>2.5){if(St.anomalyHistory.find(E=>E.machineId===i.id&&E.metric===a&&e-E.timestamp<6e4))continue;const M={machineId:i.id,metric:a,value:s,mean:h,stdDev:g,zScore:x,timestamp:e};St.anomalyHistory.push(M),St.anomalyHistory=St.anomalyHistory.filter(E=>e-E.timestamp<3e5);const S=s>h?"above":"below",T=x>3.5?"critical":x>3?"high":"medium",A={id:`ai-${e}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,type:"prediction",action:`Statistical anomaly: ${i.name} ${a} is ${x.toFixed(1)} ${S} normal`,reasoning:`Current: ${s.toFixed(1)}, Historical mean: ${h.toFixed(1)} ${g.toFixed(1)}. This reading is statistically unusual.`,confidence:ss("prediction",t,x>3?"high":"medium"),impact:"Early anomaly detection prevents 67% of unplanned downtime",machineId:i.id,status:"pending",triggeredBy:"prediction",priority:T==="critical"?"critical":T==="high"?"high":"medium",uncertainty:`Based on ${u.length} data points over ~5 minutes`};return tr(A),A}}}return null}function bje(t,e){const n={decisionId:t.id,type:t.type,success:e,timestamp:Date.now(),confidence:t.confidence,actualOutcome:t.outcome};St.decisionOutcomes.push(n),St.decisionOutcomes.length>100&&(St.decisionOutcomes=St.decisionOutcomes.slice(-100)),St.impactStats.totalDecisions++,e&&St.impactStats.successfulDecisions++;const i=St.impactStats.byType[t.type];if(i){i.count++;const r=St.decisionOutcomes.filter(s=>s.type===t.type),a=r.filter(s=>s.success).length;i.successRate=r.length>0?Math.round(a/r.length*100):0}t.type==="maintenance"&&e&&t.priority==="critical"&&(St.impactStats.preventedShutdowns++,St.impactStats.estimatedSavings+=2500+Math.random()*2500),Sje(t.type)}function Sje(t){const e=St.decisionOutcomes.filter(s=>s.type===t);if(e.length<5)return;const n=e.slice(-20),i=n.reduce((s,o)=>s+o.confidence,0)/n.length,a=(n.filter(s=>s.success).length/n.length*100-i)*.2;St.confidenceAdjustments.set(t,Math.max(-15,Math.min(15,a)))}function Mje(t){return St.confidenceAdjustments.get(t)||0}function _je(t){const e=t.metrics.throughput;St.productionTargets.current+=e/3600*6}function Tje(t){const e=Date.now();if(e-(St.lastAnalysisTime.production||0)<6e4)return null;St.lastAnalysisTime.production=e;const{shift:n,current:i}={shift:St.productionTargets.shift,current:St.productionTargets.current},r=i/n*100,a=t.gameTime,s=wje(a,t.currentShift),o=s/8*100;if(r<o-15&&o>30){const l={id:`ai-${e}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,type:"optimization",action:"Production falling behind shift target - recommending throughput optimization",reasoning:`Current: ${r.toFixed(0)}% of shift target, Expected: ${o.toFixed(0)}%. Gap of ${(o-r).toFixed(0)}%.`,confidence:ss("optimization",t),impact:`Closing gap requires ${((o-r)/100*n/(8-s)).toFixed(0)} kg/hr increase`,status:"pending",triggeredBy:"metric",priority:r<o-25?"high":"medium",alternatives:[{action:"Increase mill feed rates",tradeoff:"May impact quality slightly"},{action:"Optimize packer cycle times",tradeoff:"Downstream focus"},{action:"Accept reduced target",tradeoff:"Preserves quality"}]};return tr(l),l}return null}function wje(t,e){const i={morning:6,afternoon:14,night:22}[e];return e==="night"?t>=22?t-22:2+t:Math.max(0,Math.min(8,t-i))}function Aje(t){const e=Math.floor(t);return St.lowProductionHours.includes(e)}function Eje(t){const e=Date.now();if(e-(St.lastAnalysisTime.maintenanceWindow||0)<12e4)return null;const n=Math.floor(t.gameTime),i=Aje(t.gameTime),r=St.lowProductionHours.find(o=>o>n)||St.lowProductionHours[0],a=r>n?r-n:24-n+r,s=t.machines.filter(o=>o.metrics.vibration>2.5||o.metrics.temperature>55||o.metrics.load>90).filter(o=>o.status!=="critical");if(s.length===0)return null;if(i&&s.length>0){St.lastAnalysisTime.maintenanceWindow=e;const o=s[0],l={id:`ai-${e}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,type:"maintenance",action:`Optimal maintenance window - scheduling ${o.name} service now`,reasoning:`Currently in low-production period (shift transition). ${o.name} showing elevated metrics - ideal time for preventive maintenance with minimal production impact.`,confidence:ss("maintenance",t,"high"),impact:"Zero production loss vs estimated 15-30min during peak",machineId:o.id,status:"pending",triggeredBy:"schedule",priority:"medium"};return tr(l),l}if(a<=2&&s.length>0){const o=s.filter(l=>l.status!=="warning");if(o.length>0){St.lastAnalysisTime.maintenanceWindow=e;const l={id:`ai-${e}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,type:"prediction",action:`Scheduling ${o.length} maintenance tasks for upcoming low-production window`,reasoning:`Low-production period in ~${a} hours. Pre-scheduling ${o.map(u=>u.name).join(", ")} for optimal timing.`,confidence:ss("prediction",t),impact:"Proactive scheduling reduces production impact by 80%",status:"pending",triggeredBy:"schedule",priority:"low"};return tr(l),l}}return null}function Cje(t){const e=Date.now();if(e-(St.lastAnalysisTime.weather||0)<12e4)return null;const{weather:n}=t;if(n==="clear"||n==="cloudy")return null;if(St.lastAnalysisTime.weather=e,n==="storm"){const i={id:`ai-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,type:"safety",action:"Storm protocol activated - securing outdoor operations",reasoning:"Severe weather detected - protecting personnel and equipment in exposed areas",confidence:95,impact:"Preventing weather-related incidents and equipment damage",status:"pending",triggeredBy:"alert",priority:"high",alternatives:[{action:"Partial shutdown only",tradeoff:"Some operations continue at risk"}]};return tr(i),i}if(n==="rain"){const i={id:`ai-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,type:"optimization",action:"Rain detected - adjusting loading bay schedules",reasoning:"Wet conditions increase slip hazards in loading areas",confidence:88,impact:"Maintaining safety standards while minimizing throughput impact",status:"pending",triggeredBy:"alert",priority:"medium"};return tr(i),i}return null}function Rje(t){if(!t.emergencyDrillMode)return St.drillPhase!=="none"&&(St.drillPhase="none",St.drillStartTime=null),null;const e=Date.now();if(St.drillPhase==="none"){St.drillPhase="alert",St.drillStartTime=e;const i=b1.find(s=>s.role==="Supervisor"),r=b1.find(s=>s.role==="Safety Officer"),a={id:`ai-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,type:"safety",action:"EMERGENCY DRILL INITIATED - All personnel to designated assembly points",reasoning:"Scheduled safety drill - testing emergency response procedures",confidence:100,impact:"Ensuring regulatory compliance and team preparedness",workerId:(r==null?void 0:r.id)||(i==null?void 0:i.id),status:"in_progress",triggeredBy:"user",priority:"critical"};return tr(a),a}const n=e-(St.drillStartTime||e);if(St.drillPhase==="alert"&&n>1e4){St.drillPhase="evacuation";const i={id:`ai-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,type:"safety",action:"Drill Phase 2: Evacuation in progress - monitoring zone clearance",reasoning:`All zones evacuating - ${t.workers.length} personnel accounted for`,confidence:95,impact:"Tracking evacuation timing for procedure optimization",status:"in_progress",triggeredBy:"schedule",priority:"high"};return tr(i),i}if(St.drillPhase==="evacuation"&&n>25e3){St.drillPhase="assembly";const i={id:`ai-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,type:"safety",action:"Drill Phase 3: Assembly complete - conducting headcount",reasoning:"All personnel at designated assembly points",confidence:98,impact:`Evacuation time: ${Math.round(n/1e3)}s - within target parameters`,status:"in_progress",triggeredBy:"schedule",priority:"medium"};return tr(i),i}if(St.drillPhase==="assembly"&&n>4e4){St.drillPhase="review";const i=Math.round((n-15e3)/1e3),r=i<20?"Excellent":i<30?"Good":"Needs Improvement",a={id:`ai-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,type:"safety",action:`DRILL COMPLETE - Performance Rating: ${r}`,reasoning:`Total drill time: ${Math.round(n/1e3)}s, Evacuation: ${i}s`,confidence:100,impact:"Drill data logged for compliance reporting",status:"completed",outcome:`${r} - All objectives met`,triggeredBy:"schedule",priority:"low"};return tr(a),a}return null}function jje(t){const e=Date.now();if(e-(St.lastAnalysisTime.heatmap||0)<9e4)return null;const{heatMapData:n}=t;if(n.length<10)return null;St.lastAnalysisTime.heatmap=e;const i=n.filter(l=>l.intensity>5);if(i.length===0)return St.congestionHotspots=[],null;const r=[];for(const l of i){const u=r.find(h=>Math.abs(h.x-l.x)<5&&Math.abs(h.z-l.z)<5);u?(u.count++,u.maxIntensity=Math.max(u.maxIntensity,l.intensity)):r.push({x:l.x,z:l.z,count:1,maxIntensity:l.intensity})}const a=r.reduce((l,u)=>l.maxIntensity>u.maxIntensity?l:u,r[0]);if(!a||a.maxIntensity<6)return null;const s=Nje(a.x,a.z),o=a.maxIntensity>8?"high":a.maxIntensity>6?"medium":"low";if(St.congestionHotspots=r.map(l=>({x:l.x,z:l.z,severity:l.maxIntensity>8?"high":l.maxIntensity>6?"medium":"low",lastAnalyzed:e})),o==="high"){const l={id:`ai-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,type:"optimization",action:`Traffic congestion detected in ${s} - recommending route optimization`,reasoning:`Heat map shows intensity ${a.maxIntensity.toFixed(1)} at coordinates (${a.x.toFixed(0)}, ${a.z.toFixed(0)})`,confidence:ss("optimization",t),impact:"Reducing worker transit time and forklift delays by 15-20%",status:"pending",triggeredBy:"metric",priority:"medium",alternatives:[{action:"Add temporary speed zone",tradeoff:"Slower transit but safer"},{action:"Stagger break times",tradeoff:"Reduces peak congestion"}]};return tr(l),l}return null}function Nje(t,e){return e<-15?"Silo Area":e<0?"Milling Floor":e<12?"Sifting Level":e>=12?"Packing Zone":Math.abs(t)<5&&Math.abs(e)<5?"Central Intersection":`Zone (${t.toFixed(0)}, ${e.toFixed(0)})`}function Oje(t){const{currentShift:e,gameTime:n}=t,i=n;if((e==="morning"&&i>=13.5&&i<14.5||e==="afternoon"&&i>=21.5&&i<22.5||e==="night"&&(i>=5.5&&i<6.5||i>=23.5||i<.5))&&!St.shiftTransitionActive){St.shiftTransitionActive=!0,St.lastShift=e;const a=e==="morning"?"afternoon":e==="afternoon"?"night":"morning",s=b1.find(l=>l.role==="Supervisor"),o={id:`ai-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,type:"assignment",action:`Shift handover: Preparing ${a} shift briefing`,reasoning:`${e.charAt(0).toUpperCase()+e.slice(1)} shift ending - coordinating seamless transition`,confidence:95,impact:"Ensuring operational continuity and knowledge transfer",workerId:s==null?void 0:s.id,status:"pending",triggeredBy:"schedule",priority:"medium",alternatives:[{action:"Extended overlap period",tradeoff:"Better handoff but higher labor cost"}]};return tr(o),o}if(St.shiftTransitionActive&&e!==St.lastShift){St.shiftTransitionActive=!1;const a={id:`ai-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,type:"optimization",action:`${e.charAt(0).toUpperCase()+e.slice(1)} shift active - initializing shift parameters`,reasoning:"New shift crew in position - calibrating production targets",confidence:92,impact:"Optimal production ramp-up for new shift",status:"pending",triggeredBy:"schedule",priority:"low"};return tr(a),a}return null}function Dje(t){const e=Date.now();if(e-(St.lastAnalysisTime.fatigue||0)<6e4)return null;const{workerSatisfaction:n}=t;if(n.averageEnergy<40){St.lastAnalysisTime.fatigue=e;const i={id:`ai-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,type:"optimization",action:"Worker energy levels low - initiating rotating break schedule",reasoning:`Average energy at ${n.averageEnergy.toFixed(0)}% - fatigue impacts safety and productivity`,confidence:ss("optimization",t),impact:`Preventing ${Math.round((100-n.averageEnergy)/10)}% productivity loss from fatigue`,status:"pending",triggeredBy:"metric",priority:n.averageEnergy<25?"high":"medium",uncertainty:"Individual worker energy levels may vary"};return tr(i),i}if(n.overallScore<60&&n.productivityBonus<0){St.lastAnalysisTime.fatigue=e;const i={id:`ai-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,type:"optimization",action:"Worker morale below target - recommending engagement activities",reasoning:`Satisfaction score ${n.overallScore}% causing ${Math.abs(n.productivityBonus)}% productivity penalty`,confidence:78,impact:"Restoring positive productivity bonus through improved morale",status:"pending",triggeredBy:"metric",priority:"low",alternatives:[{action:"Schedule team meeting",tradeoff:"Brief production pause"},{action:"Extend break duration",tradeoff:"Improved rest but less output"}]};return tr(i),i}return null}function Pje(t){const e=Date.now();St.predictedEvents=St.predictedEvents.filter(i=>i.predictedTime.getTime()>e);const n=Ije(t.gameTime);n&&(St.predictedEvents.find(r=>r.type==="shift_change")||St.predictedEvents.push({id:`pred-shift-${e}`,type:"shift_change",description:"Upcoming shift change - prepare handover",predictedTime:n,confidence:100,priority:"medium"}));for(const i of t.machines){const r=IO(i.id,"temperature");if(r&&r.trend==="rising"&&r.rateOfChange>.5){const a=(65-i.metrics.temperature)/r.rateOfChange;a>5&&a<60&&(St.predictedEvents.find(o=>o.machineId===i.id&&o.type==="maintenance")||St.predictedEvents.push({id:`pred-maint-${i.id}-${e}`,type:"maintenance",description:`${i.name} may need cooling intervention`,predictedTime:new Date(e+a*6e4),confidence:70+Math.min(20,r.history.length*2),machineId:i.id,priority:a<15?"high":"medium"}))}}if(t.weather==="cloudy"&&(St.predictedEvents.find(r=>r.type==="weather")||St.predictedEvents.push({id:`pred-weather-${e}`,type:"weather",description:"Possible rain - monitor loading bay operations",predictedTime:new Date(e+15*6e4),confidence:60,priority:"low"})),t.workerSatisfaction.averageEnergy<60&&t.workerSatisfaction.averageEnergy>30){const i=(t.workerSatisfaction.averageEnergy-25)*2;St.predictedEvents.find(a=>a.type==="fatigue")||St.predictedEvents.push({id:`pred-fatigue-${e}`,type:"fatigue",description:"Worker energy declining - breaks needed soon",predictedTime:new Date(e+i*6e4),confidence:75,priority:"medium"})}St.predictedEvents.sort((i,r)=>i.predictedTime.getTime()-r.predictedTime.getTime()),St.predictedEvents=St.predictedEvents.slice(0,10)}function Ije(t){const e=[6,14,22],n=Date.now();for(const a of e)if(t<a){const o=(a-t)/24*10;return new Date(n+o*6e4)}const r=(24-t+6)/24*10;return new Date(n+r*6e4)}function ss(t,e,n="high"){let i=75;const r={high:15,medium:5,low:-10}[n];switch(i+=r,t){case"prediction":i-=12;break;case"safety":i+=8;break;case"maintenance":i+=5;break;case"optimization":i-=5;break;case"assignment":i+=3;break}e.emergencyActive&&!e.emergencyDrillMode&&(i-=10),e.metrics.efficiency>95&&(i+=5),e.metrics.efficiency<80&&(i-=8),e.weather==="storm"&&(i-=5),e.weather==="rain"&&(i-=2),e.workerSatisfaction.averageEnergy<50&&(i-=5);const a=Mje(t);return i+=a,i+=(Math.random()-.5)*6,Math.min(99,Math.max(55,Math.round(i)))}function Mw(t,e,n){var o;const i=t.workers.filter(l=>l.status==="idle"||l.status==="working");if(i.length===0){const l=b1.filter(g=>!fb(g.id,"assignment",3e4));if(l.length===0)return null;const h={maintenance:["Maintenance","Engineer"],safety:["Safety Officer","Supervisor"],quality:["Quality Control","Engineer"],general:["Operator","Engineer","Maintenance"]}[e];return l.find(g=>h.includes(g.role))||l[0]}const r={maintenance:["Maintenance","Engineer"],safety:["Safety Officer","Supervisor"],quality:["Quality Control","Engineer"],general:["Operator","Engineer","Maintenance"]},a=t.workerSatisfaction.averageEnergy/100,s=i.map(l=>{let u=0;r[e].includes(l.role)&&(u+=50),l.status==="idle"&&(u+=30),u+=Math.min(l.experience*2,20),MI(l.id)&&(u-=100);const p=St.recentDecisionsByWorker.get(l.id)||[];return u-=p.length*10,u*=.7+a*.3,{worker:l,score:u}});return s.sort((l,u)=>u.score-l.score),((o=s[0])==null?void 0:o.worker)||null}function Uje(t){const e=[];for(const i of t.machines){i.status==="warning"?e.push({machine:i,issueType:"status",severity:"medium",description:`${i.name} showing warning status`}):i.status==="critical"&&e.push({machine:i,issueType:"status",severity:"critical",description:`${i.name} in critical state`});const a={[Wn.ROLLER_MILL]:{warning:65,critical:75},[Wn.PLANSIFTER]:{warning:40,critical:50},[Wn.PACKER]:{warning:35,critical:45},[Wn.SILO]:{warning:30,critical:40},[Wn.CONTROL_ROOM]:{warning:28,critical:35}}[i.type]||{warning:50,critical:70};if(i.metrics.temperature>=a.critical?e.push({machine:i,issueType:"temperature",severity:"critical",description:`${i.name} temperature at ${i.metrics.temperature.toFixed(1)}C - critical`}):i.metrics.temperature>=a.warning&&e.push({machine:i,issueType:"temperature",severity:"medium",description:`${i.name} temperature elevated at ${i.metrics.temperature.toFixed(1)}C`}),i.type===Wn.ROLLER_MILL||i.type===Wn.PLANSIFTER){const s=i.type===Wn.ROLLER_MILL?3.5:7,o=i.type===Wn.ROLLER_MILL?4.5:9;i.metrics.vibration>=o?e.push({machine:i,issueType:"vibration",severity:"high",description:`${i.name} vibration critical at ${i.metrics.vibration.toFixed(2)}mm/s`}):i.metrics.vibration>=s&&e.push({machine:i,issueType:"vibration",severity:"medium",description:`${i.name} vibration elevated at ${i.metrics.vibration.toFixed(2)}mm/s`})}i.metrics.load>98&&e.push({machine:i,issueType:"load",severity:"medium",description:`${i.name} at ${i.metrics.load.toFixed(1)}% capacity`})}const n={critical:0,high:1,medium:2,low:3};return e.sort((i,r)=>n[i.severity]-n[r.severity]),e}function Lje(t,e,n){if(MI(t.machine.id)||fb(t.machine.id,"maintenance",12e4))return null;const i={temperature:`Dispatching ${(n==null?void 0:n.name)||"maintenance team"} to inspect cooling on ${t.machine.name}`,vibration:`Scheduling bearing inspection on ${t.machine.name}`,status:`Initiating diagnostic on ${t.machine.name}`,load:`Rebalancing load on ${t.machine.name}`},r={temperature:"Preventing thermal damage",vibration:"Extending bearing life 15-20%",status:"Identifying root cause",load:"Reducing component stress"},a={id:`ai-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,type:"maintenance",action:i[t.issueType],reasoning:t.description,confidence:ss("maintenance",e),impact:r[t.issueType],machineId:t.machine.id,workerId:n==null?void 0:n.id,status:"pending",triggeredBy:"metric",priority:t.severity==="critical"?"critical":t.severity==="high"?"high":"medium",alternatives:t.severity!=="critical"?[{action:"Continue monitoring",tradeoff:"Risk of worsening"},{action:"Schedule for next shift",tradeoff:"Delayed but less disruptive"}]:void 0,uncertainty:t.issueType==="vibration"?"Depends on visual inspection":void 0};return ub(t.machine.id,6e4),tr(a),a}function Bje(t){const e=Date.now();if(e-(St.lastAnalysisTime.optimization||0)<45e3)return null;St.lastAnalysisTime.optimization=e;const{efficiency:n,throughput:i,quality:r}=t.metrics;let a,s,o,l,u,h;if(n<90){const g=t.machines.find(x=>x.type===Wn.ROLLER_MILL&&x.metrics.load<75);g?(l=g.id,a=`Increasing feed rate on ${g.name} by 8%`,s=`Efficiency at ${n.toFixed(1)}% - ${g.name} has headroom`,o=`Projected +${(95-n).toFixed(1)}% efficiency gain`,u=[{action:"Increase by 5%",tradeoff:"Lower gain, lower risk"},{action:"Wait for shift change",tradeoff:"Defer to incoming team"}],h="Optimal rate depends on grain moisture"):(a="Rebalancing production flow",s=`Efficiency at ${n.toFixed(1)}% - analyzing bottlenecks`,o="Targeting 95%+ efficiency")}else if(i<1300){const g=t.machines.filter(x=>x.type===Wn.PACKER&&x.status==="running");if(g.length>0){const x=g[0];l=x.id,a=`Optimizing cycle time on ${x.name}`,s=`Throughput at ${i} kg/hr - packaging limiting`,o=`+${Math.min(100,1400-i)} kg/hr potential`}else return null}else{const g=t.machines.filter(x=>x.type===Wn.PLANSIFTER);if(g.length>0&&r<99.5){const x=g[Math.floor(Math.random()*g.length)];l=x.id,a=`Fine-tuning sieve on ${x.name}`,s="Particle size showing minor variance",o="+0.3% quality improvement",h="May need multiple adjustments"}else return null}const p={id:`ai-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,type:"optimization",action:a,reasoning:s,confidence:ss("optimization",t),impact:o,machineId:l,status:"pending",triggeredBy:"metric",priority:"medium",alternatives:u,uncertainty:h};return tr(p),p}function zje(t){const e=Date.now();if(e-(St.lastAnalysisTime.prediction||0)<9e4)return null;St.lastAnalysisTime.prediction=e;const n=[];for(const a of t.machines){if(a.type===Wn.ROLLER_MILL&&a.metrics.vibration>2.5){const s=Math.round((4-a.metrics.vibration)*48);s>0&&s<96&&n.push({machine:a,reason:`Bearing pattern indicates ${s}h remaining life`,timeframe:`${Math.ceil(s/24)} days`,impact:`Avoiding ${Math.round(2+Math.random()*4)}h unplanned downtime`})}a.metrics.load>92&&n.push({machine:a,reason:`High load (${a.metrics.load.toFixed(1)}%) accelerating wear`,timeframe:"1-2 weeks",impact:"Maintaining optimal performance"})}if(n.length===0)return null;const i=n[Math.floor(Math.random()*n.length)],r={id:`ai-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,type:"prediction",action:`Scheduling preventive maintenance for ${i.machine.name} in ${i.timeframe}`,reasoning:i.reason,confidence:ss("prediction",t,"medium"),impact:i.impact,machineId:i.machine.id,status:"pending",triggeredBy:"prediction",priority:"low",alternatives:[{action:"Monitor only",tradeoff:"Risk unplanned downtime"},{action:"Immediate inspection",tradeoff:"Current disruption"}],uncertainty:"Based on historical patterns; timing may vary"};return tr(r),r}function kje(t){if(t.safetyMetrics.safetyStops>0){const e=Date.now();if(e-(St.lastAnalysisTime.safety||0)<3e4)return null;St.lastAnalysisTime.safety=e;const n=Mw(t,"safety"),i={id:`ai-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,type:"safety",action:n?`Dispatching ${n.name} to review near-miss incident`:"Initiating automated safety zone review",reasoning:`${t.safetyMetrics.nearMisses} near-miss events - pattern analysis required`,confidence:ss("safety",t),impact:"Maintaining zero-incident record",workerId:n==null?void 0:n.id,status:"pending",triggeredBy:"alert",priority:"high"};return n&&ub(n.id,45e3),tr(i),i}return null}function CV(t,e){let n,i,r;if(e)n=e.machine,i=e.issueType==="vibration"?"bearing inspection":e.issueType==="temperature"?"cooling check":"diagnostic",r=e.description;else{const o=t.machines.filter(l=>l.status==="warning"||l.metrics.load>95);if(o.length===0)return null;n=o[0],i="routine inspection",r=`${n.name} flagged - proactive check`}const a=Mw(t,"maintenance",n==null?void 0:n.id);if(!a||MI(a.id))return null;const s={id:`ai-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,type:"assignment",action:`Dispatching ${a.name} to ${(n==null?void 0:n.name)||"Zone 2"} for ${i}`,reasoning:r,confidence:ss("assignment",t),impact:"Ensuring timely equipment response",machineId:n==null?void 0:n.id,workerId:a.id,status:"pending",triggeredBy:"metric",priority:(e==null?void 0:e.severity)==="critical"?"high":"medium"};return ub(a.id,3e4),tr(s),s}function Fje(t){const e=Date.now();for(const[n,i]of St.pendingChains.entries())if(e>=i.scheduledAt){const r=Fe.getState().aiDecisions.find(s=>s.id===i.parentId);if(!r){St.pendingChains.delete(n);continue}let a=null;switch(i.nextStep){case"progress":a={id:`ai-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,type:r.type,action:`${r.action.replace("Dispatching","Worker en route:")} - ETA 2 min`,reasoning:"Task in progress",confidence:r.confidence+5,impact:r.impact,machineId:r.machineId,workerId:r.workerId,parentDecisionId:r.id,status:"in_progress",triggeredBy:"schedule",priority:r.priority},St.pendingChains.set(a.id,{parentId:a.id,nextStep:"resolution",scheduledAt:e+15e3+Math.random()*2e4});break;case"resolution":{const s=Math.random()>.1;a={id:`ai-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,type:r.type,action:s?`Task completed: ${r.action.replace(/^(Dispatching|Worker en route:)/,"").trim()}`:`Escalated: Additional resources needed for ${r.machineId||"task"}`,reasoning:s?"Work completed successfully":"Additional complexity found",confidence:s?98:75,impact:s?r.impact:"Extended timeline",machineId:r.machineId,workerId:r.workerId,parentDecisionId:r.id,status:"completed",outcome:s?"Resolved":"Escalated",triggeredBy:"schedule",priority:s?"low":"medium"},Fe.getState().updateDecisionStatus(r.id,"completed",s?"Resolved":"Escalated");break}}if(St.pendingChains.delete(n),a)return tr(a),a}return null}function Ym(t,e=8e3){(t.type==="assignment"||t.type==="maintenance")&&St.pendingChains.set(t.id,{parentId:t.id,nextStep:"progress",scheduledAt:Date.now()+e})}function UK(){const t=Fe.getState();return{machines:t.machines,workers:t.workers,alerts:t.alerts,metrics:t.metrics,safetyMetrics:t.safetyMetrics,emergencyActive:t.emergencyActive,emergencyMachineId:t.emergencyMachineId,emergencyDrillMode:t.emergencyDrillMode,gameTime:t.gameTime,currentShift:t.currentShift,weather:t.weather,heatMapData:t.heatMapData,workerSatisfaction:t.workerSatisfaction}}function Gje(t){const e=UK();Pje(e),_je(e);const n=Fje();if(n)return n;if(e.emergencyDrillMode){const s=Rje(e);if(s)return s}if(e.machines.length===0)return null;let i=null;if(i=Cje(e),i)return i;if(i=kje(e),i)return Ym(i),i;if(i=yje(e),i||(i=xje(e),i)||(i=vje(e),i))return i;const r=Uje(e),a=r.filter(s=>s.severity==="critical"||s.severity==="high");if(a.length>0){const s=Mw(e,"maintenance",a[0].machine.id);if(i=Lje(a[0],e,s),i)return Ym(i),i}if(i=Eje(e),i)return Ym(i),i;if(i=Oje(e),i||(i=Tje(e),i)||(i=Dje(e),i)||(i=jje(e),i))return i;if(r.length>0){const s=r.filter(o=>o.severity==="medium");if(s.length>0&&(i=CV(e,s[0]),i))return Ym(i),i}return a.length===0&&(i=Bje(e),i)||(i=zje(e),i)?i:(i=CV(e),i?(Ym(i),i):null)}function Vje(t){const e=UK(),n=t.machineId?e.machines.find(a=>a.id===t.machineId):void 0;if(!n||fb(n.id,"maintenance",6e4))return null;const i=Mw(e,"maintenance",n.id),r={id:`ai-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,type:t.type==="critical"?"maintenance":"assignment",action:`Responding to: ${t.title} - dispatching ${(i==null?void 0:i.name)||"response team"} to ${n.name}`,reasoning:t.message,confidence:ss("maintenance",e),impact:"Immediate response to alert",machineId:n.id,workerId:i==null?void 0:i.id,relatedAlertId:t.id,status:"pending",triggeredBy:"alert",priority:t.type==="critical"?"critical":"high"};return i&&ub(i.id,3e4),ub(n.id,6e4),tr(r),Ym(r),r}function RV(t){const e=Fe.getState();t.workerId&&t.type==="assignment"&&e.updateWorkerTask(t.workerId,t.action.replace(/^Dispatching \w+ \w+ to /,""),t.machineId),e.addAIDecision(t)}function jV(){return[...St.predictedEvents]}function Hje(){return{...St.impactStats}}function qje(){St.impactStats={totalDecisions:0,successfulDecisions:0,preventedShutdowns:0,estimatedSavings:0,shiftStart:Date.now(),byType:{assignment:{count:0,successRate:0},optimization:{count:0,successRate:0},prediction:{count:0,successRate:0},maintenance:{count:0,successRate:0},safety:{count:0,successRate:0}}},St.productionTargets.current=0}function dj(t,e){const n=`${t}-${e}`,i=St.metricHistory.get(n);if(!i||i.history.length===0)return[];const r=i.history.slice(-20).map(l=>l.value),a=Math.min(...r),o=Math.max(...r)-a||1;return r.map(l=>(l-a)/o)}function Wje(t){const e=t.status==="completed"&&(!t.outcome||!t.outcome.toLowerCase().includes("fail")&&!t.outcome.toLowerCase().includes("escalate"));bje(t,e)}function Xje(t){return t.priority==="critical"||t.priority==="high"&&t.type==="safety"||t.type==="prediction"&&t.action.includes("anomaly")}let Xm=null,pj=!1;function $je(){if(pj)return()=>{};pj=!0;const t=Fe.subscribe(e=>e.currentShift,(e,n)=>{Xm!==null&&e!==Xm&&(console.log(`[AI Engine] Shift changed from ${Xm} to ${e} - resetting shift stats`),qje(),St.productionTargets.current=0),Xm=e});return Xm=Fe.getState().currentShift,()=>{t(),pj=!1,Xm=null}}function Yje(){const t=new Set;return Fe.subscribe(n=>n.aiDecisions,n=>{for(const i of n)(i.status==="completed"||i.status==="superseded")&&!t.has(i.id)&&(t.add(i.id),Wje(i),console.log(`[AI Engine] Tracked outcome for decision ${i.id}: ${i.status}`));if(t.size>200){const i=new Set(n.map(r=>r.id));for(const r of t)i.has(r)||t.delete(r)}})}function Zje(){const t=$je(),e=Yje();return console.log("[AI Engine] Initialized with shift observer and outcome tracking"),()=>{t(),e(),console.log("[AI Engine] Observers cleaned up")}}function Kje(t){return St.confidenceAdjustments.get(t)||0}const mj=({data:t,color:e="#22d3ee",height:n=20})=>{if(t.length<2)return null;const i=60,r=t.map((s,o)=>({x:o/(t.length-1)*i,y:n-s*n})),a=r.map((s,o)=>`${o===0?"M":"L"} ${s.x} ${s.y}`).join(" ");return c.jsxs("svg",{width:i,height:n,className:"opacity-80",children:[c.jsx("path",{d:a,fill:"none",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),c.jsx("circle",{cx:r[r.length-1].x,cy:r[r.length-1].y,r:"2",fill:e})]})},Qje=({type:t,confidence:e})=>{const n=Kje(t),i=Math.abs(n)>=1;return c.jsxs("span",{className:"text-cyan-400 inline-flex items-center gap-0.5",children:[e.toFixed(0),"% conf",i&&c.jsx("span",{className:`inline-flex items-center ${n>0?"text-green-400":"text-orange-400"}`,title:`AI learning: ${n>0?"+":""}${n.toFixed(1)}% adjustment based on historical accuracy`,children:n>0?c.jsx(Mfe,{className:"w-3 h-3"}):c.jsx(bfe,{className:"w-3 h-3"})})]})},Jje=({isOpen:t,onClose:e})=>{const[n,i]=z.useState(!1),[r,a]=z.useState("decisions"),[s,o]=z.useState([]),[l,u]=z.useState(null),[h,p]=z.useState({cpu:23,memory:45,decisions:0,successRate:94.2}),g=z.useRef(null),x=z.useRef(0),b=z.useRef(null),M=Fe(k=>k.aiDecisions),S=Fe(k=>k.alerts),T=Fe(k=>k.machines),A=Fe(k=>k.metrics),E=Fe(k=>k.weather),j=Fe(k=>k.currentShift),R=Fe(k=>k.gameTime),C=Fe(k=>k.workerSatisfaction),D=Fe(k=>k.emergencyDrillMode),U=z.useCallback(()=>{i(!0),setTimeout(()=>{const k=Gje();k&&(RV(k),p($=>({...$,decisions:$.decisions+1})),Xje(k)&&(k.priority==="critical"?wt.playAICriticalAlert():k.action.includes("anomaly")?wt.playAIAnomaly():wt.playAIDecision()),b.current=k.id),o(jV()),u(Hje()),i(!1)},600+Math.random()*800)},[]);z.useEffect(()=>{if(t){if(S.length>x.current){const k=S[0];k&&k.machineId&&setTimeout(()=>{const $=Vje(k);$&&(RV($),p(ee=>({...ee,decisions:ee.decisions+1})))},1500)}x.current=S.length}},[S,t]),z.useEffect(()=>{if(!t)return;const k=setTimeout(U,2e3),$=setInterval(U,6e3);return()=>{clearTimeout(k),clearInterval($)}},[t,U]),z.useEffect(()=>{if(!t)return;const k=setInterval(()=>{o(jV())},5e3);return()=>clearInterval(k)},[t]),z.useEffect(()=>{const k=setInterval(()=>{const $=Math.min(M.length*2,15),ee=S.length*3;p(te=>({...te,cpu:Math.max(15,Math.min(55,20+$+ee+(Math.random()-.5)*8)),memory:Math.max(35,Math.min(65,42+$+(Math.random()-.5)*5)),successRate:Math.max(88,Math.min(99,te.successRate+(Math.random()-.45)*2))}))},1500);return()=>clearInterval(k)},[M.length,S.length]);const I=k=>{const $="w-5 h-5";switch(k){case"assignment":return c.jsx(M1,{className:$});case"optimization":return c.jsx(nN,{className:$});case"prediction":return c.jsx(Y_,{className:$});case"maintenance":return c.jsx(_g,{className:$});case"safety":return c.jsx(Qo,{className:$});default:return c.jsx(JL,{className:$})}},L=k=>{switch(k){case"assignment":return"from-blue-500 to-blue-600";case"optimization":return"from-green-500 to-green-600";case"prediction":return"from-purple-500 to-purple-600";case"maintenance":return"from-yellow-500 to-yellow-600";case"safety":return"from-red-500 to-red-600";default:return"from-gray-500 to-gray-600"}},F=k=>{switch(k){case"completed":return c.jsx(BW,{className:"w-3 h-3 text-green-400"});case"in_progress":return c.jsx(Jm,{className:"w-3 h-3 text-blue-400 animate-pulse"});case"pending":return c.jsx($_,{className:"w-3 h-3 text-yellow-400"});case"superseded":return c.jsx(S1,{className:"w-3 h-3 text-slate-400"});default:return null}},G=k=>{const $={critical:"bg-red-500/20 text-red-400 border-red-500/30",high:"bg-orange-500/20 text-orange-400 border-orange-500/30",medium:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",low:"bg-slate-500/20 text-slate-400 border-slate-500/30"};return $[k]||$.medium},H=()=>{switch(E){case"storm":return c.jsx(Ffe,{className:"w-4 h-4 text-purple-400"});case"rain":return c.jsx(Vfe,{className:"w-4 h-4 text-blue-400"});case"cloudy":return c.jsx(t6,{className:"w-4 h-4 text-slate-400"});default:return c.jsx(zD,{className:"w-4 h-4 text-yellow-400"})}},W=k=>{const $=Math.floor(k),ee=Math.floor((k-$)*60);return`${$.toString().padStart(2,"0")}:${ee.toString().padStart(2,"0")}`},Y=k=>{const $=k.getTime()-Date.now();if($<0)return"now";const ee=Math.floor($/6e4);return ee<60?`${ee}m`:`${Math.floor(ee/60)}h ${ee%60}m`};return t?c.jsxs(Xn.div,{initial:{opacity:0,x:400},animate:{opacity:1,x:0},exit:{opacity:0,x:400},className:"fixed right-0 top-0 h-full w-[440px] bg-slate-950/98 backdrop-blur-xl border-l border-cyan-500/30 shadow-2xl z-50 flex flex-col",children:[c.jsxs("div",{className:"p-4 border-b border-cyan-500/20 bg-gradient-to-r from-cyan-950/50 to-slate-950",children:[c.jsxs("div",{className:"flex items-center justify-between bg-gradient-to-r from-cyan-500 to-blue-600 rounded-xl px-4 py-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"relative",children:[c.jsx(Zj,{className:"w-6 h-6 text-white/90",strokeWidth:1.5}),n&&c.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-white rounded-full animate-ping"})]}),c.jsx("div",{children:c.jsxs("h2",{className:"text-lg font-bold text-white flex items-center gap-2",children:["AI Command Center",n&&c.jsx("span",{className:"text-xs text-white/70 animate-pulse",children:"analyzing..."})]})})]}),c.jsx("button",{onClick:e,className:"text-white/70 hover:text-white text-sm font-medium",children:"ESC to close"})]}),c.jsxs("div",{className:"grid grid-cols-4 gap-2 mt-4",children:[c.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-2 border border-slate-700/50",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Wfe,{className:"w-3 h-3 text-slate-500"}),c.jsx("span",{className:"text-[10px] text-slate-500 uppercase",children:"CPU"})]}),c.jsxs("div",{className:"text-sm font-mono text-cyan-400",children:[h.cpu.toFixed(1),"%"]}),c.jsx("div",{className:"h-1 bg-slate-800 rounded-full mt-1 overflow-hidden",children:c.jsx("div",{className:"h-full bg-cyan-500 transition-all duration-500",style:{width:`${h.cpu}%`}})})]}),c.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-2 border border-slate-700/50",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(rhe,{className:"w-3 h-3 text-slate-500"}),c.jsx("span",{className:"text-[10px] text-slate-500 uppercase",children:"Memory"})]}),c.jsxs("div",{className:"text-sm font-mono text-green-400",children:[h.memory.toFixed(1),"%"]}),c.jsx("div",{className:"h-1 bg-slate-800 rounded-full mt-1 overflow-hidden",children:c.jsx("div",{className:"h-full bg-green-500 transition-all duration-500",style:{width:`${h.memory}%`}})})]}),c.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-2 border border-slate-700/50",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Jm,{className:"w-3 h-3 text-slate-500"}),c.jsx("span",{className:"text-[10px] text-slate-500 uppercase",children:"Decisions"})]}),c.jsx("div",{className:"text-sm font-mono text-purple-400",children:h.decisions}),c.jsx("div",{className:"text-[10px] text-slate-600",children:"this session"})]}),c.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-2 border border-slate-700/50",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(K0,{className:"w-3 h-3 text-slate-500"}),c.jsx("span",{className:"text-[10px] text-slate-500 uppercase",children:"Success"})]}),c.jsxs("div",{className:"text-sm font-mono text-emerald-400",children:[h.successRate.toFixed(1),"%"]}),c.jsx("div",{className:"text-[10px] text-slate-600",children:"accuracy"})]})]}),c.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[c.jsx("div",{className:"px-2 py-1.5 bg-slate-900/30 rounded-lg border border-slate-700/30",children:c.jsxs("div",{className:"flex items-center justify-between text-[10px]",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[H(),c.jsx("span",{className:"text-slate-400 capitalize",children:E})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx($_,{className:"w-3 h-3 text-slate-500"}),c.jsx("span",{className:"text-cyan-400 font-mono",children:W(R)})]})]})}),c.jsx("div",{className:"px-2 py-1.5 bg-slate-900/30 rounded-lg border border-slate-700/30",children:c.jsxs("div",{className:"flex items-center justify-between text-[10px]",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Z_,{className:"w-3 h-3 text-slate-500"}),c.jsxs("span",{className:"text-slate-400 capitalize",children:[j," shift"]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Jj,{className:"w-3 h-3 text-slate-500"}),c.jsxs("span",{className:`${C.averageEnergy>50?"text-green-400":"text-orange-400"}`,children:["Energy: ",C.averageEnergy.toFixed(0),"%"]})]})]})})]}),D&&c.jsx("div",{className:"mt-3 px-3 py-2 bg-red-500/20 rounded-lg border border-red-500/30 animate-pulse",children:c.jsxs("div",{className:"flex items-center gap-2 text-red-400 text-sm font-bold",children:[c.jsx(Qo,{className:"w-4 h-4"}),"EMERGENCY DRILL IN PROGRESS"]})}),c.jsx("div",{className:"mt-2 px-2 py-1.5 bg-slate-900/30 rounded-lg border border-slate-700/30",children:c.jsxs("div",{className:"flex items-center justify-between text-[10px]",children:[c.jsx("span",{className:"text-slate-500",children:"Monitoring:"}),c.jsxs("span",{className:"text-cyan-400",children:[T.length," machines | ",S.length," alerts | Eff: ",A.efficiency.toFixed(1),"%"]})]})})]}),c.jsxs("div",{className:"px-4 py-2 border-b border-slate-800 flex gap-2",children:[c.jsxs("button",{onClick:()=>a("decisions"),className:`flex-1 py-1.5 rounded-lg text-xs font-medium transition-all ${r==="decisions"?"bg-cyan-500/20 text-cyan-400 border border-cyan-500/30":"bg-slate-800/50 text-slate-400 border border-slate-700/30 hover:bg-slate-800"}`,children:[c.jsx(Jm,{className:"w-3 h-3 inline mr-1"}),"Live Decisions (",M.length,")"]}),c.jsxs("button",{onClick:()=>a("predictions"),className:`flex-1 py-1.5 rounded-lg text-xs font-medium transition-all ${r==="predictions"?"bg-purple-500/20 text-purple-400 border border-purple-500/30":"bg-slate-800/50 text-slate-400 border border-slate-700/30 hover:bg-slate-800"}`,children:[c.jsx(Kj,{className:"w-3 h-3 inline mr-1"}),"Predictions (",s.length,")"]})]}),l&&l.totalDecisions>0&&c.jsxs("div",{className:"px-4 py-2 border-b border-slate-800 bg-gradient-to-r from-emerald-950/30 to-slate-950",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(Ofe,{className:"w-4 h-4 text-emerald-400"}),c.jsx("span",{className:"text-xs font-semibold text-emerald-400 uppercase tracking-wider",children:"Shift Impact"})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[c.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-2 border border-emerald-500/20",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(qhe,{className:"w-3 h-3 text-emerald-500"}),c.jsx("span",{className:"text-[10px] text-slate-500",children:"Prevented"})]}),c.jsx("div",{className:"text-lg font-bold text-emerald-400",children:l.preventedShutdowns}),c.jsx("div",{className:"text-[10px] text-slate-500",children:"shutdowns"})]}),c.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-2 border border-emerald-500/20",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx($fe,{className:"w-3 h-3 text-emerald-500"}),c.jsx("span",{className:"text-[10px] text-slate-500",children:"Saved"})]}),c.jsxs("div",{className:"text-lg font-bold text-emerald-400",children:["$",(l.estimatedSavings/1e3).toFixed(1),"K"]}),c.jsx("div",{className:"text-[10px] text-slate-500",children:"est. this shift"})]}),c.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-2 border border-emerald-500/20",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx($W,{className:"w-3 h-3 text-emerald-500"}),c.jsx("span",{className:"text-[10px] text-slate-500",children:"Success"})]}),c.jsxs("div",{className:"text-lg font-bold text-emerald-400",children:[l.totalDecisions>0?Math.round(l.successfulDecisions/l.totalDecisions*100):0,"%"]}),c.jsxs("div",{className:"text-[10px] text-slate-500",children:[l.successfulDecisions,"/",l.totalDecisions]})]})]})]}),c.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:r==="decisions"?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"px-4 py-2 border-b border-slate-800 flex items-center justify-between",children:[c.jsx("span",{className:"text-xs text-slate-400 uppercase tracking-wider font-semibold",children:"Live Decision Feed"}),c.jsxs("span",{className:"text-xs text-cyan-400 flex items-center gap-1",children:[c.jsx("span",{className:"w-2 h-2 bg-cyan-400 rounded-full animate-pulse"}),"Context-Aware"]})]}),c.jsxs("div",{ref:g,className:"flex-1 overflow-y-auto p-3 space-y-2",children:[c.jsx(_a,{children:M.slice(0,20).map(k=>c.jsxs(Xn.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3},className:`bg-slate-900/80 rounded-lg border overflow-hidden hover:border-cyan-500/30 transition-colors ${k.status==="completed"?"border-green-500/20":k.status==="in_progress"?"border-blue-500/30":"border-slate-700/50"}`,children:[c.jsx("div",{className:`h-1 bg-gradient-to-r ${L(k.type)}`}),c.jsx("div",{className:"p-3",children:c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx("div",{className:`p-1.5 rounded-md bg-gradient-to-br ${L(k.type)} bg-opacity-20`,children:I(k.type)}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[c.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-slate-800 text-slate-400 uppercase",children:k.type}),c.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${G(k.priority)}`,children:k.priority}),c.jsxs("div",{className:"flex items-center gap-1 ml-auto",children:[F(k.status),c.jsx("span",{className:"text-[10px] text-slate-500 capitalize",children:k.status})]})]}),c.jsx("p",{className:"text-sm text-white font-medium mb-1",children:k.action}),c.jsx("p",{className:"text-xs text-slate-400 mb-2",children:k.reasoning}),c.jsxs("div",{className:"flex items-center gap-3 text-[10px] flex-wrap",children:[c.jsx(Qje,{type:k.type,confidence:k.confidence}),k.machineId&&c.jsxs("span",{className:"text-slate-500 flex items-center gap-1",children:[c.jsx(Ife,{className:"w-3 h-3"}),k.machineId]}),k.workerId&&c.jsxs("span",{className:"text-blue-400 flex items-center gap-1",children:[c.jsx(M1,{className:"w-3 h-3"}),"assigned"]}),c.jsx("span",{className:"text-slate-600 ml-auto",children:k.timestamp.toLocaleTimeString()})]}),k.machineId&&(k.type==="maintenance"||k.type==="prediction")&&c.jsxs("div",{className:"mt-2 flex items-center gap-3 px-2 py-1.5 bg-slate-800/50 rounded border border-slate-700/30",children:[c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("span",{className:"text-[9px] text-slate-500",children:"Temp"}),c.jsx(mj,{data:dj(k.machineId,"temperature"),color:"#f97316",height:16})]}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("span",{className:"text-[9px] text-slate-500",children:"Vib"}),c.jsx(mj,{data:dj(k.machineId,"vibration"),color:"#a855f7",height:16})]}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("span",{className:"text-[9px] text-slate-500",children:"Load"}),c.jsx(mj,{data:dj(k.machineId,"load"),color:"#22d3ee",height:16})]})]}),c.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-green-400 mt-2",children:[c.jsx(K0,{className:"w-3 h-3"}),c.jsx("span",{children:k.impact})]}),k.uncertainty&&c.jsx("div",{className:"mt-2 px-2 py-1 bg-amber-500/10 rounded border border-amber-500/20",children:c.jsxs("div",{className:"flex items-start gap-1.5 text-[10px] text-amber-400",children:[c.jsx(S1,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),c.jsx("span",{children:k.uncertainty})]})}),k.alternatives&&k.alternatives.length>0&&c.jsxs("div",{className:"mt-2 space-y-1",children:[c.jsx("div",{className:"text-[9px] text-slate-500 uppercase",children:"Alternatives:"}),k.alternatives.map(($,ee)=>c.jsxs("div",{className:"text-[10px] text-slate-500 flex items-start gap-1",children:[c.jsx("span",{className:"text-slate-600",children:"-"}),c.jsx("span",{children:$.action}),c.jsxs("span",{className:"text-slate-600",children:["(",$.tradeoff,")"]})]},ee))]}),k.parentDecisionId&&c.jsxs("div",{className:"mt-2 text-[10px] text-purple-400 flex items-center gap-1",children:[c.jsx(Jm,{className:"w-3 h-3"}),c.jsx("span",{children:"Follow-up to previous decision"})]})]})]})})]},k.id))}),M.length===0&&c.jsxs("div",{className:"text-center py-8 text-slate-500",children:[c.jsx(JL,{className:"w-8 h-8 mx-auto mb-2"}),c.jsx("p",{className:"text-sm",children:"AI is analyzing factory state..."}),c.jsx("p",{className:"text-xs text-slate-600",children:T.length>0?"Context-aware decisions will appear here":"Waiting for machine data..."})]})]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"px-4 py-2 border-b border-slate-800 flex items-center justify-between",children:[c.jsx("span",{className:"text-xs text-slate-400 uppercase tracking-wider font-semibold",children:"Predictive Schedule"}),c.jsxs("span",{className:"text-xs text-purple-400 flex items-center gap-1",children:[c.jsx(Y_,{className:"w-3 h-3"}),"Looking Ahead"]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:s.length>0?s.map(k=>c.jsxs(Xn.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"bg-slate-900/80 rounded-lg border border-slate-700/50 p-3",children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{className:`p-1.5 rounded-md ${k.type==="maintenance"?"bg-yellow-500/20":k.type==="shift_change"?"bg-blue-500/20":k.type==="weather"?"bg-purple-500/20":k.type==="fatigue"?"bg-orange-500/20":"bg-green-500/20"}`,children:[k.type==="maintenance"&&c.jsx(_g,{className:"w-4 h-4 text-yellow-400"}),k.type==="shift_change"&&c.jsx(Z_,{className:"w-4 h-4 text-blue-400"}),k.type==="weather"&&c.jsx(t6,{className:"w-4 h-4 text-purple-400"}),k.type==="fatigue"&&c.jsx(Jj,{className:"w-4 h-4 text-orange-400"}),k.type==="optimization"&&c.jsx(nN,{className:"w-4 h-4 text-green-400"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm text-white font-medium",children:k.description}),c.jsx("div",{className:"text-[10px] text-slate-500 capitalize",children:k.type.replace("_"," ")})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-sm font-mono text-cyan-400",children:Y(k.predictedTime)}),c.jsxs("div",{className:"text-[10px] text-slate-500",children:[k.confidence,"% conf"]})]})]}),c.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[c.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${G(k.priority)}`,children:k.priority}),k.machineId&&c.jsx("span",{className:"text-[10px] text-slate-500",children:k.machineId})]})]},k.id)):c.jsxs("div",{className:"text-center py-8 text-slate-500",children:[c.jsx(Kj,{className:"w-8 h-8 mx-auto mb-2"}),c.jsx("p",{className:"text-sm",children:"No upcoming predictions"}),c.jsx("p",{className:"text-xs text-slate-600",children:"Events will appear as patterns are detected"})]})})]})}),c.jsx("div",{className:"p-3 border-t border-slate-800 bg-slate-950/80",children:c.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[c.jsx("span",{children:"MillOS-AI v2.0 (Enhanced)"}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("span",{className:`w-2 h-2 rounded-full ${T.length>0?"bg-green-500":"bg-yellow-500 animate-pulse"}`}),T.length>0?"All systems nominal":"Initializing..."]})]})})]}):null},gj=[{type:"info",title:"Shift Change",message:"Night shift crew arriving in 30 minutes"},{type:"success",title:"Maintenance Complete",message:"Roller Mill #3 back online",machine:"mill-1.5"},{type:"warning",title:"Temperature Rising",message:"Plansifter #2 bearing temperature elevated",machine:"sifter-0"},{type:"info",title:"Quality Check",message:"Hourly sample collection in progress"},{type:"success",title:"Target Met",message:"Daily production target achieved at 94%"},{type:"warning",title:"Low Stock",message:"Packaging supplies below reorder threshold"}],NV=["Forklift stopped for pedestrian - safety protocol activated","Worker detected in forklift path - collision averted","Emergency stop triggered - all clear","Proximity alert - forklift yielded to personnel","Safety system engaged - near-miss avoided"],eNe={info:5e3,success:5e3,warning:8e3,critical:12e3,safety:6e3},tNe=()=>{const[t,e]=z.useState([]),[n,i]=z.useState(0),r=z.useRef(!0),a=Fe(x=>x.safetyMetrics),s=z.useRef(a.safetyStops),o=z.useRef(new Map),l=z.useCallback((x,b)=>{const M=b??eNe[x.type],S=setTimeout(()=>{e(T=>T.filter(A=>A.id!==x.id)),o.current.delete(x.id)},M);o.current.set(x.id,{timeout:S,remaining:M,startTime:Date.now()})},[]),u=z.useCallback(x=>{const b=o.current.get(x);if(b!=null&&b.timeout){clearTimeout(b.timeout);const M=Date.now()-b.startTime,S=Math.max(0,b.remaining-M);o.current.set(x,{timeout:null,remaining:S,startTime:0})}},[]),h=z.useCallback(x=>{const b=o.current.get(x.id);b&&!b.timeout&&b.remaining>0&&l(x,b.remaining)},[l]);z.useEffect(()=>{const x=o.current;return()=>{x.forEach(b=>{b.timeout&&clearTimeout(b.timeout)})}},[]),z.useEffect(()=>{if(!r.current){if(a.safetyStops>s.current){const x=NV[Math.floor(Math.random()*NV.length)],b={id:`safety-${Date.now()}`,type:"safety",title:"Near-Miss Avoided",message:x,timestamp:new Date};wt.playAlert(),e(M=>[b,...M].slice(0,5)),i(M=>M+1),l(b)}s.current=a.safetyStops}},[a.safetyStops,l]),z.useEffect(()=>{const x=gj.slice(0,2).map((M,S)=>({...M,id:`alert-${S}`,timestamp:new Date}));e(x),i(2),x.forEach(M=>l(M));const b=setInterval(()=>{const S={...gj[Math.floor(Math.random()*gj.length)],id:`alert-${Date.now()}`,timestamp:new Date};(S.type==="critical"||S.type==="warning")&&wt.playAlert(),e(T=>[S,...T].slice(0,5)),i(T=>T+1),l(S)},8e3);return r.current=!1,()=>clearInterval(b)},[l]);const p=z.useCallback(x=>{const b=o.current.get(x);b!=null&&b.timeout&&(clearTimeout(b.timeout),o.current.delete(x)),e(M=>M.filter(S=>S.id!==x))},[]),g=x=>{switch(x){case"critical":return{bg:"bg-red-950/90",border:"border-red-500",icon:c.jsx($he,{className:"w-5 h-5 text-red-400"}),accent:"text-red-400"};case"warning":return{bg:"bg-yellow-950/90",border:"border-yellow-500",icon:c.jsx(S1,{className:"w-5 h-5 text-yellow-400"}),accent:"text-yellow-400"};case"success":return{bg:"bg-green-950/90",border:"border-green-500",icon:c.jsx(BW,{className:"w-5 h-5 text-green-400"}),accent:"text-green-400"};case"safety":return{bg:"bg-emerald-950/90",border:"border-emerald-500",icon:c.jsx(Qo,{className:"w-5 h-5 text-emerald-400"}),accent:"text-emerald-400"};default:return{bg:"bg-blue-950/90",border:"border-blue-500",icon:c.jsx(fhe,{className:"w-5 h-5 text-blue-400"}),accent:"text-blue-400"}}};return c.jsxs("div",{className:"fixed top-4 right-4 w-64 sm:w-72 z-30 space-y-1.5 max-h-[35vh] sm:max-h-[40vh] overflow-hidden",children:[t.length===0&&n>0&&c.jsxs(Xn.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"flex items-center justify-end gap-1.5 text-slate-500 text-[10px] pr-1",children:[c.jsx(wfe,{className:"w-3 h-3"}),c.jsxs("span",{children:[n," alerts today"]})]}),c.jsx(_a,{mode:"popLayout",children:t.slice(0,3).map((x,b)=>{const M=g(x.type);return c.jsx(Xn.div,{layout:!0,initial:{opacity:0,x:50,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:50,scale:.95},transition:{duration:.2,delay:b*.05},onMouseEnter:()=>u(x.id),onMouseLeave:()=>h(x),className:`${M.bg} ${M.border} border-l-2 sm:border-l-3 rounded-lg p-1.5 sm:p-2 backdrop-blur-xl shadow-lg cursor-default`,children:c.jsxs("div",{className:"flex items-start gap-1.5 sm:gap-2",children:[c.jsx("div",{className:"flex-shrink-0 mt-0.5 hidden sm:block",children:De.cloneElement(M.icon,{className:"w-4 h-4"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center justify-between gap-2",children:[c.jsx("h4",{className:`font-semibold text-[11px] sm:text-xs ${M.accent} truncate`,children:x.title}),c.jsx("button",{onClick:()=>p(x.id),className:"text-slate-500 hover:text-white text-sm leading-none flex-shrink-0",children:""})]}),c.jsx("p",{className:"text-[10px] sm:text-[11px] text-slate-300 mt-0.5 line-clamp-1",children:x.message}),c.jsx("span",{className:"text-[8px] sm:text-[9px] text-slate-600",children:x.timestamp.toLocaleTimeString()})]})]})},x.id)})}),t.length>3&&c.jsxs("div",{className:"text-center text-[9px] sm:text-[10px] text-slate-500 py-1",children:["+",t.length-3," more"]})]})},nNe={0:{name:"Junior",color:"#eab308"},1:{name:"Regular",color:"#f97316"},2:{name:"Senior",color:"#3b82f6"},3:{name:"Lead",color:"#8b5cf6"},4:{name:"Expert",color:"#dc2626"}},iNe={machineOperation:"Machine Operation",safetyProtocols:"Safety Protocols",qualityControl:"Quality Control",troubleshooting:"Troubleshooting",teamwork:"Teamwork"},rNe=t=>{const e=[],n=70+t.experience*2;for(let i=0;i<Math.min(t.experience,3);i++){const r=new Date().getFullYear()-i-1;e.push({id:`review-${t.id}-${r}`,date:`${r}-12-15`,reviewer:i===0?"Sarah Mitchell":i===1?"James Chen":"Maria Garcia",overallScore:Math.min(100,n+Math.floor(Math.random()*15)-5),strengths:[t.role==="Safety Officer"?"Excellent safety awareness":"Strong technical skills","Good communication",t.experience>3?"Mentoring capabilities":"Quick learner"].slice(0,2+i%2),improvements:["Time management","Documentation"].slice(0,1+i%2),notes:`${t.name} has shown consistent improvement throughout the year.`})}return e},aNe=t=>{const e=Math.min(5,Math.floor(t.experience/2)+1),i={Supervisor:{teamwork:1,machineOperation:0},Engineer:{troubleshooting:1,machineOperation:1},Operator:{machineOperation:1},"Safety Officer":{safetyProtocols:2},"Quality Control":{qualityControl:2},Maintenance:{troubleshooting:1,machineOperation:1}}[t.role]||{};return{machineOperation:Math.min(5,e+(i.machineOperation||0)),safetyProtocols:Math.min(5,e+(i.safetyProtocols||0)),qualityControl:Math.min(5,e+(i.qualityControl||0)),troubleshooting:Math.min(5,e+(i.troubleshooting||0)),teamwork:Math.min(5,e+(i.teamwork||0))}},sNe=({name:t,level:e})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-24 text-xs text-slate-400 truncate",children:t}),c.jsx("div",{className:"flex-1 flex gap-0.5",children:[1,2,3,4,5].map(n=>c.jsx("div",{className:`h-2 flex-1 rounded-sm ${n<=e?"bg-cyan-500":"bg-slate-700"}`},n))}),c.jsx("div",{className:"w-4 text-xs text-slate-500 text-right",children:e})]}),oNe=({review:t})=>{const[e,n]=z.useState(!1),i=t.overallScore>=85?"text-green-400":t.overallScore>=70?"text-cyan-400":"text-amber-400";return c.jsxs("div",{className:"bg-slate-800/50 rounded-lg border border-slate-700/50 overflow-hidden",children:[c.jsxs("button",{onClick:()=>n(!e),className:"w-full flex items-center justify-between p-3 hover:bg-slate-700/30 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Kj,{className:"w-4 h-4 text-slate-500"}),c.jsx("span",{className:"text-sm text-white",children:new Date(t.date).getFullYear()})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:`text-lg font-bold ${i}`,children:t.overallScore}),c.jsx("span",{className:"text-xs text-slate-500",children:"/100"}),e?c.jsx(Cu,{className:"w-4 h-4 text-slate-500"}):c.jsx(Cc,{className:"w-4 h-4 text-slate-500"})]})]}),c.jsx(_a,{children:e&&c.jsx(Xn.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:c.jsxs("div",{className:"px-3 pb-3 space-y-2 border-t border-slate-700/50 pt-2",children:[c.jsxs("div",{className:"text-[10px] text-slate-500",children:["Reviewed by: ",t.reviewer]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-[10px] text-green-400 uppercase tracking-wider mb-1",children:"Strengths"}),c.jsx("div",{className:"flex flex-wrap gap-1",children:t.strengths.map((r,a)=>c.jsx("span",{className:"px-2 py-0.5 bg-green-500/20 text-green-300 text-[10px] rounded-full",children:r},a))})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-[10px] text-amber-400 uppercase tracking-wider mb-1",children:"Areas for Growth"}),c.jsx("div",{className:"flex flex-wrap gap-1",children:t.improvements.map((r,a)=>c.jsx("span",{className:"px-2 py-0.5 bg-amber-500/20 text-amber-300 text-[10px] rounded-full",children:r},a))})]}),c.jsxs("div",{className:"flex items-start gap-2 mt-2",children:[c.jsx(bhe,{className:"w-3 h-3 text-slate-500 mt-0.5 flex-shrink-0"}),c.jsx("p",{className:"text-[10px] text-slate-400 italic",children:t.notes})]})]})})})]})},lNe=t=>{const e="w-8 h-8 text-white";switch(t){case"Supervisor":return c.jsx(LW,{className:e});case"Engineer":return c.jsx(_g,{className:e});case"Operator":return c.jsx(FW,{className:e});case"Safety Officer":return c.jsx(Qo,{className:e});case"Quality Control":return c.jsx(kW,{className:e});case"Maintenance":return c.jsx(_g,{className:e});default:return c.jsx(M1,{className:e})}},cNe=({worker:t,onClose:e})=>{const[n,i]=z.useState("overview"),r=z.useMemo(()=>{const h=t.experience||0;return h>=10?4:h>=5?3:h>=3?2:h>=1?1:0},[t.experience]),a=nNe[r],s=z.useMemo(()=>t.skills||aNe(t),[t]),o=z.useMemo(()=>t.performanceReviews||rNe(t),[t]),l=()=>{switch(t.status){case"working":return"bg-green-500";case"responding":return"bg-yellow-500";case"break":return"bg-gray-500";default:return"bg-blue-500"}},u=()=>{switch(t.role){case"Supervisor":return"from-blue-500 to-blue-700";case"Engineer":return"from-purple-500 to-purple-700";case"Operator":return"from-orange-500 to-orange-700";case"Safety Officer":return"from-green-500 to-green-700";case"Quality Control":return"from-pink-500 to-pink-700";case"Maintenance":return"from-yellow-500 to-yellow-700";default:return"from-gray-500 to-gray-700"}};return c.jsx(Xn.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},className:"absolute bottom-6 left-6 w-96 z-20 max-h-[85vh] flex flex-col",children:c.jsxs("div",{className:"bg-slate-900/95 backdrop-blur-xl rounded-xl border border-slate-600 shadow-2xl overflow-hidden flex flex-col",children:[c.jsxs("div",{className:`bg-gradient-to-r ${u()} p-4 relative flex-shrink-0`,children:[c.jsx("button",{onClick:e,className:"absolute top-2 right-2 w-6 h-6 bg-white/20 rounded-full flex items-center justify-center text-white hover:bg-white/30 transition-colors",children:""}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"w-16 h-16 rounded-full bg-white/20 flex items-center justify-center relative",children:[lNe(t.role),c.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full flex items-center justify-center text-[10px] font-bold text-white border-2 border-white/30",style:{backgroundColor:a.color},title:`${a.name} level`,children:a.name[0]})]}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-white",children:t.name}),c.jsxs("p",{className:"text-white/80 text-sm",children:[a.name," ",t.role]}),c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c.jsx("span",{className:`w-2 h-2 rounded-full ${l()} animate-pulse`}),c.jsx("span",{className:"text-white/70 text-xs capitalize",children:t.status})]})]})]})]}),c.jsx("div",{className:"flex border-b border-slate-700/50 flex-shrink-0",children:[{id:"overview",label:"Overview",icon:M1},{id:"skills",label:"Skills",icon:K0},{id:"reviews",label:"Reviews",icon:XW}].map(h=>c.jsxs("button",{onClick:()=>i(h.id),className:`flex-1 flex items-center justify-center gap-1.5 py-2.5 text-xs font-medium transition-colors ${n===h.id?"text-cyan-400 border-b-2 border-cyan-400 bg-cyan-500/10":"text-slate-400 hover:text-white hover:bg-slate-800/50"}`,children:[c.jsx(h.icon,{className:"w-3.5 h-3.5"}),h.label]},h.id))}),c.jsx("div",{className:"flex-1 overflow-y-auto max-h-[400px]",children:c.jsxs(_a,{mode:"wait",children:[n==="overview"&&c.jsxs(Xn.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},children:[c.jsxs("div",{className:"p-4 border-b border-slate-700/50",children:[c.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wider mb-1",children:"Current Task"}),c.jsx("div",{className:"text-white font-medium",children:t.currentTask}),t.targetMachine&&c.jsxs("div",{className:"text-xs text-cyan-400 mt-1",children:["@ ",t.targetMachine]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 p-4",children:[c.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3",children:[c.jsx("div",{className:"text-xs text-slate-500 uppercase",children:"Experience"}),c.jsxs("div",{className:"text-lg font-bold text-white",children:[t.experience," years"]})]}),c.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3",children:[c.jsx("div",{className:"text-xs text-slate-500 uppercase",children:"Shift Start"}),c.jsx("div",{className:"text-lg font-bold text-white",children:t.shiftStart})]})]}),c.jsxs("div",{className:"px-4 pb-4",children:[c.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wider mb-2",children:"Certifications"}),c.jsx("div",{className:"flex flex-wrap gap-1",children:t.certifications.map((h,p)=>c.jsx("span",{className:"px-2 py-1 bg-slate-800 text-slate-300 text-xs rounded-full border border-slate-700",children:h},p))})]})]},"overview"),n==="skills"&&c.jsxs(Xn.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},className:"p-4 space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wider",children:"Skill Levels"}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(UW,{className:"w-3.5 h-3.5 text-cyan-400"}),c.jsxs("span",{className:"text-xs text-cyan-400",children:["Level ",r+1]})]})]}),Object.entries(s).map(([h,p])=>c.jsx(sNe,{name:iNe[h],level:p},h)),c.jsxs("div",{className:"mt-4 pt-3 border-t border-slate-700/50",children:[c.jsxs("div",{className:"flex items-center justify-between text-xs mb-1.5",children:[c.jsx("span",{className:"text-slate-500",children:"Progress to next level"}),c.jsxs("span",{className:"text-cyan-400",children:[Math.floor(Math.random()*50)+50,"%"]})]}),c.jsx("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-500 to-blue-500 rounded-full",style:{width:`${Math.floor(Math.random()*50)+50}%`}})})]})]},"skills"),n==="reviews"&&c.jsxs(Xn.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},className:"p-4 space-y-2",children:[c.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wider mb-3",children:"Performance Reviews"}),o.length>0?o.map(h=>c.jsx(oNe,{review:h},h.id)):c.jsx("div",{className:"text-center py-8 text-slate-500 text-sm",children:"No performance reviews yet"})]},"reviews")]})}),c.jsxs("div",{className:"p-4 border-t border-slate-700/50 flex gap-2 flex-shrink-0",children:[c.jsx("button",{className:"flex-1 bg-blue-600 hover:bg-blue-500 text-white text-sm py-2 rounded-lg font-medium transition-colors",children:"Assign Task"}),c.jsx("button",{className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white text-sm py-2 rounded-lg font-medium transition-colors",children:"View History"})]})]})})};/**
 * postprocessing v6.38.0 build Sat Nov 08 2025
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2025 Raoul van Rschen
 * @license Zlib
 */var vj=1/1e3,uNe=1e3,fNe=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(t){typeof document<"u"&&document.hidden!==void 0&&(t?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=t)}get delta(){return this._delta*vj}get fixedDelta(){return this._fixedDelta*vj}set fixedDelta(t){this._fixedDelta=t*uNe}get elapsed(){return this._elapsed*vj}update(t){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(t!==void 0?t:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(t){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},hNe=(()=>{const t=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]),n=new An;return n.setAttribute("position",new yi(t,3)),n.setAttribute("uv",new yi(e,2)),n})(),Es=class UO{static get fullscreenGeometry(){return hNe}constructor(e="Pass",n=new Zh,i=new Ol){this.name=e,this.renderer=null,this.scene=n,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const n=this.fullscreenMaterial;n!==null&&(n.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let n=this.screen;n!==null?n.material=e:(n=new zi(UO.fullscreenGeometry,e),n.frustumCulled=!1,this.scene===null&&(this.scene=new Zh),this.scene.add(n),this.screen=n)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,n=Il){}render(e,n,i,r,a){throw new Error("Render method not implemented!")}setSize(e,n){}initialize(e,n,i){}dispose(){for(const e of Object.keys(this)){const n=this[e];(n instanceof Ei||n instanceof za||n instanceof ji||n instanceof UO)&&this[e].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},dNe=class extends Es{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(t,e,n,i,r){const a=t.state.buffers.stencil;a.setLocked(!1),a.setTest(!1)}},pNe=`#ifdef COLOR_WRITE
#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#endif
#ifdef DEPTH_WRITE
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}
#endif
#ifdef USE_WEIGHTS
uniform vec4 channelWeights;
#endif
uniform float opacity;varying vec2 vUv;void main(){
#ifdef COLOR_WRITE
vec4 texel=texture2D(inputBuffer,vUv);
#ifdef USE_WEIGHTS
texel*=channelWeights;
#endif
gl_FragColor=opacity*texel;
#ifdef COLOR_SPACE_CONVERSION
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
#else
gl_FragColor=vec4(0.0);
#endif
#ifdef DEPTH_WRITE
gl_FragDepth=readDepth(vUv);
#endif
}`,dv="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",LK=class extends di{constructor(){super({name:"CopyMaterial",defines:{DEPTH_PACKING:"0",COLOR_WRITE:"1"},uniforms:{inputBuffer:new Et(null),depthBuffer:new Et(null),channelWeights:new Et(null),opacity:new Et(1)},blending:_r,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:pNe,vertexShader:dv}),this.depthFunc=t1}get inputBuffer(){return this.uniforms.inputBuffer.value}set inputBuffer(t){const e=t!==null;this.colorWrite!==e&&(e?this.defines.COLOR_WRITE=!0:delete this.defines.COLOR_WRITE,this.colorWrite=e,this.needsUpdate=!0),this.uniforms.inputBuffer.value=t}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(t){const e=t!==null;this.depthWrite!==e&&(e?this.defines.DEPTH_WRITE=!0:delete this.defines.DEPTH_WRITE,this.depthTest=e,this.depthWrite=e,this.needsUpdate=!0),this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}get channelWeights(){return this.uniforms.channelWeights.value}set channelWeights(t){t!==null?(this.defines.USE_WEIGHTS="1",this.uniforms.channelWeights.value=t):delete this.defines.USE_WEIGHTS,this.needsUpdate=!0}setInputBuffer(t){this.uniforms.inputBuffer.value=t}getOpacity(t){return this.uniforms.opacity.value}setOpacity(t){this.uniforms.opacity.value=t}},BK=class extends Es{constructor(t,e=!0){super("CopyPass"),this.fullscreenMaterial=new LK,this.needsSwap=!1,this.renderTarget=t,t===void 0&&(this.renderTarget=new Ei(1,1,{minFilter:Rn,magFilter:Rn,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(t){this.autoResize=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(t){this.autoResize=t}render(t,e,n,i,r){this.fullscreenMaterial.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){this.autoResize&&this.renderTarget.setSize(t,e)}initialize(t,e,n){n!==void 0&&(this.renderTarget.texture.type=n,n!==nr?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":t!==null&&t.outputColorSpace===Kn&&(this.renderTarget.texture.colorSpace=Kn))}},OV=new zt,zK=class extends Es{constructor(t=!0,e=!0,n=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=t,this.depth=e,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(t,e,n){this.color=t,this.depth=e,this.stencil=n}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(t){this.overrideClearColor=t}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(t){this.overrideClearAlpha=t}render(t,e,n,i,r){const a=this.overrideClearColor,s=this.overrideClearAlpha,o=t.getClearAlpha(),l=a!==null,u=s>=0;l?(t.getClearColor(OV),t.setClearColor(a,u?s:o)):u&&t.setClearAlpha(s),t.setRenderTarget(this.renderToScreen?null:e),t.clear(this.color,this.depth,this.stencil),l?t.setClearColor(OV,o):u&&t.setClearAlpha(o)}},mNe=class extends Es{constructor(t,e){super("MaskPass",t,e),this.needsSwap=!1,this.clearPass=new zK(!1,!1,!0),this.inverse=!1}set mainScene(t){this.scene=t}set mainCamera(t){this.camera=t}get inverted(){return this.inverse}set inverted(t){this.inverse=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(t){this.inverted=t}render(t,e,n,i,r){const a=t.getContext(),s=t.state.buffers,o=this.scene,l=this.camera,u=this.clearPass,h=this.inverted?0:1,p=1-h;s.color.setMask(!1),s.depth.setMask(!1),s.color.setLocked(!0),s.depth.setLocked(!0),s.stencil.setTest(!0),s.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),s.stencil.setFunc(a.ALWAYS,h,4294967295),s.stencil.setClear(p),s.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?u.render(t,null):(u.render(t,e),u.render(t,n))),this.renderToScreen?(t.setRenderTarget(null),t.render(o,l)):(t.setRenderTarget(e),t.render(o,l),t.setRenderTarget(n),t.render(o,l)),s.color.setLocked(!1),s.depth.setLocked(!1),s.stencil.setLocked(!1),s.stencil.setFunc(a.EQUAL,1,4294967295),s.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),s.stencil.setLocked(!0)}},gNe=class{constructor(t=null,{depthBuffer:e=!0,stencilBuffer:n=!1,multisampling:i=0,frameBufferType:r}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,n,r,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new BK,this.depthTexture=null,this.passes=[],this.timer=new fNe,this.autoRenderToScreen=!0,this.setRenderer(t)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(t){const e=this.inputBuffer,n=this.multisampling;n>0&&t>0?(this.inputBuffer.samples=t,this.outputBuffer.samples=t,this.inputBuffer.dispose(),this.outputBuffer.dispose()):n!==t&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,t),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(t){if(this.renderer=t,t!==null){const e=t.getSize(new Ye),n=t.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===nr&&t.outputColorSpace===Kn&&(this.inputBuffer.texture.colorSpace=Kn,this.outputBuffer.texture.colorSpace=Kn,this.inputBuffer.dispose(),this.outputBuffer.dispose()),t.autoClear=!1,this.setSize(e.width,e.height);for(const r of this.passes)r.initialize(t,n,i)}}replaceRenderer(t,e=!0){const n=this.renderer,i=n.domElement.parentNode;return this.setRenderer(t),e&&i!==null&&(i.removeChild(n.domElement),i.appendChild(t.domElement)),n}createDepthTexture(){const t=this.depthTexture=new Jg;return this.inputBuffer.depthTexture=t,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(t.format=X0,t.type=q0):t.type=Ac,t}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const t of this.passes)t.setDepthTexture(null)}}createBuffer(t,e,n,i){const r=this.renderer,a=r===null?new Ye:r.getDrawingBufferSize(new Ye),s={minFilter:Rn,magFilter:Rn,stencilBuffer:e,depthBuffer:t,type:n},o=new Ei(a.width,a.height,s);return i>0&&(o.samples=i),n===nr&&r!==null&&r.outputColorSpace===Kn&&(o.texture.colorSpace=Kn),o.texture.name="EffectComposer.Buffer",o.texture.generateMipmaps=!1,o}setMainScene(t){for(const e of this.passes)e.mainScene=t}setMainCamera(t){for(const e of this.passes)e.mainCamera=t}addPass(t,e){const n=this.passes,i=this.renderer,r=i.getDrawingBufferSize(new Ye),a=i.getContext().getContextAttributes().alpha,s=this.inputBuffer.texture.type;if(t.setRenderer(i),t.setSize(r.width,r.height),t.initialize(i,a,s),this.autoRenderToScreen&&(n.length>0&&(n[n.length-1].renderToScreen=!1),t.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?n.splice(e,0,t):n.push(t),this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!0),t.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const o=this.createDepthTexture();for(t of n)t.setDepthTexture(o)}else t.setDepthTexture(this.depthTexture)}removePass(t){const e=this.passes,n=e.indexOf(t);if(n!==-1&&e.splice(n,1).length>0){if(this.depthTexture!==null){const a=(o,l)=>o||l.needsDepthTexture;e.reduce(a,!1)||(t.getDepthTexture()===this.depthTexture&&t.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&n===e.length&&(t.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const t=this.passes;this.deleteDepthTexture(),t.length>0&&(this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!1),this.passes=[])}render(t){const e=this.renderer,n=this.copyPass;let i=this.inputBuffer,r=this.outputBuffer,a=!1,s,o,l;t===void 0&&(this.timer.update(),t=this.timer.getDelta());for(const u of this.passes)u.enabled&&(u.render(e,i,r,t,a),u.needsSwap&&(a&&(n.renderToScreen=u.renderToScreen,s=e.getContext(),o=e.state.buffers.stencil,o.setFunc(s.NOTEQUAL,1,4294967295),n.render(e,i,r,t,a),o.setFunc(s.EQUAL,1,4294967295)),l=i,i=r,r=l),u instanceof mNe?a=!0:u instanceof dNe&&(a=!1))}setSize(t,e,n){const i=this.renderer,r=i.getSize(new Ye);(t===void 0||e===void 0)&&(t=r.width,e=r.height),(r.width!==t||r.height!==e)&&i.setSize(t,e,n);const a=i.getDrawingBufferSize(new Ye);this.inputBuffer.setSize(a.width,a.height),this.outputBuffer.setSize(a.width,a.height);for(const s of this.passes)s.setSize(a.width,a.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const t of this.passes)t.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),Es.fullscreenGeometry.dispose()}},Mu={NONE:0,DEPTH:1,CONVOLUTION:2},Ai={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},vNe=class{constructor(){this.shaderParts=new Map([[Ai.FRAGMENT_HEAD,null],[Ai.FRAGMENT_MAIN_UV,null],[Ai.FRAGMENT_MAIN_IMAGE,null],[Ai.VERTEX_HEAD,null],[Ai.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=Mu.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=Zo}},xj=!1,DV=class{constructor(t=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(t),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let n;if(e.material.flatShading)switch(e.material.side){case ai:n=this.materialsFlatShadedDoubleSide;break;case Hr:n=this.materialsFlatShadedBackSide;break;default:n=this.materialsFlatShaded;break}else switch(e.material.side){case ai:n=this.materialsDoubleSide;break;case Hr:n=this.materialsBackSide;break;default:n=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=n[2]:e.isInstancedMesh?e.material=n[1]:e.material=n[0],++this.meshCount}}}cloneMaterial(t){if(!(t instanceof di))return t.clone();const e=t.uniforms,n=new Map;for(const r in e){const a=e[r].value;a.isRenderTargetTexture&&(e[r].value=null,n.set(r,a))}const i=t.clone();for(const r of n)e[r[0]].value=r[1],i.uniforms[r[0]].value=r[1];return i}setMaterial(t){if(this.disposeMaterials(),this.material=t,t!==null){const e=this.materials=[this.cloneMaterial(t),this.cloneMaterial(t),this.cloneMaterial(t)];for(const n of e)n.uniforms=Object.assign({},t.uniforms),n.side=_u;e[2].skinning=!0,this.materialsBackSide=e.map(n=>{const i=this.cloneMaterial(n);return i.uniforms=Object.assign({},t.uniforms),i.side=Hr,i}),this.materialsDoubleSide=e.map(n=>{const i=this.cloneMaterial(n);return i.uniforms=Object.assign({},t.uniforms),i.side=ai,i}),this.materialsFlatShaded=e.map(n=>{const i=this.cloneMaterial(n);return i.uniforms=Object.assign({},t.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=e.map(n=>{const i=this.cloneMaterial(n);return i.uniforms=Object.assign({},t.uniforms),i.flatShading=!0,i.side=Hr,i}),this.materialsFlatShadedDoubleSide=e.map(n=>{const i=this.cloneMaterial(n);return i.uniforms=Object.assign({},t.uniforms),i.flatShading=!0,i.side=ai,i})}}render(t,e,n){const i=t.shadowMap.enabled;if(t.shadowMap.enabled=!1,xj){const r=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),t.render(e,n);for(const a of r)a[0].material=a[1];this.meshCount!==r.size&&r.clear()}else{const r=e.overrideMaterial;e.overrideMaterial=this.material,t.render(e,n),e.overrideMaterial=r}t.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){const t=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of t)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return xj}static set workaroundEnabled(t){xj=t}},Ih=-1,Wr=class extends tl{constructor(t,e=Ih,n=Ih,i=1){super(),this.resizable=t,this.baseSize=new Ye(1,1),this.preferredSize=new Ye(e,n),this.target=this.preferredSize,this.s=i,this.effectiveSize=new Ye,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const t=this.baseSize,e=this.preferredSize,n=this.effectiveSize,i=this.scale;e.width!==Ih?n.width=e.width:e.height!==Ih?n.width=Math.round(e.height*(t.width/Math.max(t.height,1))):n.width=Math.round(t.width*i),e.height!==Ih?n.height=e.height:e.width!==Ih?n.height=Math.round(e.width/Math.max(t.width/Math.max(t.height,1),1)):n.height=Math.round(t.height*i)}get width(){return this.effectiveSize.width}set width(t){this.preferredWidth=t}get height(){return this.effectiveSize.height}set height(t){this.preferredHeight=t}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(t){this.s!==t&&(this.s=t,this.preferredSize.setScalar(Ih),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(t){this.scale=t}get baseWidth(){return this.baseSize.width}set baseWidth(t){this.baseSize.width!==t&&(this.baseSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(t){this.baseWidth=t}get baseHeight(){return this.baseSize.height}set baseHeight(t){this.baseSize.height!==t&&(this.baseSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(t){this.baseHeight=t}setBaseSize(t,e){(this.baseSize.width!==t||this.baseSize.height!==e)&&(this.baseSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(t){this.preferredSize.width!==t&&(this.preferredSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(t){this.preferredWidth=t}get preferredHeight(){return this.preferredSize.height}set preferredHeight(t){this.preferredSize.height!==t&&(this.preferredSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(t){this.preferredHeight=t}setPreferredSize(t,e){(this.preferredSize.width!==t||this.preferredSize.height!==e)&&(this.preferredSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(t){this.s=t.scale,this.baseSize.set(t.baseWidth,t.baseHeight),this.preferredSize.set(t.preferredWidth,t.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return Ih}},Bn={ADD:0,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},xNe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb+y.rgb,y.a),y.a*opacity);}",yNe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4((x.rgb+y.rgb)*0.5,y.a),y.a*opacity);}",bNe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.xy,xHSL.z));return mix(x,vec4(z,y.a),y.a*opacity);}",SNe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb,b=y.rgb;vec3 z=mix(step(0.0,b)*(1.0-min(vec3(1.0),(1.0-a)/b)),vec3(1.0),step(1.0,a));return mix(x,vec4(z,y.a),y.a*opacity);}",MNe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb,b=y.rgb;vec3 z=step(0.0,a)*mix(min(vec3(1.0),a/max(1.0-b,1e-9)),vec3(1.0),step(1.0,b));return mix(x,vec4(z,y.a),y.a*opacity);}",_Ne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(min(x.rgb,y.rgb),y.a),y.a*opacity);}",TNe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(abs(x.rgb-y.rgb),y.a),y.a*opacity);}",wNe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb/max(y.rgb,1e-12),y.a),y.a*opacity);}",ANe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4((x.rgb+y.rgb-2.0*x.rgb*y.rgb),y.a),y.a*opacity);}",ENe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=min(x.rgb,1.0);vec3 b=min(y.rgb,1.0);vec3 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,b));return mix(x,vec4(z,y.a),y.a*opacity);}",CNe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(step(1.0,x.rgb+y.rgb),y.a),y.a*opacity);}",RNe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.x,xHSL.yz));return mix(x,vec4(z,y.a),y.a*opacity);}",jNe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(1.0-y.rgb,y.a),y.a*opacity);}",NNe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(y.rgb*(1.0-x.rgb),y.a),y.a*opacity);}",ONe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(max(x.rgb,y.rgb),y.a),y.a*opacity);}",DNe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(clamp(y.rgb+x.rgb-1.0,0.0,1.0),y.a),y.a*opacity);}",PNe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(min(x.rgb+y.rgb,1.0),y.a),y.a*opacity);}",INe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(clamp(2.0*y.rgb+x.rgb-1.0,0.0,1.0),y.a),y.a*opacity);}",UNe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.xy,yHSL.z));return mix(x,vec4(z,y.a),y.a*opacity);}",LNe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb*y.rgb,y.a),y.a*opacity);}",BNe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(1.0-abs(1.0-x.rgb-y.rgb),y.a),y.a*opacity);}",zNe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,y.a*opacity);}",kNe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(2.0*y.rgb*x.rgb,1.0-2.0*(1.0-y.rgb)*(1.0-x.rgb),step(0.5,x.rgb));return mix(x,vec4(z,y.a),y.a*opacity);}",FNe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 y2=2.0*y.rgb;vec3 z=mix(mix(y2,x.rgb,step(0.5*x.rgb,y.rgb)),max(y2-1.0,vec3(0.0)),step(x.rgb,y2-1.0));return mix(x,vec4(z,y.a),y.a*opacity);}",GNe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(min(x.rgb*x.rgb/max(1.0-y.rgb,1e-12),1.0),y.rgb,step(1.0,y.rgb));return mix(x,vec4(z,y.a),y.a*opacity);}",VNe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.x,yHSL.y,xHSL.z));return mix(x,vec4(z,y.a),y.a*opacity);}",HNe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb+y.rgb-min(x.rgb*y.rgb,1.0),y.a),y.a*opacity);}",qNe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb;vec3 b=y.rgb;vec3 y2=2.0*b;vec3 w=step(0.5,b);vec3 c=a-(1.0-y2)*a*(1.0-a);vec3 d=mix(a+(y2-1.0)*(sqrt(a)-a),a+(y2-1.0)*a*((16.0*a-12.0)*a+3.0),w*(1.0-step(0.25,a)));vec3 z=mix(c,d,w);return mix(x,vec4(z,y.a),y.a*opacity);}",WNe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",XNe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(max(x.rgb+y.rgb-1.0,0.0),y.a),y.a*opacity);}",$Ne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(max(1.0-min((1.0-x.rgb)/(2.0*y.rgb),1.0),0.0),min(x.rgb/(2.0*(1.0-y.rgb)),1.0),step(0.5,y.rgb));return mix(x,vec4(z,y.a),y.a*opacity);}",YNe=new Map([[Bn.ADD,xNe],[Bn.AVERAGE,yNe],[Bn.COLOR,bNe],[Bn.COLOR_BURN,SNe],[Bn.COLOR_DODGE,MNe],[Bn.DARKEN,_Ne],[Bn.DIFFERENCE,TNe],[Bn.DIVIDE,wNe],[Bn.DST,null],[Bn.EXCLUSION,ANe],[Bn.HARD_LIGHT,ENe],[Bn.HARD_MIX,CNe],[Bn.HUE,RNe],[Bn.INVERT,jNe],[Bn.INVERT_RGB,NNe],[Bn.LIGHTEN,ONe],[Bn.LINEAR_BURN,DNe],[Bn.LINEAR_DODGE,PNe],[Bn.LINEAR_LIGHT,INe],[Bn.LUMINOSITY,UNe],[Bn.MULTIPLY,LNe],[Bn.NEGATION,BNe],[Bn.NORMAL,zNe],[Bn.OVERLAY,kNe],[Bn.PIN_LIGHT,FNe],[Bn.REFLECT,GNe],[Bn.SATURATION,VNe],[Bn.SCREEN,HNe],[Bn.SOFT_LIGHT,qNe],[Bn.SRC,WNe],[Bn.SUBTRACT,XNe],[Bn.VIVID_LIGHT,$Ne]]),ZNe=class extends tl{constructor(t,e=1){super(),this._blendFunction=t,this.opacity=new Et(e)}getOpacity(){return this.opacity.value}setOpacity(t){this.opacity.value=t}get blendFunction(){return this._blendFunction}set blendFunction(t){this._blendFunction=t,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(t){this.blendFunction=t}getShaderCode(){return YNe.get(this.blendFunction)}},Uf=class extends tl{constructor(t,e,{attributes:n=Mu.NONE,blendFunction:i=Bn.NORMAL,defines:r=new Map,uniforms:a=new Map,extensions:s=null,vertexShader:o=null}={}){super(),this.name=t,this.renderer=null,this.attributes=n,this.fragmentShader=e,this.vertexShader=o,this.defines=r,this.uniforms=a,this.extensions=s,this.blendMode=new ZNe(i),this.blendMode.addEventListener("change",l=>this.setChanged()),this._inputColorSpace=Zo,this._outputColorSpace=yc}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(t){this._inputColorSpace=t,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t,this.setChanged()}set mainScene(t){}set mainCamera(t){}getName(){return this.name}setRenderer(t){this.renderer=t}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(t){this.attributes=t,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(t){this.fragmentShader=t,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(t){this.vertexShader=t,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(t,e=Il){}update(t,e,n){}setSize(t,e){}initialize(t,e,n){}dispose(){for(const t of Object.keys(this)){const e=this[t];(e instanceof Ei||e instanceof za||e instanceof ji||e instanceof Es)&&this[t].dispose()}}},_w={MEDIUM:2,LARGE:3},KNe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,QNe="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",JNe=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],eOe=class extends di{constructor(t=new Cn){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Et(null),texelSize:new Et(new Cn),scale:new Et(1),kernel:new Et(0)},blending:_r,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:KNe,vertexShader:QNe}),this.setTexelSize(t.x,t.y),this.kernelSize=_w.MEDIUM}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.inputBuffer=t}get kernelSequence(){return JNe[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(t){this.uniforms.scale.value=t}getScale(){return this.uniforms.scale.value}setScale(t){this.uniforms.scale.value=t}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(t){this.uniforms.kernel.value=t}setKernel(t){this.kernel=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e,t*.5,e*.5)}setSize(t,e){const n=1/t,i=1/e;this.uniforms.texelSize.value.set(n,i,n*.5,i*.5)}},kK=class extends Es{constructor({kernelSize:t=_w.MEDIUM,resolutionScale:e=.5,width:n=Wr.AUTO_SIZE,height:i=Wr.AUTO_SIZE,resolutionX:r=n,resolutionY:a=i}={}){super("KawaseBlurPass"),this.renderTargetA=new Ei(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const s=this.resolution=new Wr(this,r,a,e);s.addEventListener("change",o=>this.setSize(s.baseWidth,s.baseHeight)),this._blurMaterial=new eOe,this._blurMaterial.kernelSize=t,this.copyMaterial=new LK}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(t){this._blurMaterial=t}get dithering(){return this.copyMaterial.dithering}set dithering(t){this.copyMaterial.dithering=t}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(t){this.blurMaterial.kernelSize=t}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get scale(){return this.blurMaterial.scale}set scale(t){this.blurMaterial.scale=t}getScale(){return this.blurMaterial.scale}setScale(t){this.blurMaterial.scale=t}getKernelSize(){return this.kernelSize}setKernelSize(t){this.kernelSize=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,i,r){const a=this.scene,s=this.camera,o=this.renderTargetA,l=this.renderTargetB,u=this.blurMaterial,h=u.kernelSequence;let p=e;this.fullscreenMaterial=u;for(let g=0,x=h.length;g<x;++g){const b=(g&1)===0?o:l;u.kernel=h[g],u.inputBuffer=p.texture,t.setRenderTarget(b),t.render(a,s),p=b}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=p.texture,t.setRenderTarget(this.renderToScreen?null:n),t.render(a,s)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e);const i=n.width,r=n.height;this.renderTargetA.setSize(i,r),this.renderTargetB.setSize(i,r),this.blurMaterial.setSize(t,e)}initialize(t,e,n){n!==void 0&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==nr?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):t!==null&&t.outputColorSpace===Kn&&(this.renderTargetA.texture.colorSpace=Kn,this.renderTargetB.texture.colorSpace=Kn))}static get AUTO_SIZE(){return Wr.AUTO_SIZE}},tOe=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);float mask=1.0;
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);mask=low*high;
#elif defined(THRESHOLD)
mask=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=texel*mask;
#else
gl_FragColor=vec4(l*mask);
#endif
}`,nOe=class extends di{constructor(t=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:Lf.replace(/\D+/g,"")},uniforms:{inputBuffer:new Et(null),threshold:new Et(0),smoothing:new Et(1),range:new Et(null)},blending:_r,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:tOe,vertexShader:dv}),this.colorOutput=t,this.luminanceRange=e}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get threshold(){return this.uniforms.threshold.value}set threshold(t){this.smoothing>0||t>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=t}getThreshold(){return this.threshold}setThreshold(t){this.threshold=t}get smoothing(){return this.uniforms.smoothing.value}set smoothing(t){this.threshold>0||t>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=t}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(t){this.smoothing=t}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(t){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(t){t?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(t){return this.colorOutput}setColorOutputEnabled(t){this.colorOutput=t}get useRange(){return this.luminanceRange!==null}set useRange(t){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(t){t!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=t,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(t){this.luminanceRange=t}},FK=class extends Es{constructor({renderTarget:t,luminanceRange:e,colorOutput:n,resolutionScale:i=1,width:r=Wr.AUTO_SIZE,height:a=Wr.AUTO_SIZE,resolutionX:s=r,resolutionY:o=a}={}){super("LuminancePass"),this.fullscreenMaterial=new nOe(n,e),this.needsSwap=!1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new Ei(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new Wr(this,s,o,i);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(t,e,n,i,r){const a=this.fullscreenMaterial;a.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height)}initialize(t,e,n){n!==void 0&&n!==nr&&(this.renderTarget.texture.type=n,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},iOe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,rOe="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",aOe=class extends di{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new Et(null),texelSize:new Et(new Ye)},blending:_r,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:iOe,vertexShader:rOe})}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},sOe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,oOe="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",lOe=class extends di{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new Et(null),supportBuffer:new Et(null),texelSize:new Et(new Ye),radius:new Et(.85)},blending:_r,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:sOe,vertexShader:oOe})}set inputBuffer(t){this.uniforms.inputBuffer.value=t}set supportBuffer(t){this.uniforms.supportBuffer.value=t}get radius(){return this.uniforms.radius.value}set radius(t){this.uniforms.radius.value=t}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},cOe=class extends Es{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new Ei(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new aOe,this.upsamplingMaterial=new lOe,this.resolution=new Ye}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(t){if(this.levels!==t){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let n=0;n<t;++n){const i=e.clone();i.texture.name="Downsampling.Mipmap"+n,this.downsamplingMipmaps.push(i)}this.upsamplingMipmaps.push(e);for(let n=1,i=t-1;n<i;++n){const r=e.clone();r.texture.name="Upsampling.Mipmap"+n,this.upsamplingMipmaps.push(r)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(t){this.upsamplingMaterial.radius=t}render(t,e,n,i,r){const{scene:a,camera:s}=this,{downsamplingMaterial:o,upsamplingMaterial:l}=this,{downsamplingMipmaps:u,upsamplingMipmaps:h}=this;let p=e;this.fullscreenMaterial=o;for(let g=0,x=u.length;g<x;++g){const b=u[g];o.setSize(p.width,p.height),o.inputBuffer=p.texture,t.setRenderTarget(b),t.render(a,s),p=b}this.fullscreenMaterial=l;for(let g=h.length-1;g>=0;--g){const x=h[g];l.setSize(p.width,p.height),l.inputBuffer=p.texture,l.supportBuffer=u[g].texture,t.setRenderTarget(x),t.render(a,s),p=x}}setSize(t,e){const n=this.resolution;n.set(t,e);let i=n.width,r=n.height;for(let a=0,s=this.downsamplingMipmaps.length;a<s;++a)i=Math.round(i*.5),r=Math.round(r*.5),this.downsamplingMipmaps[a].setSize(i,r),a<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[a].setSize(i,r)}initialize(t,e,n){if(n!==void 0){const i=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const r of i)r.texture.type=n;if(n!==nr)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(t!==null&&t.outputColorSpace===Kn)for(const r of i)r.texture.colorSpace=Kn}}dispose(){super.dispose();for(const t of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))t.dispose()}},uOe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,max(inputColor.a,texel.a));}`,fOe=class extends Uf{constructor({blendFunction:t=Bn.SCREEN,luminanceThreshold:e=1,luminanceSmoothing:n=.03,mipmapBlur:i=!0,intensity:r=1,radius:a=.85,levels:s=8,kernelSize:o=_w.LARGE,resolutionScale:l=.5,width:u=Wr.AUTO_SIZE,height:h=Wr.AUTO_SIZE,resolutionX:p=u,resolutionY:g=h}={}){super("BloomEffect",uOe,{blendFunction:t,uniforms:new Map([["map",new Et(null)],["intensity",new Et(r)]])}),this.renderTarget=new Ei(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new kK({kernelSize:o}),this.luminancePass=new FK({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=n,this.mipmapBlurPass=new cOe,this.mipmapBlurPass.enabled=i,this.mipmapBlurPass.radius=a,this.mipmapBlurPass.levels=s,this.uniforms.get("map").value=i?this.mipmapBlurPass.texture:this.renderTarget.texture;const x=this.resolution=new Wr(this,p,g,l);x.addEventListener("change",b=>this.setSize(x.baseWidth,x.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get dithering(){return this.blurPass.dithering}set dithering(t){this.blurPass.dithering=t}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(t){this.blurPass.kernelSize=t}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(t){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(t){this.uniforms.get("intensity").value=t}getIntensity(){return this.intensity}setIntensity(t){this.intensity=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}update(t,e,n){const i=this.renderTarget,r=this.luminancePass;r.enabled?(r.render(t,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(t,r.renderTarget):this.blurPass.render(t,r.renderTarget,i)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(t,e):this.blurPass.render(t,e,i)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height),this.blurPass.resolution.copy(n),this.luminancePass.setSize(t,e),this.mipmapBlurPass.setSize(t,e)}initialize(t,e,n){this.blurPass.initialize(t,e,n),this.luminancePass.initialize(t,e,n),this.mipmapBlurPass.initialize(t,e,n),n!==void 0&&(this.renderTarget.texture.type=n,t!==null&&t.outputColorSpace===Kn&&(this.renderTarget.texture.colorSpace=Kn))}},hOe=`#ifdef RADIAL_MODULATION
uniform float modulationOffset;
#endif
varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=inputColor.ra;vec2 ba=inputColor.ba;
#ifdef RADIAL_MODULATION
const vec2 center=vec2(0.5);float d=distance(uv,center)*2.0;d=max(d-modulationOffset,0.0);if(vActive>0.0&&d>0.0){ra=texture2D(inputBuffer,mix(uv,vUvR,d)).ra;ba=texture2D(inputBuffer,mix(uv,vUvB,d)).ba;}
#else
if(vActive>0.0){ra=texture2D(inputBuffer,vUvR).ra;ba=texture2D(inputBuffer,vUvB).ba;}
#endif
outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}`,dOe="uniform vec2 offset;varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vActive=(shift.x!=0.0||shift.y!=0.0)?1.0:0.0;vUvR=uv+shift;vUvB=uv-shift;}",pOe=class extends Uf{constructor({offset:t=new Ye(.001,5e-4),radialModulation:e=!1,modulationOffset:n=.15}={}){super("ChromaticAberrationEffect",hOe,{vertexShader:dOe,attributes:Mu.CONVOLUTION,uniforms:new Map([["offset",new Et(t)],["modulationOffset",new Et(n)]])}),this.radialModulation=e}get offset(){return this.uniforms.get("offset").value}set offset(t){this.uniforms.get("offset").value=t}get radialModulation(){return this.defines.has("RADIAL_MODULATION")}set radialModulation(t){t?this.defines.set("RADIAL_MODULATION","1"):this.defines.delete("RADIAL_MODULATION"),this.setChanged()}get modulationOffset(){return this.uniforms.get("modulationOffset").value}set modulationOffset(t){this.uniforms.get("modulationOffset").value=t}getOffset(){return this.offset}setOffset(t){this.offset=t}},GK={RED:0,GREEN:1},_I={DISCARD:0,MULTIPLY_RGB_SET_ALPHA:2,MULTIPLY_RGB:3},mOe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if PASS == 1
uniform vec4 kernel64[32];
#else
uniform vec4 kernel16[8];
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 cocNearFar=texture2D(cocBuffer,vUv).rg*scale;float coc=cocNearFar.x;
#else
float coc=texture2D(cocBuffer,vUv).g*scale;
#endif
if(coc==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(cocNearFar.x,cocNearFar.y);
#else
vec2 step=texelSize*coc;
#endif
#if PASS == 1
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;
#else
vec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;
#endif
}}`,FM=class extends di{constructor(t=!1,e=!1){super({name:"BokehMaterial",defines:{PASS:t?"2":"1"},uniforms:{inputBuffer:new Et(null),cocBuffer:new Et(null),texelSize:new Et(new Ye),kernel64:new Et(null),kernel16:new Et(null),scale:new Et(1)},blending:_r,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:mOe,vertexShader:dv}),e&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}set cocBuffer(t){this.uniforms.cocBuffer.value=t}setCoCBuffer(t){this.uniforms.cocBuffer.value=t}get scale(){return this.uniforms.scale.value}set scale(t){this.uniforms.scale.value=t}getScale(t){return this.scale}setScale(t){this.scale=t}generateKernel(){const t=2.39996323,e=new Float64Array(128),n=new Float64Array(32);let i=0,r=0;for(let a=0,s=Math.sqrt(80);a<80;++a){const o=a*t,l=Math.sqrt(a)/s,u=l*Math.cos(o),h=l*Math.sin(o);a%5===0?(n[r++]=u,n[r++]=h):(e[i++]=u,e[i++]=h)}this.uniforms.kernel64.value=e,this.uniforms.kernel16.value=n}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e)}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},gOe=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform mat4 projectionMatrix;uniform mat4 projectionMatrixInverse;uniform float cameraNear;uniform float cameraFar;uniform float focusDistance;uniform float focusRange;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
float depth=unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
float depth=texture2D(depthBuffer,uv).r;
#endif
#if defined(USE_LOGARITHMIC_DEPTH_BUFFER) || defined(LOG_DEPTH)
float d=pow(2.0,depth*log2(cameraFar+1.0))-1.0;float a=cameraFar/(cameraFar-cameraNear);float b=cameraFar*cameraNear/(cameraNear-cameraFar);depth=a+b/d;
#elif defined(USE_REVERSED_DEPTH_BUFFER)
depth=1.0-depth;
#endif
return depth;}
#ifdef PERSPECTIVE_CAMERA
#define getViewZ(depth) perspectiveDepthToViewZ(depth, cameraNear, cameraFar)
#else
#define getViewZ(depth) orthographicDepthToViewZ(depth, cameraNear, cameraFar)
#endif
vec3 getViewPosition(const in vec2 screenPosition,const in float depth,const in float viewZ){vec4 clipPosition=vec4(vec3(screenPosition,depth)*2.0-1.0,1.0);float clipW=projectionMatrix[2][3]*viewZ+projectionMatrix[3][3];clipPosition*=clipW;return(projectionMatrixInverse*clipPosition).xyz;}vec3 getViewPosition(const in vec2 screenPosition,const in float depth){return getViewPosition(screenPosition,depth,getViewZ(depth));}
#define getDistance(viewPosition) length(viewPosition)
void main(){float depth=readDepth(vUv);vec3 viewPosition=getViewPosition(vUv,depth);float distance=getDistance(viewPosition);float signedDistance=distance-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,vOe=class extends di{constructor(t=null){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Et(null),projectionMatrix:new Et(null),projectionMatrixInverse:new Et(null),cameraNear:new Et(.3),cameraFar:new Et(1e3),focusDistance:new Et(0),focusRange:new Et(0)},blending:_r,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:gOe,vertexShader:dv}),this.uniforms.focalLength=this.uniforms.focusRange,t!==null&&this.copyCameraSettings(t)}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=Il){this.depthBuffer=t,this.depthPacking=e}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(t){this.uniforms.focusDistance.value=t}get worldFocusDistance(){return this.focusDistance}set worldFocusDistance(t){this.focusDistance=t}getFocusDistance(t){this.uniforms.focusDistance.value=t}setFocusDistance(t){this.uniforms.focusDistance.value=t}get focalLength(){return this.focusRange}set focalLength(t){this.focusRange=t}get focusRange(){return this.uniforms.focusRange.value}set focusRange(t){this.uniforms.focusRange.value=t}get worldFocusRange(){return this.focusRange}set worldFocusRange(t){this.focusRange=t}getFocalLength(t){return this.focusRange}setFocalLength(t){this.focusRange=t}adoptCameraSettings(t){this.copyCameraSettings(t)}copyCameraSettings(t){this.uniforms.projectionMatrix.value=t.projectionMatrix,this.uniforms.projectionMatrixInverse.value=t.projectionMatrixInverse,this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far;const e=this.defines.PERSPECTIVE_CAMERA!==void 0;t instanceof Ji?e||(this.defines.PERSPECTIVE_CAMERA=!0,this.needsUpdate=!0):e&&(delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},xOe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=(mask>0.0)?0.0:1.0;
#else
mask=(mask>0.0)?1.0:0.0;
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 3
vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=vec4(mask*texel.rgb,texel.a);
#elif MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,yOe=class extends di{constructor(t=null){super({name:"MaskMaterial",uniforms:{maskTexture:new Et(t),inputBuffer:new Et(null),strength:new Et(1)},blending:_r,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:xOe,vertexShader:dv}),this.colorChannel=GK.RED,this.maskFunction=_I.DISCARD}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}set maskTexture(t){this.uniforms.maskTexture.value=t,delete this.defines.MASK_PRECISION_HIGH,t.type!==nr&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(t){this.maskTexture=t}set colorChannel(t){this.defines.COLOR_CHANNEL=t.toFixed(0),this.needsUpdate=!0}setColorChannel(t){this.colorChannel=t}set maskFunction(t){this.defines.MASK_FUNCTION=t.toFixed(0),this.needsUpdate=!0}setMaskFunction(t){this.maskFunction=t}get inverted(){return this.defines.INVERTED!==void 0}set inverted(t){this.inverted&&!t?delete this.defines.INVERTED:t&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(t){this.inverted=t}get strength(){return this.uniforms.strength.value}set strength(t){this.uniforms.strength.value=t}getStrength(){return this.strength}setStrength(t){this.strength=t}},M0=class extends Es{constructor(t,e="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=t,this.input=e}setInput(t){this.input=t}render(t,e,n,i,r){const a=this.fullscreenMaterial.uniforms;e!==null&&a!==void 0&&a[this.input]!==void 0&&(a[this.input].value=e.texture),t.setRenderTarget(this.renderToScreen?null:n),t.render(this.scene,this.camera)}initialize(t,e,n){n!==void 0&&n!==nr&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},bOe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
#if MASK_FUNCTION != 1 && MASK_FUNCTION != 2
uniform lowp sampler2D farCoCBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);
#if MASK_FUNCTION == 1 || MASK_FUNCTION == 2
vec2 cocNearFar=vec2(texture2D(nearCoCBuffer,uv).r,colorFar.a);cocNearFar.x=min(cocNearFar.x*scale,1.0);
#else
vec2 cocNearFar=vec2(texture2D(nearCoCBuffer,uv).r,texture2D(farCoCBuffer,uv).g);cocNearFar=min(cocNearFar*scale,1.0);colorFar.a*=cocNearFar.y;
#endif
vec4 result=inputColor*(1.0-cocNearFar.y)+colorFar;result=mix(result,colorNear,cocNearFar.x);outputColor=result;}`,SOe=new se,MOe=class extends Uf{constructor(t,{blendFunction:e,worldFocusDistance:n,worldFocusRange:i,focalLength:r,focusDistance:a=n||3,focusRange:s=i||r||2,bokehScale:o=1,resolutionScale:l=.5,width:u,height:h,resolutionX:p=u||Wr.AUTO_SIZE,resolutionY:g=h||Wr.AUTO_SIZE}={}){super("DepthOfFieldEffect",bOe,{blendFunction:e,attributes:Mu.DEPTH,uniforms:new Map([["nearColorBuffer",new Et(null)],["farColorBuffer",new Et(null)],["nearCoCBuffer",new Et(null)],["farCoCBuffer",new Et(null)],["scale",new Et(1)]])}),this.camera=t,this.renderTarget=new Ei(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.uniforms.get("farCoCBuffer").value=this.renderTargetCoC.texture,this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new M0(new vOe(t));const x=this.cocMaterial;x.focusDistance=a,x.focusRange=s,this.blurPass=new kK({resolutionScale:l,resolutionX:p,resolutionY:g,kernelSize:_w.MEDIUM}),this.maskPass=new M0(new yOe(this.renderTargetCoC.texture));const b=this.maskPass.fullscreenMaterial;b.colorChannel=GK.GREEN,this.maskFunction=_I.MULTIPLY_RGB,this.bokehNearBasePass=new M0(new FM(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new M0(new FM(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new M0(new FM(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new M0(new FM(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null;const M=this.resolution=new Wr(this,p,g,l);M.addEventListener("change",S=>this.setSize(M.baseWidth,M.baseHeight)),this.bokehScale=o}set mainCamera(t){this.camera=t,this.cocMaterial.copyCameraSettings(t)}get cocTexture(){return this.renderTargetCoC.texture}get maskFunction(){return this.maskPass.fullscreenMaterial.maskFunction}set maskFunction(t){this.maskFunction!==t&&(this.defines.set("MASK_FUNCTION",t.toFixed(0)),this.maskPass.fullscreenMaterial.maskFunction=t,this.setChanged())}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.cocMaterial}getBlurPass(){return this.blurPass}getResolution(){return this.resolution}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(t){this.bokehNearBasePass.fullscreenMaterial.scale=t,this.bokehNearFillPass.fullscreenMaterial.scale=t,this.bokehFarBasePass.fullscreenMaterial.scale=t,this.bokehFarFillPass.fullscreenMaterial.scale=t,this.maskPass.fullscreenMaterial.strength=t,this.uniforms.get("scale").value=t}getBokehScale(){return this.bokehScale}setBokehScale(t){this.bokehScale=t}getTarget(){return this.target}setTarget(t){this.target=t}calculateFocusDistance(t){return this.camera.getWorldPosition(SOe).distanceTo(t)}setDepthTexture(t,e=Il){this.cocMaterial.depthBuffer=t,this.cocMaterial.depthPacking=e}update(t,e,n){const i=this.renderTarget,r=this.renderTargetCoC,a=this.renderTargetCoCBlurred,s=this.renderTargetMasked;if(this.target!==null){const o=this.calculateFocusDistance(this.target);this.cocMaterial.focusDistance=o}this.cocPass.render(t,null,r),this.blurPass.render(t,r,a),this.maskPass.render(t,e,s),this.bokehFarBasePass.render(t,s,i),this.bokehFarFillPass.render(t,i,this.renderTargetFar),this.bokehNearBasePass.render(t,e,i),this.bokehNearFillPass.render(t,i,this.renderTargetNear)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e);const i=n.width,r=n.height;this.cocPass.setSize(t,e),this.blurPass.setSize(t,e),this.maskPass.setSize(t,e),this.renderTargetFar.setSize(t,e),this.renderTargetCoC.setSize(t,e),this.renderTargetMasked.setSize(t,e),this.renderTarget.setSize(i,r),this.renderTargetNear.setSize(i,r),this.renderTargetCoCBlurred.setSize(i,r),this.bokehNearBasePass.fullscreenMaterial.setSize(t,e),this.bokehNearFillPass.fullscreenMaterial.setSize(t,e),this.bokehFarBasePass.fullscreenMaterial.setSize(t,e),this.bokehFarFillPass.fullscreenMaterial.setSize(t,e)}initialize(t,e,n){this.cocPass.initialize(t,e,n),this.maskPass.initialize(t,e,n),this.bokehNearBasePass.initialize(t,e,n),this.bokehNearFillPass.initialize(t,e,n),this.bokehFarBasePass.initialize(t,e,n),this.bokehFarFillPass.initialize(t,e,n),this.blurPass.initialize(t,e,nr),t.capabilities.logarithmicDepthBuffer&&(this.cocPass.fullscreenMaterial.defines.LOG_DEPTH="1"),n!==void 0&&(this.renderTarget.texture.type=n,this.renderTargetNear.texture.type=n,this.renderTargetFar.texture.type=n,this.renderTargetMasked.texture.type=n,t!==null&&t.outputColorSpace===Kn&&(this.renderTarget.texture.colorSpace=Kn,this.renderTargetNear.texture.colorSpace=Kn,this.renderTargetFar.texture.colorSpace=Kn,this.renderTargetMasked.texture.colorSpace=Kn))}};function _Oe(t,e,n){const i=new Map([[np,1],[gb,2],[Sr,4]]);let r;if(i.has(e)||console.error("Invalid noise texture format"),n===nr){r=new Uint8Array(t*i.get(e));for(let a=0,s=r.length;a<s;++a)r[a]=Math.random()*255+.5}else{r=new Float32Array(t*i.get(e));for(let a=0,s=r.length;a<s;++a)r[a]=Math.random()}return r}var TOe=class extends Xo{constructor(t,e,n=np,i=nr){super(_Oe(t*e,n,i),t,e,n,i),this.needsUpdate=!0}},VK=class extends Es{constructor(t,e,n=null){super("RenderPass",t,e),this.needsSwap=!1,this.clearPass=new zK,this.overrideMaterialManager=n===null?null:new DV(n),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(t){this.scene=t}set mainCamera(t){this.camera=t}get renderToScreen(){return super.renderToScreen}set renderToScreen(t){super.renderToScreen=t,this.clearPass.renderToScreen=t}get overrideMaterial(){const t=this.overrideMaterialManager;return t!==null?t.material:null}set overrideMaterial(t){const e=this.overrideMaterialManager;t!==null?e!==null?e.setMaterial(t):this.overrideMaterialManager=new DV(t):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(t){this.overrideMaterial=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getSelection(){return this.selection}setSelection(t){this.selection=t}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(t){this.ignoreBackground=t}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(t){this.skipShadowMapUpdate=t}getClearPass(){return this.clearPass}render(t,e,n,i,r){const a=this.scene,s=this.camera,o=this.selection,l=s.layers.mask,u=a.background,h=t.shadowMap.autoUpdate,p=this.renderToScreen?null:e;o!==null&&s.layers.set(o.getLayer()),this.skipShadowMapUpdate&&(t.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(a.background=null),this.clearPass.enabled&&this.clearPass.render(t,e),t.setRenderTarget(p),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(t,a,s):t.render(a,s),s.layers.mask=l,a.background=u,t.shadowMap.autoUpdate=h}},vo={LINEAR:0,REINHARD:1,REINHARD2:2,REINHARD2_ADAPTIVE:3,OPTIMIZED_CINEON:5,CINEON:5,ACES_FILMIC:6,AGX:7,NEUTRAL:8},by={DEFAULT:0,ESKIL:1},wOe=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*(1.0+time)));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,AOe=class extends Uf{constructor({blendFunction:t=Bn.SCREEN,premultiply:e=!1}={}){super("NoiseEffect",wOe,{blendFunction:t}),this.premultiply=e}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(t){this.premultiply!==t&&(t?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(t){this.premultiply=t}};function GM(t,e,n){return t*(e-n)-e}function VM(t,e,n){return Math.min(Math.max((t+e)/(e-n),0),1)}var EOe=`#include <common>
#include <packing>
uniform vec2 cameraNearFar;
#define cameraNear cameraNearFar.x
#define cameraFar cameraNearFar.y
#ifdef NORMAL_DEPTH
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D normalDepthBuffer;
#else
uniform mediump sampler2D normalDepthBuffer;
#endif
float readDepth(const in vec2 uv){float depth=texture2D(normalDepthBuffer,uv).a;
#if defined(USE_LOGARITHMIC_DEPTH_BUFFER) || defined(LOG_DEPTH)
float d=pow(2.0,depth*log2(cameraFar+1.0))-1.0;float a=cameraFar/(cameraFar-cameraNear);float b=cameraFar*cameraNear/(cameraNear-cameraFar);depth=a+b/d;
#endif
return depth;}
#else
uniform lowp sampler2D normalBuffer;
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
float depth=unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
float depth=texture2D(depthBuffer,uv).r;
#endif
#if defined(USE_LOGARITHMIC_DEPTH_BUFFER) || defined(LOG_DEPTH)
float d=pow(2.0,depth*log2(cameraFar+1.0))-1.0;float a=cameraFar/(cameraFar-cameraNear);float b=cameraFar*cameraNear/(cameraNear-cameraFar);depth=a+b/d;
#endif
return depth;}
#endif
uniform lowp sampler2D noiseTexture;uniform mat4 inverseProjectionMatrix;uniform mat4 projectionMatrix;uniform vec2 texelSize;uniform float intensity;uniform float minRadiusScale;uniform float fade;uniform float bias;uniform vec2 distanceCutoff;uniform vec2 proximityCutoff;varying vec2 vUv;varying vec2 vUv2;float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 getViewPosition(const in vec2 screenPosition,const in float depth,const in float viewZ){vec4 clipPosition=vec4(vec3(screenPosition,depth)*2.0-1.0,1.0);float clipW=projectionMatrix[2][3]*viewZ+projectionMatrix[3][3];clipPosition*=clipW;return(inverseProjectionMatrix*clipPosition).xyz;}float getAmbientOcclusion(const in vec3 p,const in vec3 n,const in float depth,const in vec2 uv){float radiusScale=1.0-smoothstep(0.0,distanceCutoff.y,depth);radiusScale=radiusScale*(1.0-minRadiusScale)+minRadiusScale;float radius=RADIUS*radiusScale;float noise=texture2D(noiseTexture,vUv2).r;float baseAngle=noise*PI2;float rings=SPIRAL_TURNS*PI2;float occlusion=0.0;int taps=0;for(int i=0;i<SAMPLES_INT;++i){float alpha=(float(i)+0.5)*INV_SAMPLES_FLOAT;float angle=alpha*rings+baseAngle;vec2 rotation=vec2(cos(angle),sin(angle));vec2 coords=alpha*radius*rotation*texelSize+uv;if(coords.s<0.0||coords.s>1.0||coords.t<0.0||coords.t>1.0){continue;}float sampleDepth=readDepth(coords);float viewZ=getViewZ(sampleDepth);
#ifdef PERSPECTIVE_CAMERA
float linearSampleDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearSampleDepth=sampleDepth;
#endif
float proximity=abs(depth-linearSampleDepth);if(proximity<proximityCutoff.y){float falloff=1.0-smoothstep(proximityCutoff.x,proximityCutoff.y,proximity);vec3 Q=getViewPosition(coords,sampleDepth,viewZ);vec3 v=Q-p;float vv=dot(v,v);float vn=dot(v,n)-bias;float f=max(RADIUS_SQ-vv,0.0)/RADIUS_SQ;occlusion+=(f*f*f*max(vn/(fade+vv),0.0))*falloff;}++taps;}return occlusion/(4.0*max(float(taps),1.0));}void main(){
#ifdef NORMAL_DEPTH
vec4 normalDepth=texture2D(normalDepthBuffer,vUv);
#if defined(USE_LOGARITHMIC_DEPTH_BUFFER) || defined(LOG_DEPTH)
float d=pow(2.0,normalDepth.a*log2(cameraFar+1.0))-1.0;float a=cameraFar/(cameraFar-cameraNear);float b=cameraFar*cameraNear/(cameraNear-cameraFar);normalDepth.a=a+b/d;
#endif
#else
vec4 normalDepth=vec4(texture2D(normalBuffer,vUv).xyz,readDepth(vUv));
#endif
float ao=0.0;float depth=normalDepth.a;float viewZ=getViewZ(depth);
#ifdef PERSPECTIVE_CAMERA
float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
if(linearDepth<distanceCutoff.y){vec3 viewPosition=getViewPosition(vUv,depth,viewZ);vec3 viewNormal=unpackRGBToNormal(normalDepth.rgb);ao+=getAmbientOcclusion(viewPosition,viewNormal,linearDepth,vUv);float d=smoothstep(distanceCutoff.x,distanceCutoff.y,linearDepth);ao=mix(ao,0.0,d);
#ifdef LEGACY_INTENSITY
ao=clamp(1.0-pow(1.0-ao,abs(intensity)),0.0,1.0);
#endif
}gl_FragColor.r=ao;}`,COe="uniform vec2 noiseScale;varying vec2 vUv;varying vec2 vUv2;void main(){vUv=position.xy*0.5+0.5;vUv2=vUv*noiseScale;gl_Position=vec4(position.xy,1.0,1.0);}",ROe=class extends di{constructor(t){super({name:"SSAOMaterial",defines:{SAMPLES_INT:"0",INV_SAMPLES_FLOAT:"0.0",SPIRAL_TURNS:"0.0",RADIUS:"1.0",RADIUS_SQ:"1.0",DISTANCE_SCALING:"1",DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Et(null),normalBuffer:new Et(null),normalDepthBuffer:new Et(null),noiseTexture:new Et(null),inverseProjectionMatrix:new Et(new un),projectionMatrix:new Et(new un),texelSize:new Et(new Ye),cameraNearFar:new Et(new Ye),distanceCutoff:new Et(new Ye),proximityCutoff:new Et(new Ye),noiseScale:new Et(new Ye),minRadiusScale:new Et(.33),intensity:new Et(1),fade:new Et(.01),bias:new Et(0)},blending:_r,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:EOe,vertexShader:COe}),this.copyCameraSettings(t),this.resolution=new Ye,this.r=1}get near(){return this.uniforms.cameraNearFar.value.x}get far(){return this.uniforms.cameraNearFar.value.y}set normalDepthBuffer(t){this.uniforms.normalDepthBuffer.value=t,t!==null?this.defines.NORMAL_DEPTH="1":delete this.defines.NORMAL_DEPTH,this.needsUpdate=!0}setNormalDepthBuffer(t){this.normalDepthBuffer=t}set normalBuffer(t){this.uniforms.normalBuffer.value=t}setNormalBuffer(t){this.uniforms.normalBuffer.value=t}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=Il){this.depthBuffer=t,this.depthPacking=e}set noiseTexture(t){this.uniforms.noiseTexture.value=t}setNoiseTexture(t){this.uniforms.noiseTexture.value=t}get samples(){return Number(this.defines.SAMPLES_INT)}set samples(t){this.defines.SAMPLES_INT=t.toFixed(0),this.defines.INV_SAMPLES_FLOAT=(1/t).toFixed(9),this.needsUpdate=!0}getSamples(){return this.samples}setSamples(t){this.samples=t}get rings(){return Number(this.defines.SPIRAL_TURNS)}set rings(t){this.defines.SPIRAL_TURNS=t.toFixed(1),this.needsUpdate=!0}getRings(){return this.rings}setRings(t){this.rings=t}get intensity(){return this.uniforms.intensity.value}set intensity(t){this.uniforms.intensity.value=t,this.defines.LEGACY_INTENSITY===void 0&&(this.defines.LEGACY_INTENSITY="1",this.needsUpdate=!0)}getIntensity(){return this.uniforms.intensity.value}setIntensity(t){this.uniforms.intensity.value=t}get fade(){return this.uniforms.fade.value}set fade(t){this.uniforms.fade.value=t}getFade(){return this.uniforms.fade.value}setFade(t){this.uniforms.fade.value=t}get bias(){return this.uniforms.bias.value}set bias(t){this.uniforms.bias.value=t}getBias(){return this.uniforms.bias.value}setBias(t){this.uniforms.bias.value=t}get minRadiusScale(){return this.uniforms.minRadiusScale.value}set minRadiusScale(t){this.uniforms.minRadiusScale.value=t}getMinRadiusScale(){return this.uniforms.minRadiusScale.value}setMinRadiusScale(t){this.uniforms.minRadiusScale.value=t}updateRadius(){const t=this.r*this.resolution.height;this.defines.RADIUS=t.toFixed(11),this.defines.RADIUS_SQ=(t*t).toFixed(11),this.needsUpdate=!0}get radius(){return this.r}set radius(t){this.r=Math.min(Math.max(t,1e-6),1),this.updateRadius()}getRadius(){return this.radius}setRadius(t){this.radius=t}get distanceScaling(){return!0}set distanceScaling(t){}isDistanceScalingEnabled(){return this.distanceScaling}setDistanceScalingEnabled(t){this.distanceScaling=t}get distanceThreshold(){return this.uniforms.distanceCutoff.value.x}set distanceThreshold(t){this.uniforms.distanceCutoff.value.set(Math.min(Math.max(t,0),1),Math.min(Math.max(t+this.distanceFalloff,0),1))}get worldDistanceThreshold(){return-GM(this.distanceThreshold,this.near,this.far)}set worldDistanceThreshold(t){this.distanceThreshold=VM(-t,this.near,this.far)}get distanceFalloff(){return this.uniforms.distanceCutoff.value.y-this.distanceThreshold}set distanceFalloff(t){this.uniforms.distanceCutoff.value.y=Math.min(Math.max(this.distanceThreshold+t,0),1)}get worldDistanceFalloff(){return-GM(this.distanceFalloff,this.near,this.far)}set worldDistanceFalloff(t){this.distanceFalloff=VM(-t,this.near,this.far)}setDistanceCutoff(t,e){this.uniforms.distanceCutoff.value.set(Math.min(Math.max(t,0),1),Math.min(Math.max(t+e,0),1))}get proximityThreshold(){return this.uniforms.proximityCutoff.value.x}set proximityThreshold(t){this.uniforms.proximityCutoff.value.set(Math.min(Math.max(t,0),1),Math.min(Math.max(t+this.proximityFalloff,0),1))}get worldProximityThreshold(){return-GM(this.proximityThreshold,this.near,this.far)}set worldProximityThreshold(t){this.proximityThreshold=VM(-t,this.near,this.far)}get proximityFalloff(){return this.uniforms.proximityCutoff.value.y-this.proximityThreshold}set proximityFalloff(t){this.uniforms.proximityCutoff.value.y=Math.min(Math.max(this.proximityThreshold+t,0),1)}get worldProximityFalloff(){return-GM(this.proximityFalloff,this.near,this.far)}set worldProximityFalloff(t){this.proximityFalloff=VM(-t,this.near,this.far)}setProximityCutoff(t,e){this.uniforms.proximityCutoff.value.set(Math.min(Math.max(t,0),1),Math.min(Math.max(t+e,0),1))}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e)}adoptCameraSettings(t){this.copyCameraSettings(t)}copyCameraSettings(t){t&&(this.uniforms.cameraNearFar.value.set(t.near,t.far),this.uniforms.projectionMatrix.value.copy(t.projectionMatrix),this.uniforms.inverseProjectionMatrix.value.copy(t.projectionMatrix).invert(),t instanceof Ji?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(t,e){const n=this.uniforms,i=n.noiseTexture.value;i!==null&&n.noiseScale.value.set(t/i.image.width,e/i.image.height),n.texelSize.value.set(1/t,1/e),this.resolution.set(t,e),this.updateRadius()}},jOe=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,NOe="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",OOe=class extends di{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Et(null),normalBuffer:new Et(null),texelSize:new Et(new Ye)},blending:_r,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:jOe,vertexShader:NOe})}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=Il){this.depthBuffer=t,this.depthPacking=e}set normalBuffer(t){this.uniforms.normalBuffer.value=t,t!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(t){this.normalBuffer=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e)}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},HK=class extends Es{constructor({normalBuffer:t=null,resolutionScale:e=.5,width:n=Wr.AUTO_SIZE,height:i=Wr.AUTO_SIZE,resolutionX:r=n,resolutionY:a=i}={}){super("DepthDownsamplingPass");const s=new OOe;s.normalBuffer=t,this.fullscreenMaterial=s,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Ei(1,1,{minFilter:Ir,magFilter:Ir,depthBuffer:!1,type:fr}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const o=this.resolution=new Wr(this,r,a,e);o.addEventListener("change",l=>this.setSize(o.baseWidth,o.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(t,e=Il){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.depthPacking=e}render(t,e,n,i,r){t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height),this.fullscreenMaterial.setSize(t,e)}initialize(t,e,n){const i=t.getContext();if(!(i.getExtension("EXT_color_buffer_float")||i.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},DOe=`uniform lowp sampler2D aoBuffer;uniform float luminanceInfluence;uniform float intensity;
#if defined(DEPTH_AWARE_UPSAMPLING) && defined(NORMAL_DEPTH)
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D normalDepthBuffer;
#else
uniform mediump sampler2D normalDepthBuffer;
#endif
#endif
#ifdef COLORIZE
uniform vec3 color;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){float aoLinear=texture2D(aoBuffer,uv).r;
#if defined(DEPTH_AWARE_UPSAMPLING) && defined(NORMAL_DEPTH) && __VERSION__ == 300
vec4 normalDepth[4];normalDepth[0]=textureOffset(normalDepthBuffer,uv,ivec2(0,0));normalDepth[1]=textureOffset(normalDepthBuffer,uv,ivec2(0,1));normalDepth[2]=textureOffset(normalDepthBuffer,uv,ivec2(1,0));normalDepth[3]=textureOffset(normalDepthBuffer,uv,ivec2(1,1));float dot01=dot(normalDepth[0].rgb,normalDepth[1].rgb);float dot02=dot(normalDepth[0].rgb,normalDepth[2].rgb);float dot03=dot(normalDepth[0].rgb,normalDepth[3].rgb);float minDot=min(dot01,min(dot02,dot03));float s=step(THRESHOLD,minDot);float smallestDistance=1.0;int index;for(int i=0;i<4;++i){float distance=abs(depth-normalDepth[i].a);if(distance<smallestDistance){smallestDistance=distance;index=i;}}ivec2 offsets[4];offsets[0]=ivec2(0,0);offsets[1]=ivec2(0,1);offsets[2]=ivec2(1,0);offsets[3]=ivec2(1,1);ivec2 coord=ivec2(uv*vec2(textureSize(aoBuffer,0)))+offsets[index];float aoNearest=texelFetch(aoBuffer,coord,0).r;float ao=mix(aoNearest,aoLinear,s);
#else
float ao=aoLinear;
#endif
float l=luminance(inputColor.rgb);ao=mix(ao,0.0,l*luminanceInfluence);ao=clamp(ao*intensity,0.0,1.0);
#ifdef COLORIZE
outputColor=vec4(1.0-ao*(1.0-color),inputColor.a);
#else
outputColor=vec4(vec3(1.0-ao),inputColor.a);
#endif
}`,PV=64,POe=class extends Uf{constructor(t,e,{blendFunction:n=Bn.MULTIPLY,samples:i=9,rings:r=7,normalDepthBuffer:a=null,depthAwareUpsampling:s=!0,worldDistanceThreshold:o,worldDistanceFalloff:l,worldProximityThreshold:u,worldProximityFalloff:h,distanceThreshold:p=.97,distanceFalloff:g=.03,rangeThreshold:x=5e-4,rangeFalloff:b=.001,minRadiusScale:M=.1,luminanceInfluence:S=.7,radius:T=.1825,intensity:A=1,bias:E=.025,fade:j=.01,color:R=null,resolutionScale:C=1,width:D=Wr.AUTO_SIZE,height:U=Wr.AUTO_SIZE,resolutionX:I=D,resolutionY:L=U}={}){super("SSAOEffect",DOe,{blendFunction:n,attributes:Mu.DEPTH,defines:new Map([["THRESHOLD","0.997"]]),uniforms:new Map([["aoBuffer",new Et(null)],["normalDepthBuffer",new Et(a)],["luminanceInfluence",new Et(S)],["color",new Et(null)],["intensity",new Et(A)],["scale",new Et(0)]])}),this.renderTarget=new Ei(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="AO.Target",this.uniforms.get("aoBuffer").value=this.renderTarget.texture;const F=this.resolution=new Wr(this,I,L,C);F.addEventListener("change",W=>this.setSize(F.baseWidth,F.baseHeight)),this.camera=t,this.depthDownsamplingPass=new HK({normalBuffer:e,resolutionScale:C}),this.depthDownsamplingPass.enabled=a===null,this.ssaoPass=new M0(new ROe(t));const G=new TOe(PV,PV,Sr);G.wrapS=G.wrapT=ar;const H=this.ssaoMaterial;H.normalBuffer=e,H.noiseTexture=G,H.minRadiusScale=M,H.samples=i,H.radius=T,H.rings=r,H.fade=j,H.bias=E,H.distanceThreshold=p,H.distanceFalloff=g,H.proximityThreshold=x,H.proximityFalloff=b,o!==void 0&&(H.worldDistanceThreshold=o),l!==void 0&&(H.worldDistanceFalloff=l),u!==void 0&&(H.worldProximityThreshold=u),h!==void 0&&(H.worldProximityFalloff=h),a!==null&&(this.ssaoMaterial.normalDepthBuffer=a,this.defines.set("NORMAL_DEPTH","1")),this.depthAwareUpsampling=s,this.color=R}set mainCamera(t){this.camera=t,this.ssaoMaterial.copyCameraSettings(t)}get normalBuffer(){return this.ssaoMaterial.normalBuffer}set normalBuffer(t){this.ssaoMaterial.normalBuffer=t,this.depthDownsamplingPass.fullscreenMaterial.normalBuffer=t}getResolution(){return this.resolution}get ssaoMaterial(){return this.ssaoPass.fullscreenMaterial}getSSAOMaterial(){return this.ssaoMaterial}get samples(){return this.ssaoMaterial.samples}set samples(t){this.ssaoMaterial.samples=t}get rings(){return this.ssaoMaterial.rings}set rings(t){this.ssaoMaterial.rings=t}get radius(){return this.ssaoMaterial.radius}set radius(t){this.ssaoMaterial.radius=t}get depthAwareUpsampling(){return this.defines.has("DEPTH_AWARE_UPSAMPLING")}set depthAwareUpsampling(t){this.depthAwareUpsampling!==t&&(t?this.defines.set("DEPTH_AWARE_UPSAMPLING","1"):this.defines.delete("DEPTH_AWARE_UPSAMPLING"),this.setChanged())}isDepthAwareUpsamplingEnabled(){return this.depthAwareUpsampling}setDepthAwareUpsamplingEnabled(t){this.depthAwareUpsampling=t}get distanceScaling(){return!0}set distanceScaling(t){}get color(){return this.uniforms.get("color").value}set color(t){const e=this.uniforms,n=this.defines;t!==null?n.has("COLORIZE")?e.get("color").value.set(t):(n.set("COLORIZE","1"),e.get("color").value=new zt(t),this.setChanged()):n.has("COLORIZE")&&(n.delete("COLORIZE"),e.get("color").value=null,this.setChanged())}get luminanceInfluence(){return this.uniforms.get("luminanceInfluence").value}set luminanceInfluence(t){this.uniforms.get("luminanceInfluence").value=t}get intensity(){return this.uniforms.get("intensity").value}set intensity(t){this.uniforms.get("intensity").value=t}getColor(){return this.color}setColor(t){this.color=t}setDistanceCutoff(t,e){this.ssaoMaterial.distanceThreshold=t,this.ssaoMaterial.distanceFalloff=e}setProximityCutoff(t,e){this.ssaoMaterial.proximityThreshold=t,this.ssaoMaterial.proximityFalloff=e}setDepthTexture(t,e=Il){this.depthDownsamplingPass.setDepthTexture(t,e),this.ssaoMaterial.depthBuffer=t,this.ssaoMaterial.depthPacking=e}update(t,e,n){const i=this.renderTarget;this.depthDownsamplingPass.enabled&&this.depthDownsamplingPass.render(t),this.ssaoPass.render(t,null,i)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e);const i=n.width,r=n.height;this.ssaoMaterial.copyCameraSettings(this.camera),this.ssaoMaterial.setSize(i,r),this.renderTarget.setSize(i,r),this.depthDownsamplingPass.resolution.scale=n.scale,this.depthDownsamplingPass.setSize(t,e)}initialize(t,e,n){try{let i=this.uniforms.get("normalDepthBuffer").value;i===null&&(this.depthDownsamplingPass.initialize(t,e,n),i=this.depthDownsamplingPass.texture,this.uniforms.get("normalDepthBuffer").value=i,this.ssaoMaterial.normalDepthBuffer=i,this.defines.set("NORMAL_DEPTH","1"))}catch{this.depthDownsamplingPass.enabled=!1}}},IOe=`#include <packing>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
uniform lowp sampler2D luminanceBuffer0;uniform lowp sampler2D luminanceBuffer1;uniform float minLuminance;uniform float deltaTime;uniform float tau;varying vec2 vUv;void main(){float l0=unpackRGBAToFloat(texture2D(luminanceBuffer0,vUv));
#if __VERSION__ < 300
float l1=texture2DLodEXT(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;
#else
float l1=textureLod(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;
#endif
l0=max(minLuminance,l0);l1=max(minLuminance,l1);float adaptedLum=l0+(l1-l0)*(1.0-exp(-deltaTime*tau));gl_FragColor=(adaptedLum==1.0)?vec4(1.0):packFloatToRGBA(adaptedLum);}`,UOe=class extends di{constructor(){super({name:"AdaptiveLuminanceMaterial",defines:{MIP_LEVEL_1X1:"0.0"},uniforms:{luminanceBuffer0:new Et(null),luminanceBuffer1:new Et(null),minLuminance:new Et(.01),deltaTime:new Et(0),tau:new Et(1)},extensions:{shaderTextureLOD:!0},blending:_r,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:IOe,vertexShader:dv})}set luminanceBuffer0(t){this.uniforms.luminanceBuffer0.value=t}setLuminanceBuffer0(t){this.uniforms.luminanceBuffer0.value=t}set luminanceBuffer1(t){this.uniforms.luminanceBuffer1.value=t}setLuminanceBuffer1(t){this.uniforms.luminanceBuffer1.value=t}set mipLevel1x1(t){this.defines.MIP_LEVEL_1X1=t.toFixed(1),this.needsUpdate=!0}setMipLevel1x1(t){this.mipLevel1x1=t}set deltaTime(t){this.uniforms.deltaTime.value=t}setDeltaTime(t){this.uniforms.deltaTime.value=t}get minLuminance(){return this.uniforms.minLuminance.value}set minLuminance(t){this.uniforms.minLuminance.value=t}getMinLuminance(){return this.uniforms.minLuminance.value}setMinLuminance(t){this.uniforms.minLuminance.value=t}get adaptationRate(){return this.uniforms.tau.value}set adaptationRate(t){this.uniforms.tau.value=t}getAdaptationRate(){return this.uniforms.tau.value}setAdaptationRate(t){this.uniforms.tau.value=t}},LOe=class extends Es{constructor(t,{minLuminance:e=.01,adaptationRate:n=1}={}){super("AdaptiveLuminancePass"),this.fullscreenMaterial=new UOe,this.needsSwap=!1,this.renderTargetPrevious=new Ei(1,1,{minFilter:Ir,magFilter:Ir,depthBuffer:!1}),this.renderTargetPrevious.texture.name="Luminance.Previous";const i=this.fullscreenMaterial;i.luminanceBuffer0=this.renderTargetPrevious.texture,i.luminanceBuffer1=t,i.minLuminance=e,i.adaptationRate=n,this.renderTargetAdapted=this.renderTargetPrevious.clone(),this.renderTargetAdapted.texture.name="Luminance.Adapted",this.copyPass=new BK(this.renderTargetPrevious,!1)}get texture(){return this.renderTargetAdapted.texture}getTexture(){return this.renderTargetAdapted.texture}set mipLevel1x1(t){this.fullscreenMaterial.mipLevel1x1=t}get adaptationRate(){return this.fullscreenMaterial.adaptationRate}set adaptationRate(t){this.fullscreenMaterial.adaptationRate=t}render(t,e,n,i,r){this.fullscreenMaterial.deltaTime=i,t.setRenderTarget(this.renderToScreen?null:this.renderTargetAdapted),t.render(this.scene,this.camera),this.copyPass.render(t,this.renderTargetAdapted)}},BOe=`#include <tonemapping_pars_fragment>
uniform float whitePoint;
#if TONE_MAPPING_MODE == 2 || TONE_MAPPING_MODE == 3
uniform float middleGrey;
#if TONE_MAPPING_MODE == 3
uniform lowp sampler2D luminanceBuffer;
#else
uniform float averageLuminance;
#endif
vec3 Reinhard2ToneMapping(vec3 color){color*=toneMappingExposure;float l=luminance(color);
#if TONE_MAPPING_MODE == 3
float lumAvg=unpackRGBAToFloat(texture2D(luminanceBuffer,vec2(0.5)));
#else
float lumAvg=averageLuminance;
#endif
float lumScaled=(l*middleGrey)/max(lumAvg,1e-6);float lumCompressed=lumScaled*(1.0+lumScaled/(whitePoint*whitePoint));lumCompressed/=(1.0+lumScaled);return clamp(lumCompressed*color,0.0,1.0);}
#elif TONE_MAPPING_MODE == 4
#define A 0.15
#define B 0.50
#define C 0.10
#define D 0.20
#define E 0.02
#define F 0.30
vec3 Uncharted2Helper(const in vec3 x){return((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}vec3 Uncharted2ToneMapping(vec3 color){color*=toneMappingExposure;return clamp(Uncharted2Helper(color)/Uncharted2Helper(vec3(whitePoint)),0.0,1.0);}
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){
#if TONE_MAPPING_MODE == 2 || TONE_MAPPING_MODE == 3
outputColor=vec4(Reinhard2ToneMapping(inputColor.rgb),inputColor.a);
#elif TONE_MAPPING_MODE == 4
outputColor=vec4(Uncharted2ToneMapping(inputColor.rgb),inputColor.a);
#else
outputColor=vec4(toneMapping(inputColor.rgb),inputColor.a);
#endif
}`,zOe=class extends Uf{constructor({blendFunction:t=Bn.SRC,adaptive:e=!1,mode:n=e?vo.REINHARD2_ADAPTIVE:vo.AGX,resolution:i=256,maxLuminance:r=4,whitePoint:a=r,middleGrey:s=.6,minLuminance:o=.01,averageLuminance:l=1,adaptationRate:u=1}={}){super("ToneMappingEffect",BOe,{blendFunction:t,uniforms:new Map([["luminanceBuffer",new Et(null)],["maxLuminance",new Et(r)],["whitePoint",new Et(a)],["middleGrey",new Et(s)],["averageLuminance",new Et(l)]])}),this.renderTargetLuminance=new Ei(1,1,{minFilter:Sc,depthBuffer:!1}),this.renderTargetLuminance.texture.generateMipmaps=!0,this.renderTargetLuminance.texture.name="Luminance",this.luminancePass=new FK({renderTarget:this.renderTargetLuminance}),this.adaptiveLuminancePass=new LOe(this.luminancePass.texture,{minLuminance:o,adaptationRate:u}),this.uniforms.get("luminanceBuffer").value=this.adaptiveLuminancePass.texture,this.resolution=i,this.mode=n}get mode(){return Number(this.defines.get("TONE_MAPPING_MODE"))}set mode(t){if(this.mode===t)return;const n=Lf.replace(/\D+/g,"")>=168?"CineonToneMapping(texel)":"OptimizedCineonToneMapping(texel)";switch(this.defines.clear(),this.defines.set("TONE_MAPPING_MODE",t.toFixed(0)),t){case vo.LINEAR:this.defines.set("toneMapping(texel)","LinearToneMapping(texel)");break;case vo.REINHARD:this.defines.set("toneMapping(texel)","ReinhardToneMapping(texel)");break;case vo.CINEON:case vo.OPTIMIZED_CINEON:this.defines.set("toneMapping(texel)",n);break;case vo.ACES_FILMIC:this.defines.set("toneMapping(texel)","ACESFilmicToneMapping(texel)");break;case vo.AGX:this.defines.set("toneMapping(texel)","AgXToneMapping(texel)");break;case vo.NEUTRAL:this.defines.set("toneMapping(texel)","NeutralToneMapping(texel)");break;default:this.defines.set("toneMapping(texel)","texel");break}this.adaptiveLuminancePass.enabled=t===vo.REINHARD2_ADAPTIVE,this.setChanged()}getMode(){return this.mode}setMode(t){this.mode=t}get whitePoint(){return this.uniforms.get("whitePoint").value}set whitePoint(t){this.uniforms.get("whitePoint").value=t}get middleGrey(){return this.uniforms.get("middleGrey").value}set middleGrey(t){this.uniforms.get("middleGrey").value=t}get averageLuminance(){return this.uniforms.get("averageLuminance").value}set averageLuminance(t){this.uniforms.get("averageLuminance").value=t}get adaptiveLuminanceMaterial(){return this.adaptiveLuminancePass.fullscreenMaterial}getAdaptiveLuminanceMaterial(){return this.adaptiveLuminanceMaterial}get resolution(){return this.luminancePass.resolution.width}set resolution(t){const e=Math.max(0,Math.ceil(Math.log2(t))),n=Math.pow(2,e);this.luminancePass.resolution.setPreferredSize(n,n),this.adaptiveLuminanceMaterial.mipLevel1x1=e}getResolution(){return this.resolution}setResolution(t){this.resolution=t}get adaptive(){return this.mode===vo.REINHARD2_ADAPTIVE}set adaptive(t){this.mode=t?vo.REINHARD2_ADAPTIVE:vo.REINHARD2}get adaptationRate(){return this.adaptiveLuminanceMaterial.adaptationRate}set adaptationRate(t){this.adaptiveLuminanceMaterial.adaptationRate=t}get distinction(){return console.warn(this.name,"distinction was removed."),1}set distinction(t){console.warn(this.name,"distinction was removed.")}update(t,e,n){this.adaptiveLuminancePass.enabled&&(this.luminancePass.render(t,e),this.adaptiveLuminancePass.render(t,null,null,n))}initialize(t,e,n){this.adaptiveLuminancePass.initialize(t,e,n)}},kOe=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,FOe=class extends Uf{constructor({blendFunction:t,eskil:e=!1,technique:n=e?by.ESKIL:by.DEFAULT,offset:i=.5,darkness:r=.5}={}){super("VignetteEffect",kOe,{blendFunction:t,defines:new Map([["VIGNETTE_TECHNIQUE",n.toFixed(0)]]),uniforms:new Map([["offset",new Et(i)],["darkness",new Et(r)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(t){this.technique!==t&&(this.defines.set("VIGNETTE_TECHNIQUE",t.toFixed(0)),this.setChanged())}get eskil(){return this.technique===by.ESKIL}set eskil(t){this.technique=t?by.ESKIL:by.DEFAULT}getTechnique(){return this.technique}setTechnique(t){this.technique=t}get offset(){return this.uniforms.get("offset").value}set offset(t){this.uniforms.get("offset").value=t}getOffset(){return this.offset}setOffset(t){this.offset=t}get darkness(){return this.uniforms.get("darkness").value}set darkness(t){this.uniforms.get("darkness").value=t}getDarkness(){return this.darkness}setDarkness(t){this.darkness=t}},GOe=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
float depth=unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
float depth=texture2D(depthBuffer,uv).r;
#endif
#if defined(USE_LOGARITHMIC_DEPTH_BUFFER) || defined(LOG_DEPTH)
float d=pow(2.0,depth*log2(cameraFar+1.0))-1.0;float a=cameraFar/(cameraFar-cameraNear);float b=cameraFar*cameraNear/(cameraNear-cameraFar);depth=a+b/d;
#elif defined(USE_REVERSED_DEPTH_BUFFER)
depth=1.0-depth;
#endif
return depth;}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,VOe="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",HOe=class extends di{constructor(t,e,n,i,r=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:Lf.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Et(null),depthBuffer:new Et(null),resolution:new Et(new Ye),texelSize:new Et(new Ye),cameraNear:new Et(.3),cameraFar:new Et(1e3),aspect:new Et(1),time:new Et(0)},blending:_r,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:r}),t&&this.setShaderParts(t),e&&this.setDefines(e),n&&this.setUniforms(n),this.copyCameraSettings(i)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(t){this.uniforms.depthBuffer.value=t}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=Il){this.depthBuffer=t,this.depthPacking=e}setShaderData(t){this.setShaderParts(t.shaderParts),this.setDefines(t.defines),this.setUniforms(t.uniforms),this.setExtensions(t.extensions)}setShaderParts(t){return this.fragmentShader=GOe.replace(Ai.FRAGMENT_HEAD,t.get(Ai.FRAGMENT_HEAD)||"").replace(Ai.FRAGMENT_MAIN_UV,t.get(Ai.FRAGMENT_MAIN_UV)||"").replace(Ai.FRAGMENT_MAIN_IMAGE,t.get(Ai.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=VOe.replace(Ai.VERTEX_HEAD,t.get(Ai.VERTEX_HEAD)||"").replace(Ai.VERTEX_MAIN_SUPPORT,t.get(Ai.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(t){for(const e of t.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(t){for(const e of t.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(t){this.extensions={};for(const e of t)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(t){this.encodeOutput!==t&&(t?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(t){return this.encodeOutput}setOutputEncodingEnabled(t){this.encodeOutput=t}get time(){return this.uniforms.time.value}set time(t){this.uniforms.time.value=t}setDeltaTime(t){this.uniforms.time.value+=t}adoptCameraSettings(t){this.copyCameraSettings(t)}copyCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof Ji?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(t,e){const n=this.uniforms;n.resolution.value.set(t,e),n.texelSize.value.set(1/t,1/e),n.aspect.value=t/e}static get Section(){return Ai}};function IV(t,e,n){for(const i of e){const r="$1"+t+i.charAt(0).toUpperCase()+i.slice(1),a=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(const s of n.entries())s[1]!==null&&n.set(s[0],s[1].replace(a,r))}}function qOe(t,e,n){let i=e.getFragmentShader(),r=e.getVertexShader();const a=i!==void 0&&/mainImage/.test(i),s=i!==void 0&&/mainUv/.test(i);if(n.attributes|=e.getAttributes(),i===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(s&&(n.attributes&Mu.CONVOLUTION)!==0)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!a&&!s)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const o=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=n.shaderParts;let u=l.get(Ai.FRAGMENT_HEAD)||"",h=l.get(Ai.FRAGMENT_MAIN_UV)||"",p=l.get(Ai.FRAGMENT_MAIN_IMAGE)||"",g=l.get(Ai.VERTEX_HEAD)||"",x=l.get(Ai.VERTEX_MAIN_SUPPORT)||"";const b=new Set,M=new Set;if(s&&(h+=`	${t}MainUv(UV);
`,n.uvTransformation=!0),r!==null&&/mainSupport/.test(r)){const A=/mainSupport *\([\w\s]*?uv\s*?\)/.test(r);x+=`	${t}MainSupport(`,x+=A?`vUv);
`:`);
`;for(const E of r.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const j of E[1].split(/\s*,\s*/))n.varyings.add(j),b.add(j),M.add(j);for(const E of r.matchAll(o))M.add(E[1])}for(const A of i.matchAll(o))M.add(A[1]);for(const A of e.defines.keys())M.add(A.replace(/\([\w\s,]*\)/g,""));for(const A of e.uniforms.keys())M.add(A);M.delete("while"),M.delete("for"),M.delete("if"),e.uniforms.forEach((A,E)=>n.uniforms.set(t+E.charAt(0).toUpperCase()+E.slice(1),A)),e.defines.forEach((A,E)=>n.defines.set(t+E.charAt(0).toUpperCase()+E.slice(1),A));const S=new Map([["fragment",i],["vertex",r]]);IV(t,M,n.defines),IV(t,M,S),i=S.get("fragment"),r=S.get("vertex");const T=e.blendMode;if(n.blendModes.set(T.blendFunction,T),a){e.inputColorSpace!==null&&e.inputColorSpace!==n.colorSpace&&(p+=e.inputColorSpace===Kn?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==yc?n.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(n.colorSpace=e.inputColorSpace);const A=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;p+=`${t}MainImage(color0, UV, `,(n.attributes&Mu.DEPTH)!==0&&A.test(i)&&(p+="depth, ",n.readDepth=!0),p+=`color1);
	`;const E=t+"BlendOpacity";n.uniforms.set(E,T.opacity),p+=`color0 = blend${T.blendFunction}(color0, color1, ${E});

	`,u+=`uniform float ${E};

`}if(u+=i+`
`,r!==null&&(g+=r+`
`),l.set(Ai.FRAGMENT_HEAD,u),l.set(Ai.FRAGMENT_MAIN_UV,h),l.set(Ai.FRAGMENT_MAIN_IMAGE,p),l.set(Ai.VERTEX_HEAD,g),l.set(Ai.VERTEX_MAIN_SUPPORT,x),e.extensions!==null)for(const A of e.extensions)n.extensions.add(A)}}var WOe=class extends Es{constructor(t,...e){super("EffectPass"),this.fullscreenMaterial=new HOe(null,null,null,t),this.listener=n=>this.handleEvent(n),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(t){for(const e of this.effects)e.mainScene=t}set mainCamera(t){this.fullscreenMaterial.copyCameraSettings(t);for(const e of this.effects)e.mainCamera=t}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(t){this.fullscreenMaterial.encodeOutput=t}get dithering(){return this.fullscreenMaterial.dithering}set dithering(t){const e=this.fullscreenMaterial;e.dithering=t,e.needsUpdate=!0}setEffects(t){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=t.sort((e,n)=>n.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const t=new vNe;let e=0;for(const s of this.effects)if(s.blendMode.blendFunction===Bn.DST)t.attributes|=s.getAttributes()&Mu.DEPTH;else{if((t.attributes&s.getAttributes()&Mu.CONVOLUTION)!==0)throw new Error(`Convolution effects cannot be merged (${s.name})`);qOe("e"+e++,s,t)}let n=t.shaderParts.get(Ai.FRAGMENT_HEAD),i=t.shaderParts.get(Ai.FRAGMENT_MAIN_IMAGE),r=t.shaderParts.get(Ai.FRAGMENT_MAIN_UV);const a=/\bblend\b/g;for(const s of t.blendModes.values())n+=s.getShaderCode().replace(a,`blend${s.blendFunction}`)+`
`;(t.attributes&Mu.DEPTH)!==0?(t.readDepth&&(i=`float depth = readDepth(UV);

	`+i),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,t.colorSpace===Kn&&(i+=`color0 = sRGBToLinear(color0);
	`),t.uvTransformation?(r=`vec2 transformedUv = vUv;
`+r,t.defines.set("UV","transformedUv")):t.defines.set("UV","vUv"),t.shaderParts.set(Ai.FRAGMENT_HEAD,n),t.shaderParts.set(Ai.FRAGMENT_MAIN_IMAGE,i),t.shaderParts.set(Ai.FRAGMENT_MAIN_UV,r);for(const[s,o]of t.shaderParts)o!==null&&t.shaderParts.set(s,o.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(t)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(t,e=Il){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.depthPacking=e;for(const n of this.effects)n.setDepthTexture(t,e)}render(t,e,n,i,r){for(const a of this.effects)a.update(t,e,i);if(!this.skipRendering||this.renderToScreen){const a=this.fullscreenMaterial;a.inputBuffer=e.texture,a.time+=i*this.timeScale,t.setRenderTarget(this.renderToScreen?null:n),t.render(this.scene,this.camera)}}setSize(t,e){this.fullscreenMaterial.setSize(t,e);for(const n of this.effects)n.setSize(t,e)}initialize(t,e,n){this.renderer=t;for(const i of this.effects)i.initialize(t,e,n);this.updateMaterial(),n!==void 0&&n!==nr&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const t of this.effects)t.removeEventListener("change",this.listener),t.dispose()}handleEvent(t){switch(t.type){case"change":this.recompile();break}}},XOe=class extends Es{constructor(t,e,{renderTarget:n,resolutionScale:i=1,width:r=Wr.AUTO_SIZE,height:a=Wr.AUTO_SIZE,resolutionX:s=r,resolutionY:o=a}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new VK(t,e,new lD);const l=this.renderPass;l.ignoreBackground=!0,l.skipShadowMapUpdate=!0;const u=l.getClearPass();u.overrideClearColor=new zt(7829503),u.overrideClearAlpha=1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new Ei(1,1,{minFilter:Ir,magFilter:Ir}),this.renderTarget.texture.name="NormalPass.Target");const h=this.resolution=new Wr(this,s,o,i);h.addEventListener("change",p=>this.setSize(h.baseWidth,h.baseHeight))}set mainScene(t){this.renderPass.mainScene=t}set mainCamera(t){this.renderPass.mainCamera=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,i,r){const a=this.renderToScreen?null:this.renderTarget;this.renderPass.render(t,a,a)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height)}};function e1(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}new Ye;new Ye;function qK(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var El=function t(e,n,i){var r=this;qK(this,t),e1(this,"dot2",function(a,s){return r.x*a+r.y*s}),e1(this,"dot3",function(a,s,o){return r.x*a+r.y*s+r.z*o}),this.x=e,this.y=n,this.z=i},$Oe=[new El(1,1,0),new El(-1,1,0),new El(1,-1,0),new El(-1,-1,0),new El(1,0,1),new El(-1,0,1),new El(1,0,-1),new El(-1,0,-1),new El(0,1,1),new El(0,-1,1),new El(0,1,-1),new El(0,-1,-1)],UV=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],LV=new Array(512),BV=new Array(512),YOe=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var n=0;n<256;n++){var i;n&1?i=UV[n]^e&255:i=UV[n]^e>>8&255,LV[n]=LV[n+256]=i,BV[n]=BV[n+256]=$Oe[i%12]}};YOe(0);function ZOe(t){if(typeof t=="number")t=Math.abs(t);else if(typeof t=="string"){var e=t;t=0;for(var n=0;n<e.length;n++)t=(t+(n+1)*(e.charCodeAt(n)%96))%2147483647}return t===0&&(t=311),t}function zV(t){var e=ZOe(t);return function(){var n=e*48271%2147483647;return e=n,n/2147483647}}var KOe=function t(e){var n=this;qK(this,t),e1(this,"seed",0),e1(this,"init",function(i){n.seed=i,n.value=zV(i)}),e1(this,"value",zV(this.seed)),this.init(e)};new KOe(Math.random());const TI=z.createContext(null),kV=t=>(t.getAttributes()&2)===2,QOe=z.memo(z.forwardRef(({children:t,camera:e,scene:n,resolutionScale:i,enabled:r=!0,renderPriority:a=1,autoClear:s=!0,depthBuffer:o,enableNormalPass:l,stencilBuffer:u,multisampling:h=8,frameBufferType:p=Pr},g)=>{const{gl:x,scene:b,camera:M,size:S}=hi(),T=n||b,A=e||M,[E,j,R]=z.useMemo(()=>{const U=new gNe(x,{depthBuffer:o,stencilBuffer:u,multisampling:h,frameBufferType:p});U.addPass(new VK(T,A));let I=null,L=null;return l&&(L=new XOe(T,A),L.enabled=!1,U.addPass(L),i!==void 0&&(I=new HK({normalBuffer:L.texture,resolutionScale:i}),I.enabled=!1,U.addPass(I))),[U,L,I]},[A,x,o,u,h,p,T,l,i]);z.useEffect(()=>E==null?void 0:E.setSize(S.width,S.height),[E,S]),It((U,I)=>{if(r){const L=x.autoClear;x.autoClear=s,u&&!s&&x.clearStencil(),E.render(I),x.autoClear=L}},r?a:0);const C=z.useRef(null);z.useLayoutEffect(()=>{var L;const U=[],I=C.current.__r3f;if(I&&E){const F=I.children;for(let G=0;G<F.length;G++){const H=F[G].object;if(H instanceof Uf){const W=[H];if(!kV(H)){let k=null;for(;(k=(L=F[G+1])==null?void 0:L.object)instanceof Uf&&!kV(k);)W.push(k),G++}const Y=new WOe(A,...W);U.push(Y)}else H instanceof Es&&U.push(H)}for(const G of U)E==null||E.addPass(G);j&&(j.enabled=!0),R&&(R.enabled=!0)}return()=>{for(const F of U)E==null||E.removePass(F);j&&(j.enabled=!1),R&&(R.enabled=!1)}},[E,t,A,j,R]),z.useEffect(()=>{const U=x.toneMapping;return x.toneMapping=Tc,()=>{x.toneMapping=U}},[x]);const D=z.useMemo(()=>({composer:E,normalPass:j,downSamplingPass:R,resolutionScale:i,camera:A,scene:T}),[E,j,R,i,A,T]);return z.useImperativeHandle(g,()=>E,[E]),c.jsx(TI.Provider,{value:D,children:c.jsx("group",{ref:C,children:t})})}));let JOe=0;const FV=new WeakMap,Wb=(t,e)=>function({blendFunction:n=e==null?void 0:e.blendFunction,opacity:i=e==null?void 0:e.opacity,...r}){let a=FV.get(t);if(!a){const l=`@react-three/postprocessing/${t.name}-${JOe++}`;IT({[l]:t}),FV.set(t,a=l)}const s=hi(l=>l.camera),o=De.useMemo(()=>[...(e==null?void 0:e.args)??[],...r.args??[{...e,...r}]],[JSON.stringify(r)]);return c.jsx(a,{camera:s,"blendMode-blendFunction":n,"blendMode-opacity-value":i,...r,args:o})},eDe=z.forwardRef(function({blendFunction:t,worldFocusDistance:e,worldFocusRange:n,focusDistance:i,focusRange:r,focalLength:a,bokehScale:s,resolutionScale:o,resolutionX:l,resolutionY:u,width:h,height:p,target:g,depthTexture:x,...b},M){const{camera:S}=z.useContext(TI),T=g!=null,A=z.useMemo(()=>{const E=new MOe(S,{blendFunction:t,worldFocusDistance:e,worldFocusRange:n,focusDistance:i,focusRange:r,focalLength:a,bokehScale:s,resolutionScale:o,resolutionX:l,resolutionY:u,width:h,height:p});T&&(E.target=new se),x&&E.setDepthTexture(x.texture,x.packing);const j=E.maskPass;return j.maskFunction=_I.MULTIPLY_RGB_SET_ALPHA,E},[S,t,e,n,i,r,a,s,o,l,u,h,p,T,x]);return z.useEffect(()=>()=>{A.dispose()},[A]),c.jsx("primitive",{...b,ref:M,object:A,target:g})}),tDe=Wb(fOe,{blendFunction:0}),nDe=Wb(pOe),iDe=Wb(AOe,{blendFunction:5}),rDe=z.forwardRef(function(t,e){const{camera:n,normalPass:i,downSamplingPass:r,resolutionScale:a}=z.useContext(TI),s=z.useMemo(()=>i===null&&r===null?(console.error("Please enable the NormalPass in the EffectComposer in order to use SSAO."),{}):new POe(n,i&&!r?i.texture:null,{blendFunction:21,samples:30,rings:4,distanceThreshold:1,distanceFalloff:0,rangeThreshold:.5,rangeFalloff:.1,luminanceInfluence:.9,radius:20,bias:.5,intensity:1,color:void 0,normalDepthBuffer:r?r.texture:null,resolutionScale:a??1,depthAwareUpsampling:!0,...t}),[n,r,i,a]);return c.jsx("primitive",{ref:e,object:s,dispose:null})}),aDe=Wb(zOe),sDe=Wb(FOe),oDe=()=>{const t=Fe(n=>n.graphics);return t.enableSSAO||t.enableBloom||t.enableVignette||t.enableChromaticAberration||t.enableFilmGrain||t.enableDepthOfField?c.jsxs(QOe,{enableNormalPass:t.enableSSAO,children:[t.enableSSAO&&c.jsx(rDe,{blendFunction:Bn.MULTIPLY,samples:t.ssaoSamples,radius:.15,intensity:1.5,luminanceInfluence:.5,color:"#1a1a2e",worldDistanceThreshold:50,worldDistanceFalloff:8,worldProximityThreshold:.5,worldProximityFalloff:.2}),t.enableDepthOfField&&c.jsx(eDe,{focusDistance:.15,focalLength:.02,bokehScale:1,height:480}),t.enableBloom&&c.jsx(tDe,{intensity:.5,luminanceThreshold:.8,luminanceSmoothing:.9,mipmapBlur:!0}),t.enableFilmGrain&&c.jsx(iDe,{opacity:.025,blendFunction:Bn.OVERLAY}),c.jsx(aDe,{mode:vo.LINEAR}),t.enableVignette&&c.jsx(sDe,{offset:.3,darkness:.5,blendFunction:Bn.NORMAL}),t.enableChromaticAberration&&c.jsx(nDe,{offset:[5e-4,5e-4],blendFunction:Bn.NORMAL})]}):null},lDe=()=>{const{camera:t}=hi(),e=Fe(n=>n.gameTime);return It(()=>{wt.updateCameraPosition(t.position.x,t.position.y,t.position.z),wt.updateTimeOfDay(e)}),null},mo=new Set,cDe=20,uDe=15,Yg=[{name:"Overview",position:[40,25,40],target:[0,5,0],description:"Full factory overview"},{name:"Silos",position:[0,15,-40],target:[0,10,-22],description:"Raw material storage (Zone 1)"},{name:"Milling",position:[25,12,-6],target:[0,3,-6],description:"Roller mills (Zone 2)"},{name:"Sifting",position:[0,18,20],target:[0,9,6],description:"Plansifters (Zone 3)"},{name:"Packing",position:[-30,10,25],target:[0,2,20],description:"Packaging lines (Zone 4)"}],eT=CD(t=>({activePreset:null,targetPosition:null,targetLookAt:null,isAnimating:!1,setPreset:e=>{if(e>=0&&e<Yg.length){const n=Yg[e];t({activePreset:e,targetPosition:new se(...n.position),targetLookAt:new se(...n.target),isAnimating:!0})}},clearAnimation:()=>t({isAnimating:!1})})),fDe=({orbitControlsRef:t,autoRotateEnabled:e=!0,targetSpeed:n=.15})=>{const{camera:i}=hi(),{targetPosition:r,targetLookAt:a,isAnimating:s,clearAnimation:o}=eT(),l=z.useRef(0),u=z.useRef(0),h=z.useRef(new se),p=z.useRef(new se),g=z.useRef(new se);return z.useEffect(()=>{const x=S=>{if(S.target instanceof HTMLInputElement||S.target instanceof HTMLTextAreaElement)return;const T=S.key.toLowerCase();["w","a","s","d","arrowup","arrowdown","arrowleft","arrowright","q","e"].includes(T)&&mo.add(T)},b=S=>{const T=S.key.toLowerCase();mo.delete(T)},M=()=>{mo.clear()};return window.addEventListener("keydown",x),window.addEventListener("keyup",b),window.addEventListener("blur",M),()=>{window.removeEventListener("keydown",x),window.removeEventListener("keyup",b),window.removeEventListener("blur",M)}},[]),It((x,b)=>{if(mo.size>0&&(t!=null&&t.current)&&(p.current.subVectors(t.current.target,i.position),p.current.y=0,p.current.normalize(),g.current.crossVectors(p.current,i.up).normalize(),h.current.set(0,0,0),(mo.has("w")||mo.has("arrowup"))&&h.current.add(p.current),(mo.has("s")||mo.has("arrowdown"))&&h.current.sub(p.current),(mo.has("a")||mo.has("arrowleft"))&&h.current.sub(g.current),(mo.has("d")||mo.has("arrowright"))&&h.current.add(g.current),mo.has("q")&&(h.current.y-=1),mo.has("e")&&(h.current.y+=1),h.current.length()>0)){const A=h.current.y;h.current.y=0,h.current.length()>0&&(h.current.normalize(),h.current.multiplyScalar(cDe*b)),h.current.y=A*uDe*b,i.position.add(h.current),t.current.target.add(h.current)}if(t!=null&&t.current){const A=e?n:0,j=1-Math.exp(-b/2.5);u.current+=(A-u.current)*j,t.current.autoRotateSpeed=u.current}if(!s||!r||!a)return;l.current+=b*1.5;const M=Math.min(l.current,1),S=1-Math.pow(1-M,3);i.position.lerp(r,S*.1),t!=null&&t.current&&t.current.target.lerp(a,S*.1),(i.position.distanceTo(r)<.5||M>=1)&&(i.position.copy(r),t!=null&&t.current&&t.current.target.copy(a),l.current=0,o())}),z.useEffect(()=>{s&&(l.current=0)},[r,s]),null},hDe=()=>{const t=eT(i=>i.activePreset),e=eT(i=>i.isAnimating);if(t===null)return null;const n=Yg[t];return c.jsxs("div",{className:"fixed bottom-4 right-4 z-40 pointer-events-none",children:[c.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg bg-slate-900/80 backdrop-blur-sm border border-slate-700/50 shadow-lg transition-all duration-300 ${e?"scale-105":""}`,children:[c.jsx("div",{className:"w-6 h-6 rounded-md bg-cyan-600 flex items-center justify-center",children:c.jsx("span",{className:"text-white text-sm font-bold",children:t+1})}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-white text-xs font-semibold",children:n.name}),c.jsx("span",{className:"text-slate-400 text-[10px]",children:n.description})]}),e&&c.jsx("div",{className:"w-2 h-2 rounded-full bg-cyan-400 animate-pulse ml-1"})]}),c.jsxs("div",{className:"flex justify-end gap-1 mt-1 opacity-50",children:[Yg.map((i,r)=>c.jsx("div",{className:`w-4 h-4 rounded text-[9px] font-mono flex items-center justify-center transition-colors ${r===t?"bg-cyan-600 text-white":"bg-slate-800 text-slate-500"}`,children:r+1},r)),c.jsx("div",{className:"w-4 h-4 rounded text-[9px] font-mono flex items-center justify-center bg-slate-800 text-slate-500 ml-1",children:"0"})]})]})},GV=({camId:t,position:e,lookAt:n,container:i})=>{const r=z.useRef(null),{scene:a,gl:s}=hi(),o=CW(256,192,{minFilter:Rn,magFilter:Rn,format:Sr,stencilBuffer:!1,depthBuffer:!0}),l=z.useMemo(()=>new se(...n),[n]);z.useEffect(()=>{if(!i)return;let h=i.querySelector("canvas.camera-feed");return h||(h=document.createElement("canvas"),h.className="camera-feed",h.width=256,h.height=192,h.style.position="absolute",h.style.top="0",h.style.left="0",h.style.width="100%",h.style.height="100%",h.style.objectFit="cover",i.appendChild(h)),()=>{h&&h.parentNode===i&&i.removeChild(h)}},[i]);const u=z.useRef(0);return It(()=>{if(!r.current||!i||(u.current++,u.current%3!==0))return;r.current.position.set(...e),r.current.lookAt(l),r.current.updateMatrixWorld();const h=s.getRenderTarget();s.setRenderTarget(o),s.clear(),s.render(a,r.current),s.setRenderTarget(h);const p=i.querySelector("canvas.camera-feed");if(p)try{const g=o.width,x=o.height,b=new Uint8Array(g*x*4);s.readRenderTargetPixels(o,0,0,g,x,b);const M=p.getContext("2d");if(M){const S=M.createImageData(g,x);for(let T=0;T<x;T++)for(let A=0;A<g;A++){const E=((x-1-T)*g+A)*4,j=(T*g+A)*4;S.data[j]=b[E],S.data[j+1]=b[E+1],S.data[j+2]=b[E+2],S.data[j+3]=255}M.putImageData(S,0,0)}}catch{}}),c.jsx(pue,{ref:r,makeDefault:!1,fov:60,near:.5,far:200,position:e})},dDe=()=>{const t=Fe(r=>r.showSecurityCameras),e=Fe(r=>r.cameraContainers),n=Fe(r=>r.activeCameraId);if(!t)return null;const i=n?Jy.find(r=>r.id===n):null;return c.jsxs(c.Fragment,{children:[Jy.slice(0,6).map(r=>{const a=e.get(r.id)||null;return c.jsx(GV,{camId:r.id,position:r.position,lookAt:r.lookAt,container:a},r.id)}),i&&c.jsx(GV,{camId:`${i.id}-pip`,position:i.position,lookAt:i.lookAt,container:e.get(`${i.id}-pip`)||null},`${i.id}-pip`)]})},pDe=()=>{const[t,e]=z.useState(.8),[n,i]=z.useState(!0),[r,a]=z.useState(!1),[s,o]=z.useState(null),[l,u]=z.useState(null),[h,p]=z.useState(!1),[g,x]=z.useState(null),[b,M]=z.useState(!0),S=Fe(F=>F.setGraphicsQuality),T=Fe(F=>F.graphics.quality),A=Fe(F=>F.forkliftEmergencyStop),E=Fe(F=>F.setForkliftEmergencyStop),j=Fe(F=>F.addSafetyIncident),R=eT(F=>F.setPreset),C=z.useRef(null),D=z.useCallback(()=>{h||wt.resume().then(()=>{wt.startAmbientSounds(),wt.startOutdoorAmbient(),wt.startRadioChatter(),wt.startWorkerVoices(),wt.startPASystem(),wt.startCompressorCycling(),wt.startMetalClanks(),wt.startMusic(),p(!0)})},[h]);z.useEffect(()=>{const F=()=>D();return window.addEventListener("click",F,{once:!0}),window.addEventListener("keydown",F,{once:!0}),()=>{window.removeEventListener("click",F),window.removeEventListener("keydown",F)}},[D]),z.useEffect(()=>()=>{wt.stopAll()},[]),z.useEffect(()=>Zje(),[]),De.useEffect(()=>{const F={F1:"low",F2:"medium",F3:"high",F4:"ultra"},G=H=>{if(H.target instanceof HTMLInputElement||H.target instanceof HTMLTextAreaElement)return;if(H.key===" "||H.code==="Space"){H.preventDefault();const k=!A;E(k),k?(wt.playEmergencyStop(),j({type:"emergency",description:"Emergency stop activated via keyboard (Spacebar)"}),x("EMERGENCY STOP")):x("E-STOP RELEASED"),setTimeout(()=>x(null),2e3);return}if(H.key==="Escape"){(r||s||l)&&wt.playPanelClose(),a(!1),o(null),u(null);return}if(F[H.key]){H.preventDefault();const k=F[H.key];S(k),wt.playClick(),x(k),setTimeout(()=>x(null),2e3);return}const W=H.key.toLowerCase();if(W==="p"){H.preventDefault(),wt.playClick(),t>0?(e(0),x("PAUSED")):(e(.8),x("RESUMED")),setTimeout(()=>x(null),1500);return}if(W==="z"){H.preventDefault(),wt.playClick(),i(!n),x(n?"ZONES OFF":"ZONES ON"),setTimeout(()=>x(null),1500);return}if(W==="i"){H.preventDefault(),r?wt.playPanelClose():wt.playPanelOpen(),a(!r);return}if(W==="h"){H.preventDefault(),wt.playClick();const k=Fe.getState().showHeatMap;Fe.getState().setShowHeatMap(!k),x(k?"HEATMAP OFF":"HEATMAP ON"),setTimeout(()=>x(null),1500);return}if(W==="+"||W==="="){H.preventDefault(),wt.playClick();const k=Math.min(2,t+.1);e(k);return}if(W==="-"){H.preventDefault(),wt.playClick();const k=Math.max(0,t-.1);e(k);return}if(W==="m"){H.preventDefault(),wt.playClick();const k=Fe.getState().panelMinimized;Fe.getState().setPanelMinimized(!k);return}if(W==="t"){H.preventDefault(),wt.playClick(),Fe.getState().toggleTheme();const k=Fe.getState().theme;x(k==="dark"?"DARK MODE":"LIGHT MODE"),setTimeout(()=>x(null),1500);return}if(H.key==="?"||H.shiftKey&&H.key==="/"){H.preventDefault(),wt.playClick();const k=Fe.getState().showShortcuts;Fe.getState().setShowShortcuts(!k);return}if(W==="r"){H.preventDefault(),wt.playClick(),M(k=>!k),x(b?"ROTATION OFF":"ROTATION ON"),setTimeout(()=>x(null),1500);return}if(W==="f"){H.preventDefault(),wt.playClick(),document.fullscreenElement?(document.exitFullscreen().catch(()=>{}),x("WINDOWED")):(document.documentElement.requestFullscreen().catch(()=>{}),x("FULLSCREEN")),setTimeout(()=>x(null),1500);return}if(W==="g"){H.preventDefault(),wt.playClick();const k=Fe.getState().showMiniMap;Fe.getState().setShowMiniMap(!k),x(k?"GPS OFF":"GPS ON"),setTimeout(()=>x(null),1500);return}if(W==="c"){H.preventDefault(),wt.playClick();const k=Fe.getState().showSecurityCameras;Fe.getState().setShowSecurityCameras(!k),x(k?"CAMERAS OFF":"CAMERAS ON"),setTimeout(()=>x(null),1500);return}if(H.key==="0"){H.preventDefault(),wt.playClick(),R(0),x("RESET VIEW"),setTimeout(()=>x(null),1500);return}const Y=parseInt(H.key)-1;if(Y>=0&&Y<Yg.length){H.preventDefault(),wt.playClick(),R(Y);const k=Yg[Y];x(k.name.toUpperCase()),setTimeout(()=>x(null),2e3);return}};return window.addEventListener("keydown",G),()=>window.removeEventListener("keydown",G)},[r,s,l,S,t,n,A,E,j,R,b]);const U=De.useRef(r),I=De.useRef(s),L=De.useRef(l);return z.useEffect(()=>{r&&!U.current?wt.playPanelOpen():!r&&U.current&&wt.playPanelClose(),U.current=r},[r]),z.useEffect(()=>{s&&!I.current?wt.playPanelOpen():!s&&I.current&&wt.playPanelClose(),I.current=s},[s]),z.useEffect(()=>{l&&!L.current?wt.playPanelOpen():!l&&L.current&&wt.playPanelClose(),L.current=l},[l]),c.jsxs("div",{className:"relative w-full h-full bg-slate-950",children:[c.jsx(pje,{productionSpeed:t,setProductionSpeed:e,showZones:n,setShowZones:i,showAIPanel:r,setShowAIPanel:a,selectedMachine:s,onCloseSelection:()=>o(null)}),c.jsx(tNe,{}),c.jsx(H4e,{}),c.jsx(_a,{children:r&&c.jsx(Jje,{isOpen:r,onClose:()=>a(!1)})}),c.jsx(_a,{children:l&&c.jsx(cNe,{worker:l,onClose:()=>u(null)})}),c.jsxs(Sle,{shadows:T!=="low"?{type:hb}:!1,camera:{position:[40,25,40],fov:45,near:.5,far:300},gl:{antialias:T!=="low",alpha:!1,toneMappingExposure:1.1},dpr:1,children:[c.jsx("color",{attach:"background",args:["#0a0f1a"]}),c.jsx("fog",{attach:"fog",args:["#0a0f1a",120,280]}),c.jsxs(z.Suspense,{fallback:null,children:[c.jsx(mue,{ref:C,maxPolarAngle:Math.PI/2-.05,minPolarAngle:.2,minDistance:15,maxDistance:100,autoRotate:!0,autoRotateSpeed:0,target:[0,5,0],enableDamping:!0,dampingFactor:.05}),c.jsx(D0e,{productionSpeed:t,showZones:n,onSelectMachine:o,onSelectWorker:u}),c.jsx(lDe,{}),c.jsx(B4e,{}),c.jsx(fDe,{orbitControlsRef:C,autoRotateEnabled:b&&!s&&!l&&!r,targetSpeed:.15}),c.jsx(dDe,{}),c.jsx(oDe,{}),c.jsx(Fue,{all:!0})]})]}),c.jsx("div",{className:"fixed bottom-4 left-4 text-slate-600 text-xs pointer-events-none",children:"MillOS Digital Twin v0.10 | Powered by AI"}),c.jsx(hDe,{}),c.jsx(_a,{children:g&&c.jsx(Xn.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 pointer-events-none",children:c.jsx("div",{className:`px-6 py-4 rounded-xl backdrop-blur-xl border shadow-2xl ${g==="EMERGENCY STOP"?"bg-red-900/95 border-red-500 text-red-100 animate-pulse":g==="E-STOP RELEASED"?"bg-green-900/90 border-green-600 text-green-300":g==="low"?"bg-slate-800/90 border-slate-600 text-slate-300":g==="medium"?"bg-yellow-900/90 border-yellow-600 text-yellow-300":g==="high"?"bg-cyan-900/90 border-cyan-600 text-cyan-300":g==="ultra"?"bg-purple-900/90 border-purple-600 text-purple-300":"bg-slate-800/90 border-slate-600 text-slate-300"}`,children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold uppercase tracking-wider",children:g}),c.jsx("div",{className:"text-xs opacity-70 mt-1",children:g.includes("EMERGENCY")||g.includes("E-STOP")?"Safety System":["low","medium","high","ultra"].includes(g)?"Graphics Quality":"Status"})]})})})})]})};XQ.createRoot(document.getElementById("root")).render(c.jsx(pDe,{}));
